/*! For license information please see app.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(666)},720:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function a(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=a;var r={},o={};function s(e,t){var n,a,s;return t?(s=0<=(e>>>=0)&&e<256)&&(a=o[e])?a:(n=l(e,(0|e)<0?-1:0,!0),s&&(o[e]=n),n):(s=-128<=(e|=0)&&e<128)&&(a=r[e])?a:(n=l(e,e<0?-1:0,!1),s&&(r[e]=n),n)}function i(e,t){if(isNaN(e))return t?v:g;if(t){if(e<0)return v;if(e>=h)return k}else{if(e<=-f)return C;if(e+1>=f)return x}return e<0?i(-e,t).neg():l(e%d|0,e/d|0,t)}function l(e,t,a){return new n(e,t,a)}n.fromInt=s,n.fromNumber=i,n.fromBits=l;var u=Math.pow;function c(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var a;if((a=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===a)return c(e.substring(1),t,n).neg();for(var r=i(u(n,8)),o=g,s=0;s<e.length;s+=8){var l=Math.min(8,e.length-s),p=parseInt(e.substring(s,s+l),n);if(l<8){var d=i(u(n,l));o=o.mul(d).add(i(p))}else o=(o=o.mul(r)).add(i(p))}return o.unsigned=t,o}function p(e,t){return"number"==typeof e?i(e,t):"string"==typeof e?c(e,t):l(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}n.fromString=c,n.fromValue=p;var d=4294967296,h=d*d,f=h/2,m=s(1<<24),g=s(0);n.ZERO=g;var v=s(0,!0);n.UZERO=v;var b=s(1);n.ONE=b;var y=s(1,!0);n.UONE=y;var w=s(-1);n.NEG_ONE=w;var x=l(-1,2147483647,!1);n.MAX_VALUE=x;var k=l(-1,-1,!0);n.MAX_UNSIGNED_VALUE=k;var C=l(0,-2147483648,!1);n.MIN_VALUE=C;var E=n.prototype;E.toInt=function(){return this.unsigned?this.low>>>0:this.low},E.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},E.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(C)){var t=i(e),n=this.div(t),a=n.mul(t).sub(this);return n.toString(e)+a.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var r=i(u(e,6),this.unsigned),o=this,s="";;){var l=o.div(r),c=(o.sub(l.mul(r)).toInt()>>>0).toString(e);if((o=l).isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}},E.getHighBits=function(){return this.high},E.getHighBitsUnsigned=function(){return this.high>>>0},E.getLowBits=function(){return this.low},E.getLowBitsUnsigned=function(){return this.low>>>0},E.getNumBitsAbs=function(){if(this.isNegative())return this.eq(C)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},E.isZero=function(){return 0===this.high&&0===this.low},E.eqz=E.isZero,E.isNegative=function(){return!this.unsigned&&this.high<0},E.isPositive=function(){return this.unsigned||this.high>=0},E.isOdd=function(){return 1==(1&this.low)},E.isEven=function(){return 0==(1&this.low)},E.equals=function(e){return a(e)||(e=p(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},E.eq=E.equals,E.notEquals=function(e){return!this.eq(e)},E.neq=E.notEquals,E.ne=E.notEquals,E.lessThan=function(e){return this.comp(e)<0},E.lt=E.lessThan,E.lessThanOrEqual=function(e){return this.comp(e)<=0},E.lte=E.lessThanOrEqual,E.le=E.lessThanOrEqual,E.greaterThan=function(e){return this.comp(e)>0},E.gt=E.greaterThan,E.greaterThanOrEqual=function(e){return this.comp(e)>=0},E.gte=E.greaterThanOrEqual,E.ge=E.greaterThanOrEqual,E.compare=function(e){if(a(e)||(e=p(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},E.comp=E.compare,E.negate=function(){return!this.unsigned&&this.eq(C)?C:this.not().add(b)},E.neg=E.negate,E.add=function(e){a(e)||(e=p(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,s=e.high>>>16,i=65535&e.high,u=e.low>>>16,c=0,d=0,h=0,f=0;return h+=(f+=o+(65535&e.low))>>>16,d+=(h+=r+u)>>>16,c+=(d+=n+i)>>>16,c+=t+s,l((h&=65535)<<16|(f&=65535),(c&=65535)<<16|(d&=65535),this.unsigned)},E.subtract=function(e){return a(e)||(e=p(e)),this.add(e.neg())},E.sub=E.subtract,E.multiply=function(e){if(this.isZero())return g;if(a(e)||(e=p(e)),t)return l(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(C))return e.isOdd()?C:g;if(e.eq(C))return this.isOdd()?C:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return i(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,r=65535&this.high,o=this.low>>>16,s=65535&this.low,u=e.high>>>16,c=65535&e.high,d=e.low>>>16,h=65535&e.low,f=0,v=0,b=0,y=0;return b+=(y+=s*h)>>>16,v+=(b+=o*h)>>>16,b&=65535,v+=(b+=s*d)>>>16,f+=(v+=r*h)>>>16,v&=65535,f+=(v+=o*d)>>>16,v&=65535,f+=(v+=s*c)>>>16,f+=n*h+r*d+o*c+s*u,l((b&=65535)<<16|(y&=65535),(f&=65535)<<16|(v&=65535),this.unsigned)},E.mul=E.multiply,E.divide=function(e){if(a(e)||(e=p(e)),e.isZero())throw Error("division by zero");var n,r,o;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return y;o=v}else{if(this.eq(C))return e.eq(b)||e.eq(w)?C:e.eq(C)?b:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?b:w:(r=this.sub(e.mul(n)),o=n.add(r.div(e)));if(e.eq(C))return this.unsigned?v:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=g}for(r=this;r.gte(e);){n=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),c=s<=48?1:u(2,s-48),d=i(n),h=d.mul(e);h.isNegative()||h.gt(r);)h=(d=i(n-=c,this.unsigned)).mul(e);d.isZero()&&(d=b),o=o.add(d),r=r.sub(h)}return o},E.div=E.divide,E.modulo=function(e){return a(e)||(e=p(e)),t?l((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},E.mod=E.modulo,E.rem=E.modulo,E.not=function(){return l(~this.low,~this.high,this.unsigned)},E.and=function(e){return a(e)||(e=p(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},E.or=function(e){return a(e)||(e=p(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},E.xor=function(e){return a(e)||(e=p(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},E.shiftLeft=function(e){return a(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},E.shl=E.shiftLeft,E.shiftRight=function(e){return a(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},E.shr=E.shiftRight,E.shiftRightUnsigned=function(e){if(a(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},E.shru=E.shiftRightUnsigned,E.shr_u=E.shiftRightUnsigned,E.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},E.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},E.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},E.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},E.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,a){return a?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},666:function(e){var t=function(e){"use strict";var t,n=Object.prototype,a=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,a){var r=t&&t.prototype instanceof g?t:g,o=Object.create(r.prototype),s=new I(a||[]);return o._invoke=function(e,t,n){var a=p;return function(r,o){if(a===h)throw new Error("Generator is already running");if(a===f){if("throw"===r)throw o;return O()}for(n.method=r,n.arg=o;;){var s=n.delegate;if(s){var i=S(s,n);if(i){if(i===m)continue;return i}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===p)throw a=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=h;var l=c(e,t,n);if("normal"===l.type){if(a=n.done?f:d,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=f,n.method="throw",n.arg=l.arg)}}}(e,n,s),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var p="suspendedStart",d="suspendedYield",h="executing",f="completed",m={};function g(){}function v(){}function b(){}var y={};l(y,o,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(N([])));x&&x!==n&&a.call(x,o)&&(y=x);var k=b.prototype=g.prototype=Object.create(y);function C(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(r,o,s,i){var l=c(e[r],e,o);if("throw"!==l.type){var u=l.arg,p=u.value;return p&&"object"==typeof p&&a.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,s,i)}),(function(e){n("throw",e,s,i)})):t.resolve(p).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,i)}))}i(l.arg)}var r;this._invoke=function(e,a){function o(){return new t((function(t,r){n(e,a,t,r)}))}return r=r?r.then(o,o):o()}}function S(e,n){var a=e.iterator[n.method];if(a===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=c(a,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,m;var o=r.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function $(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach($,this),this.reset(!0)}function N(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,s=function n(){for(;++r<e.length;)if(a.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return s.next=s}}return{next:O}}function O(){return{value:t,done:!0}}return v.prototype=b,l(k,"constructor",b),l(b,"constructor",v),v.displayName=l(b,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,i,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},C(E.prototype),l(E.prototype,s,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var s=new E(u(t,n,a,r),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},C(k),l(k,i,"Generator"),l(k,o,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=N,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(a,r){return i.type="throw",i.arg=e,n.next=a,r&&(n.method="next",n.arg=t),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var l=a.call(s,"catchLoc"),u=a.call(s,"finallyLoc");if(l&&u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;T(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,a){return this.delegate={iterator:N(e),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},377:function(e,t,n){var a=n(832),r=n(652),o=n(801),s=n(30),i=n(618),l=n(49),u=n(971);u.alea=a,u.xor128=r,u.xorwow=o,u.xorshift7=s,u.xor4096=i,u.tychei=l,e.exports=u},832:function(e,t,n){var a;!function(e,r,o){function s(e){var t,n=this,a=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var a=.02519603282416938*(t+=e.charCodeAt(n));a-=t=a>>>0,t=(a*=t)>>>0,t+=4294967296*(a-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=a(" "),n.s1=a(" "),n.s2=a(" "),n.s0-=a(e),n.s0<0&&(n.s0+=1),n.s1-=a(e),n.s1<0&&(n.s1+=1),n.s2-=a(e),n.s2<0&&(n.s2+=1),a=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function l(e,t){var n=new s(e),a=t&&t.state,r=n.next;return r.int32=function(){return 4294967296*n.next()|0},r.double=function(){return r()+11102230246251565e-32*(2097152*r()|0)},r.quick=r,a&&("object"==typeof a&&i(a,n),r.state=function(){return i(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0===(a=function(){return l}.call(t,n,t,r))||(r.exports=a):this.alea=l}(0,e=n.nmd(e),n.amdD)},49:function(e,t,n){var a;!function(e,r,o){function s(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,a=t.d,r=t.a;return e=e<<25^e>>>7^n,n=n-a|0,a=a<<24^a>>>8^r,r=r-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-a|0,t.d=a<<16^n>>>16^r,t.a=r-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var a=0;a<n.length+20;a++)t.b^=0|n.charCodeAt(a),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function l(e,t){var n=new s(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&("object"==typeof a&&i(a,n),r.state=function(){return i(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0===(a=function(){return l}.call(t,n,t,r))||(r.exports=a):this.tychei=l}(0,e=n.nmd(e),n.amdD)},652:function(e,t,n){var a;!function(e,r,o){function s(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var a=0;a<n.length+64;a++)t.x^=0|n.charCodeAt(a),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function l(e,t){var n=new s(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&("object"==typeof a&&i(a,n),r.state=function(){return i(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0===(a=function(){return l}.call(t,n,t,r))||(r.exports=a):this.xor128=l}(0,e=n.nmd(e),n.amdD)},618:function(e,t,n){var a;!function(e,r,o){function s(e){var t=this;t.next=function(){var e,n,a=t.w,r=t.X,o=t.i;return t.w=a=a+1640531527|0,n=r[o+34&127],e=r[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=r[o]=n^e,t.i=o,n+(a^a>>>16)|0},function(e,t){var n,a,r,o,s,i=[],l=128;for(t===(0|t)?(a=t,t=null):(t+="\0",a=0,l=Math.max(l,t.length)),r=0,o=-32;o<l;++o)t&&(a^=t.charCodeAt((o+32)%t.length)),0===o&&(s=a),a^=a<<10,a^=a>>>15,a^=a<<4,a^=a>>>13,o>=0&&(s=s+1640531527|0,r=0==(n=i[127&o]^=a+s)?r+1:0);for(r>=128&&(i[127&(t&&t.length||0)]=-1),r=127,o=512;o>0;--o)a=i[r+34&127],n=i[r=r+1&127],a^=a<<13,n^=n<<17,a^=a>>>15,n^=n>>>12,i[r]=a^n;e.w=s,e.X=i,e.i=r}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function l(e,t){null==e&&(e=+new Date);var n=new s(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&(a.X&&i(a,n),r.state=function(){return i(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0===(a=function(){return l}.call(t,n,t,r))||(r.exports=a):this.xor4096=l}(0,e=n.nmd(e),n.amdD)},30:function(e,t,n){var a;!function(e,r,o){function s(e){var t=this;t.next=function(){var e,n,a=t.x,r=t.i;return e=a[r],n=(e^=e>>>7)^e<<24,n^=(e=a[r+1&7])^e>>>10,n^=(e=a[r+3&7])^e>>>3,n^=(e=a[r+4&7])^e<<7,e=a[r+7&7],n^=(e^=e<<13)^e<<9,a[r]=n,t.i=r+1&7,n},function(e,t){var n,a=[];if(t===(0|t))a[0]=t;else for(t=""+t,n=0;n<t.length;++n)a[7&n]=a[7&n]<<15^t.charCodeAt(n)+a[n+1&7]<<13;for(;a.length<8;)a.push(0);for(n=0;n<8&&0===a[n];++n);for(8==n?a[7]=-1:a[n],e.x=a,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function l(e,t){null==e&&(e=+new Date);var n=new s(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&(a.x&&i(a,n),r.state=function(){return i(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0===(a=function(){return l}.call(t,n,t,r))||(r.exports=a):this.xorshift7=l}(0,e=n.nmd(e),n.amdD)},801:function(e,t,n){var a;!function(e,r,o){function s(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var a=0;a<n.length+64;a++)t.x^=0|n.charCodeAt(a),a==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function l(e,t){var n=new s(e),a=t&&t.state,r=function(){return(n.next()>>>0)/4294967296};return r.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},r.int32=n.next,r.quick=r,a&&("object"==typeof a&&i(a,n),r.state=function(){return i(n,{})}),r}r&&r.exports?r.exports=l:n.amdD&&n.amdO?void 0===(a=function(){return l}.call(t,n,t,r))||(r.exports=a):this.xorwow=l}(0,e=n.nmd(e),n.amdD)},971:function(e,t,n){var a;!function(r,o){var s,i=this,l=256,u=o.pow(l,6),c=o.pow(2,52),p=2*c,d=255;function h(e,t,n){var a=[],d=v(g((t=1==t?{entropy:!0}:t||{}).entropy?[e,b(r)]:null==e?function(){try{var e;return s&&(e=s.randomBytes)?e=e(l):(e=new Uint8Array(l),(i.crypto||i.msCrypto).getRandomValues(e)),b(e)}catch(e){var t=i.navigator,n=t&&t.plugins;return[+new Date,i,n,i.screen,b(r)]}}():e,3),a),h=new f(a),y=function(){for(var e=h.g(6),t=u,n=0;e<c;)e=(e+n)*l,t*=l,n=h.g(1);for(;e>=p;)e/=2,t/=2,n>>>=1;return(e+n)/t};return y.int32=function(){return 0|h.g(4)},y.quick=function(){return h.g(4)/4294967296},y.double=y,v(b(h.S),r),(t.pass||n||function(e,t,n,a){return a&&(a.S&&m(a,h),e.state=function(){return m(h,{})}),n?(o.random=e,t):e})(y,d,"global"in t?t.global:this==o,t.state)}function f(e){var t,n=e.length,a=this,r=0,o=a.i=a.j=0,s=a.S=[];for(n||(e=[n++]);r<l;)s[r]=r++;for(r=0;r<l;r++)s[r]=s[o=d&o+e[r%n]+(t=s[r])],s[o]=t;(a.g=function(e){for(var t,n=0,r=a.i,o=a.j,s=a.S;e--;)t=s[r=d&r+1],n=n*l+s[d&(s[r]=s[o=d&o+t])+(s[o]=t)];return a.i=r,a.j=o,n})(l)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function g(e,t){var n,a=[],r=typeof e;if(t&&"object"==r)for(n in e)try{a.push(g(e[n],t-1))}catch(e){}return a.length?a:"string"==r?e:e+"\0"}function v(e,t){for(var n,a=e+"",r=0;r<a.length;)t[d&r]=d&(n^=19*t[d&r])+a.charCodeAt(r++);return b(t)}function b(e){return String.fromCharCode.apply(0,e)}if(o.seedrandom=h,v(o.random(),r),e.exports){e.exports=h;try{s=n(42)}catch(e){}}else void 0===(a=function(){return h}.call(t,n,t,e))||(e.exports=a)}([],Math)},744:function(e,t){"use strict";t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[e,a]of t)n[e]=a;return n}},410:function(){},628:function(){},601:function(){},792:function(){},977:function(){},42:function(){}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){"use strict";var e={};n.r(e),n.d(e,{auroraPreloaderContent:function(){return Jo},bindMethods:function(){return bs},cancelAnimationFrame:function(){return ts},colorHexToRgb:function(){return ps},colorHsbToHsl:function(){return ms},colorHslToHsb:function(){return gs},colorHslToRgb:function(){return fs},colorRgbToHex:function(){return ds},colorRgbToHsl:function(){return hs},colorThemeCSSProperties:function(){return vs},deleteProps:function(){return Qo},eventNameToColonCase:function(){return Zo},extend:function(){return cs},flattenArray:function(){return ys},getTranslate:function(){return ss},id:function(){return Go},iosPreloaderContent:function(){return Ko},isObject:function(){return ls},mdPreloaderContent:function(){return Yo},merge:function(){return us},nextFrame:function(){return as},nextTick:function(){return ns},now:function(){return rs},parseUrlQuery:function(){return os},requestAnimationFrame:function(){return es},serializeObject:function(){return is},uniqueNumber:function(){return Uo}});var t={};n.r(t),n.d(t,{$:function(){return Fs},add:function(){return _i},addClass:function(){return _s},animate:function(){return Hi},animationEnd:function(){return ai},append:function(){return wi},appendTo:function(){return xi},attr:function(){return Ws},blur:function(){return Xi},change:function(){return nl},children:function(){return Pi},click:function(){return qi},closest:function(){return Mi},css:function(){return di},data:function(){return Us},dataset:function(){return qs},default:function(){return ml},detach:function(){return Fi},each:function(){return hi},empty:function(){return Li},eq:function(){return yi},filter:function(){return fi},find:function(){return Bi},focus:function(){return Yi},focusin:function(){return Ki},focusout:function(){return Ji},hasClass:function(){return Vs},height:function(){return si},hide:function(){return ui},html:function(){return mi},index:function(){return bi},insertAfter:function(){return Si},insertBefore:function(){return Ei},is:function(){return vi},keydown:function(){return Qi},keypress:function(){return el},keyup:function(){return Zi},mousedown:function(){return al},mouseenter:function(){return sl},mouseleave:function(){return il},mousemove:function(){return rl},mouseout:function(){return ll},mouseover:function(){return ul},mouseup:function(){return ol},next:function(){return $i},nextAll:function(){return Ti},off:function(){return Qs},offset:function(){return li},on:function(){return Zs},once:function(){return ei},outerHeight:function(){return ii},outerWidth:function(){return oi},parent:function(){return Ri},parents:function(){return Ai},prepend:function(){return ki},prependTo:function(){return Ci},prev:function(){return Ii},prevAll:function(){return Ni},prop:function(){return js},remove:function(){return Di},removeAttr:function(){return Hs},removeClass:function(){return Ls},removeData:function(){return Gs},resize:function(){return hl},scroll:function(){return fl},scrollLeft:function(){return Wi},scrollTo:function(){return zi},scrollTop:function(){return Vi},show:function(){return ci},siblings:function(){return Oi},stop:function(){return ji},styles:function(){return pi},submit:function(){return tl},text:function(){return gi},toggleClass:function(){return zs},touchend:function(){return pl},touchmove:function(){return dl},touchstart:function(){return cl},transform:function(){return Ks},transition:function(){return Js},transitionEnd:function(){return ni},trigger:function(){return ti},val:function(){return Xs},value:function(){return Ys},width:function(){return ri}});var a={};n.r(a),n.d(a,{assertParamsValid:function(){return QT},computeFlatOffset:function(){return dI},computeOutShape:function(){return tI},getNormalizedAxes:function(){return oI},isSliceContinous:function(){return pI},maskToAxes:function(){return eI},parseSliceParams:function(){return hI},sliceInfo:function(){return fI},startForAxis:function(){return uI},startIndicesWithElidedDims:function(){return sI},stopForAxis:function(){return cI},stopIndicesWithElidedDims:function(){return iI},stridesForAxis:function(){return lI},stridesWithElidedDims:function(){return nI}});var r={};n.r(r),n.d(r,{collectGatherOpShapeInfo:function(){return tM},computeOutShape:function(){return eM},segOpComputeOptimalWindowSize:function(){return QA}});var o={};n.r(o),n.d(o,{ERF_A1:function(){return yA},ERF_A2:function(){return wA},ERF_A3:function(){return xA},ERF_A4:function(){return kA},ERF_A5:function(){return CA},ERF_P:function(){return bA},PARALLELIZE_THRESHOLD:function(){return rA},SELU_SCALE:function(){return vA},SELU_SCALEALPHA:function(){return gA},applyActivation:function(){return qO},assertAndGetBroadcastShape:function(){return YT},assertAxesAreInnerMostDims:function(){return GN},assertParamsConsistent:function(){return nA},assignToTypedArray:function(){return NA},axesAreInnerMostDims:function(){return WN},calculateShapes:function(){return mA},checkEinsumDimSizes:function(){return DA},checkPadOnDimRoundingMode:function(){return GI},combineLocations:function(){return HN},complexWithEvenIndex:function(){return $A},complexWithOddIndex:function(){return TA},computeConv2DInfo:function(){return DI},computeConv3DInfo:function(){return FI},computeDefaultPad:function(){return _I},computeDilation2DInfo:function(){return MI},computeOptimalWindowSize:function(){return oA},computeOutAndReduceShapes:function(){return jN},computeOutShape:function(){return aA},computePool2DInfo:function(){return BI},computePool3DInfo:function(){return PI},convertConv2DDataFormat:function(){return UI},decodeEinsumEquation:function(){return BA},eitherStridesOrDilationsAreOne:function(){return jI},expandShapeToKeepDim:function(){return UN},exponent:function(){return RA},exponents:function(){return OA},fromStringArrayToUint8:function(){return aM},fromUint8ToStringArray:function(){return nM},getAxesPermutation:function(){return qN},getBroadcastDims:function(){return qT},getComplexWithIndex:function(){return IA},getEinsumComputePath:function(){return FA},getEinsumPermutation:function(){return PA},getFusedBiasGradient:function(){return GO},getFusedDyActivation:function(){return UO},getImageCenter:function(){return sA},getInnerMostAxes:function(){return YN},getPermuted:function(){return lA},getReductionAxes:function(){return XT},getReshaped:function(){return iA},getReshapedPermuted:function(){return uA},getSliceBeginCoords:function(){return cA},getSliceSize:function(){return pA},getSparseFillEmptyRowsIndicesDenseShapeMismatch:function(){return VA},getSparseFillEmptyRowsNegativeIndexErrorMessage:function(){return WA},getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:function(){return HA},getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:function(){return GA},getSparseReshapeInputOutputMismatchErrorMessage:function(){return XA},getSparseReshapeInputOutputMultipleErrorMessage:function(){return qA},getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:function(){return jA},getSparseReshapeNegativeOutputDimErrorMessage:function(){return UA},getSparseSegmentReductionIndicesOutOfRangeErrorMessage:function(){return ZA},getSparseSegmentReductionNegativeSegmentIdsErrorMessage:function(){return YA},getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:function(){return KA},getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:function(){return JA},getUndoAxesPermutation:function(){return XN},isIdentityPermutation:function(){return _A},log:function(){return RS},mergeRealAndImagArrays:function(){return EA},prepareAndValidate:function(){return dA},prepareSplitSize:function(){return zA},segment_util:function(){return r},shouldFuse:function(){return XO},slice_util:function(){return a},splitRealAndImagArrays:function(){return SA},tupleValuesAreOne:function(){return HI},upcastType:function(){return $$},validateInput:function(){return fA},validateUpdateShape:function(){return hA},warn:function(){return OS}});var s={};function i(e,t){const n=Object.create(null),a=e.split(",");for(let e=0;e<a.length;e++)n[a[e]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}n.r(s),n.d(s,{addImpl:function(){return OW},bincountImpl:function(){return kH},bincountReduceImpl:function(){return CH},ceilImpl:function(){return $H},concatImpl:function(){return AH},equalImpl:function(){return fj},expImpl:function(){return Sj},expm1Impl:function(){return Oj},floorImpl:function(){return qj},gatherNdImpl:function(){return tU},gatherV2Impl:function(){return aU},greaterEqualImpl:function(){return lU},greaterImpl:function(){return oU},lessEqualImpl:function(){return xU},lessImpl:function(){return bU},linSpaceImpl:function(){return EU},logImpl:function(){return $U},maxImpl:function(){return VU},maximumImpl:function(){return jU},minimumImpl:function(){return eG},multiplyImpl:function(){return sj},negImpl:function(){return cG},notEqualImpl:function(){return bG},prodImpl:function(){return RG},rangeImpl:function(){return MG},rsqrtImpl:function(){return UG},sigmoidImpl:function(){return vW},simpleAbsImpl:function(){return LW},sliceImpl:function(){return bH},sparseFillEmptyRowsImpl:function(){return pq},sparseReshapeImpl:function(){return hq},sparseSegmentReductionImpl:function(){return mq},sqrtImpl:function(){return wq},squaredDifferenceImpl:function(){return Eq},stridedSliceImpl:function(){return Nq},stringNGramsImpl:function(){return Aq},stringSplitImpl:function(){return Pq},stringToHashBucketFastImpl:function(){return Fq},subImpl:function(){return Dj},tileImpl:function(){return Wq},topKImpl:function(){return Gq},transposeImpl:function(){return GW},uniqueImpl:function(){return Qq}});const l="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",u=i(l);function c(e){return!!e||""===e}function p(e){if(N(e)){const t={};for(let n=0;n<e.length;n++){const a=e[n],r=M(a)?f(a):p(a);if(r)for(const e in r)t[e]=r[e]}return t}return M(e)||P(e)?e:void 0}const d=/;(?![^(]*\))/g,h=/:(.+)/;function f(e){const t={};return e.split(d).forEach((e=>{if(e){const n=e.split(h);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function m(e){let t="";if(M(e))t=e;else if(N(e))for(let n=0;n<e.length;n++){const a=m(e[n]);a&&(t+=a+" ")}else if(P(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const g=e=>null==e?"":N(e)||P(e)&&(e.toString===F||!A(e.toString))?JSON.stringify(e,v,2):String(e),v=(e,t)=>t&&t.__v_isRef?v(e,t.value):O(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n])=>(e[`${t} =>`]=n,e)),{})}:R(t)?{[`Set(${t.size})`]:[...t.values()]}:!P(t)||N(t)||L(t)?t:String(t),b={},y=[],w=()=>{},x=()=>!1,k=/^on[^a-z]/,C=e=>k.test(e),E=e=>e.startsWith("onUpdate:"),S=Object.assign,$=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},T=Object.prototype.hasOwnProperty,I=(e,t)=>T.call(e,t),N=Array.isArray,O=e=>"[object Map]"===_(e),R=e=>"[object Set]"===_(e),A=e=>"function"==typeof e,M=e=>"string"==typeof e,B=e=>"symbol"==typeof e,P=e=>null!==e&&"object"==typeof e,D=e=>P(e)&&A(e.then)&&A(e.catch),F=Object.prototype.toString,_=e=>F.call(e),L=e=>"[object Object]"===_(e),z=e=>M(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,V=i(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),W=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},H=/-(\w)/g,j=W((e=>e.replace(H,((e,t)=>t?t.toUpperCase():"")))),U=/\B([A-Z])/g,G=W((e=>e.replace(U,"-$1").toLowerCase())),q=W((e=>e.charAt(0).toUpperCase()+e.slice(1))),X=W((e=>e?`on${q(e)}`:"")),Y=(e,t)=>!Object.is(e,t),K=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},J=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Z=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Q;const ee=()=>Q||(Q="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:{});let te;const ne=[];class ae{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&te&&(this.parent=te,this.index=(te.scopes||(te.scopes=[])).push(this)-1)}run(e){if(this.active)try{return this.on(),e()}finally{this.off()}else 0}on(){this.active&&(ne.push(this),te=this)}off(){this.active&&(ne.pop(),te=ne[ne.length-1])}stop(e){if(this.active){if(this.effects.forEach((e=>e.stop())),this.cleanups.forEach((e=>e())),this.scopes&&this.scopes.forEach((e=>e.stop(!0))),this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.active=!1}}}function re(e,t){(t=t||te)&&t.active&&t.effects.push(e)}const oe=e=>{const t=new Set(e);return t.w=0,t.n=0,t},se=e=>(e.w&ce)>0,ie=e=>(e.n&ce)>0,le=new WeakMap;let ue=0,ce=1;const pe=[];let de;const he=Symbol(""),fe=Symbol("");class me{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],re(this,n)}run(){if(!this.active)return this.fn();if(!pe.includes(this))try{return pe.push(de=this),be.push(ve),ve=!0,ce=1<<++ue,ue<=30?(({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=ce})(this):ge(this),this.fn()}finally{ue<=30&&(e=>{const{deps:t}=e;if(t.length){let n=0;for(let a=0;a<t.length;a++){const r=t[a];se(r)&&!ie(r)?r.delete(e):t[n++]=r,r.w&=~ce,r.n&=~ce}t.length=n}})(this),ce=1<<--ue,we(),pe.pop();const e=pe.length;de=e>0?pe[e-1]:void 0}}stop(){this.active&&(ge(this),this.onStop&&this.onStop(),this.active=!1)}}function ge(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let ve=!0;const be=[];function ye(){be.push(ve),ve=!1}function we(){const e=be.pop();ve=void 0===e||e}function xe(e,t,n){if(!ke())return;let a=le.get(e);a||le.set(e,a=new Map);let r=a.get(n);r||a.set(n,r=oe());Ce(r,undefined)}function ke(){return ve&&void 0!==de}function Ce(e,t){let n=!1;ue<=30?ie(e)||(e.n|=ce,n=!se(e)):n=!e.has(de),n&&(e.add(de),de.deps.push(e))}function Ee(e,t,n,a,r,o){const s=le.get(e);if(!s)return;let i=[];if("clear"===t)i=[...s.values()];else if("length"===n&&N(e))s.forEach(((e,t)=>{("length"===t||t>=a)&&i.push(e)}));else switch(void 0!==n&&i.push(s.get(n)),t){case"add":N(e)?z(n)&&i.push(s.get("length")):(i.push(s.get(he)),O(e)&&i.push(s.get(fe)));break;case"delete":N(e)||(i.push(s.get(he)),O(e)&&i.push(s.get(fe)));break;case"set":O(e)&&i.push(s.get(he))}if(1===i.length)i[0]&&Se(i[0]);else{const e=[];for(const t of i)t&&e.push(...t);Se(oe(e))}}function Se(e,t){for(const t of N(e)?e:[...e])(t!==de||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const $e=i("__proto__,__v_isRef,__isVue"),Te=new Set(Object.getOwnPropertyNames(Symbol).map((e=>Symbol[e])).filter(B)),Ie=Me(),Ne=Me(!1,!0),Oe=Me(!0),Re=Ae();function Ae(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=gt(this);for(let e=0,t=this.length;e<t;e++)xe(n,0,e+"");const a=n[t](...e);return-1===a||!1===a?n[t](...e.map(gt)):a}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){ye();const n=gt(this)[t].apply(this,e);return we(),n}})),e}function Me(e=!1,t=!1){return function(n,a,r){if("__v_isReactive"===a)return!e;if("__v_isReadonly"===a)return e;if("__v_raw"===a&&r===(e?t?lt:it:t?st:ot).get(n))return n;const o=N(n);if(!e&&o&&I(Re,a))return Reflect.get(Re,a,r);const s=Reflect.get(n,a,r);if(B(a)?Te.has(a):$e(a))return s;if(e||xe(n,0,a),t)return s;if(kt(s)){return!o||!z(a)?s.value:s}return P(s)?e?pt(s):ct(s):s}}function Be(e=!1){return function(t,n,a,r){let o=t[n];if(!e&&!ft(a)&&(a=gt(a),o=gt(o),!N(t)&&kt(o)&&!kt(a)))return o.value=a,!0;const s=N(t)&&z(n)?Number(n)<t.length:I(t,n),i=Reflect.set(t,n,a,r);return t===gt(r)&&(s?Y(a,o)&&Ee(t,"set",n,a):Ee(t,"add",n,a)),i}}const Pe={get:Ie,set:Be(),deleteProperty:function(e,t){const n=I(e,t),a=(e[t],Reflect.deleteProperty(e,t));return a&&n&&Ee(e,"delete",t,void 0),a},has:function(e,t){const n=Reflect.has(e,t);return B(t)&&Te.has(t)||xe(e,0,t),n},ownKeys:function(e){return xe(e,0,N(e)?"length":he),Reflect.ownKeys(e)}},De={get:Oe,set:(e,t)=>!0,deleteProperty:(e,t)=>!0},Fe=S({},Pe,{get:Ne,set:Be(!0)}),_e=e=>e,Le=e=>Reflect.getPrototypeOf(e);function ze(e,t,n=!1,a=!1){const r=gt(e=e.__v_raw),o=gt(t);t!==o&&!n&&xe(r,0,t),!n&&xe(r,0,o);const{has:s}=Le(r),i=a?_e:n?yt:bt;return s.call(r,t)?i(e.get(t)):s.call(r,o)?i(e.get(o)):void(e!==r&&e.get(t))}function Ve(e,t=!1){const n=this.__v_raw,a=gt(n),r=gt(e);return e!==r&&!t&&xe(a,0,e),!t&&xe(a,0,r),e===r?n.has(e):n.has(e)||n.has(r)}function We(e,t=!1){return e=e.__v_raw,!t&&xe(gt(e),0,he),Reflect.get(e,"size",e)}function He(e){e=gt(e);const t=gt(this);return Le(t).has.call(t,e)||(t.add(e),Ee(t,"add",e,e)),this}function je(e,t){t=gt(t);const n=gt(this),{has:a,get:r}=Le(n);let o=a.call(n,e);o||(e=gt(e),o=a.call(n,e));const s=r.call(n,e);return n.set(e,t),o?Y(t,s)&&Ee(n,"set",e,t):Ee(n,"add",e,t),this}function Ue(e){const t=gt(this),{has:n,get:a}=Le(t);let r=n.call(t,e);r||(e=gt(e),r=n.call(t,e));a&&a.call(t,e);const o=t.delete(e);return r&&Ee(t,"delete",e,void 0),o}function Ge(){const e=gt(this),t=0!==e.size,n=e.clear();return t&&Ee(e,"clear",void 0,void 0),n}function qe(e,t){return function(n,a){const r=this,o=r.__v_raw,s=gt(o),i=t?_e:e?yt:bt;return!e&&xe(s,0,he),o.forEach(((e,t)=>n.call(a,i(e),i(t),r)))}}function Xe(e,t,n){return function(...a){const r=this.__v_raw,o=gt(r),s=O(o),i="entries"===e||e===Symbol.iterator&&s,l="keys"===e&&s,u=r[e](...a),c=n?_e:t?yt:bt;return!t&&xe(o,0,l?fe:he),{next(){const{value:e,done:t}=u.next();return t?{value:e,done:t}:{value:i?[c(e[0]),c(e[1])]:c(e),done:t}},[Symbol.iterator](){return this}}}}function Ye(e){return function(...t){return"delete"!==e&&this}}function Ke(){const e={get(e){return ze(this,e)},get size(){return We(this)},has:Ve,add:He,set:je,delete:Ue,clear:Ge,forEach:qe(!1,!1)},t={get(e){return ze(this,e,!1,!0)},get size(){return We(this)},has:Ve,add:He,set:je,delete:Ue,clear:Ge,forEach:qe(!1,!0)},n={get(e){return ze(this,e,!0)},get size(){return We(this,!0)},has(e){return Ve.call(this,e,!0)},add:Ye("add"),set:Ye("set"),delete:Ye("delete"),clear:Ye("clear"),forEach:qe(!0,!1)},a={get(e){return ze(this,e,!0,!0)},get size(){return We(this,!0)},has(e){return Ve.call(this,e,!0)},add:Ye("add"),set:Ye("set"),delete:Ye("delete"),clear:Ye("clear"),forEach:qe(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((r=>{e[r]=Xe(r,!1,!1),n[r]=Xe(r,!0,!1),t[r]=Xe(r,!1,!0),a[r]=Xe(r,!0,!0)})),[e,n,t,a]}const[Je,Ze,Qe,et]=Ke();function tt(e,t){const n=t?e?et:Qe:e?Ze:Je;return(t,a,r)=>"__v_isReactive"===a?!e:"__v_isReadonly"===a?e:"__v_raw"===a?t:Reflect.get(I(n,a)&&a in t?n:t,a,r)}const nt={get:tt(!1,!1)},at={get:tt(!1,!0)},rt={get:tt(!0,!1)};const ot=new WeakMap,st=new WeakMap,it=new WeakMap,lt=new WeakMap;function ut(e){return e.__v_skip||!Object.isExtensible(e)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((e=>_(e).slice(8,-1))(e))}function ct(e){return e&&e.__v_isReadonly?e:dt(e,!1,Pe,nt,ot)}function pt(e){return dt(e,!0,De,rt,it)}function dt(e,t,n,a,r){if(!P(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const o=r.get(e);if(o)return o;const s=ut(e);if(0===s)return e;const i=new Proxy(e,2===s?a:n);return r.set(e,i),i}function ht(e){return ft(e)?ht(e.__v_raw):!(!e||!e.__v_isReactive)}function ft(e){return!(!e||!e.__v_isReadonly)}function mt(e){return ht(e)||ft(e)}function gt(e){const t=e&&e.__v_raw;return t?gt(t):e}function vt(e){return J(e,"__v_skip",!0),e}const bt=e=>P(e)?ct(e):e,yt=e=>P(e)?pt(e):e;function wt(e){ke()&&((e=gt(e)).dep||(e.dep=oe()),Ce(e.dep))}function xt(e,t){(e=gt(e)).dep&&Se(e.dep)}function kt(e){return Boolean(e&&!0===e.__v_isRef)}function Ct(e){return Et(e,!1)}function Et(e,t){return kt(e)?e:new St(e,t)}class St{constructor(e,t){this._shallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:gt(e),this._value=t?e:bt(e)}get value(){return wt(this),this._value}set value(e){e=this._shallow?e:gt(e),Y(e,this._rawValue)&&(this._rawValue=e,this._value=this._shallow?e:bt(e),xt(this))}}const $t={get:(e,t,n)=>function(e){return kt(e)?e.value:e}(Reflect.get(e,t,n)),set:(e,t,n,a)=>{const r=e[t];return kt(r)&&!kt(n)?(r.value=n,!0):Reflect.set(e,t,n,a)}};function Tt(e){return ht(e)?e:new Proxy(e,$t)}class It{constructor(e,t,n){this._setter=t,this.dep=void 0,this._dirty=!0,this.__v_isRef=!0,this.effect=new me(e,(()=>{this._dirty||(this._dirty=!0,xt(this))})),this.__v_isReadonly=n}get value(){const e=gt(this);return wt(e),e._dirty&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function Nt(e,t){let n,a;const r=A(e);r?(n=e,a=w):(n=e.get,a=e.set);return new It(n,a,r||!a)}Promise.resolve();new Set;new Map;let Ot,Rt=[],At=!1;function Mt(e,...t){Ot?Ot.emit(e,...t):At||Rt.push({event:e,args:t})}function Bt(e,t){var n,a;if(Ot=e,Ot)Ot.enabled=!0,Rt.forEach((({event:e,args:t})=>Ot.emit(e,...t))),Rt=[];else if("undefined"!=typeof window&&window.HTMLElement&&!(null===(a=null===(n=window.navigator)||void 0===n?void 0:n.userAgent)||void 0===a?void 0:a.includes("jsdom"))){(t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push((e=>{Bt(e,t)})),setTimeout((()=>{Ot||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,At=!0,Rt=[])}),3e3)}else At=!0,Rt=[]}const Pt=_t("component:added"),Dt=_t("component:updated"),Ft=_t("component:removed");function _t(e){return t=>{Mt(e,t.appContext.app,t.uid,t.parent?t.parent.uid:void 0,t)}}function Lt(e,t,...n){const a=e.vnode.props||b;let r=n;const o=t.startsWith("update:"),s=o&&t.slice(7);if(s&&s in a){const e=`${"modelValue"===s?"model":s}Modifiers`,{number:t,trim:o}=a[e]||b;o?r=n.map((e=>e.trim())):t&&(r=n.map(Z))}let i;__VUE_PROD_DEVTOOLS__&&function(e,t,n){Mt("component:emit",e.appContext.app,e,t,n)}(e,t,r);let l=a[i=X(t)]||a[i=X(j(t))];!l&&o&&(l=a[i=X(G(t))]),l&&yr(l,e,6,r);const u=a[i+"Once"];if(u){if(e.emitted){if(e.emitted[i])return}else e.emitted={};e.emitted[i]=!0,yr(u,e,6,r)}}function zt(e,t,n=!1){const a=t.emitsCache,r=a.get(e);if(void 0!==r)return r;const o=e.emits;let s={},i=!1;if(__VUE_OPTIONS_API__&&!A(e)){const a=e=>{const n=zt(e,t,!0);n&&(i=!0,S(s,n))};!n&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}return o||i?(N(o)?o.forEach((e=>s[e]=null)):S(s,o),a.set(e,s),s):(a.set(e,null),null)}function Vt(e,t){return!(!e||!C(t))&&(t=t.slice(2).replace(/Once$/,""),I(e,t[0].toLowerCase()+t.slice(1))||I(e,G(t))||I(e,t))}let Wt=null,Ht=null;function jt(e){const t=Wt;return Wt=e,Ht=e&&e.type.__scopeId||null,t}function Ut(e,t=Wt,n){if(!t)return e;if(e._n)return e;const a=(...n)=>{a._d&&Ta(-1);const r=jt(t),o=e(...n);return jt(r),a._d&&Ta(1),__VUE_PROD_DEVTOOLS__&&Dt(t),o};return a._n=!0,a._c=!0,a._d=!0,a}function Gt(e){const{type:t,vnode:n,proxy:a,withProxy:r,props:o,propsOptions:[s],slots:i,attrs:l,emit:u,render:c,renderCache:p,data:d,setupState:h,ctx:f,inheritAttrs:m}=e;let g,v;const b=jt(e);try{if(4&n.shapeFlag){const e=r||a;g=Ha(c.call(e,e,p,o,h,d,f)),v=l}else{const e=t;0,g=Ha(e.length>1?e(o,{attrs:l,slots:i,emit:u}):e(o,null)),v=t.props?l:qt(l)}}catch(t){ka.length=0,wr(t,e,1),g=Da(wa)}let y=g;if(v&&!1!==m){const e=Object.keys(v),{shapeFlag:t}=y;e.length&&7&t&&(s&&e.some(E)&&(v=Xt(v,s)),y=La(y,v))}return n.dirs&&(y.dirs=y.dirs?y.dirs.concat(n.dirs):n.dirs),n.transition&&(y.transition=n.transition),g=y,jt(b),g}const qt=e=>{let t;for(const n in e)("class"===n||"style"===n||C(n))&&((t||(t={}))[n]=e[n]);return t},Xt=(e,t)=>{const n={};for(const a in e)E(a)&&a.slice(9)in t||(n[a]=e[a]);return n};function Yt(e,t,n){const a=Object.keys(t);if(a.length!==Object.keys(e).length)return!0;for(let r=0;r<a.length;r++){const o=a[r];if(t[o]!==e[o]&&!Vt(n,o))return!0}return!1}function Kt({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}function Jt(e,t){t&&t.pendingBranch?N(e)?t.effects.push(...e):t.effects.push(e):_r(e)}function Zt(e,t){if(ar){let n=ar.provides;const a=ar.parent&&ar.parent.provides;a===n&&(n=ar.provides=Object.create(a)),n[e]=t}else 0}function Qt(e,t,n=!1){const a=ar||Wt;if(a){const r=null==a.parent?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides;if(r&&e in r)return r[e];if(arguments.length>1)return n&&A(t)?t.call(a.proxy):t}else 0}function en(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Cn((()=>{e.isMounted=!0})),$n((()=>{e.isUnmounting=!0})),e}const tn=[Function,Array],nn={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:tn,onEnter:tn,onAfterEnter:tn,onEnterCancelled:tn,onBeforeLeave:tn,onLeave:tn,onAfterLeave:tn,onLeaveCancelled:tn,onBeforeAppear:tn,onAppear:tn,onAfterAppear:tn,onAppearCancelled:tn},setup(e,{slots:t}){const n=rr(),a=en();let r;return()=>{const o=t.default&&cn(t.default(),!0);if(!o||!o.length)return;const s=gt(e),{mode:i}=s;const l=o[0];if(a.isLeaving)return sn(l);const u=ln(l);if(!u)return sn(l);const c=on(u,s,a,n);un(u,c);const p=n.subTree,d=p&&ln(p);let h=!1;const{getTransitionKey:f}=u.type;if(f){const e=f();void 0===r?r=e:e!==r&&(r=e,h=!0)}if(d&&d.type!==wa&&(!Ra(u,d)||h)){const e=on(d,s,a,n);if(un(d,e),"out-in"===i)return a.isLeaving=!0,e.afterLeave=()=>{a.isLeaving=!1,n.update()},sn(l);"in-out"===i&&u.type!==wa&&(e.delayLeave=(e,t,n)=>{rn(a,d)[String(d.key)]=d,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=n})}return l}}},an=nn;function rn(e,t){const{leavingVNodes:n}=e;let a=n.get(t.type);return a||(a=Object.create(null),n.set(t.type,a)),a}function on(e,t,n,a){const{appear:r,mode:o,persisted:s=!1,onBeforeEnter:i,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:p,onLeave:d,onAfterLeave:h,onLeaveCancelled:f,onBeforeAppear:m,onAppear:g,onAfterAppear:v,onAppearCancelled:b}=t,y=String(e.key),w=rn(n,e),x=(e,t)=>{e&&yr(e,a,9,t)},k={mode:o,persisted:s,beforeEnter(t){let a=i;if(!n.isMounted){if(!r)return;a=m||i}t._leaveCb&&t._leaveCb(!0);const o=w[y];o&&Ra(e,o)&&o.el._leaveCb&&o.el._leaveCb(),x(a,[t])},enter(e){let t=l,a=u,o=c;if(!n.isMounted){if(!r)return;t=g||l,a=v||u,o=b||c}let s=!1;const i=e._enterCb=t=>{s||(s=!0,x(t?o:a,[e]),k.delayedLeave&&k.delayedLeave(),e._enterCb=void 0)};t?(t(e,i),t.length<=1&&i()):i()},leave(t,a){const r=String(e.key);if(t._enterCb&&t._enterCb(!0),n.isUnmounting)return a();x(p,[t]);let o=!1;const s=t._leaveCb=n=>{o||(o=!0,a(),x(n?f:h,[t]),t._leaveCb=void 0,w[r]===e&&delete w[r])};w[r]=e,d?(d(t,s),d.length<=1&&s()):s()},clone:e=>on(e,t,n,a)};return k}function sn(e){if(dn(e))return(e=La(e)).children=null,e}function ln(e){return dn(e)?e.children?e.children[0]:void 0:e}function un(e,t){6&e.shapeFlag&&e.component?un(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function cn(e,t=!1){let n=[],a=0;for(let r=0;r<e.length;r++){const o=e[r];o.type===ba?(128&o.patchFlag&&a++,n=n.concat(cn(o.children,t))):(t||o.type!==wa)&&n.push(o)}if(a>1)for(let e=0;e<n.length;e++)n[e].patchFlag=-2;return n}const pn=e=>!!e.type.__asyncLoader;const dn=e=>e.type.__isKeepAlive;RegExp,RegExp;function hn(e,t){return N(e)?e.some((e=>hn(e,t))):M(e)?e.split(",").indexOf(t)>-1:!!e.test&&e.test(t)}function fn(e,t){gn(e,"a",t)}function mn(e,t){gn(e,"da",t)}function gn(e,t,n=ar){const a=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});if(wn(t,a,n),n){let e=n.parent;for(;e&&e.parent;)dn(e.parent.vnode)&&vn(a,t,n,e),e=e.parent}}function vn(e,t,n,a){const r=wn(t,e,a,!0);Tn((()=>{$(a[t],r)}),n)}function bn(e){let t=e.shapeFlag;256&t&&256,512&t&&512,e.shapeFlag=t}function yn(e){return 128&e.shapeFlag?e.ssContent:e}function wn(e,t,n=ar,a=!1){if(n){const r=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...a)=>{if(n.isUnmounted)return;ye(),or(n);const r=yr(t,n,e,a);return sr(),we(),r});return a?r.unshift(o):r.push(o),o}}const xn=e=>(t,n=ar)=>(!cr||"sp"===e)&&wn(e,t,n),kn=xn("bm"),Cn=xn("m"),En=xn("bu"),Sn=xn("u"),$n=xn("bum"),Tn=xn("um"),In=xn("sp"),Nn=xn("rtg"),On=xn("rtc");function Rn(e,t=ar){wn("ec",e,t)}let An=!0;function Mn(e){const t=Dn(e),n=e.proxy,a=e.ctx;An=!1,t.beforeCreate&&Bn(t.beforeCreate,e,"bc");const{data:r,computed:o,methods:s,watch:i,provide:l,inject:u,created:c,beforeMount:p,mounted:d,beforeUpdate:h,updated:f,activated:m,deactivated:g,beforeDestroy:v,beforeUnmount:b,destroyed:y,unmounted:x,render:k,renderTracked:C,renderTriggered:E,errorCaptured:S,serverPrefetch:$,expose:T,inheritAttrs:I,components:O,directives:R,filters:M}=t;if(u&&function(e,t,n=w,a=!1){N(e)&&(e=zn(e));for(const n in e){const r=e[n];let o;o=P(r)?"default"in r?Qt(r.from||n,r.default,!0):Qt(r.from||n):Qt(r),kt(o)&&a?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:e=>o.value=e}):t[n]=o}}(u,a,null,e.appContext.config.unwrapInjectedRef),s)for(const e in s){const t=s[e];A(t)&&(a[e]=t.bind(n))}if(r){0;const t=r.call(n,n);0,P(t)&&(e.data=ct(t))}if(An=!0,o)for(const e in o){const t=o[e];0;const r=Nt({get:A(t)?t.bind(n,n):A(t.get)?t.get.bind(n,n):w,set:!A(t)&&A(t.set)?t.set.bind(n):w});Object.defineProperty(a,e,{enumerable:!0,configurable:!0,get:()=>r.value,set:e=>r.value=e})}if(i)for(const e in i)Pn(i[e],a,n,e);if(l){const e=A(l)?l.call(n):l;Reflect.ownKeys(e).forEach((t=>{Zt(t,e[t])}))}function B(e,t){N(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(c&&Bn(c,e,"c"),B(kn,p),B(Cn,d),B(En,h),B(Sn,f),B(fn,m),B(mn,g),B(Rn,S),B(On,C),B(Nn,E),B($n,b),B(Tn,x),B(In,$),N(T))if(T.length){const t=e.exposed||(e.exposed={});T.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});k&&e.render===w&&(e.render=k),null!=I&&(e.inheritAttrs=I),O&&(e.components=O),R&&(e.directives=R)}function Bn(e,t,n){yr(N(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function Pn(e,t,n,a){const r=a.includes(".")?qr(n,a):()=>n[a];if(M(e)){const n=t[e];A(n)&&jr(r,n)}else if(A(e))jr(r,e.bind(n));else if(P(e))if(N(e))e.forEach((e=>Pn(e,t,n,a)));else{const a=A(e.handler)?e.handler.bind(n):t[e.handler];A(a)&&jr(r,a,e)}else 0}function Dn(e){const t=e.type,{mixins:n,extends:a}=t,{mixins:r,optionsCache:o,config:{optionMergeStrategies:s}}=e.appContext,i=o.get(t);let l;return i?l=i:r.length||n||a?(l={},r.length&&r.forEach((e=>Fn(l,e,s,!0))),Fn(l,t,s)):l=t,o.set(t,l),l}function Fn(e,t,n,a=!1){const{mixins:r,extends:o}=t;o&&Fn(e,o,n,!0),r&&r.forEach((t=>Fn(e,t,n,!0)));for(const r in t)if(a&&"expose"===r);else{const a=_n[r]||n&&n[r];e[r]=a?a(e[r],t[r]):t[r]}return e}const _n={data:Ln,props:Wn,emits:Wn,methods:Wn,computed:Wn,beforeCreate:Vn,created:Vn,beforeMount:Vn,mounted:Vn,beforeUpdate:Vn,updated:Vn,beforeDestroy:Vn,beforeUnmount:Vn,destroyed:Vn,unmounted:Vn,activated:Vn,deactivated:Vn,errorCaptured:Vn,serverPrefetch:Vn,components:Wn,directives:Wn,watch:function(e,t){if(!e)return t;if(!t)return e;const n=S(Object.create(null),e);for(const a in t)n[a]=Vn(e[a],t[a]);return n},provide:Ln,inject:function(e,t){return Wn(zn(e),zn(t))}};function Ln(e,t){return t?e?function(){return S(A(e)?e.call(this,this):e,A(t)?t.call(this,this):t)}:t:e}function zn(e){if(N(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Vn(e,t){return e?[...new Set([].concat(e,t))]:t}function Wn(e,t){return e?S(S(Object.create(null),e),t):t}function Hn(e,t,n,a=!1){const r={},o={};J(o,Aa,1),e.propsDefaults=Object.create(null),jn(e,t,r,o);for(const t in e.propsOptions[0])t in r||(r[t]=void 0);n?e.props=a?r:dt(r,!1,Fe,at,st):e.type.props?e.props=r:e.props=o,e.attrs=o}function jn(e,t,n,a){const[r,o]=e.propsOptions;let s,i=!1;if(t)for(let l in t){if(V(l))continue;const u=t[l];let c;r&&I(r,c=j(l))?o&&o.includes(c)?(s||(s={}))[c]=u:n[c]=u:Vt(e.emitsOptions,l)||l in a&&u===a[l]||(a[l]=u,i=!0)}if(o){const t=gt(n),a=s||b;for(let s=0;s<o.length;s++){const i=o[s];n[i]=Un(r,t,i,a[i],e,!I(a,i))}}return i}function Un(e,t,n,a,r,o){const s=e[n];if(null!=s){const e=I(s,"default");if(e&&void 0===a){const e=s.default;if(s.type!==Function&&A(e)){const{propsDefaults:o}=r;n in o?a=o[n]:(or(r),a=o[n]=e.call(null,t),sr())}else a=e}s[0]&&(o&&!e?a=!1:!s[1]||""!==a&&a!==G(n)||(a=!0))}return a}function Gn(e,t,n=!1){const a=t.propsCache,r=a.get(e);if(r)return r;const o=e.props,s={},i=[];let l=!1;if(__VUE_OPTIONS_API__&&!A(e)){const a=e=>{l=!0;const[n,a]=Gn(e,t,!0);S(s,n),a&&i.push(...a)};!n&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}if(!o&&!l)return a.set(e,y),y;if(N(o))for(let e=0;e<o.length;e++){0;const t=j(o[e]);qn(t)&&(s[t]=b)}else if(o){0;for(const e in o){const t=j(e);if(qn(t)){const n=o[e],a=s[t]=N(n)||A(n)?{type:n}:n;if(a){const e=Kn(Boolean,a.type),n=Kn(String,a.type);a[0]=e>-1,a[1]=n<0||e<n,(e>-1||I(a,"default"))&&i.push(t)}}}}const u=[s,i];return a.set(e,u),u}function qn(e){return"$"!==e[0]}function Xn(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:null===e?"null":""}function Yn(e,t){return Xn(e)===Xn(t)}function Kn(e,t){return N(t)?t.findIndex((t=>Yn(t,e))):A(t)&&Yn(t,e)?0:-1}const Jn=e=>"_"===e[0]||"$stable"===e,Zn=e=>N(e)?e.map(Ha):[Ha(e)],Qn=(e,t,n)=>{const a=Ut(((...e)=>Zn(t(...e))),n);return a._c=!1,a},ea=(e,t,n)=>{const a=e._ctx;for(const n in e){if(Jn(n))continue;const r=e[n];if(A(r))t[n]=Qn(0,r,a);else if(null!=r){0;const e=Zn(r);t[n]=()=>e}}},ta=(e,t)=>{const n=Zn(t);e.slots.default=()=>n};function na(e,t){if(null===Wt)return e;const n=Wt.proxy,a=e.dirs||(e.dirs=[]);for(let e=0;e<t.length;e++){let[r,o,s,i=b]=t[e];A(r)&&(r={mounted:r,updated:r}),r.deep&&Xr(o),a.push({dir:r,instance:n,value:o,oldValue:void 0,arg:s,modifiers:i})}return e}function aa(e,t,n,a){const r=e.dirs,o=t&&t.dirs;for(let s=0;s<r.length;s++){const i=r[s];o&&(i.oldValue=o[s].value);let l=i.dir[a];l&&(ye(),yr(l,n,8,[e.el,i,e,t]),we())}}function ra(){return{app:null,config:{isNativeTag:x,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let oa=0;function sa(e,t){return function(n,a=null){null==a||P(a)||(a=null);const r=ra(),o=new Set;let s=!1;const i=r.app={_uid:oa++,_component:n,_props:a,_container:null,_context:r,_instance:null,version:Kr,get config(){return r.config},set config(e){0},use:(e,...t)=>(o.has(e)||(e&&A(e.install)?(o.add(e),e.install(i,...t)):A(e)&&(o.add(e),e(i,...t))),i),mixin:e=>(__VUE_OPTIONS_API__&&(r.mixins.includes(e)||r.mixins.push(e)),i),component:(e,t)=>t?(r.components[e]=t,i):r.components[e],directive:(e,t)=>t?(r.directives[e]=t,i):r.directives[e],mount(o,l,u){if(!s){const c=Da(n,a);return c.appContext=r,l&&t?t(c,o):e(c,o,u),s=!0,i._container=o,o.__vue_app__=i,__VUE_PROD_DEVTOOLS__&&(i._instance=c.component,function(e,t){Mt("app:init",e,t,{Fragment:ba,Text:ya,Comment:wa,Static:xa})}(i,Kr)),mr(c.component)||c.component.proxy}},unmount(){s&&(e(null,i._container),__VUE_PROD_DEVTOOLS__&&(i._instance=null,function(e){Mt("app:unmount",e)}(i)),delete i._container.__vue_app__)},provide:(e,t)=>(r.provides[e]=t,i)};return i}}function ia(e,t,n,a,r=!1){if(N(e))return void e.forEach(((e,o)=>ia(e,t&&(N(t)?t[o]:t),n,a,r)));if(pn(a)&&!r)return;const o=4&a.shapeFlag?mr(a.component)||a.component.proxy:a.el,s=r?null:o,{i:i,r:l}=e;const u=t&&t.r,c=i.refs===b?i.refs={}:i.refs,p=i.setupState;if(null!=u&&u!==l&&(M(u)?(c[u]=null,I(p,u)&&(p[u]=null)):kt(u)&&(u.value=null)),A(l))br(l,i,12,[s,c]);else{const t=M(l),a=kt(l);if(t||a){const a=()=>{if(e.f){const n=t?c[l]:l.value;r?N(n)&&$(n,o):N(n)?n.includes(o)||n.push(o):t?c[l]=[o]:(l.value=[o],e.k&&(c[e.k]=l.value))}else t?(c[l]=s,I(p,l)&&(p[l]=s)):kt(l)&&(l.value=s,e.k&&(c[e.k]=s))};s?(a.id=-1,la(a,n)):a()}else 0}}const la=Jt;function ua(e,t){"boolean"!=typeof __VUE_OPTIONS_API__&&(ee().__VUE_OPTIONS_API__=!0),"boolean"!=typeof __VUE_PROD_DEVTOOLS__&&(ee().__VUE_PROD_DEVTOOLS__=!1);const n=ee();n.__VUE__=!0,__VUE_PROD_DEVTOOLS__&&Bt(n.__VUE_DEVTOOLS_GLOBAL_HOOK__,n);const{insert:a,remove:r,patchProp:o,createElement:s,createText:i,createComment:l,setText:u,setElementText:c,parentNode:p,nextSibling:d,setScopeId:h=w,cloneNode:f,insertStaticContent:m}=e,g=(e,t,n,a=null,r=null,o=null,s=!1,i=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!Ra(e,t)&&(a=Z(e),U(e,r,o,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:u,ref:c,shapeFlag:p}=t;switch(u){case ya:v(e,t,n,a);break;case wa:x(e,t,n,a);break;case xa:null==e&&k(t,n,a,s);break;case ba:M(e,t,n,a,r,o,s,i,l);break;default:1&p?E(e,t,n,a,r,o,s,i,l):6&p?B(e,t,n,a,r,o,s,i,l):(64&p||128&p)&&u.process(e,t,n,a,r,o,s,i,l,te)}null!=c&&r&&ia(c,e&&e.ref,o,t||e,!t)},v=(e,t,n,r)=>{if(null==e)a(t.el=i(t.children),n,r);else{const n=t.el=e.el;t.children!==e.children&&u(n,t.children)}},x=(e,t,n,r)=>{null==e?a(t.el=l(t.children||""),n,r):t.el=e.el},k=(e,t,n,a)=>{[e.el,e.anchor]=m(e.children,t,n,a)},C=({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=d(e),r(e),e=n;r(t)},E=(e,t,n,a,r,o,s,i,l)=>{s=s||"svg"===t.type,null==e?$(t,n,a,r,o,s,i,l):O(e,t,r,o,s,i,l)},$=(e,t,n,r,i,l,u,p)=>{let d,h;const{type:m,props:g,shapeFlag:v,transition:b,patchFlag:y,dirs:w}=e;if(e.el&&void 0!==f&&-1===y)d=e.el=f(e.el);else{if(d=e.el=s(e.type,l,g&&g.is,g),8&v?c(d,e.children):16&v&&N(e.children,d,null,r,i,l&&"foreignObject"!==m,u,p),w&&aa(e,null,r,"created"),g){for(const t in g)"value"===t||V(t)||o(d,t,null,g[t],l,e.children,r,i,J);"value"in g&&o(d,"value",null,g.value),(h=g.onVnodeBeforeMount)&&qa(h,r,e)}T(d,e,e.scopeId,u,r)}__VUE_PROD_DEVTOOLS__&&(Object.defineProperty(d,"__vnode",{value:e,enumerable:!1}),Object.defineProperty(d,"__vueParentComponent",{value:r,enumerable:!1})),w&&aa(e,null,r,"beforeMount");const x=(!i||i&&!i.pendingBranch)&&b&&!b.persisted;x&&b.beforeEnter(d),a(d,t,n),((h=g&&g.onVnodeMounted)||x||w)&&la((()=>{h&&qa(h,r,e),x&&b.enter(d),w&&aa(e,null,r,"mounted")}),i)},T=(e,t,n,a,r)=>{if(n&&h(e,n),a)for(let t=0;t<a.length;t++)h(e,a[t]);if(r){if(t===r.subTree){const t=r.vnode;T(e,t,t.scopeId,t.slotScopeIds,r.parent)}}},N=(e,t,n,a,r,o,s,i,l=0)=>{for(let u=l;u<e.length;u++){const l=e[u]=i?ja(e[u]):Ha(e[u]);g(null,l,t,n,a,r,o,s,i)}},O=(e,t,n,a,r,s,i)=>{const l=t.el=e.el;let{patchFlag:u,dynamicChildren:p,dirs:d}=t;u|=16&e.patchFlag;const h=e.props||b,f=t.props||b;let m;n&&ca(n,!1),(m=f.onVnodeBeforeUpdate)&&qa(m,n,t,e),d&&aa(t,e,n,"beforeUpdate"),n&&ca(n,!0);const g=r&&"foreignObject"!==t.type;if(p?R(e.dynamicChildren,p,l,n,a,g,s):i||L(e,t,l,null,n,a,g,s,!1),u>0){if(16&u)A(l,t,h,f,n,a,r);else if(2&u&&h.class!==f.class&&o(l,"class",null,f.class,r),4&u&&o(l,"style",h.style,f.style,r),8&u){const s=t.dynamicProps;for(let t=0;t<s.length;t++){const i=s[t],u=h[i],c=f[i];c===u&&"value"!==i||o(l,i,u,c,r,e.children,n,a,J)}}1&u&&e.children!==t.children&&c(l,t.children)}else i||null!=p||A(l,t,h,f,n,a,r);((m=f.onVnodeUpdated)||d)&&la((()=>{m&&qa(m,n,t,e),d&&aa(t,e,n,"updated")}),a)},R=(e,t,n,a,r,o,s)=>{for(let i=0;i<t.length;i++){const l=e[i],u=t[i],c=l.el&&(l.type===ba||!Ra(l,u)||70&l.shapeFlag)?p(l.el):n;g(l,u,c,null,a,r,o,s,!0)}},A=(e,t,n,a,r,s,i)=>{if(n!==a){for(const l in a){if(V(l))continue;const u=a[l],c=n[l];u!==c&&"value"!==l&&o(e,l,c,u,i,t.children,r,s,J)}if(n!==b)for(const l in n)V(l)||l in a||o(e,l,n[l],null,i,t.children,r,s,J);"value"in a&&o(e,"value",n.value,a.value)}},M=(e,t,n,r,o,s,l,u,c)=>{const p=t.el=e?e.el:i(""),d=t.anchor=e?e.anchor:i("");let{patchFlag:h,dynamicChildren:f,slotScopeIds:m}=t;m&&(u=u?u.concat(m):m),null==e?(a(p,n,r),a(d,n,r),N(t.children,n,d,o,s,l,u,c)):h>0&&64&h&&f&&e.dynamicChildren?(R(e.dynamicChildren,f,n,o,s,l,u),(null!=t.key||o&&t===o.subTree)&&pa(e,t,!0)):L(e,t,n,d,o,s,l,u,c)},B=(e,t,n,a,r,o,s,i,l)=>{t.slotScopeIds=i,null==e?512&t.shapeFlag?r.ctx.activate(t,n,a,s,l):P(t,n,a,r,o,s,l):D(e,t,l)},P=(e,t,n,a,r,o,s)=>{const i=e.component=nr(e,a,r);if(dn(e)&&(i.ctx.renderer=te),pr(i),i.asyncDep){if(r&&r.registerDep(i,F),!e.el){const e=i.subTree=Da(wa);x(null,e,t,n)}}else F(i,e,t,n,r,o,s)},D=(e,t,n)=>{const a=t.component=e.component;if(function(e,t,n){const{props:a,children:r,component:o}=e,{props:s,children:i,patchFlag:l}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&l>=0))return!(!r&&!i||i&&i.$stable)||a!==s&&(a?!s||Yt(a,s,u):!!s);if(1024&l)return!0;if(16&l)return a?Yt(a,s,u):!!s;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(s[n]!==a[n]&&!Vt(u,n))return!0}}return!1}(e,t,n)){if(a.asyncDep&&!a.asyncResolved)return void _(a,t,n);a.next=t,function(e){const t=Cr.indexOf(e);t>Er&&Cr.splice(t,1)}(a.update),a.update()}else t.component=e.component,t.el=e.el,a.vnode=t},F=(e,t,n,a,r,o,s)=>{const i=e.effect=new me((()=>{if(e.isMounted){let t,{next:n,bu:a,u:i,parent:l,vnode:u}=e,c=n;0,ca(e,!1),n?(n.el=u.el,_(e,n,s)):n=u,a&&K(a),(t=n.props&&n.props.onVnodeBeforeUpdate)&&qa(t,l,n,u),ca(e,!0);const d=Gt(e);0;const h=e.subTree;e.subTree=d,g(h,d,p(h.el),Z(h),e,r,o),n.el=d.el,null===c&&Kt(e,d.el),i&&la(i,r),(t=n.props&&n.props.onVnodeUpdated)&&la((()=>qa(t,l,n,u)),r),__VUE_PROD_DEVTOOLS__&&Dt(e)}else{let s;const{el:i,props:l}=t,{bm:u,m:c,parent:p}=e,d=pn(t);if(ca(e,!1),u&&K(u),!d&&(s=l&&l.onVnodeBeforeMount)&&qa(s,p,t),ca(e,!0),i&&ae){const n=()=>{e.subTree=Gt(e),ae(i,e.subTree,e,r,null)};d?t.type.__asyncLoader().then((()=>!e.isUnmounted&&n())):n()}else{0;const s=e.subTree=Gt(e);0,g(null,s,n,a,e,r,o),t.el=s.el}if(c&&la(c,r),!d&&(s=l&&l.onVnodeMounted)){const e=t;la((()=>qa(s,p,e)),r)}256&t.shapeFlag&&e.a&&la(e.a,r),e.isMounted=!0,__VUE_PROD_DEVTOOLS__&&Pt(e),t=n=a=null}}),(()=>Pr(e.update)),e.scope),l=e.update=i.run.bind(i);l.id=e.uid,ca(e,!0),l()},_=(e,t,n)=>{t.component=e;const a=e.vnode.props;e.vnode=t,e.next=null,function(e,t,n,a){const{props:r,attrs:o,vnode:{patchFlag:s}}=e,i=gt(r),[l]=e.propsOptions;let u=!1;if(!(a||s>0)||16&s){let a;jn(e,t,r,o)&&(u=!0);for(const o in i)t&&(I(t,o)||(a=G(o))!==o&&I(t,a))||(l?!n||void 0===n[o]&&void 0===n[a]||(r[o]=Un(l,i,o,void 0,e,!0)):delete r[o]);if(o!==i)for(const e in o)t&&I(t,e)||(delete o[e],u=!0)}else if(8&s){const n=e.vnode.dynamicProps;for(let a=0;a<n.length;a++){let s=n[a];const c=t[s];if(l)if(I(o,s))c!==o[s]&&(o[s]=c,u=!0);else{const t=j(s);r[t]=Un(l,i,t,c,e,!1)}else c!==o[s]&&(o[s]=c,u=!0)}}u&&Ee(e,"set","$attrs")}(e,t.props,a,n),((e,t,n)=>{const{vnode:a,slots:r}=e;let o=!0,s=b;if(32&a.shapeFlag){const e=t._;e?n&&1===e?o=!1:(S(r,t),n||1!==e||delete r._):(o=!t.$stable,ea(t,r)),s=t}else t&&(ta(e,t),s={default:1});if(o)for(const e in r)Jn(e)||e in s||delete r[e]})(e,t.children,n),ye(),Lr(void 0,e.update),we()},L=(e,t,n,a,r,o,s,i,l=!1)=>{const u=e&&e.children,p=e?e.shapeFlag:0,d=t.children,{patchFlag:h,shapeFlag:f}=t;if(h>0){if(128&h)return void W(u,d,n,a,r,o,s,i,l);if(256&h)return void z(u,d,n,a,r,o,s,i,l)}8&f?(16&p&&J(u,r,o),d!==u&&c(n,d)):16&p?16&f?W(u,d,n,a,r,o,s,i,l):J(u,r,o,!0):(8&p&&c(n,""),16&f&&N(d,n,a,r,o,s,i,l))},z=(e,t,n,a,r,o,s,i,l)=>{t=t||y;const u=(e=e||y).length,c=t.length,p=Math.min(u,c);let d;for(d=0;d<p;d++){const a=t[d]=l?ja(t[d]):Ha(t[d]);g(e[d],a,n,null,r,o,s,i,l)}u>c?J(e,r,o,!0,!1,p):N(t,n,a,r,o,s,i,l,p)},W=(e,t,n,a,r,o,s,i,l)=>{let u=0;const c=t.length;let p=e.length-1,d=c-1;for(;u<=p&&u<=d;){const a=e[u],c=t[u]=l?ja(t[u]):Ha(t[u]);if(!Ra(a,c))break;g(a,c,n,null,r,o,s,i,l),u++}for(;u<=p&&u<=d;){const a=e[p],u=t[d]=l?ja(t[d]):Ha(t[d]);if(!Ra(a,u))break;g(a,u,n,null,r,o,s,i,l),p--,d--}if(u>p){if(u<=d){const e=d+1,p=e<c?t[e].el:a;for(;u<=d;)g(null,t[u]=l?ja(t[u]):Ha(t[u]),n,p,r,o,s,i,l),u++}}else if(u>d)for(;u<=p;)U(e[u],r,o,!0),u++;else{const h=u,f=u,m=new Map;for(u=f;u<=d;u++){const e=t[u]=l?ja(t[u]):Ha(t[u]);null!=e.key&&m.set(e.key,u)}let v,b=0;const w=d-f+1;let x=!1,k=0;const C=new Array(w);for(u=0;u<w;u++)C[u]=0;for(u=h;u<=p;u++){const a=e[u];if(b>=w){U(a,r,o,!0);continue}let c;if(null!=a.key)c=m.get(a.key);else for(v=f;v<=d;v++)if(0===C[v-f]&&Ra(a,t[v])){c=v;break}void 0===c?U(a,r,o,!0):(C[c-f]=u+1,c>=k?k=c:x=!0,g(a,t[c],n,null,r,o,s,i,l),b++)}const E=x?function(e){const t=e.slice(),n=[0];let a,r,o,s,i;const l=e.length;for(a=0;a<l;a++){const l=e[a];if(0!==l){if(r=n[n.length-1],e[r]<l){t[a]=r,n.push(a);continue}for(o=0,s=n.length-1;o<s;)i=o+s>>1,e[n[i]]<l?o=i+1:s=i;l<e[n[o]]&&(o>0&&(t[a]=n[o-1]),n[o]=a)}}o=n.length,s=n[o-1];for(;o-- >0;)n[o]=s,s=t[s];return n}(C):y;for(v=E.length-1,u=w-1;u>=0;u--){const e=f+u,p=t[e],d=e+1<c?t[e+1].el:a;0===C[u]?g(null,p,n,d,r,o,s,i,l):x&&(v<0||u!==E[v]?H(p,n,d,2):v--)}}},H=(e,t,n,r,o=null)=>{const{el:s,type:i,transition:l,children:u,shapeFlag:c}=e;if(6&c)return void H(e.component.subTree,t,n,r);if(128&c)return void e.suspense.move(t,n,r);if(64&c)return void i.move(e,t,n,te);if(i===ba){a(s,t,n);for(let e=0;e<u.length;e++)H(u[e],t,n,r);return void a(e.anchor,t,n)}if(i===xa)return void(({el:e,anchor:t},n,r)=>{let o;for(;e&&e!==t;)o=d(e),a(e,n,r),e=o;a(t,n,r)})(e,t,n);if(2!==r&&1&c&&l)if(0===r)l.beforeEnter(s),a(s,t,n),la((()=>l.enter(s)),o);else{const{leave:e,delayLeave:r,afterLeave:o}=l,i=()=>a(s,t,n),u=()=>{e(s,(()=>{i(),o&&o()}))};r?r(s,i,u):u()}else a(s,t,n)},U=(e,t,n,a=!1,r=!1)=>{const{type:o,props:s,ref:i,children:l,dynamicChildren:u,shapeFlag:c,patchFlag:p,dirs:d}=e;if(null!=i&&ia(i,null,n,e,!0),256&c)return void t.ctx.deactivate(e);const h=1&c&&d,f=!pn(e);let m;if(f&&(m=s&&s.onVnodeBeforeUnmount)&&qa(m,t,e),6&c)Y(e.component,n,a);else{if(128&c)return void e.suspense.unmount(n,a);h&&aa(e,null,t,"beforeUnmount"),64&c?e.type.remove(e,t,n,r,te,a):u&&(o!==ba||p>0&&64&p)?J(u,t,n,!1,!0):(o===ba&&384&p||!r&&16&c)&&J(l,t,n),a&&q(e)}(f&&(m=s&&s.onVnodeUnmounted)||h)&&la((()=>{m&&qa(m,t,e),h&&aa(e,null,t,"unmounted")}),n)},q=e=>{const{type:t,el:n,anchor:a,transition:o}=e;if(t===ba)return void X(n,a);if(t===xa)return void C(e);const s=()=>{r(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&e.shapeFlag&&o&&!o.persisted){const{leave:t,delayLeave:a}=o,r=()=>t(n,s);a?a(e.el,s,r):r()}else s()},X=(e,t)=>{let n;for(;e!==t;)n=d(e),r(e),e=n;r(t)},Y=(e,t,n)=>{const{bum:a,scope:r,update:o,subTree:s,um:i}=e;a&&K(a),r.stop(),o&&(o.active=!1,U(s,e,t,n)),i&&la(i,t),la((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve()),__VUE_PROD_DEVTOOLS__&&Ft(e)},J=(e,t,n,a=!1,r=!1,o=0)=>{for(let s=o;s<e.length;s++)U(e[s],t,n,a,r)},Z=e=>6&e.shapeFlag?Z(e.component.subTree):128&e.shapeFlag?e.suspense.next():d(e.anchor||e.el),Q=(e,t,n)=>{null==e?t._vnode&&U(t._vnode,null,null,!0):g(t._vnode||null,e,t,null,null,null,n),zr(),t._vnode=e},te={p:g,um:U,m:H,r:q,mt:P,mc:N,pc:L,pbc:R,n:Z,o:e};let ne,ae;return t&&([ne,ae]=t(te)),{render:Q,hydrate:ne,createApp:sa(Q,ne)}}function ca({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function pa(e,t,n=!1){const a=e.children,r=t.children;if(N(a)&&N(r))for(let e=0;e<a.length;e++){const t=a[e];let o=r[e];1&o.shapeFlag&&!o.dynamicChildren&&((o.patchFlag<=0||32===o.patchFlag)&&(o=r[e]=ja(r[e]),o.el=t.el),n||pa(t,o))}}const da="components";function ha(e,t){return ga(da,e,!0,t)||e}const fa=Symbol();function ma(e){return M(e)?ga(da,e,!1)||e:e||fa}function ga(e,t,n=!0,a=!1){const r=Wt||ar;if(r){const n=r.type;if(e===da){const e=gr(n);if(e&&(e===t||e===j(t)||e===q(j(t))))return n}const o=va(r[e]||n[e],t)||va(r.appContext[e],t);return!o&&a?n:o}}function va(e,t){return e&&(e[t]||e[j(t)]||e[q(j(t))])}const ba=Symbol(void 0),ya=Symbol(void 0),wa=Symbol(void 0),xa=Symbol(void 0),ka=[];let Ca=null;function Ea(e=!1){ka.push(Ca=e?null:[])}function Sa(){ka.pop(),Ca=ka[ka.length-1]||null}let $a=1;function Ta(e){$a+=e}function Ia(e){return e.dynamicChildren=$a>0?Ca||y:null,Sa(),$a>0&&Ca&&Ca.push(e),e}function Na(e,t,n,a,r){return Ia(Da(e,t,n,a,r,!0))}function Oa(e){return!!e&&!0===e.__v_isVNode}function Ra(e,t){return e.type===t.type&&e.key===t.key}const Aa="__vInternal",Ma=({key:e})=>null!=e?e:null,Ba=({ref:e,ref_key:t,ref_for:n})=>null!=e?M(e)||kt(e)||A(e)?{i:Wt,r:e,k:t,f:!!n}:e:null;function Pa(e,t=null,n=null,a=0,r=null,o=(e===ba?0:1),s=!1,i=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ma(t),ref:t&&Ba(t),scopeId:Ht,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:a,dynamicProps:r,dynamicChildren:null,appContext:null};return i?(Ua(l,n),128&o&&e.normalize(l)):n&&(l.shapeFlag|=M(n)?8:16),$a>0&&!s&&Ca&&(l.patchFlag>0||6&o)&&32!==l.patchFlag&&Ca.push(l),l}const Da=Fa;function Fa(e,t=null,n=null,a=0,r=null,o=!1){if(e&&e!==fa||(e=wa),Oa(e)){const a=La(e,t,!0);return n&&Ua(a,n),a}if(vr(e)&&(e=e.__vccOpts),t){t=_a(t);let{class:e,style:n}=t;e&&!M(e)&&(t.class=m(e)),P(n)&&(mt(n)&&!N(n)&&(n=S({},n)),t.style=p(n))}return Pa(e,t,n,a,r,M(e)?1:(e=>e.__isSuspense)(e)?128:(e=>e.__isTeleport)(e)?64:P(e)?4:A(e)?2:0,o,!0)}function _a(e){return e?mt(e)||Aa in e?S({},e):e:null}function La(e,t,n=!1){const{props:a,ref:r,patchFlag:o,children:s}=e,i=t?Ga(a||{},t):a;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:i,key:i&&Ma(i),ref:t&&t.ref?n&&r?N(r)?r.concat(Ba(t)):[r,Ba(t)]:Ba(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ba?-1===o?16:16|o:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&La(e.ssContent),ssFallback:e.ssFallback&&La(e.ssFallback),el:e.el,anchor:e.anchor}}function za(e=" ",t=0){return Da(ya,null,e,t)}function Va(e,t){const n=Da(xa,null,e);return n.staticCount=t,n}function Wa(e="",t=!1){return t?(Ea(),Na(wa,null,e)):Da(wa,null,e)}function Ha(e){return null==e||"boolean"==typeof e?Da(wa):N(e)?Da(ba,null,e.slice()):"object"==typeof e?ja(e):Da(ya,null,String(e))}function ja(e){return null===e.el||e.memo?e:La(e)}function Ua(e,t){let n=0;const{shapeFlag:a}=e;if(null==t)t=null;else if(N(t))n=16;else if("object"==typeof t){if(65&a){const n=t.default;return void(n&&(n._c&&(n._d=!1),Ua(e,n()),n._c&&(n._d=!0)))}{n=32;const a=t._;a||Aa in t?3===a&&Wt&&(1===Wt.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=Wt}}else A(t)?(t={default:t,_ctx:Wt},n=32):(t=String(t),64&a?(n=16,t=[za(t)]):n=8);e.children=t,e.shapeFlag|=n}function Ga(...e){const t={};for(let n=0;n<e.length;n++){const a=e[n];for(const e in a)if("class"===e)t.class!==a.class&&(t.class=m([t.class,a.class]));else if("style"===e)t.style=p([t.style,a.style]);else if(C(e)){const n=t[e],r=a[e];n===r||N(n)&&n.includes(r)||(t[e]=n?[].concat(n,r):r)}else""!==e&&(t[e]=a[e])}return t}function qa(e,t,n,a=null){yr(e,t,7,[n,a])}function Xa(e,t,n,a){let r;const o=n&&n[a];if(N(e)||M(e)){r=new Array(e.length);for(let n=0,a=e.length;n<a;n++)r[n]=t(e[n],n,void 0,o&&o[n])}else if("number"==typeof e){0,r=new Array(e);for(let n=0;n<e;n++)r[n]=t(n+1,n,void 0,o&&o[n])}else if(P(e))if(e[Symbol.iterator])r=Array.from(e,((e,n)=>t(e,n,void 0,o&&o[n])));else{const n=Object.keys(e);r=new Array(n.length);for(let a=0,s=n.length;a<s;a++){const s=n[a];r[a]=t(e[s],s,a,o&&o[a])}}else r=[];return n&&(n[a]=r),r}function Ya(e,t,n={},a,r){if(Wt.isCE)return Da("slot","default"===t?null:{name:t},a&&a());let o=e[t];o&&o._c&&(o._d=!1),Ea();const s=o&&Ka(o(n)),i=Na(ba,{key:n.key||`_${t}`},s||(a?a():[]),s&&1===e._?64:-2);return!r&&i.scopeId&&(i.slotScopeIds=[i.scopeId+"-s"]),o&&o._c&&(o._d=!0),i}function Ka(e){return e.some((e=>!Oa(e)||e.type!==wa&&!(e.type===ba&&!Ka(e.children))))?e:null}const Ja=e=>e?ir(e)?mr(e)||e.proxy:Ja(e.parent):null,Za=S(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ja(e.parent),$root:e=>Ja(e.root),$emit:e=>e.emit,$options:e=>__VUE_OPTIONS_API__?Dn(e):e.type,$forceUpdate:e=>()=>Pr(e.update),$nextTick:e=>Br.bind(e.proxy),$watch:e=>__VUE_OPTIONS_API__?Gr.bind(e):w}),Qa={get({_:e},t){const{ctx:n,setupState:a,data:r,props:o,accessCache:s,type:i,appContext:l}=e;let u;if("$"!==t[0]){const i=s[t];if(void 0!==i)switch(i){case 1:return a[t];case 2:return r[t];case 4:return n[t];case 3:return o[t]}else{if(a!==b&&I(a,t))return s[t]=1,a[t];if(r!==b&&I(r,t))return s[t]=2,r[t];if((u=e.propsOptions[0])&&I(u,t))return s[t]=3,o[t];if(n!==b&&I(n,t))return s[t]=4,n[t];__VUE_OPTIONS_API__&&!An||(s[t]=0)}}const c=Za[t];let p,d;return c?("$attrs"===t&&xe(e,0,t),c(e)):(p=i.__cssModules)&&(p=p[t])?p:n!==b&&I(n,t)?(s[t]=4,n[t]):(d=l.config.globalProperties,I(d,t)?d[t]:void 0)},set({_:e},t,n){const{data:a,setupState:r,ctx:o}=e;if(r!==b&&I(r,t))r[t]=n;else if(a!==b&&I(a,t))a[t]=n;else if(I(e.props,t))return!1;return("$"!==t[0]||!(t.slice(1)in e))&&(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:a,appContext:r,propsOptions:o}},s){let i;return!!n[s]||e!==b&&I(e,s)||t!==b&&I(t,s)||(i=o[0])&&I(i,s)||I(a,s)||I(Za,s)||I(r.config.globalProperties,s)}};const er=ra();let tr=0;function nr(e,t,n){const a=e.type,r=(t?t.appContext:e.appContext)||er,o={uid:tr++,vnode:e,type:a,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new ae(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Gn(a,r),emitsOptions:zt(a,r),emit:null,emitted:null,propsDefaults:b,inheritAttrs:a.inheritAttrs,ctx:b,data:b,props:b,attrs:b,slots:b,refs:b,setupState:b,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Lt.bind(null,o),e.ce&&e.ce(o),o}let ar=null;const rr=()=>ar||Wt,or=e=>{ar=e,e.scope.on()},sr=()=>{ar&&ar.scope.off(),ar=null};function ir(e){return 4&e.vnode.shapeFlag}let lr,ur,cr=!1;function pr(e,t=!1){cr=t;const{props:n,children:a}=e.vnode,r=ir(e);Hn(e,n,r,t),((e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=gt(t),J(t,"_",n)):ea(t,e.slots={})}else e.slots={},t&&ta(e,t);J(e.slots,Aa,1)})(e,a);const o=r?function(e,t){const n=e.type;0;e.accessCache=Object.create(null),e.proxy=vt(new Proxy(e.ctx,Qa)),!1;const{setup:a}=n;if(a){const n=e.setupContext=a.length>1?fr(e):null;or(e),ye();const r=br(a,e,0,[e.props,n]);if(we(),sr(),D(r)){if(r.then(sr,sr),t)return r.then((n=>{dr(e,n,t)})).catch((t=>{wr(t,e,0)}));e.asyncDep=r}else dr(e,r,t)}else hr(e,t)}(e,t):void 0;return cr=!1,o}function dr(e,t,n){A(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:P(t)&&(__VUE_PROD_DEVTOOLS__&&(e.devtoolsRawSetupState=t),e.setupState=Tt(t)),hr(e,n)}function hr(e,t,n){const a=e.type;if(!e.render){if(!t&&lr&&!a.render){const t=a.template;if(t){0;const{isCustomElement:n,compilerOptions:r}=e.appContext.config,{delimiters:o,compilerOptions:s}=a,i=S(S({isCustomElement:n,delimiters:o},r),s);a.render=lr(t,i)}}e.render=a.render||w,ur&&ur(e)}__VUE_OPTIONS_API__&&(or(e),ye(),Mn(e),we(),sr())}function fr(e){const t=t=>{e.exposed=t||{}};let n;return{get attrs(){return n||(n=function(e){return new Proxy(e.attrs,{get:(t,n)=>(xe(e,0,"$attrs"),t[n])})}(e))},slots:e.slots,emit:e.emit,expose:t}}function mr(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Tt(vt(e.exposed)),{get:(t,n)=>n in t?t[n]:n in Za?Za[n](e):void 0}))}function gr(e){return A(e)&&e.displayName||e.name}function vr(e){return A(e)&&"__vccOpts"in e}function br(e,t,n,a){let r;try{r=a?e(...a):e()}catch(e){wr(e,t,n)}return r}function yr(e,t,n,a){if(A(e)){const r=br(e,t,n,a);return r&&D(r)&&r.catch((e=>{wr(e,t,n)})),r}const r=[];for(let o=0;o<e.length;o++)r.push(yr(e[o],t,n,a));return r}function wr(e,t,n,a=!0){t&&t.vnode;if(t){let a=t.parent;const r=t.proxy,o=n;for(;a;){const t=a.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,r,o))return;a=a.parent}const s=t.appContext.config.errorHandler;if(s)return void br(s,null,10,[e,r,o])}!function(e,t,n,a=!0){console.error(e)}(e,0,0,a)}let xr=!1,kr=!1;const Cr=[];let Er=0;const Sr=[];let $r=null,Tr=0;const Ir=[];let Nr=null,Or=0;const Rr=Promise.resolve();let Ar=null,Mr=null;function Br(e){const t=Ar||Rr;return e?t.then(this?e.bind(this):e):t}function Pr(e){Cr.length&&Cr.includes(e,xr&&e.allowRecurse?Er+1:Er)||e===Mr||(null==e.id?Cr.push(e):Cr.splice(function(e){let t=Er+1,n=Cr.length;for(;t<n;){const a=t+n>>>1;Vr(Cr[a])<e?t=a+1:n=a}return t}(e.id),0,e),Dr())}function Dr(){xr||kr||(kr=!0,Ar=Rr.then(Wr))}function Fr(e,t,n,a){N(e)?n.push(...e):t&&t.includes(e,e.allowRecurse?a+1:a)||n.push(e),Dr()}function _r(e){Fr(e,Nr,Ir,Or)}function Lr(e,t=null){if(Sr.length){for(Mr=t,$r=[...new Set(Sr)],Sr.length=0,Tr=0;Tr<$r.length;Tr++)$r[Tr]();$r=null,Tr=0,Mr=null,Lr(e,t)}}function zr(e){if(Ir.length){const e=[...new Set(Ir)];if(Ir.length=0,Nr)return void Nr.push(...e);for(Nr=e,Nr.sort(((e,t)=>Vr(e)-Vr(t))),Or=0;Or<Nr.length;Or++)Nr[Or]();Nr=null,Or=0}}const Vr=e=>null==e.id?1/0:e.id;function Wr(e){kr=!1,xr=!0,Lr(e),Cr.sort(((e,t)=>Vr(e)-Vr(t)));try{for(Er=0;Er<Cr.length;Er++){const e=Cr[Er];e&&!1!==e.active&&br(e,null,14)}}finally{Er=0,Cr.length=0,zr(),xr=!1,Ar=null,(Cr.length||Sr.length||Ir.length)&&Wr(e)}}const Hr={};function jr(e,t,n){return Ur(e,t,n)}function Ur(e,t,{immediate:n,deep:a,flush:r,onTrack:o,onTrigger:s}=b){const i=ar;let l,u,c=!1,p=!1;if(kt(e)?(l=()=>e.value,c=!!e._shallow):ht(e)?(l=()=>e,a=!0):N(e)?(p=!0,c=e.some(ht),l=()=>e.map((e=>kt(e)?e.value:ht(e)?Xr(e):A(e)?br(e,i,2):void 0))):l=A(e)?t?()=>br(e,i,2):()=>{if(!i||!i.isUnmounted)return u&&u(),yr(e,i,3,[d])}:w,t&&a){const e=l;l=()=>Xr(e())}let d=e=>{u=g.onStop=()=>{br(e,i,4)}};if(cr)return d=w,t?n&&yr(t,i,3,[l(),p?[]:void 0,d]):l(),w;let h=p?[]:Hr;const f=()=>{if(g.active)if(t){const e=g.run();(a||c||(p?e.some(((e,t)=>Y(e,h[t]))):Y(e,h)))&&(u&&u(),yr(t,i,3,[e,h===Hr?void 0:h,d]),h=e)}else g.run()};let m;f.allowRecurse=!!t,m="sync"===r?f:"post"===r?()=>la(f,i&&i.suspense):()=>{!i||i.isMounted?function(e){Fr(e,$r,Sr,Tr)}(f):f()};const g=new me(l,m);return t?n?f():h=g.run():"post"===r?la(g.run.bind(g),i&&i.suspense):g.run(),()=>{g.stop(),i&&i.scope&&$(i.scope.effects,g)}}function Gr(e,t,n){const a=this.proxy,r=M(e)?e.includes(".")?qr(a,e):()=>a[e]:e.bind(a,a);let o;A(t)?o=t:(o=t.handler,n=t);const s=ar;or(this);const i=Ur(r,o.bind(a),n);return s?or(s):sr(),i}function qr(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function Xr(e,t){if(!P(e)||e.__v_skip)return e;if((t=t||new Set).has(e))return e;if(t.add(e),kt(e))Xr(e.value,t);else if(N(e))for(let n=0;n<e.length;n++)Xr(e[n],t);else if(R(e)||O(e))e.forEach((e=>{Xr(e,t)}));else if(L(e))for(const n in e)Xr(e[n],t);return e}function Yr(e,t,n){const a=arguments.length;return 2===a?P(t)&&!N(t)?Oa(t)?Da(e,null,[t]):Da(e,t):Da(e,null,t):(a>3?n=Array.prototype.slice.call(arguments,2):3===a&&Oa(n)&&(n=[n]),Da(e,t,n))}Symbol("");const Kr="3.2.26",Jr="undefined"!=typeof document?document:null,Zr=new Map,Qr={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,a)=>{const r=t?Jr.createElementNS("http://www.w3.org/2000/svg",e):Jr.createElement(e,n?{is:n}:void 0);return"select"===e&&a&&null!=a.multiple&&r.setAttribute("multiple",a.multiple),r},createText:e=>Jr.createTextNode(e),createComment:e=>Jr.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Jr.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,a){const r=n?n.previousSibling:t.lastChild;let o=Zr.get(e);if(!o){const t=Jr.createElement("template");if(t.innerHTML=a?`<svg>${e}</svg>`:e,o=t.content,a){const e=o.firstChild;for(;e.firstChild;)o.appendChild(e.firstChild);o.removeChild(e)}Zr.set(e,o)}return t.insertBefore(o.cloneNode(!0),n),[r?r.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};const eo=/\s*!important$/;function to(e,t,n){if(N(n))n.forEach((n=>to(e,t,n)));else if(t.startsWith("--"))e.setProperty(t,n);else{const a=function(e,t){const n=ao[t];if(n)return n;let a=j(t);if("filter"!==a&&a in e)return ao[t]=a;a=q(a);for(let n=0;n<no.length;n++){const r=no[n]+a;if(r in e)return ao[t]=r}return t}(e,t);eo.test(n)?e.setProperty(G(a),n.replace(eo,""),"important"):e[a]=n}}const no=["Webkit","Moz","ms"],ao={};const ro="http://www.w3.org/1999/xlink";let oo=Date.now,so=!1;if("undefined"!=typeof window){oo()>document.createEvent("Event").timeStamp&&(oo=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);so=!!(e&&Number(e[1])<=53)}let io=0;const lo=Promise.resolve(),uo=()=>{io=0};function co(e,t,n,a){e.addEventListener(t,n,a)}function po(e,t,n,a,r=null){const o=e._vei||(e._vei={}),s=o[t];if(a&&s)s.value=a;else{const[n,i]=function(e){let t;if(ho.test(e)){let n;for(t={};n=e.match(ho);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[G(e.slice(2)),t]}(t);if(a){const s=o[t]=function(e,t){const n=e=>{const a=e.timeStamp||oo();(so||a>=n.attached-1)&&yr(function(e,t){if(N(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e(t)))}return t}(e,n.value),t,5,[e])};return n.value=e,n.attached=(()=>io||(lo.then(uo),io=oo()))(),n}(a,r);co(e,n,s,i)}else s&&(!function(e,t,n,a){e.removeEventListener(t,n,a)}(e,n,s,i),o[t]=void 0)}}const ho=/(?:Once|Passive|Capture)$/;const fo=/^on[a-z]/;"undefined"!=typeof HTMLElement&&HTMLElement;const mo="transition",go="animation",vo=(e,{slots:t})=>Yr(an,xo(e),t);vo.displayName="Transition";const bo={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},yo=(vo.props=S({},an.props,bo),(e,t=[])=>{N(e)?e.forEach((e=>e(...t))):e&&e(...t)}),wo=e=>!!e&&(N(e)?e.some((e=>e.length>1)):e.length>1);function xo(e){const t={};for(const n in e)n in bo||(t[n]=e[n]);if(!1===e.css)return t;const{name:n="v",type:a,duration:r,enterFromClass:o=`${n}-enter-from`,enterActiveClass:s=`${n}-enter-active`,enterToClass:i=`${n}-enter-to`,appearFromClass:l=o,appearActiveClass:u=s,appearToClass:c=i,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=e,f=function(e){if(null==e)return null;if(P(e))return[ko(e.enter),ko(e.leave)];{const t=ko(e);return[t,t]}}(r),m=f&&f[0],g=f&&f[1],{onBeforeEnter:v,onEnter:b,onEnterCancelled:y,onLeave:w,onLeaveCancelled:x,onBeforeAppear:k=v,onAppear:C=b,onAppearCancelled:E=y}=t,$=(e,t,n)=>{Eo(e,t?c:i),Eo(e,t?u:s),n&&n()},T=(e,t)=>{Eo(e,h),Eo(e,d),t&&t()},I=e=>(t,n)=>{const r=e?C:b,s=()=>$(t,e,n);yo(r,[t,s]),So((()=>{Eo(t,e?l:o),Co(t,e?c:i),wo(r)||To(t,a,m,s)}))};return S(t,{onBeforeEnter(e){yo(v,[e]),Co(e,o),Co(e,s)},onBeforeAppear(e){yo(k,[e]),Co(e,l),Co(e,u)},onEnter:I(!1),onAppear:I(!0),onLeave(e,t){const n=()=>T(e,t);Co(e,p),Ro(),Co(e,d),So((()=>{Eo(e,p),Co(e,h),wo(w)||To(e,a,g,n)})),yo(w,[e,n])},onEnterCancelled(e){$(e,!1),yo(y,[e])},onAppearCancelled(e){$(e,!0),yo(E,[e])},onLeaveCancelled(e){T(e),yo(x,[e])}})}function ko(e){return Z(e)}function Co(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e._vtc||(e._vtc=new Set)).add(t)}function Eo(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function So(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let $o=0;function To(e,t,n,a){const r=e._endId=++$o,o=()=>{r===e._endId&&a()};if(n)return setTimeout(o,n);const{type:s,timeout:i,propCount:l}=Io(e,t);if(!s)return a();const u=s+"end";let c=0;const p=()=>{e.removeEventListener(u,d),o()},d=t=>{t.target===e&&++c>=l&&p()};setTimeout((()=>{c<l&&p()}),i+1),e.addEventListener(u,d)}function Io(e,t){const n=window.getComputedStyle(e),a=e=>(n[e]||"").split(", "),r=a("transitionDelay"),o=a("transitionDuration"),s=No(r,o),i=a("animationDelay"),l=a("animationDuration"),u=No(i,l);let c=null,p=0,d=0;t===mo?s>0&&(c=mo,p=s,d=o.length):t===go?u>0&&(c=go,p=u,d=l.length):(p=Math.max(s,u),c=p>0?s>u?mo:go:null,d=c?c===mo?o.length:l.length:0);return{type:c,timeout:p,propCount:d,hasTransform:c===mo&&/\b(transform|all)(,|$)/.test(n.transitionProperty)}}function No(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map(((t,n)=>Oo(t)+Oo(e[n]))))}function Oo(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Ro(){return document.body.offsetHeight}new WeakMap,new WeakMap;const Ao={beforeMount(e,{value:t},{transition:n}){e._vod="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):Mo(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:a}){!t!=!n&&(a?t?(a.beforeEnter(e),Mo(e,!0),a.enter(e)):a.leave(e,(()=>{Mo(e,!1)})):Mo(e,t))},beforeUnmount(e,{value:t}){Mo(e,t)}};function Mo(e,t){e.style.display=t?e._vod:"none"}const Bo=S({patchProp:(e,t,n,a,r=!1,o,s,i,l)=>{"class"===t?function(e,t,n){const a=e._vtc;a&&(t=(t?[t,...a]:[...a]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}(e,a,r):"style"===t?function(e,t,n){const a=e.style,r=M(n);if(n&&!r){for(const e in n)to(a,e,n[e]);if(t&&!M(t))for(const e in t)null==n[e]&&to(a,e,"")}else{const o=a.display;r?t!==n&&(a.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(a.display=o)}}(e,n,a):C(t)?E(t)||po(e,t,0,a,s):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):function(e,t,n,a){if(a)return"innerHTML"===t||"textContent"===t||!!(t in e&&fo.test(t)&&A(n));if("spellcheck"===t||"draggable"===t)return!1;if("form"===t)return!1;if("list"===t&&"INPUT"===e.tagName)return!1;if("type"===t&&"TEXTAREA"===e.tagName)return!1;if(fo.test(t)&&M(n))return!1;return t in e}(e,t,a,r))?function(e,t,n,a,r,o,s){if("innerHTML"===t||"textContent"===t)return a&&s(a,r,o),void(e[t]=null==n?"":n);if("value"===t&&"PROGRESS"!==e.tagName&&!e.tagName.includes("-")){e._value=n;const a=null==n?"":n;return e.value===a&&"OPTION"!==e.tagName||(e.value=a),void(null==n&&e.removeAttribute(t))}if(""===n||null==n){const a=typeof e[t];if("boolean"===a)return void(e[t]=c(n));if(null==n&&"string"===a)return e[t]="",void e.removeAttribute(t);if("number"===a){try{e[t]=0}catch(e){}return void e.removeAttribute(t)}}try{e[t]=n}catch(e){}}(e,t,a,o,s,i,l):("true-value"===t?e._trueValue=a:"false-value"===t&&(e._falseValue=a),function(e,t,n,a,r){if(a&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(ro,t.slice(6,t.length)):e.setAttributeNS(ro,t,n);else{const a=u(t);null==n||a&&!c(n)?e.removeAttribute(t):e.setAttribute(t,a?"":n)}}(e,t,a,r))}},Qr);let Po;function Do(){return Po||(Po=ua(Bo))}function Fo(e){if(M(e)){return document.querySelector(e)}return e}function _o(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function Lo(e,t){void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(t).forEach((function(n){void 0===e[n]?e[n]=t[n]:_o(t[n])&&_o(e[n])&&Object.keys(t[n]).length>0&&Lo(e[n],t[n])}))}var zo={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Vo(){var e="undefined"!=typeof document?document:{};return Lo(e,zo),e}var Wo={document:zo,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(e){return"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0)},cancelAnimationFrame:function(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function Ho(){var e="undefined"!=typeof window?window:{};return Lo(e,Wo),e}var jo=0;function Uo(){return jo+=1}function Go(e,t){void 0===e&&(e="xxxxxxxxxx"),void 0===t&&(t="0123456789abcdef");var n=t.length;return e.replace(/x/g,(function(){return t[Math.floor(Math.random()*n)]}))}var qo,Xo,Yo='\n  <span class="preloader-inner">\n    <svg viewBox="0 0 36 36">\n      <circle cx="18" cy="18" r="16"></circle>\n    </svg>\n  </span>\n'.trim(),Ko=('\n  <span class="preloader-inner">\n    '+[0,1,2,3,4,5,6,7].map((function(){return'<span class="preloader-inner-line"></span>'})).join("")+"\n  </span>\n").trim(),Jo='\n  <span class="preloader-inner">\n    <span class="preloader-inner-circle"></span>\n  </span>\n';function Zo(e){var t;return e.split("").map((function(e,n){return e.match(/[A-Z]/)&&0!==n&&!t?(t=!0,":"+e.toLowerCase()):e.toLowerCase()})).join("")}function Qo(e){var t=e;Object.keys(t).forEach((function(e){try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}}))}function es(e){return Ho().requestAnimationFrame(e)}function ts(e){return Ho().cancelAnimationFrame(e)}function ns(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function as(e){return es((function(){es(e)}))}function rs(){return Date.now()}function os(e){var t,n,a,r,o=Ho(),s={},i=e||o.location.href;if("string"==typeof i&&i.length)for(r=(n=(i=i.indexOf("?")>-1?i.replace(/\S*\?/,""):"").split("&").filter((function(e){return""!==e}))).length,t=0;t<r;t+=1)a=n[t].replace(/#\S+/g,"").split("="),s[decodeURIComponent(a[0])]=void 0===a[1]?void 0:decodeURIComponent(a.slice(1).join("="))||"";return s}function ss(e,t){void 0===t&&(t="x");var n,a,r,o=Ho(),s=o.getComputedStyle(e,null);return o.WebKitCSSMatrix?((a=s.transform||s.webkitTransform).split(",").length>6&&(a=a.split(", ").map((function(e){return e.replace(",",".")})).join(", ")),r=new o.WebKitCSSMatrix("none"===a?"":a)):n=(r=s.MozTransform||s.OTransform||s.MsTransform||s.msTransform||s.transform||s.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===t&&(a=o.WebKitCSSMatrix?r.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===t&&(a=o.WebKitCSSMatrix?r.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),a||0}function is(e,t){if(void 0===t&&(t=[]),"string"==typeof e)return e;var n,a=[];function r(e){if(t.length>0){for(var n="",a=0;a<t.length;a+=1)n+=0===a?t[a]:"["+encodeURIComponent(t[a])+"]";return n+"["+encodeURIComponent(e)+"]"}return encodeURIComponent(e)}function o(e){return encodeURIComponent(e)}return Object.keys(e).forEach((function(s){var i;if(Array.isArray(e[s])){i=[];for(var l=0;l<e[s].length;l+=1)Array.isArray(e[s][l])||"object"!=typeof e[s][l]?i.push(r(s)+"[]="+o(e[s][l])):((n=t.slice()).push(s),n.push(String(l)),i.push(is(e[s][l],n)));i.length>0&&a.push(i.join("&"))}else null===e[s]||""===e[s]?a.push(r(s)+"="):"object"==typeof e[s]?((n=t.slice()).push(s),""!==(i=is(e[s],n))&&a.push(i)):void 0!==e[s]&&""!==e[s]?a.push(r(s)+"="+o(e[s])):""===e[s]&&a.push(r(s))})),a.join("&")}function ls(e){return"object"==typeof e&&null!==e&&e.constructor&&e.constructor===Object}function us(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0];t.splice(0,1);for(var r=t,o=0;o<r.length;o+=1){var s=t[o];if(null!=s)for(var i=Object.keys(Object(s)),l=0,u=i.length;l<u;l+=1){var c=i[l],p=Object.getOwnPropertyDescriptor(s,c);void 0!==p&&p.enumerable&&(a[c]=s[c])}}return a}function cs(){for(var e,t,n=!0,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];"boolean"==typeof r[0]?(n=r[0],e=r[1],r.splice(0,2),t=r):(e=r[0],r.splice(0,1),t=r);for(var s=0;s<t.length;s+=1){var i=r[s];if(null!=i)for(var l=Object.keys(Object(i)),u=0,c=l.length;u<c;u+=1){var p=l[u],d=Object.getOwnPropertyDescriptor(i,p);void 0!==d&&d.enumerable&&(n?ls(e[p])&&ls(i[p])?cs(e[p],i[p]):!ls(e[p])&&ls(i[p])?(e[p]={},cs(e[p],i[p])):e[p]=i[p]:e[p]=i[p])}}return e}function ps(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,a){return t+t+n+n+a+a})),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?n.slice(1).map((function(e){return parseInt(e,16)})):null}function ds(e,t,n){var a=[e,t,n].map((function(e){var t=e.toString(16);return 1===t.length?"0"+t:t})).join("");return"#"+a}function hs(e,t,n){e/=255,t/=255,n/=255;var a,r=Math.max(e,t,n),o=Math.min(e,t,n),s=r-o;0===s?a=0:r===e?a=(t-n)/s%6:r===t?a=(n-e)/s+2:r===n&&(a=(e-t)/s+4);var i=(o+r)/2;return a<0&&(a=6+a),[60*a,0===s?0:s/(1-Math.abs(2*i-1)),i]}function fs(e,t,n){var a,r=(1-Math.abs(2*n-1))*t,o=e/60,s=r*(1-Math.abs(o%2-1));Number.isNaN(e)||void 0===e?a=[0,0,0]:o<=1?a=[r,s,0]:o<=2?a=[s,r,0]:o<=3?a=[0,r,s]:o<=4?a=[0,s,r]:o<=5?a=[s,0,r]:o<=6&&(a=[r,0,s]);var i=n-r/2;return a.map((function(e){return Math.max(0,Math.min(255,Math.round(255*(e+i))))}))}function ms(e,t,n){var a={h:e,s:0,l:0},r=t,o=n;return a.l=(2-r)*o/2,a.s=a.l&&a.l<1?r*o/(a.l<.5?2*a.l:2-2*a.l):a.s,[a.h,a.s,a.l]}function gs(e,t,n){var a={h:e,s:0,b:0},r=n,o=t*(r<.5?r:1-r);return a.b=r+o,a.s=r>0?2*o/a.b:a.s,[a.h,a.s,a.b]}function vs(){for(var e,t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];if(1===a.length?t=ps(e=a[0]):3===a.length&&(t=a,e=ds.apply(void 0,t)),!t)return{};var o=hs.apply(void 0,t),s=[o[0],o[1],Math.max(0,o[2]-.08)],i=[o[0],o[1],Math.max(0,o[2]+.08)],l=ds.apply(void 0,fs.apply(void 0,s)),u=ds.apply(void 0,fs.apply(void 0,i));return{"--f7-theme-color":e,"--f7-theme-color-rgb":t.join(", "),"--f7-theme-color-shade":l,"--f7-theme-color-tint":u}}function bs(e,t){Object.keys(t).forEach((function(n){ls(t[n])&&Object.keys(t[n]).forEach((function(a){"function"==typeof t[n][a]&&(t[n][a]=t[n][a].bind(e))})),e[n]=t[n]}))}function ys(){for(var e=[],t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return n.forEach((function(t){Array.isArray(t)?e.push.apply(e,ys.apply(void 0,t)):e.push(t)})),e}function ws(){return qo||(qo=function(){var e=Ho(),t=Vo();return{touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),pointerEvents:!!e.PointerEvent&&"maxTouchPoints"in e.navigator&&e.navigator.maxTouchPoints>=0,passiveListener:function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});e.addEventListener("testPassiveListener",null,n)}catch(e){}return t}(),intersectionObserver:"IntersectionObserver"in e}}()),qo}function xs(e,t){return void 0===e&&(e={}),Xo&&!t||(Xo=function(e){var t=(void 0===e?{}:e).userAgent,n=ws(),a=Ho(),r=a.navigator.platform,o=t||a.navigator.userAgent,s={ios:!1,android:!1,androidChrome:!1,desktop:!1,iphone:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,cordova:!(!a.cordova&&!a.phonegap),phonegap:!(!a.cordova&&!a.phonegap),electron:!1,capacitor:!!a.Capacitor,nwjs:!1},i=a.screen.width,l=a.screen.height,u=o.match(/(Android);?[\s\/]+([\d.]+)?/),c=o.match(/(iPad).*OS\s([\d_]+)/),p=o.match(/(iPod)(.*OS\s([\d_]+))?/),d=!c&&o.match(/(iPhone\sOS|iOS|iPhone;\sCPU\sOS)\s([\d_]+)/),h=o.indexOf("MSIE ")>=0||o.indexOf("Trident/")>=0,f=o.indexOf("Edge/")>=0,m=o.indexOf("Gecko/")>=0&&o.indexOf("Firefox/")>=0,g="Win32"===r,v=o.toLowerCase().indexOf("electron")>=0,b="undefined"!=typeof nw&&"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.nw,y="MacIntel"===r;return!c&&y&&n.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(i+"x"+l)>=0&&((c=o.match(/(Version)\/([\d.]+)/))||(c=[0,1,"13_0_0"]),y=!1),s.ie=h,s.edge=f,s.firefox=m,u&&(s.os="android",s.osVersion=u[2],s.android=!0,s.androidChrome=o.toLowerCase().indexOf("chrome")>=0),(c||d||p)&&(s.os="ios",s.ios=!0),d&&!p&&(s.osVersion=d[2].replace(/_/g,"."),s.iphone=!0),c&&(s.osVersion=c[2].replace(/_/g,"."),s.ipad=!0),p&&(s.osVersion=p[3]?p[3].replace(/_/g,"."):null,s.ipod=!0),s.ios&&s.osVersion&&o.indexOf("Version/")>=0&&"10"===s.osVersion.split(".")[0]&&(s.osVersion=o.toLowerCase().split("version/")[1].split(" ")[0]),s.webView=!(!(d||c||p)||!o.match(/.*AppleWebKit(?!.*Safari)/i)&&!a.navigator.standalone)||a.matchMedia&&a.matchMedia("(display-mode: standalone)").matches,s.webview=s.webView,s.standalone=s.webView,s.desktop=!(s.ios||s.android)||v||b,s.desktop&&(s.electron=v,s.nwjs=b,s.macos=y,s.windows=g,s.macos&&(s.os="macos"),s.windows&&(s.os="windows")),s.pixelRatio=a.devicePixelRatio||1,s.prefersColorScheme=function(){var e;return a.matchMedia&&a.matchMedia("(prefers-color-scheme: light)").matches&&(e="light"),a.matchMedia&&a.matchMedia("(prefers-color-scheme: dark)").matches&&(e="dark"),e},s}(e)),Xo}var ks=function(){function e(e){void 0===e&&(e=[]);this.eventsParents=e,this.eventsListeners={}}var t=e.prototype;return t.on=function(e,t,n){var a=this;if("function"!=typeof t)return a;var r=n?"unshift":"push";return e.split(" ").forEach((function(e){a.eventsListeners[e]||(a.eventsListeners[e]=[]),a.eventsListeners[e][r](t)})),a},t.once=function(e,t,n){var a=this;if("function"!=typeof t)return a;function r(){a.off(e,r),r.f7proxy&&delete r.f7proxy;for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];t.apply(a,o)}return r.f7proxy=t,a.on(e,r,n)},t.off=function(e,t){var n=this;return n.eventsListeners?(e.split(" ").forEach((function(e){void 0===t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach((function(a,r){(a===t||a.f7proxy&&a.f7proxy===t)&&n.eventsListeners[e].splice(r,1)}))})),n):n},t.emit=function(){var e,t,n,a,r=this;if(!r.eventsListeners)return r;for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];"string"==typeof s[0]||Array.isArray(s[0])?(e=s[0],t=s.slice(1,s.length),n=r,a=r.eventsParents):(e=s[0].events,t=s[0].data,n=s[0].context||r,a=s[0].local?[]:s[0].parents||r.eventsParents);var l=Array.isArray(e)?e:e.split(" "),u=l.map((function(e){return e.replace("local::","")})),c=l.filter((function(e){return e.indexOf("local::")<0}));return u.forEach((function(e){if(r.eventsListeners&&r.eventsListeners[e]){var a=[];r.eventsListeners[e].forEach((function(e){a.push(e)})),a.forEach((function(e){e.apply(n,t)}))}})),a&&a.length>0&&a.forEach((function(e){e.emit.apply(e,[c].concat(t))})),r},e}(),Cs=ks;function Es(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ss(e,t){return Ss=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ss(e,t)}var $s=function(e){var t,n;function a(t,n){var a;void 0===t&&(t={}),void 0===n&&(n=[]);var r=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(a=e.call(this,n)||this);return r.params=t,r.params&&r.params.on&&Object.keys(r.params.on).forEach((function(e){r.on(e,r.params.on[e])})),a}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,Ss(t,n);var r,o,s,i=a.prototype;return i.useModuleParams=function(e,t){if(e.params){var n={};Object.keys(e.params).forEach((function(e){void 0!==t[e]&&(n[e]=cs({},t[e]))})),cs(t,e.params),Object.keys(n).forEach((function(e){cs(t[e],n[e])}))}},i.useModulesParams=function(e){var t=this;t.modules&&Object.keys(t.modules).forEach((function(n){var a=t.modules[n];a.params&&cs(e,a.params)}))},i.useModule=function(e,t){void 0===e&&(e=""),void 0===t&&(t={});var n=this;if(n.modules){var a="string"==typeof e?n.modules[e]:e;a&&(a.instance&&Object.keys(a.instance).forEach((function(e){var t=a.instance[e];n[e]="function"==typeof t?t.bind(n):t})),a.on&&n.on&&Object.keys(a.on).forEach((function(e){n.on(e,a.on[e])})),a.vnode&&(n.vnodeHooks||(n.vnodeHooks={}),Object.keys(a.vnode).forEach((function(e){Object.keys(a.vnode[e]).forEach((function(t){var r=a.vnode[e][t];n.vnodeHooks[t]||(n.vnodeHooks[t]={}),n.vnodeHooks[t][e]||(n.vnodeHooks[t][e]=[]),n.vnodeHooks[t][e].push(r.bind(n))}))}))),a.create&&a.create.bind(n)(t))}},i.useModules=function(e){void 0===e&&(e={});var t=this;t.modules&&Object.keys(t.modules).forEach((function(n){var a=e[n]||{};t.useModule(n,a)}))},a.installModule=function(e){var t=this;t.prototype.modules||(t.prototype.modules={});var n=e.name||Object.keys(t.prototype.modules).length+"_"+rs();if(t.prototype.modules[n]=e,e.proto&&Object.keys(e.proto).forEach((function(n){t.prototype[n]=e.proto[n]})),e.static&&Object.keys(e.static).forEach((function(n){t[n]=e.static[n]})),e.install){for(var a=arguments.length,r=new Array(a>1?a-1:0),o=1;o<a;o++)r[o-1]=arguments[o];e.install.apply(t,r)}return t},a.use=function(e){var t=this;if(Array.isArray(e))return e.forEach((function(e){return t.installModule(e)})),t;for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return t.installModule.apply(t,[e].concat(a))},r=a,s=[{key:"components",set:function(e){this.use&&this.use(e)}}],(o=null)&&Es(r.prototype,o),s&&Es(r,s),a}(Cs),Ts=$s;function Is(e){return Is=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Is(e)}function Ns(e,t){return Ns=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ns(e,t)}function Os(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Rs(e,t,n){return Rs=Os()?Reflect.construct:function(e,t,n){var a=[null];a.push.apply(a,t);var r=new(Function.bind.apply(e,a));return n&&Ns(r,n.prototype),r},Rs.apply(null,arguments)}function As(e){var t="function"==typeof Map?new Map:void 0;return As=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,a)}function a(){return Rs(e,arguments,Is(this).constructor)}return a.prototype=Object.create(e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Ns(a,e)},As(e)}var Ms=function(e){var t,n;function a(t){var n,a,r;return n=e.call.apply(e,[this].concat(t))||this,a=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),r=a.__proto__,Object.defineProperty(a,"__proto__",{get:function(){return r},set:function(e){r.__proto__=e}}),n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a}(As(Array));function Bs(e){void 0===e&&(e=[]);var t=[];return e.forEach((function(e){Array.isArray(e)?t.push.apply(t,Bs(e)):t.push(e)})),t}function Ps(e,t){return Array.prototype.filter.call(e,t)}function Ds(e){return e.toLowerCase().replace(/-(.)/g,(function(e,t){return t.toUpperCase()}))}function Fs(e,t){var n=Ho(),a=Vo(),r=[];if(!t&&e instanceof Ms)return e;if(!e)return new Ms(r);if("string"==typeof e){var o=e.trim();if(o.indexOf("<")>=0&&o.indexOf(">")>=0){var s="div";0===o.indexOf("<li")&&(s="ul"),0===o.indexOf("<tr")&&(s="tbody"),0!==o.indexOf("<td")&&0!==o.indexOf("<th")||(s="tr"),0===o.indexOf("<tbody")&&(s="table"),0===o.indexOf("<option")&&(s="select");var i=a.createElement(s);i.innerHTML=o;for(var l=0;l<i.childNodes.length;l+=1)r.push(i.childNodes[l])}else r=function(e,t){if("string"!=typeof e)return[e];for(var n=[],a=t.querySelectorAll(e),r=0;r<a.length;r+=1)n.push(a[r]);return n}(e.trim(),t||a)}else if(e.nodeType||e===n||e===a)r.push(e);else if(Array.isArray(e)){if(e instanceof Ms)return e;r=e}return new Ms(function(e){for(var t=[],n=0;n<e.length;n+=1)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(r))}function _s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=Bs(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).add.apply(t,a)})),this}function Ls(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=Bs(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).remove.apply(t,a)})),this}function zs(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=Bs(t.map((function(e){return e.split(" ")})));this.forEach((function(e){a.forEach((function(t){e.classList.toggle(t)}))}))}function Vs(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=Bs(t.map((function(e){return e.split(" ")})));return Ps(this,(function(e){return a.filter((function(t){return e.classList.contains(t)})).length>0})).length>0}function Ws(e,t){if(1===arguments.length&&"string"==typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var n=0;n<this.length;n+=1)if(2===arguments.length)this[n].setAttribute(e,t);else for(var a in e)this[n][a]=e[a],this[n].setAttribute(a,e[a]);return this}function Hs(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this}function js(e,t){if(1!==arguments.length||"string"!=typeof e){for(var n=0;n<this.length;n+=1)if(2===arguments.length)this[n][e]=t;else for(var a in e)this[n][a]=e[a];return this}return this[0]?this[0][e]:this}function Us(e,t){var n;if(void 0===t){if(!(n=this[0]))return;if(n.dom7ElementDataStorage&&e in n.dom7ElementDataStorage)return n.dom7ElementDataStorage[e];var a=n.getAttribute("data-"+e);return a||void 0}for(var r=0;r<this.length;r+=1)(n=this[r]).dom7ElementDataStorage||(n.dom7ElementDataStorage={}),n.dom7ElementDataStorage[e]=t;return this}function Gs(e){for(var t=0;t<this.length;t+=1){var n=this[t];n.dom7ElementDataStorage&&n.dom7ElementDataStorage[e]&&(n.dom7ElementDataStorage[e]=null,delete n.dom7ElementDataStorage[e])}}function qs(){var e=this[0];if(e){var t={};if(e.dataset)for(var n in e.dataset)t[n]=e.dataset[n];else for(var a=0;a<e.attributes.length;a+=1){var r=e.attributes[a];r.name.indexOf("data-")>=0&&(t[Ds(r.name.split("data-")[1])]=r.value)}for(var o in t)"false"===t[o]?t[o]=!1:"true"===t[o]?t[o]=!0:parseFloat(t[o])===1*t[o]&&(t[o]*=1);return t}}function Xs(e){if(void 0===e){var t=this[0];if(!t)return;if(t.multiple&&"select"===t.nodeName.toLowerCase()){for(var n=[],a=0;a<t.selectedOptions.length;a+=1)n.push(t.selectedOptions[a].value);return n}return t.value}for(var r=0;r<this.length;r+=1){var o=this[r];if(Array.isArray(e)&&o.multiple&&"select"===o.nodeName.toLowerCase())for(var s=0;s<o.options.length;s+=1)o.options[s].selected=e.indexOf(o.options[s].value)>=0;else o.value=e}return this}function Ys(e){return this.val(e)}function Ks(e){for(var t=0;t<this.length;t+=1)this[t].style.transform=e;return this}function Js(e){for(var t=0;t<this.length;t+=1)this[t].style.transitionDuration="string"!=typeof e?e+"ms":e;return this}function Zs(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],r=t[1],o=t[2],s=t[3];function i(e){var t=e.target;if(t){var n=e.target.dom7EventData||[];if(n.indexOf(e)<0&&n.unshift(e),Fs(t).is(r))o.apply(t,n);else for(var a=Fs(t).parents(),s=0;s<a.length;s+=1)Fs(a[s]).is(r)&&o.apply(a[s],n)}}function l(e){var t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),o.apply(this,t)}"function"==typeof t[1]&&(a=t[0],o=t[1],s=t[2],r=void 0),s||(s=!1);for(var u,c=a.split(" "),p=0;p<this.length;p+=1){var d=this[p];if(r)for(u=0;u<c.length;u+=1){var h=c[u];d.dom7LiveListeners||(d.dom7LiveListeners={}),d.dom7LiveListeners[h]||(d.dom7LiveListeners[h]=[]),d.dom7LiveListeners[h].push({listener:o,proxyListener:i}),d.addEventListener(h,i,s)}else for(u=0;u<c.length;u+=1){var f=c[u];d.dom7Listeners||(d.dom7Listeners={}),d.dom7Listeners[f]||(d.dom7Listeners[f]=[]),d.dom7Listeners[f].push({listener:o,proxyListener:l}),d.addEventListener(f,l,s)}}return this}function Qs(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],r=t[1],o=t[2],s=t[3];"function"==typeof t[1]&&(a=t[0],o=t[1],s=t[2],r=void 0),s||(s=!1);for(var i=a.split(" "),l=0;l<i.length;l+=1)for(var u=i[l],c=0;c<this.length;c+=1){var p=this[c],d=void 0;if(!r&&p.dom7Listeners?d=p.dom7Listeners[u]:r&&p.dom7LiveListeners&&(d=p.dom7LiveListeners[u]),d&&d.length)for(var h=d.length-1;h>=0;h-=1){var f=d[h];o&&f.listener===o||o&&f.listener&&f.listener.dom7proxy&&f.listener.dom7proxy===o?(p.removeEventListener(u,f.proxyListener,s),d.splice(h,1)):o||(p.removeEventListener(u,f.proxyListener,s),d.splice(h,1))}}return this}function ei(){for(var e=this,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var r=n[0],o=n[1],s=n[2],i=n[3];function l(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];s.apply(this,n),e.off(r,o,l,i),l.dom7proxy&&delete l.dom7proxy}return"function"==typeof n[1]&&(r=n[0],s=n[1],i=n[2],o=void 0),l.dom7proxy=s,e.on(r,o,l,i)}function ti(){for(var e=Ho(),t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];for(var r=n[0].split(" "),o=n[1],s=0;s<r.length;s+=1)for(var i=r[s],l=0;l<this.length;l+=1){var u=this[l];if(e.CustomEvent){var c=new e.CustomEvent(i,{detail:o,bubbles:!0,cancelable:!0});u.dom7EventData=n.filter((function(e,t){return t>0})),u.dispatchEvent(c),u.dom7EventData=[],delete u.dom7EventData}}return this}function ni(e){var t=this;return e&&t.on("transitionend",(function n(a){a.target===this&&(e.call(this,a),t.off("transitionend",n))})),this}function ai(e){var t=this;return e&&t.on("animationend",(function n(a){a.target===this&&(e.call(this,a),t.off("animationend",n))})),this}function ri(){var e=Ho();return this[0]===e?e.innerWidth:this.length>0?parseFloat(this.css("width")):null}function oi(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null}function si(){var e=Ho();return this[0]===e?e.innerHeight:this.length>0?parseFloat(this.css("height")):null}function ii(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null}function li(){if(this.length>0){var e=Ho(),t=Vo(),n=this[0],a=n.getBoundingClientRect(),r=t.body,o=n.clientTop||r.clientTop||0,s=n.clientLeft||r.clientLeft||0,i=n===e?e.scrollY:n.scrollTop,l=n===e?e.scrollX:n.scrollLeft;return{top:a.top+i-o,left:a.left+l-s}}return null}function ui(){for(var e=0;e<this.length;e+=1)this[e].style.display="none";return this}function ci(){for(var e=Ho(),t=0;t<this.length;t+=1){var n=this[t];"none"===n.style.display&&(n.style.display=""),"none"===e.getComputedStyle(n,null).getPropertyValue("display")&&(n.style.display="block")}return this}function pi(){var e=Ho();return this[0]?e.getComputedStyle(this[0],null):{}}function di(e,t){var n,a=Ho();if(1===arguments.length){if("string"!=typeof e){for(n=0;n<this.length;n+=1)for(var r in e)this[n].style[r]=e[r];return this}if(this[0])return a.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"==typeof e){for(n=0;n<this.length;n+=1)this[n].style[e]=t;return this}return this}function hi(e){return e?(this.forEach((function(t,n){e.apply(t,[t,n])})),this):this}function fi(e){return Fs(Ps(this,e))}function mi(e){if(void 0===e)return this[0]?this[0].innerHTML:null;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this}function gi(e){if(void 0===e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this}function vi(e){var t,n,a=Ho(),r=Vo(),o=this[0];if(!o||void 0===e)return!1;if("string"==typeof e){if(o.matches)return o.matches(e);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(o.msMatchesSelector)return o.msMatchesSelector(e);for(t=Fs(e),n=0;n<t.length;n+=1)if(t[n]===o)return!0;return!1}if(e===r)return o===r;if(e===a)return o===a;if(e.nodeType||e instanceof Ms){for(t=e.nodeType?[e]:e,n=0;n<t.length;n+=1)if(t[n]===o)return!0;return!1}return!1}function bi(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}}function yi(e){if(void 0===e)return this;var t=this.length;if(e>t-1)return Fs([]);if(e<0){var n=t+e;return Fs(n<0?[]:[this[n]])}return Fs([this[e]])}function wi(){for(var e,t=Vo(),n=0;n<arguments.length;n+=1){e=n<0||arguments.length<=n?void 0:arguments[n];for(var a=0;a<this.length;a+=1)if("string"==typeof e){var r=t.createElement("div");for(r.innerHTML=e;r.firstChild;)this[a].appendChild(r.firstChild)}else if(e instanceof Ms)for(var o=0;o<e.length;o+=1)this[a].appendChild(e[o]);else this[a].appendChild(e)}return this}function xi(e){return Fs(e).append(this),this}function ki(e){var t,n,a=Vo();for(t=0;t<this.length;t+=1)if("string"==typeof e){var r=a.createElement("div");for(r.innerHTML=e,n=r.childNodes.length-1;n>=0;n-=1)this[t].insertBefore(r.childNodes[n],this[t].childNodes[0])}else if(e instanceof Ms)for(n=0;n<e.length;n+=1)this[t].insertBefore(e[n],this[t].childNodes[0]);else this[t].insertBefore(e,this[t].childNodes[0]);return this}function Ci(e){return Fs(e).prepend(this),this}function Ei(e){for(var t=Fs(e),n=0;n<this.length;n+=1)if(1===t.length)t[0].parentNode.insertBefore(this[n],t[0]);else if(t.length>1)for(var a=0;a<t.length;a+=1)t[a].parentNode.insertBefore(this[n].cloneNode(!0),t[a])}function Si(e){for(var t=Fs(e),n=0;n<this.length;n+=1)if(1===t.length)t[0].parentNode.insertBefore(this[n],t[0].nextSibling);else if(t.length>1)for(var a=0;a<t.length;a+=1)t[a].parentNode.insertBefore(this[n].cloneNode(!0),t[a].nextSibling)}function $i(e){return this.length>0?e?this[0].nextElementSibling&&Fs(this[0].nextElementSibling).is(e)?Fs([this[0].nextElementSibling]):Fs([]):this[0].nextElementSibling?Fs([this[0].nextElementSibling]):Fs([]):Fs([])}function Ti(e){var t=[],n=this[0];if(!n)return Fs([]);for(;n.nextElementSibling;){var a=n.nextElementSibling;e?Fs(a).is(e)&&t.push(a):t.push(a),n=a}return Fs(t)}function Ii(e){if(this.length>0){var t=this[0];return e?t.previousElementSibling&&Fs(t.previousElementSibling).is(e)?Fs([t.previousElementSibling]):Fs([]):t.previousElementSibling?Fs([t.previousElementSibling]):Fs([])}return Fs([])}function Ni(e){var t=[],n=this[0];if(!n)return Fs([]);for(;n.previousElementSibling;){var a=n.previousElementSibling;e?Fs(a).is(e)&&t.push(a):t.push(a),n=a}return Fs(t)}function Oi(e){return this.nextAll(e).add(this.prevAll(e))}function Ri(e){for(var t=[],n=0;n<this.length;n+=1)null!==this[n].parentNode&&(e?Fs(this[n].parentNode).is(e)&&t.push(this[n].parentNode):t.push(this[n].parentNode));return Fs(t)}function Ai(e){for(var t=[],n=0;n<this.length;n+=1)for(var a=this[n].parentNode;a;)e?Fs(a).is(e)&&t.push(a):t.push(a),a=a.parentNode;return Fs(t)}function Mi(e){var t=this;return void 0===e?Fs([]):(t.is(e)||(t=t.parents(e).eq(0)),t)}function Bi(e){for(var t=[],n=0;n<this.length;n+=1)for(var a=this[n].querySelectorAll(e),r=0;r<a.length;r+=1)t.push(a[r]);return Fs(t)}function Pi(e){for(var t=[],n=0;n<this.length;n+=1)for(var a=this[n].children,r=0;r<a.length;r+=1)e&&!Fs(a[r]).is(e)||t.push(a[r]);return Fs(t)}function Di(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}function Fi(){return this.remove()}function _i(){for(var e,t,n=this,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];for(e=0;e<r.length;e+=1){var s=Fs(r[e]);for(t=0;t<s.length;t+=1)n.push(s[t])}return n}function Li(){for(var e=0;e<this.length;e+=1){var t=this[e];if(1===t.nodeType){for(var n=0;n<t.childNodes.length;n+=1)t.childNodes[n].parentNode&&t.childNodes[n].parentNode.removeChild(t.childNodes[n]);t.textContent=""}}return this}function zi(){for(var e=Ho(),t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var r=n[0],o=n[1],s=n[2],i=n[3],l=n[4];return 4===n.length&&"function"==typeof i&&(l=i,r=n[0],o=n[1],s=n[2],l=n[3],i=n[4]),void 0===i&&(i="swing"),this.each((function(){var t,n,a,u,c,p,d,h,f=this,m=o>0||0===o,g=r>0||0===r;if(void 0===i&&(i="swing"),m&&(t=f.scrollTop,s||(f.scrollTop=o)),g&&(n=f.scrollLeft,s||(f.scrollLeft=r)),s){m&&(a=f.scrollHeight-f.offsetHeight,c=Math.max(Math.min(o,a),0)),g&&(u=f.scrollWidth-f.offsetWidth,p=Math.max(Math.min(r,u),0));var v=null;m&&c===t&&(m=!1),g&&p===n&&(g=!1),e.requestAnimationFrame((function a(r){void 0===r&&(r=(new Date).getTime()),null===v&&(v=r);var o,u=Math.max(Math.min((r-v)/s,1),0),b="linear"===i?u:.5-Math.cos(u*Math.PI)/2;m&&(d=t+b*(c-t)),g&&(h=n+b*(p-n)),m&&c>t&&d>=c&&(f.scrollTop=c,o=!0),m&&c<t&&d<=c&&(f.scrollTop=c,o=!0),g&&p>n&&h>=p&&(f.scrollLeft=p,o=!0),g&&p<n&&h<=p&&(f.scrollLeft=p,o=!0),o?l&&l():(m&&(f.scrollTop=d),g&&(f.scrollLeft=h),e.requestAnimationFrame(a))}))}}))}function Vi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],r=t[1],o=t[2],s=t[3];3===t.length&&"function"==typeof o&&(a=t[0],r=t[1],s=t[2],o=t[3]);var i=this;return void 0===a?i.length>0?i[0].scrollTop:null:i.scrollTo(void 0,a,r,o,s)}function Wi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],r=t[1],o=t[2],s=t[3];3===t.length&&"function"==typeof o&&(a=t[0],r=t[1],s=t[2],o=t[3]);var i=this;return void 0===a?i.length>0?i[0].scrollLeft:null:i.scrollTo(a,void 0,r,o,s)}function Hi(e,t){var n,a=Ho(),r=this,o={props:Object.assign({},e),params:Object.assign({duration:300,easing:"swing"},t),elements:r,animating:!1,que:[],easingProgress:function(e,t){return"swing"===e?.5-Math.cos(t*Math.PI)/2:"function"==typeof e?e(t):t},stop:function(){o.frameId&&a.cancelAnimationFrame(o.frameId),o.animating=!1,o.elements.each((function(e){delete e.dom7AnimateInstance})),o.que=[]},done:function(e){if(o.animating=!1,o.elements.each((function(e){delete e.dom7AnimateInstance})),e&&e(r),o.que.length>0){var t=o.que.shift();o.animate(t[0],t[1])}},animate:function(e,t){if(o.animating)return o.que.push([e,t]),o;var n=[];o.elements.each((function(t,r){var s,i,l,u,c;t.dom7AnimateInstance||(o.elements[r].dom7AnimateInstance=o),n[r]={container:t},Object.keys(e).forEach((function(o){s=a.getComputedStyle(t,null).getPropertyValue(o).replace(",","."),i=parseFloat(s),l=s.replace(i,""),u=parseFloat(e[o]),c=e[o]+l,n[r][o]={initialFullValue:s,initialValue:i,unit:l,finalValue:u,finalFullValue:c,currentValue:i}}))}));var s,i,l=null,u=0,c=0,p=!1;return o.animating=!0,o.frameId=a.requestAnimationFrame((function d(){var h,f;s=(new Date).getTime(),p||(p=!0,t.begin&&t.begin(r)),null===l&&(l=s),t.progress&&t.progress(r,Math.max(Math.min((s-l)/t.duration,1),0),l+t.duration-s<0?0:l+t.duration-s,l),n.forEach((function(a){var r=a;i||r.done||Object.keys(e).forEach((function(a){if(!i&&!r.done){h=Math.max(Math.min((s-l)/t.duration,1),0),f=o.easingProgress(t.easing,h);var p=r[a],d=p.initialValue,m=p.finalValue,g=p.unit;r[a].currentValue=d+f*(m-d);var v=r[a].currentValue;(m>d&&v>=m||m<d&&v<=m)&&(r.container.style[a]=m+g,(c+=1)===Object.keys(e).length&&(r.done=!0,u+=1),u===n.length&&(i=!0)),i?o.done(t.complete):r.container.style[a]=v+g}}))})),i||(o.frameId=a.requestAnimationFrame(d))})),o}};if(0===o.elements.length)return r;for(var s=0;s<o.elements.length;s+=1)o.elements[s].dom7AnimateInstance?n=o.elements[s].dom7AnimateInstance:o.elements[s].dom7AnimateInstance=o;return n||(n=o),"stop"===e?n.stop():n.animate(o.props,o.params),r}function ji(){for(var e=this,t=0;t<e.length;t+=1)e[t].dom7AnimateInstance&&e[t].dom7AnimateInstance.stop()}Fs.fn=Ms.prototype;var Ui="resize scroll".split(" ");function Gi(e){return function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(void 0===n[0]){for(var r=0;r<this.length;r+=1)Ui.indexOf(e)<0&&(e in this[r]?this[r][e]():Fs(this[r]).trigger(e));return this}return this.on.apply(this,[e].concat(n))}}var qi=Gi("click"),Xi=Gi("blur"),Yi=Gi("focus"),Ki=Gi("focusin"),Ji=Gi("focusout"),Zi=Gi("keyup"),Qi=Gi("keydown"),el=Gi("keypress"),tl=Gi("submit"),nl=Gi("change"),al=Gi("mousedown"),rl=Gi("mousemove"),ol=Gi("mouseup"),sl=Gi("mouseenter"),il=Gi("mouseleave"),ll=Gi("mouseout"),ul=Gi("mouseover"),cl=Gi("touchstart"),pl=Gi("touchend"),dl=Gi("touchmove"),hl=Gi("resize"),fl=Gi("scroll"),ml=Fs;Object.keys(t).forEach((function(e){"$"!==e&&(Fs.fn[e]=t[e])}));var gl=Fs;function vl(e,t,n){return vl=bl()?Reflect.construct:function(e,t,n){var a=[null];a.push.apply(a,t);var r=new(Function.bind.apply(e,a));return n&&yl(r,n.prototype),r},vl.apply(null,arguments)}function bl(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function yl(e,t){return yl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},yl(e,t)}function wl(e){void 0===e&&(e={});var t=e,n=t.defaultSelector,a=t.constructor,r=t.domProp,o=t.app,s=t.addMethods,i={create:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return vl(a,o?[o].concat(t):t)},get:function(e){if(void 0===e&&(e=n),e instanceof a)return e;var t=gl(e);return 0!==t.length?t[0][r]:void 0},destroy:function(e){var t=i.get(e);if(t&&t.destroy)return t.destroy()}};return s&&Array.isArray(s)&&s.forEach((function(e){i[e]=function(t){void 0===t&&(t=n);for(var a=i.get(t),r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];if(a&&a[e])return a[e].apply(a,o)}})),i}function xl(){return xl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},xl.apply(this,arguments)}function kl(e){void 0===e&&(e={});var t=e,n=t.defaultSelector,a=t.constructor,r=t.app,o=cs(wl({defaultSelector:n,constructor:a,app:r,domProp:"f7Modal"}),{open:function(e,t,n){var o=gl(e);if(o.length>1&&n){var s=gl(n).parents(".page");s.length&&o.each((function(e){var t=gl(e);t.parents(s)[0]===s[0]&&(o=t)}))}if(o.length>1&&(o=o.eq(o.length-1)),o.length){var i=o[0].f7Modal;if(!i){var l=o.dataset();i=new a(r,xl({el:o},l))}return i.open(t)}},close:function(e,t,o){void 0===e&&(e=n);var s=gl(e);if(s.length){if(s.length>1){var i;if(o){var l=gl(o);l.length&&(i=l.parents(s))}s=i&&i.length>0?i:s.eq(s.length-1)}var u=s[0].f7Modal;if(!u){var c=s.dataset();u=new a(r,xl({el:s},c))}return u.close(t)}}});return o}var Cl=[];var El=function(e){var t=this,n=Ho(),a=Vo();return new Promise((function(r,o){var s,i,l,u=t.instance;if(e){if("string"==typeof e){var c=e.match(/([a-z0-9-]*)/i);if(e.indexOf(".")<0&&c&&c[0].length===e.length){if(!u||u&&!u.params.lazyModulesPath)return void o(new Error('Framework7: "lazyModulesPath" app parameter must be specified to fetch module by name'));s=u.params.lazyModulesPath+"/"+e+"/"+e+".js"}else s=e}else"function"==typeof e?l=e:i=e;if(l){var p=l(t,!1);if(!p)return void o(new Error("Framework7: Can't find Framework7 component in specified component function"));if(t.prototype.modules&&t.prototype.modules[p.name])return void r();m(p),r()}if(i){var d=i;if(!d)return void o(new Error("Framework7: Can't find Framework7 component in specified component"));if(t.prototype.modules&&t.prototype.modules[d.name])return void r();m(d),r()}if(s){if(Cl.indexOf(s)>=0)return void r();Cl.push(s);var h=new Promise((function(e,r){t.request.get(s,(function(o){var i="f7_component_loader_callback_"+Go(),l=a.createElement("script");l.innerHTML="window."+i+" = function (Framework7, Framework7AutoInstallComponent) {return "+o.trim()+"}",gl("head").append(l);var u=n[i];delete n[i],gl(l).remove();var c=u(t,!1);c?(t.prototype.modules&&t.prototype.modules[c.name]||m(c),e()):r(new Error("Framework7: Can't find Framework7 component in "+s+" file"))}),(function(e,t){r(e,t)}))})),f=new Promise((function(e){t.request.get(s.replace(".js",u.rtl?".rtl.css":".css"),(function(t){var n=a.createElement("style");n.innerHTML=t,gl("head").append(n),e()}),(function(){e()}))}));Promise.all([h,f]).then((function(){r()})).catch((function(e){o(e)}))}}else o(new Error("Framework7: Lazy module must be specified"));function m(e){t.use(e),u&&(u.useModuleParams(e,u.params),u.useModule(e))}}))};function Sl(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function $l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tl(e,t){return Tl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Tl(e,t)}var Il=function(e){var t,n;function a(t){var n;if(void 0===t&&(t={}),n=e.call(this,t)||this,a.instance&&"undefined"!=typeof window)throw new Error("Framework7 is already initialized and can't be initialized more than once");var r=xs({userAgent:t.userAgent||void 0}),o=ws(),s=cs({},t),i=$l(n);i.device=r,i.support=o;var l=Ho(),u=Vo();a.instance=i;var c={version:"1.0.0",id:"io.framework7.myapp",el:"body",theme:"auto",language:l.navigator.language,routes:[],name:"Framework7",lazyModulesPath:null,initOnDeviceReady:!0,init:!0,autoDarkTheme:!1,iosTranslucentBars:!0,iosTranslucentModals:!0,component:void 0,componentUrl:void 0,userAgent:null,url:null};return i.useModulesParams(c),i.params=cs(c,t),cs(i,{id:i.params.id,name:i.params.name,version:i.params.version,routes:i.params.routes,language:i.params.language,theme:"auto"===i.params.theme?r.ios?"ios":r.desktop&&r.electron?"aurora":"md":i.params.theme,passedParams:s,online:l.navigator.onLine}),t.store&&(i.params.store=t.store),i.$el&&i.$el[0]&&(i.$el[0].f7=i),i.useModules(),i.initStore(),i.params.init&&(r.cordova&&i.params.initOnDeviceReady?gl(u).on("deviceready",(function(){i.init()})):i.init()),i||$l(n)}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,Tl(t,n);var r,o,s,i=a.prototype;return i.mount=function(e){var t=this,n=Ho(),a=Vo(),r=gl(e||t.params.el).eq(0);t.$el=r,t.$el&&t.$el[0]&&(t.el=t.$el[0],t.el.f7=t,t.rtl="rtl"===r.css("direction"));var o="(prefers-color-scheme: dark)",s="(prefers-color-scheme: light)";t.mq={},n.matchMedia&&(t.mq.dark=n.matchMedia(o),t.mq.light=n.matchMedia(s)),t.colorSchemeListener=function(e){var n=e.matches,r=e.media;if(n){var i=a.querySelector("html");r===o?(i.classList.add("theme-dark"),t.darkTheme=!0,t.emit("darkThemeChange",!0)):r===s&&(i.classList.remove("theme-dark"),t.darkTheme=!1,t.emit("darkThemeChange",!1))}},t.emit("mount")},i.initStore=function(){var e=this;void 0!==e.params.store&&e.params.store.__store?e.store=e.params.store:e.store=e.createStore(e.params.store)},i.enableAutoDarkTheme=function(){var e=Ho(),t=Vo();if(e.matchMedia){var n=this,a=t.querySelector("html");n.mq.dark&&n.mq.light&&(n.mq.dark.addListener(n.colorSchemeListener),n.mq.light.addListener(n.colorSchemeListener)),n.mq.dark&&n.mq.dark.matches?(a.classList.add("theme-dark"),n.darkTheme=!0,n.emit("darkThemeChange",!0)):n.mq.light&&n.mq.light.matches&&(a.classList.remove("theme-dark"),n.darkTheme=!1,n.emit("darkThemeChange",!1))}},i.disableAutoDarkTheme=function(){if(Ho().matchMedia){var e=this;e.mq.dark&&e.mq.dark.removeListener(e.colorSchemeListener),e.mq.light&&e.mq.light.removeListener(e.colorSchemeListener)}},i.initAppComponent=function(e){var t=this;t.router.componentLoader(t.params.component,t.params.componentUrl,{componentOptions:{el:t.$el[0]}},(function(n){t.$el=gl(n),t.$el[0].f7=t,t.$elComponent=n.f7Component,t.el=t.$el[0],e&&e()}),(function(){}))},i.init=function(e){var t=this;t.mount(e);var n=function(){if(!t.initialized){t.$el.addClass("framework7-initializing"),t.rtl&&gl("html").attr("dir","rtl"),t.params.autoDarkTheme&&t.enableAutoDarkTheme();var e=Ho();e.addEventListener("offline",(function(){t.online=!1,t.emit("offline"),t.emit("connection",!1)})),e.addEventListener("online",(function(){t.online=!0,t.emit("online"),t.emit("connection",!0)})),t.$el.addClass("framework7-root"),gl("html").removeClass("ios md aurora").addClass(t.theme);var n=t.device;t.params.iosTranslucentBars&&"ios"===t.theme&&n.ios&&gl("html").addClass("ios-translucent-bars"),t.params.iosTranslucentModals&&"ios"===t.theme&&n.ios&&gl("html").addClass("ios-translucent-modals"),as((function(){t.$el.removeClass("framework7-initializing")})),t.initialized=!0,t.emit("init")}};return t.params.component||t.params.componentUrl?t.initAppComponent((function(){n()})):n(),t},i.loadModule=function(){return a.loadModule.apply(a,arguments)},i.loadModules=function(){return a.loadModules.apply(a,arguments)},i.getVnodeHooks=function(e,t){var n=this;return n.vnodeHooks&&n.vnodeHooks[e]&&n.vnodeHooks[e][t]||[]},r=a,s=[{key:"Dom7",get:function(){return gl}},{key:"$",get:function(){return gl}},{key:"device",get:function(){return xs()}},{key:"support",get:function(){return ws()}},{key:"Class",get:function(){return Ts}},{key:"Events",get:function(){return Cs}}],(o=[{key:"$",get:function(){return gl}}])&&Sl(r.prototype,o),s&&Sl(r,s),a}(Ts);Il.ModalMethods=kl,Il.ConstructorMethods=wl,Il.loadModule=El,Il.loadModules=function(e){return Promise.all(e.map((function(e){return Il.loadModule(e)})))};var Nl=Il,Ol={name:"device",static:{getDevice:xs},on:{init:function(){var e=Vo(),t=xs(),n=[],a=e.querySelector("html"),r=e.querySelector('meta[name="apple-mobile-web-app-status-bar-style"]');a&&(t.standalone&&t.ios&&r&&"black-translucent"===r.content&&n.push("device-full-viewport"),n.push("device-pixel-ratio-"+Math.floor(t.pixelRatio)),t.os&&!t.desktop?n.push("device-"+t.os):t.desktop&&(n.push("device-desktop"),t.os&&n.push("device-"+t.os)),(t.cordova||t.phonegap)&&n.push("device-cordova"),t.capacitor&&n.push("device-capacitor"),n.forEach((function(e){a.classList.add(e)})))}}},Rl={name:"support",static:{getSupport:ws}},Al={name:"utils",proto:{utils:e},static:{utils:e}},Ml={name:"resize",create:function(){var e=this;e.getSize=function(){if(!e.el)return{width:0,height:0,left:0,top:0};var t=e.$el.offset(),n=[e.el.offsetWidth,e.el.offsetHeight,t.left,t.top],a=n[0],r=n[1],o=n[2],s=n[3];return e.width=a,e.height=r,e.left=o,e.top=s,{width:a,height:r,left:o,top:s}}},on:{init:function(){var e=this,t=Ho();e.getSize(),t.addEventListener("resize",(function(){e.emit("resize")}),!1),t.addEventListener("orientationchange",(function(){e.emit("orientationchange")}))},orientationchange:function(){var e=Vo();xs().ipad&&(e.body.scrollLeft=0,setTimeout((function(){e.body.scrollLeft=0}),0))},resize:function(){this.getSize()}}};function Bl(e){var t="function"==typeof Map?new Map:void 0;return Bl=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,a)}function a(){return Pl(e,arguments,_l(this).constructor)}return a.prototype=Object.create(e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Fl(a,e)},Bl(e)}function Pl(e,t,n){return Pl=Dl()?Reflect.construct:function(e,t,n){var a=[null];a.push.apply(a,t);var r=new(Function.bind.apply(e,a));return n&&Fl(r,n.prototype),r},Pl.apply(null,arguments)}function Dl(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Fl(e,t){return Fl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Fl(e,t)}function _l(e){return _l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_l(e)}var Ll={},zl=0,Vl=function(e){Object.assign(this,e)},Wl=function(e){var t,n;function a(t){var n;return n=e.call(this)||this,Object.assign(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),t),n}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,Fl(t,n),a}(Bl(Error)),Hl=function(e){return new Promise((function(t,n){var a=Ho(),r=Vo(),o=cs({},Ll);"beforeCreate beforeOpen beforeSend error complete success statusCode".split(" ").forEach((function(e){delete o[e]}));var s=cs({url:a.location.toString(),method:"GET",data:!1,async:!0,cache:!0,user:"",password:"",headers:{},xhrFields:{},statusCode:{},processData:!0,dataType:"text",contentType:"application/x-www-form-urlencoded",timeout:0},o),i=cs({},s,e);if(e.abortController&&(i.abortController=e.abortController),i.abortController&&i.abortController.canceled)n(new Wl({options:i,status:"canceled",message:"canceled"}));else if(!1!==E("beforeCreate",i)){i.type&&(i.method=i.type);var l,u=i.url.indexOf("?")>=0?"&":"?",c=i.method.toUpperCase();if(("GET"===c||"HEAD"===c||"OPTIONS"===c||"DELETE"===c)&&i.data)(l="string"==typeof i.data?i.data.indexOf("?")>=0?i.data.split("?")[1]:i.data:is(i.data)).length&&(i.url+=u+l,"?"===u&&(u="&"));if("json"===i.dataType&&i.url.indexOf("callback=")>=0){var p,d="f7jsonp_"+(Date.now()+(zl+=1)),h=i.url.split("callback="),f=h[0]+"callback="+d;if(h[1].indexOf("&")>=0){var m=h[1].split("&").filter((function(e){return e.indexOf("=")>0})).join("&");m.length>0&&(f+="&"+m)}var g=r.createElement("script");return g.type="text/javascript",g.onerror=function(){clearTimeout(p),E("error",null,"scripterror","scripterror"),n(new Wl({options:i,status:"scripterror",message:"scripterror"})),E("complete",null,"scripterror")},g.src=f,a[d]=function(e){clearTimeout(p),E("success",e),g.parentNode.removeChild(g),g=null,delete a[d],t(new Vl({options:i,data:e}))},r.querySelector("head").appendChild(g),void(i.timeout>0&&(p=setTimeout((function(){g.parentNode.removeChild(g),g=null,E("error",null,"timeout","timeout"),n(new Wl({options:i,status:"timeout",message:"timeout"}))}),i.timeout)))}"GET"!==c&&"HEAD"!==c&&"OPTIONS"!==c&&"DELETE"!==c||!1===i.cache&&(i.url+=u+"_nocache"+Date.now());var v=new XMLHttpRequest;if(i.abortController){var b=!1;i.abortController.onAbort=function(){b||(b=!0,v.abort(),n(new Wl({options:i,xhr:v,status:"canceled",message:"canceled"})))}}if(v.requestUrl=i.url,v.requestParameters=i,!1!==E("beforeOpen",v,i)){v.open(c,i.url,i.async,i.user,i.password);var y=null;if(("POST"===c||"PUT"===c||"PATCH"===c)&&i.data)if(i.processData)if([ArrayBuffer,Blob,Document,FormData].indexOf(i.data.constructor)>=0)y=i.data;else{var w="---------------------------"+Date.now().toString(16);"multipart/form-data"===i.contentType?v.setRequestHeader("Content-Type","multipart/form-data; boundary="+w):v.setRequestHeader("Content-Type",i.contentType),y="";var x=is(i.data);if("multipart/form-data"===i.contentType){x=x.split("&");for(var k=[],C=0;C<x.length;C+=1)k.push('Content-Disposition: form-data; name="'+x[C].split("=")[0]+'"\r\n\r\n'+x[C].split("=")[1]+"\r\n");y="--"+w+"\r\n"+k.join("--"+w+"\r\n")+"--"+w+"--\r\n"}else y="application/json"===i.contentType?JSON.stringify(i.data):x}else y=i.data,v.setRequestHeader("Content-Type",i.contentType);"json"!==i.dataType||i.headers&&i.headers.Accept||v.setRequestHeader("Accept","application/json"),i.headers&&Object.keys(i.headers).forEach((function(e){void 0!==i.headers[e]&&v.setRequestHeader(e,i.headers[e])})),void 0===i.crossDomain&&(i.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(i.url)&&RegExp.$2!==a.location.host),i.crossDomain||v.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.xhrFields&&cs(v,i.xhrFields),v.onload=function(){var e;if(v.status>=200&&v.status<300||0===v.status)if("json"===i.dataType){var a;try{e=JSON.parse(v.responseText)}catch(e){a=!0}a?(E("error",v,"parseerror","parseerror"),n(new Wl({options:i,xhr:v,status:"parseerror",message:"parseerror"}))):(E("success",e,v.status,v),t(new Vl({options:i,data:e,status:v.status,xhr:v})))}else E("success",e="text"===v.responseType||""===v.responseType?v.responseText:v.response,v.status,v),t(new Vl({options:i,data:e,status:v.status,xhr:v}));else E("error",v,v.status,v.statusText),n(new Wl({options:i,xhr:v,status:v.status,message:v.statusText}));i.statusCode&&(Ll.statusCode&&Ll.statusCode[v.status]&&Ll.statusCode[v.status](v),i.statusCode[v.status]&&i.statusCode[v.status](v)),E("complete",v,v.status)},v.onerror=function(){E("error",v,v.status,v.status),n(new Wl({options:i,xhr:v,status:v.status,message:v.statusText})),E("complete",v,"error")},i.timeout>0&&(v.timeout=i.timeout,v.ontimeout=function(){E("error",v,"timeout","timeout"),n(new Wl({options:i,xhr:v,status:"timeout",message:"timeout"})),E("complete",v,"timeout")}),!1!==E("beforeSend",v,i)?v.send(y):n(new Wl({options:i,xhr:v,status:"canceled",message:"canceled"}))}else n(new Wl({options:i,xhr:v,status:"canceled",message:"canceled"}))}else n(new Wl({options:i,status:"canceled",message:"canceled"}));function E(e){for(var t,n,a=arguments.length,r=new Array(a>1?a-1:0),o=1;o<a;o++)r[o-1]=arguments[o];return Ll[e]&&(t=Ll[e].apply(Ll,r)),i[e]&&(n=i[e].apply(i,r)),"boolean"!=typeof t&&(t=!0),"boolean"!=typeof n&&(n=!0),(!i.abortController||!i.abortController.canceled||"beforeCreate"!==e&&"beforeOpen"!==e&&"beforeSend"!==e)&&(t&&n)}}))};function jl(e){for(var t=[],n=t[0],a=t[1],r=t[2],o=t[3],s=t[4],i=arguments.length,l=new Array(i>1?i-1:0),u=1;u<i;u++)l[u-1]=arguments[u];"function"==typeof l[1]?(n=l[0],r=l[1],o=l[2],s=l[3]):(n=l[0],a=l[1],r=l[2],o=l[3],s=l[4]),[r,o].forEach((function(e){"string"==typeof e&&(s=e,e===r?r=void 0:o=void 0)}));var c={url:n,method:"post"===e||"postJSON"===e?"POST":"GET",data:a,success:r,error:o,dataType:s=s||("json"===e||"postJSON"===e?"json":void 0)};return"postJSON"===e&&cs(c,{contentType:"application/json",processData:!1,crossDomain:!0,data:"string"==typeof a?a:JSON.stringify(a)}),Hl(c)}Object.assign(Hl,{get:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return jl.apply(void 0,["get"].concat(t))},post:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return jl.apply(void 0,["post"].concat(t))},json:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return jl.apply(void 0,["json"].concat(t))},getJSON:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return jl.apply(void 0,["json"].concat(t))},postJSON:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return jl.apply(void 0,["postJSON"].concat(t))}}),Hl.abortController=function(){var e={canceled:!1,onAbort:null,abort:function(){e.canceled=!0,e.onAbort&&e.onAbort()}};return e},Hl.setup=function(e){e.type&&!e.method&&cs(e,{method:e.type}),cs(Ll,e)};var Ul={name:"request",proto:{request:Hl},static:{request:Hl}};var Gl={name:"touch",params:{touch:{touchClicksDistanceThreshold:5,disableContextMenu:!1,tapHold:!1,tapHoldDelay:750,tapHoldPreventClicks:!0,activeState:!0,activeStateElements:"a, button, label, span, .actions-button, .stepper-button, .stepper-button-plus, .stepper-button-minus, .card-expandable, .menu-item, .link, .item-link, .accordion-item-toggle",activeStateOnMouseMove:!1,mdTouchRipple:!0,iosTouchRipple:!1,auroraTouchRipple:!1,touchRippleElements:".ripple, .link, .item-link, .list-button, .links-list a, .button, button, .input-clear-button, .dialog-button, .tab-link, .item-radio, .item-checkbox, .actions-button, .searchbar-disable-button, .fab a, .checkbox, .radio, .data-table .sortable-cell:not(.input-cell), .notification-close-button, .stepper-button, .stepper-button-minus, .stepper-button-plus, .menu-item-content, .list.accordion-list .accordion-item-toggle",touchRippleInsetElements:".ripple-inset, .icon-only, .searchbar-disable-button, .input-clear-button, .notification-close-button, .md .navbar .link.back"}},create:function(){var e=ws();cs(this,{touchEvents:{start:e.touch?"touchstart":e.pointerEvents?"pointerdown":"mousedown",move:e.touch?"touchmove":e.pointerEvents?"pointermove":"mousemove",end:e.touch?"touchend":e.pointerEvents?"pointerup":"mouseup"}})},on:{init:function(){var e,t,n,a,r,o,s,i,l,u,c,p,d,h=this,f=xs(),m=ws(),g=Ho(),v=Vo(),b=h.params.touch,y=b[h.theme+"TouchRipple"];function w(e){var t,n=gl(e),a=n.parents(b.activeStateElements);if(n.closest(".no-active-state").length)return null;if(n.is(b.activeStateElements)&&(t=n),a.length>0&&(t=t?t.add(a):a),t&&t.length>1){for(var r,o=[],s=0;s<t.length;s+=1)r||(o.push(t[s]),(t.eq(s).hasClass("prevent-active-state-propagation")||t.eq(s).hasClass("no-active-state-propagation"))&&(r=!0));t=gl(o)}return t||n}function x(e){return e.parents(".page-content").length>0}function k(){i&&i.addClass("active-state")}function C(){i&&(i.removeClass("active-state"),i=null)}function E(e,t,n){e&&(u=h.touchRipple.create(h,e,t,n))}function S(){u&&(u.remove(),u=void 0,c=void 0)}function $(n){(c=function(e){var t=b.touchRippleElements,n=gl(e);if(n.is(t))return!n.hasClass("no-ripple")&&n;if(n.parents(t).length>0){var a=n.parents(t).eq(0);return!a.hasClass("no-ripple")&&a}return!1}(n),c&&0!==c.length)?x(c)?(clearTimeout(p),p=setTimeout((function(){S(),E(c,e,t)}),80)):(S(),E(c,e,t)):c=void 0}function T(){clearTimeout(p),S()}function I(){u||!c||a?S():(clearTimeout(p),E(c,e,t),setTimeout(S,0))}function N(){gl(".active-state").removeClass("active-state"),y&&I()}f.ios&&f.webView&&g.addEventListener("touchstart",(function(){}));var O=!1,R=null,A=".dialog-button, .actions-button",M=!1,B=null;function P(e,t){h.emit({events:e,data:[t]})}function D(e){P("touchstart touchstart:active",e)}function F(e){P("touchmove touchmove:active",e)}function _(e){P("touchend touchend:active",e)}function L(e){P("touchstart:passive",e)}function z(e){P("touchmove:passive",e)}function V(e){P("touchend:passive",e)}var W=!!m.passiveListener&&{passive:!0},H=!m.passiveListener||{passive:!0,capture:!0},j=!!m.passiveListener&&{passive:!1},U=!m.passiveListener||{passive:!1,capture:!0};v.addEventListener("click",(function(e){P("click",e)}),!0),m.passiveListener?(v.addEventListener(h.touchEvents.start,D,U),v.addEventListener(h.touchEvents.move,F,j),v.addEventListener(h.touchEvents.end,_,j),v.addEventListener(h.touchEvents.start,L,H),v.addEventListener(h.touchEvents.move,z,W),v.addEventListener(h.touchEvents.end,V,W)):(v.addEventListener(h.touchEvents.start,(function(e){D(e),L(e)}),!0),v.addEventListener(h.touchEvents.move,(function(e){F(e),z(e)}),!1),v.addEventListener(h.touchEvents.end,(function(e){_(e),V(e)}),!1)),m.touch?(h.on("click",(function(e){var t=e&&e.detail&&"f7Overswipe"===e.detail,a=e&&e.detail&&"f7Segmented"===e.detail,i=e&&e.detail&&"f7TouchMoveActivable"===e.detail,l=s;return n&&e.target!==n?l=!(t||a||i):i&&(l=!1),b.tapHold&&b.tapHoldPreventClicks&&r&&(l=!0),l&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault()),b.tapHold&&(o=setTimeout((function(){r=!1}),f.ios||f.androidChrome?100:400)),s=!1,n=null,!l})),h.on("touchstart",(function(u){return a=!1,r=!1,s=!1,d=void 0,u.targetTouches.length>1?(i&&C(),!0):(u.touches.length>1&&i&&C(),b.tapHold&&(o&&clearTimeout(o),o=setTimeout((function(){u&&u.touches&&u.touches.length>1||(r=!0,u.preventDefault(),s=!0,gl(u.target).trigger("taphold",u),h.emit("taphold",u))}),b.tapHoldDelay)),n=u.target,e=u.targetTouches[0].pageX,t=u.targetTouches[0].pageY,O=u.target.closest(".segmented-strong .button-active, .segmented-strong .tab-link-active"),M="ios"===h.theme&&u.target.closest(A),O&&(R=O.closest(".segmented-strong")),b.activeState&&((i=w(n))&&!x(i)?k():i&&(l=setTimeout(k,80))),y&&$(n),!0)})),h.on("touchmove",(function(r){var u,c,p=!0;"touchmove"===r.type&&(u=r.targetTouches[0],c=b.touchClicksDistanceThreshold);var h=r.targetTouches[0].pageX,f=r.targetTouches[0].pageY;if(void 0===d&&(d=!!(d||Math.abs(f-t)>Math.abs(h-e))),(M||!d&&O&&R)&&r.cancelable&&r.preventDefault(),!d&&O&&R){var m=v.elementFromPoint(r.targetTouches[0].clientX,r.targetTouches[0].clientY).closest(".segmented-strong .button:not(.button-active):not(.tab-link-active)");m&&R.contains(m)&&(gl(m).trigger("click","f7Segmented"),n=m)}if(c&&u){var g=u.pageX,x=u.pageY;(Math.abs(g-e)>c||Math.abs(x-t)>c)&&(a=!0)}else a=!0;if(a){if(s=!0,M){var E=v.elementFromPoint(r.targetTouches[0].clientX,r.targetTouches[0].clientY);(B=E.closest(A))&&i&&i[0]===B?p=!1:B&&setTimeout((function(){i=w(B),k()}))}b.tapHold&&clearTimeout(o),b.activeState&&p&&(clearTimeout(l),C()),y&&T()}})),h.on("touchend",(function(e){return d=void 0,O=!1,R=null,M=!1,clearTimeout(l),clearTimeout(o),B&&(gl(B).trigger("click","f7TouchMoveActivable"),B=null),v.activeElement===e.target?(b.activeState&&C(),y&&I(),!0):(b.activeState&&(k(),setTimeout(C,0)),y&&I(),!(b.tapHoldPreventClicks&&r||s)||(e.cancelable&&e.preventDefault(),s=!0,!1))})),v.addEventListener("touchcancel",(function(){n=null,clearTimeout(l),clearTimeout(o),b.activeState&&C(),y&&I()}),{passive:!0})):b.activeState&&(h.on("touchstart",(function(n){var a=w(n.target);a&&(a.addClass("active-state"),"which"in n&&3===n.which&&setTimeout((function(){gl(".active-state").removeClass("active-state")}),0)),y&&(e=n.pageX,t=n.pageY,$(n.target,n.pageX,n.pageY))})),h.on("touchmove",(function(){b.activeStateOnMouseMove||gl(".active-state").removeClass("active-state"),y&&T()})),h.on("touchend",N),v.addEventListener("pointercancel",N,{passive:!0})),v.addEventListener("contextmenu",(function(e){b.disableContextMenu&&(f.ios||f.android||f.cordova||g.Capacitor&&g.Capacitor.isNative)&&e.preventDefault(),y&&(i&&C(),I())}))}}};function ql(e,t){void 0===t&&(t={});for(var n=function(e){for(var t=[],n=0;n<e.length;){var a=e[n];if("*"!==a&&"+"!==a&&"?"!==a)if("\\"!==a)if("{"!==a)if("}"!==a)if(":"!==a)if("("!==a)t.push({type:"CHAR",index:n,value:e[n++]});else{var r=1,o="";if("?"===e[i=n+1])throw new TypeError('Pattern cannot start with "?" at '+i);for(;i<e.length;)if("\\"!==e[i]){if(")"===e[i]){if(0==--r){i++;break}}else if("("===e[i]&&(r++,"?"!==e[i+1]))throw new TypeError("Capturing groups are not allowed at "+i);o+=e[i++]}else o+=e[i++]+e[i++];if(r)throw new TypeError("Unbalanced pattern at "+n);if(!o)throw new TypeError("Missing pattern at "+n);t.push({type:"PATTERN",index:n,value:o}),n=i}else{for(var s="",i=n+1;i<e.length;){var l=e.charCodeAt(i);if(!(l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||95===l))break;s+=e[i++]}if(!s)throw new TypeError("Missing parameter name at "+n);t.push({type:"NAME",index:n,value:s}),n=i}else t.push({type:"CLOSE",index:n,value:e[n++]});else t.push({type:"OPEN",index:n,value:e[n++]});else t.push({type:"ESCAPED_CHAR",index:n++,value:e[n++]});else t.push({type:"MODIFIER",index:n,value:e[n++]})}return t.push({type:"END",index:n,value:""}),t}(e),a=t.prefixes,r=void 0===a?"./":a,o="[^"+Yl(t.delimiter||"/#?")+"]+?",s=[],i=0,l=0,u="",c=function(e){if(l<n.length&&n[l].type===e)return n[l++].value},p=function(e){var t=c(e);if(void 0!==t)return t;var a=n[l],r=a.type,o=a.index;throw new TypeError("Unexpected "+r+" at "+o+", expected "+e)},d=function(){for(var e,t="";e=c("CHAR")||c("ESCAPED_CHAR");)t+=e;return t};l<n.length;){var h=c("CHAR"),f=c("NAME"),m=c("PATTERN");if(f||m){var g=h||"";-1===r.indexOf(g)&&(u+=g,g=""),u&&(s.push(u),u=""),s.push({name:f||i++,prefix:g,suffix:"",pattern:m||o,modifier:c("MODIFIER")||""})}else{var v=h||c("ESCAPED_CHAR");if(v)u+=v;else if(u&&(s.push(u),u=""),c("OPEN")){g=d();var b=c("NAME")||"",y=c("PATTERN")||"",w=d();p("CLOSE"),s.push({name:b||(y?i++:""),pattern:b&&!y?o:y,prefix:g,suffix:w,modifier:c("MODIFIER")||""})}else p("END")}}return s}function Xl(e,t){return function(e,t){void 0===t&&(t={});var n=Kl(t),a=t.encode,r=void 0===a?function(e){return e}:a,o=t.validate,s=void 0===o||o,i=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:"+e.pattern+")$",n)}));return function(t){for(var n="",a=0;a<e.length;a++){var o=e[a];if("string"!=typeof o){var l=t?t[o.name]:void 0,u="?"===o.modifier||"*"===o.modifier,c="*"===o.modifier||"+"===o.modifier;if(Array.isArray(l)){if(!c)throw new TypeError('Expected "'+o.name+'" to not repeat, but got an array');if(0===l.length){if(u)continue;throw new TypeError('Expected "'+o.name+'" to not be empty')}for(var p=0;p<l.length;p++){var d=r(l[p],o);if(s&&!i[a].test(d))throw new TypeError('Expected all "'+o.name+'" to match "'+o.pattern+'", but got "'+d+'"');n+=o.prefix+d+o.suffix}}else if("string"!=typeof l&&"number"!=typeof l){if(!u){var h=c?"an array":"a string";throw new TypeError('Expected "'+o.name+'" to be '+h)}}else{d=r(String(l),o);if(s&&!i[a].test(d))throw new TypeError('Expected "'+o.name+'" to match "'+o.pattern+'", but got "'+d+'"');n+=o.prefix+d+o.suffix}}else n+=o}return n}}(ql(e,t),t)}function Yl(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function Kl(e){return e&&e.sensitive?"":"i"}function Jl(e,t,n){return function(e,t,n){void 0===n&&(n={});for(var a=n.strict,r=void 0!==a&&a,o=n.start,s=void 0===o||o,i=n.end,l=void 0===i||i,u=n.encode,c=void 0===u?function(e){return e}:u,p="["+Yl(n.endsWith||"")+"]|$",d="["+Yl(n.delimiter||"/#?")+"]",h=s?"^":"",f=0,m=e;f<m.length;f++){var g=m[f];if("string"==typeof g)h+=Yl(c(g));else{var v=Yl(c(g.prefix)),b=Yl(c(g.suffix));if(g.pattern)if(t&&t.push(g),v||b)if("+"===g.modifier||"*"===g.modifier){var y="*"===g.modifier?"?":"";h+="(?:"+v+"((?:"+g.pattern+")(?:"+b+v+"(?:"+g.pattern+"))*)"+b+")"+y}else h+="(?:"+v+"("+g.pattern+")"+b+")"+g.modifier;else h+="("+g.pattern+")"+g.modifier;else h+="(?:"+v+b+")"+g.modifier}}if(l)r||(h+=d+"?"),h+=n.endsWith?"(?="+p+")":"$";else{var w=e[e.length-1],x="string"==typeof w?d.indexOf(w[w.length-1])>-1:void 0===w;r||(h+="(?:"+d+"(?="+p+"))?"),x||(h+="(?="+d+"|"+p+")")}return new RegExp(h,Kl(n))}(ql(e,n),t,n)}function Zl(e,t,n){return e instanceof RegExp?function(e,t){if(!t)return e;for(var n=/\((?:\?<(.*?)>)?(?!\?)/g,a=0,r=n.exec(e.source);r;)t.push({name:r[1]||a++,prefix:"",suffix:"",modifier:"",pattern:""}),r=n.exec(e.source);return e}(e,t):Array.isArray(e)?function(e,t,n){var a=e.map((function(e){return Zl(e,t,n).source}));return new RegExp("(?:"+a.join("|")+")",Kl(n))}(e,t,n):Jl(e,t,n)}var Ql={queue:[],clearQueue:function(){0!==Ql.queue.length&&Ql.queue.shift()()},routerQueue:[],clearRouterQueue:function(){if(0!==Ql.routerQueue.length){var e=Ql.routerQueue.pop(),t=e.router,n=e.stateUrl,a=e.action,r=t.params.animate;!1===t.params.browserHistoryAnimate&&(r=!1),"back"===a&&t.back({animate:r,browserHistory:!1}),"load"===a&&t.navigate(n,{animate:r,browserHistory:!1})}},handle:function(e){if(!Ql.blockPopstate){var t=e.state;Ql.previousState=Ql.state,Ql.state=t,Ql.allowChange=!0,Ql.clearQueue(),(t=Ql.state)||(t={}),this.views.forEach((function(e){var n=e.router,a=t[e.id];if(!a&&e.params.browserHistory&&(a={url:e.router.history[0]}),a){var r=a.url||void 0,o=n.params.animate;!1===n.params.browserHistoryAnimate&&(o=!1),r!==n.url&&(n.history.indexOf(r)>=0?n.allowPageChange?n.back({animate:o,browserHistory:!1}):Ql.routerQueue.push({action:"back",router:n}):n.allowPageChange?n.navigate(r,{animate:o,browserHistory:!1}):Ql.routerQueue.unshift({action:"load",stateUrl:r,router:n}))}}))}},initViewState:function(e,t){var n,a=Ho(),r=cs({},Ql.state||{},((n={})[e]=t,n));Ql.state=r,a.history.replaceState(r,"")},push:function(e,t,n){var a,r=Ho();if("#!/"===n.substr(-3)&&(n=n.replace("#!/","")),Ql.allowChange){Ql.previousState=Ql.state;var o=cs({},Ql.previousState||{},((a={})[e]=t,a));Ql.state=o,r.history.pushState(o,"",n)}else Ql.queue.push((function(){Ql.push(e,t,n)}))},replace:function(e,t,n){var a,r=Ho();if("#!/"===n.substr(-3)&&(n=n.replace("#!/","")),Ql.allowChange){Ql.previousState=Ql.state;var o=cs({},Ql.previousState||{},((a={})[e]=t,a));Ql.state=o,r.history.replaceState(o,"",n)}else Ql.queue.push((function(){Ql.replace(e,t,n)}))},go:function(e){var t=Ho();Ql.allowChange=!1,t.history.go(e)},back:function(){var e=Ho();Ql.allowChange=!1,e.history.back()},allowChange:!0,previousState:{},state:{},blockPopstate:!0,init:function(e){var t=Ho(),n=Vo();Ql.state=t.history.state,gl(t).on("load",(function(){setTimeout((function(){Ql.blockPopstate=!1}),0)})),n.readyState&&"complete"===n.readyState&&(Ql.blockPopstate=!1),gl(t).on("popstate",Ql.handle.bind(e))}},eu=Ql;var tu=function(e){var t,n,a,r,o,s,i,l,u,c=e,p=c.$el,d=c.$navbarsEl,h=c.app,f=c.params,m=ws(),g=xs(),v=!1,b=!1,y={},w=[],x=[],k=!0,C=[],E=[],S=f[h.theme+"SwipeBackAnimateShadow"],$=f[h.theme+"SwipeBackAnimateOpacity"],T=f[h.theme+"SwipeBackActiveArea"],I=f[h.theme+"SwipeBackThreshold"],N=h.rtl?"right center":"left center",O=h.rtl?"calc(100% - var(--f7-navbar-large-title-padding-left) - var(--f7-safe-area-left)) center":"calc(var(--f7-navbar-large-title-padding-left) + var(--f7-safe-area-left)) center";function R(e){var t=void 0===e?{}:e,n=t.progress,a=t.reset,r=t.transition,o=t.reflow,s=["overflow","transform","transform-origin","opacity"];if(!0===r||!1===r)for(var i=0;i<l.length;i+=1){var u=l[i];u&&u.el&&(!0===r&&u.el.classList.add("navbar-page-transitioning"),!1===r&&u.el.classList.remove("navbar-page-transitioning"))}o&&l.length&&l[0]&&l[0].el&&(l[0].el._clientLeft=l[0].el.clientLeft);for(var c=0;c<l.length;c+=1){var p=l[c];if(p&&p.el){!p.className||p.classNameSet||a||(p.el.classList.add(p.className),p.classNameSet=!0),p.className&&a&&p.el.classList.remove(p.className);for(var d=0;d<s.length;d+=1){var h=s[d];p[h]&&(a?p.el.style[h]="":"function"==typeof p[h]?p.el.style[h]=p[h](n):p.el.style[h]=p[h])}}}}function A(e){var n=f[h.theme+"SwipeBack"];!k||!n||v||h.swipeout&&h.swipeout.el||!c.allowPageChange||gl(e.target).closest(".range-slider, .calendar-months").length>0||gl(e.target).closest(".page-master, .page-master-detail").length>0&&f.masterDetailBreakpoint>0&&h.width>=f.masterDetailBreakpoint||(b=!1,v=!0,t=void 0,y.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,y.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,r=rs(),o=c.dynamicNavbar)}function M(e){if(v){var r="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,u="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if(void 0===t&&(t=!!(t||Math.abs(u-y.y)>Math.abs(r-y.x))||r<y.x&&!h.rtl||r>y.x&&h.rtl),t||e.f7PreventSwipeBack||h.preventSwipeBack)v=!1;else{if(!b){var m=!1,k=gl(e.target),A=k.closest(".swipeout");A.length>0&&(!h.rtl&&A.find(".swipeout-actions-left").length>0&&(m=!0),h.rtl&&A.find(".swipeout-actions-right").length>0&&(m=!0)),((w=k.closest(".page")).hasClass("no-swipeback")||k.closest(".no-swipeback, .card-opened").length>0)&&(m=!0),(x=p.find(".page-previous:not(.stacked)")).length>1&&(x=x.eq(x.length-1));y.x,p.offset().left;if(n=p.width(),(h.rtl?y.x<p.offset().left-p[0].scrollLeft+(n-T):y.x-p.offset().left>T)&&(m=!0),0!==x.length&&0!==w.length||(m=!0),m)return void(v=!1);S&&0===(s=w.find(".page-shadow-effect")).length&&(s=gl('<div class="page-shadow-effect"></div>'),w.append(s)),$&&0===(i=x.find(".page-opacity-effect")).length&&(i=gl('<div class="page-opacity-effect"></div>'),x.append(i)),o&&(C=d.find(".navbar-current:not(.stacked)"),(E=d.find(".navbar-previous:not(.stacked)")).length>1&&(E=E.eq(E.length-1)),l=function(){var e,t,n=[],a=h.rtl?-1:1,r=C.hasClass("navbar-transparent")&&!C.hasClass("navbar-large")&&!C.hasClass("navbar-transparent-visible"),o=C.hasClass("navbar-large"),s=C.hasClass("navbar-large-collapsed"),i=C.hasClass("navbar-large-transparent")||C.hasClass("navbar-large")&&C.hasClass("navbar-transparent"),l=E.hasClass("navbar-transparent")&&!E.hasClass("navbar-large")&&!E.hasClass("navbar-transparent-visible"),u=E.hasClass("navbar-large"),c=E.hasClass("navbar-large-collapsed"),p=E.hasClass("navbar-large-transparent")||E.hasClass("navbar-large")&&E.hasClass("navbar-transparent"),d=o&&!s,m=u&&!c,v=C.find(".left, .title, .right, .subnavbar, .fading, .title-large, .navbar-bg"),b=E.find(".left, .title, .right, .subnavbar, .fading, .title-large, .navbar-bg");return f.iosAnimateNavbarBackIcon&&(e=C.hasClass("sliding")||C.find(".navbar-inner.sliding").length?C.find(".left").find(".back .icon + span").eq(0):C.find(".left.sliding").find(".back .icon + span").eq(0),t=E.hasClass("sliding")||E.find(".navbar-inner.sliding").length?E.find(".left").find(".back .icon + span").eq(0):E.find(".left.sliding").find(".back .icon + span").eq(0),e.length&&b.each((function(t){gl(t).hasClass("title")&&(t.f7NavbarLeftOffset+=e.prev(".icon")[0].offsetWidth)}))),v.each((function(t){var l=gl(t),u=l.hasClass("subnavbar"),c=l.hasClass("left"),p=l.hasClass("title"),h=l.hasClass("navbar-bg");if((!p&&!h||!r)&&(d||!l.hasClass(".title-large"))){var v={el:t};if(d){if(p)return;if(l.hasClass("title-large"))return n.indexOf(v)<0&&n.push(v),v.overflow="visible",void l.find(".title-large-text").each((function(e){n.push({el:e,transform:function(e){return"translateX("+100*e*a+"%)"}})}))}if(m&&(d||l.hasClass("title-large")&&(n.indexOf(v)<0&&n.push(v),v.opacity=0),c))return n.indexOf(v)<0&&n.push(v),v.opacity=function(e){return 1-Math.pow(e,.33)},void l.find(".back span").each((function(e){n.push({el:e,"transform-origin":N,transform:function(e){return"translateX(calc("+e+" * (var(--f7-navbarTitleLargeOffset) - var(--f7-navbarLeftTextOffset)))) translateY(calc("+e+" * (var(--f7-navbar-large-title-height) - var(--f7-navbar-large-title-padding-vertical) / 2))) scale("+(1+1*e)+")"}})}));if(h)return n.indexOf(v)<0&&n.push(v),d||m||(s?(i&&(v.className="ios-swipeback-navbar-bg-large"),v.transform=function(e){return"translateX("+100*e*a+"%) translateY(calc(-1 * var(--f7-navbar-large-title-height)))"}):v.transform=function(e){return"translateX("+100*e*a+"%)"}),!d&&m&&(v.className="ios-swipeback-navbar-bg-large",v.transform=function(e){return"translateX("+100*e*a+"%) translateY(calc(-1 * "+(1-e)+" * var(--f7-navbar-large-title-height)))"}),d&&m&&(v.transform=function(e){return"translateX("+100*e*a+"%)"}),void(d&&!m&&(v.transform=function(e){return"translateX("+100*e*a+"%) translateY(calc(-"+e+" * var(--f7-navbar-large-title-height)))"}));if(!l.hasClass("title-large")){var b=l.hasClass("sliding")||l.parents(".navbar-inner.sliding").length;if(n.indexOf(v)<0&&n.push(v),(!u||u&&!b)&&(v.opacity=function(e){return 1-Math.pow(e,.33)}),b){var y=v;if(c&&e.length&&f.iosAnimateNavbarBackIcon){var w={el:e[0]};y=w,n.push(w)}y.transform=function(e){var t=e*y.el.f7NavbarRightOffset;return 1===g.pixelRatio&&(t=Math.round(t)),u&&o?"translate3d("+t+"px, calc(-1 * var(--f7-navbar-large-collapse-progress) * var(--f7-navbar-large-title-height)), 0)":"translate3d("+t+"px,0,0)"}}}}})),b.each((function(e){var r=gl(e),o=r.hasClass("subnavbar"),s=r.hasClass("left"),i=r.hasClass("title"),h=r.hasClass("navbar-bg");if(!i&&!h||!l){var v={el:e};if(m){if(i)return;if(n.indexOf(v)<0&&n.push(v),r.hasClass("title-large"))return v.opacity=1,v.overflow="visible",void r.find(".title-large-text").each((function(e){n.push({el:e,"transform-origin":O,opacity:function(e){return Math.pow(e,3)},transform:function(e){return"translateX(calc("+(1-e)+" * (var(--f7-navbarLeftTextOffset) - var(--f7-navbarTitleLargeOffset)))) translateY(calc("+(e-1)+" * var(--f7-navbar-large-title-height) + "+(1-e)+" * var(--f7-navbar-large-title-padding-vertical))) scale("+(.5+.5*e)+")"}})}))}if(h)return n.indexOf(v)<0&&n.push(v),d||m||(c?(p&&(v.className="ios-swipeback-navbar-bg-large"),v.transform=function(e){return"translateX("+(100*e-100)*a+"%) translateY(calc(-1 * var(--f7-navbar-large-title-height)))"}):v.transform=function(e){return"translateX("+(100*e-100)*a+"%)"}),!d&&m&&(v.transform=function(e){return"translateX("+(100*e-100)*a+"%) translateY(calc(-1 * "+(1-e)+" * var(--f7-navbar-large-title-height)))"}),d&&!m&&(v.className="ios-swipeback-navbar-bg-large",v.transform=function(e){return"translateX("+(100*e-100)*a+"%) translateY(calc(-"+e+" * var(--f7-navbar-large-title-height)))"}),void(d&&m&&(v.transform=function(e){return"translateX("+(100*e-100)*a+"%)"}));if(!r.hasClass("title-large")){var b=r.hasClass("sliding")||E.children(".navbar-inner.sliding").length;if(n.indexOf(v)<0&&n.push(v),(!o||o&&!b)&&(v.opacity=function(e){return Math.pow(e,3)}),b){var y=v;if(s&&t.length&&f.iosAnimateNavbarBackIcon){var w={el:t[0]};y=w,n.push(w)}y.transform=function(e){var t=y.el.f7NavbarLeftOffset*(1-e);return 1===g.pixelRatio&&(t=Math.round(t)),o&&u?"translate3d("+t+"px, calc(-1 * var(--f7-navbar-large-collapse-progress) * var(--f7-navbar-large-title-height)), 0)":"translate3d("+t+"px,0,0)"}}}}})),n}()),gl(".sheet.modal-in").length>0&&h.sheet&&h.sheet.close(gl(".sheet.modal-in"))}e.f7PreventSwipePanel=!0,b=!0,h.preventSwipePanelBySwipeBack=!0,e.preventDefault();var M=h.rtl?-1:1;(a=(r-y.x-I)*M)<0&&(a=0);var B=Math.min(Math.max(a/n,0),1),P={percentage:B,progress:B,currentPageEl:w[0],previousPageEl:x[0],currentNavbarEl:C[0],previousNavbarEl:E[0]};p.trigger("swipeback:move",P),c.emit("swipebackMove",P);var D=a*M,F=(a/5-n/5)*M;h.rtl?(D=Math.max(D,-n),F=Math.max(F,0)):(D=Math.min(D,n),F=Math.min(F,0)),1===g.pixelRatio&&(D=Math.round(D),F=Math.round(F)),c.swipeBackActive=!0,gl([w[0],x[0]]).addClass("page-swipeback-active"),w.transform("translate3d("+D+"px,0,0)"),S&&(s[0].style.opacity=1-1*B),"ios"===h.theme&&x.transform("translate3d("+F+"px,0,0)"),$&&(i[0].style.opacity=1-1*B),o&&R({progress:B})}}}function B(){if(h.preventSwipePanelBySwipeBack=!1,!v||!b)return v=!1,void(b=!1);v=!1,b=!1,c.swipeBackActive=!1;var e=gl([w[0],x[0]]);if(e.removeClass("page-swipeback-active"),0===a)return e.transform(""),s&&s.length>0&&s.remove(),i&&i.length>0&&i.remove(),void(o&&R({reset:!0}));var t=rs()-r,l=!1;(t<300&&a>10||t>=300&&a>n/2)&&(w.removeClass("page-current").addClass("page-next"+("ios"!==h.theme?" page-next-on-right":"")),x.removeClass("page-previous").addClass("page-current").removeAttr("aria-hidden"),s&&(s[0].style.opacity=""),i&&(i[0].style.opacity=""),o&&(c.setNavbarPosition(C,"next"),c.setNavbarPosition(E,"current",!1)),l=!0),e.addClass("page-transitioning page-transitioning-swipeback"),g.ios&&(w[0]._clientLeft=w[0].clientLeft),e.transform(""),o&&R({progress:l?1:0,transition:!0,reflow:!!g.ios}),k=!1,c.allowPageChange=!1;var u={currentPageEl:w[0],previousPageEl:x[0],currentNavbarEl:C[0],previousNavbarEl:E[0]};l?(c.currentRoute=x[0].f7Page.route,c.currentPage=x[0],c.pageCallback("beforeOut",w,C,"current","next",{route:w[0].f7Page.route,swipeBack:!0}),c.pageCallback("beforeIn",x,E,"previous","current",{route:x[0].f7Page.route,swipeBack:!0},w[0]),p.trigger("swipeback:beforechange",u),c.emit("swipebackBeforeChange",u)):(p.trigger("swipeback:beforereset",u),c.emit("swipebackBeforeReset",u)),w.transitionEnd((function(){e.removeClass("page-transitioning page-transitioning-swipeback"),o&&R({reset:!0,transition:!1}),k=!0,c.allowPageChange=!0,l?(1===c.history.length&&c.history.unshift(c.url),c.history.pop(),c.saveHistory(),f.browserHistory&&eu.back(),c.pageCallback("afterOut",w,C,"current","next",{route:w[0].f7Page.route,swipeBack:!0}),c.pageCallback("afterIn",x,E,"previous","current",{route:x[0].f7Page.route,swipeBack:!0}),f.stackPages&&c.initialPages.indexOf(w[0])>=0?(w.addClass("stacked"),o&&C.addClass("stacked")):(c.pageCallback("beforeRemove",w,C,"next",{swipeBack:!0}),c.removePage(w),o&&c.removeNavbar(C)),p.trigger("swipeback:afterchange",u),c.emit("swipebackAfterChange",u),c.emit("routeChanged",c.currentRoute,c.previousRoute,c),f.preloadPreviousPage&&c.back(c.history[c.history.length-2],{preload:!0})):(p.trigger("swipeback:afterreset",u),c.emit("swipebackAfterReset",u)),s&&s.length>0&&s.remove(),i&&i.length>0&&i.remove()}))}u=!("touchstart"!==h.touchEvents.start||!m.passiveListener)&&{passive:!0,capture:!1},p.on(h.touchEvents.start,A,u),h.on("touchmove:active",M),h.on("touchend:passive",B),c.on("routerDestroy",(function(){var e=!("touchstart"!==h.touchEvents.start||!m.passiveListener)&&{passive:!0,capture:!1};p.off(h.touchEvents.start,A,e),h.off("touchmove:active",M),h.off("touchend:passive",B)}))};function nu(e,t,n){var a=this,r=t.route.redirect,o="forward"===e?"navigate":"back";if(n.initial&&a.params.browserHistory&&(n.replaceState=!0,n.history=!0),"function"==typeof r){a.allowPageChange=!1;var s=r.call(a,{router:a,to:t,resolve:function(e,t){void 0===t&&(t={}),a.allowPageChange=!0,a[o](e,cs({},n,t))},reject:function(){a.allowPageChange=!0},direction:e,app:a.app});return s&&"string"==typeof s?(a.allowPageChange=!0,a[o](s,n)):a}return a[o](r,n)}function au(e,t,n,a,r,o,s,i){var l=[];Array.isArray(n)?l.push.apply(l,n):n&&"function"==typeof n&&l.push(n),t&&(Array.isArray(t)?l.push.apply(l,t):l.push(t)),function t(){0!==l.length?l.shift().call(e,{router:e,to:a,from:r,resolve:function(){t()},reject:function(){s()},direction:i,app:e.app}):o()}()}function ru(e,t,n,a,r){var o=this;function s(){e&&e.route&&(o.params.routesBeforeEnter||e.route.beforeEnter)?(o.allowPageChange=!1,au(o,o.params.routesBeforeEnter,e.route.beforeEnter,e,t,(function(){o.allowPageChange=!0,n()}),(function(){a()}),r)):n()}t&&t.route&&(o.params.routesBeforeLeave||t.route.beforeLeave)?(o.allowPageChange=!1,au(o,o.params.routesBeforeLeave,t.route.beforeLeave,e,t,(function(){o.allowPageChange=!0,s()}),(function(){a()}),r)):s()}function ou(e,t){if(!e.view)throw new Error("Framework7: it is not allowed to use router methods on global app router. Use router methods only on related View, e.g. app.views.main.router."+t+"(...)")}function su(e,t,n,a){function r(e){e.then((function(e){n({component:e.default||e._default||e})})).catch((function(e){throw a(),new Error(e)}))}if(t instanceof Promise)r(t);else{var o=t.call(e);o instanceof Promise?r(o):n({component:o})}}function iu(){return iu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},iu.apply(this,arguments)}function lu(e,t,n){void 0===n&&(n={});var a,r,o,s=Vo(),i=gl(t),l=e.app,u=e.view,c=cs(!1,{animate:e.params.animate,browserHistory:!0,replaceState:!1,history:!0,reloadCurrent:e.params.reloadPages,reloadPrevious:!1,reloadAll:!1,clearPreviousHistory:!1,reloadDetail:e.params.reloadDetail,on:{}},n),p=e.params.masterDetailBreakpoint>0,d=p&&c.route&&c.route.route&&(!0===c.route.route.master||"function"==typeof c.route.route.master&&c.route.route.master(l,e)),h=0,f=e.currentRoute.modal;if(f||"popup popover sheet loginScreen actions customModal panel".split(" ").forEach((function(t){e.currentRoute&&e.currentRoute.route&&e.currentRoute.route[t]&&(f=!0,o=t)})),f){var m=e.currentRoute.modal||e.currentRoute.route.modalInstance||l[o].get(),g=e.history[e.history.length-2],v=e.findMatchingRoute(g);!v&&g&&(v={url:g,path:g.split("?")[0],query:os(g),route:{path:g.split("?")[0],url:g}}),e.modalRemove(m)}var b,y,w,x,k=e.dynamicNavbar,C=e.$el,E=i,S=c.reloadPrevious||c.reloadCurrent||c.reloadAll;if(e.allowPageChange=!1,0===E.length)return e.allowPageChange=!0,e;E.length&&e.removeThemeElements(E),k&&(w=E.children(".navbar"),y=e.$navbarsEl,0===w.length&&E[0]&&E[0].f7Page&&(w=E[0].f7Page.$navbarEl)),c.route&&c.route.route&&c.route.route.keepAlive&&!c.route.route.keepAliveData&&(c.route.route.keepAliveData={pageEl:i[0]});var $,T,I,N,O=C.children(".page:not(.stacked)").filter((function(e){return e!==E[0]}));if(k&&($=y.children(".navbar:not(.stacked)").filter((function(e){return e!==w[0]}))),c.reloadPrevious&&O.length<2)return e.allowPageChange=!0,e;if(p&&!c.reloadAll){for(var R=0;R<O.length;R+=1)a||!O[R].classList.contains("page-master")||(a=O[R]);if((T=!d&&a)&&a)for(var A=0;A<O.length;A+=1)O[A].classList.contains("page-master-detail")&&(r=O[A]);I=T&&c.reloadDetail&&l.width>=e.params.masterDetailBreakpoint&&a}T&&(N=!r||I||c.reloadAll||c.reloadCurrent);var M="next";if(c.reloadCurrent||c.reloadAll||I?M="current":c.reloadPrevious&&(M="previous"),E.removeClass("page-previous page-current page-next").addClass("page-"+M+(d?" page-master":"")+(T?" page-master-detail":"")+(N?" page-master-detail-root":"")).removeClass("stacked").trigger("page:unstack").trigger("page:position",{position:M}),e.emit("pageUnstack",E[0]),e.emit("pagePosition",E[0],M),(d||T)&&(E.trigger("page:role",{role:d?"master":"detail",root:!!N}),e.emit("pageRole",E[0],{role:d?"master":"detail",detailRoot:!!N})),k&&w.length&&(w.removeClass("navbar-previous navbar-current navbar-next").addClass("navbar-"+M+(d?" navbar-master":"")+(T?" navbar-master-detail":"")+(N?" navbar-master-detail-root":"")).removeClass("stacked"),w.trigger("navbar:position",{position:M}),e.emit("navbarPosition",w[0],M),(d||T)&&e.emit("navbarRole",w[0],{role:d?"master":"detail",detailRoot:!!N})),c.reloadCurrent||I)I?(b=O.filter((function(e){return!e.classList.contains("page-master")})),k&&(x=gl(b.map((function(e){return l.navbar.getElByPage(e)})))),b.length>1&&a&&(h=b.length-1,gl(a).removeClass("page-master-stacked").trigger("page:masterunstack"),e.emit("pageMasterUnstack",a),k&&(gl(l.navbar.getElByPage(a)).removeClass("navbar-master-stacked"),e.emit("navbarMasterUnstack",l.navbar.getElByPage(a))))):(b=O.eq(O.length-1),k&&(x=gl(l.navbar.getElByPage(b))));else if(c.reloadPrevious)b=O.eq(O.length-2),k&&(x=gl(l.navbar.getElByPage(b)));else if(c.reloadAll)b=O.filter((function(e){return e!==E[0]})),k&&(x=$.filter((function(e){return e!==w[0]})));else{var B=[],P=[];if(O.length>1){var D=0;for(D=0;D<O.length-1;D+=1)if(a&&O[D]===a)O.eq(D).addClass("page-master-stacked"),O.eq(D).trigger("page:masterstack"),e.emit("pageMasterStack",O[D]),k&&(gl(l.navbar.getElByPage(a)).addClass("navbar-master-stacked"),e.emit("navbarMasterStack",l.navbar.getElByPage(a)));else{var F=l.navbar.getElByPage(O.eq(D));e.params.stackPages?(O.eq(D).addClass("stacked"),O.eq(D).trigger("page:stack"),e.emit("pageStack",O[D]),k&&gl(F).addClass("stacked")):(B.push(O[D]),e.pageCallback("beforeRemove",O[D],$&&$[D],"previous",void 0,c),e.removePage(O[D]),k&&F&&(P.push(F),e.removeNavbar(F)))}}b=C.children(".page:not(.stacked)").filter((function(e){return e!==E[0]&&B.indexOf(e)<0})),k&&(x=y.children(".navbar:not(.stacked)").filter((function(e){return e!==w[0]&&P.indexOf(P)<0}))),B=[],P=[]}if(T&&!c.reloadAll&&((b.length>1||I)&&(b=b.filter((function(e){return!e.classList.contains("page-master")}))),x&&(x.length>1||I)&&(x=x.filter((function(e){return!e.classList.contains("navbar-master")})))),e.params.browserHistory&&(c.browserHistory||c.replaceState)&&!c.reloadPrevious){var _=e.params.browserHistoryRoot||"";eu[c.reloadCurrent||I&&r||c.reloadAll||c.replaceState?"replace":"push"](u.id,{url:c.route.url},_+e.params.browserHistorySeparator+c.route.url)}c.reloadPrevious||(e.currentPageEl=E[0],k&&w.length?e.currentNavbarEl=w[0]:delete e.currentNavbarEl,e.currentRoute=c.route);var L=c.route.url;c.history&&(((c.reloadCurrent||I&&r)&&e.history.length)>0||c.replaceState?(I&&h>0&&(e.history=e.history.slice(0,e.history.length-h)),e.history[e.history.length-(c.reloadPrevious?2:1)]=L):c.reloadPrevious?e.history[e.history.length-2]=L:c.reloadAll?e.history=[L]:e.history.push(L)),e.saveHistory();var z=E.parents(s).length>0,V=E[0].f7Component;if(c.reloadPrevious?(V&&!z?V.mount((function(e){gl(e).insertBefore(b)})):E.insertBefore(b),k&&w.length&&(w.find(".title-large").length&&w.addClass("navbar-large"),x.length?w.insertBefore(x):(e.$navbarsEl.parents(s).length||e.$el.prepend(e.$navbarsEl),y.append(w)))):(b.next(".page")[0]!==E[0]&&(V&&!z?V.mount((function(e){C.append(e)})):C.append(E[0])),k&&w.length&&(w.find(".title-large").length&&w.addClass("navbar-large"),e.$navbarsEl.parents(s).length||e.$el.prepend(e.$navbarsEl),y.append(w[0]))),z?c.route&&c.route.route&&c.route.route.keepAlive&&!E[0].f7PageMounted&&(E[0].f7PageMounted=!0,e.pageCallback("mounted",E,w,M,S?M:"current",c,b)):e.pageCallback("mounted",E,w,M,S?M:"current",c,b),(c.reloadCurrent||I)&&b.length>0?e.params.stackPages&&e.initialPages.indexOf(b[0])>=0?(b.addClass("stacked"),b.trigger("page:stack"),e.emit("pageStack",b[0]),k&&x.addClass("stacked")):(e.pageCallback("beforeOut",b,x,"current",void 0,c),e.pageCallback("afterOut",b,x,"current",void 0,c),e.pageCallback("beforeRemove",b,x,"current",void 0,c),e.removePage(b),k&&x&&x.length&&e.removeNavbar(x)):c.reloadAll?b.each((function(t,n){var a=gl(t),r=gl(l.navbar.getElByPage(a));e.params.stackPages&&e.initialPages.indexOf(a[0])>=0?(a.addClass("stacked"),a.trigger("page:stack"),e.emit("pageStack",a[0]),k&&r.addClass("stacked")):(a.hasClass("page-current")&&(e.pageCallback("beforeOut",b,x,"current",void 0,c),e.pageCallback("afterOut",b,x,"current",void 0,c)),e.pageCallback("beforeRemove",a,x&&x.eq(n),"previous",void 0,c),e.removePage(a),k&&r.length&&e.removeNavbar(r))})):c.reloadPrevious&&(e.params.stackPages&&e.initialPages.indexOf(b[0])>=0?(b.addClass("stacked"),b.trigger("page:stack"),e.emit("pageStack",b[0]),k&&x.addClass("stacked")):(e.pageCallback("beforeRemove",b,x,"previous",void 0,c),e.removePage(b),k&&x&&x.length&&e.removeNavbar(x))),c.route.route.tab&&e.tabLoad(c.route.route.tab,cs({},c,{history:!1,browserHistory:!1})),p&&u.checkMasterDetailBreakpoint(),e.pageCallback("init",E,w,M,S?M:"current",c,b),c.reloadCurrent||c.reloadAll||I)return e.allowPageChange=!0,e.pageCallback("beforeIn",E,w,M,"current",c),E.removeAttr("aria-hidden"),k&&w&&w.removeAttr("aria-hidden"),e.pageCallback("afterIn",E,w,M,"current",c),c.reloadCurrent&&c.clearPreviousHistory&&e.clearPreviousHistory(),I&&(e.setPagePosition(gl(a),"previous"),a.f7Page&&a.f7Page.navbarEl&&e.setNavbarPosition(gl(a.f7Page.navbarEl),"previous")),e;if(c.reloadPrevious)return e.allowPageChange=!0,e;function W(){e.setPagePosition(E,"current",!1),e.setPagePosition(b,"previous",!b.hasClass("page-master")),k&&(e.setNavbarPosition(w,"current",!1),e.setNavbarPosition(x,"previous",!x.hasClass("navbar-master"))),e.allowPageChange=!0,e.pageCallback("afterOut",b,x,"current","previous",c),e.pageCallback("afterIn",E,w,"next","current",c);var t=(e.params.preloadPreviousPage||e.params[l.theme+"SwipeBack"])&&!d;t||(E.hasClass("smart-select-page")||E.hasClass("photo-browser-page")||E.hasClass("autocomplete-page")||E.hasClass("color-picker-page"))&&(t=!0),t||(e.params.stackPages?(b.addClass("stacked"),b.trigger("page:stack"),e.emit("pageStack",b[0]),k&&x.addClass("stacked")):E.attr("data-name")&&"smart-select-page"===E.attr("data-name")||(e.pageCallback("beforeRemove",b,x,"previous",void 0,c),e.removePage(b),k&&x.length&&e.removeNavbar(x))),c.clearPreviousHistory&&e.clearPreviousHistory(),e.emit("routeChanged",e.currentRoute,e.previousRoute,e),e.params.browserHistory&&eu.clearRouterQueue()}function H(){e.setPagePosition(b,"current",!1),e.setPagePosition(E,"next",!1),k&&(e.setNavbarPosition(x,"current",!1),e.setNavbarPosition(w,"next",!1))}if(e.pageCallback("beforeOut",b,x,"current","previous",c),e.pageCallback("beforeIn",E,w,"next","current",c),!c.animate||d&&l.width>=e.params.masterDetailBreakpoint)W();else{var j=e.params[e.app.theme+"PageLoadDelay"],U=e.params.transition;c.transition&&(U=c.transition),!U&&e.currentRoute&&e.currentRoute.route&&(U=e.currentRoute.route.transition),!U&&e.currentRoute&&e.currentRoute.route.options&&(U=e.currentRoute.route.options.transition),U&&(E[0].f7PageTransition=U),j?setTimeout((function(){H(),e.animate(b,E,x,w,"forward",U,(function(){W()}))}),j):(H(),e.animate(b,E,x,w,"forward",U,(function(){W()})))}return e}function uu(e,t,n,a){if(void 0===t&&(t={}),void 0===n&&(n={}),!e.allowPageChange&&!a)return e;var r=t,o=n,s=r.url,i=r.content,l=r.el,u=r.pageName,c=r.component,p=r.componentUrl;if(!o.reloadCurrent&&o.route&&o.route.route&&o.route.route.parentPath&&e.currentRoute.route&&e.currentRoute.route.parentPath===o.route.route.parentPath){if(o.route.url===e.url)return e.allowPageChange=!0,!1;var d=Object.keys(o.route.params).length===Object.keys(e.currentRoute.params).length;if(d&&Object.keys(o.route.params).forEach((function(t){t in e.currentRoute.params&&e.currentRoute.params[t]===o.route.params[t]||(d=!1)})),d)return!!o.route.route.tab&&e.tabLoad(o.route.route.tab,o);if(!d&&o.route.route.tab&&e.currentRoute.route.tab&&e.currentRoute.parentPath===o.route.parentPath)return e.tabLoad(o.route.route.tab,o)}if(o.route&&o.route.url&&e.url===o.route.url&&!o.reloadCurrent&&!o.reloadPrevious&&!e.params.allowDuplicateUrls)return e.allowPageChange=!0,!1;if(!o.route&&s&&(o.route=e.parseRouteUrl(s),cs(o.route,{route:{url:s,path:s}})),(s||p||c)&&(e.allowPageChange=!1),i)lu(e,e.getPageEl(i),o);else if(l)lu(e,e.getPageEl(l),o);else if(u)lu(e,e.$el.children('.page[data-name="'+u+'"]').eq(0),o);else if(c||p)try{e.pageComponentLoader({routerEl:e.el,component:c,componentUrl:p,options:o,resolve:function(t,n){return lu(e,t,cs(o,n))},reject:function(){return e.allowPageChange=!0,e}})}catch(t){throw e.allowPageChange=!0,t}else s&&(e.xhrAbortController&&(e.xhrAbortController.abort(),e.xhrAbortController=!1),e.xhrRequest(s,o).then((function(t){lu(e,e.getPageEl(t),o)})).catch((function(){e.allowPageChange=!0})));return e}function cu(e,t,n){var a,r,o,s,i,l,u,c,p=xs(),d=Vo(),h=gl(t),f=e.app,m=e.view,g=cs({animate:e.params.animate,browserHistory:!0,replaceState:!1},n),v=e.params.masterDetailBreakpoint>0,b=v&&g.route&&g.route.route&&(!0===g.route.route.master||"function"==typeof g.route.route.master&&g.route.route.master(f,e)),y=e.dynamicNavbar,w=h,x=e.$el.children(".page-current"),k=0===x.length&&g.preload,C=v&&x.hasClass("page-master");if(w.length&&e.removeThemeElements(w),y&&(s=w.children(".navbar"),o=e.$navbarsEl,0===s.length&&w[0]&&w[0].f7Page&&(s=w[0].f7Page.$navbarEl),i=o.find(".navbar-current")),e.allowPageChange=!1,0===w.length||0===x.length&&!g.preload)return e.allowPageChange=!0,e;if(e.removeThemeElements(w),g.route&&g.route.route&&g.route.route.keepAlive&&!g.route.route.keepAliveData&&(g.route.route.keepAliveData={pageEl:h[0]}),v){for(var E=e.$el.children(".page:not(.stacked)").filter((function(e){return e!==w[0]})),S=0;S<E.length;S+=1)a||!E[S].classList.contains("page-master")||(a=E[S]);!(l=!b&&a&&e.history.indexOf(g.route.url)>e.history.indexOf(a.f7Page.route.url))&&!b&&a&&a.f7Page&&g.route.route.masterRoute&&(l=g.route.route.masterRoute.path===a.f7Page.route.route.path)}if(l&&a&&a.f7Page&&(u=e.history.indexOf(g.route.url)-e.history.indexOf(a.f7Page.route.url)==1),w.addClass("page-"+(k?"current":"previous")+(b?" page-master":"")+(l?" page-master-detail":"")+(u?" page-master-detail-root":"")).removeClass("stacked").removeAttr("aria-hidden").trigger("page:unstack").trigger("page:position",{position:k?"current":"previous"}),e.emit("pageUnstack",w[0]),e.emit("pagePosition",w[0],k?"current":"previous"),(b||l)&&(w.trigger("page:role",{role:b?"master":"detail",root:!!u}),e.emit("pageRole",w[0],{role:b?"master":"detail",detailRoot:!!u})),y&&s.length>0&&(s.addClass("navbar-"+(k?"current":"previous")+(b?" navbar-master":"")+(l?" navbar-master-detail":"")+(u?" navbar-master-detail-root":"")).removeClass("stacked").removeAttr("aria-hidden"),s.trigger("navbar:position",{position:k?"current":"previous"}),e.emit("navbarPosition",s[0],k?"current":"previous"),(b||u)&&e.emit("navbarRole",s[0],{role:b?"master":"detail",detailRoot:!!u})),g.force&&(x.prev(".page-previous:not(.stacked)").length>0||0===x.prev(".page-previous").length))if(e.history.indexOf(g.route.url)>=0?(c=e.history.length-e.history.indexOf(g.route.url)-1,e.history=e.history.slice(0,e.history.indexOf(g.route.url)+2),m.history=e.history):e.history[[e.history.length-2]]?e.history[e.history.length-2]=g.route.url:e.history.unshift(e.url),c&&e.params.stackPages)x.prevAll(".page-previous").each((function(t){var n,o=gl(t);y&&(n=gl(f.navbar.getElByPage(o))),o[0]!==w[0]&&o.index()>w.index()&&(e.initialPages.indexOf(o[0])>=0?(o.addClass("stacked"),o.trigger("page:stack"),e.emit("pageStack",o[0]),y&&n.addClass("stacked")):(e.pageCallback("beforeRemove",o,n,"previous",void 0,g),o[0]===a&&(r=!0),e.removePage(o),y&&n.length>0&&e.removeNavbar(n)))}));else{var $,T=x.prev(".page-previous:not(.stacked)");y&&($=gl(f.navbar.getElByPage(T))),e.params.stackPages&&e.initialPages.indexOf(T[0])>=0?(T.addClass("stacked"),T.trigger("page:stack"),e.emit("pageStack",T[0]),$.addClass("stacked")):T.length>0&&(e.pageCallback("beforeRemove",T,$,"previous",void 0,g),T[0]===a&&(r=!0),e.removePage(T),y&&$.length&&e.removeNavbar($))}var I=w.parents(d).length>0,N=w[0].f7Component;function O(){k&&(!I&&N?N.mount((function(t){e.$el.append(t)})):e.$el.append(w)),0===w.next(x).length&&(!I&&N?N.mount((function(e){gl(e).insertBefore(x)})):w.insertBefore(x)),y&&s.length&&(s.find(".title-large").length&&s.addClass("navbar-large"),s.insertBefore(i),i.length>0?s.insertBefore(i):(e.$navbarsEl.parents(d).length||e.$el.prepend(e.$navbarsEl),o.append(s))),I?g.route&&g.route.route&&g.route.route.keepAlive&&!w[0].f7PageMounted&&(w[0].f7PageMounted=!0,e.pageCallback("mounted",w,s,"previous","current",g,x)):e.pageCallback("mounted",w,s,"previous","current",g,x)}if(g.preload){O(),g.route.route.tab&&e.tabLoad(g.route.route.tab,cs({},g,{history:!1,browserHistory:!1,preload:!0})),b&&(w.removeClass("page-master-stacked").trigger("page:masterunstack"),e.emit("pageMasterUnstack",w[0]),y&&(gl(f.navbar.getElByPage(w)).removeClass("navbar-master-stacked"),e.emit("navbarMasterUnstack",f.navbar.getElByPage(w)))),e.pageCallback("init",w,s,"previous","current",g,x),k&&(e.pageCallback("beforeIn",w,s,"current",void 0,g),e.pageCallback("afterIn",w,s,"current",void 0,g));var R=w.prevAll(".page-previous:not(.stacked):not(.page-master)");return R.length>0&&R.each((function(t){var n,a=gl(t);y&&(n=gl(f.navbar.getElByPage(a))),e.params.stackPages&&e.initialPages.indexOf(t)>=0?(a.addClass("stacked"),a.trigger("page:stack"),e.emit("pageStack",a[0]),y&&n.addClass("stacked")):(e.pageCallback("beforeRemove",a,n,"previous",void 0),e.removePage(a),y&&n.length&&e.removeNavbar(n))})),e.allowPageChange=!0,e}if(!(p.ie||p.edge||p.firefox&&!p.ios)&&e.params.browserHistory&&g.browserHistory)if(g.replaceState){var A=e.params.browserHistoryRoot||"";eu.replace(m.id,{url:g.route.url},A+e.params.browserHistorySeparator+g.route.url)}else c?eu.go(-c):eu.back();if(g.replaceState?e.history[e.history.length-1]=g.route.url:(1===e.history.length&&e.history.unshift(e.url),e.history.pop()),e.saveHistory(),e.currentPageEl=w[0],y&&s.length?e.currentNavbarEl=s[0]:delete e.currentNavbarEl,e.currentRoute=g.route,(p.ie||p.edge||p.firefox&&!p.ios)&&e.params.browserHistory&&g.browserHistory)if(g.replaceState){var M=e.params.browserHistoryRoot||"";eu.replace(m.id,{url:g.route.url},M+e.params.browserHistorySeparator+g.route.url)}else c?eu.go(-c):eu.back();function B(){e.setPagePosition(w,"current",!1),e.setPagePosition(x,"next",!0),y&&(e.setNavbarPosition(s,"current",!1),e.setNavbarPosition(i,"next",!0)),e.pageCallback("afterOut",x,i,"current","next",g),e.pageCallback("afterIn",w,s,"previous","current",g),e.params.stackPages&&e.initialPages.indexOf(x[0])>=0?(x.addClass("stacked"),x.trigger("page:stack"),e.emit("pageStack",x[0]),y&&i.addClass("stacked")):(e.pageCallback("beforeRemove",x,i,"next",void 0,g),e.removePage(x),y&&i.length&&e.removeNavbar(i)),e.allowPageChange=!0,e.emit("routeChanged",e.currentRoute,e.previousRoute,e),(e.params.preloadPreviousPage||e.params[f.theme+"SwipeBack"])&&e.history[e.history.length-2]&&!b&&e.back(e.history[e.history.length-2],{preload:!0}),e.params.browserHistory&&eu.clearRouterQueue()}if(O(),g.route.route.tab&&e.tabLoad(g.route.route.tab,cs({},g,{history:!1,browserHistory:!1})),v&&(C||r)&&m.checkMasterDetailBreakpoint(!1),e.pageCallback("init",w,s,"previous","current",g,x),e.pageCallback("beforeOut",x,i,"current","next",g),e.pageCallback("beforeIn",w,s,"previous","current",g),!g.animate||C&&f.width>=e.params.masterDetailBreakpoint)B();else{var P=e.params.transition;x[0]&&x[0].f7PageTransition&&(P=x[0].f7PageTransition,delete x[0].f7PageTransition),g.transition&&(P=g.transition),!P&&e.previousRoute&&e.previousRoute.route&&(P=e.previousRoute.route.transition),!P&&e.previousRoute&&e.previousRoute.route&&e.previousRoute.route.options&&(P=e.previousRoute.route.options.transition),e.setPagePosition(x,"current"),e.setPagePosition(w,"previous",!1),y&&(e.setNavbarPosition(i,"current"),e.setNavbarPosition(s,"previous",!1)),e.animate(x,w,i,s,"backward",P,(function(){B()}))}return e}function pu(e,t,n,a){if(!e.allowPageChange&&!a)return e;var r=t,o=n,s=r.url,i=r.content,l=r.el,u=r.pageName,c=r.component,p=r.componentUrl;if(o.route.url&&e.url===o.route.url&&!o.reloadCurrent&&!o.reloadPrevious&&!e.params.allowDuplicateUrls)return!1;if(!o.route&&s&&(o.route=e.parseRouteUrl(s)),(s||p||c)&&(e.allowPageChange=!1),i)cu(e,e.getPageEl(i),o);else if(l)cu(e,e.getPageEl(l),o);else if(u)cu(e,e.$el.children('.page[data-name="'+u+'"]').eq(0),o);else if(c||p)try{e.pageComponentLoader({routerEl:e.el,component:c,componentUrl:p,options:o,resolve:function(t,n){return cu(e,t,cs(o,n))},reject:function(){return e.allowPageChange=!0,e}})}catch(t){throw e.allowPageChange=!0,t}else s&&(e.xhrAbortController&&(e.xhrAbortController.abort(),e.xhrAbortController=!1),e.xhrRequest(s,o).then((function(t){cu(e,e.getPageEl(t),o)})).catch((function(){e.allowPageChange=!0})));return e}function du(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hu(e,t){return hu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},hu(e,t)}var fu=function(e){var t,n;function a(t,n){var a,r=du(a=e.call(this,{},[void 0===n?t:n])||this);r.isAppRouter=void 0===n,r.isAppRouter?cs(!1,r,{app:t,params:t.params.view,routes:t.routes||[],cache:t.cache}):cs(!1,r,{app:t,view:n,viewId:n.id,id:n.params.routerId,params:n.params,routes:n.routes,history:n.history,scrollHistory:n.scrollHistory,cache:t.cache,dynamicNavbar:"ios"===t.theme&&n.params.iosDynamicNavbar,initialPages:[],initialNavbars:[]}),r.useModules(),r.allowPageChange=!0;var o={},s={};return Object.defineProperty(r,"currentRoute",{enumerable:!0,configurable:!0,set:function(e){void 0===e&&(e={}),s=cs({},o),(o=e)&&(r.url=o.url,r.emit("routeChange",e,s,r))},get:function(){return o}}),Object.defineProperty(r,"previousRoute",{enumerable:!0,configurable:!0,get:function(){return s},set:function(e){s=e}}),r||du(a)}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,hu(t,n);var r=a.prototype;return r.mount=function(){var e=this,t=e.view;cs(!1,e,{tempDom:Vo().createElement("div"),$el:t.$el,el:t.el,$navbarsEl:t.$navbarsEl,navbarsEl:t.navbarsEl}),e.emit("local::mount routerMount",e)},r.animatableNavElements=function(e,t,n,a,r){var o,s,i=this,l=i.dynamicNavbar,u=i.params.iosAnimateNavbarBackIcon;function c(e,t){var n,a=e.hasClass("sliding")||t.hasClass("sliding"),r=e.hasClass("subnavbar"),o=!a||!r,s=e.find(".back .icon");return a&&u&&e.hasClass("left")&&s.length>0&&s.next("span").length&&(e=s.next("span"),n=!0),{$el:e,isIconLabel:n,leftOffset:e[0].f7NavbarLeftOffset,rightOffset:e[0].f7NavbarRightOffset,isSliding:a,isSubnavbar:r,needsOpacityTransition:o}}return l&&(o=[],s=[],e.children(".navbar-inner").children(".left, .right, .title, .subnavbar").each((function(t){var s=gl(t);s.hasClass("left")&&a&&"forward"===r||s.hasClass("title")&&n||o.push(c(s,e.children(".navbar-inner")))})),t.hasClass("navbar-master")&&i.params.masterDetailBreakpoint>0&&i.app.width>=i.params.masterDetailBreakpoint||t.children(".navbar-inner").children(".left, .right, .title, .subnavbar").each((function(e){var o=gl(e);o.hasClass("left")&&n&&!a&&"forward"===r||o.hasClass("left")&&n&&"backward"===r||o.hasClass("title")&&a||s.push(c(o,t.children(".navbar-inner")))})),[s,o].forEach((function(e){e.forEach((function(t){var n=t,a=t.isSliding,r=t.$el,i=e===s?o:s;a&&r.hasClass("title")&&i&&i.forEach((function(e){if(e.isIconLabel){var t=e.$el[0];n.leftOffset+=t&&t.offsetLeft||0}}))}))}))),{newNavEls:o,oldNavEls:s}},r.animate=function(e,t,n,a,r,o,s){var i=this;if(i.params.animateCustom)i.params.animateCustom.apply(i,[e,t,n,a,r,s]);else{var l=i.dynamicNavbar,u="ios"===i.app.theme;if(o){var c="router-transition-custom router-transition-"+o+"-"+r;return("forward"===r?t:e).animationEnd((function(){i.$el.removeClass(c),l&&i.$navbarsEl.length&&(a&&i.$navbarsEl.prepend(a),n&&i.$navbarsEl.prepend(n)),s&&s()})),l&&(a&&t&&(i.setNavbarPosition(a,""),a.removeClass("navbar-next navbar-previous navbar-current"),t.prepend(a)),n&&e&&(i.setNavbarPosition(n,""),n.removeClass("navbar-next navbar-previous navbar-current"),e.prepend(n))),void i.$el.addClass(c)}var p,d,h,f,m,g,v,b="router-transition-"+r+" router-transition";if(u&&l){i.params.masterDetailBreakpoint>0&&i.app.width>=i.params.masterDetailBreakpoint&&(n.hasClass("navbar-master")&&a.hasClass("navbar-master-detail")||n.hasClass("navbar-master-detail")&&a.hasClass("navbar-master"))||(g=n&&n.hasClass("navbar-large"),v=a&&a.hasClass("navbar-large"),h=g&&!n.hasClass("navbar-large-collapsed"),f=v&&!a.hasClass("navbar-large-collapsed"),m=h&&!f||f&&!h);var y=i.animatableNavElements(a,n,f,h,r);p=y.newNavEls,d=y.oldNavEls}("forward"===r?t:e).animationEnd((function(){i.dynamicNavbar&&(a&&(a.removeClass("router-navbar-transition-to-large router-navbar-transition-from-large"),a.addClass("navbar-no-title-large-transition"),as((function(){a.removeClass("navbar-no-title-large-transition")}))),n&&n.removeClass("router-navbar-transition-to-large router-navbar-transition-from-large"),a.hasClass("sliding")||a.children(".navbar-inner.sliding").length?a.find(".title, .left, .right, .left .icon, .subnavbar").transform(""):a.find(".sliding").transform(""),n.hasClass("sliding")||n.children(".navbar-inner.sliding").length?n.find(".title, .left, .right, .left .icon, .subnavbar").transform(""):n.find(".sliding").transform("")),i.$el.removeClass(b),s&&s()})),l?(w(0),as((function(){i.$el.addClass(b),m&&(i.el._clientLeft=i.el.clientLeft),w(1)}))):i.$el.addClass(b)}function w(e){u&&l&&(1===e&&(f&&(a.addClass("router-navbar-transition-to-large"),n.addClass("router-navbar-transition-to-large")),h&&(a.addClass("router-navbar-transition-from-large"),n.addClass("router-navbar-transition-from-large"))),p.forEach((function(t){var n=t.$el,a="forward"===r?t.rightOffset:t.leftOffset;t.isSliding&&(t.isSubnavbar&&v?n[0].style.setProperty("transform","translate3d("+a*(1-e)+"px, calc(-1 * var(--f7-navbar-large-collapse-progress) * var(--f7-navbar-large-title-height)), 0)","important"):n.transform("translate3d("+a*(1-e)+"px,0,0)"))})),d.forEach((function(t){var n=t.$el,a="forward"===r?t.leftOffset:t.rightOffset;t.isSliding&&(t.isSubnavbar&&g?n.transform("translate3d("+a*e+"px, calc(-1 * var(--f7-navbar-large-collapse-progress) * var(--f7-navbar-large-title-height)), 0)"):n.transform("translate3d("+a*e+"px,0,0)"))})))}},r.removeModal=function(e){this.removeEl(e)},r.removeTabContent=function(e){gl(e).html("")},r.removeNavbar=function(e){this.removeEl(e)},r.removePage=function(e){var t=gl(e),n=t&&t[0]&&t[0].f7Page;n&&n.route&&n.route.route&&n.route.route.keepAlive?t.remove():this.removeEl(e)},r.removeEl=function(e){if(e){var t=this,n=gl(e);0!==n.length&&(n.find(".tab").each((function(e){gl(e).children().each((function(e){e.f7Component&&(gl(e).trigger("tab:beforeremove"),e.f7Component.destroy())}))})),n[0].f7Component&&n[0].f7Component.destroy&&n[0].f7Component.destroy(),t.params.removeElements&&(t.params.removeElementsWithTimeout?setTimeout((function(){n.remove()}),t.params.removeElementsTimeout):n.remove()))}},r.getPageEl=function(e){var t=this;if("string"==typeof e)t.tempDom.innerHTML=e;else{if(gl(e).hasClass("page"))return e;t.tempDom.innerHTML="",gl(t.tempDom).append(e)}return t.findElement(".page",t.tempDom)},r.findElement=function(e,t,n){var a=this,r=a.view,o=a.app,s=gl(t),i=e;n&&(i+=":not(.stacked)");var l=s.find(i).filter((function(e){return 0===gl(e).parents(".popup, .dialog, .popover, .actions-modal, .sheet-modal, .login-screen, .page").length}));return l.length>1&&("string"==typeof r.selector&&(l=s.find(r.selector+" "+i)),l.length>1&&(l=s.find("."+o.params.viewMainClass+" "+i))),1===l.length?l:(n||(l=a.findElement(i,s,!0)),l&&1===l.length?l:l&&l.length>1?gl(l[0]):void 0)},r.flattenRoutes=function(e){void 0===e&&(e=this.routes);var t=this,n=[];return e.forEach((function(e){var a=!1;if("tabs"in e&&e.tabs){var r=e.tabs.map((function(t){var n=cs({},e,{path:(e.path+"/"+t.path).replace("///","/").replace("//","/"),parentPath:e.path,tab:t});return delete n.tabs,delete n.routes,n}));a=!0,n=n.concat(t.flattenRoutes(r))}if("detailRoutes"in e){var o=e.detailRoutes.map((function(t){var n=cs({},t);return n.masterRoute=e,n.masterRoutePath=e.path,n}));n=n.concat(e,t.flattenRoutes(o))}if("routes"in e){var s=e.routes.map((function(t){var n=cs({},t);return n.path=(e.path+"/"+n.path).replace("///","/").replace("//","/"),n}));n=a?n.concat(t.flattenRoutes(s)):n.concat(e,t.flattenRoutes(s))}"routes"in e||"tabs"in e&&e.tabs||"detailRoutes"in e||n.push(e)})),n},r.parseRouteUrl=function(e){if(!e)return{};var t=os(e),n=e.split("#")[1],a=e.split("#")[0].split("?")[0];return{query:t,hash:n,params:{},url:e,path:a}},r.generateUrl=function(e){if(void 0===e&&(e={}),"string"==typeof e)return e;var t=e,n=t.name,a=t.path,r=t.params,o=t.query;if(!n&&!a)throw new Error('Framework7: "name" or "path" parameter is required');var s=this,i=n?s.findRouteByKey("name",n):s.findRouteByKey("path",a);if(!i)throw n?new Error('Framework7: route with name "'+n+'" not found'):new Error('Framework7: route with path "'+a+'" not found');var l=s.constructRouteUrl(i,{params:r,query:o});if(!l)throw new Error("Framework7: can't construct URL for route with name \""+n+'"');return l},r.constructRouteUrl=function(e,t){var n,a=void 0===t?{}:t,r=a.params,o=a.query,s=e.path,i=Xl(s);try{n=i(r||{})}catch(e){throw new Error("Framework7: error constructing route URL from passed params:\nRoute: "+s+"\n"+e.toString())}return o&&("string"==typeof o?n+="?"+o:Object.keys(o).length&&(n+="?"+is(o))),n},r.findTabRouteUrl=function(e){var t,n=this,a=gl(e),r=n.currentRoute.route.parentPath,o=a.attr("id");return n.flattenRoutes(n.routes).forEach((function(e){e.parentPath===r&&e.tab&&e.tab.id===o&&(t=n.currentRoute.params&&Object.keys(n.currentRoute.params).length>0?n.constructRouteUrl(e,{params:n.currentRoute.params,query:n.currentRoute.query}):e.path)})),t},r.findRouteByKey=function(e,t){var n,a=this.routes;return this.flattenRoutes(a).forEach((function(a){n||a[e]===t&&(n=a)})),n},r.findMatchingRoute=function(e){if(e){var t,n=this,a=n.routes,r=n.flattenRoutes(a),o=n.parseRouteUrl(e),s=o.path,i=o.query,l=o.hash,u=o.params;return r.forEach((function(n){if(!t){var a,r,o=[],c=[n.path];if(n.alias&&("string"==typeof n.alias?c.push(n.alias):Array.isArray(n.alias)&&n.alias.forEach((function(e){c.push(e)}))),c.forEach((function(e){a||(a=Zl(e,o).exec(s))})),a)o.forEach((function(e,t){if("number"!=typeof e.name){var n=a[t+1];u[e.name]=null==n?n:decodeURIComponent(n)}})),n.parentPath&&(r=s.split("/").slice(0,n.parentPath.split("/").length-1).join("/")),t={query:i,hash:l,params:u,url:e,path:s,parentPath:r,route:n,name:n.name}}})),t}},r.replaceRequestUrlParams=function(e,t){void 0===e&&(e=""),void 0===t&&(t={});var n=e;return"string"==typeof n&&n.indexOf("{{")>=0&&t&&t.route&&t.route.params&&Object.keys(t.route.params).length&&Object.keys(t.route.params).forEach((function(e){var a=new RegExp("{{"+e+"}}","g");n=n.replace(a,t.route.params[e]||"")})),n},r.removeFromXhrCache=function(e){for(var t=this.cache.xhr,n=!1,a=0;a<t.length;a+=1)t[a].url===e&&(n=a);!1!==n&&t.splice(n,1)},r.xhrRequest=function(e,t){var n=this,a=n.params,r=t.ignoreCache,o=e,s=o.indexOf("?")>=0;return a.passRouteQueryToRequest&&t&&t.route&&t.route.query&&Object.keys(t.route.query).length&&(o+=(s?"&":"?")+is(t.route.query),s=!0),a.passRouteParamsToRequest&&t&&t.route&&t.route.params&&Object.keys(t.route.params).length&&(o+=(s?"&":"?")+is(t.route.params),s=!0),o.indexOf("{{")>=0&&(o=n.replaceRequestUrlParams(o,t)),a.xhrCacheIgnoreGetParameters&&o.indexOf("?")>=0&&(o=o.split("?")[0]),new Promise((function(e,s){if(a.xhrCache&&!r&&o.indexOf("nocache")<0&&a.xhrCacheIgnore.indexOf(o)<0)for(var i=0;i<n.cache.xhr.length;i+=1){var l=n.cache.xhr[i];if(l.url===o&&rs()-l.time<a.xhrCacheDuration)return void e(l.content)}n.xhrAbortController=n.app.request.abortController(),n.app.request({abortController:n.xhrAbortController,url:o,method:"GET",beforeSend:function(e){n.emit("routerAjaxStart",e,t)},complete:function(r,i){n.emit("routerAjaxComplete",r),"error"!==i&&"timeout"!==i&&r.status>=200&&r.status<300||0===r.status?(a.xhrCache&&""!==r.responseText&&(n.removeFromXhrCache(o),n.cache.xhr.push({url:o,time:rs(),content:r.responseText})),n.emit("routerAjaxSuccess",r,t),e(r.responseText)):(n.emit("routerAjaxError",r,t),s(r))},error:function(e){n.emit("routerAjaxError",e,t),s(e)}})}))},r.setNavbarPosition=function(e,t,n){e.removeClass("navbar-previous navbar-current navbar-next"),t&&e.addClass("navbar-"+t),!1===n?e.removeAttr("aria-hidden"):!0===n&&e.attr("aria-hidden","true"),e.trigger("navbar:position",{position:t}),this.emit("navbarPosition",e[0],t)},r.setPagePosition=function(e,t,n){e.removeClass("page-previous page-current page-next"),e.addClass("page-"+t),!1===n?e.removeAttr("aria-hidden"):!0===n&&e.attr("aria-hidden","true"),e.trigger("page:position",{position:t}),this.emit("pagePosition",e[0],t)},r.removeThemeElements=function(e){var t,n=this.app.theme;"ios"===n?t=".md-only, .aurora-only, .if-md, .if-aurora, .if-not-ios, .not-ios":"md"===n?t=".ios-only, .aurora-only, .if-ios, .if-aurora, .if-not-md, .not-md":"aurora"===n&&(t=".ios-only, .md-only, .if-ios, .if-md, .if-not-aurora, .not-aurora"),gl(e).find(t).remove()},r.getPageData=function(e,t,n,a,r,o){void 0===r&&(r={});var s,i,l=this,u=gl(e).eq(0),c=gl(t).eq(0),p=u[0].f7Page||{};if(("next"===n&&"current"===a||"current"===n&&"previous"===a)&&(s="forward"),("current"===n&&"next"===a||"previous"===n&&"current"===a)&&(s="backward"),p&&!p.fromPage){var d=gl(o);d.length&&(i=d[0].f7Page)}(i=p.pageFrom||i)&&i.pageFrom&&(i.pageFrom=null);var h={app:l.app,view:l.view,router:l,$el:u,el:u[0],$pageEl:u,pageEl:u[0],$navbarEl:c,navbarEl:c[0],name:u.attr("data-name"),position:n,from:n,to:a,direction:s,route:p.route?p.route:r,pageFrom:i};return u[0].f7Page=h,h},r.pageCallback=function(e,t,n,a,r,o,s){if(void 0===o&&(o={}),t){var i=this,l=gl(t);if(l.length){var u=gl(n),c=o.route,p=i.params.restoreScrollTopOnBack&&!(i.params.masterDetailBreakpoint>0&&l.hasClass("page-master")&&i.app.width>=i.params.masterDetailBreakpoint),d=l[0].f7Page&&l[0].f7Page.route&&l[0].f7Page.route.route&&l[0].f7Page.route.route.keepAlive;"beforeRemove"===e&&d&&(e="beforeUnmount");var h="page"+(e[0].toUpperCase()+e.slice(1,e.length)),f="page:"+e.toLowerCase(),m={};(m="beforeRemove"===e&&l[0].f7Page?cs(l[0].f7Page,{from:a,to:r,position:a}):i.getPageData(l[0],u[0],a,r,c,s)).swipeBack=!!o.swipeBack;var g=o.route?o.route.route:{},v=g.on,b=void 0===v?{}:v,y=g.once,w=void 0===y?{}:y;if(o.on&&cs(b,o.on),o.once&&cs(w,o.once),"mounted"===e&&C(),"init"===e){if(p&&("previous"===a||!a)&&"current"===r&&i.scrollHistory[m.route.url]&&!l.hasClass("no-restore-scroll")){var x=l.find(".page-content");x.length>0&&(x=x.filter((function(e){return 0===gl(e).parents(".tab:not(.tab-active)").length&&!gl(e).is(".tab:not(.tab-active)")}))),x.scrollTop(i.scrollHistory[m.route.url])}if(C(),l[0].f7PageInitialized)return l.trigger("page:reinit",m),void i.emit("pageReinit",m);l[0].f7PageInitialized=!0}if(p&&"beforeOut"===e&&"current"===a&&"previous"===r){var k=l.find(".page-content");k.length>0&&(k=k.filter((function(e){return 0===gl(e).parents(".tab:not(.tab-active)").length&&!gl(e).is(".tab:not(.tab-active)")}))),i.scrollHistory[m.route.url]=k.scrollTop()}p&&"beforeOut"===e&&"current"===a&&"next"===r&&delete i.scrollHistory[m.route.url],l.trigger(f,m),i.emit(h,m),"beforeRemove"!==e&&"beforeUnmount"!==e||(l[0].f7RouteEventsAttached&&(l[0].f7RouteEventsOn&&Object.keys(l[0].f7RouteEventsOn).forEach((function(e){l.off(Zo(e),l[0].f7RouteEventsOn[e])})),l[0].f7RouteEventsOnce&&Object.keys(l[0].f7RouteEventsOnce).forEach((function(e){l.off(Zo(e),l[0].f7RouteEventsOnce[e])})),l[0].f7RouteEventsAttached=null,l[0].f7RouteEventsOn=null,l[0].f7RouteEventsOnce=null,delete l[0].f7RouteEventsAttached,delete l[0].f7RouteEventsOn,delete l[0].f7RouteEventsOnce),d||(l[0].f7Page&&l[0].f7Page.navbarEl&&delete l[0].f7Page.navbarEl.f7Page,l[0].f7Page=null))}}function C(){l[0].f7RouteEventsAttached||(l[0].f7RouteEventsAttached=!0,b&&Object.keys(b).length>0&&(l[0].f7RouteEventsOn=b,Object.keys(b).forEach((function(e){b[e]=b[e].bind(i),l.on(Zo(e),b[e])}))),w&&Object.keys(w).length>0&&(l[0].f7RouteEventsOnce=w,Object.keys(w).forEach((function(e){w[e]=w[e].bind(i),l.once(Zo(e),w[e])}))))}},r.saveHistory=function(){var e=this,t=Ho();e.view.history=e.history,e.params.browserHistory&&e.params.browserHistoryStoreHistory&&t.localStorage&&(t.localStorage["f7router-"+e.view.id+"-history"]=JSON.stringify(e.history))},r.restoreHistory=function(){var e=this,t=Ho();e.params.browserHistory&&e.params.browserHistoryStoreHistory&&t.localStorage&&t.localStorage["f7router-"+e.view.id+"-history"]&&(e.history=JSON.parse(t.localStorage["f7router-"+e.view.id+"-history"]),e.view.history=e.history)},r.clearHistory=function(){var e=this;e.history=[],e.view&&(e.view.history=[]),e.saveHistory()},r.updateCurrentUrl=function(e){var t=this;ou(t,"updateCurrentUrl"),t.history.length?t.history[t.history.length-1]=e:t.history.push(e);var n=t.parseRouteUrl(e),a=n.query,r=n.hash,o=n.params,s=n.url,i=n.path;if(t.currentRoute&&cs(t.currentRoute,{query:a,hash:r,params:o,url:s,path:i}),t.params.browserHistory){var l=t.params.browserHistoryRoot||"";eu.replace(t.view.id,{url:e},l+t.params.browserHistorySeparator+e)}t.saveHistory(),t.emit("routeUrlUpdate",t.currentRoute,t)},r.getInitialUrl=function(){var e=this;if(e.initialUrl)return{initialUrl:e.initialUrl,historyRestored:e.historyRestored};var t,n=e.app,a=e.view,r=Vo(),o=Ho(),s=n.params.url&&"string"==typeof n.params.url&&"undefined"!=typeof URL?new URL(n.params.url):r.location,i=e.params.url,l=s.href.split(s.origin)[1],u=e.params,c=u.browserHistory,p=u.browserHistoryOnLoad,d=u.browserHistorySeparator,h=e.params.browserHistoryRoot;return(o.cordova||o.Capacitor&&o.Capacitor.isNative)&&c&&!d&&!h&&s.pathname.indexOf("index.html")&&(console.warn("Framework7: wrong or not complete browserHistory configuration, trying to guess browserHistoryRoot"),h=s.pathname.split("index.html")[0]),c&&p?(h&&l.indexOf(h)>=0&&""===(l=l.split(h)[1])&&(l="/"),i=d.length>0&&l.indexOf(d)>=0?l.split(d)[1]:l,e.restoreHistory(),e.history.indexOf(i)>=0?e.history=e.history.slice(0,e.history.indexOf(i)+1):e.params.url===i?e.history=[i]:eu.state&&eu.state[a.id]&&eu.state[a.id].url===e.history[e.history.length-1]?i=e.history[e.history.length-1]:e.history=[l.split(d)[0]||"/",i],e.history.length>1?t=!0:e.history=[],e.saveHistory()):(i||(i=l),s.search&&i.indexOf("?")<0&&(i+=s.search),s.hash&&i.indexOf("#")<0&&(i+=s.hash)),e.initialUrl=i,e.historyRestored=t,{initialUrl:i,historyRestored:t}},r.init=function(){var e=this,t=e.app,n=e.view,a=Vo();e.mount();var r=e.getInitialUrl(),o=r.initialUrl,s=r.historyRestored;(n&&e.params.iosSwipeBack&&"ios"===t.theme||n&&e.params.mdSwipeBack&&"md"===t.theme||n&&e.params.auroraSwipeBack&&"aurora"===t.theme)&&tu(e);var i,l=e.params,u=l.browserHistory,c=l.browserHistoryOnLoad,p=l.browserHistoryAnimateOnLoad,d=l.browserHistoryInitialMatch;if(e.history.length>1){var h=d?o:e.history[0];(i=e.findMatchingRoute(h))||(i=cs(e.parseRouteUrl(h),{route:{url:h,path:h.split("?")[0]}}))}else(i=e.findMatchingRoute(o))||(i=cs(e.parseRouteUrl(o),{route:{url:o,path:o.split("?")[0]}}));if(e.params.stackPages&&e.$el.children(".page").each((function(t){var n=gl(t);e.initialPages.push(n[0]),e.dynamicNavbar&&n.children(".navbar").length>0&&e.initialNavbars.push(n.children(".navbar")[0])})),0===e.$el.children(".page:not(.stacked)").length&&o&&e.params.loadInitialPage)e.navigate(o,{initial:!0,reloadCurrent:!0,browserHistory:!1,animate:!1,once:{modalOpen:function(){s&&((e.params.preloadPreviousPage||e.params[t.theme+"SwipeBack"])&&e.history.length>1&&e.back({preload:!0}))},pageAfterIn:function(){s&&((e.params.preloadPreviousPage||e.params[t.theme+"SwipeBack"])&&e.history.length>1&&e.back({preload:!0}))}}});else if(e.$el.children(".page:not(.stacked)").length){var f;if(e.currentRoute=i,e.$el.children(".page:not(.stacked)").each((function(r){var o,s=gl(r);e.setPagePosition(s,"current"),e.dynamicNavbar&&((o=s.children(".navbar")).length>0?(e.$navbarsEl.parents(a).length||e.$el.prepend(e.$navbarsEl),e.setNavbarPosition(o,"current"),e.$navbarsEl.append(o),o.children(".title-large").length&&o.addClass("navbar-large"),s.children(".navbar").remove()):(e.$navbarsEl.addClass("navbar-hidden"),o.children(".title-large").length&&e.$navbarsEl.addClass("navbar-hidden navbar-large-hidden"))),e.currentRoute&&e.currentRoute.route&&(!0===e.currentRoute.route.master||"function"==typeof e.currentRoute.route.master&&e.currentRoute.route.master(t,e))&&e.params.masterDetailBreakpoint>0&&(s.addClass("page-master"),s.trigger("page:role",{role:"master"}),o&&o.length&&o.addClass("navbar-master"),n.checkMasterDetailBreakpoint());var i={route:e.currentRoute};e.currentRoute&&e.currentRoute.route&&e.currentRoute.route.options&&cs(i,e.currentRoute.route.options),e.currentPageEl=s[0],e.dynamicNavbar&&o.length&&(e.currentNavbarEl=o[0]),e.removeThemeElements(s),e.dynamicNavbar&&o.length&&e.removeThemeElements(o),i.route.route.tab&&(f=!0,e.tabLoad(i.route.route.tab,cs({},i))),e.pageCallback("init",s,o,"current",void 0,i),e.pageCallback("beforeIn",s,o,"current",void 0,i),e.pageCallback("afterIn",s,o,"current",void 0,i)})),s)if(d)(e.params.preloadPreviousPage||e.params[t.theme+"SwipeBack"])&&e.history.length>1&&e.back({preload:!0});else e.navigate(o,{initial:!0,browserHistory:!1,history:!1,animate:p,once:{pageAfterIn:function(){(e.params.preloadPreviousPage||e.params[t.theme+"SwipeBack"])&&e.history.length>2&&e.back({preload:!0})}}});s||f||(e.history.push(o),e.saveHistory())}!(o&&u&&c)||eu.state&&eu.state[n.id]||eu.initViewState(n.id,{url:o}),e.emit("local::init routerInit",e)},r.destroy=function(){var e=this;e.emit("local::destroy routerDestroy",e),Object.keys(e).forEach((function(t){e[t]=null,delete e[t]})),e=null},a}(Ts);fu.prototype.navigate=function(e,t){void 0===t&&(t={});var n,a,r,o,s,i,l,u=this;if(u.swipeBackActive)return u;if("string"==typeof e?n=e:(n=e.url,a=e.route,r=e.name,o=e.path,s=e.query,i=e.params),r||o)return(n=u.generateUrl({path:o,name:r,params:i,query:s}))?u.navigate(n,t):u;var c=u.app;if(ou(u,"navigate"),"#"===n||""===n)return u;var p=n.replace("./","");if("/"!==p[0]&&0!==p.indexOf("#")){var d=u.currentRoute.parentPath||u.currentRoute.path;p=((d?d+"/":"/")+p).replace("///","/").replace("//","/")}if(!(l=a?cs(u.parseRouteUrl(p),{route:cs({},a)}):u.findMatchingRoute(p)))return u;if(l.route&&l.route.viewName){var h=l.route.viewName,f=c.views[h];if(!f)throw new Error('Framework7: There is no View with "'+h+'" name that was specified in this route');if(f!==u.view)return f.router.navigate(e,t)}if(l.route.redirect)return nu.call(u,"forward",l,t);var m={};if(l.route.options?cs(m,l.route.options,t):cs(m,t),m.openIn&&(!u.params.ignoreOpenIn||u.params.ignoreOpenIn&&u.history.length>0))return function(e,t,n){var a={url:t,route:{path:t,options:iu({},n,{openIn:void 0})}},r=iu({},n);if("popup"===n.openIn&&(r.content='<div class="popup popup-router-open-in" data-url="'+t+'"><div class="view view-init" data-links-view="'+e.view.selector+'" data-url="'+t+'" data-ignore-open-in="true"></div></div>',a.route.popup=r),"loginScreen"===n.openIn&&(r.content='<div class="login-screen login-screen-router-open-in" data-url="'+t+'"><div class="view view-init" data-links-view="'+e.view.selector+'" data-url="'+t+'" data-ignore-open-in="true"></div></div>',a.route.loginScreen=r),"sheet"===n.openIn&&(r.content='<div class="sheet-modal sheet-modal-router-open-in" data-url="'+t+'"><div class="sheet-modal-inner"><div class="view view-init" data-links-view="'+e.view.selector+'" data-url="'+t+'" data-ignore-open-in="true"></div></div></div>',a.route.sheet=r),"popover"===n.openIn&&(r.targetEl=n.clickedEl||n.targetEl,r.content='<div class="popover popover-router-open-in" data-url="'+t+'"><div class="popover-inner"><div class="view view-init" data-links-view="'+e.view.selector+'" data-url="'+t+'" data-ignore-open-in="true"></div></div></div>',a.route.popover=r),n.openIn.indexOf("panel")>=0){var o=n.openIn.split(":"),s=o[1]||"left",i=o[2]||"cover";r.targetEl=n.clickedEl||n.targetEl,r.content='<div class="panel panel-router-open-in panel-'+s+" panel-"+i+'" data-url="'+t+'"><div class="view view-init" data-links-view="'+e.view.selector+'" data-url="'+t+'" data-ignore-open-in="true"></div></div>',a.route.panel=r}return e.navigate(a)}(u,p,m);function g(){var e=!1;function t(e,t){u.allowPageChange=!1;var n=!1;"popup popover sheet loginScreen actions customModal panel".split(" ").forEach((function(a){if(e[a]){n=!0;var r=cs({},l,{route:e});u.allowPageChange=!0,u.modalLoad(a,r,cs(m,t),"forward")}})),n||uu(u,e,cs(m,t),!0)}function n(){u.allowPageChange=!0}"popup popover sheet loginScreen actions customModal panel".split(" ").forEach((function(t){l.route[t]&&!e&&(e=!0,u.modalLoad(t,l,m,"forward"))})),l.route.keepAlive&&l.route.keepAliveData&&(uu(u,{el:l.route.keepAliveData.pageEl},m,!1),e=!0),"url content component pageName el componentUrl".split(" ").forEach((function(t){var n;l.route[t]&&!e&&(e=!0,uu(u,((n={})[t]=l.route[t],n),m,!1))})),e||(l.route.async&&(u.allowPageChange=!1,l.route.async.call(u,{router:u,to:m.route,from:u.currentRoute,resolve:t,reject:n,direction:"forward",app:c})),l.route.asyncComponent&&su(u,l.route.asyncComponent,t,n))}function v(){u.allowPageChange=!0}if(m.route=l,u.params.masterDetailBreakpoint>0&&l.route.masterRoute){var b=!0,y=!1;if(u.currentRoute&&u.currentRoute.route&&(!(!0===u.currentRoute.route.master||"function"==typeof u.currentRoute.route.master&&u.currentRoute.route.master(c,u))||u.currentRoute.route!==l.route.masterRoute&&u.currentRoute.route.path!==l.route.masterRoute.path||(b=!1),!u.currentRoute.route.masterRoute||u.currentRoute.route.masterRoute!==l.route.masterRoute&&u.currentRoute.route.masterRoute.path!==l.route.masterRoute.path||(b=!1,y=!0)),b||y&&t.reloadAll)return u.navigate({path:l.route.masterRoute.path,params:l.params||{}},{animate:!1,reloadAll:t.reloadAll,reloadCurrent:t.reloadCurrent,reloadPrevious:t.reloadPrevious,browserHistory:!t.initial,history:!t.initial,once:{pageAfterIn:function(){u.navigate(e,cs({},t,{animate:!1,reloadAll:!1,reloadCurrent:!1,reloadPrevious:!1,history:!t.initial,browserHistory:!t.initial}))}}}),u}return ru.call(u,l,u.currentRoute,(function(){l.route.modules?c.loadModules(Array.isArray(l.route.modules)?l.route.modules:[l.route.modules]).then((function(){g()})).catch((function(){v()})):g()}),(function(){v()}),"forward"),u},fu.prototype.refreshPage=function(){var e=this;return ou(e,"refreshPage"),e.navigate(e.currentRoute.url,{ignoreCache:!0,reloadCurrent:!0})},fu.prototype.tabLoad=function(e,t){void 0===t&&(t={});var n,a,r=this,o=cs({animate:r.params.animate,browserHistory:!0,history:!0,parentPageEl:null,preload:!1,on:{}},t);o.route&&(o.preload||o.route===r.currentRoute||(a=r.previousRoute,r.currentRoute=o.route),o.preload?(n=o.route,a=r.currentRoute):(n=r.currentRoute,a||(a=r.previousRoute)),r.params.browserHistory&&o.browserHistory&&!o.reloadPrevious&&eu.replace(r.view.id,{url:o.route.url},(r.params.browserHistoryRoot||"")+r.params.browserHistorySeparator+o.route.url),o.history&&(r.history[Math.max(r.history.length-1,0)]=o.route.url,r.saveHistory()));var s,i=gl(o.parentPageEl||r.currentPageEl);s=i.length&&i.find("#"+e.id).length?i.find("#"+e.id).eq(0):r.view.selector?r.view.selector+" #"+e.id:"#"+e.id;var l,u=r.app.tab.show({tabEl:s,animate:o.animate,tabRoute:o.route}),c=u.$newTabEl,p=u.$oldTabEl,d=u.animated,h=u.onTabsChanged;if(c&&c.parents(".page").length>0&&o.route){var f=c.parents(".page")[0].f7Page;f&&o.route&&(f.route=o.route)}if(c[0].f7RouterTabLoaded)return p&&p.length?(d?h((function(){r.emit("routeChanged",r.currentRoute,r.previousRoute,r)})):r.emit("routeChanged",r.currentRoute,r.previousRoute,r),r):r;function m(t,n){var a=t.url,o=t.content,s=t.el,i=t.component,l=t.componentUrl;function u(t){r.allowPageChange=!0,t&&("string"==typeof t?c.html(t):(c.html(""),t.f7Component?t.f7Component.mount((function(e){c.append(e)})):c.append(t)),c[0].f7RouterTabLoaded=!0,function(t){r.removeThemeElements(c);var n=c;"string"!=typeof t&&(n=gl(t)),n.trigger("tab:init tab:mounted",e),r.emit("tabInit tabMounted",c[0],e),p&&p.length&&(d?h((function(){r.emit("routeChanged",r.currentRoute,r.previousRoute,r),r.params.unloadTabContent&&r.tabRemove(p,c,e)})):(r.emit("routeChanged",r.currentRoute,r.previousRoute,r),r.params.unloadTabContent&&r.tabRemove(p,c,e)))}(t))}if(o)u(o);else if(s)u(s);else if(i||l)try{r.tabComponentLoader({tabEl:c[0],component:i,componentUrl:l,options:n,resolve:u,reject:function(){return r.allowPageChange=!0,r}})}catch(e){throw r.allowPageChange=!0,e}else a&&(r.xhrAbortController&&(r.xhrAbortController.abort(),r.xhrAbortController=!1),r.xhrRequest(a,n).then((function(e){u(e)})).catch((function(){r.allowPageChange=!0})))}function g(e,t){m(e,cs(o,t))}function v(){r.allowPageChange=!0}return"url content component el componentUrl".split(" ").forEach((function(t){var n;e[t]&&(l=!0,m(((n={})[t]=e[t],n),o))})),e.async?e.async.call(r,{router:r,to:n,from:a,resolve:g,reject:v,app:r.app}):e.asyncComponent?su(r,e.asyncComponent,g,v):l||(r.allowPageChange=!0),r},fu.prototype.tabRemove=function(e,t,n){var a;e[0]&&(e[0].f7RouterTabLoaded=!1,delete e[0].f7RouterTabLoaded),e.children().each((function(e){e.f7Component&&(a=!0,gl(e).trigger("tab:beforeremove",n),e.f7Component.destroy())})),a||e.trigger("tab:beforeremove",n),this.emit("tabBeforeRemove",e[0],t[0],n),this.removeTabContent(e[0],n)},fu.prototype.modalLoad=function(e,t,n,a){void 0===n&&(n={});var r,o=this,s=o.app,i="panel"===e,l=i?"panel":"modal",u=cs({animate:o.params.animate,browserHistory:!0,history:!0,on:{},once:{}},n),c=cs({},t.route[e]),p=t.route,d=function(e,t){var n,a=u.on,r=u.once;"open"===t&&(n=a.modalOpen||r.modalOpen||a.panelOpen||r.panelOpen),"close"===t&&(n=a.modalClose||r.modalClose||a.panelClose||r.panelClose),"closed"===t&&(n=a.modalClosed||r.modalClosed||a.panelClosed||r.panelClosed),n&&n(e)};function h(){var n=s[e].create(c);p.modalInstance=n;var a=n.el;function r(){n.close()}n.on(l+"Open",(function(){a||(o.removeThemeElements(n.el),n.$el.trigger(e.toLowerCase()+":init "+e.toLowerCase()+":mounted",t,n),o.emit((i?"":"modalInit")+" "+e+"Init "+e+"Mounted",n.el,t,n)),o.once("swipeBackMove",r),d(n,"open")})),n.on(l+"Close",(function(){o.off("swipeBackMove",r),n.closeByRouter||o.back(),d(n,"close")})),n.on(l+"Closed",(function(){n.$el.trigger(e.toLowerCase()+":beforeremove",t,n),n.emit((i?"":"modalBeforeRemove ")+e+"BeforeRemove",n.el,t,n);var a=n.el.f7Component;d(n,"closed"),a&&a.destroy(),ns((function(){(a||c.component||c.asyncComponent)&&o.removeModal(n.el),n.destroy(),delete n.route,delete p.modalInstance}))})),u.route&&(o.params.browserHistory&&u.browserHistory&&eu.push(o.view.id,{url:u.route.url,modal:e},(o.params.browserHistoryRoot||"")+o.params.browserHistorySeparator+u.route.url),u.route!==o.currentRoute&&(n.route=cs(u.route,{modal:n}),o.currentRoute=n.route),u.history&&!u.reloadCurrent&&(o.history.push(u.route.url),o.saveHistory())),a&&(o.removeThemeElements(n.el),n.$el.trigger(e.toLowerCase()+":init "+e.toLowerCase()+":mounted",t,n),o.emit(l+"Init "+e+"Init "+e+"Mounted",n.el,t,n)),n.open(!1===u.animate||!0===u.animate?u.animate:void 0)}function f(e,t){var n=e.url,a=e.content,r=e.component,i=e.componentUrl;function l(e){e&&("string"==typeof e?c.content=e:e.f7Component?e.f7Component.mount((function(e){c.el=e,s.$el.append(e)})):c.el=e,h())}if(a)l(a);else if(r||i)try{o.modalComponentLoader({rootEl:s.el,component:r,componentUrl:i,options:t,resolve:l,reject:function(){return o.allowPageChange=!0,o}})}catch(e){throw o.allowPageChange=!0,e}else n?(o.xhrAbortController&&(o.xhrAbortController.abort(),o.xhrAbortController=!1),o.xhrRequest(n,t).then((function(e){c.content=e,h()})).catch((function(){o.allowPageChange=!0}))):h()}function m(e,t){f(e,cs(u,t))}function g(){o.allowPageChange=!0}return"url content component el componentUrl template".split(" ").forEach((function(e){var t;c[e]&&!r&&(r=!0,f(((t={})[e]=c[e],t),u))})),r||"actions"!==e||h(),c.async&&c.async.call(o,{router:o,to:u.route,from:o.currentRoute,resolve:m,reject:g,direction:a,app:s}),c.asyncComponent&&su(o,c.asyncComponent,m,g),o},fu.prototype.modalRemove=function(e){cs(e,{closeByRouter:!0}),e.close()},fu.prototype.back=function(){var e,t,n,a=this,r=xs();if(a.swipeBackActive)return a;"object"==typeof(arguments.length<=0?void 0:arguments[0])?t=(arguments.length<=0?void 0:arguments[0])||{}:(e=arguments.length<=0?void 0:arguments[0],t=(arguments.length<=1?void 0:arguments[1])||{});var o=t,s=o.name,i=o.params,l=o.query;if(s)return(e=a.generateUrl({name:s,params:i,query:l}))?a.back(e,cs({},t,{name:null,params:null,query:null})):a;var u=a.app;ou(a,"back");var c,p=a.currentRoute.modal;if(p||"popup popover sheet loginScreen actions customModal panel".split(" ").forEach((function(e){a.currentRoute.route[e]&&(p=!0,c=e)})),p&&!t.preload){var d,h=a.currentRoute.modal||a.currentRoute.route.modalInstance||u[c].get(),f=a.history[a.history.length-2];if(h&&h.$el){var m=h.$el.prevAll(".modal-in");if(m.length&&m[0].f7Modal){var g=m[0];a.$el.parents(g).length||(d=g.f7Modal.route)}}if(d||(d=a.findMatchingRoute(f)),!d&&f&&(d={url:f,path:f.split("?")[0],query:os(f),route:{path:f.split("?")[0],url:f}}),!(e&&0!==e.replace(/[# ]/g,"").trim().length||d&&h))return a;var v=t.force&&d&&e;if(d&&h){var b=r.ie||r.edge||r.firefox&&!r.ios,y=a.params.browserHistory&&!1!==t.browserHistory,w=a.currentRoute&&a.currentRoute.route&&a.currentRoute.route.options&&!1===a.currentRoute.route.options.browserHistory;!y||b||w||eu.back(),a.currentRoute=d,a.history.pop(),a.saveHistory(),y&&b&&!w&&eu.back(),a.modalRemove(h),v&&a.navigate(e,{reloadCurrent:!0})}else h&&(a.modalRemove(h),e&&a.navigate(e,{reloadCurrent:!0}));return a}var x,k=a.$el.children(".page-current").prevAll(".page-previous:not(.page-master)").eq(0);if(a.params.masterDetailBreakpoint>0){var C=[];a.$el.children(".page").each((function(e){C.push(e.className)}));var E=a.$el.children(".page-current").prevAll(".page-master").eq(0);if(E.length){var S=a.history[a.history.length-2],$=a.findMatchingRoute(S);$&&E[0].f7Page&&$.route===E[0].f7Page.route.route&&(k=E,t.preload||(x=u.width>=a.params.masterDetailBreakpoint))}}if(!t.force&&k.length&&!x){if(a.params.browserHistory&&k[0].f7Page&&a.history[a.history.length-2]!==k[0].f7Page.route.url)return a.back(a.history[a.history.length-2],cs(t,{force:!0})),a;var T=k[0].f7Page.route;return ru.call(a,T,a.currentRoute,(function(){pu(a,{el:k},cs(t,{route:T}))}),(function(){}),"backward"),a}if("#"===e&&(e=void 0),e&&"/"!==e[0]&&0!==e.indexOf("#")&&(e=((a.path||"/")+e).replace("//","/")),!e&&a.history.length>1&&(e=a.history[a.history.length-2]),x&&!t.force&&a.history[a.history.length-3])return a.back(a.history[a.history.length-3],cs({},t||{},{force:!0,animate:!1}));if(x&&!t.force)return a;if((n=a.findMatchingRoute(e))||e&&(n={url:e,path:e.split("?")[0],query:os(e),route:{path:e.split("?")[0],url:e}}),!n)return a;if(n.route.redirect)return nu.call(a,"backward",n,t);var I,N={};if(n.route.options?cs(N,n.route.options,t):cs(N,t),N.route=n,N.force&&a.params.stackPages&&(a.$el.children(".page-previous.stacked").each((function(e){e.f7Page&&e.f7Page.route&&e.f7Page.route.url===n.url&&(I=!0,pu(a,{el:e},N))})),I))return a;function O(){var e=!1;function t(e,t){a.allowPageChange=!1,pu(a,e,cs(N,t),!0)}function r(){a.allowPageChange=!0}n.route.keepAlive&&n.route.keepAliveData&&(pu(a,{el:n.route.keepAliveData.pageEl},N),e=!0),"url content component pageName el componentUrl".split(" ").forEach((function(t){var r;n.route[t]&&!e&&(e=!0,pu(a,((r={})[t]=n.route[t],r),N))})),e||(n.route.async&&(a.allowPageChange=!1,n.route.async.call(a,{router:a,to:n,from:a.currentRoute,resolve:t,reject:r,direction:"backward",app:u})),n.route.asyncComponent&&su(a,n.route.asyncComponent,t,r))}function R(){a.allowPageChange=!0}return N.preload?O():ru.call(a,n,a.currentRoute,(function(){n.route.modules?u.loadModules(Array.isArray(n.route.modules)?n.route.modules:[n.route.modules]).then((function(){O()})).catch((function(){R()})):O()}),(function(){R()}),"backward"),a},fu.prototype.clearPreviousHistory=function(){var e=this;ou(e,"clearPreviousHistory");var t=e.history[e.history.length-1];!function(e){ou(e,"clearPreviousPages");var t=e.app,n=e.dynamicNavbar;e.$el.children(".page").filter((function(t){return!(!e.currentRoute||!e.currentRoute.modal&&!e.currentRoute.panel)||t!==e.currentPageEl})).each((function(a){var r=gl(a),o=gl(t.navbar.getElByPage(r));e.params.stackPages&&e.initialPages.indexOf(r[0])>=0?(r.addClass("stacked"),n&&o.addClass("stacked")):(e.pageCallback("beforeRemove",r,o,"previous",void 0,{}),e.removePage(r),n&&o.length&&e.removeNavbar(o))}))}(e),e.history=[t],e.view.history=[t],e.saveHistory()};var mu=fu,gu={name:"router",static:{Router:mu},instance:{cache:{xhr:[],templates:[],components:[]}},create:function(){var e=this;e.app?e.params.router&&(e.router=new mu(e.app,e)):e.router=new mu(e)}};var vu=function(e){var t=e.app,n=ws();if(!e.resizableInitialized){cs(e,{resizable:!0,resizableWidth:null,resizableInitialized:!0});var a=gl("html"),r=e.$el;if(r){var o,s,i,l,u,c,p,d={};(o=e.$el.children(".view-resize-handler")).length||(e.$el.append('<div class="view-resize-handler"></div>'),o=e.$el.children(".view-resize-handler")),e.$resizeHandlerEl=o,r.addClass("view-resizable");var h=!!n.passiveListener&&{passive:!0};e.$el.on(t.touchEvents.start,".view-resize-handler",m,h),t.on("touchmove:active",g),t.on("touchend:passive",v),t.on("resize",b),e.on("beforeOpen",b),e.once("viewDestroy",(function(){r.removeClass("view-resizable"),e.$resizeHandlerEl.remove(),e.$el.off(t.touchEvents.start,".view-resize-handler",m,h),t.off("touchmove:active",g),t.off("touchend:passive",v),t.off("resize",b),e.off("beforeOpen",b)}))}}function f(e){if(!e)return null;if(e.indexOf("%")>=0||e.indexOf("vw")>=0)return parseInt(e,10)/100*t.width;var n=parseInt(e,10);return Number.isNaN(n)?null:n}function m(t){if(e.resizable&&r.hasClass("view-resizable")&&r.hasClass("view-master-detail")){d.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,d.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,i=!1,s=!0;var n=r.children(".page-master");c=f(n.css("min-width")),p=f(n.css("max-width"))}}function g(n){if(s){n.f7PreventSwipePanel=!0;var h="touchmove"===n.type?n.targetTouches[0].pageX:n.pageX;i||(u=o[0].offsetLeft+o[0].offsetWidth,r.addClass("view-resizing"),a.css("cursor","col-resize")),i=!0,n.preventDefault(),l=h-d.x;var f=u+l;c&&!Number.isNaN(c)&&(f=Math.max(f,c)),p&&!Number.isNaN(p)&&(f=Math.min(f,p)),f=Math.min(Math.max(f,0),t.width),e.resizableWidth=f,a[0].style.setProperty("--f7-page-master-width",f+"px"),r.trigger("view:resize",f),e.emit("local::resize viewResize",e,f)}}function v(){if(gl("html").css("cursor",""),!s||!i)return s=!1,void(i=!1);s=!1,i=!1,a[0].style.setProperty("--f7-page-master-width",e.resizableWidth+"px"),r.removeClass("view-resizing")}function b(){e.resizableWidth&&(c=f(o.css("min-width")),p=f(o.css("max-width")),c&&!Number.isNaN(c)&&e.resizableWidth<c&&(e.resizableWidth=Math.max(e.resizableWidth,c)),p&&!Number.isNaN(p)&&e.resizableWidth>p&&(e.resizableWidth=Math.min(e.resizableWidth,p)),e.resizableWidth=Math.min(Math.max(e.resizableWidth,0),t.width),a[0].style.setProperty("--f7-page-master-width",e.resizableWidth+"px"))}};function bu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yu(e,t){return yu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},yu(e,t)}var wu=function(e){var t,n;function a(t,n,a){var r;void 0===a&&(a={});var o,s=bu(r=e.call(this,a,[t])||this);if(!s.params.routerId&&!gl(n).length){var i="Framework7: can't create a View instance because ";throw new Error(i+="string"==typeof n?'the selector "'+n+"\" didn't match any element":"el must be an HTMLElement or Dom7 object")}return s.params=cs({el:n},{routes:[],routesAdd:[]},t.params.view,a),s.params.routes.length>0?s.routes=s.params.routes:s.routes=[].concat(t.routes,s.params.routesAdd),cs(!1,s,{app:t,name:s.params.name,main:s.params.main,history:[],scrollHistory:{}}),s.useModules(),t.views.push(s),s.main&&(t.views.main=s),s.name&&(t.views[s.name]=s),s.index=t.views.indexOf(s),o=s.name?"view_"+s.name:s.main?"view_main":"view_"+s.index,s.id=o,s.params.init?(t.initialized?s.init():t.on("init",(function(){s.init()})),s||bu(r)):s||bu(r)}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,yu(t,n);var r=a.prototype;return r.destroy=function(){var e=this,t=e.app;e.$el.trigger("view:beforedestroy"),e.emit("local::beforeDestroy viewBeforeDestroy",e),t.off("resize",e.checkMasterDetailBreakpoint),e.main?(t.views.main=null,delete t.views.main):e.name&&(t.views[e.name]=null,delete t.views[e.name]),e.$el[0].f7View=null,delete e.$el[0].f7View,t.views.splice(t.views.indexOf(e),1),e.params.router&&e.router&&e.router.destroy(),e.emit("local::destroy viewDestroy",e),Object.keys(e).forEach((function(t){e[t]=null,delete e[t]})),e=null},r.checkMasterDetailBreakpoint=function(e){var t=this,n=t.app,a=t.$el.hasClass("view-master-detail"),r=n.width>=t.params.masterDetailBreakpoint&&t.$el.children(".page-master").length;void 0===e&&r||!0===e?(t.$el.addClass("view-master-detail"),a||(t.emit("local::masterDetailBreakpoint viewMasterDetailBreakpoint",t),t.$el.trigger("view:masterDetailBreakpoint"))):(t.$el.removeClass("view-master-detail"),a&&(t.emit("local::masterDetailBreakpoint viewMasterDetailBreakpoint",t),t.$el.trigger("view:masterDetailBreakpoint")))},r.initMasterDetail=function(){var e=this,t=e.app;e.checkMasterDetailBreakpoint=e.checkMasterDetailBreakpoint.bind(e),e.checkMasterDetailBreakpoint(),e.params.masterDetailResizable&&vu(e),t.on("resize",e.checkMasterDetailBreakpoint)},r.mount=function(e){var t,n,a=this,r=a.app,o=a.params.el||e,s=gl(o);t="string"==typeof o?o:(s.attr("id")?"#"+s.attr("id"):"")+(s.attr("class")?"."+s.attr("class").replace(/ /g,".").replace(".active",""):""),"ios"===r.theme&&a.params.iosDynamicNavbar&&0===(n=s.children(".navbars").eq(0)).length&&(n=gl('<div class="navbars"></div>')),cs(a,{$el:s,el:s[0],main:a.main||s.hasClass("view-main"),$navbarsEl:n,navbarsEl:n?n[0]:void 0,selector:t}),a.main&&(r.views.main=a),s&&s[0]&&(s[0].f7View=a),a.emit("local::mount viewMount",a)},r.init=function(e){var t=this;t.mount(e),t.params.router&&(t.params.masterDetailBreakpoint>0&&t.initMasterDetail(),t.router.init(),t.$el.trigger("view:init"),t.emit("local::init viewInit",t))},a}(Ts);wu.use(gu);var xu=wu;var ku={name:"clicks",params:{clicks:{externalLinks:".external"}},on:{init:function(){!function(e){e.on("click",(function(t){var n=Ho(),a=gl(t.target),r=a.closest("a"),o=r.length>0,s=o&&r.attr("href");if(o&&(r.is(e.params.clicks.externalLinks)||s&&s.indexOf("javascript:")>=0)){var i=r.attr("target");s&&n.cordova&&n.cordova.InAppBrowser&&("_system"===i||"_blank"===i)?(t.preventDefault(),n.cordova.InAppBrowser.open(s,i)):s&&n.Capacitor&&n.Capacitor.Plugins&&n.Capacitor.Plugins.Browser&&("_system"===i||"_blank"===i)&&(t.preventDefault(),n.Capacitor.Plugins.Browser.open({url:s}))}else{Object.keys(e.modules).forEach((function(n){var r=e.modules[n].clicks;r&&(t.preventF7Router||Object.keys(r).forEach((function(n){var o=a.closest(n).eq(0);o.length>0&&r[n].call(e,o,o.dataset(),t)})))}));var l={};if(o&&(t.preventDefault(),l=r.dataset()),l.clickedEl=r[0],!t.preventF7Router&&!r.hasClass("prevent-router")&&!r.hasClass("router-prevent")&&(s&&s.length>0&&"#"!==s[0]||r.hasClass("back"))){var u;if(l.view&&"current"===l.view?u=e.views.current:l.view?u=gl(l.view)[0].f7View:(u=a.parents(".view")[0]&&a.parents(".view")[0].f7View,!r.hasClass("back")&&u&&u.params.linksView&&("string"==typeof u.params.linksView?u=gl(u.params.linksView)[0].f7View:u.params.linksView instanceof xu&&(u=u.params.linksView))),u||e.views.main&&(u=e.views.main),!u||!u.router)return;r[0].f7RouteProps&&(l.props=r[0].f7RouteProps),r.hasClass("back")?u.router.back(s,l):u.router.navigate(s,l)}}}))}(this)}}},Cu={name:"history",static:{history:eu},on:{init:function(){eu.init(this)}}},Eu={registrations:[],register:function(e,t){var n=this;return"serviceWorker"in Ho().navigator&&n.serviceWorker.container?new Promise((function(a,r){n.serviceWorker.container.register(e,t?{scope:t}:{}).then((function(e){Eu.registrations.push(e),n.emit("serviceWorkerRegisterSuccess",e),a(e)})).catch((function(e){n.emit("serviceWorkerRegisterError",e),r(e)}))})):new Promise((function(e,t){t(new Error("Service worker is not supported"))}))},unregister:function(e){var t,n=this;return"serviceWorker"in Ho().navigator&&n.serviceWorker.container?(t=e?Array.isArray(e)?e:[e]:Eu.registrations,Promise.all(t.map((function(e){return new Promise((function(t,a){e.unregister().then((function(){Eu.registrations.indexOf(e)>=0&&Eu.registrations.splice(Eu.registrations.indexOf(e),1),n.emit("serviceWorkerUnregisterSuccess",e),t()})).catch((function(t){n.emit("serviceWorkerUnregisterError",e,t),a(t)}))}))})))):new Promise((function(e,t){t(new Error("Service worker is not supported"))}))}},Su={name:"sw",params:{serviceWorker:{path:void 0,scope:void 0}},create:function(){var e=this,t=Ho();cs(e,{serviceWorker:{container:"serviceWorker"in t.navigator?t.navigator.serviceWorker:void 0,registrations:Eu.registrations,register:Eu.register.bind(e),unregister:Eu.unregister.bind(e)}})},on:{init:function(){var e=Ho();if("serviceWorker"in e.navigator){var t=this;if(!(t.device.cordova||e.Capacitor&&e.Capacitor.isNative)&&t.serviceWorker.container){var n=t.params.serviceWorker.path,a=t.params.serviceWorker.scope;if(n&&(!Array.isArray(n)||n.length))(Array.isArray(n)?n:[n]).forEach((function(e){t.serviceWorker.register(e,a)}))}}}}};function $u(){return $u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},$u.apply(this,arguments)}var Tu=function(e){void 0===e&&(e={});var t={__store:!0},n=$u({},e.state||{}),a=$u({},e.actions||{}),r=$u({},e.getters||{}),o=cs({},n),s=[],i={},l={};Object.keys(r).forEach((function(e){i[e]=[],l[e]=[]}));var u=function(e){return r[e]({state:t.state})},c=function(e,t){l[e]||(l[e]=[]),l[e].push(t)};t.__removeCallback=function(e){!function(e){Object.keys(l).forEach((function(t){var n=l[t];n.indexOf(e)>=0&&n.splice(n.indexOf(e),1)}))}(e)};var p=function(e,t){if(void 0===t&&(t=!0),"constructor"!==e){s=[];var n=u(e);!function(e,t){i[e]||(i[e]=[]),t.forEach((function(t){i[e].indexOf(t)<0&&i[e].push(t)}))}(e,s);var a={value:n,onUpdated:function(t){c(e,t)}};if(!t)return a;var r=function(e){a.value=e};return a.__callback=r,c(e,r),a}};return t.state=new Proxy(o,{set:function(e,t,n){var a;return e[t]=n,a=t,Object.keys(i).filter((function(e){return i[e].indexOf(a)>=0})).forEach((function(e){l[e]&&l[e].length&&l[e].forEach((function(t){t(u(e))}))})),!0},get:function(e,t){return s.push(t),e[t]}}),t.getters=new Proxy(r,{set:function(){return!1},get:function(e,t){if(e[t])return p(t,!0)}}),t._gettersPlain=new Proxy(r,{set:function(){return!1},get:function(e,t){if(e[t])return p(t,!1)}}),t.dispatch=function(e,n){return new Promise((function(r,o){if(!a[e])throw o(),new Error('Framework7: Store action "'+e+'" is not found');r(a[e]({state:t.state,dispatch:t.dispatch},n))}))},t},Iu={name:"store",static:{createStore:Tu},proto:{createStore:Tu}},Nu=function(){var e=Ho();return e.Capacitor&&e.Capacitor.isNative&&e.Capacitor.Plugins&&e.Capacitor.Plugins.StatusBar},Ou={hide:function(){var e=Ho();xs().cordova&&e.StatusBar&&e.StatusBar.hide(),Nu()&&e.Capacitor.Plugins.StatusBar.hide()},show:function(){var e=Ho();xs().cordova&&e.StatusBar&&e.StatusBar.show(),Nu()&&e.Capacitor.Plugins.StatusBar.show()},onClick:function(){var e;(e=gl(".popup.modal-in").length>0?gl(".popup.modal-in").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"):gl(".panel.panel-in").length>0?gl(".panel.panel-in").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"):gl(".views > .view.tab-active").length>0?gl(".views > .view.tab-active").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"):gl(".views").length>0?gl(".views").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"):this.$el.children(".view").find(".page:not(.page-previous):not(.page-next):not(.cached)").find(".page-content"))&&e.length>0&&(e.hasClass("tab")&&(e=e.parent(".tabs").children(".page-content.tab-active")),e.length>0&&e.scrollTop(0,300))},setTextColor:function(e){var t=Ho();xs().cordova&&t.StatusBar&&("white"===e?t.StatusBar.styleLightContent():t.StatusBar.styleDefault()),Nu()&&("white"===e?t.Capacitor.Plugins.StatusBar.setStyle({style:"DARK"}):t.Capacitor.Plugins.StatusBar.setStyle({style:"LIGHT"}))},setBackgroundColor:function(e){var t=Ho();xs().cordova&&t.StatusBar&&t.StatusBar.backgroundColorByHexString(e),Nu()&&t.Capacitor.Plugins.StatusBar.setBackgroundColor({color:e})},isVisible:function(){var e=Ho(),t=xs();return new Promise((function(n){t.cordova&&e.StatusBar&&n(e.StatusBar.isVisible),Nu()&&e.Capacitor.Plugins.StatusBar.getInfo().then((function(e){n(e.visible)})),n(!1)}))},overlaysWebView:function(e){void 0===e&&(e=!0);var t=Ho();xs().cordova&&t.StatusBar&&t.StatusBar.overlaysWebView(e),Nu()&&t.Capacitor.Plugins.StatusBar.setOverlaysWebView({overlay:e})},init:function(){var e=Ho(),t=xs(),n=this.params.statusbar;if(n.enabled){var a=t.cordova&&e.StatusBar,r=Nu();(a||r)&&(n.scrollTopOnClick&&gl(e).on("statusTap",Ou.onClick.bind(this)),t.ios&&(n.iosOverlaysWebView?Ou.overlaysWebView(!0):Ou.overlaysWebView(!1),"white"===n.iosTextColor?Ou.setTextColor("white"):Ou.setTextColor("black")),t.android&&(n.androidOverlaysWebView?Ou.overlaysWebView(!0):Ou.overlaysWebView(!1),"white"===n.androidTextColor?Ou.setTextColor("white"):Ou.setTextColor("black"))),n.iosBackgroundColor&&t.ios&&Ou.setBackgroundColor(n.iosBackgroundColor),n.androidBackgroundColor&&t.android&&Ou.setBackgroundColor(n.androidBackgroundColor)}}},Ru={name:"statusbar",params:{statusbar:{enabled:!0,scrollTopOnClick:!0,iosOverlaysWebView:!0,iosTextColor:"black",iosBackgroundColor:null,androidOverlaysWebView:!1,androidTextColor:"black",androidBackgroundColor:null}},create:function(){bs(this,{statusbar:Ou})},on:{init:function(){Ou.init.call(this)}}};var Au={name:"view",params:{view:{init:!0,name:void 0,main:!1,router:!0,linksView:null,stackPages:!1,xhrCache:!0,xhrCacheIgnore:[],xhrCacheIgnoreGetParameters:!1,xhrCacheDuration:6e5,componentCache:!0,preloadPreviousPage:!0,allowDuplicateUrls:!1,reloadPages:!1,reloadDetail:!1,masterDetailBreakpoint:0,masterDetailResizable:!1,removeElements:!0,removeElementsWithTimeout:!1,removeElementsTimeout:0,restoreScrollTopOnBack:!0,unloadTabContent:!0,passRouteQueryToRequest:!0,passRouteParamsToRequest:!1,loadInitialPage:!0,iosSwipeBack:!0,iosSwipeBackAnimateShadow:!0,iosSwipeBackAnimateOpacity:!0,iosSwipeBackActiveArea:30,iosSwipeBackThreshold:0,mdSwipeBack:!1,mdSwipeBackAnimateShadow:!0,mdSwipeBackAnimateOpacity:!1,mdSwipeBackActiveArea:30,mdSwipeBackThreshold:0,auroraSwipeBack:!1,auroraSwipeBackAnimateShadow:!1,auroraSwipeBackAnimateOpacity:!0,auroraSwipeBackActiveArea:30,auroraSwipeBackThreshold:0,browserHistory:!1,browserHistoryRoot:void 0,browserHistoryAnimate:!0,browserHistoryAnimateOnLoad:!1,browserHistorySeparator:"#!",browserHistoryOnLoad:!0,browserHistoryInitialMatch:!1,browserHistoryStoreHistory:!0,animate:!0,iosDynamicNavbar:!0,iosAnimateNavbarBackIcon:!0,iosPageLoadDelay:0,mdPageLoadDelay:0,auroraPageLoadDelay:0,routesBeforeEnter:null,routesBeforeLeave:null}},static:{View:xu},create:function(){var e=this;cs(e,{views:cs([],{create:function(t,n){return new xu(e,t,n)},get:function(e){var t=gl(e);if(t.length&&t[0].f7View)return t[0].f7View}})}),Object.defineProperty(e.views,"current",{enumerable:!0,configurable:!0,get:function(){return function(e){var t=gl(".popover.modal-in .view"),n=gl(".popup.modal-in .view"),a=gl(".panel.panel-in .view"),r=gl(".views");0===r.length&&(r=e.$el);var o=r.children(".view");if(0===o.length&&(o=r.children(".tabs").children(".view")),o.length>1&&o.hasClass("tab")&&0===(o=r.children(".view.tab-active")).length&&(o=r.children(".tabs").children(".view.tab-active")),t.length>0&&t[0].f7View)return t[0].f7View;if(n.length>0&&n[0].f7View)return n[0].f7View;if(a.length>0&&a[0].f7View)return a[0].f7View;if(o.length>0){if(1===o.length&&o[0].f7View)return o[0].f7View;if(o.length>1)return e.views.main}}(e)}}),e.view=e.views},on:{init:function(){var e=this;gl(".view-init").each((function(t){if(!t.f7View){var n=gl(t).dataset();e.views.create(t,n)}}))},"modalOpen panelOpen":function(e){var t=this;e.$el.find(".view-init").each((function(e){if(!e.f7View){var n=gl(e).dataset();t.views.create(e,n)}}))},"modalBeforeDestroy panelBeforeDestroy":function(e){e&&e.$el&&e.$el.find(".view-init").each((function(e){var t=e.f7View;t&&t.destroy()}))}},vnode:{"view-init":{insert:function(e){var t=e.elm;if(!t.f7View){var n=gl(t).dataset();this.views.create(t,n)}},destroy:function(e){var t=e.elm.f7View;t&&t.destroy()}}}},Mu={size:function(e){var t=this,n=gl(e);if(n.hasClass("navbars"))n=n.children(".navbar").each((function(e){t.navbar.size(e)}));else{var a=n.children(".navbar-inner");if(a.length){var r=a.hasClass("navbar-inner-centered-title")||t.params.navbar[t.theme+"CenterTitle"],o="ios"===t.theme&&!t.params.navbar[t.theme+"CenterTitle"];if((r||o)&&!(n.hasClass("stacked")||n.parents(".stacked").length>0||n.parents(".tab:not(.tab-active)").length>0||n.parents(".popup:not(.modal-in)").length>0)){"ios"!==t.theme&&t.params.navbar[t.theme+"CenterTitle"]&&a.addClass("navbar-inner-centered-title"),"ios"!==t.theme||t.params.navbar.iosCenterTitle||a.addClass("navbar-inner-left-title");var s,i,l,u,c=n.parents(".view").eq(0),p=t.rtl?a.children(".right"):a.children(".left"),d=t.rtl?a.children(".left"):a.children(".right"),h=a.children(".title"),f=a.children(".subnavbar"),m=0===p.length,g=0===d.length,v=m?0:p.outerWidth(!0),b=g?0:d.outerWidth(!0),y=h.outerWidth(!0),w=a.styles(),x=a[0].offsetWidth-parseInt(w.paddingLeft,10)-parseInt(w.paddingRight,10),k=n.hasClass("navbar-previous"),C=a.hasClass("sliding");c.length>0&&c[0].f7View&&(i=(s=c[0].f7View.router)&&s.dynamicNavbar),g&&(l=x-y),m&&(l=0),m||g||(l=(x-b-y+v)/2);var E=(x-y)/2;x-v-b>y?(E<v&&(E=v),E+y>x-b&&(E=x-b-y),u=E-l):u=0;var S=t.rtl?-1:1;if(i&&"ios"===t.theme){if(h.hasClass("sliding")||h.length>0&&C){var $=-(l+u)*S,T=(x-l-u-y)*S;if(k&&s&&s.params.iosAnimateNavbarBackIcon){var I=n.parent().find(".navbar-current").children(".left.sliding").find(".back .icon ~ span");I.length>0&&($+=I[0].offsetLeft)}h[0].f7NavbarLeftOffset=$,h[0].f7NavbarRightOffset=T}if(!m&&(p.hasClass("sliding")||C))if(t.rtl)p[0].f7NavbarLeftOffset=-(x-p[0].offsetWidth)/2*S,p[0].f7NavbarRightOffset=v*S;else if(p[0].f7NavbarLeftOffset=-v,p[0].f7NavbarRightOffset=(x-p[0].offsetWidth)/2,s&&s.params.iosAnimateNavbarBackIcon&&p.find(".back .icon").length>0&&p.find(".back .icon ~ span").length){var N=p[0].f7NavbarLeftOffset,O=p[0].f7NavbarRightOffset;p[0].f7NavbarLeftOffset=0,p[0].f7NavbarRightOffset=0,p.find(".back .icon ~ span")[0].f7NavbarLeftOffset=N,p.find(".back .icon ~ span")[0].f7NavbarRightOffset=O-p.find(".back .icon")[0].offsetWidth}g||!d.hasClass("sliding")&&!C||(t.rtl?(d[0].f7NavbarLeftOffset=-b*S,d[0].f7NavbarRightOffset=(x-d[0].offsetWidth)/2*S):(d[0].f7NavbarLeftOffset=-(x-d[0].offsetWidth)/2,d[0].f7NavbarRightOffset=b)),f.length&&(f.hasClass("sliding")||C)&&(f[0].f7NavbarLeftOffset=t.rtl?f[0].offsetWidth:-f[0].offsetWidth,f[0].f7NavbarRightOffset=-f[0].f7NavbarLeftOffset)}if(r){var R=u;t.rtl&&m&&g&&h.length>0&&(R=-R),h.css({left:R+"px"})}}}}},hide:function(e,t,n,a){void 0===t&&(t=!0),void 0===n&&(n=!1),void 0===a&&(a=!1);var r=this,o=gl(e),s=o.hasClass("navbar")&&o.parent(".navbars").length&&!a;if(s&&(o=o.parents(".navbars")),o.length&&!o.hasClass("navbar-hidden")){var i="navbar-hidden"+(t?" navbar-transitioning":"");(s?o.find(".navbar-current .title-large").length:o.find(".title-large").length)&&(i+=" navbar-large-hidden"),n&&(i+=" navbar-hidden-statusbar"),o.transitionEnd((function(){o.removeClass("navbar-transitioning")})),o.addClass(i),s?o.children(".navbar").each((function(e){gl(e).trigger("navbar:hide"),r.emit("navbarHide",e)})):(o.trigger("navbar:hide"),r.emit("navbarHide",o[0]))}},show:function(e,t,n){void 0===e&&(e=".navbar-hidden"),void 0===t&&(t=!0),void 0===n&&(n=!1);var a=this,r=gl(e),o=r.hasClass("navbar")&&r.parent(".navbars").length&&!n;o&&(r=r.parents(".navbars")),r.length&&r.hasClass("navbar-hidden")&&(t&&(r.addClass("navbar-transitioning"),r.transitionEnd((function(){r.removeClass("navbar-transitioning")}))),r.removeClass("navbar-hidden navbar-large-hidden navbar-hidden-statusbar"),o?r.children(".navbar").each((function(e){gl(e).trigger("navbar:show"),a.emit("navbarShow",e)})):(r.trigger("navbar:show"),a.emit("navbarShow",r[0])))},getElByPage:function(e){var t,n,a;if(e.$navbarEl||e.$el?(a=e,t=e.$el):(t=gl(e)).length>0&&(a=t[0].f7Page),a&&a.$navbarEl&&a.$navbarEl.length>0?n=a.$navbarEl:t&&(n=t.children(".navbar")),n&&(!n||0!==n.length))return n[0]},getPageByEl:function(e){var t,n=gl(e);return n.parents(".page").length?n.parents(".page")[0]:(n.parents(".view").find(".page").each((function(e){e&&e.f7Page&&e.f7Page.navbarEl&&n[0]===e.f7Page.navbarEl&&(t=e)})),t)},collapseLargeTitle:function(e){var t=this,n=gl(e);if(!(n.hasClass("navbars")&&((n=n.find(".navbar")).length>1&&(n=gl(e).find(".navbar-large.navbar-current")),n.length>1||!n.length))){var a=gl(t.navbar.getPageByEl(n));n.addClass("navbar-large-collapsed"),a.eq(0).addClass("page-with-navbar-large-collapsed").trigger("page:navbarlargecollapsed"),t.emit("pageNavbarLargeCollapsed",a[0]),n.trigger("navbar:collapse"),t.emit("navbarCollapse",n[0])}},expandLargeTitle:function(e){var t=this,n=gl(e);if(!(n.hasClass("navbars")&&((n=n.find(".navbar-large")).length>1&&(n=gl(e).find(".navbar-large.navbar-current")),n.length>1||!n.length))){var a=gl(t.navbar.getPageByEl(n));n.removeClass("navbar-large-collapsed"),a.eq(0).removeClass("page-with-navbar-large-collapsed").trigger("page:navbarlargeexpanded"),t.emit("pageNavbarLargeExpanded",a[0]),n.trigger("navbar:expand"),t.emit("navbarExpand",n[0])}},toggleLargeTitle:function(e){var t=gl(e);t.hasClass("navbars")&&((t=t.find(".navbar-large")).length>1&&(t=gl(e).find(".navbar-large.navbar-current")),t.length>1||!t.length)||(t.hasClass("navbar-large-collapsed")?this.navbar.expandLargeTitle(t):this.navbar.collapseLargeTitle(t))},initNavbarOnScroll:function(e,t,n,a,r){var o,s,i,l,u,c,p,d,h,f,m,g,v,b,y=this,w=ws(),x=gl(e),k=gl(t),C=k.find(".title-large"),E=C.length||k.hasClass(".navbar-large"),S=44,$=y.params.navbar.snapPageScrollToLargeTitle,T=y.params.navbar.snapPageScrollToTransparentNavbar;(a||n&&E)&&((h=k.css("--f7-navbar-large-title-height"))&&h.indexOf("px")>=0?(h=parseInt(h,10),Number.isNaN(h)&&C.length?h=C[0].offsetHeight:Number.isNaN(h)&&("ios"===y.theme?h=52:"md"===y.theme?h=48:"aurora"===y.theme&&(h=38))):C.length?h=C[0].offsetHeight:"ios"===y.theme?h=52:"md"===y.theme?h=48:"aurora"===y.theme&&(h=38)),n&&E&&(S+=h);function I(){x.find(".page-content").each((function(e){e.f7ScrollableDistance=e.scrollHeight-e.offsetHeight}))}function N(){k.hasClass("with-searchbar-expandable-enabled")||!g||s<0||(s>=h/2&&s<h?gl(g).scrollTop(h,100):s<h&&gl(g).scrollTop(0,200))}function O(){k.hasClass("with-searchbar-expandable-enabled")||!g||s<0||(s>=f/2&&s<f?gl(g).scrollTop(f,100):s<f&&gl(g).scrollTop(0,200))}var R=null,A=null;function M(e){g=this,e&&e.target&&e.target!==g||(s=g.scrollTop,m=s,a?function(e){if(!k.hasClass("navbar-hidden")&&!k.parent(".navbars").hasClass("navbar-hidden")){var t=k.hasClass("navbar-large-transparent")||k.hasClass("navbar-large")&&k.hasClass("navbar-transparent");R=A;var n=Math.min(h,e.f7ScrollableDistance||h);A=Math.min(Math.max(s/n,0),1);var a=R>0&&R<1;k.hasClass("with-searchbar-expandable-enabled")||(d=k.hasClass("navbar-large-collapsed"),0===A&&d?y.navbar.expandLargeTitle(k[0]):1!==A||d||y.navbar.collapseLargeTitle(k[0]),0===A&&d||0===A&&a||1===A&&!d||1===A&&a?("md"===y.theme&&k.find(".navbar-inner").css("overflow",""),k.find(".title").css("opacity",""),k.find(".title-large-text, .subnavbar").css("transform",""),t?k.find(".navbar-bg").css("opacity",""):k.find(".navbar-bg").css("transform","")):A>0&&A<1&&("md"===y.theme&&k.find(".navbar-inner").css("overflow","visible"),k.find(".title").css("opacity",A),k.find(".title-large-text, .subnavbar").css("transform","translate3d(0px, "+-1*A*h+"px, 0)"),t?k.find(".navbar-bg").css("opacity",A):k.find(".navbar-bg").css("transform","translate3d(0px, "+-1*A*h+"px, 0)")),$&&(w.touch?b&&(clearTimeout(b),b=null,b=setTimeout((function(){N(),clearTimeout(b),b=null}),70)):(clearTimeout(v),v=setTimeout((function(){N()}),300))))}}(g):r&&function(){var e=k.hasClass("navbar-hidden")||k.parent(".navbars").hasClass("navbar-hidden");if(!k.hasClass("with-searchbar-expandable-enabled")&&!e){f||(f=t.offsetHeight);var n=s/f,a=k.hasClass("navbar-transparent-visible");if(n=Math.max(Math.min(n,1),0),a&&1===n||!a&&0===n)k.find(".navbar-bg, .title").css("opacity","");else{if(a&&0===n)return k.trigger("navbar:transparenthide"),y.emit("navbarTransparentHide",k[0]),k.removeClass("navbar-transparent-visible"),void k.find(".navbar-bg, .title").css("opacity","");if(!a&&1===n)return k.trigger("navbar:transparentshow"),y.emit("navbarTransparentShow",k[0]),k.addClass("navbar-transparent-visible"),void k.find(".navbar-bg, .title").css("opacity","");k.find(".navbar-bg, .title").css("opacity",n),T&&(w.touch?b&&(clearTimeout(b),b=null,b=setTimeout((function(){O(),clearTimeout(b),b=null}),70)):(clearTimeout(v),v=setTimeout((function(){O()}),300)))}}}(),x.hasClass("page-previous")||n&&(x.hasClass("page-with-card-opened")||(i=g.scrollHeight,l=g.offsetHeight,u=s+l>=i,p=k.hasClass("navbar-hidden")||k.parent(".navbars").hasClass("navbar-hidden"),u?y.params.navbar.showOnPageScrollEnd&&(c="show"):c=o>s?y.params.navbar.showOnPageScrollTop||s<=S?"show":"hide":s>S?"hide":"show","show"===c&&p?(y.navbar.show(k,!0,!0),p=!1):"hide"!==c||p||(y.navbar.hide(k,!0,!1,!0),p=!0),o=s)))}function B(){m=!1}function P(){clearTimeout(b),b=null,b=setTimeout((function(){!1!==m&&(r&&!a?O():N(),clearTimeout(b),b=null)}),70)}x.on("scroll",".page-content",M,!0),w.touch&&(a&&$||r&&T)&&(y.on("touchstart:passive",B),y.on("touchend:passive",P)),I(),(a||r)&&x.find(".page-content").each((function(e){e.scrollTop>0&&M.call(e)})),y.on("resize",I),x[0].f7DetachNavbarScrollHandlers=function(){y.off("resize",I),delete x[0].f7DetachNavbarScrollHandlers,x.off("scroll",".page-content",M,!0),w.touch&&(a&&$||r&&T)&&(y.off("touchstart:passive",B),y.off("touchend:passive",P))}}},Bu={name:"navbar",create:function(){bs(this,{navbar:Mu})},params:{navbar:{scrollTopOnTitleClick:!0,iosCenterTitle:!0,mdCenterTitle:!1,auroraCenterTitle:!0,hideOnPageScroll:!1,showOnPageScrollEnd:!0,showOnPageScrollTop:!0,collapseLargeTitleOnScroll:!0,snapPageScrollToLargeTitle:!0,snapPageScrollToTransparentNavbar:!0}},on:{"panelBreakpoint panelCollapsedBreakpoint panelResize viewResize resize viewMasterDetailBreakpoint":function(){var e=this;gl(".navbar").each((function(t){e.navbar.size(t)}))},pageBeforeRemove:function(e){e.$el[0].f7DetachNavbarScrollHandlers&&e.$el[0].f7DetachNavbarScrollHandlers()},pageBeforeIn:function(e){var t=this;if("ios"===t.theme){var n,a=e.$el.parents(".view")[0].f7View,r=t.navbar.getElByPage(e);if(n=r?gl(r).parents(".navbars"):e.$el.parents(".view").children(".navbars"),e.$el.hasClass("no-navbar")||a.router.dynamicNavbar&&!r){var o=!!(e.pageFrom&&e.router.history.length>0);t.navbar.hide(n,o)}else t.navbar.show(n)}},pageReinit:function(e){var t=gl(this.navbar.getElByPage(e));t&&0!==t.length&&this.navbar.size(t)},pageInit:function(e){var t,n,a,r=this,o=gl(r.navbar.getElByPage(e));o&&0!==o.length&&(r.navbar.size(o),o.find(".title-large").length>0&&o.addClass("navbar-large"),o.hasClass("navbar-large")&&(r.params.navbar.collapseLargeTitleOnScroll&&(t=!0),e.$el.addClass("page-with-navbar-large")),!t&&o.hasClass("navbar-transparent")&&(n=!0),(r.params.navbar.hideOnPageScroll||e.$el.find(".hide-navbar-on-scroll").length||e.$el.hasClass("hide-navbar-on-scroll")||e.$el.find(".hide-bars-on-scroll").length||e.$el.hasClass("hide-bars-on-scroll"))&&(a=!(e.$el.find(".keep-navbar-on-scroll").length||e.$el.hasClass("keep-navbar-on-scroll")||e.$el.find(".keep-bars-on-scroll").length||e.$el.hasClass("keep-bars-on-scroll"))),(t||a||n)&&r.navbar.initNavbarOnScroll(e.el,o[0],a,t,n))},"panelOpen panelSwipeOpen modalOpen":function(e){var t=this;e.$el.find(".navbar:not(.navbar-previous):not(.stacked)").each((function(e){t.navbar.size(e)}))},tabShow:function(e){var t=this;gl(e).find(".navbar:not(.navbar-previous):not(.stacked)").each((function(e){t.navbar.size(e)}))}},clicks:{".navbar .title":function(e,t,n){if(this.params.navbar.scrollTopOnTitleClick&&!(gl(n.target).closest("a, button").length>0)){var a,r=e.parents(".navbar"),o=r.parents(".navbars");0===(a=r.parents(".page-content")).length&&(r.parents(".page").length>0&&(a=r.parents(".page").find(".page-content")),0===a.length&&o.length&&o.nextAll(".page-current:not(.stacked)").length>0&&(a=o.nextAll(".page-current:not(.stacked)").find(".page-content")),0===a.length&&r.nextAll(".page-current:not(.stacked)").length>0&&(a=r.nextAll(".page-current:not(.stacked)").find(".page-content"))),a&&a.length>0&&(a.hasClass("tab")&&(a=a.parent(".tabs").children(".page-content.tab-active")),a.length>0&&a.scrollTop(0,300))}}},vnode:{navbar:{postpatch:function(e){this.navbar.size(e.elm)}}}},Pu={setHighlight:function(e){var t=gl(e);if(("ios"!==this.theme||t.hasClass("tabbar-highlight"))&&0!==t.length&&(t.hasClass("tabbar")||t.hasClass("tabbar-labels"))){var n=t.find(".tab-link-highlight"),a=t.find(".tab-link").length;if(0!==a){0===n.length?(t.children(".toolbar-inner").append('<span class="tab-link-highlight"></span>'),n=t.find(".tab-link-highlight")):n.next().length&&t.children(".toolbar-inner").append(n);var r,o,s=t.find(".tab-link-active");if(t.hasClass("tabbar-scrollable")&&s&&s[0])r=s[0].offsetWidth+"px",o=s[0].offsetLeft+"px";else{var i=s.index();r=100/a+"%",o=100*(this.rtl?-i:i)+"%"}as((function(){n.css("width",r).transform("translate3d("+o+",0,0)")}))}else n.remove()}},init:function(e){this.toolbar.setHighlight(e)},hide:function(e,t){void 0===t&&(t=!0);var n=gl(e);if(!n.hasClass("toolbar-hidden")){var a="toolbar-hidden"+(t?" toolbar-transitioning":"");n.transitionEnd((function(){n.removeClass("toolbar-transitioning")})),n.addClass(a),n.trigger("toolbar:hide"),this.emit("toolbarHide",n[0])}},show:function(e,t){void 0===t&&(t=!0);var n=gl(e);n.hasClass("toolbar-hidden")&&(t&&(n.addClass("toolbar-transitioning"),n.transitionEnd((function(){n.removeClass("toolbar-transitioning")}))),n.removeClass("toolbar-hidden"),n.trigger("toolbar:show"),this.emit("toolbarShow",n[0]))},initToolbarOnScroll:function(e){var t,n,a,r,o,s,i,l=this,u=gl(e),c=u.parents(".view").children(".toolbar");(0===c.length&&(c=u.find(".toolbar")),0===c.length&&(c=u.parents(".views").children(".tabbar, .tabbar-labels")),0!==c.length)&&(u.on("scroll",".page-content",p,!0),u[0].f7ScrollToolbarHandler=p);function p(e){if(!u.hasClass("page-with-card-opened")&&!u.hasClass("page-previous")){var p=this;e&&e.target&&e.target!==p||(n=p.scrollTop,a=p.scrollHeight,r=p.offsetHeight,o=n+r>=a,i=c.hasClass("toolbar-hidden"),o?l.params.toolbar.showOnPageScrollEnd&&(s="show"):s=t>n?l.params.toolbar.showOnPageScrollTop||n<=44?"show":"hide":n>44?"hide":"show","show"===s&&i?(l.toolbar.show(c),i=!1):"hide"!==s||i||(l.toolbar.hide(c),i=!0),t=n)}}}},Du={name:"toolbar",create:function(){bs(this,{toolbar:Pu})},params:{toolbar:{hideOnPageScroll:!1,showOnPageScrollEnd:!0,showOnPageScrollTop:!0}},on:{pageBeforeRemove:function(e){e.$el[0].f7ScrollToolbarHandler&&e.$el.off("scroll",".page-content",e.$el[0].f7ScrollToolbarHandler,!0)},pageBeforeIn:function(e){var t=e.$el.parents(".view").children(".toolbar");0===t.length&&(t=e.$el.parents(".views").children(".tabbar, .tabbar-labels")),0===t.length&&(t=e.$el.find(".toolbar")),0!==t.length&&(e.$el.hasClass("no-toolbar")?this.toolbar.hide(t):this.toolbar.show(t))},pageInit:function(e){var t=this;if(e.$el.find(".tabbar, .tabbar-labels").each((function(e){t.toolbar.init(e)})),t.params.toolbar.hideOnPageScroll||e.$el.find(".hide-toolbar-on-scroll").length||e.$el.hasClass("hide-toolbar-on-scroll")||e.$el.find(".hide-bars-on-scroll").length||e.$el.hasClass("hide-bars-on-scroll")){if(e.$el.find(".keep-toolbar-on-scroll").length||e.$el.hasClass("keep-toolbar-on-scroll")||e.$el.find(".keep-bars-on-scroll").length||e.$el.hasClass("keep-bars-on-scroll"))return;t.toolbar.initToolbarOnScroll(e.el)}},init:function(){var e=this;e.$el.find(".tabbar, .tabbar-labels").each((function(t){e.toolbar.init(t)}))}},vnode:{tabbar:{insert:function(e){this.toolbar.init(e.elm)}}}},Fu={name:"subnavbar",on:{pageInit:function(e){e.$navbarEl&&e.$navbarEl.length&&e.$navbarEl.find(".subnavbar").length&&e.$el.addClass("page-with-subnavbar"),e.$el.find(".subnavbar").filter((function(t){return gl(t).parents(".page")[0]===e.$el[0]})).length&&e.$el.addClass("page-with-subnavbar")}}},_u=function(){function e(e,t,n,a){var r=this;if(t){var o=t[0].getBoundingClientRect(),s=o.left,i=o.top,l=o.width,u=o.height,c=n-s,p=a-i,d=Math.max(Math.pow(Math.pow(u,2)+Math.pow(l,2),.5),48),h=!1,f=e.params.touch.touchRippleInsetElements||"";if(f&&t.is(f)&&(h=!0),h&&(d=Math.max(Math.min(l,u),48)),h||"hidden"!==t.css("overflow"))r.rippleTransform="translate3d("+(l/2-c)+"px, "+(u/2-p)+"px, 0) scale(1)";else{var m=(d/2+Math.pow(Math.pow(c-l/2,2)+Math.pow(p-u/2,2),.5))/(d/2);r.rippleTransform="translate3d(0px, 0px, 0) scale("+m+")"}return h&&t.addClass("ripple-inset"),r.$rippleWaveEl=gl('<div class="ripple-wave" style="width: '+d+"px; height: "+d+"px; margin-top:-"+d/2+"px; margin-left:-"+d/2+"px; left:"+c+"px; top:"+p+"px; --f7-ripple-transform: "+r.rippleTransform+'"></div>'),t.prepend(r.$rippleWaveEl),r.$rippleWaveEl.animationEnd((function(){r.$rippleWaveEl&&(r.$rippleWaveEl.hasClass("ripple-wave-out")||(r.$rippleWaveEl.addClass("ripple-wave-in"),r.shouldBeRemoved&&r.out()))})),r}}var t=e.prototype;return t.destroy=function(){var e=this;e.$rippleWaveEl&&e.$rippleWaveEl.remove(),Object.keys(e).forEach((function(t){e[t]=null,delete e[t]})),e=null},t.out=function(){var e=this,t=this.$rippleWaveEl;clearTimeout(e.removeTimeout),t.addClass("ripple-wave-out"),e.removeTimeout=setTimeout((function(){e.destroy()}),300),t.animationEnd((function(){clearTimeout(e.removeTimeout),e.destroy()}))},t.remove=function(){var e=this;e.shouldBeRemoved||(e.removeTimeout=setTimeout((function(){e.destroy()}),400),e.shouldBeRemoved=!0,e.$rippleWaveEl.hasClass("ripple-wave-in")&&e.out())},e}();function Lu(e,t,n){return Lu=zu()?Reflect.construct:function(e,t,n){var a=[null];a.push.apply(a,t);var r=new(Function.bind.apply(e,a));return n&&Vu(r,n.prototype),r},Lu.apply(null,arguments)}function zu(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Vu(e,t){return Vu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Vu(e,t)}var Wu={name:"touch-ripple",static:{TouchRipple:_u},create:function(){this.touchRipple={create:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Lu(_u,t)}}}};function Hu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ju(e,t){return ju=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ju(e,t)}var Uu=[],Gu=[];var qu=function(e){var t,n;function a(t,n){var a,r=Hu(a=e.call(this,n,[t])||this),o={};r.useModulesParams(o),r.params=cs(o,n),r.opened=!1;var s=r.params.containerEl?gl(r.params.containerEl).eq(0):t.$el;return s.length||(s=t.$el),r.$containerEl=s,r.containerEl=s[0],r.useModules(),Hu(a)||Hu(a)}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,ju(t,n);var r=a.prototype;return r.onOpen=function(){var e=this;e.opened=!0,Uu.push(e),gl("html").addClass("with-modal-"+e.type.toLowerCase()),e.$el.trigger("modal:open "+e.type.toLowerCase()+":open"),e.emit("local::open modalOpen "+e.type+"Open",e)},r.onOpened=function(){var e=this;e.$el.trigger("modal:opened "+e.type.toLowerCase()+":opened"),e.emit("local::opened modalOpened "+e.type+"Opened",e)},r.onClose=function(){var e=this;e.opened=!1,e.type&&e.$el&&(Uu.splice(Uu.indexOf(e),1),gl("html").removeClass("with-modal-"+e.type.toLowerCase()),e.$el.trigger("modal:close "+e.type.toLowerCase()+":close"),e.emit("local::close modalClose "+e.type+"Close",e))},r.onClosed=function(){var e=this;e.type&&e.$el&&(e.$el.removeClass("modal-out"),e.$el.hide(),e.$el.trigger("modal:closed "+e.type.toLowerCase()+":closed"),e.emit("local::closed modalClosed "+e.type+"Closed",e))},r.open=function(e){var t,n=this,a=Vo(),r=n.app,o=n.$el,s=n.$backdropEl,i=n.type,l=!0;if(void 0!==e?l=e:void 0!==n.params.animate&&(l=n.params.animate),!o||o.hasClass("modal-in"))return!1===e&&o[0]&&"dialog"!==i&&(o[0].style.display="block"),n;if("dialog"===i&&r.params.modal.queueDialogs&&(gl(".dialog.modal-in").length>0?t=!0:Uu.length>0&&Uu.forEach((function(e){"dialog"===e.type&&(t=!0)})),t))return Gu.push(n),n;var u=o.parent(),c=o.parents(a).length>0;function p(){o.hasClass("modal-out")?n.onClosed():o.hasClass("modal-in")&&n.onOpened()}return u.is(n.$containerEl)||(n.$containerEl.append(o),n.once(i+"Closed",(function(){c?u.append(o):o.remove()}))),o.show(),n._clientLeft=o[0].clientLeft,l?(s&&(s.removeClass("not-animated"),s.addClass("backdrop-in")),o.animationEnd((function(){p()})),o.transitionEnd((function(){p()})),o.removeClass("modal-out not-animated").addClass("modal-in"),n.onOpen()):(s&&s.addClass("backdrop-in not-animated"),o.removeClass("modal-out").addClass("modal-in not-animated"),n.onOpen(),n.onOpened()),n},r.close=function(e){var t=this,n=t.$el,a=t.$backdropEl,r=!0;if(void 0!==e?r=e:void 0!==t.params.animate&&(r=t.params.animate),!n||!n.hasClass("modal-in"))return Gu.indexOf(t)>=0&&Gu.splice(Gu.indexOf(t),1),t;if(a){var o=!0;"popup"===t.type&&t.$el.prevAll(".popup.modal-in").add(t.$el.nextAll(".popup.modal-in")).each((function(e){var n=e.f7Modal;n&&n.params.closeByBackdropClick&&n.params.backdrop&&n.backdropEl===t.backdropEl&&(o=!1)})),o&&(a[r?"removeClass":"addClass"]("not-animated"),a.removeClass("backdrop-in"))}function s(){n.hasClass("modal-out")?t.onClosed():n.hasClass("modal-in")&&t.onOpened()}return n[r?"removeClass":"addClass"]("not-animated"),r?(n.animationEnd((function(){s()})),n.transitionEnd((function(){s()})),n.removeClass("modal-in").addClass("modal-out"),t.onClose()):(n.addClass("not-animated").removeClass("modal-in").addClass("modal-out"),t.onClose(),t.onClosed()),"dialog"===t.type&&0!==Gu.length&&Gu.shift().open(),t},r.destroy=function(){var e=this;e.destroyed||(e.emit("local::beforeDestroy modalBeforeDestroy "+e.type+"BeforeDestroy",e),e.$el&&(e.$el.trigger("modal:beforedestroy "+e.type.toLowerCase()+":beforedestroy"),e.$el.length&&e.$el[0].f7Modal&&delete e.$el[0].f7Modal),Qo(e),e.destroyed=!0)},a}(Ts),Xu=qu;function Yu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ku(e,t){return Ku=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ku(e,t)}var Ju=function(e){var t,n;function a(t,n){var a,r,o,s=cs({backdrop:!0,closeByBackdropClick:!0,on:{}},n),i=Yu(a=e.call(this,t,s)||this);if(i.params=s,(r=i.params.el?gl(i.params.el):gl(i.params.content))&&r.length>0&&r[0].f7Modal)return r[0].f7Modal||Yu(a);if(0===r.length)return i.destroy()||Yu(a);function l(e){i&&!i.destroyed&&o&&e.target===o[0]&&i.close()}return i.params.backdrop&&0===(o=t.$el.children(".custom-modal-backdrop")).length&&(o=gl('<div class="custom-modal-backdrop"></div>'),t.$el.append(o)),i.on("customModalOpened",(function(){i.params.closeByBackdropClick&&i.params.backdrop&&t.on("click",l)})),i.on("customModalClose",(function(){i.params.closeByBackdropClick&&i.params.backdrop&&t.off("click",l)})),cs(i,{app:t,$el:r,el:r[0],$backdropEl:o,backdropEl:o&&o[0],type:"customModal"}),r[0].f7Modal=i,i||Yu(a)}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,Ku(t,n),a}(Xu),Zu=Ju,Qu={name:"modal",static:{Modal:Xu,CustomModal:Zu},create:function(){var e=this;e.customModal={create:function(t){return new Zu(e,t)}}},params:{modal:{queueDialogs:!0}}},ec=function(e,t){for(var n=t||{},a=arguments.length,r=new Array(a>2?a-2:0),o=2;o<a;o++)r[o-2]=arguments[o];var s=r||[],i=Object.keys(n).map((function(e){return"_"===e[0]?n[e]?e.replace("_",""):"":e+'="'+n[e]+'"'})).filter((function(e){return!!e})).join(" ");if(["path","img","circle","polygon","line","input"].indexOf(e)>=0)return("<"+e+" "+i+" />").trim();var l=s.filter((function(e){return!!e})).map((function(e){return Array.isArray(e)?e.join(""):e})).join("");return("<"+e+" "+i+">"+l+"</"+e+">").trim()};function tc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nc(e,t){return nc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},nc(e,t)}var ac=function(e){var t,n;function a(t,n){var a,r=cs({title:t.params.dialog.title,text:void 0,content:"",buttons:[],verticalButtons:!1,onClick:void 0,cssClass:void 0,destroyOnClose:!1,on:{}},n);void 0===r.closeByBackdropClick&&(r.closeByBackdropClick=t.params.dialog.closeByBackdropClick),void 0===r.backdrop&&(r.backdrop=t.params.dialog.backdrop);var o,s,i,l=tc(a=e.call(this,t,r)||this),u=xs(),c=Vo(),p=r.title,d=r.text,h=r.content,f=r.buttons,m=r.verticalButtons,g=r.cssClass,v=r.backdrop;if(l.params=r,l.params.el)o=gl(l.params.el);else{var b=["dialog"];0===f.length&&b.push("dialog-no-buttons"),f.length>0&&b.push("dialog-buttons-"+f.length),m&&b.push("dialog-buttons-vertical"),g&&b.push(g);var y="";f.length>0&&(y=ec("div",{class:"dialog-buttons"},f.map((function(e){return ec("span",{class:"dialog-button"+(e.bold?" dialog-button-bold":"")+(e.color?" color-"+e.color:"")+(e.cssClass?" "+e.cssClass:"")},e.text)}))));var w=ec("div",{class:b.join(" ")},ec("div",{class:"dialog-inner"},p&&ec("div",{class:"dialog-title"},p),d&&ec("div",{class:"dialog-text"},d),h),y);o=gl(w)}if(o&&o.length>0&&o[0].f7Modal)return o[0].f7Modal||tc(a);if(0===o.length)return l.destroy()||tc(a);function x(e){var t=gl(this).index(),n=f[t];n.onClick&&n.onClick(l,e),l.params.onClick&&l.params.onClick(l,t),!1!==n.close&&l.close()}function k(e){var t=e.keyCode;f.forEach((function(n,a){n.keyCodes&&n.keyCodes.indexOf(t)>=0&&(c.activeElement&&c.activeElement.blur(),n.onClick&&n.onClick(l,e),l.params.onClick&&l.params.onClick(l,a),!1!==n.close&&l.close())}))}function C(e){var t=e.target;0===gl(t).closest(l.el).length&&l.params.closeByBackdropClick&&l.backdropEl&&l.backdropEl===t&&l.close()}return v&&0===(s=t.$el.children(".dialog-backdrop")).length&&(s=gl('<div class="dialog-backdrop"></div>'),t.$el.append(s)),f&&f.length>0&&(l.on("open",(function(){o.find(".dialog-button").each((function(e,t){f[t].keyCodes&&(i=!0),gl(e).on("click",x)})),!i||u.ios||u.android||u.cordova||u.capacitor||gl(c).on("keydown",k)})),l.on("close",(function(){o.find(".dialog-button").each((function(e){gl(e).off("click",x)})),!i||u.ios||u.android||u.cordova||u.capacitor||gl(c).off("keydown",k),i=!1}))),cs(l,{app:t,$el:o,el:o[0],$backdropEl:s,backdropEl:s&&s[0],type:"dialog",setProgress:function(e,n){return t.progressbar.set(o.find(".progressbar"),e,n),l},setText:function(e){var t=o.find(".dialog-text");return 0===t.length&&(t=gl('<div class="dialog-text"></div>'),void 0!==p?t.insertAfter(o.find(".dialog-title")):o.find(".dialog-inner").prepend(t)),t.html(e),l.params.text=e,l},setTitle:function(e){var t=o.find(".dialog-title");return 0===t.length&&(t=gl('<div class="dialog-title"></div>'),o.find(".dialog-inner").prepend(t)),t.html(e),l.params.title=e,l}}),l.on("opened",(function(){l.params.closeByBackdropClick&&t.on("click",C)})),l.on("close",(function(){l.params.closeByBackdropClick&&t.off("click",C)})),o[0].f7Modal=l,l.params.destroyOnClose&&l.once("closed",(function(){setTimeout((function(){l.destroy()}),0)})),l||tc(a)}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,nc(t,n),a}(Xu),rc=ac;function oc(){return oc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},oc.apply(this,arguments)}var sc={name:"dialog",params:{dialog:{title:void 0,buttonOk:"OK",buttonCancel:"Cancel",usernamePlaceholder:"Username",passwordPlaceholder:"Password",preloaderTitle:"Loading... ",progressTitle:"Loading... ",backdrop:!0,closeByBackdropClick:!1,destroyPredefinedDialogs:!0,keyboardActions:!0,autoFocus:!0}},static:{Dialog:rc},create:function(){var e=this;function t(){return e.params.dialog.title||e.name}var n=e.params.dialog.destroyPredefinedDialogs,a=e.params.dialog.keyboardActions,r=e.params.dialog.autoFocus?{on:{opened:function(e){e.$el.find("input").eq(0).focus()}}}:{};e.dialog=cs(kl({app:e,constructor:rc,defaultSelector:".dialog.modal-in"}),{alert:function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];var i=o[0],l=o[1],u=o[2];return 2===o.length&&"function"==typeof o[1]&&(i=o[0],u=o[1],l=o[2]),new rc(e,{title:void 0===l?t():l,text:i,buttons:[{text:e.params.dialog.buttonOk,bold:!0,onClick:u,keyCodes:a?[13,27]:null}],destroyOnClose:n}).open()},prompt:function(){for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];var l=s[0],u=s[1],c=s[2],p=s[3],d=s[4];return"function"==typeof s[1]&&(l=s[0],c=s[1],p=s[2],d=s[3],u=s[4]),d=null==d?"":d,new rc(e,oc({title:void 0===u?t():u,text:l,content:'<div class="dialog-input-field input"><input type="text" class="dialog-input" value="'+d+'"></div>',buttons:[{text:e.params.dialog.buttonCancel,keyCodes:a?[27]:null,color:"aurora"===e.theme?"gray":null},{text:e.params.dialog.buttonOk,bold:!0,keyCodes:a?[13]:null}],onClick:function(e,t){var n=e.$el.find(".dialog-input").val();0===t&&p&&p(n),1===t&&c&&c(n)},destroyOnClose:n},r)).open()},confirm:function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];var i=o[0],l=o[1],u=o[2],c=o[3];return"function"==typeof o[1]&&(i=o[0],u=o[1],c=o[2],l=o[3]),new rc(e,{title:void 0===l?t():l,text:i,buttons:[{text:e.params.dialog.buttonCancel,onClick:c,keyCodes:a?[27]:null,color:"aurora"===e.theme?"gray":null},{text:e.params.dialog.buttonOk,bold:!0,onClick:u,keyCodes:a?[13]:null}],destroyOnClose:n}).open()},login:function(){for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];var l=s[0],u=s[1],c=s[2],p=s[3];return"function"==typeof s[1]&&(l=s[0],c=s[1],p=s[2],u=s[3]),new rc(e,oc({title:void 0===u?t():u,text:l,content:'\n              <div class="dialog-input-field dialog-input-double input">\n                <input type="text" name="dialog-username" placeholder="'+e.params.dialog.usernamePlaceholder+'" class="dialog-input">\n              </div>\n              <div class="dialog-input-field dialog-input-double input">\n                <input type="password" name="dialog-password" placeholder="'+e.params.dialog.passwordPlaceholder+'" class="dialog-input">\n              </div>',buttons:[{text:e.params.dialog.buttonCancel,keyCodes:a?[27]:null,color:"aurora"===e.theme?"gray":null},{text:e.params.dialog.buttonOk,bold:!0,keyCodes:a?[13]:null}],onClick:function(e,t){var n=e.$el.find('[name="dialog-username"]').val(),a=e.$el.find('[name="dialog-password"]').val();0===t&&p&&p(n,a),1===t&&c&&c(n,a)},destroyOnClose:n},r)).open()},password:function(){for(var o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];var l=s[0],u=s[1],c=s[2],p=s[3];return"function"==typeof s[1]&&(l=s[0],c=s[1],p=s[2],u=s[3]),new rc(e,oc({title:void 0===u?t():u,text:l,content:'\n              <div class="dialog-input-field input">\n                <input type="password" name="dialog-password" placeholder="'+e.params.dialog.passwordPlaceholder+'" class="dialog-input">\n              </div>',buttons:[{text:e.params.dialog.buttonCancel,keyCodes:a?[27]:null,color:"aurora"===e.theme?"gray":null},{text:e.params.dialog.buttonOk,bold:!0,keyCodes:a?[13]:null}],onClick:function(e,t){var n=e.$el.find('[name="dialog-password"]').val();0===t&&p&&p(n),1===t&&c&&c(n)},destroyOnClose:n},r)).open()},preloader:function(t,a){var r={iosPreloaderContent:Ko,mdPreloaderContent:Yo,auroraPreloaderContent:Jo}[e.theme+"PreloaderContent"]||"";return new rc(e,{title:null==t?e.params.dialog.preloaderTitle:t,content:'<div class="preloader'+(a?" color-"+a:"")+'">'+r+"</div>",cssClass:"dialog-preloader",destroyOnClose:n}).open()},progress:function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];var o=a[0],s=a[1],i=a[2];2===a.length?"number"==typeof a[0]?(s=a[0],i=a[1],o=a[2]):"string"==typeof a[0]&&"string"==typeof a[1]&&(o=a[0],i=a[1],s=a[2]):1===a.length&&"number"==typeof a[0]&&(s=a[0],o=a[1],i=a[2]);var l=void 0===s,u=new rc(e,{title:void 0===o?e.params.dialog.progressTitle:o,cssClass:"dialog-progress",content:'\n              <div class="progressbar'+(l?"-infinite":"")+(i?" color-"+i:"")+'">\n                '+(l?"":"<span></span>")+"\n              </div>\n            ",destroyOnClose:n});return l||u.setProgress(s),u.open()}})}};function ic(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lc(e,t){return lc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},lc(e,t)}var uc=function(e){var t,n;function a(t,n){var a,r,o,s,i,l=cs({on:{}},t.params.popup,n),u=ic(a=e.call(this,t,l)||this),c=Ho(),p=Vo(),d=ws(),h=xs();if(u.params=l,(r=u.params.el?gl(u.params.el).eq(0):gl(u.params.content).filter((function(e){return 1===e.nodeType})).eq(0))&&r.length>0&&r[0].f7Modal)return r[0].f7Modal||ic(a);if(0===r.length)return u.destroy()||ic(a);function f(e){var t=e.target,n=gl(t);if(!(!h.desktop&&h.cordova&&(c.Keyboard&&c.Keyboard.isVisible||c.cordova.plugins&&c.cordova.plugins.Keyboard&&c.cordova.plugins.Keyboard.isVisible))&&0===n.closest(u.el).length&&u.params&&u.params.closeByBackdropClick&&u.params.backdrop&&u.backdropEl&&u.backdropEl===t){var a=!0;u.$el.nextAll(".popup.modal-in").each((function(e){var t=e.f7Modal;t&&t.params.closeByBackdropClick&&t.params.backdrop&&t.backdropEl===u.backdropEl&&(a=!1)})),a&&u.close()}}function m(e){27===e.keyCode&&u.params.closeOnEscape&&u.close()}function g(e){return(t.height-2*e)/t.height}u.params.backdrop&&u.params.backdropEl?o=gl(u.params.backdropEl):u.params.backdrop&&0===(o=u.$containerEl.children(".popup-backdrop")).length&&(o=gl('<div class="popup-backdrop"></div>'),u.$containerEl.append(o)),cs(u,{app:t,push:r.hasClass("popup-push")||u.params.push,$el:r,el:r[0],$backdropEl:o,backdropEl:o&&o[0],type:"popup",$htmlEl:gl("html")}),u.params.push&&r.addClass("popup-push");var v,b,y,w,x,k,C,E,S,$,T,I=!0,N=!1,O=!1;function R(e){!N&&I&&u.params.swipeToClose&&(u.params.swipeHandler&&0===gl(e.target).closest(u.params.swipeHandler).length||(N=!0,O=!1,v={x:"touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,y:"touchstart"===e.type?e.targetTouches[0].pageY:e.pageY},w=rs(),y=void 0,u.params.swipeHandler||"touchstart"!==e.type||(k=gl(e.target).closest(".page-content")[0])))}function A(e){if(N){if(b={x:"touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,y:"touchmove"===e.type?e.targetTouches[0].pageY:e.pageY},void 0===y&&(y=!!(y||Math.abs(b.x-v.x)>Math.abs(b.y-v.y))),y)return N=!1,void(O=!1);x=v.y-b.y,i&&s&&x>0&&(x=0);var n=x<0?"to-bottom":"to-top";if(r.transition(0),"string"==typeof u.params.swipeToClose&&n!==u.params.swipeToClose)return r.transform(""),void r.transition("");if(O)u.emit("local::swipeMove popupSwipeMove",u),u.$el.trigger("popup:swipemove");else{if(i&&s&&($=r[0].offsetHeight,0===(T=r.prevAll(".popup.modal-in").eq(0)).length&&(T=t.$el.children(".view, .views"))),k&&(C=k.scrollTop,S=k.scrollHeight,E=k.offsetHeight,!(S===E||"to-bottom"===n&&0===C||"to-top"===n&&C===S-E)))return r.transform(""),r.transition(""),N=!1,void(O=!1);O=!0,u.emit("local::swipeStart popupSwipeStart",u),u.$el.trigger("popup:swipestart")}if(e.preventDefault(),i&&s){var a=1-Math.abs(x/$),o=1-(1-g(s))*a;T.hasClass("popup")?T.hasClass("popup-push")?T.transition(0).forEach((function(e){e.style.setProperty("transform","translate3d(0, calc(-1 * "+a+" * (var(--f7-popup-push-offset) + 10px)) , 0px) scale("+o+")","important")})):T.transition(0).forEach((function(e){e.style.setProperty("transform","translate3d(0, 0px , 0px) scale("+o+")","important")})):T.transition(0).forEach((function(e){e.style.setProperty("transform","translate3d(0,0,0) scale("+o+")","important")}))}r.transition(0).transform("translate3d(0,"+-x+"px,0)")}}function M(){if(N=!1,O){u.emit("local::swipeEnd popupSwipeEnd",u),u.$el.trigger("popup:swipeend"),O=!1,I=!1,r.transition(""),i&&s&&T.transition("").transform("");var e=x<=0?"to-bottom":"to-top";if("string"==typeof u.params.swipeToClose&&e!==u.params.swipeToClose)return r.transform(""),void(I=!0);var t=Math.abs(x),n=(new Date).getTime()-w;n<300&&t>20||n>=300&&t>100?ns((function(){"to-bottom"===e?r.addClass("swipe-close-to-bottom"):r.addClass("swipe-close-to-top"),r.transform(""),u.emit("local::swipeclose popupSwipeClose",u),u.$el.trigger("popup:swipeclose"),u.close(),I=!0})):(I=!0,r.transform(""))}}var B,P=!!d.passiveListener&&{passive:!0};u.params.swipeToClose&&(r.on(t.touchEvents.start,R,P),t.on("touchmove",A),t.on("touchend:passive",M),u.once("popupDestroy",(function(){r.off(t.touchEvents.start,R,P),t.off("touchmove",A),t.off("touchend:passive",M)})));var D=function(){var e=i;u.push&&(i=u.push&&(t.width<630||t.height<630||r.hasClass("popup-tablet-fullscreen"))),i&&!e?F():i&&e?u.$htmlEl[0].style.setProperty("--f7-popup-push-scale",g(s)):!i&&e&&(u.$htmlEl.removeClass("with-modal-popup-push"),u.$htmlEl[0].style.removeProperty("--f7-popup-push-scale"))},F=function(){t.off("resize",D),u.push&&(i=u.push&&(t.width<630||t.height<630||r.hasClass("popup-tablet-fullscreen"))),i&&(s=parseInt(r.css("--f7-popup-push-offset"),10),Number.isNaN(s)&&(s=0),s&&(r.addClass("popup-push"),u.$htmlEl.addClass("with-modal-popup-push"),u.$htmlEl[0].style.setProperty("--f7-popup-push-scale",g(s)))),t.on("resize",D)};return u.on("open",(function(){B=!1,u.params.closeOnEscape&&gl(p).on("keydown",m),r.prevAll(".popup.modal-in").addClass("popup-behind"),F()})),u.on("opened",(function(){r.removeClass("swipe-close-to-bottom swipe-close-to-top"),u.params.closeByBackdropClick&&t.on("click",f)})),u.on("close",(function(){B=u.$el.prevAll(".popup-push.modal-in").length>0,u.params.closeOnEscape&&gl(p).off("keydown",m),u.params.closeByBackdropClick&&t.off("click",f),r.prevAll(".popup.modal-in").eq(0).removeClass("popup-behind"),i&&s&&!B&&(u.$htmlEl.removeClass("with-modal-popup-push"),u.$htmlEl.addClass("with-modal-popup-push-closing")),t.off("resize",D)})),u.on("closed",(function(){r.removeClass("popup-behind"),i&&s&&!B&&(u.$htmlEl.removeClass("with-modal-popup-push-closing"),u.$htmlEl[0].style.removeProperty("--f7-popup-push-scale"))})),r[0].f7Modal=u,u||ic(a)}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,lc(t,n),a}(Xu),cc=uc,pc={name:"popup",params:{popup:{backdrop:!0,backdropEl:void 0,closeByBackdropClick:!0,closeOnEscape:!1,swipeToClose:!1,swipeHandler:null,push:!1,containerEl:null}},static:{Popup:cc},create:function(){this.popup=kl({app:this,constructor:cc,defaultSelector:".popup.modal-in",parentSelector:".popup"})},clicks:{".popup-open":function(e,t){void 0===t&&(t={});this.popup.open(t.popup,t.animate,e)},".popup-close":function(e,t){void 0===t&&(t={});this.popup.close(t.popup,t.animate,e)}}};function dc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hc(e,t){return hc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},hc(e,t)}var fc=function(e){var t,n;function a(t,n){var a,r,o=cs({on:{}},n),s=dc(a=e.call(this,t,o)||this);return s.params=o,(r=s.params.el?gl(s.params.el).eq(0):gl(s.params.content).filter((function(e){return 1===e.nodeType})).eq(0))&&r.length>0&&r[0].f7Modal?r[0].f7Modal||dc(a):0===r.length?s.destroy()||dc(a):(cs(s,{app:t,$el:r,el:r[0],type:"loginScreen"}),r[0].f7Modal=s,s||dc(a))}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,hc(t,n),a}(Xu),mc=fc,gc={name:"loginScreen",static:{LoginScreen:mc},create:function(){this.loginScreen=kl({app:this,constructor:mc,defaultSelector:".login-screen.modal-in"})},clicks:{".login-screen-open":function(e,t){void 0===t&&(t={});this.loginScreen.open(t.loginScreen,t.animate,e)},".login-screen-close":function(e,t){void 0===t&&(t={});this.loginScreen.close(t.loginScreen,t.animate,e)}}};function vc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bc(e,t){return bc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},bc(e,t)}var yc=function(e){var t,n;function a(t,n){var a,r,o=cs({on:{}},t.params.popover,n),s=vc(a=e.call(this,t,o)||this),i=xs(),l=Ho(),u=Vo();if(s.params=o,(r=s.params.el?gl(s.params.el).eq(0):gl(s.params.content).filter((function(e){return 1===e.nodeType})).eq(0))&&r.length>0&&r[0].f7Modal)return r[0].f7Modal||vc(a);var c,p,d=gl(s.params.targetEl).eq(0);if(0===r.length)return s.destroy()||vc(a);s.params.backdrop&&s.params.backdropEl?c=gl(s.params.backdropEl):s.params.backdrop&&0===(c=s.$containerEl.children(".popover-backdrop")).length&&(c=gl('<div class="popover-backdrop"></div>'),s.$containerEl.append(c)),0===r.find(".popover-angle").length?(p=gl('<div class="popover-angle"></div>'),r.prepend(p)):p=r.find(".popover-angle");var h=s.open;function f(){s.resize()}cs(s,{app:t,$el:r,el:r[0],$targetEl:d,targetEl:d[0],$angleEl:p,angleEl:p[0],$backdropEl:c,backdropEl:c&&c[0],type:"popover",open:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],r=t[1];return"boolean"==typeof t[0]&&(r=t[0],a=t[1]),a&&(s.$targetEl=gl(a),s.targetEl=s.$targetEl[0]),h.call(s,r)}}),s.on("popoverOpen",(function(){s.resize(),t.on("resize",f),gl(l).on("keyboardDidShow keyboardDidHide",f),s.on("popoverClose popoverBeforeDestroy",(function(){t.off("resize",f),gl(l).off("keyboardDidShow keyboardDidHide",f)}))}));var m=null;function g(e){m=e.target}function v(e){var t=e.target,n=gl(t);!i.desktop&&i.cordova&&(l.Keyboard&&l.Keyboard.isVisible||l.cordova.plugins&&l.cordova.plugins.Keyboard&&l.cordova.plugins.Keyboard.isVisible)||0===n.closest(s.el).length&&(s.params.closeByBackdropClick&&s.params.backdrop&&s.backdropEl&&s.backdropEl===t&&m===t||s.params.closeByOutsideClick&&m===t)&&s.close()}function b(e){27===e.keyCode&&s.params.closeOnEscape&&s.close()}return s.params.closeOnEscape&&(s.on("popoverOpen",(function(){gl(u).on("keydown",b)})),s.on("popoverClose",(function(){gl(u).off("keydown",b)}))),s.on("popoverOpened",(function(){(s.params.closeByOutsideClick||s.params.closeByBackdropClick)&&(t.on("touchstart",g),t.on("click",v))})),s.on("popoverClose",(function(){(s.params.closeByOutsideClick||s.params.closeByBackdropClick)&&(t.off("touchstart",g),t.off("click",v))})),r[0].f7Modal=s,s||vc(a)}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,bc(t,n),a.prototype.resize=function(){var e=this,t=e.app,n=e.$el,a=e.$targetEl,r=e.$angleEl,o=e.params,s=o.targetX,i=o.targetY;n.css({left:"",top:""});var l,u,c,p,d,h,f=[n.width(),n.height()],m=f[0],g=f[1],v=0;"ios"===t.theme||"aurora"===t.theme?(r.removeClass("on-left on-right on-top on-bottom").css({left:"",top:""}),v=r.width()/2):n.removeClass("popover-on-left popover-on-right popover-on-top popover-on-bottom popover-on-middle").css({left:"",top:""});var b=parseInt(gl("html").css("--f7-safe-area-top"),10),y=parseInt(gl("html").css("--f7-safe-area-left"),10),w=parseInt(gl("html").css("--f7-safe-area-right"),10);if(Number.isNaN(b)&&(b=0),Number.isNaN(y)&&(y=0),Number.isNaN(w)&&(w=0),a&&a.length>0){c=a.outerWidth(),p=a.outerHeight();var x=a.offset();d=x.left-t.left,h=x.top-t.top;var k=a.parents(".page");k.length>0&&(h-=k[0].scrollTop)}else void 0!==s&&"undefined"!==i&&(d=s,h=i,c=e.params.targetWidth||0,p=e.params.targetHeight||0);var C,E=0,S=0,$=0,T="md"===t.theme?"bottom":"top";"md"===t.theme?(g<t.height-h-p?(T="bottom",S=h+p):g<h-b?(S=h-g,T="top"):(T="middle",S=p/2+h-g/2),S=Math.max(8,Math.min(S,t.height-g-8)),d<t.width/2?(C="right",E="middle"===T?d+c:d):(C="left",E="middle"===T?d-m:d+c-m),E=Math.max(8,Math.min(E,t.width-m-8-w),y),n.addClass("popover-on-"+T+" popover-on-"+C)):(g+v<h-b?S=h-g-v:g+v<t.height-h-p?(T="bottom",S=h+p+v):(T="middle",$=S=p/2+h-g/2,$-=S=Math.max(5,Math.min(S,t.height-g-5))),"top"===T||"bottom"===T?($=E=c/2+d-m/2,E=Math.max(5,Math.min(E,t.width-m-5)),y&&(E=Math.max(E,y)),w&&E+m>t.width-5-w&&(E=t.width-5-w-m),"top"===T&&r.addClass("on-bottom"),"bottom"===T&&r.addClass("on-top"),l=m/2-v+($-=E),l=Math.max(Math.min(l,m-2*v-13),13),r.css({left:l+"px"})):"middle"===T&&(E=d-m-v,r.addClass("on-right"),(E<5||E+m+w>t.width||E<y)&&(E<5&&(E=d+c+v),E+m+w>t.width&&(E=t.width-m-5-w),E<y&&(E=y),r.removeClass("on-right").addClass("on-left")),u=g/2-v+$,u=Math.max(Math.min(u,g-2*v-13),13),r.css({top:u+"px"})));n.css({top:S+"px",left:E+"px"})},a}(Xu),wc=yc,xc={name:"popover",params:{popover:{backdrop:!0,backdropEl:void 0,closeByBackdropClick:!0,closeByOutsideClick:!0,closeOnEscape:!1,containerEl:null}},static:{Popover:wc},create:function(){var e=this;e.popover=cs(kl({app:e,constructor:wc,defaultSelector:".popover.modal-in"}),{open:function(t,n,a){var r=gl(t);if(r.length>1){var o=gl(n).parents(".page");o.length&&r.each((function(e){var t=gl(e);t.parents(o)[0]===o[0]&&(r=t)}))}r.length>1&&(r=r.eq(r.length-1));var s=r[0].f7Modal,i=r.dataset();return s||(s=new wc(e,Object.assign({el:r,targetEl:n},i))),s.open(n,a)}})},clicks:{".popover-open":function(e,t){void 0===t&&(t={});this.popover.open(t.popover,e,t.animate)},".popover-close":function(e,t){void 0===t&&(t={});this.popover.close(t.popover,t.animate,e)}}};function kc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cc(e,t){return Cc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Cc(e,t)}var Ec=function(e){var t,n;function a(t,n){var a,r,o,s,i=cs({on:{}},t.params.actions,n),l=kc(a=e.call(this,t,i)||this),u=xs(),c=Ho(),p=Vo();if(l.params=i,l.params.buttons&&(r=l.params.buttons,Array.isArray(r[0])||(r=[r])),l.groups=r,l.params.el?o=gl(l.params.el).eq(0):l.params.content?o=gl(l.params.content).filter((function(e){return 1===e.nodeType})).eq(0):l.params.buttons&&(l.params.convertToPopover&&(l.popoverHtml=l.renderPopover()),l.actionsHtml=l.render()),o&&o.length>0&&o[0].f7Modal)return o[0].f7Modal||kc(a);if(o&&0===o.length&&!l.actionsHtml&&!l.popoverHtml)return l.destroy()||kc(a);l.params.backdrop&&l.params.backdropEl?s=gl(l.params.backdropEl):l.params.backdrop&&0===(s=l.$containerEl.children(".actions-backdrop")).length&&(s=gl('<div class="actions-backdrop"></div>'),l.$containerEl.append(s));var d,h=l.open,f=l.close;function m(e){var t,n,a=gl(this);if(a.hasClass("list-button")||a.hasClass("item-link")?(t=a.parents("li").index(),n=a.parents(".list").index()):(t=a.index(),n=a.parents(".actions-group").index()),void 0!==r){var o=r[n][t];o.onClick&&o.onClick(l,e),l.params.onClick&&l.params.onClick(l,e),!1!==o.close&&l.close()}}function g(e){var t=e.target,n=gl(t);!u.desktop&&u.cordova&&(c.Keyboard&&c.Keyboard.isVisible||c.cordova.plugins&&c.cordova.plugins.Keyboard&&c.cordova.plugins.Keyboard.isVisible)||0===n.closest(l.el).length&&(l.params.closeByBackdropClick&&l.params.backdrop&&l.backdropEl&&l.backdropEl===t||l.params.closeByOutsideClick)&&l.close()}function v(e){27===e.keyCode&&l.params.closeOnEscape&&l.close()}return l.open=function(e){var n=!1,a=l.params,r=a.targetEl,o=a.targetX,s=a.targetY,i=a.targetWidth,c=a.targetHeight;return l.params.convertToPopover&&(r||void 0!==o&&void 0!==s)&&(l.params.forceToPopover||u.ios&&u.ipad||t.width>=768||u.desktop&&"aurora"===t.theme)&&(n=!0),n&&l.popoverHtml?((d=t.popover.create({containerEl:l.params.containerEl,content:l.popoverHtml,backdrop:l.params.backdrop,targetEl:r,targetX:o,targetY:s,targetWidth:i,targetHeight:c,on:{open:function(){l.$el||(l.$el=d.$el),l.$el.trigger("modal:open "+l.type.toLowerCase()+":open"),l.emit("local::open modalOpen "+l.type+"Open",l)},opened:function(){l.$el||(l.$el=d.$el),l.$el.trigger("modal:opened "+l.type.toLowerCase()+":opened"),l.emit("local::opened modalOpened "+l.type+"Opened",l)},close:function(){l.$el||(l.$el=d.$el),l.$el.trigger("modal:close "+l.type.toLowerCase()+":close"),l.emit("local::close modalClose "+l.type+"Close",l)},closed:function(){l.$el||(l.$el=d.$el),l.$el.trigger("modal:closed "+l.type.toLowerCase()+":closed"),l.emit("local::closed modalClosed "+l.type+"Closed",l)}}})).open(e),d.once("popoverOpened",(function(){d.$el.find(".list-button, .item-link").each((function(e){gl(e).on("click",m)}))})),d.once("popoverClosed",(function(){d.$el.find(".list-button, .item-link").each((function(e){gl(e).off("click",m)})),ns((function(){d.destroy(),d=void 0}))}))):(l.$el=l.actionsHtml?gl(l.actionsHtml):l.$el,l.$el[0].f7Modal=l,l.groups&&(l.$el.find(".actions-button").each((function(e){gl(e).on("click",m)})),l.once("actionsClosed",(function(){l.$el.find(".actions-button").each((function(e){gl(e).off("click",m)}))}))),l.el=l.$el[0],h.call(l,e)),l},l.close=function(e){return d?d.close(e):f.call(l,e),l},cs(l,{app:t,$el:o,el:o?o[0]:void 0,$backdropEl:s,backdropEl:s&&s[0],type:"actions"}),l.params.closeOnEscape&&(l.on("open",(function(){gl(p).on("keydown",v)})),l.on("close",(function(){gl(p).off("keydown",v)}))),l.on("opened",(function(){(l.params.closeByBackdropClick||l.params.closeByOutsideClick)&&t.on("click",g)})),l.on("close",(function(){(l.params.closeByBackdropClick||l.params.closeByOutsideClick)&&t.off("click",g)})),o&&(o[0].f7Modal=l),l||kc(a)}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,Cc(t,n);var r=a.prototype;return r.render=function(){var e=this;if(e.params.render)return e.params.render.call(e,e);var t=e.groups,n=e.params.cssClass;return ec("div",{class:"actions-modal"+(e.params.grid?" actions-grid":"")+" "+(n||"")},t.map((function(e){return ec("div",{class:"actions-group"},e.map((function(e){var t=["actions-"+(e.label?"label":"button")],n=e.color,a=e.bg,r=e.bold,o=e.disabled,s=e.label,i=e.text,l=e.icon;return n&&t.push("color-"+n),a&&t.push("bg-color-"+a),r&&t.push("actions-button-bold"),o&&t.push("disabled"),s?ec("div",{class:t.join(" ")},i):ec("div",{class:t.join(" ")},l&&ec("div",{class:"actions-button-media"},l),ec("div",{class:"actions-button-text"},i))})))})))},r.renderPopover=function(){var e=this;if(e.params.renderPopover)return e.params.renderPopover.call(e,e);var t=e.groups,n=e.params.cssClass;return ec("div",{class:"popover popover-from-actions "+(n||"")},ec("div",{class:"popover-inner"},t.map((function(e){return ec("div",{class:"list"},ec("ul",null,e.map((function(e){var t=[],n=e.color,a=e.bg,r=e.bold,o=e.disabled,s=e.label,i=e.text,l=e.icon;return n&&t.push("color-"+n),a&&t.push("bg-color-"+a),r&&t.push("popover-from-actions-bold"),o&&t.push("disabled"),s?(t.push("popover-from-actions-label"),'<li class="'+t.join(" ")+'">'+i+"</li>"):l?(t.push("item-link item-content"),ec("li",null,ec("a",{class:t.join(" ")},ec("div",{class:"item-media"},l),ec("div",{class:"item-inner"},ec("div",{class:"item-title"},i))))):(t.push("list-button"),ec("li",null,ec("a",{class:t.join(" ")},i)))}))))}))))},a}(Xu),Sc=Ec,$c={name:"actions",params:{actions:{convertToPopover:!0,forceToPopover:!1,backdrop:!0,backdropEl:void 0,cssClass:null,closeByBackdropClick:!0,closeOnEscape:!1,render:null,renderPopover:null,containerEl:null}},static:{Actions:Sc},create:function(){this.actions=kl({app:this,constructor:Sc,defaultSelector:".actions-modal.modal-in"})},clicks:{".actions-open":function(e,t){void 0===t&&(t={});this.actions.open(t.actions,t.animate,e)},".actions-close":function(e,t){void 0===t&&(t={});this.actions.close(t.actions,t.animate,e)}}};function Tc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ic(e,t){return Ic=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ic(e,t)}var Nc=function(e){var t,n;function a(t,n){var a,r,o,s,i,l=cs({on:{}},t.params.sheet,n),u=Tc(a=e.call(this,t,l)||this),c=Ho(),p=Vo(),d=ws(),h=xs();if(u.params=l,void 0===u.params.backdrop&&(u.params.backdrop="ios"!==t.theme),(r=u.params.el?gl(u.params.el).eq(0):gl(u.params.content).filter((function(e){return 1===e.nodeType})).eq(0))&&r.length>0&&r[0].f7Modal)return r[0].f7Modal||Tc(a);if(0===r.length)return u.destroy()||Tc(a);function f(e){var t=e.target,n=gl(t);!h.desktop&&h.cordova&&(c.Keyboard&&c.Keyboard.isVisible||c.cordova.plugins&&c.cordova.plugins.Keyboard&&c.cordova.plugins.Keyboard.isVisible)||0===n.closest(u.el).length&&(u.params.closeByBackdropClick&&u.params.backdrop&&u.backdropEl&&u.backdropEl===t||u.params.closeByOutsideClick)&&u.close()}function m(e){27===e.keyCode&&u.params.closeOnEscape&&u.close()}function g(e){return(t.height-2*e)/t.height}u.params.backdrop&&u.params.backdropEl?o=gl(u.params.backdropEl):u.params.backdrop&&0===(o=u.$containerEl.children(".sheet-backdrop")).length&&(o=gl('<div class="sheet-backdrop"></div>'),u.$containerEl.append(o)),cs(u,{app:t,push:r.hasClass("sheet-modal-push")||u.params.push,$el:r,el:r[0],$backdropEl:o,backdropEl:o&&o[0],type:"sheet",$htmlEl:gl("html")}),u.params.push&&r.addClass("sheet-modal-push");var v,b,y,w,x,k,C,E,S,$,T,I,N,O,R,A,M,B,P=!1,D=!1;function F(e){P||!u.params.swipeToClose&&!u.params.swipeToStep||u.params.swipeHandler&&0===gl(e.target).closest(u.params.swipeHandler).length||(P=!0,D=!1,v={x:"touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,y:"touchstart"===e.type?e.targetTouches[0].pageY:e.pageY},w=rs(),y=void 0,k=r.hasClass("sheet-modal-top"),u.params.swipeHandler||"touchstart"!==e.type||(R=gl(e.target).closest(".page-content")[0]))}function _(e){if(P){if(b={x:"touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,y:"touchmove"===e.type?e.targetTouches[0].pageY:e.pageY},void 0===y&&(y=!!(y||Math.abs(b.x-v.x)>Math.abs(b.y-v.y))),y)return P=!1,void(D=!1);var n,a=(x=v.y-b.y)<0?"to-bottom":"to-top";if(!D){if(R&&!r.hasClass("modal-in-swipe-step")&&(A=R.scrollTop,M=R.scrollHeight,B=R.offsetHeight,!(M===B||"to-bottom"===a&&0===A||"to-top"===a&&A===M-B)))return r.transform(""),P=!1,void(D=!1);u.push&&i&&(N=t.$el.children(".view, .views")),$=r[0].offsetHeight,E=ss(r[0],"y"),k?(T=u.params.swipeToClose?-$:-C,I=0):(T=0,I=u.params.swipeToClose?$:C),D=!0}if(S=E-x,S=Math.min(Math.max(S,T),I),e.preventDefault(),u.push&&i){var o=(S-E)/$;u.params.swipeToStep&&(o=k?S/C:1-(C-S)/C),o=Math.abs(o);var s=1-(o=Math.min(Math.max(o,0),1)),l=1-(1-g(i))*s;N.transition(0).forEach((function(e){e.style.setProperty("transform","translate3d(0,0,0) scale("+l+")","important")})),u.params.swipeToStep&&N.css("border-radius",O*s+"px")}if(r.transition(0).transform("translate3d(0,"+S+"px,0)"),u.params.swipeToStep)n=k?1-S/C:(C-S)/C,n=Math.min(Math.max(n,0),1),r.trigger("sheet:stepprogress",n),u.emit("local::stepProgress sheetStepProgress",u,n)}}function L(){if(P=!1,D){D=!1,r.transform("").transition(""),u.push&&i&&(N.transition("").transform(""),N.css("border-radius",""));var e=x<0?"to-bottom":"to-top",t=Math.abs(x);if(0!==t&&S!==E){var n=(new Date).getTime()-w;if(u.params.swipeToStep){var a=k?"to-bottom":"to-top",o=k?"to-top":"to-bottom",s=Math.abs(S),l=Math.abs(C);if(n<300&&t>10)return e===a&&s<l&&(r.removeClass("modal-in-swipe-step"),r.trigger("sheet:stepprogress",1),u.emit("local::stepProgress sheetStepProgress",u,1),u.emit("local::_swipeStep",!1),r.trigger("sheet:stepopen"),u.emit("local::stepOpen sheetStepOpen",u),u.push&&i&&(u.$htmlEl[0].style.setProperty("--f7-sheet-push-scale",g(i)),N.css("border-radius",""))),e===o&&s>l&&(u.params.swipeToClose?u.close():(r.addClass("modal-in-swipe-step"),r.trigger("sheet:stepprogress",0),u.emit("local::stepProgress sheetStepProgress",u,0),u.emit("local::_swipeStep",!0),r.trigger("sheet:stepclose"),u.emit("local::stepClose sheetStepClose",u),u.push&&i&&(u.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale"),N.css("border-radius","0px")))),void(e===o&&s<=l&&(r.addClass("modal-in-swipe-step"),r.trigger("sheet:stepprogress",0),u.emit("local::stepProgress sheetStepProgress",u,0),u.emit("local::_swipeStep",!0),r.trigger("sheet:stepclose"),u.emit("local::stepClose sheetStepClose",u),u.push&&i&&(u.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale"),N.css("border-radius","0px"))));if(n>=300){var c=!r.hasClass("modal-in-swipe-step");c?c&&(s>l+($-l)/2?u.params.swipeToClose&&u.close():s>l/2&&(r.addClass("modal-in-swipe-step"),r.trigger("sheet:stepprogress",0),u.emit("local::stepProgress sheetStepProgress",u,0),u.emit("local::_swipeStep",!0),r.trigger("sheet:stepclose"),u.emit("local::stepClose sheetStepClose",u),u.push&&i&&(u.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale"),N.css("border-radius","0px")))):s<l/2?(r.removeClass("modal-in-swipe-step"),r.trigger("sheet:stepprogress",1),u.emit("local::stepProgress sheetStepProgress",u,1),u.emit("local::_swipeStep",!1),r.trigger("sheet:stepopen"),u.emit("local::stepOpen sheetStepOpen",u),u.push&&i&&(u.$htmlEl[0].style.setProperty("--f7-sheet-push-scale",g(i)),N.css("border-radius",""))):s-l>($-l)/2&&u.params.swipeToClose&&u.close()}}else{if(e!==(k?"to-top":"to-bottom"))return;(n<300&&t>20||n>=300&&t>$/2)&&u.close()}}}}function z(){u.setSwipeStep(!0)}u.setSwipeStep=function(e){void 0===e&&(e=!0);var t=r.find(".sheet-modal-swipe-step").eq(0);t.length&&(C=r.hasClass("sheet-modal-top")?-(t.offset().top-r.offset().top+t[0].offsetHeight):r[0].offsetHeight-(t.offset().top-r.offset().top+t[0].offsetHeight),r[0].style.setProperty("--f7-sheet-swipe-step",C+"px"),e||(r.addClass("modal-in-swipe-step"),u.emit("local::_swipeStep",!0)))};var V=!!d.passiveListener&&{passive:!0};return(u.params.swipeToClose||u.params.swipeToStep)&&(r.on(t.touchEvents.start,F,V),t.on("touchmove",_),t.on("touchend:passive",L),u.once("sheetDestroy",(function(){r.off(t.touchEvents.start,F,V),t.off("touchmove",_),t.off("touchend:passive",L)}))),u.on("open",(function(){u.params.closeOnEscape&&gl(p).on("keydown",m),r.prevAll(".popup.modal-in").addClass("popup-behind"),u.params.swipeToStep&&(u.setSwipeStep(!1),t.on("resize",z)),u.params.scrollToEl&&function(){var e=gl(u.params.scrollToEl).eq(0);if(0!==e.length&&0!==(s=e.parents(".page-content")).length){var t,n=parseInt(s.css("padding-top"),10),a=parseInt(s.css("padding-bottom"),10),o=s[0].offsetHeight-n-r.height(),i=s[0].scrollHeight-n-r.height(),l=s.scrollTop(),c=e.offset().top-n+e[0].offsetHeight;if(c>o){var p=l+c-o;p+o>i&&(t=p+o-i+a,o===i&&(t=r.height()),s.css({"padding-bottom":t+"px"})),s.scrollTop(p,300)}}}(),u.push&&(i=parseInt(r.css("--f7-sheet-push-offset"),10),Number.isNaN(i)&&(i=0),i&&(r.addClass("sheet-modal-push"),u.$htmlEl.addClass("with-modal-sheet-push"),u.params.swipeToStep?(N=t.$el.children(".view, .views"),O=parseFloat(r.css("border-"+(k?"bottom":"top")+"-left-radius")),N.css("border-radius","0px")):u.$htmlEl[0].style.setProperty("--f7-sheet-push-scale",g(i))))})),u.on("opened",(function(){(u.params.closeByOutsideClick||u.params.closeByBackdropClick)&&t.on("click",f)})),u.on("close",(function(){u.params.swipeToStep&&(r.removeClass("modal-in-swipe-step"),u.emit("local::_swipeStep",!1),t.off("resize",z)),u.params.closeOnEscape&&gl(p).off("keydown",m),u.params.scrollToEl&&s&&s.length>0&&s.css({"padding-bottom":""}),(u.params.closeByOutsideClick||u.params.closeByBackdropClick)&&t.off("click",f),r.prevAll(".popup.modal-in").eq(0).removeClass("popup-behind"),u.push&&i&&(u.$htmlEl.removeClass("with-modal-sheet-push"),u.$htmlEl.addClass("with-modal-sheet-push-closing"))})),u.on("closed",(function(){u.push&&i&&(u.$htmlEl.removeClass("with-modal-sheet-push-closing"),u.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale"))})),u.stepOpen=function(){r.removeClass("modal-in-swipe-step"),u.emit("local::_swipeStep",!1),u.push&&(i||(i=parseInt(r.css("--f7-sheet-push-offset"),10),Number.isNaN(i)&&(i=0)),i&&u.$htmlEl[0].style.setProperty("--f7-sheet-push-scale",g(i)))},u.stepClose=function(){r.addClass("modal-in-swipe-step"),u.emit("local::_swipeStep",!0),u.push&&u.$htmlEl[0].style.removeProperty("--f7-sheet-push-scale")},u.stepToggle=function(){r.toggleClass("modal-in-swipe-step"),u.emit("local::_swipeStep",r.hasClass("modal-in-swipe-step"))},r[0].f7Modal=u,u||Tc(a)}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,Ic(t,n),a}(Xu),Oc=Nc,Rc={name:"sheet",params:{sheet:{push:!1,backdrop:void 0,backdropEl:void 0,closeByBackdropClick:!0,closeByOutsideClick:!1,closeOnEscape:!1,swipeToClose:!1,swipeToStep:!1,swipeHandler:null,containerEl:null}},static:{Sheet:Oc},create:function(){var e=this;e.sheet=cs({},kl({app:e,constructor:Oc,defaultSelector:".sheet-modal.modal-in"}),{stepOpen:function(t){var n=e.sheet.get(t);if(n&&n.stepOpen)return n.stepOpen()},stepClose:function(t){var n=e.sheet.get(t);if(n&&n.stepClose)return n.stepClose()},stepToggle:function(t){var n=e.sheet.get(t);if(n&&n.stepToggle)return n.stepToggle()}})},clicks:{".sheet-open":function(e,t){void 0===t&&(t={});gl(".sheet-modal.modal-in").length>0&&t.sheet&&gl(t.sheet)[0]!==gl(".sheet-modal.modal-in")[0]&&this.sheet.close(".sheet-modal.modal-in"),this.sheet.open(t.sheet,t.animate,e)},".sheet-close":function(e,t){void 0===t&&(t={});this.sheet.close(t.sheet,t.animate,e)}}};function Ac(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mc(e,t){return Mc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Mc(e,t)}var Bc=function(e){var t,n;function a(t,n){var a,r=cs({on:{}},t.params.toast,n),o=Ac(a=e.call(this,t,r)||this),s=Ho();o.app=t,o.params=r;var i,l,u=o.params,c=u.closeButton,p=u.closeTimeout;if(o.params.el)i=gl(o.params.el);else{var d=o.render();i=gl(d)}return i&&i.length>0&&i[0].f7Modal?i[0].f7Modal||Ac(a):0===i.length?o.destroy()||Ac(a):(cs(o,{$el:i,el:i[0],type:"toast"}),i[0].f7Modal=o,c&&(i.find(".toast-button").on("click",(function(){o.emit("local::closeButtonClick toastCloseButtonClick",o),o.close()})),o.on("beforeDestroy",(function(){i.find(".toast-button").off("click")}))),o.on("open",(function(){gl(".toast.modal-in").each((function(e){var n=t.toast.get(e);e!==o.el&&n&&n.close()})),p&&(l=ns((function(){o.close()}),p))})),o.on("close",(function(){s.clearTimeout(l)})),o.params.destroyOnClose&&o.once("closed",(function(){setTimeout((function(){o.destroy()}),0)})),o||Ac(a))}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,Mc(t,n),a.prototype.render=function(){var e=this;if(e.params.render)return e.params.render.call(e,e);var t=e.params,n=t.position,a=t.horizontalPosition,r=t.cssClass,o=t.icon,s=t.text,i=t.closeButton,l=t.closeButtonColor,u=t.closeButtonText;return ec("div",{class:"toast toast-"+n+" "+("top"===n||"bottom"===n?"toast-horizontal-"+a:"")+" "+(r||"")+" "+(o?"toast-with-icon":"")},ec("div",{class:"toast-content"},o&&ec("div",{class:"toast-icon"},o),ec("div",{class:"toast-text"},s),i&&!o&&ec("a",{class:"toast-button button "+(l?"color-"+l:"")},u)))},a}(Xu),Pc=Bc,Dc={name:"toast",static:{Toast:Pc},create:function(){var e=this;e.toast=cs({},kl({app:e,constructor:Pc,defaultSelector:".toast.modal-in"}),{show:function(t){return cs(t,{destroyOnClose:!0}),new Pc(e,t).open()}})},params:{toast:{icon:null,text:null,position:"bottom",horizontalPosition:"left",closeButton:!1,closeButtonColor:null,closeButtonText:"Ok",closeTimeout:null,cssClass:null,render:null,containerEl:null}}},Fc={init:function(e){var t={iosPreloaderContent:Ko,mdPreloaderContent:Yo,auroraPreloaderContent:Jo},n=gl(e);0===n.length||n.children(".preloader-inner").length>0||n.children(".preloader-inner-line").length>0||n.append(t[this.theme+"PreloaderContent"])},visible:!1,show:function(e){void 0===e&&(e="white");if(!Fc.visible){var t={iosPreloaderContent:Ko,mdPreloaderContent:Yo,auroraPreloaderContent:Jo}[this.theme+"PreloaderContent"]||"";gl("html").addClass("with-modal-preloader"),this.$el.append('\n      <div class="preloader-backdrop"></div>\n      <div class="preloader-modal">\n        <div class="preloader color-'+e+'">'+t+"</div>\n      </div>\n    "),Fc.visible=!0}},showIn:function(e,t){void 0===t&&(t="white");var n={iosPreloaderContent:Ko,mdPreloaderContent:Yo,auroraPreloaderContent:Jo}[this.theme+"PreloaderContent"]||"";gl(e||"html").addClass("with-modal-preloader"),gl(e||this.$el).append('\n      <div class="preloader-backdrop"></div>\n      <div class="preloader-modal">\n        <div class="preloader color-'+t+'">'+n+"</div>\n      </div>\n    ")},hide:function(){Fc.visible&&(gl("html").removeClass("with-modal-preloader"),this.$el.find(".preloader-backdrop, .preloader-modal").remove(),Fc.visible=!1)},hideIn:function(e){gl(e||"html").removeClass("with-modal-preloader"),gl(e||this.$el).find(".preloader-backdrop, .preloader-modal").remove()}},_c={name:"preloader",create:function(){bs(this,{preloader:Fc})},on:{photoBrowserOpen:function(e){var t=this;e.$el.find(".preloader").each((function(e){t.preloader.init(e)}))},tabMounted:function(e){var t=this;gl(e).find(".preloader").each((function(e){t.preloader.init(e)}))},pageInit:function(e){var t=this;e.$el.find(".preloader").each((function(e){t.preloader.init(e)}))}},vnode:{preloader:{insert:function(e){var t=e.elm;this.preloader.init(t)}}}},Lc={set:function(){for(var e=this,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var r=n[0],o=n[1],s=n[2];if("number"==typeof n[0]&&(o=n[0],s=n[1],r=e.$el),null==o)return r;o||(o=0);var i=gl(r||e.$el);if(0===i.length)return r;var l,u=Math.min(Math.max(o,0),100);if(0===(l=i.hasClass("progressbar")?i.eq(0):i.children(".progressbar")).length||l.hasClass("progressbar-infinite"))return l;var c=l.children("span");return 0===c.length&&(c=gl("<span></span>"),l.append(c)),c.transition(void 0!==s?s:"").transform("translate3d("+(-100+u)+"%,0,0)"),l[0]},show:function(){for(var e=this,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var r=n[0],o=n[1],s=n[2],i="determined";2===n.length?"string"!=typeof n[0]&&"object"!=typeof n[0]||"string"!=typeof n[1]?"number"==typeof n[0]&&"string"==typeof n[1]&&(o=n[0],s=n[1],r=e.$el):(r=n[0],s=n[1],o=n[2],i="infinite"):1===n.length?"number"==typeof n[0]?(r=e.$el,o=n[0]):"string"==typeof n[0]&&(i="infinite",r=e.$el,s=n[0]):0===n.length&&(i="infinite",r=e.$el);var l,u=gl(r);if(0!==u.length)return u.hasClass("progressbar")||u.hasClass("progressbar-infinite")?l=u:0===(l=u.children(".progressbar:not(.progressbar-out), .progressbar-infinite:not(.progressbar-out)")).length&&(l=gl('\n          <span class="progressbar'+("infinite"===i?"-infinite":"")+(s?" color-"+s:"")+' progressbar-in">\n            '+("infinite"===i?"":"<span></span>")+"\n          </span>"),u.append(l)),void 0!==o&&e.progressbar.set(l,o),l[0]},hide:function(e,t){void 0===t&&(t=!0);var n,a=gl(e||this.$el);if(0!==a.length)return 0===(n=a.hasClass("progressbar")||a.hasClass("progressbar-infinite")?a:a.children(".progressbar, .progressbar-infinite")).length||!n.hasClass("progressbar-in")||n.hasClass("progressbar-out")||n.removeClass("progressbar-in").addClass("progressbar-out").animationEnd((function(){t&&n.remove()})),n}},zc={name:"progressbar",create:function(){bs(this,{progressbar:Lc})},on:{tabMounted:function(e){var t=this;gl(e).find(".progressbar").each((function(e){var n=gl(e);t.progressbar.set(n,n.attr("data-progress"))}))},pageInit:function(e){var t=this;e.$el.find(".progressbar").each((function(e){var n=gl(e);t.progressbar.set(n,n.attr("data-progress"))}))}},vnode:{progressbar:{insert:function(e){var t=e.elm;this.progressbar.set(t,t.getAttribute("data-progress"))},update:function(e){var t=e.elm;this.progressbar.set(t,t.getAttribute("data-progress"))}}}},Vc={init:function(){var e,t,n,a,r,o,s,i,l,u,c,p,d,h,f,m,g,v,b,y,w,x=this,k=Vo();function C(a,i){t=!1,e=!0,w=!1,n="touchstart"===a.type?a.targetTouches[0].pageY:a.pageY,r=gl(a.target).closest("li").eq(0),d=r.index(),s=r.parents(".sortable");var l=r.parents(".list-group");l.length&&l.parents(s).length&&(s=l),o=s.children("ul").children("li:not(.disallow-sorting):not(.no-sorting)"),x.panel&&(x.panel.allowOpen=!1),x.swipeout&&(x.swipeout.allow=!1),i&&(r.addClass("sorting"),s.addClass("sortable-sorting"),w=!0)}var E=!!ws().passiveListener&&{passive:!1,capture:!1};gl(k).on(x.touchEvents.start,".list.sortable .sortable-handler",C,E),x.on("touchmove:active",(function(d){if(e&&r){var w="touchmove"===d.type?d.targetTouches[0].pageY:d.pageY;if(!t){h=r.parents(".page"),f=r.parents(".page-content");var k=parseInt(f.css("padding-top"),10),C=parseInt(f.css("padding-bottom"),10);y=f[0].scrollTop,g=h.offset().top+k,m=h.height()-k-C,r.addClass("sorting"),s.addClass("sortable-sorting"),v=r[0].offsetTop,l=r[0].offsetTop,u=r.parent().height()-v-r.height(),i=r[0].offsetHeight,b=r.offset().top}t=!0,d.preventDefault(),d.f7PreventSwipePanel=!0,a=w-n;var E=f[0].scrollTop-y,S=Math.min(Math.max(a+E,-l),u);r.transform("translate3d(0,"+S+"px,0)");var $,T=44,I=!0;a+E+T<-l&&(I=!1),a+E-T>u&&(I=!1),p=void 0,c=void 0,I&&(b+a+i+T>g+m&&($=b+a+i+T-(g+m)),b+a<g+T&&($=b+a-g-T),$&&(f[0].scrollTop+=$)),o.each((function(e){var t=gl(e);if(t[0]!==r[0]){var n,a=t[0].offsetTop,o=t.height(),l=v+S,u=t[0].f7Translate;l>=a-o/2&&r.index()<t.index()?(n=-i,t.transform("translate3d(0, "+n+"px,0)"),c=t,p=void 0):l<=a+o/2&&r.index()>t.index()?(n=i,t[0].f7Translate=n,t.transform("translate3d(0, "+n+"px,0)"),c=void 0,p||(p=t)):(n=void 0,t.transform("translate3d(0, 0%,0)")),u!==n&&(t.trigger("sortable:move"),x.emit("sortableMove",t[0],s[0])),t[0].f7Translate=n}}))}})),x.on("touchend:passive",(function(){if(!e||!t)return e&&!t&&(x.panel&&(x.panel.allowOpen=!0),x.swipeout&&(x.swipeout.allow=!0),w&&(r.removeClass("sorting"),s.removeClass("sortable-sorting"))),e=!1,void(t=!1);var n;x.panel&&(x.panel.allowOpen=!0),x.swipeout&&(x.swipeout.allow=!0),o.transform(""),r.removeClass("sorting"),s.removeClass("sortable-sorting"),c?n=c.index():p&&(n=p.index());var a=s.dataset().sortableMoveElements;if(void 0===a&&(a=x.params.sortable.moveElements),a&&(c&&r.insertAfter(c),p&&r.insertBefore(p)),(c||p)&&s.hasClass("virtual-list")){void 0===(d=r[0].f7VirtualListIndex)&&(d=r.attr("data-virtual-list-index")),p?void 0===(n=p[0].f7VirtualListIndex)&&(n=p.attr("data-virtual-list-index")):void 0===(n=c[0].f7VirtualListIndex)&&(n=c.attr("data-virtual-list-index")),n=null!==n?parseInt(n,10):void 0;var i=s[0].f7VirtualList;d&&(d=parseInt(d,10)),n&&(n=parseInt(n,10)),i&&i.moveItem(d,n)}void 0===n||Number.isNaN(n)||n===d||(r.trigger("sortable:sort",{from:d,to:n}),x.emit("sortableSort",r[0],{from:d,to:n,el:r[0]},s[0])),p=void 0,c=void 0,e=!1,t=!1})),gl(k).on("taphold",".sortable-tap-hold",(function(e,t){C(t,!0)}))},enable:function(e){void 0===e&&(e=".list.sortable");var t=gl(e);0!==t.length&&(t.addClass("sortable-enabled"),t.trigger("sortable:enable"),this.emit("sortableEnable",t[0]))},disable:function(e){void 0===e&&(e=".list.sortable");var t=gl(e);0!==t.length&&(t.removeClass("sortable-enabled"),t.trigger("sortable:disable"),this.emit("sortableDisable",t[0]))},toggle:function(e){void 0===e&&(e=".list.sortable");var t=gl(e);0!==t.length&&(t.hasClass("sortable-enabled")?this.sortable.disable(t):this.sortable.enable(t))}},Wc={name:"sortable",params:{sortable:{moveElements:!0}},create:function(){bs(this,{sortable:Vc})},on:{init:function(){this.params.sortable&&this.sortable.init()}},clicks:{".sortable-enable":function(e,t){void 0===t&&(t={});this.sortable.enable(t.sortable)},".sortable-disable":function(e,t){void 0===t&&(t={});this.sortable.disable(t.sortable)},".sortable-toggle":function(e,t){void 0===t&&(t={});this.sortable.toggle(t.sortable)}}},Hc={init:function(){var e,t,n,a,r,o,s,i,l,u,c,p,d,h,f,m,g,v,b,y,w,x=this,k=Vo(),C={};var E=!!ws().passiveListener&&{passive:!0};x.on("touchstart",(function(e){if(Hc.el){var t=gl(e.target);gl(Hc.el).is(t[0])||t.parents(".swipeout").is(Hc.el)||t.hasClass("modal-in")||(t.attr("class")||"").indexOf("-backdrop")>0||t.hasClass("actions-modal")||t.parents(".actions-modal.modal-in, .dialog.modal-in").length>0||x.swipeout.close(Hc.el)}})),gl(k).on(x.touchEvents.start,"li.swipeout",(function(r){x.swipeout.allow&&(t=!1,e=!0,n=void 0,C.x="touchstart"===r.type?r.targetTouches[0].pageX:r.pageX,C.y="touchstart"===r.type?r.targetTouches[0].pageY:r.pageY,a=(new Date).getTime(),o=gl(this))}),E),x.on("touchmove:active",(function(a){if(e){var k="touchmove"===a.type?a.targetTouches[0].pageX:a.pageX,E="touchmove"===a.type?a.targetTouches[0].pageY:a.pageY;if(void 0===n&&(n=!!(n||Math.abs(E-C.y)>Math.abs(k-C.x))),n)e=!1;else{if(!t){if(gl(".list.sortable-opened").length>0)return;s=o.find(".swipeout-content"),i=o.find(".swipeout-actions-right"),l=o.find(".swipeout-actions-left"),u=null,c=null,f=null,m=null,b=null,v=null,l.length>0&&(u=l.outerWidth(),f=l.children("a"),v=l.find(".swipeout-overswipe")),i.length>0&&(c=i.outerWidth(),m=i.children("a"),b=i.find(".swipeout-overswipe")),(d=o.hasClass("swipeout-opened"))&&(h=o.find(".swipeout-actions-left.swipeout-actions-opened").length>0?"left":"right"),o.removeClass("swipeout-transitioning"),x.params.swipeout.noFollow||(o.find(".swipeout-actions-opened").removeClass("swipeout-actions-opened"),o.removeClass("swipeout-opened"))}if(t=!0,a.cancelable&&a.preventDefault(),r=k-C.x,p=r,d&&("right"===h?p-=c:p+=u),p>0&&0===l.length||p<0&&0===i.length){if(!d)return e=!1,t=!1,s.transform(""),m&&m.length>0&&m.transform(""),void(f&&f.length>0&&f.transform(""));p=0}var S,$;if(p<0?g="to-left":p>0?g="to-right":g||(g="to-left"),a.f7PreventSwipePanel=!0,x.params.swipeout.noFollow)return d?("right"===h&&r>0&&x.swipeout.close(o),"left"===h&&r<0&&x.swipeout.close(o)):(r<0&&i.length>0&&x.swipeout.open(o,"right"),r>0&&l.length>0&&x.swipeout.open(o,"left")),e=!1,void(t=!1);if(y=!1,w=!1,i.length>0){var T=p;if($=T/c,T<-c){var I=T/-c;T=-c-Math.pow(-T-c,.8),p=T,b.length>0&&I>x.params.swipeout.overswipeRatio&&(w=!0)}"to-left"!==g&&($=0,T=0),m.each((function(e){var t=gl(e);void 0===e.f7SwipeoutButtonOffset&&(t[0].f7SwipeoutButtonOffset=e.offsetLeft),S=e.f7SwipeoutButtonOffset,b.length>0&&t.hasClass("swipeout-overswipe")&&"to-left"===g&&(t.css({left:(w?-S:0)+"px"}),w?(t.hasClass("swipeout-overswipe-active")||(o.trigger("swipeout:overswipeenter"),x.emit("swipeoutOverswipeEnter",o[0])),t.addClass("swipeout-overswipe-active")):(t.hasClass("swipeout-overswipe-active")&&(o.trigger("swipeout:overswipeexit"),x.emit("swipeoutOverswipeExit",o[0])),t.removeClass("swipeout-overswipe-active"))),t.transform("translate3d("+(T-S*(1+Math.max($,-1)))+"px,0,0)")}))}if(l.length>0){var N=p;if($=N/u,N>u){var O=N/c;N=u+Math.pow(N-u,.8),p=N,v.length>0&&O>x.params.swipeout.overswipeRatio&&(y=!0)}"to-right"!==g&&(N=0,$=0),f.each((function(e,t){var n=gl(e);void 0===e.f7SwipeoutButtonOffset&&(n[0].f7SwipeoutButtonOffset=u-e.offsetLeft-e.offsetWidth),S=e.f7SwipeoutButtonOffset,v.length>0&&n.hasClass("swipeout-overswipe")&&"to-right"===g&&(n.css({left:(y?S:0)+"px"}),y?(n.hasClass("swipeout-overswipe-active")||(o.trigger("swipeout:overswipeenter"),x.emit("swipeoutOverswipeEnter",o[0])),n.addClass("swipeout-overswipe-active")):(n.hasClass("swipeout-overswipe-active")&&(o.trigger("swipeout:overswipeexit"),x.emit("swipeoutOverswipeExit",o[0])),n.removeClass("swipeout-overswipe-active"))),f.length>1&&n.css("z-index",f.length-t),n.transform("translate3d("+(N+S*(1-Math.min($,1)))+"px,0,0)")}))}o.trigger("swipeout",$),x.emit("swipeout",o[0],$),s.transform("translate3d("+p+"px,0,0)")}}})),x.on("touchend:passive",(function(){if(!e||!t)return e=!1,void(t=!1);e=!1,t=!1;var n,h,v,b,k=(new Date).getTime()-a,C="to-left"===g?i:l,E="to-left"===g?c:u;if(n=k<300&&(r<-10&&"to-left"===g||r>10&&"to-right"===g)||k>=300&&Math.abs(p)>E/2?"open":"close",k<300&&(0===Math.abs(p)&&(n="close"),Math.abs(p)===E&&(n="open")),"open"===n){Hc.el=o[0],o.trigger("swipeout:open"),x.emit("swipeoutOpen",o[0]),o.addClass("swipeout-opened swipeout-transitioning");var S="to-left"===g?-E:E;if(s.transform("translate3d("+S+"px,0,0)"),C.addClass("swipeout-actions-opened"),h="to-left"===g?m:f)for(v=0;v<h.length;v+=1)gl(h[v]).transform("translate3d("+S+"px,0,0)");w&&i.find(".swipeout-overswipe").trigger("click","f7Overswipe"),y&&l.find(".swipeout-overswipe").trigger("click","f7Overswipe")}else o.trigger("swipeout:close"),x.emit("swipeoutClose",o[0]),Hc.el=void 0,o.addClass("swipeout-transitioning").removeClass("swipeout-opened"),s.transform(""),C.removeClass("swipeout-actions-opened");f&&f.length>0&&f!==h&&f.each((function(e){var t=gl(e);void 0===(b=e.f7SwipeoutButtonOffset)&&(t[0].f7SwipeoutButtonOffset=u-e.offsetLeft-e.offsetWidth),t.transform("translate3d("+b+"px,0,0)")})),m&&m.length>0&&m!==h&&m.each((function(e){var t=gl(e);void 0===(b=e.f7SwipeoutButtonOffset)&&(t[0].f7SwipeoutButtonOffset=e.offsetLeft),t.transform("translate3d("+-b+"px,0,0)")})),s.transitionEnd((function(){d&&"open"===n||!d&&"close"===n||(o.trigger("open"===n?"swipeout:opened":"swipeout:closed"),x.emit("open"===n?"swipeoutOpened":"swipeoutClosed",o[0]),o.removeClass("swipeout-transitioning"),d&&"close"===n&&(i.length>0&&m.transform(""),l.length>0&&f.transform("")))}))}))},allow:!0,el:void 0,open:function(){for(var e=this,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var r=n[0],o=n[1],s=n[2];"function"==typeof n[1]&&(r=n[0],s=n[1],o=n[2]);var i=gl(r).eq(0);if(0!==i.length&&i.hasClass("swipeout")&&!i.hasClass("swipeout-opened")){o||(o=i.find(".swipeout-actions-right").length>0?"right":"left");var l=i.find(".swipeout-actions-"+o),u=i.find(".swipeout-content");if(0!==l.length){i.trigger("swipeout:open").addClass("swipeout-opened").removeClass("swipeout-transitioning"),e.emit("swipeoutOpen",i[0]),l.addClass("swipeout-actions-opened");var c=l.children("a"),p=l.outerWidth(),d="right"===o?-p:p;c.length>1&&c.each((function(e,t){var n=gl(e);"right"===o?n.transform("translate3d("+-e.offsetLeft+"px,0,0)"):n.css("z-index",c.length-t).transform("translate3d("+(p-e.offsetWidth-e.offsetLeft)+"px,0,0)")})),i.addClass("swipeout-transitioning"),u.transitionEnd((function(){i.trigger("swipeout:opened"),e.emit("swipeoutOpened",i[0]),s&&s.call(i[0])})),as((function(){c.transform("translate3d("+d+"px,0,0)"),u.transform("translate3d("+d+"px,0,0)")})),Hc.el=i[0]}}},close:function(e,t){var n=this,a=gl(e).eq(0);if(0!==a.length&&a.hasClass("swipeout-opened")){var r,o=a.find(".swipeout-actions-opened").hasClass("swipeout-actions-right")?"right":"left",s=a.find(".swipeout-actions-opened").removeClass("swipeout-actions-opened"),i=s.children("a"),l=s.outerWidth();n.swipeout.allow=!1,a.trigger("swipeout:close"),n.emit("swipeoutClose",a[0]),a.removeClass("swipeout-opened").addClass("swipeout-transitioning"),a.find(".swipeout-content").transform("").transitionEnd(u),r=setTimeout(u,500),i.each((function(e){var t=gl(e);"right"===o?t.transform("translate3d("+-e.offsetLeft+"px,0,0)"):t.transform("translate3d("+(l-e.offsetWidth-e.offsetLeft)+"px,0,0)"),t.css({left:"0px"}).removeClass("swipeout-overswipe-active")})),Hc.el&&Hc.el===a[0]&&(Hc.el=void 0)}function u(){n.swipeout.allow=!0,a.hasClass("swipeout-opened")||(a.removeClass("swipeout-transitioning"),i.transform(""),a.trigger("swipeout:closed"),n.emit("swipeoutClosed",a[0]),t&&t.call(a[0]),r&&clearTimeout(r))}},delete:function(e,t){var n=this,a=gl(e).eq(0);0!==a.length&&(Hc.el=void 0,a.trigger("swipeout:delete"),n.emit("swipeoutDelete",a[0]),a.css({height:a.outerHeight()+"px"}),a.transitionEnd((function(){if(a.trigger("swipeout:deleted"),n.emit("swipeoutDeleted",a[0]),t&&t.call(a[0]),a.parents(".virtual-list").length>0){var e=a.parents(".virtual-list")[0].f7VirtualList,r=a[0].f7VirtualListIndex;e&&void 0!==r&&e.deleteItem(r)}else n.params.swipeout.removeElements?n.params.swipeout.removeElementsWithTimeout?setTimeout((function(){a.remove()}),n.params.swipeout.removeElementsTimeout):a.remove():a.removeClass("swipeout-deleting swipeout-transitioning")})),as((function(){a.addClass("swipeout-deleting swipeout-transitioning").css({height:"0px"}).find(".swipeout-content").transform("translate3d(-100%,0,0)")})))}},jc={name:"swipeout",params:{swipeout:{actionsNoFold:!1,noFollow:!1,removeElements:!0,removeElementsWithTimeout:!1,removeElementsTimeout:0,overswipeRatio:1.2}},create:function(){bs(this,{swipeout:Hc})},clicks:{".swipeout-open":function(e,t){void 0===t&&(t={});this.swipeout.open(t.swipeout,t.side)},".swipeout-close":function(e){var t=e.closest(".swipeout");0!==t.length&&this.swipeout.close(t)},".swipeout-delete":function(e,t){void 0===t&&(t={});var n=this,a=e.closest(".swipeout");if(0!==a.length){var r=t,o=r.confirm,s=r.confirmTitle;t.confirm?n.dialog.confirm(o,s,(function(){n.swipeout.delete(a)})):n.swipeout.delete(a)}}},on:{init:function(){this.params.swipeout&&this.swipeout.init()}}},Uc={toggleClicked:function(e){var t=e.closest(".accordion-item").eq(0);t.length||(t=e.parents("li").eq(0));var n=e.parents(".accordion-item-content").eq(0);n.length&&n.parents(t).length||e.parents("li").length>1&&e.parents("li")[0]!==t[0]||this.accordion.toggle(t)},open:function(e){var t=this,n=gl(e),a=!1;function r(){a=!0}if(n.trigger("accordion:beforeopen",{prevent:r},r),t.emit("accordionBeforeOpen",n[0],r),!a){var o=n.parents(".accordion-list").eq(0),s=n.children(".accordion-item-content");if(s.removeAttr("aria-hidden"),0===s.length&&(s=n.find(".accordion-item-content")),0!==s.length){var i=o.length>0&&n.parent().children(".accordion-item-opened");i.length>0&&t.accordion.close(i),s.transitionEnd((function(){n.hasClass("accordion-item-opened")?(s.transition(0),s.css("height","auto"),as((function(){s.transition(""),n.trigger("accordion:opened"),t.emit("accordionOpened",n[0])}))):(s.css("height",""),n.trigger("accordion:closed"),t.emit("accordionClosed",n[0]))})),s.css("height",s[0].scrollHeight+"px"),n.trigger("accordion:open"),n.addClass("accordion-item-opened"),t.emit("accordionOpen",n[0])}}},close:function(e){var t=this,n=gl(e),a=!1;function r(){a=!0}if(n.trigger("accordion:beforeclose",{prevent:r},r),t.emit("accordionBeforeClose",n[0],r),!a){var o=n.children(".accordion-item-content");0===o.length&&(o=n.find(".accordion-item-content")),n.removeClass("accordion-item-opened"),o.attr("aria-hidden",!0),o.transition(0),o.css("height",o[0].scrollHeight+"px"),o.transitionEnd((function(){n.hasClass("accordion-item-opened")?(o.transition(0),o.css("height","auto"),as((function(){o.transition(""),n.trigger("accordion:opened"),t.emit("accordionOpened",n[0])}))):(o.css("height",""),n.trigger("accordion:closed"),t.emit("accordionClosed",n[0]))})),as((function(){o.transition(""),o.css("height",""),n.trigger("accordion:close"),t.emit("accordionClose",n[0])}))}},toggle:function(e){var t=gl(e);0!==t.length&&(t.hasClass("accordion-item-opened")?this.accordion.close(e):this.accordion.open(e))}},Gc={name:"accordion",create:function(){bs(this,{accordion:Uc})},clicks:{".accordion-item .item-link, .accordion-item-toggle, .links-list.accordion-list > ul > li > a":function(e){Uc.toggleClicked.call(this,e)}}};function qc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xc(e,t){return Xc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Xc(e,t)}var Yc=function(e){var t,n;function a(t,n){var a;void 0===n&&(n={});var r,o=qc(a=e.call(this,n,[t])||this),s=xs(),i=Vo();"md"===t.theme?r=48:"ios"===t.theme?r=44:"aurora"===t.theme&&(r=38);var l={cols:1,height:r,cache:!0,dynamicHeightBufferSize:1,showFilteredItemsOnly:!1,renderExternal:void 0,setListHeight:!0,searchByItem:void 0,searchAll:void 0,ul:null,createUl:!0,scrollableParentEl:void 0,renderItem:function(e){return('\n          <li>\n            <div class="item-content">\n              <div class="item-inner">\n                <div class="item-title">'+e+"</div>\n              </div>\n            </div>\n          </li>\n        ").trim()},on:{}};if(o.useModulesParams(l),o.params=cs(l,n),void 0!==o.params.height&&o.params.height||(o.params.height=r),o.$el=gl(n.el),o.el=o.$el[0],0===o.$el.length)return qc(a);o.$el[0].f7VirtualList=o,o.items=o.params.items,o.params.showFilteredItemsOnly&&(o.filteredItems=[]),o.params.renderItem&&(o.renderItem=o.params.renderItem),o.$pageContentEl=o.$el.parents(".page-content"),o.pageContentEl=o.$pageContentEl[0],o.$scrollableParentEl=o.params.scrollableParentEl?gl(o.params.scrollableParentEl).eq(0):o.$pageContentEl,!o.$scrollableParentEl.length&&o.$pageContentEl.length&&(o.$scrollableParentEl=o.$pageContentEl),o.scrollableParentEl=o.$scrollableParentEl[0],void 0!==o.params.updatableScroll?o.updatableScroll=o.params.updatableScroll:(o.updatableScroll=!0,s.ios&&s.osVersion.split(".")[0]<8&&(o.updatableScroll=!1));var u,c=o.params.ul;o.$ul=c?gl(o.params.ul):o.$el.children("ul"),0===o.$ul.length&&o.params.createUl&&(o.$el.append("<ul></ul>"),o.$ul=o.$el.children("ul")),o.ul=o.$ul[0],u=o.ul||o.params.createUl?o.$ul:o.$el,cs(o,{$itemsWrapEl:u,itemsWrapEl:u[0],domCache:{},displayDomCache:{},tempDomElement:i.createElement("ul"),lastRepaintY:null,fragment:i.createDocumentFragment(),pageHeight:void 0,rowsPerScreen:void 0,rowsBefore:void 0,rowsAfter:void 0,rowsToRender:void 0,maxBufferHeight:0,listHeight:void 0,dynamicHeight:"function"==typeof o.params.height}),o.useModules();var p,d,h,f,m=o.handleScroll.bind(o),g=o.handleResize.bind(o);return o.attachEvents=function(){p=o.$el.parents(".page").eq(0),d=o.$el.parents(".tab").filter((function(e){return 0===gl(e).parent(".tabs").parent(".tabs-animated-wrap, .tabs-swipeable-wrap").length})).eq(0),h=o.$el.parents(".panel").eq(0),f=o.$el.parents(".popup").eq(0),o.$scrollableParentEl.on("scroll",m),p.length&&p.on("page:reinit",g),d.length&&d.on("tab:show",g),h.length&&h.on("panel:open",g),f.length&&f.on("popup:open",g),t.on("resize",g)},o.detachEvents=function(){o.$scrollableParentEl.off("scroll",m),p.length&&p.off("page:reinit",g),d.length&&d.off("tab:show",g),h.length&&h.off("panel:open",g),f.length&&f.off("popup:open",g),t.off("resize",g)},o.init(),o||qc(a)}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,Xc(t,n);var r=a.prototype;return r.setListSize=function(){var e=this,t=e.filteredItems||e.items;if(e.pageHeight=e.$scrollableParentEl[0].offsetHeight,e.dynamicHeight){e.listHeight=0,e.heights=[];for(var n=0;n<t.length;n+=1){var a=e.params.height(t[n]);e.listHeight+=a,e.heights.push(a)}}else e.listHeight=Math.ceil(t.length/e.params.cols)*e.params.height,e.rowsPerScreen=Math.ceil(e.pageHeight/e.params.height),e.rowsBefore=e.params.rowsBefore||2*e.rowsPerScreen,e.rowsAfter=e.params.rowsAfter||e.rowsPerScreen,e.rowsToRender=e.rowsPerScreen+e.rowsBefore+e.rowsAfter,e.maxBufferHeight=e.rowsBefore/2*e.params.height;(e.updatableScroll||e.params.setListHeight)&&e.$itemsWrapEl.css({height:e.listHeight+"px"})},r.render=function(e,t){var n=this;e&&(n.lastRepaintY=null);var a=-(n.$el[0].getBoundingClientRect().top-n.$scrollableParentEl[0].getBoundingClientRect().top);if(void 0!==t&&(a=t),null===n.lastRepaintY||Math.abs(a-n.lastRepaintY)>n.maxBufferHeight||!n.updatableScroll&&n.$scrollableParentEl[0].scrollTop+n.pageHeight>=n.$scrollableParentEl[0].scrollHeight){n.lastRepaintY=a;var r,o,s,i=n.filteredItems||n.items,l=0,u=0;if(n.dynamicHeight){var c,p=0;n.maxBufferHeight=n.pageHeight;for(var d=0;d<n.heights.length;d+=1)c=n.heights[d],void 0===r&&(p+c>=a-2*n.pageHeight*n.params.dynamicHeightBufferSize?r=d:l+=c),void 0===o&&((p+c>=a+2*n.pageHeight*n.params.dynamicHeightBufferSize||d===n.heights.length-1)&&(o=d+1),u+=c),p+=c;o=Math.min(o,i.length)}else(r=(parseInt(a/n.params.height,10)-n.rowsBefore)*n.params.cols)<0&&(r=0),o=Math.min(r+n.rowsToRender*n.params.cols,i.length);var h,f=[];for(n.reachEnd=!1,h=r;h<o;h+=1){var m=void 0,g=n.items.indexOf(i[h]);h===r&&(n.currentFromIndex=g),h===o-1&&(n.currentToIndex=g),n.filteredItems?n.items[g]===n.filteredItems[n.filteredItems.length-1]&&(n.reachEnd=!0):g===n.items.length-1&&(n.reachEnd=!0),n.params.renderExternal?f.push(i[h]):n.domCache[g]?(m=n.domCache[g]).f7VirtualListIndex=g:(n.renderItem?n.tempDomElement.innerHTML=n.renderItem(i[h],g).trim():n.tempDomElement.innerHTML=i[h].toString().trim(),m=n.tempDomElement.childNodes[0],n.params.cache&&(n.domCache[g]=m),m.f7VirtualListIndex=g),h===r&&(s=n.dynamicHeight?l:h*n.params.height/n.params.cols),n.params.renderExternal||(m.style.top=s+"px",n.emit("local::itemBeforeInsert vlItemBeforeInsert",n,m,i[h]),n.fragment.appendChild(m))}n.updatableScroll||(n.dynamicHeight?n.itemsWrapEl.style.height=u+"px":n.itemsWrapEl.style.height=h*n.params.height/n.params.cols+"px"),n.params.renderExternal?i&&0===i.length&&(n.reachEnd=!0):(n.emit("local::beforeClear vlBeforeClear",n,n.fragment),n.itemsWrapEl.innerHTML="",n.emit("local::itemsBeforeInsert vlItemsBeforeInsert",n,n.fragment),i&&0===i.length?(n.reachEnd=!0,n.params.emptyTemplate&&(n.itemsWrapEl.innerHTML=n.params.emptyTemplate)):n.itemsWrapEl.appendChild(n.fragment),n.emit("local::itemsAfterInsert vlItemsAfterInsert",n,n.fragment)),void 0!==t&&e&&n.$scrollableParentEl.scrollTop(t,0),n.params.renderExternal&&n.params.renderExternal(n,{fromIndex:r,toIndex:o,listHeight:n.listHeight,topPosition:s,items:f})}},r.filterItems=function(e,t){void 0===t&&(t=!0);var n=this;n.filteredItems=[];for(var a=0;a<e.length;a+=1)n.filteredItems.push(n.items[e[a]]);t&&(n.$scrollableParentEl[0].scrollTop=0),n.update()},r.resetFilter=function(){var e=this;e.params.showFilteredItemsOnly?e.filteredItems=[]:(e.filteredItems=null,delete e.filteredItems),e.update()},r.scrollToItem=function(e){var t=this;if(e>t.items.length)return!1;var n=0;if(t.dynamicHeight)for(var a=0;a<e;a+=1)n+=t.heights[a];else n=e*t.params.height;var r=t.$el[0].offsetTop;return t.render(!0,r+n-parseInt(t.$scrollableParentEl.css("padding-top"),10)),!0},r.handleScroll=function(){this.render()},r.isVisible=function(){var e=this;return!!(e.el.offsetWidth||e.el.offsetHeight||e.el.getClientRects().length)},r.handleResize=function(){var e=this;e.isVisible()&&(e.setListSize(),e.render(!0))},r.appendItems=function(e){for(var t=0;t<e.length;t+=1)this.items.push(e[t]);this.update()},r.appendItem=function(e){this.appendItems([e])},r.replaceAllItems=function(e){var t=this;t.items=e,delete t.filteredItems,t.domCache={},t.update()},r.replaceItem=function(e,t){var n=this;n.items[e]=t,n.params.cache&&delete n.domCache[e],n.update()},r.prependItems=function(e){for(var t=this,n=e.length-1;n>=0;n-=1)t.items.unshift(e[n]);if(t.params.cache){var a={};Object.keys(t.domCache).forEach((function(n){a[parseInt(n,10)+e.length]=t.domCache[n]})),t.domCache=a}t.update()},r.prependItem=function(e){this.prependItems([e])},r.moveItem=function(e,t){var n=this,a=e,r=t;if(a!==r){var o=n.items.splice(a,1)[0];if(r>=n.items.length?(n.items.push(o),r=n.items.length-1):n.items.splice(r,0,o),n.params.cache){var s={};Object.keys(n.domCache).forEach((function(e){var t=parseInt(e,10),o=a<r?a:r,i=a<r?r:a,l=a<r?-1:1;(t<o||t>i)&&(s[t]=n.domCache[t]),t===o&&(s[i]=n.domCache[t]),t>o&&t<=i&&(s[t+l]=n.domCache[t])})),n.domCache=s}n.update()}},r.insertItemBefore=function(e,t){var n=this;if(0!==e)if(e>=n.items.length)n.appendItem(t);else{if(n.items.splice(e,0,t),n.params.cache){var a={};Object.keys(n.domCache).forEach((function(t){var r=parseInt(t,10);r>=e&&(a[r+1]=n.domCache[r])})),n.domCache=a}n.update()}else n.prependItem(t)},r.deleteItems=function(e){for(var t,n=this,a=0,r=function(r){var o=e[r];void 0!==t&&o>t&&(a=-r),o+=a,t=e[r];var s=n.items.splice(o,1)[0];if(n.filteredItems&&n.filteredItems.indexOf(s)>=0&&n.filteredItems.splice(n.filteredItems.indexOf(s),1),n.params.cache){var i={};Object.keys(n.domCache).forEach((function(e){var t=parseInt(e,10);t===o?delete n.domCache[o]:parseInt(e,10)>o?i[t-1]=n.domCache[e]:i[t]=n.domCache[e]})),n.domCache=i}},o=0;o<e.length;o+=1)r(o);n.update()},r.deleteAllItems=function(){var e=this;e.items=[],delete e.filteredItems,e.params.cache&&(e.domCache={}),e.update()},r.deleteItem=function(e){this.deleteItems([e])},r.clearCache=function(){this.domCache={}},r.update=function(e){var t=this;e&&t.params.cache&&(t.domCache={}),t.setListSize(),t.render(!0)},r.init=function(){var e=this;e.attachEvents(),e.setListSize(),e.render()},r.destroy=function(){var e=this;e.detachEvents(),e.$el[0].f7VirtualList=null,delete e.$el[0].f7VirtualList,Qo(e),e=null},a}(Ts),Kc=Yc,Jc={name:"virtualList",static:{VirtualList:Kc},create:function(){this.virtualList=wl({defaultSelector:".virtual-list",constructor:Kc,app:this,domProp:"f7VirtualList"})}};function Zc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qc(e,t){return Qc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Qc(e,t)}var ep=function(e){var t,n;function a(t,n){var a;void 0===n&&(n={});var r,o,s,i,l=Zc(a=e.call(this,n,[t])||this),u={el:null,listEl:null,indexes:"auto",iosItemHeight:14,mdItemHeight:14,auroraItemHeight:14,scrollList:!0,label:!1,renderItem:function(e,t){return("\n          <li>"+e+"</li>\n        ").trim()},renderSkipPlaceholder:function(){return'<li class="list-index-skip-placeholder"></li>'},on:{}};if(l.useModulesParams(u),l.params=cs(u,n),!l.params.el)return l||Zc(a);if((r=gl(l.params.el))[0].f7ListIndex)return r[0].f7ListIndex||Zc(a);if(0===(i=r.find("ul")).length&&(i=gl("<ul></ul>"),r.append(i)),l.params.listEl&&(o=gl(l.params.listEl)),"auto"===l.params.indexes&&!o)return l||Zc(a);function c(){var e={index:l};l.calcSize(),e!==l.height&&l.render()}function p(e){var t=gl(e.target).closest("li");if(t.length){var n=t.index();if(l.skipRate>0){var a=n/(t.siblings("li").length-1);n=Math.round((l.indexes.length-1)*a)}var r=l.indexes[n];l.$el.trigger("listindex:click",{content:r,index:n}),l.emit("local::click listIndexClick",l,r,n),l.$el.trigger("listindex:select",{content:r,index:n}),l.emit("local::select listIndexSelect",l,r,n),l.$listEl&&l.params.scrollList&&l.scrollListToIndex(r,n)}}o?s=o.parents(".page-content").eq(0):0===(s=r.siblings(".page-content").eq(0)).length&&(s=r.parents(".page").eq(0).find(".page-content").eq(0)),r[0].f7ListIndex=l,cs(l,{app:t,$el:r,el:r&&r[0],$ul:i,ul:i&&i[0],$listEl:o,listEl:o&&o[0],$pageContentEl:s,pageContentEl:s&&s[0],indexes:n.indexes,height:0,skipRate:0}),l.useModules();var d,h,f,m,g,v={},b=null;function y(e){var t=i.children();t.length&&(f=t[0].getBoundingClientRect().top,m=t[t.length-1].getBoundingClientRect().top+t[0].offsetHeight,v.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,v.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,d=!0,h=!1,b=null)}function w(e){if(d){!h&&l.params.label&&(g=gl('<span class="list-index-label"></span>'),r.append(g)),h=!0;var t="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;e.preventDefault();var n=(t-f)/(m-f);n=Math.min(Math.max(n,0),1);var a=Math.round((l.indexes.length-1)*n),o=l.indexes[a],s=m-f,i=(l.height-s)/2+(1-n)*s;a!==b&&(l.params.label&&g.html(o).transform("translateY(-"+i+"px)"),l.$listEl&&l.params.scrollList&&l.scrollListToIndex(o,a)),b=a,l.$el.trigger("listindex:select"),l.emit("local::select listIndexSelect",l,o,a)}}function x(){d&&(d=!1,h=!1,l.params.label&&(g&&g.remove(),g=void 0))}var k=!!ws().passiveListener&&{passive:!0};return l.attachEvents=function(){r.parents(".tab").on("tab:show",c),r.parents(".page").on("page:reinit",c),r.parents(".panel").on("panel:open",c),r.parents(".sheet-modal, .actions-modal, .popup, .popover, .login-screen, .dialog, .toast").on("modal:open",c),t.on("resize",c),r.on("click",p),r.on(t.touchEvents.start,y,k),t.on("touchmove:active",w),t.on("touchend:passive",x)},l.detachEvents=function(){r.parents(".tab").off("tab:show",c),r.parents(".page").off("page:reinit",c),r.parents(".panel").off("panel:open",c),r.parents(".sheet-modal, .actions-modal, .popup, .popover, .login-screen, .dialog, .toast").off("modal:open",c),t.off("resize",c),r.off("click",p),r.off(t.touchEvents.start,y,k),t.off("touchmove:active",w),t.off("touchend:passive",x)},l.init(),l||Zc(a)}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,Qc(t,n);var r=a.prototype;return r.scrollListToIndex=function(e,t){var n,a=this,r=a.$listEl,o=a.$pageContentEl,s=a.app;if(!r||!o||0===o.length)return a;if(r.find(".list-group-title, .item-divider").each((function(t){if(!n){var a=gl(t);a.text()===e&&(n=a)}})),!n||0===n.length)return a;var i=n.parent().offset().top,l=parseInt(o.css("padding-top"),10),u=o[0].scrollTop,c=n.offset().top;if(o.parents(".page-with-navbar-large").length){var p=s.navbar.getElByPage(o.parents(".page-with-navbar-large").eq(0)),d=gl(p).find(".title-large");d.length&&(l-=d[0].offsetHeight||0)}return i<=l?o.scrollTop(i+u-l):o.scrollTop(c+u-l),a},r.renderSkipPlaceholder=function(){return this.params.renderSkipPlaceholder.call(this)},r.renderItem=function(e,t){return this.params.renderItem.call(this,e,t)},r.render=function(){var e,t=this,n=t.$ul,a=t.indexes,r=t.skipRate,o=a.map((function(n,a){if(a%r!=0&&r>0)return e=!0,"";var o=t.renderItem(n,a);return e&&(o=t.renderSkipPlaceholder()+o),e=!1,o})).join("");return n.html(o),t},r.calcSize=function(){var e=this,t=e.app,n=e.params,a=e.el,r=e.indexes,o=a.offsetHeight,s=n[t.theme+"ItemHeight"],i=Math.floor(o/s),l=r.length,u=0;return l>i&&(u=Math.ceil((2*l-1)/i)),e.height=o,e.skipRate=u,e},r.calcIndexes=function(){var e=this;return"auto"===e.params.indexes?(e.indexes=[],e.$listEl.find(".list-group-title, .item-divider").each((function(t){var n=gl(t).text();e.indexes.indexOf(n)<0&&e.indexes.push(n)}))):e.indexes=e.params.indexes,e},r.update=function(){var e=this;return e.calcIndexes(),e.calcSize(),e.render(),e},r.init=function(){var e=this;e.calcIndexes(),e.calcSize(),e.render(),e.attachEvents()},r.destroy=function(){var e=this;e.$el.trigger("listindex:beforedestroy",e),e.emit("local::beforeDestroy listIndexBeforeDestroy"),e.detachEvents(),e.$el[0]&&(e.$el[0].f7ListIndex=null,delete e.$el[0].f7ListIndex),Qo(e),e=null},a}(Ts),tp=ep,np={name:"listIndex",static:{ListIndex:tp},create:function(){this.listIndex=wl({defaultSelector:".list-index",constructor:tp,app:this,domProp:"f7ListIndex"})},on:{tabMounted:function(e){var t=this;gl(e).find(".list-index-init").each((function(e){var n=cs(gl(e).dataset(),{el:e});t.listIndex.create(n)}))},tabBeforeRemove:function(e){gl(e).find(".list-index-init").each((function(e){e.f7ListIndex&&e.f7ListIndex.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".list-index-init").each((function(e){var n=cs(gl(e).dataset(),{el:e});t.listIndex.create(n)}))},pageBeforeRemove:function(e){e.$el.find(".list-index-init").each((function(e){e.f7ListIndex&&e.f7ListIndex.destroy()}))}},vnode:{"list-index-init":{insert:function(e){var t=e.elm,n=cs(gl(t).dataset(),{el:t});this.listIndex.create(n)},destroy:function(e){var t=e.elm;t.f7ListIndex&&t.f7ListIndex.destroy()}}}},ap={show:function(){for(var e,t,n,a,r,o=this,s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];1===i.length&&i[0]&&i[0].constructor===Object?(e=i[0].tabEl,t=i[0].tabLinkEl,n=i[0].animate,a=i[0].tabRoute,r=i[0].animatedInit):(e=i[0],t=i[1],n=i[2],a=i[3],"boolean"==typeof i[1]&&(e=i[0],n=i[1],t=i[2],a=i[3],i.length>2&&t.constructor===Object&&(e=i[0],n=i[1],a=i[2],t=i[3]))),void 0===n&&(n=!0);var u,c=gl(e);if(a&&c[0]&&(c[0].f7TabRoute=a),!r&&(0===c.length||c.hasClass("tab-active")))return{$newTabEl:c,newTabEl:c[0]};t&&(u=gl(t));var p=c.parent(".tabs");if(0===p.length)return{$newTabEl:c,newTabEl:c[0]};o.swipeout&&(o.swipeout.allowOpen=!0);var d=[];function h(e){d.push(e)}function f(){d.forEach((function(e){e()}))}var m,g=!1;if(p.parent().hasClass("tabs-animated-wrap")){p.parent()[n?"removeClass":"addClass"]("not-animated");var v=parseFloat(p.css("transition-duration").replace(",","."));n&&v&&(p.transitionEnd(f),g=!0);var b=100*(o.rtl?c.index():-c.index());p.transform("translate3d("+b+"%,0,0)")}p.parent().hasClass("tabs-swipeable-wrap")&&o.swiper&&((m=p.parent()[0].swiper)&&m.activeIndex!==c.index()?(g=!0,m.once("slideChangeTransitionEnd",(function(){f()})).slideTo(c.index(),n?void 0:0)):m&&m.animating&&(g=!0,m.once("slideChangeTransitionEnd",(function(){f()}))));var y=p.children(".tab-active");if(y.removeClass("tab-active"),!r&&(!m||m&&!m.animating||m&&a)&&(y.hasClass("view")&&y.children(".page").length&&y.children(".page").each((function(e){gl(e).trigger("page:tabhide"),o.emit("pageTabHide",e)})),y.trigger("tab:hide"),o.emit("tabHide",y[0])),c.addClass("tab-active"),!r&&(!m||m&&!m.animating||m&&a)&&(c.hasClass("view")&&c.children(".page").length&&c.children(".page").each((function(e){gl(e).trigger("page:tabshow"),o.emit("pageTabShow",e)})),c.trigger("tab:show"),o.emit("tabShow",c[0])),!u&&((!(u=gl("string"==typeof e?'.tab-link[href="'+e+'"]':'.tab-link[href="#'+c.attr("id")+'"]'))||u&&0===u.length)&&gl("[data-tab]").each((function(e){c.is(gl(e).attr("data-tab"))&&(u=gl(e))})),a&&(!u||u&&0===u.length)&&0===(u=gl('[data-route-tab-id="'+a.route.tab.id+'"]')).length&&(u=gl('.tab-link[href="'+a.url+'"]')),u.length>1&&c.parents(".page").length&&(u=u.filter((function(e){return gl(e).parents(".page")[0]===c.parents(".page")[0]})),"ios"===o.theme&&0===u.length&&a))){var w=c.parents(".page"),x=gl(o.navbar.getElByPage(w));0===(u=x.find('[data-route-tab-id="'+a.route.tab.id+'"]')).length&&(u=x.find('.tab-link[href="'+a.url+'"]'))}if(u.length>0){var k;if(y&&y.length>0){var C=y.attr("id");C&&(!(k=gl('.tab-link[href="#'+C+'"]'))||k&&0===k.length)&&(k=gl('.tab-link[data-route-tab-id="'+C+'"]')),(!k||k&&0===k.length)&&gl("[data-tab]").each((function(e){y.is(gl(e).attr("data-tab"))&&(k=gl(e))})),(!k||k&&0===k.length)&&(k=u.siblings(".tab-link-active"))}else a&&(k=u.siblings(".tab-link-active"));if(k&&k.length>1&&y&&y.parents(".page").length&&(k=k.filter((function(e){return gl(e).parents(".page")[0]===y.parents(".page")[0]}))),k&&k.length>0&&k.removeClass("tab-link-active"),u&&u.length>0){u.addClass("tab-link-active");var E=u.parents(".tabbar, .tabbar-labels"),S=o.toolbar&&E.length>0&&(E.hasClass("tabbar-highlight")||"ios"!==o.theme);S&&o.toolbar.setHighlight(E)}}return{$newTabEl:c,newTabEl:c[0],$oldTabEl:y,oldTabEl:y[0],onTabsChanged:h,animated:g}}},rp={name:"tabs",create:function(){cs(this,{tab:{show:ap.show.bind(this)}})},on:{"pageInit tabMounted":function(e){var t=gl(e.el||e).find(".tabs-animated-wrap > .tabs > .tab-active")[0];if(t){this.tab.show({tabEl:t,animatedInit:!0,animate:!1})}}},clicks:{".tab-link":function(e,t){if(void 0===t&&(t={}),e.attr("href")&&0===e.attr("href").indexOf("#")||e.attr("data-tab")){this.tab.show({tabEl:t.tab||e.attr("href"),tabLinkEl:e,animate:t.animate})}}}};var op=function(e){var t=e.app;if(!e.swipeInitialized){cs(e,{swipeable:!0,swipeInitialized:!0});var n,a,r,o,s,i,l,u,c,p,d,h,f,m=e.params,g=e.$el,v=e.$backdropEl,b=e.side,y=e.effect,w={},x=0;t.on("touchstart:passive",k),t.on("touchmove:active",C),t.on("touchend:passive",E),t.on("gesturestart",S),t.on("gestureend",$),e.on("panelDestroy",(function(){t.off("touchstart:passive",k),t.off("touchmove:active",C),t.off("touchend:passive",E),t.off("gesturestart",S),t.off("gestureend",$)}))}function k(u){if(e.swipeable&&!r&&t.panel.allowOpen&&(m.swipe||m.swipeOnlyClose)&&!a&&!(gl(".modal-in:not(.toast):not(.notification), .photo-browser-in").length>0)){var c=(n=t.panel.get("left"===b?"right":"left")||{}).opened&&n.$el&&!n.$el.hasClass("panel-in-breakpoint");if((e.opened||!c)&&(m.swipeOnlyClose||!c)&&(!u.target||"input"!==u.target.nodeName.toLowerCase()||"range"!==u.target.type)&&!(gl(u.target).closest(".range-slider, .tabs-swipeable-wrap, .calendar-months, .no-swipe-panel, .card-opened").length>0)&&(w.x="touchstart"===u.type?u.targetTouches[0].pageX:u.pageX,w.y="touchstart"===u.type?u.targetTouches[0].pageY:u.pageY,!m.swipeOnlyClose||e.opened)){if(m.swipeActiveArea&&!e.opened){if("left"===b&&w.x>m.swipeActiveArea)return;if("right"===b&&w.x<t.width-m.swipeActiveArea)return}x=0,f=gl(e.getViewEl()),o=!1,a=!0,s=void 0,i=!1,l=rs(),h=void 0}}}function C(n){if(a&&!r&&!i&&!((x+=1)<2))if(n.f7PreventSwipePanel||t.preventSwipePanelBySwipeBack||t.preventSwipePanel)a=!1;else{var l="touchmove"===n.type?n.targetTouches[0].pageX:n.pageX,k="touchmove"===n.type?n.targetTouches[0].pageY:n.pageY;if(void 0===s&&(s=!!(s||Math.abs(k-w.y)>Math.abs(l-w.x))),s)a=!1;else{if(!h){if(h=l>w.x?"to-right":"to-left",m.swipeActiveArea>0&&!e.opened){if("left"===b&&w.x>m.swipeActiveArea)return void(a=!1);if("right"===b&&w.x<t.width-m.swipeActiveArea)return void(a=!1)}if(g.hasClass("panel-in-breakpoint"))return void(a=!1);if("left"===b&&"to-left"===h&&!g.hasClass("panel-in")||"right"===b&&"to-right"===h&&!g.hasClass("panel-in"))return void(a=!1)}var C=e.opened?0:-m.swipeThreshold;"right"===b&&(C=-C),o||(e.opened||(e.insertToRoot(),g.addClass("panel-in-swipe"),v.css("visibility","visible"),g.trigger("panel:swipeopen"),e.emit("local::swipeOpen panelSwipeOpen",e)),d=g[0].offsetWidth,"reveal"===y&&g.hasClass("panel-in-collapsed")&&(d-=parseFloat(f.css("margin-"+b))),g.transition(0)),o=!0,n.cancelable&&n.preventDefault(),u=l-w.x+C,"right"===b?"cover"===y||"push"===y?((c=u+(e.opened?0:d))<0&&(c=0),c>d&&(c=d)):((c=u-(e.opened?d:0))>0&&(c=0),c<-d&&(c=-d)):((c=u+(e.opened?d:0))<0&&(c=0),c>d&&(c=d));var S=Math.abs(c/d);if("reveal"===y)m.swipeNoFollow||(f.transform("translate3d("+c+"px,0,0)").transition(0),v.transform("translate3d("+c+"px,0,0)").transition(0)),g.trigger("panel:swipe",Math.abs(c/d)),e.emit("local::swipe panelSwipe",e,Math.abs(c/d));else{if("left"===b&&(c-=d),!m.swipeNoFollow&&(v.transition(0),p=1-Math.abs(c/d),v.css({opacity:p}),g.transform("translate3d("+c+"px,0,0)").transition(0),"push"===y)){var $="left"===b?c+d:c-d;f.transform("translate3d("+$+"px,0,0)").transition(0),v.transform("translate3d("+$+"px,0,0)").transition(0)}g.trigger("panel:swipe",Math.abs(c/d)),e.emit("local::swipe panelSwipe",e,Math.abs(c/d))}if(m.swipeNoFollow)(e.opened&&0===S||!e.opened&&1===S)&&(i=!0,E(n))}}}function E(t){if(!a||!o)return a=!1,void(o=!1);var n="gesturestart"===t.type||r;a=!1,o=!1;var s,i=(new Date).getTime()-l,p=(0===c||Math.abs(c)===d)&&!m.swipeNoFollow,h=m.swipeThreshold||0;"swap"===(s=n?"reset":e.opened?"cover"===y||"push"===y?0===c?"reset":i<300&&Math.abs(c)>0?"swap":i>=300&&Math.abs(c)<d/2?"reset":"swap":c===-d?"reset":i<300&&Math.abs(c)>=0||i>=300&&Math.abs(c)<=d/2?"left"===b&&c===d?"reset":"swap":"reset":Math.abs(u)<h?"reset":"cover"===y||"push"===y?0===c||i<300&&Math.abs(c)>0||i>=300&&Math.abs(c)<d/2?"swap":"reset":0===c?"reset":i<300&&Math.abs(c)>0||i>=300&&Math.abs(c)>=d/2?"swap":"reset")&&(e.opened?e.close(!p):e.open(!p));var w=!0;if("reset"===s&&!e.opened)if(p)g.removeClass("panel-in-swipe");else{w=!1;var x="reveal"===y?f:g;e.setStateClasses("before-closing"),x.transitionEnd((function(){g.hasClass("panel-in")||(g.removeClass("panel-in-swipe"),e.setStateClasses("after-closing"))}))}"reveal"!==y&&"push"!==y||as((function(){f.transition(""),f.transform("")})),w&&g.removeClass("panel-in-swipe"),g.transition("").transform(""),v.transform("").transition("").css({opacity:"",visibility:""})}function S(e){r=!0,E(e)}function $(){r=!1}};var sp=function(e){var t=e.app,n=ws();if(!e.resizableInitialized){cs(e,{resizable:!0,resizableWidth:null,resizableInitialized:!0});var a=gl("html"),r=e.$el,o=e.$backdropEl,s=e.side,i=e.effect;if(r){var l,u,c,p,d,h,f,m,g={};0===e.$el.find(".panel-resize-handler").length&&e.$el.append('<div class="panel-resize-handler"></div>'),e.$resizeHandlerEl=e.$el.children(".panel-resize-handler"),r.addClass("panel-resizable");var v=!!n.passiveListener&&{passive:!0};e.$el.on(t.touchEvents.start,".panel-resize-handler",y,v),t.on("touchmove:active",w),t.on("touchend:passive",x),t.on("resize",k),e.on("beforeOpen",k),e.once("panelDestroy",(function(){r.removeClass("panel-resizable"),e.$resizeHandlerEl.remove(),e.$el.off(t.touchEvents.start,".panel-resize-handler",y,v),t.off("touchmove:active",w),t.off("touchend:passive",x),t.off("resize",k),e.off("beforeOpen",k)}))}}function b(e){if(!e)return null;if(e.indexOf("%")>=0||e.indexOf("vw")>=0)return parseInt(e,10)/100*t.width;var n=parseInt(e,10);return Number.isNaN(n)?null:n}function y(t){e.resizable&&r.hasClass("panel-resizable")&&(g.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,g.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,u=!1,l=!0,h=b(r.css("min-width")),f=b(r.css("max-width")),m=r.hasClass("panel-in-breakpoint"))}function w(n){if(l){var v="touchmove"===n.type?n.targetTouches[0].pageX:n.pageX;u||(p=r[0].offsetWidth,r.transition(0),r.addClass("panel-resizing"),a.css("cursor","col-resize"),("cover"!==i||m)&&(d=gl(e.getViewEl()),e.$containerEl&&e.$containerEl.hasClass("page")&&d.add(e.$containerEl.children(".page-content, .tabs, .fab"))),"cover"===i||m||(o.transition(0),d.transition(0))),u=!0,n.preventDefault(),c=v-g.x;var b="left"===s?p+c:p-c;h&&!Number.isNaN(h)&&(b=Math.max(b,h)),f&&!Number.isNaN(f)&&(b=Math.min(b,f)),b=Math.min(Math.max(b,0),t.width),e.resizableWidth=b,r[0].style.width=b+"px","cover"===i||m?m&&d&&d.css("margin-"+s,b+"px"):(d&&d.transform("translate3d("+("left"===s?b:-b)+"px, 0, 0)"),o&&o.transform("translate3d("+("left"===s?b:-b)+"px, 0, 0)")),r.trigger("panel:resize",b),e.emit("local::resize panelResize",e,b)}}function x(){if(gl("html").css("cursor",""),!l||!u)return l=!1,void(u=!1);l=!1,u=!1,a[0].style.setProperty("--f7-panel-"+s+"-width",e.resizableWidth+"px"),r[0].style.width="","cover"===i||m||(d.transform(""),o.transform("")),r.removeClass("panel-resizing"),as((function(){r.transition(""),"cover"!==i&&(o.transition(""),d&&d.transition(""))}))}function k(){e.opened&&e.resizableWidth&&(h=b(r.css("min-width")),f=b(r.css("max-width")),h&&!Number.isNaN(h)&&e.resizableWidth<h&&(e.resizableWidth=Math.max(e.resizableWidth,h)),f&&!Number.isNaN(f)&&e.resizableWidth>f&&(e.resizableWidth=Math.min(e.resizableWidth,f)),e.resizableWidth=Math.min(Math.max(e.resizableWidth,0),t.width),a[0].style.setProperty("--f7-panel-"+s+"-width",e.resizableWidth+"px"))}};function ip(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lp(e,t){return lp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},lp(e,t)}var up=function(e){var t,n;function a(t,n){var a;void 0===n&&(n={});var r,o=cs({on:{}},t.params.panel,n),s=ip(a=e.call(this,o,[t])||this);if(s.params=o,s.$containerEl=s.params.containerEl?gl(s.params.containerEl).eq(0):t.$el,s.containerEl=s.$containerEl[0],s.containerEl||(s.$containerEl=t.$el,s.containerEl=t.$el[0]),s.params.el?r=gl(s.params.el).eq(0):s.params.content&&(r=gl(s.params.content).filter((function(e){return 1===e.nodeType})).eq(0)),0===r.length)return s||ip(a);if(r[0].f7Panel)return r[0].f7Panel||ip(a);r[0].f7Panel=s;var i,l=s.params,u=l.side,c=l.effect,p=l.resizable;return void 0===u&&(u=r.hasClass("panel-left")?"left":"right"),void 0===c&&(c=r.hasClass("panel-cover")?"cover":r.hasClass("panel-push")?"push":"reveal"),void 0===p&&(p=r.hasClass("panel-resizable")),s.params.backdrop&&s.params.backdropEl?i=gl(s.params.backdropEl):s.params.backdrop&&0===(i=s.$containerEl.children(".panel-backdrop")).length&&(i=gl('<div class="panel-backdrop"></div>'),s.$containerEl.prepend(i)),cs(s,{app:t,side:u,effect:c,resizable:p,$el:r,el:r[0],opened:!1,$backdropEl:i,backdropEl:i&&i[0]}),s.useModules(),s.init(),s||ip(a)}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,lp(t,n);var r=a.prototype;return r.getViewEl=function(){var e=this;return e.$containerEl.children(".views").length>0?e.$containerEl.children(".views")[0]:e.$containerEl.children(".view")[0]},r.setStateClasses=function(e){var t=this,n=t.side,a=t.el,r=t.getViewEl(),o=r&&r.contains(a),s=!r||o?t.$containerEl:gl("html");"open"===e&&s.addClass("with-panel with-panel-"+t.side+"-"+t.effect),"before-closing"===e&&s.addClass("with-panel-closing"),"closing"===e&&(s.addClass("with-panel-closing"),s.removeClass("with-panel with-panel-"+t.side+"-"+t.effect)),"after-closing"===e&&s.removeClass("with-panel-closing"),"closed"===e&&s.removeClass("with-panel-"+n+"-reveal with-panel-"+n+"-cover with-panel-"+n+"-push with-panel")},r.enableVisibleBreakpoint=function(){var e=this;return e.visibleBreakpointDisabled=!1,e.setVisibleBreakpoint(),e},r.disableVisibleBreakpoint=function(){var e=this;return e.visibleBreakpointDisabled=!0,e.setVisibleBreakpoint(),e},r.toggleVisibleBreakpoint=function(){var e=this;return e.visibleBreakpointDisabled=!e.visibleBreakpointDisabled,e.setVisibleBreakpoint(),e},r.setVisibleBreakpoint=function(e){void 0===e&&(e=!0);var t=this,n=t.app;t.visibleBreakpointResizeHandler||(t.visibleBreakpointResizeHandler=function(){t.setVisibleBreakpoint()},n.on("resize",t.visibleBreakpointResizeHandler));var a,r,o=t.side,s=t.$el,i=t.$containerEl,l=t.params,u=t.visibleBreakpointDisabled,c=l.visibleBreakpoint,p=gl(t.getViewEl()),d=s.hasClass("panel-in-breakpoint");if(i&&i.hasClass("page")&&p.add(i.children(".page-content, .tabs, .fab")),n.width>=c&&null!=c&&!u)d?p.css(((a={})["margin-"+o]=s.width()+"px",a)):(t.setStateClasses("closed"),s.addClass("panel-in-breakpoint").removeClass("panel-in panel-in-collapsed"),t.onOpen(!1),t.onOpened(),p.css(((r={})["margin-"+o]=s.width()+"px",r)),n.allowPanelOpen=!0,e&&(t.emit("local::breakpoint panelBreakpoint",t),t.$el.trigger("panel:breakpoint")));else if(d){var h;s.removeClass("panel-in-breakpoint panel-in"),t.onClose(),t.onClosed(),p.css(((h={})["margin-"+o]="",h)),e&&(t.emit("local::breakpoint panelBreakpoint",t),t.$el.trigger("panel:breakpoint"))}},r.enableCollapsedBreakpoint=function(){var e=this;return e.collapsedBreakpointDisabled=!1,e.setCollapsedBreakpoint(),e},r.disableCollapsedBreakpoint=function(){var e=this;return e.collapsedBreakpointDisabled=!0,e.setCollapsedBreakpoint(),e},r.toggleCollapsedBreakpoint=function(){var e=this;return e.collapsedBreakpointDisabled=!e.collapsedBreakpointDisabled,e.setCollapsedBreakpoint(),e},r.setCollapsedBreakpoint=function(e){void 0===e&&(e=!0);var t=this,n=t.app;t.collapsedBreakpointResizeHandler||(t.collapsedBreakpointResizeHandler=function(){t.setCollapsedBreakpoint()},n.on("resize",t.collapsedBreakpointResizeHandler));var a=t.$el,r=t.params,o=t.collapsedBreakpointDisabled;if(!a.hasClass("panel-in-breakpoint")){var s=r.collapsedBreakpoint,i=a.hasClass("panel-in-collapsed");n.width>=s&&null!=s&&!o?i||(t.setStateClasses("closed"),a.addClass("panel-in-collapsed").removeClass("panel-in"),t.collapsed=!0,n.allowPanelOpen=!0,e&&(t.emit("local::collapsedBreakpoint panelCollapsedBreakpoint",t),t.$el.trigger("panel:collapsedbreakpoint"))):i&&(a.removeClass("panel-in-collapsed panel-in"),t.collapsed=!1,e&&(t.emit("local::collapsedBreakpoint panelCollapsedBreakpoint",t),t.$el.trigger("panel:collapsedbreakpoint")))}},r.enableResizable=function(){var e=this;return e.resizableInitialized?(e.resizable=!0,e.$el.addClass("panel-resizable")):sp(e),e},r.disableResizable=function(){var e=this;return e.resizable=!1,e.$el.removeClass("panel-resizable"),e},r.enableSwipe=function(){var e=this;return e.swipeInitialized?e.swipeable=!0:op(e),e},r.disableSwipe=function(){return this.swipeable=!1,this},r.onOpen=function(e){void 0===e&&(e=!0);var t=this,n=t.app;t.opened=!0,n.panel.allowOpen=!1,t.$el.trigger("panel:beforeopen"),t.emit("local::beforeOpen panelBeforeOpen",t),e&&t.setStateClasses("open"),t.$el.trigger("panel:open"),t.emit("local::open panelOpen",t)},r.onOpened=function(){var e=this;e.app.panel.allowOpen=!0,e.$el.trigger("panel:opened"),e.emit("local::opened panelOpened",e)},r.onClose=function(){var e=this,t=e.app;e.opened=!1,t.panel.allowOpen=!1,e.$el.trigger("panel:beforeclose"),e.emit("local::beforeClose panelBeforeClose",e),e.setStateClasses("closing"),e.$el.trigger("panel:close"),e.emit("local::close panelClose",e)},r.onClosed=function(){var e=this,t=e.app;if(t.panel.allowOpen=!0,e.setStateClasses("after-closing"),e.$el.removeClass("panel-out"),e.$backdropEl){var n=t.panel.get(".panel-in");(!n||n&&!n.$backdropEl)&&e.$backdropEl.removeClass("panel-backdrop-in")}e.$el.trigger("panel:closed"),e.emit("local::closed panelClosed",e)},r.toggle=function(e){void 0===e&&(e=!0);var t=this,n=t.params.visibleBreakpoint;return t.app.width>=n&&null!=n?t.toggleVisibleBreakpoint():(t.opened?t.close(e):t.open(e),t)},r.insertToRoot=function(){var e=this,t=Vo(),n=e.$el,a=e.$backdropEl,r=e.$containerEl,o=n.parent(),s=n.parents(t).length>0;if(!o.is(r)||n.prevAll(".views, .view").length){var i=r.children(".panel, .views, .view").eq(0),l=r.children(".panel-backdrop").eq(0);i.length?n.insertBefore(i):l?n.insertBefore(l):r.prepend(n),a&&a.length&&(!a.parent().is(r)&&0===a.nextAll(".panel").length||a.parent().is(r)&&0===a.nextAll(".panel").length)&&a.insertBefore(n),e.once("panelClosed",(function(){s?o.append(n):n.remove()}))}},r.open=function(e){void 0===e&&(e=!0);var t=this,n=t.app;if(!n.panel.allowOpen)return!1;var a=t.effect,r=t.$el,o=t.$backdropEl,s=t.opened,i=t.$containerEl;if(!r||r.hasClass("panel-in"))return t;if(t.insertToRoot(),s||r.hasClass("panel-in-breakpoint")||r.hasClass("panel-in"))return!1;var l=n.panel.get(".panel-in");l&&l!==t&&l.close(e),r[e?"removeClass":"addClass"]("not-animated"),r.addClass("panel-in"),o&&(o.addClass("panel-backdrop-in"),o[e?"removeClass":"addClass"]("not-animated")),"cover"!==t.effect&&"push"!==t.effect||(t._clientLeft=r[0].clientLeft);var u=gl(t.getViewEl());i&&i.hasClass("page")&&u.add(i.children(".page-content, .tabs"));var c="reveal"===a?u:r;return e?(o&&o.removeClass("not-animated"),function e(){c.transitionEnd((function(n){gl(n.target).is(c)?r.hasClass("panel-out")?t.onClosed():t.onOpened():e()}))}(),r.removeClass("panel-out not-animated").addClass("panel-in"),t.onOpen()):(o&&o.addClass("not-animated"),r.removeClass("panel-out").addClass("panel-in not-animated"),t.onOpen(),t.onOpened()),!0},r.close=function(e){void 0===e&&(e=!0);var t=this,n=t.effect,a=t.$el,r=t.$backdropEl,o=t.opened,s=t.$containerEl;if(!o||a.hasClass("panel-in-breakpoint")||!a.hasClass("panel-in"))return t;a[e?"removeClass":"addClass"]("not-animated"),r&&r[e?"removeClass":"addClass"]("not-animated");var i=gl(t.getViewEl());return s&&s.hasClass("page")&&i.add(s.children(".page-content, .tabs")),e?(("reveal"===n?i:a).transitionEnd((function(){a.hasClass("panel-out")?t.onClosed():a.hasClass("panel-in")&&t.onOpened(),t.setStateClasses("after-closing")})),a.removeClass("panel-in").addClass("panel-out"),t.onClose()):(a.addClass("not-animated").removeClass("panel-in").addClass("panel-out"),t.onClose(),t.onClosed()),t},r.init=function(){var e=this;void 0!==e.params.visibleBreakpoint&&e.setVisibleBreakpoint(),void 0!==e.params.collapsedBreakpoint&&e.setCollapsedBreakpoint(),e.params.swipe&&e.enableSwipe(),e.resizable&&e.enableResizable()},r.destroy=function(){var e=this,t=e.app,n=e.$containerEl;if(e.$el){if(e.emit("local::beforeDestroy panelBeforeDestroy",e),e.$el.trigger("panel:beforedestroy"),e.visibleBreakpointResizeHandler&&t.off("resize",e.visibleBreakpointResizeHandler),e.collapsedBreakpointResizeHandler&&t.off("resize",e.collapsedBreakpointResizeHandler),e.$el.hasClass("panel-in-breakpoint")||e.$el.hasClass("panel-in-collapsed")){var a,r=gl(e.getViewEl());n&&n.hasClass("page")&&r.add(n.children(".page-content, .tabs")),e.$el.removeClass("panel-in-breakpoint panel-in-collapsed panel-in"),r.css(((a={})["margin-"+e.side]="",a)),e.emit("local::breakpoint panelBreakpoint",e),e.$el.trigger("panel:breakpoint")}e.$el.trigger("panel:destroy"),e.emit("local::destroy panelDestroy",e),e.el&&(e.el.f7Panel=null,delete e.el.f7Panel),Qo(e),e=null}},a}(Ts),cp=up,pp={name:"panel",params:{panel:{opened:void 0,side:void 0,effect:void 0,resizable:void 0,backdrop:!0,backdropEl:void 0,visibleBreakpoint:void 0,collapsedBreakpoint:void 0,swipe:!1,swipeNoFollow:!1,swipeOnlyClose:!1,swipeActiveArea:0,swipeThreshold:0,closeByBackdropClick:!0,containerEl:void 0}},static:{Panel:cp},create:function(){var e=this;cs(e,{panel:{allowOpen:!0,create:function(t){return new cp(e,t)},get:function(e){if(void 0===e&&(e=".panel"),e instanceof cp)return e;"left"!==e&&"right"!==e||(e=".panel-"+e);var t=gl(e);return 0===t.length||t.length>1?void 0:t[0].f7Panel},destroy:function(t){void 0===t&&(t=".panel");var n=e.panel.get(t);if(n&&n.destroy)return n.destroy()},open:function(t,n){void 0===t&&(t=".panel"),"left"!==t&&"right"!==t||(t=".panel-"+t);var a=e.panel.get(t);return a&&a.open?a.open(n):a?void 0:(a=e.panel.create({el:t})).open(n)},close:function(t,n){void 0===t&&(t=".panel-in"),"left"!==t&&"right"!==t||(t=".panel-"+t);var a=e.panel.get(t);return a&&a.open?a.close(n):a?void 0:(a=e.panel.create({el:t})).close(n)},toggle:function(t,n){void 0===t&&(t=".panel"),"left"!==t&&"right"!==t||(t=".panel-"+t);var a=e.panel.get(t);return a&&a.toggle?a.toggle(n):a?void 0:(a=e.panel.create({el:t})).toggle(n)}}})},on:{init:function(){var e=this;gl(".panel-init").each((function(t){var n=Object.assign({el:t},gl(t).dataset()||{});e.panel.create(n)}))},pageInit:function(e){var t=this;e.$el.find(".panel-init").each((function(e){var n=Object.assign({el:e},gl(e).dataset()||{});t.panel.create(n)}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".panel-init").each((function(e){var n=t.panel.get(e);n&&n.destroy&&n.destroy()}))}},vnode:{"panel-init":{insert:function(e){var t=e.elm,n=Object.assign({el:t},gl(t).dataset()||{});this.panel.create(n)},destroy:function(e){var t=e.elm,n=this.panel.get(t);n&&n.destroy&&n.destroy()}}},clicks:{".panel-open":function(e,t){void 0===t&&(t={});this.panel.open(t.panel,t.animate)},".panel-close":function(e,t){void 0===t&&(t={});this.panel.close(t.panel,t.animate)},".panel-toggle":function(e,t){void 0===t&&(t={});this.panel.toggle(t.panel,t.animate)},".panel-backdrop":function(){var e=this,t=gl(".panel-in:not(.panel-out)");if(t.length){var n=t[0]&&t[0].f7Panel;t.trigger("panel:backdrop-click"),n&&n.emit("backdropClick",n),e.emit("panelBackdropClick",n||t[0]),e.params.panel.closeByBackdropClick&&e.panel.close()}}}},dp={open:function(e,t){void 0===e&&(e=".card-expandable"),void 0===t&&(t=!0);var n=this,a=xs(),r=Vo(),o=ws(),s=gl(e).eq(0);if(s&&s.length&&!(s.hasClass("card-opened")||s.hasClass("card-opening")||s.hasClass("card-closing"))){var i,l=s.parents(".page").eq(0);if(l.length)if(!l.find(".card-opened").length)if(s.trigger("card:beforeopen",{prevent:K}),n.emit("cardBeforeOpen",s[0],K),!i){var u,c,p,d=Object.assign({animate:t},n.params.card,s.dataset()),h=s.parents(".page-content");s.attr("data-backdrop-el")&&(u=gl(s.attr("data-backdrop-el"))),!u&&d.backdrop&&((u=h.find(".card-backdrop")).length||(u=gl('<div class="card-backdrop"></div>'),h.append(u))),d.hideNavbarOnOpen&&((c=l.children(".navbar")).length||l[0].f7Page&&(c=l[0].f7Page.$navbarEl)),d.hideToolbarOnOpen&&((p=l.children(".toolbar")).length||(p=l.parents(".view").children(".toolbar")),p.length||(p=l.parents(".views").children(".toolbar")));var f,m=s.css("transform");m&&m.match(/[2-9]/)&&(f=!0);var g=s.children(".card-content"),v=gl(r.createElement("div")).addClass("card-expandable-size");s.append(v);var b,y=s[0].offsetWidth,w=s[0].offsetHeight,x=l[0].offsetWidth,k=l[0].offsetHeight,C=v[0].offsetWidth||x,E=v[0].offsetHeight||k;c&&!d.hideStatusbarOnOpen&&E===k&&(b=parseInt(c.css("--f7-safe-area-top"),10),Number.isNaN(b)&&(b=0)),b&&(E-=b);var S,$,T=C/y,I=E/w,N=s.offset(),O=l.offset();if(b&&(O.top+=b/2),N.left-=O.left,f){var R=m.replace(/matrix\(|\)/g,"").split(",").map((function(e){return e.trim()}));if(R&&R.length>1){var A=parseFloat(R[0]);S=N.left-y*(1-A)/2,$=N.top-O.top-w*(1-A)/2,n.rtl&&(S-=s[0].scrollLeft)}else S=s[0].offsetLeft,$=s[0].offsetTop-(h.length?h[0].scrollTop:0)}else S=N.left,$=N.top-O.top,n.rtl&&(S-=s[0].scrollLeft);$-=(k-E)/2;var M=C-y-(S-=(x-C)/2);if(n.rtl){var B=[M,S];S=B[0],M=B[1]}var P,D,F,_,L,z,V,W,H,j,U,G,q=E-w-$,X=(M-S)/2,Y=(q-$)/2;d.hideNavbarOnOpen&&c&&c.length&&(c.closest(".navbar-hidden").length?s[0].f7KeepNavbarOnClose=!0:(delete s[0].f7KeepNavbarOnClose,n.navbar.hide(c,d.animate,d.hideStatusbarOnOpen,!0))),d.hideToolbarOnOpen&&p&&p.length&&(p.closest(".toolbar-hidden").length?s[0].f7KeepToolbarOnClose=!0:(delete s[0].f7KeepToolbarOnClose,n.toolbar.hide(p,d.animate))),u&&u.removeClass("card-backdrop-out").addClass("card-backdrop-in"),s.removeClass("card-transitioning"),d.animate&&s.addClass("card-opening"),s.trigger("card:open"),n.emit("cardOpen",s[0]),g.css({width:C+"px",height:E+"px"}).transform("translate3d("+(n.rtl?S+X:-S-X)+"px, 0px, 0) scale("+1/T+", "+1/I+")"),s.transform("translate3d("+(n.rtl?-X:X)+"px, "+Y+"px, 0) scale("+T+", "+I+")"),d.animate?s.transitionEnd((function(){J()})):J(),s[0].detachEventHandlers=function(){n.off("resize",Z),o.touch&&d.swipeToClose&&(n.off("touchstart:passive",Q),n.off("touchmove:active",ee),n.off("touchend:passive",te))},n.on("resize",Z),o.touch&&d.swipeToClose&&(n.on("touchstart:passive",Q),n.on("touchmove:active",ee),n.on("touchend:passive",te))}}function K(){i=!0}function J(){l.addClass("page-with-card-opened"),a.ios&&h.length&&(h.css("height",h[0].offsetHeight+1+"px"),setTimeout((function(){h.css("height","")}))),s.addClass("card-opened"),s.removeClass("card-opening"),s.trigger("card:opened"),n.emit("cardOpened",s[0],l[0])}function Z(){if(s.removeClass("card-transitioning"),y=s[0].offsetWidth,w=s[0].offsetHeight,x=l[0].offsetWidth,k=l[0].offsetHeight,C=v[0].offsetWidth||x,E=v[0].offsetHeight||k,b=0,c&&!d.hideStatusbarOnOpen&&E===k&&(b=parseInt(c.css("--f7-safe-area-top"),10),Number.isNaN(b)&&(b=0)),b&&(E-=b),T=C/y,I=E/w,s.transform("translate3d(0px, 0px, 0) scale(1)"),N=s.offset(),O=l.offset(),b&&(O.top+=b/2),N.left-=O.left,N.top-=O.top,S=N.left-(x-C)/2,n.rtl&&(S-=s[0].scrollLeft),$=N.top-(k-E)/2,M=C-y-S,q=E-w-$,n.rtl){var e=[M,S];S=e[0],M=e[1]}X=(M-S)/2,Y=(q-$)/2,s.transform("translate3d("+(n.rtl?-X:X)+"px, "+Y+"px, 0) scale("+T+", "+I+")"),g.css({width:C+"px",height:E+"px"}).transform("translate3d("+(n.rtl?S+X:-S-X)+"px, 0px, 0) scale("+1/T+", "+1/I+")")}function Q(e){gl(e.target).closest(s).length&&s.hasClass("card-opened")&&(G=s.find(d.scrollableEl),P=G[0]&&G[0]!==g[0]&&!G[0].contains(e.target)?0:G.scrollTop(),D=!0,_=e.targetTouches[0].pageX,L=e.targetTouches[0].pageY,W=void 0,j=!1,U=!1)}function ee(e){if(D){if(z=e.targetTouches[0].pageX,V=e.targetTouches[0].pageY,void 0===W&&(W=!!(W||Math.abs(V-L)>Math.abs(z-_))),U||j||(!W&&e.targetTouches[0].clientX<=50?U=!0:j=!0),!U&&!j||j&&0!==P)return D=!0,void(F=!0);F||s.removeClass("card-transitioning"),F=!0,((H=j?Math.max((V-L)/150,0):Math.max((z-_)/(y/2),0))>0&&j||U)&&(j&&a.ios&&G[0]===g[0]&&(G.css("-webkit-overflow-scrolling","auto"),G.scrollTop(0)),e.preventDefault()),H>1&&(H=Math.pow(H,.3)),H>(j?1.3:1.1)?(D=!1,F=!1,n.card.close(s)):s.transform("translate3d("+(n.rtl?-X:X)+"px, "+Y+"px, 0) scale("+T*(1-.2*H)+", "+I*(1-.2*H)+")")}}function te(){D&&F&&(D=!1,F=!1,a.ios&&G.css("-webkit-overflow-scrolling",""),H>=.8?n.card.close(s):s.addClass("card-transitioning").transform("translate3d("+(n.rtl?-X:X)+"px, "+Y+"px, 0) scale("+T+", "+I+")"))}},close:function(e,t){void 0===e&&(e=".card-expandable.card-opened"),void 0===t&&(t=!0);var n=this,a=xs(),r=gl(e).eq(0);if(r&&r.length&&r.hasClass("card-opened")&&!r.hasClass("card-opening")&&!r.hasClass("card-closing")){var o=r.children(".card-content"),s=r.parents(".page-content"),i=r.parents(".page").eq(0);if(i.length){var l,u,c,p=Object.assign({animate:t},n.params.card,r.dataset()),d=r.find(p.scrollableEl);r.attr("data-backdrop-el")&&(c=gl(r.attr("data-backdrop-el"))),p.backdrop&&(c=r.parents(".page-content").find(".card-backdrop")),p.hideNavbarOnOpen&&((l=i.children(".navbar")).length||i[0].f7Page&&(l=i[0].f7Page.$navbarEl),l&&l.length&&!r[0].f7KeepNavbarOnClose&&n.navbar.show(l,p.animate,!0)),p.hideToolbarOnOpen&&((u=i.children(".toolbar")).length||(u=i.parents(".view").children(".toolbar")),u.length||(u=i.parents(".views").children(".toolbar")),u&&u.length&&!r[0].f7KeepToolbarOnClose&&n.toolbar.show(u,p.animate)),i.removeClass("page-with-card-opened"),a.ios&&s.length&&(s.css("height",s[0].offsetHeight+1+"px"),setTimeout((function(){s.css("height","")}))),c&&c.length&&c.removeClass("card-backdrop-in").addClass("card-backdrop-out"),r.removeClass("card-opened card-transitioning"),p.animate?r.addClass("card-closing"):r.addClass("card-no-transition"),r.transform(""),r.trigger("card:close"),n.emit("cardClose",r[0],i[0]);var h=r.hasClass("card-expandable-animate-width");h&&o.css({width:"",height:""}),o.transform("").scrollTop(0,t?300:0),d.length&&d[0]!==o[0]&&d.scrollTop(0,t?300:0),t?o.transitionEnd((function(){f()})):f(),r[0].detachEventHandlers&&(r[0].detachEventHandlers(),delete r[0].detachEventHandlers)}}function f(){h||o.css({width:"",height:""}),c&&c.length&&c.removeClass("card-backdrop-in card-backdrop-out"),r.removeClass("card-closing card-no-transition"),r.trigger("card:closed"),r.find(".card-expandable-size").remove(),n.emit("cardClosed",r[0],i[0])}},toggle:function(e,t){void 0===e&&(e=".card-expandable");var n=gl(e).eq(0);n.length&&(n.hasClass("card-opened")?this.card.close(n,t):this.card.open(n,t))}},hp={name:"card",params:{card:{hideNavbarOnOpen:!0,hideStatusbarOnOpen:!0,hideToolbarOnOpen:!0,scrollableEl:".card-content",swipeToClose:!0,closeByBackdropClick:!0,backdrop:!0}},create:function(){bs(this,{card:dp})},on:{pageBeforeIn:function(e){var t=this;if(t.params.card.hideNavbarOnOpen&&e.navbarEl&&e.$el.find(".card-opened.card-expandable").length&&t.navbar.hide(e.navbarEl,!0,t.params.card.hideStatusbarOnOpen,!0),t.params.card.hideToolbarOnOpen&&e.$el.find(".card-opened.card-expandable").length){var n=e.$el.children(".toolbar");n.length||(n=e.$el.parents(".view").children(".toolbar")),n.length||(n=e.$el.parents(".views").children(".toolbar")),n&&n.length&&t.toolbar.hide(n)}}},clicks:{".card-close":function(e,t){this.card.close(t.card,t.animate)},".card-open":function(e,t){this.card.open(t.card,t.animate)},".card-expandable":function(e,t,n){e.hasClass("card-opened")||e.hasClass("card-opening")||e.hasClass("card-closing")||gl(n.target).closest(".card-prevent-open, .card-close").length||this.card.open(e)},".card-backdrop-in":function(){var e=!1;this.params.card.closeByBackdropClick&&(e=!0);var t=gl(".card-opened");t.length&&("true"===t.attr("data-close-by-backdrop-click")?e=!0:"false"===t.attr("data-close-by-backdrop-click")&&(e=!1),e&&this.card.close(t))}}},fp={store:function(e,t){var n=Ho(),a=e,r=gl(e);r.length&&r.is("form")&&r.attr("id")&&(a=r.attr("id")),this.form.data["form-"+a]=t,n.localStorage["f7form-"+a]=JSON.stringify(t)},get:function(e){var t=Ho(),n=e,a=gl(e);return a.length&&a.is("form")&&a.attr("id")&&(n=a.attr("id")),t.localStorage["f7form-"+n]?JSON.parse(t.localStorage["f7form-"+n]):this.form.data["form-"+n]?this.form.data["form-"+n]:void 0},remove:function(e){var t=this,n=Ho(),a=e,r=gl(e);r.length&&r.is("form")&&r.attr("id")&&(a=r.attr("id")),t.form.data["form-"+a]&&(t.form.data["form-"+a]="",delete t.form.data["form-"+a]),n.localStorage["f7form-"+a]&&(n.localStorage["f7form-"+a]="",n.localStorage.removeItem("f7form-"+a))}},mp={init:function(e){var t=this,n=gl(e),a=n.attr("id");if(a){var r=t.form.getFormData(a);r&&t.form.fillFromData(n,r),n.on("change submit",(function(){var e=t.form.convertToData(n);e&&(t.form.storeFormData(a,e),n.trigger("form:storedata",e),t.emit("formStoreData",n[0],e))}))}},destroy:function(e){gl(e).off("change submit")}};function gp(e){var t=gl(e).eq(0);if(0!==t.length){var n={},a=["submit","image","button","file"],r=[];return t.find("input, select, textarea").each((function(e){var o=gl(e);if(!o.hasClass("ignore-store-data")&&!o.hasClass("no-store-data")){var s=o.attr("name"),i=o.attr("type"),l=e.nodeName.toLowerCase();if(!(a.indexOf(i)>=0)&&!(r.indexOf(s)>=0)&&s)if("select"===l&&o.prop("multiple"))r.push(s),n[s]=[],t.find('select[name="'+s+'"] option').each((function(e){e.selected&&n[s].push(e.value)}));else switch(i){case"checkbox":r.push(s),n[s]=[],t.find('input[name="'+s+'"]').each((function(e){e.checked&&n[s].push(e.value)}));break;case"radio":r.push(s),t.find('input[name="'+s+'"]').each((function(e){e.checked&&(n[s]=e.value)}));break;default:n[s]=o.val()}}})),t.trigger("form:todata",n),this.emit("formToData",t[0],n),n}}function vp(e,t){var n=gl(e).eq(0);if(n.length){var a=t,r=n.attr("id");if(!a&&r&&(a=this.form.getFormData(r)),a){var o=["submit","image","button","file"],s=[];n.find("input, select, textarea").each((function(e){var t=gl(e);if(!t.hasClass("ignore-store-data")&&!t.hasClass("no-store-data")){var r=t.attr("name"),i=t.attr("type"),l=e.nodeName.toLowerCase();if(void 0!==a[r]&&null!==a[r]&&!(o.indexOf(i)>=0)&&!(s.indexOf(r)>=0)&&r){if("select"===l&&t.prop("multiple"))s.push(r),n.find('select[name="'+r+'"] option').each((function(e){var t=e;a[r].indexOf(e.value)>=0?t.selected=!0:t.selected=!1}));else switch(i){case"checkbox":s.push(r),n.find('input[name="'+r+'"]').each((function(e){var t=e;a[r].indexOf(e.value)>=0?t.checked=!0:t.checked=!1}));break;case"radio":s.push(r),n.find('input[name="'+r+'"]').each((function(e){var t=e;a[r]===e.value?t.checked=!0:t.checked=!1}));break;default:t.val(a[r])}"select"!==l&&"input"!==l&&"textarea"!==l||t.trigger("change","fromdata")}}})),n.trigger("form:fromdata",a),this.emit("formFromData",n[0],a)}}}function bp(){var e=this,t=Ho(),n=Vo();gl(n).on("submit change","form.form-ajax-submit, form.form-ajax-submit-onchange",(function(n,a){var r=gl(this);if(("change"!==n.type||r.hasClass("form-ajax-submit-onchange"))&&("submit"===n.type&&n.preventDefault(),"change"!==n.type||"fromdata"!==a)){var o,s=(r.attr("method")||"GET").toUpperCase(),i=r.prop("enctype")||r.attr("enctype"),l=r.attr("action");if(l)o="POST"===s?"application/x-www-form-urlencoded"===i?e.form.convertToData(r[0]):new t.FormData(r[0]):is(e.form.convertToData(r[0])),e.request({method:s,url:l,contentType:i,data:o,beforeSend:function(t){r.trigger("formajax:beforesend",{data:o,xhr:t}),e.emit("formAjaxBeforeSend",r[0],o,t)},error:function(t){r.trigger("formajax:error",{data:o,xhr:t}),e.emit("formAjaxError",r[0],o,t)},complete:function(t){r.trigger("formajax:complete",{data:o,xhr:t}),e.emit("formAjaxComplete",r[0],o,t)},success:function(t,n,a){r.trigger("formajax:success",{data:o,xhr:a}),e.emit("formAjaxSuccess",r[0],o,a)}})}}))}var yp={name:"form",create:function(){var e=this;cs(e,{form:{data:{},storeFormData:fp.store.bind(e),getFormData:fp.get.bind(e),removeFormData:fp.remove.bind(e),convertToData:gp.bind(e),fillFromData:vp.bind(e),storage:{init:mp.init.bind(e),destroy:mp.destroy.bind(e)}}})},on:{init:function(){bp.call(this)},tabBeforeRemove:function(e){var t=this;gl(e).find(".form-store-data").each((function(e){t.form.storage.destroy(e)}))},tabMounted:function(e){var t=this;gl(e).find(".form-store-data").each((function(e){t.form.storage.init(e)}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".form-store-data").each((function(e){t.form.storage.destroy(e)}))},pageInit:function(e){var t=this;e.$el.find(".form-store-data").each((function(e){t.form.storage.init(e)}))}}},wp={ignoreTypes:["checkbox","button","submit","range","radio","image"],createTextareaResizableShadow:function(){var e=Vo(),t=gl(e.createElement("textarea"));t.addClass("textarea-resizable-shadow"),t.prop({disabled:!0,readonly:!0}),wp.textareaResizableShadow=t},textareaResizableShadow:void 0,resizeTextarea:function(e){var t=Ho(),n=gl(e);wp.textareaResizableShadow||wp.createTextareaResizableShadow();var a=wp.textareaResizableShadow;if(n.length&&n.hasClass("resizable")){0===wp.textareaResizableShadow.parents().length&&this.$el.append(a);var r=t.getComputedStyle(n[0]);"padding-top padding-bottom padding-left padding-right margin-left margin-right margin-top margin-bottom width font-size font-family font-style font-weight line-height font-variant text-transform letter-spacing border box-sizing display".split(" ").forEach((function(e){var t=r[e];"font-size line-height letter-spacing width".split(" ").indexOf(e)>=0&&(t=t.replace(",",".")),a.css(e,t)}));var o=n[0].clientHeight;a.val("");var s=a[0].scrollHeight;a.val(n.val()),a.css("height",0);var i=a[0].scrollHeight;o!==i&&(i>s?n.css("height",i+"px"):i<o&&n.css("height",""),(i>s||i<o)&&(n.trigger("textarea:resize",{initialHeight:s,currentHeight:o,scrollHeight:i}),this.emit("textareaResize",{initialHeight:s,currentHeight:o,scrollHeight:i})))}},validate:function(e){var t=gl(e);if(!t.length)return!0;var n=t.parents(".item-input"),a=t.parents(".input");function r(){t[0].f7ValidateReadonly&&(t[0].readOnly=!0)}t[0].f7ValidateReadonly&&(t[0].readOnly=!1);var o=t[0].validity,s=t.dataset().errorMessage||t[0].validationMessage||"";if(!o)return r(),!0;if(!o.valid){var i=t.nextAll(".item-input-error-message, .input-error-message");return s&&(0===i.length&&(i=gl('<div class="'+(a.length?"input-error-message":"item-input-error-message")+'"></div>')).insertAfter(t),i.text(s)),i.length>0&&(n.addClass("item-input-with-error-message"),a.addClass("input-with-error-message")),n.addClass("item-input-invalid"),a.addClass("input-invalid"),t.addClass("input-invalid"),r(),!1}return n.removeClass("item-input-invalid item-input-with-error-message"),a.removeClass("input-invalid input-with-error-message"),t.removeClass("input-invalid"),r(),!0},validateInputs:function(e){var t=this;return gl(e).find("input, textarea, select").map((function(e){return t.input.validate(e)})).indexOf(!1)<0},focus:function(e){var t=gl(e),n=t.attr("type");wp.ignoreTypes.indexOf(n)>=0||(t.parents(".item-input").addClass("item-input-focused"),t.parents(".input").addClass("input-focused"),t.addClass("input-focused"))},blur:function(e){var t=gl(e);t.parents(".item-input").removeClass("item-input-focused"),t.parents(".input").removeClass("input-focused"),t.removeClass("input-focused")},checkEmptyState:function(e){var t=gl(e);if(t.is("input, select, textarea, .item-input [contenteditable]")||(t=t.find("input, select, textarea, .item-input [contenteditable]").eq(0)),t.length){var n;n=t[0].hasAttribute("contenteditable")?t.find(".text-editor-placeholder").length?"":t.html():t.val();var a=t.parents(".item-input"),r=t.parents(".input");n&&"string"==typeof n&&""!==n.trim()||Array.isArray(n)&&n.length>0?(a.addClass("item-input-with-value"),r.addClass("input-with-value"),t.addClass("input-with-value"),t.trigger("input:notempty"),this.emit("inputNotEmpty",t[0])):(a.removeClass("item-input-with-value"),r.removeClass("input-with-value"),t.removeClass("input-with-value"),t.trigger("input:empty"),this.emit("inputEmpty",t[0]))}},scrollIntoView:function(e,t,n,a){void 0===t&&(t=0);var r=gl(e),o=r.parents(".page-content, .panel, .card-expandable .card-content").eq(0);if(!o.length)return!1;var s=o[0].offsetHeight,i=o[0].scrollTop,l=parseInt(o.css("padding-top"),10),u=parseInt(o.css("padding-bottom"),10),c=o.offset().top-i,p=r.offset().top-c,d=p+i-l,h=p+i-s+u+r[0].offsetHeight,f=d+(h-d)/2;return i>d?(o.scrollTop(n?f:d,t),!0):i<h?(o.scrollTop(n?f:h,t),!0):(a&&o.scrollTop(n?f:h,t),!1)},init:function(){var e=this,t=xs(),n=Ho(),a=Vo();wp.createTextareaResizableShadow(),gl(a).on("click",".input-clear-button",(function(){var t=gl(this).siblings("input, textarea").eq(0),n=t.val();t.val("").trigger("input change").focus().trigger("input:clear",n),e.emit("inputClear",n)})),gl(a).on("mousedown",".input-clear-button",(function(e){e.preventDefault()})),gl(a).on("change input","input, textarea, select, .item-input [contenteditable]",(function(){var t=gl(this),n=t.attr("type"),a=t[0].nodeName.toLowerCase(),r=t[0].hasAttribute("contenteditable");wp.ignoreTypes.indexOf(n)>=0||(e.input.checkEmptyState(t),r||(null!==t.attr("data-validate-on-blur")||!t.dataset().validate&&null===t.attr("validate")||e.input.validate(t),"textarea"===a&&t.hasClass("resizable")&&e.input.resizeTextarea(t)))}),!0),gl(a).on("focus","input, textarea, select, .item-input [contenteditable]",(function(){var r=this;e.params.input.scrollIntoViewOnFocus&&(t.android?gl(n).once("resize",(function(){a&&a.activeElement===r&&e.input.scrollIntoView(r,e.params.input.scrollIntoViewDuration,e.params.input.scrollIntoViewCentered,e.params.input.scrollIntoViewAlways)})):e.input.scrollIntoView(r,e.params.input.scrollIntoViewDuration,e.params.input.scrollIntoViewCentered,e.params.input.scrollIntoViewAlways)),e.input.focus(r)}),!0),gl(a).on("blur","input, textarea, select, .item-input [contenteditable]",(function(){var t=gl(this),n=t[0].nodeName.toLowerCase();e.input.blur(t),(t.dataset().validate||null!==t.attr("validate")||null!==t.attr("data-validate-on-blur"))&&e.input.validate(t),"textarea"===n&&t.hasClass("resizable")&&wp.textareaResizableShadow&&wp.textareaResizableShadow.remove()}),!0),gl(a).on("invalid","input, textarea, select",(function(t){var n=gl(this);null!==n.attr("data-validate-on-blur")||!n.dataset().validate&&null===n.attr("validate")||(t.preventDefault(),e.input.validate(n))}),!0)}},xp={name:"input",params:{input:{scrollIntoViewOnFocus:void 0,scrollIntoViewCentered:!1,scrollIntoViewDuration:0,scrollIntoViewAlways:!1}},create:function(){var e=this;void 0===e.params.input.scrollIntoViewOnFocus&&(e.params.input.scrollIntoViewOnFocus=xs().android),bs(e,{input:wp})},on:{init:function(){this.input.init()},tabMounted:function(e){var t=this,n=gl(e);n.find(".item-input, .input").each((function(e){gl(e).find("input, select, textarea, [contenteditable]").each((function(e){var n=gl(e);wp.ignoreTypes.indexOf(n.attr("type"))>=0||t.input.checkEmptyState(n)}))})),n.find("textarea.resizable").each((function(e){t.input.resizeTextarea(e)}))},pageInit:function(e){var t=this,n=e.$el;n.find(".item-input, .input").each((function(e){gl(e).find("input, select, textarea, [contenteditable]").each((function(e){var n=gl(e);wp.ignoreTypes.indexOf(n.attr("type"))>=0||t.input.checkEmptyState(n)}))})),n.find("textarea.resizable").each((function(e){t.input.resizeTextarea(e)}))},"panelBreakpoint panelCollapsedBreakpoint panelResize panelOpen panelSwipeOpen resize viewMasterDetailBreakpoint":function(e){var t=this;e&&e.$el?e.$el.find("textarea.resizable").each((function(e){t.input.resizeTextarea(e)})):gl("textarea.resizable").each((function(e){t.input.resizeTextarea(e)}))}}};function kp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cp(e,t){return Cp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Cp(e,t)}var Ep=function(e){var t,n;function a(t,n){var a;void 0===n&&(n={});var r=kp(a=e.call(this,n,[t])||this),o=ws(),s={};r.useModulesParams(s),r.params=cs(s,n);var i=r.params.el;if(!i)return r||kp(a);var l=gl(i);if(0===l.length)return r||kp(a);if(l[0].f7Toggle)return l[0].f7Toggle||kp(a);var u,c=l.children('input[type="checkbox"]');cs(r,{app:t,$el:l,el:l[0],$inputEl:c,inputEl:c[0],disabled:l.hasClass("disabled")||c.hasClass("disabled")||c.attr("disabled")||c[0].disabled}),Object.defineProperty(r,"checked",{enumerable:!0,configurable:!0,set:function(e){r&&void 0!==r.$inputEl&&r.checked!==e&&(c[0].checked=e,r.$inputEl.trigger("change"))},get:function(){return c[0].checked}}),l[0].f7Toggle=r;var p,d,h,f,m,g={};function v(e){u||r.disabled||(g.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,g.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,d=0,u=!0,p=void 0,f=rs(),m=r.checked,h=l[0].offsetWidth,ns((function(){u&&l.addClass("toggle-active-state")})))}function b(e){if(u&&!r.disabled){var n,a="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,o="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,s=t.rtl?-1:1;if(void 0===p&&(p=!!(p||Math.abs(o-g.y)>Math.abs(a-g.x))),p)u=!1;else e.preventDefault(),(d=a-g.x)*s<0&&Math.abs(d)>h/3&&m&&(n=!0),d*s>0&&Math.abs(d)>h/3&&!m&&(n=!0),n&&(g.x=a,r.checked=!m,m=!m)}}function y(){if(!u||r.disabled)return p&&l.removeClass("toggle-active-state"),void(u=!1);var e,n=t.rtl?-1:1;u=!1,l.removeClass("toggle-active-state"),rs()-f<300&&(d*n<0&&m&&(e=!0),d*n>0&&!m&&(e=!0),e&&(r.checked=!m))}function w(){r.$el.trigger("toggle:change"),r.emit("local::change toggleChange",r)}return r.attachEvents=function(){var e=!!o.passiveListener&&{passive:!0};l.on(t.touchEvents.start,v,e),t.on("touchmove",b),t.on("touchend:passive",y),r.$inputEl.on("change",w)},r.detachEvents=function(){var e=!!o.passiveListener&&{passive:!0};l.off(t.touchEvents.start,v,e),t.off("touchmove",b),t.off("touchend:passive",y),r.$inputEl.off("change",w)},r.useModules(),r.init(),a}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,Cp(t,n);var r=a.prototype;return r.toggle=function(){this.checked=!this.checked},r.init=function(){this.attachEvents()},r.destroy=function(){var e=this;e.$el.trigger("toggle:beforedestroy"),e.emit("local::beforeDestroy toggleBeforeDestroy",e),delete e.$el[0].f7Toggle,e.detachEvents(),Qo(e),e=null},a}(Ts),Sp=Ep,$p={name:"toggle",create:function(){this.toggle=wl({defaultSelector:".toggle",constructor:Sp,app:this,domProp:"f7Toggle"})},static:{Toggle:Sp},on:{tabMounted:function(e){var t=this;gl(e).find(".toggle-init").each((function(e){return t.toggle.create({el:e})}))},tabBeforeRemove:function(e){gl(e).find(".toggle-init").each((function(e){e.f7Toggle&&e.f7Toggle.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".toggle-init").each((function(e){return t.toggle.create({el:e})}))},pageBeforeRemove:function(e){e.$el.find(".toggle-init").each((function(e){e.f7Toggle&&e.f7Toggle.destroy()}))}},vnode:{"toggle-init":{insert:function(e){var t=e.elm;this.toggle.create({el:t})},destroy:function(e){var t=e.elm;t.f7Toggle&&t.f7Toggle.destroy()}}}};function Tp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ip(e,t){return Ip=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ip(e,t)}var Np=function(e){var t,n;function a(t,n){var a,r=Tp(a=e.call(this,n,[t])||this),o=ws(),s={el:null,inputEl:null,dual:!1,step:1,label:!1,min:0,max:100,value:0,draggableBar:!0,vertical:!1,verticalReversed:!1,formatLabel:null,scale:!1,scaleSteps:5,scaleSubSteps:0,formatScaleLabel:null,limitKnobPosition:"ios"===t.theme};r.useModulesParams(s),r.params=cs(s,n);var i=r.params.el;if(!i)return r||Tp(a);var l=gl(i);if(0===l.length)return r||Tp(a);if(l[0].f7Range)return l[0].f7Range||Tp(a);var u,c=l.dataset();"step min max value scaleSteps scaleSubSteps".split(" ").forEach((function(e){void 0===n[e]&&void 0!==c[e]&&(r.params[e]=parseFloat(c[e]))})),"dual label vertical verticalReversed scale".split(" ").forEach((function(e){void 0===n[e]&&void 0!==c[e]&&(r.params[e]=c[e])})),r.params.value||(void 0!==c.value&&(r.params.value=c.value),void 0!==c.valueLeft&&void 0!==c.valueRight&&(r.params.value=[parseFloat(c.valueLeft),parseFloat(c.valueRight)])),r.params.dual||(r.params.inputEl?u=gl(r.params.inputEl):l.find('input[type="range"]').length&&(u=l.find('input[type="range"]').eq(0)));var p=r.params,d=p.dual,h=p.step,f=p.label,m=p.min,g=p.max,v=p.value,b=p.vertical,y=p.verticalReversed,w=p.scale,x=p.scaleSteps,k=p.scaleSubSteps,C=p.limitKnobPosition;cs(r,{app:t,$el:l,el:l[0],$inputEl:u,inputEl:u?u[0]:void 0,dual:d,step:h,label:f,min:m,max:g,value:v,previousValue:v,vertical:b,verticalReversed:y,scale:w,scaleSteps:x,scaleSubSteps:k,limitKnobPosition:C}),u&&("step min max".split(" ").forEach((function(e){!n[e]&&u.attr(e)&&(r.params[e]=parseFloat(u.attr(e)),r[e]=parseFloat(u.attr(e)))})),void 0!==u.val()&&(r.params.value=parseFloat(u.val()),r.value=parseFloat(u.val()))),r.dual&&l.addClass("range-slider-dual"),r.label&&l.addClass("range-slider-label"),r.vertical?(l.addClass("range-slider-vertical"),r.verticalReversed&&l.addClass("range-slider-vertical-reversed")):l.addClass("range-slider-horizontal");var E=gl('<div class="range-bar"></div>'),S=gl('<div class="range-bar-active"></div>');E.append(S);var $='\n      <div class="range-knob-wrap">\n        <div class="range-knob"></div>\n        '+(r.label?'<div class="range-knob-label"></div>':"")+"\n      </div>\n    ",T=[gl($)];r.dual&&T.push(gl($)),l.append(E),T.forEach((function(e){l.append(e)}));var I,N,O=[];r.label&&(O.push(T[0].find(".range-knob-label")),r.dual&&O.push(T[1].find(".range-knob-label"))),r.scale&&r.scaleSteps>=1&&(I=gl('\n        <div class="range-scale">\n          '+r.renderScale()+"\n        </div>\n      "),l.append(I)),cs(r,{knobs:T,labels:O,$barEl:E,$barActiveEl:S,$scaleEl:I}),l[0].f7Range=r;var R,A,M,B,P,D,F,_,L,z,V,W={};function H(){F=!0}function j(e){if(!N&&(r.params.draggableBar||0!==gl(e.target).closest(".range-knob").length)){var t;F=!1,W.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,W.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,"touchstart"===e.type&&(_=e.targetTouches[0].identifier),N=!0,R=void 0,A=l.offset(),M=A.left,B=A.top,r.vertical?(t=(W.y-B)/r.rangeHeight,r.verticalReversed||(t=1-t)):t=r.app.rtl?(M+r.rangeWidth-W.x)/r.rangeWidth:(W.x-M)/r.rangeWidth;var n=t*(r.max-r.min)+r.min;r.dual?Math.abs(r.value[0]-n)<Math.abs(r.value[1]-n)?(D=0,P=r.knobs[0],n=[n,r.value[1]]):(D=1,P=r.knobs[1],n=[r.value[0],n]):(P=r.knobs[0],n=t*(r.max-r.min)+r.min),ns((function(){N&&P.addClass("range-knob-active-state")}),70),r.on("change",H),r.setValue(n,!0)}}function U(e){if(N){var t,n;if("touchmove"===e.type)for(var a=0;a<e.targetTouches.length;a+=1)e.targetTouches[a].identifier===_&&(t=e.targetTouches[a].pageX,n=e.targetTouches[a].pageY);else t=e.pageX,n=e.pageY;if(void 0!==t||void 0!==n)if(void 0!==R||r.vertical||(R=!!(R||Math.abs(n-W.y)>Math.abs(t-W.x))),R)N=!1;else{var o;e.preventDefault(),r.vertical?(o=(n-B)/r.rangeHeight,r.verticalReversed||(o=1-o)):o=r.app.rtl?(M+r.rangeWidth-t)/r.rangeWidth:(t-M)/r.rangeWidth;var s,i,l=o*(r.max-r.min)+r.min;if(r.dual)0===D?(s=l)>(i=r.value[1])&&(i=s):(i=l)<(s=r.value[0])&&(s=i),l=[s,i];r.setValue(l,!0)}}}function G(e){if("touchend"===e.type){for(var t,n=0;n<e.changedTouches.length;n+=1)e.changedTouches[n].identifier===_&&(t=!0);if(!t)return}if(!N)return R&&P.removeClass("range-knob-active-state"),void(N=!1);r.off("change",H),N=!1,P.removeClass("range-knob-active-state"),F&&r.$inputEl&&!r.dual&&r.$inputEl.trigger("change"),F=!1,void 0!==r.previousValue&&(r.dual&&(r.previousValue[0]!==r.value[0]||r.previousValue[1]!==r.value[1])||!r.dual&&r.previousValue!==r.value)&&(r.$el.trigger("range:changed",r.value),r.emit("local::changed rangeChanged",r,r.value))}function q(){r.calcSize(),r.layout()}return r.attachEvents=function(){var e=!!o.passiveListener&&{passive:!0};r.$el.on(t.touchEvents.start,j,e),t.on("touchmove",U),t.on("touchend:passive",G),t.on("tabShow",q),t.on("resize",q),(L=r.$el.parents(".sheet-modal, .actions-modal, .popup, .popover, .login-screen, .dialog, .toast")).on("modal:open",q),(z=r.$el.parents(".panel")).on("panel:open panel:resize",q),(V=r.$el.parents(".page").eq(0)).on("page:reinit",q)},r.detachEvents=function(){var e=!!o.passiveListener&&{passive:!0};r.$el.off(t.touchEvents.start,j,e),t.off("touchmove",U),t.off("touchend:passive",G),t.off("tabShow",q),t.off("resize",q),L&&L.off("modal:open",q),z&&z.off("panel:open panel:resize",q),V&&V.off("page:reinit",q),L=null,z=null,V=null},r.useModules(),r.init(),r||Tp(a)}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,Ip(t,n);var r=a.prototype;return r.calcSize=function(){var e=this;if(e.vertical){var t=e.$el.outerHeight();if(0===t)return;e.rangeHeight=t,e.knobHeight=e.knobs[0].outerHeight()}else{var n=e.$el.outerWidth();if(0===n)return;e.rangeWidth=n,e.knobWidth=e.knobs[0].outerWidth()}},r.layout=function(){var e=this,t=e.app,n=e.knobWidth,a=e.knobHeight,r=e.rangeWidth,o=e.rangeHeight,s=e.min,i=e.max,l=e.knobs,u=e.$barActiveEl,c=e.value,p=e.label,d=e.labels,h=e.vertical,f=e.verticalReversed,m=e.limitKnobPosition,g=h?a:n,v=h?o:r,b=h?f?"top":"bottom":t.rtl?"right":"left";if(e.dual){var y,w=[(c[0]-s)/(i-s),(c[1]-s)/(i-s)];u.css(((y={})[b]=100*w[0]+"%",y[h?"height":"width"]=100*(w[1]-w[0])+"%",y)),l.forEach((function(t,n){var a=v*w[n];if(m){var r=v*w[n]-g/2;r<0&&(a=g/2),r+g>v&&(a=v-g/2)}t.css(b,a+"px"),p&&d[n].text(e.formatLabel(c[n],d[n][0]))}))}else{var x=(c-s)/(i-s);u.css(h?"height":"width",100*x+"%");var k=v*x;if(m){var C=v*x-g/2;C<0&&(k=g/2),C+g>v&&(k=v-g/2)}l[0].css(b,k+"px"),p&&d[0].text(e.formatLabel(c,d[0][0]))}e.dual&&c.indexOf(s)>=0||!e.dual&&c===s?e.$el.addClass("range-slider-min"):e.$el.removeClass("range-slider-min"),e.dual&&c.indexOf(i)>=0||!e.dual&&c===i?e.$el.addClass("range-slider-max"):e.$el.removeClass("range-slider-max")},r.setValue=function(e,t){var n,a,r=this,o=r.step,s=r.min,i=r.max;if(r.dual){a=[r.value[0],r.value[1]];var l=e;if(Array.isArray(l)||(l=[e,e]),e[0]>e[1]&&(l=[l[0],l[0]]),l=l.map((function(e){return Math.max(Math.min(Math.round(e/o)*o,i),s)})),l[0]===r.value[0]&&l[1]===r.value[1])return r;l.forEach((function(e,t){r.value[t]=e})),n=a[0]!==l[0]||a[1]!==l[1],r.layout()}else{a=r.value;var u=Math.max(Math.min(Math.round(e/o)*o,i),s);r.value=u,r.layout(),n=a!==u}return n&&(r.previousValue=a),n?(r.$el.trigger("range:change",r.value),r.$inputEl&&!r.dual&&(r.$inputEl.val(r.value),t?r.$inputEl.trigger("input"):r.$inputEl.trigger("input change")),t||(r.$el.trigger("range:changed",r.value),r.emit("local::changed rangeChanged",r,r.value)),r.emit("local::change rangeChange",r,r.value),r):r},r.getValue=function(){return this.value},r.formatLabel=function(e,t){var n=this;return n.params.formatLabel?n.params.formatLabel.call(n,e,t):e},r.formatScaleLabel=function(e){var t=this;return t.params.formatScaleLabel?t.params.formatScaleLabel.call(t,e):e},r.renderScale=function(){var e=this,t=e.app,n=e.verticalReversed,a=e.vertical?n?"top":"bottom":t.rtl?"right":"left",r="";return Array.from({length:e.scaleSteps+1}).forEach((function(t,n){var o=(e.max-e.min)/e.scaleSteps,s=e.min+o*n,i=(s-e.min)/(e.max-e.min);r+='<div class="range-scale-step" style="'+a+": "+100*i+'%">'+e.formatScaleLabel(s)+"</div>",e.scaleSubSteps&&e.scaleSubSteps>1&&n<e.scaleSteps&&Array.from({length:e.scaleSubSteps-1}).forEach((function(t,n){var i=o/e.scaleSubSteps,l=(s+i*(n+1)-e.min)/(e.max-e.min);r+='<div class="range-scale-step range-scale-substep" style="'+a+": "+100*l+'%"></div>'}))})),r},r.updateScale=function(){var e=this;if(!e.scale||e.scaleSteps<1)return e.$scaleEl&&e.$scaleEl.remove(),void delete e.$scaleEl;e.$scaleEl||(e.$scaleEl=gl('<div class="range-scale"></div>'),e.$el.append(e.$scaleEl)),e.$scaleEl.html(e.renderScale())},r.init=function(){var e=this;return e.calcSize(),e.layout(),e.attachEvents(),e},r.destroy=function(){var e=this;e.$el.trigger("range:beforedestroy"),e.emit("local::beforeDestroy rangeBeforeDestroy",e),delete e.$el[0].f7Range,e.detachEvents(),Qo(e),e=null},a}(Ts),Op=Np,Rp={name:"range",create:function(){var e=this;e.range=cs(wl({defaultSelector:".range-slider",constructor:Op,app:e,domProp:"f7Range"}),{getValue:function(t){void 0===t&&(t=".range-slider");var n=e.range.get(t);if(n)return n.getValue()},setValue:function(t,n){void 0===t&&(t=".range-slider");var a=e.range.get(t);if(a)return a.setValue(n)}})},static:{Range:Op},on:{tabMounted:function(e){var t=this;gl(e).find(".range-slider-init").each((function(e){return new Op(t,{el:e})}))},tabBeforeRemove:function(e){gl(e).find(".range-slider-init").each((function(e){e.f7Range&&e.f7Range.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".range-slider-init").each((function(e){return new Op(t,{el:e})}))},pageBeforeRemove:function(e){e.$el.find(".range-slider-init").each((function(e){e.f7Range&&e.f7Range.destroy()}))}},vnode:{"range-slider-init":{insert:function(e){var t=e.elm;this.range.create({el:t})},destroy:function(e){var t=e.elm;t.f7Range&&t.f7Range.destroy()}}}};function Ap(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mp(e,t){return Mp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Mp(e,t)}var Bp=function(e){var t,n;function a(t,n){var a,r=Ap(a=e.call(this,n,[t])||this),o={el:null,inputEl:null,valueEl:null,value:0,formatValue:null,step:1,min:0,max:100,watchInput:!0,autorepeat:!1,autorepeatDynamic:!1,wraps:!1,manualInputMode:!1,decimalPoint:4,buttonsEndInputMode:!0};r.useModulesParams(o),r.params=cs(o,n),r.params.value<r.params.min&&(r.params.value=r.params.min),r.params.value>r.params.max&&(r.params.value=r.params.max);var s=r.params.el;if(!s)return r||Ap(a);var i,l,u=gl(s);if(0===u.length)return r||Ap(a);if(u[0].f7Stepper)return u[0].f7Stepper||Ap(a);if(r.params.inputEl?i=gl(r.params.inputEl):u.find(".stepper-input-wrap").find("input, textarea").length&&(i=u.find(".stepper-input-wrap").find("input, textarea").eq(0)),i&&i.length){"step min max".split(" ").forEach((function(e){!n[e]&&i.attr(e)&&(r.params[e]=parseFloat(i.attr(e)))}));var c=parseInt(r.params.decimalPoint,10);Number.isNaN(c)?r.params.decimalPoint=0:r.params.decimalPoint=c;var p=parseFloat(i.val());void 0!==n.value||Number.isNaN(p)||!p&&0!==p||(r.params.value=p)}r.params.valueEl?l=gl(r.params.valueEl):u.find(".stepper-value").length&&(l=u.find(".stepper-value").eq(0));var d=u.find(".stepper-button-plus"),h=u.find(".stepper-button-minus"),f=r.params,m=f.step,g=f.min,v=f.max,b=f.value,y=f.decimalPoint;cs(r,{app:t,$el:u,el:u[0],$buttonPlusEl:d,buttonPlusEl:d[0],$buttonMinusEl:h,buttonMinusEl:h[0],$inputEl:i,inputEl:i?i[0]:void 0,$valueEl:l,valueEl:l?l[0]:void 0,step:m,min:g,max:v,value:b,decimalPoint:y,typeModeChanged:!1}),u[0].f7Stepper=r;var w,x,k,C,E,S={},$=null,T=!1,I=!1;function N(e,t,n,a,r,o){clearTimeout(E),E=setTimeout((function(){1===e&&(k=!0,T=!0),clearInterval(C),o(),C=setInterval((function(){o()}),r),e<t&&N(e+1,t,n,a,r/2,o)}),1===e?n:a)}function O(e){w||(I||(gl(e.target).closest(d).length?$="increment":gl(e.target).closest(h).length&&($="decrement"),$&&(S.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,S.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,w=!0,x=void 0,N(1,r.params.autorepeatDynamic?4:1,500,1e3,300,(function(){r[$]()})))))}function R(e){if(w&&!I){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,n="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;void 0!==x||T||(x=!!(x||Math.abs(n-S.y)>Math.abs(t-S.x)));var a=Math.pow(Math.pow(t-S.x,2)+Math.pow(n-S.y,2),.5);(x||a>20)&&(w=!1,clearTimeout(E),clearInterval(C))}}function A(){clearTimeout(E),clearInterval(C),$=null,T=!1,w=!1}function M(){I?r.params.buttonsEndInputMode&&(I=!1,r.endTypeMode(!0)):k?k=!1:r.decrement(!0)}function B(){I?r.params.buttonsEndInputMode&&(I=!1,r.endTypeMode(!0)):k?k=!1:r.increment(!0)}function P(e){!e.target.readOnly&&r.params.manualInputMode&&(I=!0,"number"==typeof e.target.selectionStart&&(e.target.selectionStart=e.target.value.length,e.target.selectionEnd=e.target.value.length))}function D(e){13!==e.keyCode&&13!==e.which||(e.preventDefault(),I=!1,r.endTypeMode())}function F(){I=!1,r.endTypeMode(!0)}function _(e){I?r.typeValue(e.target.value):e.detail&&e.detail.sentByF7Stepper||r.setValue(e.target.value,!0)}return r.attachEvents=function(){h.on("click",M),d.on("click",B),r.params.watchInput&&i&&i.length&&(i.on("input",_),i.on("click",P),i.on("blur",F),i.on("keyup",D)),r.params.autorepeat&&(t.on("touchstart:passive",O),t.on("touchmove:active",R),t.on("touchend:passive",A))},r.detachEvents=function(){h.off("click",M),d.off("click",B),r.params.watchInput&&i&&i.length&&(i.off("input",_),i.off("click",P),i.off("blur",F),i.off("keyup",D))},r.useModules(),r.init(),r||Ap(a)}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,Mp(t,n);var r=a.prototype;return r.minus=function(){return this.decrement()},r.plus=function(){return this.increment()},r.decrement=function(){var e=this;return e.setValue(e.value-e.step,!1,!0)},r.increment=function(){var e=this;return e.setValue(e.value+e.step,!1,!0)},r.setValue=function(e,t,n){var a=this,r=a.step,o=a.min,s=a.max,i=a.value,l=Math.round(e/r)*r;if(a.params.wraps&&n?(l>s&&(l=o),l<o&&(l=s)):l=Math.max(Math.min(l,s),o),Number.isNaN(l)&&(l=i),a.value=l,!(i!==l)&&!t)return a;a.$el.trigger("stepper:change",a.value);var u=a.formatValue(a.value);return a.$inputEl&&a.$inputEl.length&&(a.$inputEl.val(u),a.$inputEl.trigger("input change",{sentByF7Stepper:!0})),a.$valueEl&&a.$valueEl.length&&a.$valueEl.html(u),a.emit("local::change stepperChange",a,a.value),a},r.endTypeMode=function(e){var t=this,n=t.min,a=t.max,r=parseFloat(t.value);if(Number.isNaN(r)&&(r=0),r=Math.max(Math.min(r,a),n),t.value=r,!t.typeModeChanged)return t.$inputEl&&t.$inputEl.length&&!e&&t.$inputEl.blur(),t;t.typeModeChanged=!1,t.$el.trigger("stepper:change",t.value);var o=t.formatValue(t.value);return t.$inputEl&&t.$inputEl.length&&(t.$inputEl.val(o),t.$inputEl.trigger("input change",{sentByF7Stepper:!0}),e||t.$inputEl.blur()),t.$valueEl&&t.$valueEl.length&&t.$valueEl.html(o),t.emit("local::change stepperChange",t,t.value),t},r.typeValue=function(e){var t=this;t.typeModeChanged=!0;var n=String(e);if(1===n.length&&"-"===n)return t;if(n.lastIndexOf(".")+1!==n.length&&n.lastIndexOf(",")+1!==n.length){var a=parseFloat(n.replace(",","."));if(0===a)return t.value=n.replace(",","."),t.$inputEl.val(t.value),t;if(Number.isNaN(a))return t.value=0,t.$inputEl.val(t.value),t;var r=Math.pow(10,t.params.decimalPoint);return a=Math.round(a*r).toFixed(t.params.decimalPoint+1)/r,t.value=parseFloat(String(a).replace(",",".")),t.$inputEl.val(t.value),t}return n.lastIndexOf(".")!==n.indexOf(".")||n.lastIndexOf(",")!==n.indexOf(",")?(n=n.slice(0,-1),t.value=n,t.$inputEl.val(t.value),t):(t.value=n,t.$inputEl.val(n),t)},r.getValue=function(){return this.value},r.formatValue=function(e){var t=this;return t.params.formatValue?t.params.formatValue.call(t,e):e},r.init=function(){var e=this;if(e.attachEvents(),e.$valueEl&&e.$valueEl.length){var t=e.formatValue(e.value);e.$valueEl.html(t)}return e},r.destroy=function(){var e=this;e.$el.trigger("stepper:beforedestroy"),e.emit("local::beforeDestroy stepperBeforeDestroy",e),delete e.$el[0].f7Stepper,e.detachEvents(),Qo(e),e=null},a}(Ts),Pp=Bp,Dp={name:"stepper",create:function(){var e=this;e.stepper=cs(wl({defaultSelector:".stepper",constructor:Pp,app:e,domProp:"f7Stepper"}),{getValue:function(t){void 0===t&&(t=".stepper");var n=e.stepper.get(t);if(n)return n.getValue()},setValue:function(t,n){void 0===t&&(t=".stepper");var a=e.stepper.get(t);if(a)return a.setValue(n)}})},static:{Stepper:Pp},on:{tabMounted:function(e){var t=this;gl(e).find(".stepper-init").each((function(e){var n=gl(e).dataset();t.stepper.create(cs({el:e},n||{}))}))},tabBeforeRemove:function(e){gl(e).find(".stepper-init").each((function(e){e.f7Stepper&&e.f7Stepper.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".stepper-init").each((function(e){var n=gl(e).dataset();t.stepper.create(cs({el:e},n||{}))}))},pageBeforeRemove:function(e){e.$el.find(".stepper-init").each((function(e){e.f7Stepper&&e.f7Stepper.destroy()}))}},vnode:{"stepper-init":{insert:function(e){var t=e.elm,n=gl(t).dataset();this.stepper.create(cs({el:t},n||{}))},destroy:function(e){var t=e.elm;t.f7Stepper&&t.f7Stepper.destroy()}}}};function Fp(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lp(e,t){return Lp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Lp(e,t)}var zp=function(e){var t,n;function a(t,n){var a;void 0===n&&(n={});var r=_p(a=e.call(this,n,[t])||this),o=cs({on:{}},t.params.smartSelect);void 0===o.searchbarDisableButton&&(o.searchbarDisableButton="aurora"!==t.theme),r.useModulesParams(o),r.params=cs({},o,n),r.app=t;var s=gl(r.params.el).eq(0);if(0===s.length)return r||_p(a);if(s[0].f7SmartSelect)return s[0].f7SmartSelect||_p(a);var i,l=s.find("select").eq(0);if(0===l.length)return r||_p(a);r.params.setValueText&&(0===(i=gl(r.params.valueEl)).length&&(i=s.find(".item-after")),0===i.length&&(i=gl('<div class="item-after"></div>')).insertAfter(s.find(".item-title")));var u=n.url;u||(s.attr("href")&&"#"!==s.attr("href")?u=s.attr("href"):l.attr("name")&&(u=l.attr("name").toLowerCase()+"-select/")),u||(u=r.params.url);var c=l[0].multiple,p=c?"checkbox":"radio",d=Go();function h(){r.open()}function f(){var e=r.$selectEl.val();r.$el.trigger("smartselect:change",e),r.emit("local::change smartSelectChange",r,e),r.vl&&r.vl.clearCache(),r.setValueText()}function m(){var e,t,n,a=this,o=a.value,s=[];if("checkbox"===a.type){for(var i=0;i<r.selectEl.options.length;i+=1)(e=r.selectEl.options[i]).value===o&&(e.selected=a.checked),e.selected&&(t=(n=e.dataset?e.dataset.displayAs:gl(e).data("display-value-as"))&&void 0!==n?n:e.textContent,s.push(t.trim()));r.maxLength&&r.checkMaxLength()}else(e=r.$selectEl.find('option[value="'+o+'"]')[0])||(e=r.$selectEl.find("option").filter((function(e){return e.value===o}))[0]),s=[t=(n=e.dataset?e.dataset.displayAs:gl(e).data("display-as"))&&void 0!==n?n:e.textContent],r.selectEl.value=o;r.$selectEl.trigger("change"),r.params.setValueText&&r.$valueEl.text(r.formatValueText(s)),r.params.closeOnSelect&&"radio"===r.inputType&&r.close()}return cs(r,{$el:s,el:s[0],$selectEl:l,selectEl:l[0],$valueEl:i,valueEl:i&&i[0],url:u,multiple:c,inputType:p,id:d,inputName:p+"-"+d,selectName:l.attr("name"),maxLength:l.attr("maxlength")||n.maxLength}),s[0].f7SmartSelect=r,r.attachEvents=function(){s.on("click",h),s.on("change","select",f)},r.detachEvents=function(){s.off("click",h),s.off("change","select",f)},r.attachInputsEvents=function(){r.$containerEl.on("change",'input[type="checkbox"], input[type="radio"]',m)},r.detachInputsEvents=function(){r.$containerEl.off("change",'input[type="checkbox"], input[type="radio"]',m)},r.useModules(),r.init(),r||_p(a)}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,Lp(t,n);var r,o,s,i=a.prototype;return i.setValue=function(e){var t,n,a,r=this,o=e,s=[];if(r.multiple){Array.isArray(o)||(o=[o]);for(var i=0;i<r.selectEl.options.length;i+=1)t=r.selectEl.options[i],o.indexOf(t.value)>=0?t.selected=!0:t.selected=!1,t.selected&&(a=(n=t.dataset?t.dataset.displayAs:gl(t).data("display-value-as"))&&void 0!==n?n:t.textContent,s.push(a.trim()))}else(t=r.$selectEl.find('option[value="'+o+'"]')[0])&&(s=[a=(n=t.dataset?t.dataset.displayAs:gl(t).data("display-as"))&&void 0!==n?n:t.textContent]),r.selectEl.value=o;return r.params.setValueText&&r.$valueEl.text(r.formatValueText(s)),r.$selectEl.trigger("change"),r},i.unsetValue=function(){var e=this;e.params.setValueText&&e.$valueEl.text(e.formatValueText([])),e.$selectEl.find("option").each((function(e){e.selected=!1,e.checked=!1})),e.$selectEl[0].value=null,e.$containerEl&&e.$containerEl.find('input[name="'+e.inputName+'"][type="checkbox"], input[name="'+e.inputName+'"][type="radio"]').prop("checked",!1),e.$selectEl.trigger("change")},i.getValue=function(){return this.$selectEl.val()},i.checkMaxLength=function(){var e=this,t=e.$containerEl;e.selectEl.selectedOptions.length>=e.maxLength?t.find('input[type="checkbox"]').each((function(e){e.checked?gl(e).parents("li").removeClass("disabled"):gl(e).parents("li").addClass("disabled")})):t.find(".disabled").removeClass("disabled")},i.formatValueText=function(e){var t=this;return t.params.formatValueText?t.params.formatValueText.call(t,e,t):e.join(", ")},i.setValueText=function(e){var t=this,n=[];void 0!==e?n=Array.isArray(e)?e:[e]:t.$selectEl.find("option").each((function(e){var t=gl(e);if(e.selected){var a=e.dataset?e.dataset.displayAs:t.data("display-value-as");a&&void 0!==a?n.push(a):n.push(e.textContent.trim())}})),t.params.setValueText&&t.$valueEl.text(t.formatValueText(n))},i.getItemsData=function(){var e,t=this,n=t.app.theme,a=[];return t.$selectEl.find("option").each((function(r){var o=gl(r),s=o.dataset(),i=s.optionImage||t.params.optionImage,l=s.optionIcon||t.params.optionIcon,u="ios"===n&&(s.optionIconIos||t.params.optionIconIos),c="md"===n&&(s.optionIconMd||t.params.optionIconMd),p="aurora"===n&&(s.optionIconAurora||t.params.optionIconAurora),d=i||l||u||c||p,h=s.optionColor,f=s.optionClass||"";o[0].disabled&&(f+=" disabled");var m=o.parent("optgroup")[0],g=m&&m.label,v=!1;m&&m!==e&&(v=!0,e=m,a.push({groupLabel:g,isLabel:v})),a.push({value:o[0].value,text:o[0].textContent.trim(),selected:o[0].selected,groupEl:m,groupLabel:g,image:i,icon:l,iconIos:u,iconMd:c,iconAurora:p,color:h,className:f,disabled:o[0].disabled,id:t.id,hasMedia:d,checkbox:"checkbox"===t.inputType,radio:"radio"===t.inputType,inputName:t.inputName,inputType:t.inputType})})),t.items=a,a},i.renderSearchbar=function(){var e=this;return e.params.renderSearchbar?e.params.renderSearchbar.call(e):ec("form",{class:"searchbar"},ec("div",{class:"searchbar-inner"},ec("div",{class:"searchbar-input-wrap"},ec("input",{type:"search",spellcheck:e.params.searchbarSpellcheck||"false",placeholder:e.params.searchbarPlaceholder}),ec("i",{class:"searchbar-icon"}),ec("span",{class:"input-clear-button"})),e.params.searchbarDisableButton&&ec("span",{class:"searchbar-disable-button"},e.params.searchbarDisableText)))},i.renderItem=function(e,t){var n,a,r=this;if(r.params.renderItem)return r.params.renderItem.call(r,e,t);if(e.isLabel)n='<li class="item-divider">'+e.groupLabel+"</li>";else{var o,s=e.selected;if(r.params.virtualList){var i=r.getValue();s=r.multiple?i.indexOf(e.value)>=0:i===e.value,r.multiple&&(o=r.multiple&&!s&&i.length===parseInt(r.maxLength,10))}var l=e.icon,u=e.iconIos,c=e.iconMd,p=e.iconAurora,d=l||u||c||p,h=(void 0===(a=l||u||c||p||"")&&(a=""),a.indexOf(":")>=0?a.split(":")[1]:""),f=function(e){if(void 0===e&&(e=""),e.indexOf(":")>=0){var t=e.split(":")[0];return"f7"===t&&(t="f7-icons"),"material"===t&&(t="material-icons"),t}return e}(l||u||c||p||"");n=ec("li",{class:(e.className||"")+(o?" disabled":"")},ec("label",{class:"item-"+e.inputType+" item-content"},ec("input",{type:e.inputType,name:e.inputName,value:e.value,_checked:s}),ec("i",{class:"icon icon-"+e.inputType}),e.hasMedia&&ec("div",{class:"item-media"},d&&ec("i",{class:"icon "+f},h),e.image&&ec("img",{src:e.image})),ec("div",{class:"item-inner"},ec("div",{class:"item-title"+(e.color?" text-color-"+e.color:"")},e.text))))}return n},i.renderItems=function(){var e=this;if(e.params.renderItems)return e.params.renderItems.call(e,e.items);var t="\n      "+e.items.map((function(t,n){return""+e.renderItem(t,n)})).join("")+"\n    ";return t},i.renderPage=function(){var e=this;if(e.params.renderPage)return e.params.renderPage.call(e,e.items);var t=e.params.pageTitle;if(void 0===t){var n=e.$el.find(".item-title");t=n.length?n.text().trim():""}var a=e.params.cssClass;return ec("div",{class:"page smart-select-page "+a,"data-name":"smart-select-page","data-select-name":e.selectName},ec("div",{class:"navbar "+(e.params.navbarColorTheme?"color-"+e.params.navbarColorTheme:"")},ec("div",{class:"navbar-bg"}),ec("div",{class:"navbar-inner sliding "+(e.params.navbarColorTheme?"color-"+e.params.navbarColorTheme:"")},ec("div",{class:"left"},ec("a",{class:"link back"},ec("i",{class:"icon icon-back"}),ec("span",{class:"if-not-md"},e.params.pageBackLinkText))),t&&ec("div",{class:"title"},t),e.params.searchbar&&ec("div",{class:"subnavbar"},e.renderSearchbar()))),e.params.searchbar&&ec("div",{class:"searchbar-backdrop"}),ec("div",{class:"page-content"},ec("div",{class:"list smart-select-list-"+e.id+" "+(e.params.virtualList?" virtual-list":"")+" "+(e.params.formColorTheme?"color-"+e.params.formColorTheme:"")},ec("ul",null,!e.params.virtualList&&e.renderItems(e.items)))))},i.renderPopup=function(){var e=this;if(e.params.renderPopup)return e.params.renderPopup.call(e,e.items);var t=e.params.pageTitle;if(void 0===t){var n=e.$el.find(".item-title");t=n.length?n.text().trim():""}var a=e.params.cssClass||"";return ec("div",{class:"popup smart-select-popup "+a+" "+(e.params.popupTabletFullscreen?"popup-tablet-fullscreen":""),"data-select-name":e.selectName},ec("div",{class:"view"},ec("div",{class:"page smart-select-page "+(e.params.searchbar?"page-with-subnavbar":""),"data-name":"smart-select-page"},ec("div",{class:"navbar "+(e.params.navbarColorTheme?"color-"+e.params.navbarColorTheme:"")},ec("div",{class:"navbar-bg"}),ec("div",{class:"navbar-inner sliding"},t&&ec("div",{class:"title"},t),ec("div",{class:"right"},ec("a",{class:"link popup-close","data-popup":".smart-select-popup[data-select-name='"+e.selectName+"']"},e.params.popupCloseLinkText)),e.params.searchbar&&ec("div",{class:"subnavbar"},e.renderSearchbar()))),e.params.searchbar&&ec("div",{class:"searchbar-backdrop"}),ec("div",{class:"page-content"},ec("div",{class:"list smart-select-list-"+e.id+" "+(e.params.virtualList?" virtual-list":"")+" "+(e.params.formColorTheme?"color-"+e.params.formColorTheme:"")},ec("ul",null,!e.params.virtualList&&e.renderItems(e.items)))))))},i.renderSheet=function(){var e=this;if(e.params.renderSheet)return e.params.renderSheet.call(e,e.items);var t=e.params.cssClass;return ec("div",{class:"sheet-modal smart-select-sheet "+t,"data-select-name":e.selectName},ec("div",{class:"toolbar toolbar-top "+(e.params.toolbarColorTheme?"color-"+e.params.toolbarColorTheme:"")},ec("div",{class:"toolbar-inner"},ec("div",{class:"left"}),ec("div",{class:"right"},ec("a",{class:"link sheet-close"},e.params.sheetCloseLinkText)))),ec("div",{class:"sheet-modal-inner"},ec("div",{class:"page-content"},ec("div",{class:"list smart-select-list-"+e.id+" "+(e.params.virtualList?" virtual-list":"")+" "+(e.params.formColorTheme?"color-"+e.params.formColorTheme:"")},ec("ul",null,!e.params.virtualList&&e.renderItems(e.items))))))},i.renderPopover=function(){var e=this;if(e.params.renderPopover)return e.params.renderPopover.call(e,e.items);var t=e.params.cssClass;return ec("div",{class:"popover smart-select-popover "+t,"data-select-name":e.selectName},ec("div",{class:"popover-inner"},ec("div",{class:"list smart-select-list-"+e.id+" "+(e.params.virtualList?" virtual-list":"")+" "+(e.params.formColorTheme?"color-"+e.params.formColorTheme:"")},ec("ul",null,!e.params.virtualList&&e.renderItems(e.items)))))},i.scrollToSelectedItem=function(){var e=this,t=e.params,n=e.$containerEl;if(!e.opened)return e;if(t.virtualList){var a;e.vl.items.forEach((function(e,t){void 0===a&&e.selected&&(a=t)})),void 0!==a&&e.vl.scrollToItem(a)}else{var r=n.find("input:checked").parents("li");if(!r.length)return e;var o=n.find(".page-content, .popover-inner");if(!o.length)return e;o.scrollTop(r.offset().top-o.offset().top-parseInt(o.css("padding-top"),10))}return e},i.onOpen=function(e,t){var n=this,a=n.app,r=gl(t);if(n.$containerEl=r,n.openedIn=e,n.opened=!0,n.params.virtualList&&(n.vl=a.virtualList.create({el:r.find(".virtual-list"),items:n.items,renderItem:n.renderItem.bind(n),height:n.params.virtualListHeight,searchByItem:function(e,t){return!!(t.text&&t.text.toLowerCase().indexOf(e.trim().toLowerCase())>=0)}})),n.params.scrollToSelectedItem&&n.scrollToSelectedItem(),n.params.searchbar){var o=r.find(".searchbar");if("page"===e&&"ios"===a.theme&&(o=gl(a.navbar.getElByPage(r)).find(".searchbar")),n.params.appendSearchbarNotFound&&("page"===e||"popup"===e)){var s=null;(s="string"==typeof n.params.appendSearchbarNotFound?gl('<div class="block searchbar-not-found">'+n.params.appendSearchbarNotFound+"</div>"):"boolean"==typeof n.params.appendSearchbarNotFound?gl('<div class="block searchbar-not-found">Nothing found</div>'):n.params.appendSearchbarNotFound)&&r.find(".page-content").append(s[0])}var i=cs({el:o,backdropEl:r.find(".searchbar-backdrop"),searchContainer:".smart-select-list-"+n.id,searchIn:".item-title"},"object"==typeof n.params.searchbar?n.params.searchbar:{});n.searchbar=a.searchbar.create(i)}n.maxLength&&n.checkMaxLength(),n.params.closeOnSelect&&n.$containerEl.find('input[type="radio"][name="'+n.inputName+'"]:checked').parents("label").once("click",(function(){n.close()})),n.attachInputsEvents(),n.$el.trigger("smartselect:open"),n.emit("local::open smartSelectOpen",n)},i.onOpened=function(){var e=this;e.$el.trigger("smartselect:opened"),e.emit("local::opened smartSelectOpened",e)},i.onClose=function(){var e=this;e.destroyed||(e.vl&&e.vl.destroy&&(e.vl.destroy(),e.vl=null,delete e.vl),e.searchbar&&e.searchbar.destroy&&(e.searchbar.destroy(),e.searchbar=null,delete e.searchbar),e.detachInputsEvents(),e.$el.trigger("smartselect:close"),e.emit("local::close smartSelectClose",e))},i.onClosed=function(){var e=this;e.destroyed||(e.opened=!1,e.$containerEl=null,delete e.$containerEl,e.$el.trigger("smartselect:closed"),e.emit("local::closed smartSelectClosed",e))},i.openPage=function(){var e=this;if(e.opened)return e;e.getItemsData();var t=e.renderPage(e.items);return e.view.router.navigate({url:e.url,route:{content:t,path:e.url,on:{pageBeforeIn:function(t,n){e.onOpen("page",n.el)},pageAfterIn:function(t,n){e.onOpened("page",n.el)},pageBeforeOut:function(t,n){e.onClose("page",n.el)},pageAfterOut:function(t,n){e.onClosed("page",n.el)}}}}),e},i.openPopup=function(){var e=this;if(e.opened)return e;e.getItemsData();var t={content:e.renderPopup(e.items),push:e.params.popupPush,swipeToClose:e.params.popupSwipeToClose,on:{popupOpen:function(t){e.onOpen("popup",t.el)},popupOpened:function(t){e.onOpened("popup",t.el)},popupClose:function(t){e.onClose("popup",t.el)},popupClosed:function(t){e.onClosed("popup",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,popup:t}}):e.modal=e.app.popup.create(t).open(),e},i.openSheet=function(){var e=this;if(e.opened)return e;e.getItemsData();var t={content:e.renderSheet(e.items),backdrop:e.params.sheetBackdrop,scrollToEl:e.$el,closeByOutsideClick:!0,push:e.params.sheetPush,swipeToClose:e.params.sheetSwipeToClose,on:{sheetOpen:function(t){e.onOpen("sheet",t.el)},sheetOpened:function(t){e.onOpened("sheet",t.el)},sheetClose:function(t){e.onClose("sheet",t.el)},sheetClosed:function(t){e.onClosed("sheet",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,sheet:t}}):e.modal=e.app.sheet.create(t).open(),e},i.openPopover=function(){var e=this;if(e.opened)return e;e.getItemsData();var t={content:e.renderPopover(e.items),targetEl:e.$el,on:{popoverOpen:function(t){e.onOpen("popover",t.el)},popoverOpened:function(t){e.onOpened("popover",t.el)},popoverClose:function(t){e.onClose("popover",t.el)},popoverClosed:function(t){e.onClosed("popover",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,popover:t}}):e.modal=e.app.popover.create(t).open(),e},i.open=function(e){var t=this;if(t.opened)return t;var n=!1;function a(){n=!0}return t.$el&&t.$el.trigger("smartselect:beforeopen",{prevent:a}),t.emit("local::beforeOpen smartSelectBeforeOpen",t,a),n||t["open"+(e||t.params.openIn).split("").map((function(e,t){return 0===t?e.toUpperCase():e})).join("")](),t},i.close=function(){var e=this;return e.opened?(e.params.routableModals&&e.view||"page"===e.openedIn?e.view.router.back():(e.modal.once("modalClosed",(function(){ns((function(){e.destroyed||(e.modal.destroy(),delete e.modal)}))})),e.modal.close()),e):e},i.init=function(){this.attachEvents(),this.setValueText()},i.destroy=function(){var e=this;e.emit("local::beforeDestroy smartSelectBeforeDestroy",e),e.$el.trigger("smartselect:beforedestroy"),e.detachEvents(),delete e.$el[0].f7SmartSelect,Qo(e),e.destroyed=!0},r=a,o=[{key:"view",get:function(){var e,t=this.params,n=this.$el;if(t.view&&(e=t.view),e||(e=n.parents(".view").length&&n.parents(".view")[0].f7View),!e&&"page"===t.openIn)throw Error("Smart Select requires initialized View");return e}}],o&&Fp(r.prototype,o),s&&Fp(r,s),a}(Ts),Vp=zp,Wp={name:"smartSelect",params:{smartSelect:{el:void 0,valueEl:void 0,setValueText:!0,formatValueText:null,openIn:"page",popupPush:!1,popupSwipeToClose:void 0,sheetPush:!1,sheetSwipeToClose:void 0,sheetBackdrop:!1,pageTitle:void 0,pageBackLinkText:"Back",popupCloseLinkText:"Close",popupTabletFullscreen:!1,sheetCloseLinkText:"Done",searchbar:!1,searchbarPlaceholder:"Search",searchbarDisableText:"Cancel",searchbarDisableButton:void 0,searchbarSpellcheck:!1,closeOnSelect:!1,virtualList:!1,virtualListHeight:void 0,scrollToSelectedItem:!1,formColorTheme:void 0,navbarColorTheme:void 0,routableModals:!1,url:"select/",cssClass:"",renderPage:void 0,renderPopup:void 0,renderSheet:void 0,renderPopover:void 0,renderItems:void 0,renderItem:void 0,renderSearchbar:void 0}},static:{SmartSelect:Vp},create:function(){var e=this;e.smartSelect=cs(wl({defaultSelector:".smart-select",constructor:Vp,app:e,domProp:"f7SmartSelect"}),{open:function(t){var n=e.smartSelect.get(t);if(n&&n.open)return n.open()},close:function(t){var n=e.smartSelect.get(t);if(n&&n.close)return n.close()}})},on:{tabMounted:function(e){var t=this;gl(e).find(".smart-select-init").each((function(e){t.smartSelect.create(cs({el:e},gl(e).dataset()))}))},tabBeforeRemove:function(e){gl(e).find(".smart-select-init").each((function(e){e.f7SmartSelect&&e.f7SmartSelect.destroy&&e.f7SmartSelect.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".smart-select-init").each((function(e){t.smartSelect.create(cs({el:e},gl(e).dataset()))}))},pageBeforeRemove:function(e){e.$el.find(".smart-select-init").each((function(e){e.f7SmartSelect&&e.f7SmartSelect.destroy&&e.f7SmartSelect.destroy()}))}},clicks:{".smart-select":function(e,t){e[0].f7SmartSelect||this.smartSelect.create(cs({el:e},t)).open()}},vnode:{"smart-select-init":{insert:function(e){var t=e.elm;this.smartSelect.create(cs({el:t},gl(t).dataset()))},destroy:function(e){var t=e.elm;t.f7SmartSelect&&t.f7SmartSelect.destroy&&t.f7SmartSelect.destroy()}}}};function Hp(e,t){var n=t.css("min-"+e);return"auto"===n||"none"===n?n=0:n.indexOf("px")>=0?n=parseFloat(n):n.indexOf("%")>=0&&(n=t.parent()[0]["height"===e?"offsetHeight":"offsetWidth"]*parseFloat(n)/100),n}function jp(e,t){var n=t.css("max-"+e);return"auto"===n||"none"===n?n=null:n.indexOf("px")>=0?n=parseFloat(n):n.indexOf("%")>=0&&(n=t.parent()[0]["height"===e?"offsetHeight":"offsetWidth"]*parseFloat(n)/100),n}var Up={init:function(){var e,t,n,a,r,o,s,i,l,u,c,p,d,h,f,m,g,v=this;var b=Vo();gl(b).on(v.touchEvents.start,".col > .resize-handler, .row > .resize-handler",(function(i){e||t||(r=gl(i.target).closest(".resize-handler"),n="touchstart"===i.type?i.targetTouches[0].pageX:i.pageX,a="touchstart"===i.type?i.targetTouches[0].pageY:i.pageY,e=!0,o=void 0,s=void 0,g=void 0)})),v.on("touchmove",(function(b){if(e){var y=1===r.parent(".row").length,w=y?"height":"width",x=y?"offsetHeight":"offsetWidth";t||(!(o=r.parent(y?".row":".col")).length||o.hasClass("resizable")&&!o.hasClass("resizable-fixed")||(o=o.prevAll(".resizable:not(.resizable-fixed)").eq(0)),!(s=o.next(y?".row":".col")).length||s.hasClass("resizable")&&!s.hasClass("resizable-fixed")||(s=s.nextAll(".resizable:not(.resizable-fixed)").eq(0)),o.length&&(i=o[0][x],l=Hp(w,o),u=jp(w,o),h=o.parent()[0][x],f=o.parent().children(y?".row":'[class*="col-"], .col').length,m=parseFloat(o.css(y?"--f7-grid-row-gap":"--f7-grid-gap"))),s.length&&(c=s[0][x],p=Hp(w,s),d=jp(w,s),o.length||(h=s.parent()[0][x],f=s.parent().children(y?".row":'[class*="col-"], .col').length,m=parseFloat(s.css(y?"--f7-grid-row-gap":"--f7-grid-gap"))))),t=!0;var k="touchmove"===b.type?b.targetTouches[0].pageX:b.pageX,C="touchmove"===b.type?b.targetTouches[0].pageY:b.pageY;if(void 0!==g||y||(g=!!(g||Math.abs(C-a)>Math.abs(k-n))),g)return e=!1,void(t=!1);var E=o.hasClass("resizable-absolute")||s.hasClass("resizable-absolute"),S=!y||y&&!E;if(S&&!s.length||!o.length)return e=!1,void(t=!1);b.preventDefault();var $,T,I=y?C-a:k-n;if(o.length&&(($=i+I)<l&&(I=($=l)-i),u&&$>u&&(I=($=u)-i)),s.length&&S&&((T=c-I)<p&&($=i+(I=c-(T=p))),d&&T>d&&($=i+(I=c-(T=d)))),E)return o[0].style[w]=$+"px",S&&(s[0].style[w]=T+"px"),o.trigger("grid:resize"),s.trigger("grid:resize"),v.emit("gridResize",o[0]),void v.emit("gridResize",s[0]);var N=(f-1)*m/f,O=y?f-1+" * var(--f7-grid-row-gap) / "+f:"(var(--f7-cols-per-row) - 1) * var(--f7-grid-gap) / var(--f7-cols-per-row)",R=$+N,A=T+N;o[0].style[w]="calc("+R/h*100+"% - "+O+")",s[0].style[w]="calc("+A/h*100+"% - "+O+")",o.trigger("grid:resize"),s.trigger("grid:resize"),v.emit("gridResize",o[0]),v.emit("gridResize",s[0])}})),v.on("touchend",(function(){e&&(t||(e=!1),e=!1,t=!1)}))}},Gp={name:"grid",create:function(){cs(this,{grid:{init:Up.init.bind(this)}})},on:{init:function(){this.grid.init()}}};function qp(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Xp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yp(e,t){return Yp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Yp(e,t)}var Kp=function(e){var t,n;function a(t,n){var a;void 0===n&&(n={});var r,o,s=Xp(a=e.call(this,n,[t])||this);if(s.params=cs({},t.params.calendar,n),s.params.containerEl&&0===(r=gl(s.params.containerEl)).length)return s||Xp(a);s.params.inputEl&&(o=gl(s.params.inputEl));var i="horizontal"===s.params.direction,l=1;i&&(l=t.rtl?-1:1),cs(s,{app:t,$containerEl:r,containerEl:r&&r[0],inline:r&&r.length>0,$inputEl:o,inputEl:o&&o[0],initialized:!1,opened:!1,url:s.params.url,isHorizontal:i,inverter:l,animating:!1,allowTouchMove:!0,hasTimePicker:s.params.timePicker&&!s.params.rangePicker&&!s.params.multiple}),s.dayFormatter=function(e){return new Intl.DateTimeFormat(s.params.locale,{day:"numeric"}).format(e).replace(//,"")},s.monthFormatter=function(e){return new Intl.DateTimeFormat(s.params.locale,{month:"long"}).format(e)},s.yearFormatter=function(e){return new Intl.DateTimeFormat(s.params.locale,{year:"numeric"}).format(e)},s.timeSelectorFormatter=function(e){return new Intl.DateTimeFormat(s.params.locale,s.params.timePickerFormat).format(e)};var u=s.timeSelectorFormatter(new Date).toLowerCase();s.is12HoursFormat=u.indexOf("pm")>=0||u.indexOf("am")>=0;var c=s.params,p=c.monthNames,d=c.monthNamesShort,h=c.dayNames,f=c.dayNamesShort,m=s.getIntlNames(),g=m.monthNamesIntl,v=m.monthNamesShortIntl,b=m.dayNamesIntl,y=m.dayNamesShortIntl;function w(){s.open()}function x(e){e.preventDefault()}function k(){s.setValue([]),s.opened&&s.update()}function C(e){var t=gl(e.target);!s.destroyed&&s.params&&(s.isPopover()||s.opened&&!s.closing&&(t.closest('[class*="backdrop"]').length||(o&&o.length>0?t[0]!==o[0]&&0===t.closest(".sheet-modal, .calendar-modal").length&&s.close():0===gl(e.target).closest(".sheet-modal, .calendar-modal").length&&s.close())))}return"auto"===p&&(p=g),"auto"===d&&(d=v),"auto"===h&&(h=b),"auto"===f&&(f=y),cs(s,{monthNames:p,monthNamesShort:d,dayNames:h,dayNamesShort:f}),cs(s,{attachInputEvents:function(){s.$inputEl.on("click",w),s.$inputEl.on("input:clear",k),s.params.inputReadOnly&&(s.$inputEl.on("focus mousedown",x),s.$inputEl[0]&&(s.$inputEl[0].f7ValidateReadonly=!0))},detachInputEvents:function(){s.$inputEl.off("click",w),s.$inputEl.off("input:clear",k),s.params.inputReadOnly&&(s.$inputEl.off("focus mousedown",x),s.$inputEl[0]&&delete s.$inputEl[0].f7ValidateReadonly)},attachHtmlEvents:function(){t.on("click",C)},detachHtmlEvents:function(){t.off("click",C)}}),s.attachCalendarEvents=function(){var e,n,a,r,o,i,l,u,c,p,d,h,f,m=!0,g=s.$el,v=s.$wrapperEl;function b(t){n||e||(e=!0,a="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,o=a,r="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY,i=r,l=(new Date).getTime(),d=0,m=!0,f=void 0,u=s.monthsTranslate)}function y(t){if(e){var l=s.isHorizontal;o="touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,i="touchmove"===t.type?t.targetTouches[0].pageY:t.pageY,void 0===f&&(f=!!(f||Math.abs(i-r)>Math.abs(o-a))),l&&f||!s.allowTouchMove?e=!1:(t.preventDefault(),s.animating?e=!1:(m=!1,n||(n=!0,c=v[0].offsetWidth,p=v[0].offsetHeight,v.transition(0)),d=(h=l?o-a:i-r)/(l?c:p),u=100*(s.monthsTranslate*s.inverter+d),v.transform("translate3d("+(l?u:0)+"%, "+(l?0:u)+"%, 0)")))}}function w(){if(!e||!n)return e=!1,void(n=!1);e=!1,n=!1,(new Date).getTime()-l<300?Math.abs(h)<10?s.resetMonth():h>=10?t.rtl?s.nextMonth():s.prevMonth():t.rtl?s.prevMonth():s.nextMonth():d<=-.5?t.rtl?s.prevMonth():s.nextMonth():d>=.5?t.rtl?s.nextMonth():s.prevMonth():s.resetMonth(),setTimeout((function(){m=!0}),100)}function x(e){if(m){var t=gl(e.target).parents(".calendar-day");if(0===t.length&&gl(e.target).hasClass("calendar-day")&&(t=gl(e.target)),0!==t.length&&!t.hasClass("calendar-day-disabled")){s.params.rangePicker||(t.hasClass("calendar-day-next")&&s.nextMonth(),t.hasClass("calendar-day-prev")&&s.prevMonth());var n=parseInt(t.attr("data-year"),10),a=parseInt(t.attr("data-month"),10),r=parseInt(t.attr("data-day"),10);if(s.emit("local::dayClick calendarDayClick",s,t[0],n,a,r),!t.hasClass("calendar-day-selected")||s.params.multiple||s.params.rangePicker){var o=new Date(n,a,r,0,0,0);s.hasTimePicker&&(s.value&&s.value[0]?o.setHours(s.value[0].getHours(),s.value[0].getMinutes()):o.setHours((new Date).getHours(),(new Date).getMinutes())),s.addValue(o)}s.params.closeOnSelect&&(s.params.rangePicker&&2===s.value.length||!s.params.rangePicker)&&s.close()}}}function k(){s.nextMonth()}function C(){s.prevMonth()}function E(){s.nextYear()}function S(){s.prevYear()}function $(){g.append(s.renderMonthPicker())}function T(){var e=gl(this);if(e.hasClass("calendar-month-picker-item-current"))g.find(".calendar-month-picker").remove();else{g.find(".calendar-month-picker-item-current").add(e).toggleClass("calendar-month-picker-item-current");var t=e.index()-(parseInt(s.$el.find(".calendar-month-current").attr("data-locale-month"),10)-s.currentMonth);s.setYearMonth(s.currentYear,t,0),setTimeout((function(){g.find(".calendar-month-picker").remove()}),200)}}function I(){g.append(s.renderYearPicker());var e=g.find(".calendar-year-picker-item-current"),t=g.find(".calendar-year-picker");e&&e.length&&t.scrollTop(e[0].offsetTop-t[0].offsetHeight/2+e[0].offsetHeight/2)}function N(){var e=gl(this);if(e.hasClass("calendar-year-picker-item-current"))g.find(".calendar-year-picker").remove();else{g.find(".calendar-year-picker-item-current").add(e).toggleClass("calendar-year-picker-item-current");var t=parseInt(e.attr("data-year"),10);s.setYearMonth(t,void 0,0),setTimeout((function(){g.find(".calendar-year-picker").remove()}),200)}}function O(){s.openTimePicker()}function R(){s.closeTimePicker()}var A=!("touchstart"!==t.touchEvents.start||!ws().passiveListener)&&{passive:!0,capture:!1};g.find(".calendar-prev-month-button").on("click",C),g.find(".calendar-next-month-button").on("click",k),g.find(".calendar-prev-year-button").on("click",S),g.find(".calendar-next-year-button").on("click",E),s.params.monthPicker&&(g.find(".current-month-value").on("click",$),g.on("click",".calendar-month-picker-item",T)),s.params.yearPicker&&(g.find(".current-year-value").on("click",I),g.on("click",".calendar-year-picker-item",N)),s.hasTimePicker&&(g.find(".calendar-time-selector a").on("click",O),g.on("click",".calendar-time-picker-close",R)),v.on("click",x),s.params.touchMove&&(v.on(t.touchEvents.start,b,A),t.on("touchmove:active",y),t.on("touchend:passive",w)),s.detachCalendarEvents=function(){g.find(".calendar-prev-month-button").off("click",C),g.find(".calendar-next-month-button").off("click",k),g.find(".calendar-prev-year-button").off("click",S),g.find(".calendar-next-year-button").off("click",E),s.params.monthPicker&&(g.find(".current-month-value").off("click",$),g.off("click",".calendar-month-picker-item",T)),s.params.yearPicker&&(g.find(".current-year-value").off("click",I),g.off("click",".calendar-year-picker-item",N)),s.hasTimePicker&&(g.find(".calendar-time-selector a").off("click",O),g.off("click",".calendar-time-picker-close",R)),v.off("click",x),s.params.touchMove&&(v.off(t.touchEvents.start,b,A),t.off("touchmove:active",y),t.off("touchend:passive",w))}},s.init(),s||Xp(a)}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,Yp(t,n);var r,o,s,i=a.prototype;return i.getIntlNames=function(){for(var e,t,n,a=this.params.locale,r=[],o=[],s=[],i=[],l=new Intl.DateTimeFormat(a,{month:"long"}),u=new Intl.DateTimeFormat(a,{month:"short"}),c=new Intl.DateTimeFormat(a,{weekday:"long"}),p=new Intl.DateTimeFormat(a,{weekday:"short"}),d=0;d<24;d+=1){var h=(new Date).setMonth(d,1),f=this.yearFormatter(h);e&&f!==e&&(t&&(n=!0),t=!0,e=f),e||(e=f),t&&e===f&&!n&&(r.push(l.format(h)),o.push(u.format(h)))}for(var m=(new Date).getDay(),g=0;g<7;g+=1){var v=(new Date).getTime()+24*(g-m)*60*60*1e3;s.push(c.format(v)),i.push(p.format(v))}return{monthNamesIntl:r,monthNamesShortIntl:o,dayNamesIntl:s,dayNamesShortIntl:i}},i.normalizeDate=function(e){var t=new Date(e);return this.hasTimePicker?new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()):new Date(t.getFullYear(),t.getMonth(),t.getDate())},i.normalizeValues=function(e){var t=this,n=[];return e&&Array.isArray(e)&&(n=e.map((function(e){return t.normalizeDate(e)}))),n},i.initInput=function(){var e=this;e.$inputEl&&e.params.inputReadOnly&&e.$inputEl.prop("readOnly",!0)},i.isPopover=function(){var e=this,t=e.app,n=e.modal,a=e.params,r=xs();if("sheet"===a.openIn)return!1;if(n&&"popover"!==n.type)return!1;if(!e.inline&&e.inputEl){if("popover"===a.openIn)return!0;if(r.ios)return!!r.ipad;if(t.width>=768)return!0;if(r.desktop&&"aurora"===t.theme)return!0}return!1},i.formatDate=function(e){var t=this,n=new Date(e),a=n.getFullYear(),r=n.getMonth(),o=r+1,s=n.getDate(),i=n.getDay(),l=t.monthNames,u=t.monthNamesShort,c=t.dayNames,p=t.dayNamesShort,d=t.params,h=d.dateFormat,f=d.locale;function m(e){return e<10?"0"+e:e}if("string"==typeof h){var g={yyyy:a,yy:String(a).substring(2),mm:m(o),m:o,MM:l[r],M:u[r],dd:m(s),d:s,DD:c[i],D:p[i]};if(t.params.timePicker){var v=n.getHours(),b=n.getMinutes(),y=n.getSeconds(),w=v;v>12&&(w=v-12),0===v&&(w=12);var x=v>=12&&0!==v?"pm":"am";Object.assign(g,{HH:m(v),H:v,hh:m(w),h:w,ss:m(y),s:y,":mm":m(b),":m":b,a:x,A:x.toUpperCase()})}var k=new RegExp(Object.keys(g).map((function(e){return"("+e+")"})).join("|"),"g");return h.replace(k,(function(e){return e in g?g[e]:e}))}return"function"==typeof h?h(n):new Intl.DateTimeFormat(f,h).format(n)},i.formatValue=function(){var e=this,t=e.value;return e.params.formatValue?e.params.formatValue.call(e,t):t.map((function(t){return e.formatDate(t)})).join(e.params.rangePicker?" - ":", ")},i.addValue=function(e){var t=this,n=t.params,a=n.multiple,r=n.rangePicker,o=n.rangePickerMinDays,s=n.rangePickerMaxDays;if(a){var i;t.value||(t.value=[]);for(var l=0;l<t.value.length;l+=1)new Date(e).getTime()===new Date(t.value[l]).getTime()&&(i=l);void 0===i?t.value.push(e):t.value.splice(i,1),t.updateValue()}else r?(t.value||(t.value=[]),2!==t.value.length&&0!==t.value.length||(t.value=[]),0===t.value.length||Math.abs(t.value[0].getTime()-e.getTime())>=60*(o-1)*60*24*1e3&&(0===s||Math.abs(t.value[0].getTime()-e.getTime())<=60*(s-1)*60*24*1e3)?t.value.push(e):t.value=[],t.value.sort((function(e,t){return e-t})),t.updateValue()):(t.value=[e],t.updateValue())},i.setValue=function(e){var t=this,n=t.value;if(Array.isArray(n)&&Array.isArray(e)&&n.length===e.length){var a=!0;if(n.forEach((function(t,n){t!==e[n]&&(a=!1)})),a)return}t.value=e,t.updateValue()},i.getValue=function(){return this.value},i.updateValue=function(e){var t,n,a=this,r=a.$el,o=a.$wrapperEl,s=a.$inputEl,i=a.value,l=a.params;if(r&&r.length>0)if(o.find(".calendar-day-selected").removeClass("calendar-day-selected calendar-day-selected-range calendar-day-selected-left calendar-day-selected-right"),l.rangePicker&&2===i.length){var u=new Date(i[0]).getTime(),c=new Date(i[1]).getTime();for(t=u;t<=c;t+=864e5){n=new Date(t);var p="calendar-day-selected";u!==c&&(t!==u&&t!==c&&(p+=" calendar-day-selected-range"),t===u&&(p+=" calendar-day-selected-left"),t===c&&(p+=" calendar-day-selected-right")),o.find('.calendar-day[data-date="'+n.getFullYear()+"-"+n.getMonth()+"-"+n.getDate()+'"]').addClass(p)}n=new Date(u),o.find('.calendar-day[data-date="'+n.getFullYear()+"-"+n.getMonth()+"-"+n.getDate()+'"]').removeClass("calendar-day-selected-range").addClass("calendar-day-selected calendar-day-selected-left"),n=new Date(c),o.find('.calendar-day[data-date="'+n.getFullYear()+"-"+n.getMonth()+"-"+n.getDate()+'"]').removeClass("calendar-day-selected-range").addClass("calendar-day-selected calendar-day-selected-right")}else for(t=0;t<a.value.length;t+=1)n=new Date(i[t]),o.find('.calendar-day[data-date="'+n.getFullYear()+"-"+n.getMonth()+"-"+n.getDate()+'"]').addClass("calendar-day-selected");if(e||a.emit("local::change calendarChange",a,i),r&&r.length>0&&a.hasTimePicker&&r.find(".calendar-time-selector a").text(i&&i.length?a.timeSelectorFormatter(i[0]):a.params.timePickerPlaceholder),s&&s.length||l.header){var d=a.formatValue(i);l.header&&r&&r.length&&r.find(".calendar-selected-date").text(d),s&&s.length&&!e&&(s.val(d),s.trigger("change"))}},i.updateCurrentMonthYear=function(e){var t,n,a=this,r=a.$months,o=a.$el,s=a.monthNames;void 0===e?(a.currentMonth=parseInt(r.eq(1).attr("data-month"),10),a.currentYear=parseInt(r.eq(1).attr("data-year"),10),t=r.eq(1).attr("data-locale-month"),n=r.eq(1).attr("data-locale-year")):(a.currentMonth=parseInt(r.eq("next"===e?r.length-1:0).attr("data-month"),10),a.currentYear=parseInt(r.eq("next"===e?r.length-1:0).attr("data-year"),10),t=r.eq("next"===e?r.length-1:0).attr("data-locale-month"),n=r.eq("next"===e?r.length-1:0).attr("data-locale-year")),o.find(".current-month-value").text(s[t]),o.find(".current-year-value").text(n)},i.update=function(){var e=this,t=e.currentYear,n=e.currentMonth,a=e.$wrapperEl,r=new Date(t,n),o=e.renderMonth(r,"prev"),s=e.renderMonth(r),i=e.renderMonth(r,"next");a.transition(0).html(""+o+s+i).transform("translate3d(0,0,0)"),e.$months=a.find(".calendar-month"),e.monthsTranslate=0,e.setMonthsTranslate(),e.$months.each((function(t){e.emit("local::monthAdd calendarMonthAdd",t)}))},i.onMonthChangeStart=function(e){var t=this,n=t.$months,a=t.currentYear,r=t.currentMonth;t.updateCurrentMonthYear(e),n.removeClass("calendar-month-current calendar-month-prev calendar-month-next");var o="next"===e?n.length-1:0;n.eq(o).addClass("calendar-month-current"),n.eq("next"===e?o-1:o+1).addClass("next"===e?"calendar-month-prev":"calendar-month-next"),t.emit("local::monthYearChangeStart calendarMonthYearChangeStart",t,a,r)},i.onMonthChangeEnd=function(e,t){var n,a,r,o=this,s=o.currentYear,i=o.currentMonth,l=o.$wrapperEl,u=o.monthsTranslate;o.animating=!1,l.find(".calendar-month:not(.calendar-month-prev):not(.calendar-month-current):not(.calendar-month-next)").remove(),void 0===e&&(e="next",t=!0),t?(l.find(".calendar-month-next, .calendar-month-prev").remove(),a=o.renderMonth(new Date(s,i),"prev"),n=o.renderMonth(new Date(s,i),"next")):r=o.renderMonth(new Date(s,i),e),("next"===e||t)&&l.append(r||n),("prev"===e||t)&&l.prepend(r||a);var c=l.find(".calendar-month");o.$months=c,o.setMonthsTranslate(u),o.emit("local::monthAdd calendarMonthAdd",o,"next"===e?c.eq(c.length-1)[0]:c.eq(0)[0]),o.emit("local::monthYearChangeEnd calendarMonthYearChangeEnd",o,s,i)},i.setMonthsTranslate=function(e){var t=this,n=t.$months,a=t.isHorizontal,r=t.inverter;e=e||t.monthsTranslate||0,void 0===t.monthsTranslate&&(t.monthsTranslate=e),n.removeClass("calendar-month-current calendar-month-prev calendar-month-next");var o=100*-(e+1)*r,s=100*-e*r,i=100*-(e-1)*r;n.eq(0).transform("translate3d("+(a?o:0)+"%, "+(a?0:o)+"%, 0)").addClass("calendar-month-prev"),n.eq(1).transform("translate3d("+(a?s:0)+"%, "+(a?0:s)+"%, 0)").addClass("calendar-month-current"),n.eq(2).transform("translate3d("+(a?i:0)+"%, "+(a?0:i)+"%, 0)").addClass("calendar-month-next")},i.nextMonth=function(e){var t=this,n=t.params,a=t.$wrapperEl,r=t.inverter,o=t.isHorizontal;void 0!==e&&"object"!=typeof e||(e="",n.animate||(e=0));var s=parseInt(t.$months.eq(t.$months.length-1).attr("data-month"),10),i=parseInt(t.$months.eq(t.$months.length-1).attr("data-year"),10),l=new Date(i,s).getTime(),u=!t.animating;if(n.maxDate&&l>new Date(n.maxDate).getTime())t.resetMonth();else{if(t.monthsTranslate-=1,s===t.currentMonth){var c=100*-t.monthsTranslate*r,p=gl(t.renderMonth(l,"next")).transform("translate3d("+(o?c:0)+"%, "+(o?0:c)+"%, 0)").addClass("calendar-month-next");a.append(p[0]),t.$months=a.find(".calendar-month"),t.emit("local::monthAdd calendarMonthAdd",t.$months.eq(t.$months.length-1)[0])}t.animating=!0,t.onMonthChangeStart("next");var d=100*t.monthsTranslate*r;a.transition(e).transform("translate3d("+(o?d:0)+"%, "+(o?0:d)+"%, 0)"),u&&a.transitionEnd((function(){t.onMonthChangeEnd("next")})),n.animate||t.onMonthChangeEnd("next")}},i.prevMonth=function(e){var t=this,n=t.params,a=t.$wrapperEl,r=t.inverter,o=t.isHorizontal;void 0!==e&&"object"!=typeof e||(e="",n.animate||(e=0));var s=parseInt(t.$months.eq(0).attr("data-month"),10),i=parseInt(t.$months.eq(0).attr("data-year"),10),l=new Date(i,s+1,-1).getTime(),u=!t.animating;if(n.minDate){var c=new Date(n.minDate);if(l<(c=new Date(c.getFullYear(),c.getMonth(),1)).getTime())return void t.resetMonth()}if(t.monthsTranslate+=1,s===t.currentMonth){var p=100*-t.monthsTranslate*r,d=gl(t.renderMonth(l,"prev")).transform("translate3d("+(o?p:0)+"%, "+(o?0:p)+"%, 0)").addClass("calendar-month-prev");a.prepend(d[0]),t.$months=a.find(".calendar-month"),t.emit("local::monthAdd calendarMonthAdd",t.$months.eq(0)[0])}t.animating=!0,t.onMonthChangeStart("prev");var h=100*t.monthsTranslate*r;a.transition(e).transform("translate3d("+(o?h:0)+"%, "+(o?0:h)+"%, 0)"),u&&a.transitionEnd((function(){t.onMonthChangeEnd("prev")})),n.animate||t.onMonthChangeEnd("prev")},i.resetMonth=function(e){void 0===e&&(e="");var t=this,n=t.$wrapperEl,a=t.inverter,r=t.isHorizontal,o=100*t.monthsTranslate*a;n.transition(e).transform("translate3d("+(r?o:0)+"%, "+(r?0:o)+"%, 0)")},i.setYearMonth=function(e,t,n){var a,r=this,o=r.params,s=r.isHorizontal,i=r.$wrapperEl,l=r.inverter;if(void 0===e&&(e=r.currentYear),void 0===t&&(t=r.currentMonth),void 0!==n&&"object"!=typeof n||(n="",o.animate||(n=0)),a=e<r.currentYear?new Date(e,t+1,-1).getTime():new Date(e,t).getTime(),o.maxDate&&a>new Date(o.maxDate).getTime())return!1;if(o.minDate){var u=new Date(o.minDate);if(a<(u=new Date(u.getFullYear(),u.getMonth(),1)).getTime())return!1}var c=new Date(r.currentYear,r.currentMonth).getTime(),p=a>c?"next":"prev",d=r.renderMonth(new Date(e,t));r.monthsTranslate=r.monthsTranslate||0;var h,f=r.monthsTranslate,m=!r.animating&&0!==n;a>c?(r.monthsTranslate-=1,r.animating||r.$months.eq(r.$months.length-1).remove(),i.append(d),r.$months=i.find(".calendar-month"),h=100*-(f-1)*l,r.$months.eq(r.$months.length-1).transform("translate3d("+(s?h:0)+"%, "+(s?0:h)+"%, 0)").addClass("calendar-month-next")):(r.monthsTranslate+=1,r.animating||r.$months.eq(0).remove(),i.prepend(d),r.$months=i.find(".calendar-month"),h=100*-(f+1)*l,r.$months.eq(0).transform("translate3d("+(s?h:0)+"%, "+(s?0:h)+"%, 0)").addClass("calendar-month-prev")),r.emit("local::monthAdd calendarMonthAdd","next"===p?r.$months.eq(r.$months.length-1)[0]:r.$months.eq(0)[0]),r.animating=!0,r.onMonthChangeStart(p);var g=100*r.monthsTranslate*l;i.transition(n).transform("translate3d("+(s?g:0)+"%, "+(s?0:g)+"%, 0)"),m&&i.transitionEnd((function(){r.onMonthChangeEnd(p,!0)})),o.animate&&0!==n||r.onMonthChangeEnd(p,!0)},i.nextYear=function(){this.setYearMonth(this.currentYear+1)},i.prevYear=function(){this.setYearMonth(this.currentYear-1)},i.dateInRange=function(e,t){var n,a=!1;if(!t)return!1;if(Array.isArray(t))for(n=0;n<t.length;n+=1)t[n].from||t[n].to?t[n].from&&t[n].to?e<=new Date(t[n].to).getTime()&&e>=new Date(t[n].from).getTime()&&(a=!0):t[n].from?e>=new Date(t[n].from).getTime()&&(a=!0):t[n].to&&e<=new Date(t[n].to).getTime()&&(a=!0):t[n].date?e===new Date(t[n].date).getTime()&&(a=!0):e===new Date(t[n]).getTime()&&(a=!0);else t.from||t.to?t.from&&t.to?e<=new Date(t.to).getTime()&&e>=new Date(t.from).getTime()&&(a=!0):t.from?e>=new Date(t.from).getTime()&&(a=!0):t.to&&e<=new Date(t.to).getTime()&&(a=!0):t.date?a=e===new Date(t.date).getTime():"function"==typeof t&&(a=t(new Date(e)));return a},i.daysInMonth=function(e){var t=new Date(e);return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()},i.renderMonths=function(e){var t=this;return t.params.renderMonths?t.params.renderMonths.call(t,e):ec("div",{class:"calendar-months-wrapper"},t.renderMonth(e,"prev"),t.renderMonth(e),t.renderMonth(e,"next"))},i.renderMonth=function(e,t){var n=this,a=n.params,r=n.value;if(a.renderMonth)return a.renderMonth.call(n,e,t);var o=new Date(e),s=o.getFullYear(),i=o.getMonth(),l=n.monthNames.indexOf(n.monthFormatter(o));l<0&&(l=i);var u=n.yearFormatter(o);"next"===t&&(o=11===i?new Date(s+1,0):new Date(s,i+1,1)),"prev"===t&&(o=0===i?new Date(s-1,11):new Date(s,i-1,1)),"next"!==t&&"prev"!==t||(i=o.getMonth(),s=o.getFullYear(),(l=n.monthNames.indexOf(n.monthFormatter(o)))<0&&(l=i),u=n.yearFormatter(o));var c,p,d=[],h=(new Date).setHours(0,0,0,0),f=a.minDate?new Date(a.minDate).getTime():null,m=a.maxDate?new Date(a.maxDate).getTime():null,g=n.daysInMonth(new Date(o.getFullYear(),o.getMonth()).getTime()-864e6),v=n.daysInMonth(o),b=6===a.firstDay?0:1,y="",w=a.firstDay-1+0,x=new Date(o.getFullYear(),o.getMonth()).getDay();if(0===x&&(x=7),r&&r.length)for(var k=0;k<r.length;k+=1)d.push(new Date(r[k]).setHours(0,0,0,0));for(var C=1;C<=6;C+=1){for(var E="",S=function(e){var t=void 0,r=(w+=1)-x,o="";1===C&&1===e&&r>b&&1!==a.firstDay&&(r=(w-=7)-x);var l=e-1+a.firstDay>6?e-1-7+a.firstDay:e-1+a.firstDay;r<0?(r=g+r+1,o+=" calendar-day-prev",t=new Date(i-1<0?s-1:s,i-1<0?11:i-1,r).getTime()):(r+=1)>v?(r-=v,o+=" calendar-day-next",t=new Date(i+1>11?s+1:s,i+1>11?0:i+1,r).getTime()):t=new Date(s,i,r).getTime(),t===h&&(o+=" calendar-day-today"),a.rangePicker&&2===d.length?(t>=d[0]&&t<=d[1]&&(o+=" calendar-day-selected"),d[0]!==d[1]&&(t>d[0]&&t<d[1]&&(o+=" calendar-day-selected-range"),t===d[0]&&(o+=" calendar-day-selected-left"),t===d[1]&&(o+=" calendar-day-selected-right"))):d.indexOf(t)>=0&&(o+=" calendar-day-selected"),a.weekendDays.indexOf(l)>=0&&(o+=" calendar-day-weekend");var u="";if(p=!1,a.events&&n.dateInRange(t,a.events)&&(p=!0),p&&(o+=" calendar-day-has-events",u='\n            <span class="calendar-day-events">\n              <span class="calendar-day-event"></span>\n            </span>\n          ',Array.isArray(a.events))){var y=[];a.events.forEach((function(e){var a=e.color||"";y.indexOf(a)<0&&n.dateInRange(t,e)&&y.push(a)})),u='\n              <span class="calendar-day-events">\n                '+y.map((function(e){return('\n                  <span class="calendar-day-event" style="'+(e?"background-color: "+e:"")+'"></span>\n                ').trim()})).join("")+"\n              </span>\n            "}if(a.rangesClasses)for(var k=0;k<a.rangesClasses.length;k+=1)n.dateInRange(t,a.rangesClasses[k].range)&&(o+=" "+a.rangesClasses[k].cssClass);c=!1,(f&&t<f||m&&t>m)&&(c=!0),a.disabled&&n.dateInRange(t,a.disabled)&&(c=!0),c&&(o+=" calendar-day-disabled");var S=(t=new Date(t)).getFullYear(),$=t.getMonth(),T=n.dayFormatter(t);E+=('\n          <div data-year="'+S+'" data-month="'+$+'" data-day="'+r+'" class="calendar-day'+o+'" data-date="'+S+"-"+$+"-"+r+'">\n            <span class="calendar-day-number">'+T+u+"</span>\n          </div>").trim()},$=1;$<=7;$+=1)S($);y+='<div class="calendar-row">'+E+"</div>"}return y='<div class="calendar-month" data-year="'+s+'" data-month="'+i+'" data-locale-year="'+u+'" data-locale-month="'+l+'">'+y+"</div>"},i.renderWeekHeader=function(){var e=this;if(e.params.renderWeekHeader)return e.params.renderWeekHeader.call(e);for(var t=e.params,n="",a=0;a<7;a+=1){var r=a+t.firstDay>6?a-7+t.firstDay:a+t.firstDay;n+='<div class="calendar-week-day">'+e.dayNamesShort[r]+"</div>"}return ec("div",{class:"calendar-week-header"},n)},i.renderMonthSelector=function(){var e=this;return e.params.renderMonthSelector?e.params.renderMonthSelector.call(e):ec("div",{class:"calendar-month-selector"},ec("a",{class:"link icon-only calendar-prev-month-button"},ec("i",{class:"icon icon-prev"})),e.params.monthPicker?ec("a",{class:"current-month-value link"}):ec("span",{class:"current-month-value"}),ec("a",{class:"link icon-only calendar-next-month-button"},ec("i",{class:"icon icon-next"})))},i.renderMonthPicker=function(){var e=parseInt(this.$el.find(".calendar-month-current").attr("data-locale-month"),10);return ec("div",{class:"calendar-month-picker"},this.monthNames.map((function(t,n){return ec("div",{class:"calendar-month-picker-item "+(e===n?"calendar-month-picker-item-current":"")},ec("span",null,t))})))},i.renderYearSelector=function(){var e=this;return e.params.renderYearSelector?e.params.renderYearSelector.call(e):ec("div",{class:"calendar-year-selector"},ec("a",{class:"link icon-only calendar-prev-year-button"},ec("i",{class:"icon icon-prev"})),e.params.yearPicker?ec("a",{class:"current-year-value link"}):ec("span",{class:"current-year-value"}),ec("a",{class:"link icon-only calendar-next-year-button"},ec("i",{class:"icon icon-next"})))},i.renderYearPicker=function(){var e=this,t=e.currentYear,n=e.params.yearPickerMin||(new Date).getFullYear()-100;e.params.minDate&&(n=Math.max(n,new Date(e.params.minDate).getFullYear()));var a=e.params.yearPickerMax||(new Date).getFullYear()+100;e.params.maxDate&&(a=Math.min(a,new Date(e.params.maxDate).getFullYear()));for(var r=[],o=n;o<=a;o+=1)r.push(o);return ec("div",{class:"calendar-year-picker"},r.map((function(n){return ec("div",{"data-year":n,class:"calendar-year-picker-item "+(n===t?"calendar-year-picker-item-current":"")},ec("span",null,e.yearFormatter((new Date).setFullYear(n))))})))},i.renderTimeSelector=function(){var e,t=this,n=t.value&&t.value[0];return n&&(e=t.timeSelectorFormatter(n)),ec("div",{class:"calendar-time-selector"},ec("a",{class:"link"},e||t.params.timePickerPlaceholder))},i.renderHeader=function(){var e=this;return e.params.renderHeader?e.params.renderHeader.call(e):ec("div",{class:"calendar-header"},ec("div",{class:"calendar-selected-date"},e.params.headerPlaceholder))},i.renderFooter=function(){var e=this,t=e.app;return e.params.renderFooter?e.params.renderFooter.call(e):ec("div",{class:"calendar-footer"},ec("a",{class:("md"===t.theme?"button":"link")+" calendar-close sheet-close popover-close"},e.params.toolbarCloseText))},i.renderToolbar=function(){var e=this;return e.params.renderToolbar?e.params.renderToolbar.call(e,e):ec("div",{class:"toolbar toolbar-top no-shadow"},ec("div",{class:"toolbar-inner"},e.params.monthSelector?e.renderMonthSelector():"",e.params.yearSelector?e.renderYearSelector():""))},i.renderInline=function(){var e=this,t=e.params,n=t.cssClass,a=t.toolbar,r=t.header,o=t.footer,s=t.rangePicker,i=t.weekHeader,l=e.value,u=e.hasTimePicker,c=l&&l.length?l[0]:(new Date).setHours(0,0,0);return ec("div",{class:"calendar calendar-inline "+(s?"calendar-range":"")+" "+(n||"")},r&&e.renderHeader(),a&&e.renderToolbar(),i&&e.renderWeekHeader(),ec("div",{class:"calendar-months"},e.renderMonths(c)),u&&e.renderTimeSelector(),o&&e.renderFooter())},i.renderCustomModal=function(){var e=this,t=e.params,n=t.cssClass,a=t.toolbar,r=t.header,o=t.footer,s=t.rangePicker,i=t.weekHeader,l=e.value,u=e.hasTimePicker,c=l&&l.length?l[0]:(new Date).setHours(0,0,0);return ec("div",{class:"calendar calendar-modal "+(s?"calendar-range":"")+" "+(n||"")},r&&e.renderHeader(),a&&e.renderToolbar(),i&&e.renderWeekHeader(),ec("div",{class:"calendar-months"},e.renderMonths(c)),u&&e.renderTimeSelector(),o&&e.renderFooter())},i.renderSheet=function(){var e=this,t=e.params,n=t.cssClass,a=t.toolbar,r=t.header,o=t.footer,s=t.rangePicker,i=t.weekHeader,l=e.value,u=e.hasTimePicker,c=l&&l.length?l[0]:(new Date).setHours(0,0,0);return ec("div",{class:"sheet-modal calendar calendar-sheet "+(s?"calendar-range":"")+" "+(n||"")},r&&e.renderHeader(),a&&e.renderToolbar(),i&&e.renderWeekHeader(),ec("div",{class:"sheet-modal-inner calendar-months"},e.renderMonths(c)),u&&e.renderTimeSelector(),o&&e.renderFooter())},i.renderPopover=function(){var e=this,t=e.params,n=t.cssClass,a=t.toolbar,r=t.header,o=t.footer,s=t.rangePicker,i=t.weekHeader,l=e.value,u=e.hasTimePicker,c=l&&l.length?l[0]:(new Date).setHours(0,0,0);return ec("div",{class:"popover calendar-popover"},ec("div",{class:"popover-inner"},ec("div",{class:"calendar "+(s?"calendar-range":"")+" "+(n||"")},r&&e.renderHeader(),a&&e.renderToolbar(),i&&e.renderWeekHeader(),ec("div",{class:"calendar-months"},e.renderMonths(c)),u&&e.renderTimeSelector(),o&&e.renderFooter())))},i.render=function(){var e=this,t=e.params;if(t.render)return t.render.call(e);if(!e.inline){var n=t.openIn;return"auto"===n&&(n=e.isPopover()?"popover":"sheet"),"popover"===n?e.renderPopover():"sheet"===n?e.renderSheet():e.renderCustomModal()}return e.renderInline()},i.openTimePicker=function(){var e=this,t=e.$el,n=e.app,a=e.is12HoursFormat;if(t&&t.length){t.append('<div class="calendar-time-picker"></div>');for(var r,o=[],s=[],i=a?12:23,l=a?1:0;l<=i;l+=1)o.push(l);for(var u=0;u<=59;u+=1)s.push(u);r=e.value&&e.value.length?[e.value[0].getHours(),e.value[0].getMinutes()]:[(new Date).getHours(),(new Date).getMinutes()],a&&(r.push(r[0]<12?"AM":"PM"),r[0]>12&&(r[0]-=12),0===r[0]&&(r[0]=12)),e.timePickerInstance=n.picker.create({containerEl:t.find(".calendar-time-picker"),value:r,toolbar:!0,rotateEffect:!1,toolbarCloseText:e.params.toolbarCloseText,cols:[{values:o},{divider:!0,content:":"},{values:s,displayValues:s.map((function(e){return e<10?"0"+e:e}))}].concat(a?[{values:["AM","PM"]}]:[])}),e.timePickerInstance.$el.find(".toolbar a").removeClass("sheet-close popover-close").addClass("calendar-time-picker-close")}},i.closeTimePicker=function(){var e=this,t=e.is12HoursFormat;if(e.timePickerInstance){var n=e.timePickerInstance.value,a=parseInt(n[0],10),r=parseInt(n[1],10),o=e.timePickerInstance.value[2];t&&("AM"===o&&12===a?a=0:"PM"===o&&12!==a&&(a+=12));var s=e.value&&e.value.length&&e.value[0];s?(s=new Date(s)).setHours(a,r):(s=new Date).setHours(a,r,0,0),e.setValue([s]),e.timePickerInstance.close(),e.timePickerInstance.destroy(),delete e.timePickerInstance}e.$el&&e.$el.length&&e.$el.find(".calendar-time-picker").remove()},i.onOpen=function(){var e=this,t=e.initialized,n=e.$el,a=e.app,r=e.$inputEl,o=e.inline,s=e.value,i=e.params;e.closing=!1,e.opened=!0,e.opening=!0,e.attachCalendarEvents();var l=!s&&i.value;t?s&&e.setValue(s,0):s?e.setValue(s,0):i.value&&e.setValue(e.normalizeValues(i.value),0),e.updateCurrentMonthYear(),e.monthsTranslate=0,e.setMonthsTranslate(),l?e.updateValue():i.header&&s&&e.updateValue(!0),!o&&r&&r.length&&"md"===a.theme&&r.trigger("focus"),e.initialized=!0,e.$months.each((function(t){e.emit("local::monthAdd calendarMonthAdd",t)})),n&&n.trigger("calendar:open"),r&&r.trigger("calendar:open"),e.emit("local::open calendarOpen",e)},i.onOpened=function(){var e=this;e.opening=!1,e.$el&&e.$el.trigger("calendar:opened"),e.$inputEl&&e.$inputEl.trigger("calendar:opened"),e.emit("local::opened calendarOpened",e)},i.onClose=function(){var e=this,t=e.app;if(e.opening=!1,e.closing=!0,e.$inputEl)if("md"===t.theme)e.$inputEl.trigger("blur");else{var n=e.$inputEl.attr("validate"),a=e.$inputEl.attr("required");n&&a&&t.input.validate(e.$inputEl)}e.detachCalendarEvents&&e.detachCalendarEvents(),e.$el&&e.$el.trigger("calendar:close"),e.$inputEl&&e.$inputEl.trigger("calendar:close"),e.emit("local::close calendarClose",e)},i.onClosed=function(){var e=this;e.opened=!1,e.closing=!1,e.inline||ns((function(){e.modal&&e.modal.el&&e.modal.destroy&&(e.params.routableModals||e.modal.destroy()),delete e.modal})),e.timePickerInstance&&(e.timePickerInstance.destroy&&e.timePickerInstance.destroy(),delete e.timePickerInstance),e.$el&&e.$el.trigger("calendar:closed"),e.$inputEl&&e.$inputEl.trigger("calendar:closed"),e.emit("local::closed calendarClosed",e)},i.open=function(){var e=this,t=e.app,n=e.opened,a=e.inline,r=e.$inputEl,o=e.params;if(!n){if(a)return e.$el=gl(e.render()),e.$el[0].f7Calendar=e,e.$wrapperEl=e.$el.find(".calendar-months-wrapper"),e.$months=e.$wrapperEl.find(".calendar-month"),e.$containerEl.append(e.$el),e.onOpen(),void e.onOpened();var s=o.openIn;"auto"===s&&(s=e.isPopover()?"popover":"sheet");var i,l=e.render(),u={targetEl:r,scrollToEl:o.scrollToInput?r:void 0,content:l,backdrop:!0===o.backdrop||"popover"===s&&!1!==t.params.popover.backdrop&&!1!==o.backdrop,closeByBackdropClick:o.closeByBackdropClick,on:{open:function(){var t=this;e.modal=t,e.$el="popover"===s?t.$el.find(".calendar"):t.$el,e.$wrapperEl=e.$el.find(".calendar-months-wrapper"),e.$months=e.$wrapperEl.find(".calendar-month"),e.$el[0].f7Calendar=e,"customModal"===s&&gl(e.$el).find(".calendar-close").once("click",(function(){e.close()})),e.onOpen()},opened:function(){e.onOpened()},close:function(){e.onClose()},closed:function(){e.onClosed()}}};if("sheet"===s&&(u.push=o.sheetPush,u.swipeToClose=o.sheetSwipeToClose),o.routableModals&&e.view)e.view.router.navigate({url:e.url,route:(i={path:e.url},i[s]=u,i)});else e.modal=t[s].create(u),e.modal.open()}},i.close=function(){var e=this,t=e.opened,n=e.inline;if(t)return n?(e.onClose(),void e.onClosed()):void(e.params.routableModals&&e.view?e.view.router.back():e.modal.close())},i.init=function(){var e=this;if(e.initInput(),e.inline)return e.open(),void e.emit("local::init calendarInit",e);!e.initialized&&e.params.value&&e.setValue(e.normalizeValues(e.params.value)),e.$inputEl&&e.attachInputEvents(),e.params.closeByOutsideClick&&e.attachHtmlEvents(),e.emit("local::init calendarInit",e)},i.destroy=function(){var e=this;if(!e.destroyed){var t=e.$el;e.emit("local::beforeDestroy calendarBeforeDestroy",e),t&&t.trigger("calendar:beforedestroy"),e.close(),e.$inputEl&&e.detachInputEvents(),e.params.closeByOutsideClick&&e.detachHtmlEvents(),e.timePickerInstance&&(e.timePickerInstance.destroy&&e.timePickerInstance.destroy(),delete e.timePickerInstance),t&&t.length&&delete e.$el[0].f7Calendar,Qo(e),e.destroyed=!0}},r=a,o=[{key:"view",get:function(){var e,t=this.$inputEl,n=this.app,a=this.params;return a.view?e=a.view:t&&(e=t.parents(".view").length&&t.parents(".view")[0].f7View),e||(e=n.views.main),e}}],o&&qp(r.prototype,o),s&&qp(r,s),a}(Ts),Jp=Kp,Zp={name:"calendar",static:{Calendar:Jp},create:function(){var e=this;e.calendar=wl({defaultSelector:".calendar",constructor:Jp,app:e,domProp:"f7Calendar"}),e.calendar.close=function(e){void 0===e&&(e=".calendar");var t=gl(e);if(0!==t.length){var n=t[0].f7Calendar;!n||n&&!n.opened||n.close()}}},params:{calendar:{dateFormat:void 0,monthNames:"auto",monthNamesShort:"auto",dayNames:"auto",dayNamesShort:"auto",locale:void 0,firstDay:1,weekendDays:[0,6],multiple:!1,rangePicker:!1,rangePickerMinDays:1,rangePickerMaxDays:0,direction:"horizontal",minDate:null,maxDate:null,disabled:null,events:null,rangesClasses:null,touchMove:!0,animate:!0,closeOnSelect:!1,monthSelector:!0,monthPicker:!0,yearSelector:!0,yearPicker:!0,yearPickerMin:void 0,yearPickerMax:void 0,timePicker:!1,timePickerFormat:{hour:"numeric",minute:"numeric"},timePickerPlaceholder:"Select time",weekHeader:!0,value:null,containerEl:null,openIn:"auto",sheetPush:!1,sheetSwipeToClose:void 0,formatValue:null,inputEl:null,inputReadOnly:!0,closeByOutsideClick:!0,scrollToInput:!0,header:!1,headerPlaceholder:"Select date",toolbar:!0,toolbarCloseText:"Done",footer:!1,cssClass:null,routableModals:!1,view:null,url:"date/",backdrop:null,closeByBackdropClick:!0,renderWeekHeader:null,renderMonths:null,renderMonth:null,renderMonthSelector:null,renderYearSelector:null,renderHeader:null,renderFooter:null,renderToolbar:null,renderInline:null,renderPopover:null,renderSheet:null,render:null}}};function Qp(e,t){var n=this,a=n.app,r=gl(e),o=r.index(),s=n.cols[o];if(!s.divider){var i,l,u,c,p;s.$el=r,s.el=r[0],s.$itemsEl=s.$el.find(".picker-items"),s.items=s.$itemsEl.find(".picker-item"),s.replaceValues=function(e,t){s.detachEvents(),s.values=e,s.displayValues=t,s.$itemsEl.html(n.renderColumn(s,!0)),s.items=s.$itemsEl.find(".picker-item"),s.calcSize(),s.setValue(s.values[0],0,!0),s.attachEvents()},s.calcSize=function(){n.params.rotateEffect&&(s.$el.removeClass("picker-column-absolute"),s.width||s.$el.css({width:""}));var e=0,t=s.$el[0].offsetHeight;i=s.items[0].offsetHeight,l=i*s.items.length,u=t/2-l+i/2,c=t/2-i/2,s.width&&(e=s.width,parseInt(e,10)===e&&(e+="px"),s.$el.css({width:e})),n.params.rotateEffect&&(s.width||(s.items.each((function(t){var n=gl(t).children("span");e=Math.max(e,n[0].offsetWidth)})),s.$el.css({width:e+2+"px"})),s.$el.addClass("picker-column-absolute"))},s.setValue=function(e,t,a){void 0===t&&(t="");var r=s.$itemsEl.find('.picker-item[data-picker-value="'+e+'"]').index();if(void 0!==r&&-1!==r){var o=-r*i+c;s.$itemsEl.transition(t),s.$itemsEl.transform("translate3d(0,"+o+"px,0)"),n.params.updateValuesOnMomentum&&s.activeIndex&&s.activeIndex!==r&&(cancelAnimationFrame(p),s.$itemsEl.transitionEnd((function(){cancelAnimationFrame(p)})),S()),s.updateItems(r,o,t,a)}},s.updateItems=function(e,t,a,r){void 0===t&&(t=ss(s.$itemsEl[0],"y")),void 0===e&&(e=-Math.round((t-c)/i)),e<0&&(e=0),e>=s.items.length&&(e=s.items.length-1);var o=s.activeIndex;s.activeIndex=e,s.$itemsEl.find(".picker-item-selected").removeClass("picker-item-selected"),s.items.transition(a);var l=s.items.eq(e).addClass("picker-item-selected").transform("");n.params.rotateEffect&&s.items.each((function(e){var a=gl(e),r=(a.index()*i-(c-t))/i,o=Math.ceil(s.height/i/2)+1,l=-18*r;l>180&&(l=180),l<-180&&(l=-180),Math.abs(r)>o?a.addClass("picker-item-far"):a.removeClass("picker-item-far"),a.transform("translate3d(0, "+(-t+c)+"px, "+(n.needsOriginFix?-110:0)+"px) rotateX("+l+"deg)")})),(r||void 0===r)&&(s.value=l.attr("data-picker-value"),s.displayValue=s.displayValues?s.displayValues[e]:s.value,o!==e&&(s.onChange&&s.onChange(n,s.value,s.displayValue),n.updateValue()))};var d,h,f,m,g,v,b,y,w,x,k,C=!0,E=!!ws().passiveListener&&{passive:!1,capture:!1};s.attachEvents=function(){s.$el.on(a.touchEvents.start,$,E),a.on("touchmove:active",T),a.on("touchend:passive",I),n.params.mousewheel&&s.$el.on("wheel",N),s.items.on("click",O)},s.detachEvents=function(){s.$el.off(a.touchEvents.start,$,E),a.off("touchmove:active",T),a.off("touchend:passive",I),n.params.mousewheel&&s.$el.off("wheel",N),s.items.off("click",O)},s.init=function(){s.calcSize(),s.$itemsEl.transform("translate3d(0,"+c+"px,0)").transition(0),0===o&&s.$el.addClass("picker-column-first"),o===n.cols.length-1&&s.$el.addClass("picker-column-last"),t&&s.updateItems(0,c,0),s.attachEvents()},s.destroy=function(){s.detachEvents()},s.init()}function S(){p=es((function(){s.updateItems(void 0,void 0,0),S()}))}function $(e){h||d||(e.preventDefault(),d=!0,f="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,m=f,g=(new Date).getTime(),C=!0,v=ss(s.$itemsEl[0],"y"),y=v)}function T(e){d&&(e.preventDefault(),C=!1,m="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,h||(cancelAnimationFrame(p),h=!0,v=ss(s.$itemsEl[0],"y"),y=v,s.$itemsEl.transition(0)),b=void 0,(y=v+(m-f))<u&&(y=u-Math.pow(u-y,.8),b="min"),y>c&&(y=c+Math.pow(y-c,.8),b="max"),s.$itemsEl.transform("translate3d(0,"+y+"px,0)"),s.updateItems(void 0,y,0,n.params.updateValuesOnTouchmove),x=y-w||y,w=y)}function I(){if(!d||!h)return d=!1,void(h=!1);var e;d=!1,h=!1,s.$itemsEl.transition(""),b&&("min"===b?s.$itemsEl.transform("translate3d(0,"+u+"px,0)"):s.$itemsEl.transform("translate3d(0,"+c+"px,0)")),e=(new Date).getTime()-g>300?y:y+x*n.params.momentumRatio,e=Math.max(Math.min(e,c),u);var t=Math.round(Math.abs((e-c)/i));n.params.freeMode||(e=-t*i+c),s.$itemsEl.transform("translate3d(0,"+parseInt(e,10)+"px,0)"),s.updateItems(t,e,"",!0),n.params.updateValuesOnMomentum&&(S(),s.$itemsEl.transitionEnd((function(){cancelAnimationFrame(p)}))),setTimeout((function(){C=!0}),100)}function N(e){var t=e.deltaX,a=e.deltaY;Math.abs(t)>Math.abs(a)||(clearTimeout(k),e.preventDefault(),cancelAnimationFrame(p),v=ss(s.$itemsEl[0],"y"),s.$itemsEl.transition(0),b=void 0,(y=v-a)<u&&(y=u,b="min"),y>c&&(y=c,b="max"),s.$itemsEl.transform("translate3d(0,"+y+"px,0)"),s.updateItems(void 0,y,0,n.params.updateValuesOnMousewheel),k=setTimeout((function(){s.$itemsEl.transition(""),b&&("min"===b?s.$itemsEl.transform("translate3d(0,"+u+"px,0)"):s.$itemsEl.transform("translate3d(0,"+c+"px,0)")),(new Date).getTime();var e=y;e=Math.max(Math.min(e,c),u);var t=Math.round(Math.abs((e-c)/i));n.params.freeMode||(e=-t*i+c),s.$itemsEl.transform("translate3d(0,"+parseInt(e,10)+"px,0)"),s.updateItems(t,e,"",!0)}),200))}function O(){if(C){cancelAnimationFrame(p);var e=gl(this).attr("data-picker-value");s.setValue(e)}}}function ed(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function td(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nd(e,t){return nd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},nd(e,t)}var ad=function(e){var t,n;function a(t,n){var a;void 0===n&&(n={});var r,o,s=td(a=e.call(this,n,[t])||this),i=xs(),l=Ho();if(s.params=cs({},t.params.picker,n),s.params.containerEl&&0===(r=gl(s.params.containerEl)).length)return s||td(a);s.params.inputEl&&(o=gl(s.params.inputEl));var u=s.params.scrollToInput?o:void 0;if(s.params.scrollToEl){var c=gl(s.params.scrollToEl);c.length>0&&(u=c)}function p(){s.resizeCols()}function d(){s.open()}function h(e){e.preventDefault()}cs(s,{app:t,$containerEl:r,containerEl:r&&r[0],inline:r&&r.length>0,needsOriginFix:i.ios||l.navigator.userAgent.toLowerCase().indexOf("safari")>=0&&l.navigator.userAgent.toLowerCase().indexOf("chrome")<0&&!i.android,cols:[],$inputEl:o,inputEl:o&&o[0],$scrollToEl:u,initialized:!1,opened:!1,url:s.params.url});var f=null;function m(e){f=e.target}function g(e){if(!s.destroyed&&s.params){var t=gl(e.target);s.isPopover()||s.opened&&!s.closing&&(t.closest('[class*="backdrop"]').length||(o&&o.length>0?f===e.target&&t[0]!==o[0]&&0===t.closest(".sheet-modal").length&&s.close():0===gl(e.target).closest(".sheet-modal").length&&s.close()))}}return cs(s,{attachResizeEvent:function(){t.on("resize",p)},detachResizeEvent:function(){t.off("resize",p)},attachInputEvents:function(){s.$inputEl.on("click",d),s.params.inputReadOnly&&(s.$inputEl.on("focus mousedown",h),s.$inputEl[0]&&(s.$inputEl[0].f7ValidateReadonly=!0))},detachInputEvents:function(){s.$inputEl.off("click",d),s.params.inputReadOnly&&(s.$inputEl.off("focus mousedown",h),s.$inputEl[0]&&delete s.$inputEl[0].f7ValidateReadonly)},attachHtmlEvents:function(){t.on("click",g),t.on("touchstart",m)},detachHtmlEvents:function(){t.off("click",g),t.off("touchstart",m)}}),s.init(),s||td(a)}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,nd(t,n);var r,o,s,i=a.prototype;return i.initInput=function(){var e=this;e.$inputEl&&e.params.inputReadOnly&&e.$inputEl.prop("readOnly",!0)},i.resizeCols=function(){var e=this;if(e.opened)for(var t=0;t<e.cols.length;t+=1)e.cols[t].divider||(e.cols[t].calcSize(),e.cols[t].setValue(e.cols[t].value,0,!1))},i.isPopover=function(){var e=this,t=e.app,n=e.modal,a=e.params,r=xs();if("sheet"===a.openIn)return!1;if(n&&"popover"!==n.type)return!1;if(!e.inline&&e.inputEl){if("popover"===a.openIn)return!0;if(r.ios)return!!r.ipad;if(t.width>=768)return!0;if(r.desktop&&"aurora"===t.theme)return!0}return!1},i.formatValue=function(){var e=this,t=e.value,n=e.displayValue;return e.params.formatValue?e.params.formatValue.call(e,t,n):t.join(" ")},i.setValue=function(e,t){var n=this,a=0;if(0===n.cols.length)return n.value=e,void n.updateValue(e);for(var r=0;r<n.cols.length;r+=1)n.cols[r]&&!n.cols[r].divider&&(n.cols[r].setValue(e[a],t),a+=1)},i.getValue=function(){return this.value},i.updateValue=function(e){var t,n=this,a=e||[],r=[];if(0===n.cols.length)for(var o=n.params.cols.filter((function(e){return!e.divider})),s=0;s<o.length;s+=1)void 0!==(t=o[s]).displayValues&&void 0!==t.values&&-1!==t.values.indexOf(a[s])?r.push(t.displayValues[t.values.indexOf(a[s])]):r.push(a[s]);else for(var i=0;i<n.cols.length;i+=1)n.cols[i].divider||(a.push(n.cols[i].value),r.push(n.cols[i].displayValue));a.indexOf(void 0)>=0||(n.value=a,n.displayValue=r,n.emit("local::change pickerChange",n,n.value,n.displayValue),n.inputEl&&(n.$inputEl.val(n.formatValue()),n.$inputEl.trigger("change")))},i.initColumn=function(e,t){Qp.call(this,e,t)},i.destroyColumn=function(e){var t=this,n=gl(e).index();t.cols[n]&&t.cols[n].destroy&&t.cols[n].destroy()},i.renderToolbar=function(){var e=this;return e.params.renderToolbar?e.params.renderToolbar.call(e,e):ec("div",{class:"toolbar toolbar-top no-shadow"},ec("div",{class:"toolbar-inner"},ec("div",{class:"left"}),ec("div",{class:"right"},ec("a",{class:"link sheet-close popover-close"},e.params.toolbarCloseText))))},i.renderColumn=function(e,t){var n,a,r="picker-column "+(e.textAlign?"picker-column-"+e.textAlign:"")+" "+(e.cssClass||"");return e.divider?n='\n        <div class="'+r+' picker-column-divider">'+e.content+"</div>\n      ":(a=e.values.map((function(t,n){return'\n        <div class="picker-item" data-picker-value="'+t+'">\n          <span>'+(e.displayValues?e.displayValues[n]:t)+"</span>\n        </div>\n      "})).join(""),n='\n        <div class="'+r+'">\n          <div class="picker-items">'+a+"</div>\n        </div>\n      "),t?a.trim():n.trim()},i.renderInline=function(){var e=this,t=e.params,n=t.rotateEffect,a=t.cssClass,r=t.toolbar,o=ec("div",{class:"picker picker-inline "+(n?"picker-3d":"")+" "+(a||"")},r&&e.renderToolbar(),ec("div",{class:"picker-columns"},e.cols.map((function(t){return e.renderColumn(t)})),ec("div",{class:"picker-center-highlight"})));return o},i.renderSheet=function(){var e=this,t=e.params,n=t.rotateEffect,a=t.cssClass,r=t.toolbar,o=ec("div",{class:"sheet-modal picker picker-sheet "+(n?"picker-3d":"")+" "+(a||"")},r&&e.renderToolbar(),ec("div",{class:"sheet-modal-inner picker-columns"},e.cols.map((function(t){return e.renderColumn(t)})),ec("div",{class:"picker-center-highlight"})));return o},i.renderPopover=function(){var e=this,t=e.params,n=t.rotateEffect,a=t.cssClass,r=t.toolbar,o=ec("div",{class:"popover picker-popover"},ec("div",{class:"popover-inner"},ec("div",{class:"picker "+(n?"picker-3d":"")+" "+(a||"")},r&&e.renderToolbar(),ec("div",{class:"picker-columns"},e.cols.map((function(t){return e.renderColumn(t)})),ec("div",{class:"picker-center-highlight"})))));return o},i.render=function(){var e=this;return e.params.render?e.params.render.call(e):e.inline?e.renderInline():e.isPopover()?e.renderPopover():e.renderSheet()},i.onOpen=function(){var e=this,t=e.initialized,n=e.$el,a=e.app,r=e.$inputEl,o=e.inline,s=e.value,i=e.params;e.opened=!0,e.closing=!1,e.opening=!0,e.attachResizeEvent(),n.find(".picker-column").each((function(n){var a=!0;(!t&&i.value||t&&s)&&(a=!1),e.initColumn(n,a)})),t?s&&e.setValue(s,0):s?e.setValue(s,0):i.value&&e.setValue(i.value,0),!o&&r&&r.length&&"md"===a.theme&&r.trigger("focus"),e.initialized=!0,n&&n.trigger("picker:open"),r&&r.trigger("picker:open"),e.emit("local::open pickerOpen",e)},i.onOpened=function(){var e=this;e.opening=!1,e.$el&&e.$el.trigger("picker:opened"),e.$inputEl&&e.$inputEl.trigger("picker:opened"),e.emit("local::opened pickerOpened",e)},i.onClose=function(){var e=this,t=e.app;if(e.opening=!1,e.closing=!0,e.detachResizeEvent(),e.cols.forEach((function(e){e.destroy&&e.destroy()})),e.$inputEl)if("md"===t.theme)e.$inputEl.trigger("blur");else{var n=e.$inputEl.attr("validate"),a=e.$inputEl.attr("required");n&&a&&t.input.validate(e.$inputEl)}e.$el&&e.$el.trigger("picker:close"),e.$inputEl&&e.$inputEl.trigger("picker:close"),e.emit("local::close pickerClose",e)},i.onClosed=function(){var e=this;e.opened=!1,e.closing=!1,e.inline||ns((function(){e.modal&&e.modal.el&&e.modal.destroy&&(e.params.routableModals||e.modal.destroy()),delete e.modal})),e.$el&&e.$el.trigger("picker:closed"),e.$inputEl&&e.$inputEl.trigger("picker:closed"),e.emit("local::closed pickerClosed",e)},i.open=function(){var e=this,t=e.app,n=e.opened,a=e.inline,r=e.$inputEl,o=e.$scrollToEl,s=e.params;if(!n){if(0===e.cols.length&&s.cols.length&&s.cols.forEach((function(t){e.cols.push(t)})),a)return e.$el=gl(e.render()),e.$el[0].f7Picker=e,e.$containerEl.append(e.$el),e.onOpen(),void e.onOpened();var i,l=e.isPopover(),u=l?"popover":"sheet",c={targetEl:r,scrollToEl:o,content:e.render(),backdrop:void 0!==s.backdrop?s.backdrop:l,on:{open:function(){var t=this;e.modal=t,e.$el=l?t.$el.find(".picker"):t.$el,e.$el[0].f7Picker=e,e.onOpen()},opened:function(){e.onOpened()},close:function(){e.onClose()},closed:function(){e.onClosed()}}};if("sheet"===u&&(c.push=s.sheetPush,c.swipeToClose=s.sheetSwipeToClose),s.routableModals&&e.view)e.view.router.navigate({url:e.url,route:(i={path:e.url},i[u]=c,i)});else e.modal=t[u].create(c),e.modal.open()}},i.close=function(){var e=this,t=e.opened,n=e.inline;if(t)return n?(e.onClose(),void e.onClosed()):void(e.params.routableModals&&e.view?e.view.router.back():e.modal.close())},i.init=function(){var e=this;if(e.initInput(),e.inline)return e.open(),void e.emit("local::init pickerInit",e);!e.initialized&&e.params.value&&e.setValue(e.params.value),e.$inputEl&&e.attachInputEvents(),e.params.closeByOutsideClick&&e.attachHtmlEvents(),e.emit("local::init pickerInit",e)},i.destroy=function(){var e=this;if(!e.destroyed){var t=e.$el;e.emit("local::beforeDestroy pickerBeforeDestroy",e),t&&t.trigger("picker:beforedestroy"),e.close(),e.$inputEl&&e.detachInputEvents(),e.params.closeByOutsideClick&&e.detachHtmlEvents(),t&&t.length&&delete e.$el[0].f7Picker,Qo(e),e.destroyed=!0}},r=a,o=[{key:"view",get:function(){var e,t=this.app,n=this.params,a=this.$inputEl;return n.view?e=n.view:a&&(e=a.parents(".view").length&&a.parents(".view")[0].f7View),e||(e=t.views.main),e}}],o&&ed(r.prototype,o),s&&ed(r,s),a}(Ts),rd=ad,od={name:"picker",static:{Picker:rd},create:function(){var e=this;e.picker=wl({defaultSelector:".picker",constructor:rd,app:e,domProp:"f7Picker"}),e.picker.close=function(e){void 0===e&&(e=".picker");var t=gl(e);if(0!==t.length){var n=t[0].f7Picker;!n||n&&!n.opened||n.close()}}},params:{picker:{updateValuesOnMomentum:!1,updateValuesOnTouchmove:!0,updateValuesOnMousewheel:!0,mousewheel:!0,rotateEffect:!1,momentumRatio:7,freeMode:!1,cols:[],containerEl:null,openIn:"auto",sheetPush:!1,sheetSwipeToClose:void 0,backdrop:void 0,formatValue:null,inputEl:null,inputReadOnly:!0,closeByOutsideClick:!0,scrollToInput:!0,scrollToEl:void 0,toolbar:!0,toolbarCloseText:"Done",cssClass:null,routableModals:!1,view:null,url:"select/",renderToolbar:null,render:null}}},sd={handle:function(e,t){var n,a=gl(e),r=a[0].scrollTop,o=a[0].scrollHeight,s=a[0].offsetHeight,i=a[0].getAttribute("data-infinite-distance"),l=a.find(".virtual-list"),u=a.hasClass("infinite-scroll-top");if(i||(i=50),"string"==typeof i&&i.indexOf("%")>=0&&(i=parseInt(i,10)/100*s),i>s&&(i=s),u)r<i&&(a.trigger("infinite",t),this.emit("infinite",a[0],t));else if(r+s>=o-i){if(l.length>0&&(n=l.eq(-1)[0].f7VirtualList)&&!n.reachEnd&&!n.params.updatableScroll)return;a.trigger("infinite",t),this.emit("infinite",a[0],t)}},create:function(e){var t=gl(e),n=this;function a(e){n.infiniteScroll.handle(this,e)}t.each((function(e){e.f7InfiniteScrollHandler=a,e.addEventListener("scroll",e.f7InfiniteScrollHandler)}))},destroy:function(e){gl(e).each((function(e){e.removeEventListener("scroll",e.f7InfiniteScrollHandler),delete e.f7InfiniteScrollHandler}))}},id={name:"infiniteScroll",create:function(){bs(this,{infiniteScroll:sd})},on:{tabMounted:function(e){var t=this,n=gl(e),a=n.find(".infinite-scroll-content");n.is(".infinite-scroll-content")&&a.add(n),a.each((function(e){t.infiniteScroll.create(e)}))},tabBeforeRemove:function(e){var t=gl(e),n=this,a=t.find(".infinite-scroll-content");t.is(".infinite-scroll-content")&&a.add(t),a.each((function(e){n.infiniteScroll.destroy(e)}))},pageInit:function(e){var t=this;e.$el.find(".infinite-scroll-content").each((function(e){t.infiniteScroll.create(e)}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".infinite-scroll-content").each((function(e){t.infiniteScroll.destroy(e)}))}}};function ld(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ud(e,t){return ud=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ud(e,t)}var cd=function(e){var t,n;function a(t,n){var a,r=ld(a=e.call(this,{},[t])||this),o=xs(),s=ws(),i=gl(n),l=i.find(".ptr-preloader");r.$el=i,r.el=i[0],r.app=t,r.bottom=r.$el.hasClass("ptr-bottom"),r.useModulesParams({});var u,c,p,d="md"===t.theme,h="ios"===t.theme,f="aurora"===t.theme;r.done=function(){var e=d?l:i;return e.on("transitionend",(function t(n){gl(n.target).closest(l).length||(i.removeClass("ptr-transitioning ptr-pull-up ptr-pull-down ptr-closing"),i.trigger("ptr:done"),r.emit("local::done ptrDone",i[0]),e.off("transitionend",t))})),i.removeClass("ptr-refreshing").addClass("ptr-transitioning ptr-closing"),r},r.refresh=function(){return i.hasClass("ptr-refreshing")||(i.addClass("ptr-transitioning ptr-refreshing"),i.trigger("ptr:refresh",r.done),r.emit("local::refresh ptrRefresh",i[0],r.done)),r},r.mousewheel="true"===i.attr("data-ptr-mousewheel");var m,g,v,b,y,w,x,k,C,E,S,$,T,I={},N=!1,O=!1,R=!1,A=0,M=!1,B=i.parents(".page");if((B.find(".navbar").length>0||B.parents(".view").children(".navbars").length>0)&&(M=!0),B.hasClass("no-navbar")&&(M=!1),!r.bottom){var P=t.navbar.getElByPage(B[0]);if(P){var D=gl(P),F=D.hasClass("navbar-large-transparent")||D.hasClass("navbar-large")&&D.hasClass("navbar-transparent"),_=D.hasClass("navbar-transparent")&&!D.hasClass("navbar-large");F?i.addClass("ptr-with-navbar-large-transparent"):_&&i.addClass("ptr-with-navbar-transparent")}}function L(e){void 0===e&&(e=0);var t=l.find(".preloader-inner-line"),n=1/t.length;t.forEach((function(t,a){var r=(e-a*n)/n;t.style.opacity=.27*Math.max(Math.min(r,1),0)}))}function z(){l.find(".preloader-inner-line").css("opacity","")}function V(e){if(c){if("android"!==o.os)return;if("targetTouches"in e&&e.targetTouches.length>1)return}i.hasClass("ptr-refreshing")||gl(e.target).closest(".sortable-handler, .ptr-ignore, .card-expandable.card-opened").length||(p=!1,k=!1,c=!0,m=void 0,y=void 0,"touchstart"===e.type&&(u=e.targetTouches[0].identifier),I.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,I.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY)}function W(e){if(c){var t,a,s;if("touchmove"===e.type){if(u&&e.touches)for(var f=0;f<e.touches.length;f+=1)e.touches[f].identifier===u&&(s=e.touches[f]);s||(s=e.targetTouches[0]),t=s.pageX,a=s.pageY}else t=e.pageX,a=e.pageY;if(t&&a)if(void 0===m&&(m=!!(m||Math.abs(a-I.y)>Math.abs(t-I.x))),m){if(b=i[0].scrollTop,!p){var $;if(i.removeClass("ptr-transitioning"),h&&L(0),C=i[0].scrollHeight,E=i[0].offsetHeight,r.bottom&&(S=C-E),b>C)return void(c=!1);var T=gl(e.target).closest(".ptr-watch-scroll");if(T.length&&T.each((function(e){e!==n&&e.scrollHeight>e.offsetHeight&&"auto"===gl(e).css("overflow")&&(!r.bottom&&e.scrollTop>0||r.bottom&&e.scrollTop<e.scrollHeight-e.offsetHeight)&&($=!0)})),$)return void(c=!1);x&&(w=i.attr("data-ptr-distance")).indexOf("%")>=0&&(w=C*parseInt(w,10)/100),A=i.hasClass("ptr-refreshing")?w:0,O=!(C!==E&&"ios"===o.os&&!d),R=!1}if(p=!0,g=a-I.y,void 0===y&&(r.bottom?b!==S:0!==b)&&(y=!0),r.bottom?g<0&&b>=S||b>S:g>0&&b<=0||b<0)"ios"===o.os&&parseInt(o.osVersion.split(".")[0],10)>7&&(r.bottom||0!==b||y||(O=!0),r.bottom&&b===S&&!y&&(O=!0)),O||!r.bottom||d||(i.css("-webkit-overflow-scrolling","auto"),i.scrollTop(S),R=!0),O||R?(e.cancelable&&e.preventDefault(),v=(r.bottom?-1*Math.pow(Math.abs(g),.85):Math.pow(g,.85))+A,d?l.transform("translate3d(0,"+v+"px,0)").find(".ptr-arrow").transform("rotate("+(Math.abs(g)/66*180+100)+"deg)"):(r.bottom||h?i.children().transform("translate3d(0,"+v+"px,0)"):i.transform("translate3d(0,"+v+"px,0)"),h&&l.transform("translate3d(0,0px,0)"))):h&&!r.bottom&&l.transform("translate3d(0,"+b+"px,0)"),h&&!N&&L(O||R?Math.pow(Math.abs(g),.85)/w:Math.abs(g)/(2*w)),(O||R)&&Math.pow(Math.abs(g),.85)>w||!O&&Math.abs(g)>=2*w?(N=!0,i.addClass("ptr-pull-up").removeClass("ptr-pull-down"),z()):(N=!1,i.removeClass("ptr-pull-up").addClass("ptr-pull-down")),k||(i.trigger("ptr:pullstart"),r.emit("local::pullStart ptrPullStart",i[0]),k=!0),i.trigger("ptr:pullmove",{event:e,scrollTop:b,translate:v,touchesDiff:g}),r.emit("local::pullMove ptrPullMove",i[0],{event:e,scrollTop:b,translate:v,touchesDiff:g});else k=!1,i.removeClass("ptr-pull-up ptr-pull-down"),N=!1}else c=!1}}function H(e){return"touchend"===e.type&&e.changedTouches&&e.changedTouches.length>0&&u&&e.changedTouches[0].identifier!==u?(c=!1,m=!1,p=!1,void(u=null)):c&&p?(v&&(i.addClass("ptr-transitioning"),v=0),d?l.transform("").find(".ptr-arrow").transform(""):(l.transform(""),r.bottom||h?i.children().transform(""):i.transform("")),O||!r.bottom||d||i.css("-webkit-overflow-scrolling",""),N?(i.addClass("ptr-refreshing"),i.trigger("ptr:refresh",r.done),r.emit("local::refresh ptrRefresh",i[0],r.done)):i.removeClass("ptr-pull-down"),c=!1,p=!1,void(k&&(i.trigger("ptr:pullend"),r.emit("local::pullEnd ptrPullEnd",i[0])))):(c=!1,void(p=!1))}M||r.bottom||i.addClass("ptr-no-navbar"),i.attr("data-ptr-distance")?x=!0:d?w=66:h?w=44:f&&(w=38);var j=!0,U=0;function G(){j=!0,T=!1,U=0,v&&(i.addClass("ptr-transitioning"),v=0),d?l.transform("").find(".ptr-arrow").transform(""):(l.transform(""),r.bottom?i.children().transform(""):i.transform("")),N?(i.addClass("ptr-refreshing"),i.trigger("ptr:refresh",r.done),r.emit("local::refresh ptrRefresh",i[0],r.done)):i.removeClass("ptr-pull-down"),k&&(i.trigger("ptr:pullend"),r.emit("local::pullEnd ptrPullEnd",i[0]))}function q(e){if(j){var t=e.deltaX,a=e.deltaY;if(!(Math.abs(t)>Math.abs(a)||i.hasClass("ptr-refreshing")||gl(e.target).closest(".sortable-handler, .ptr-ignore, .card-expandable.card-opened").length)){if(clearTimeout($),b=i[0].scrollTop,!T){var o;if(i.removeClass("ptr-transitioning"),h&&L(0),C=i[0].scrollHeight,E=i[0].offsetHeight,r.bottom&&(S=C-E),b>C)return void(j=!1);var s=gl(e.target).closest(".ptr-watch-scroll");if(s.length&&s.each((function(e){e!==n&&e.scrollHeight>e.offsetHeight&&"auto"===gl(e).css("overflow")&&(!r.bottom&&e.scrollTop>0||r.bottom&&e.scrollTop<e.scrollHeight-e.offsetHeight)&&(o=!0)})),o)return void(j=!1);x&&(w=i.attr("data-ptr-distance")).indexOf("%")>=0&&(w=C*parseInt(w,10)/100)}if(p=!0,g=U-=a,void 0===y&&(r.bottom?b!==S:0!==b)&&(y=!0),r.bottom?g<0&&b>=S||b>S:g>0&&b<=0||b<0)e.cancelable&&e.preventDefault(),v=g,Math.abs(v)>w&&(v=w+Math.pow(Math.abs(v)-w,.7),r.bottom&&(v=-v)),d?l.transform("translate3d(0,"+v+"px,0)").find(".ptr-arrow").transform("rotate("+(Math.abs(g)/66*180+100)+"deg)"):r.bottom?i.children().transform("translate3d(0,"+v+"px,0)"):(i.transform("translate3d(0,"+v+"px,0)"),h&&l.transform("translate3d(0,"+-v+"px,0)")),h&&!N&&L(Math.abs(v)/w),Math.abs(v)>w?(N=!0,i.addClass("ptr-pull-up").removeClass("ptr-pull-down"),z()):(N=!1,i.removeClass("ptr-pull-up").addClass("ptr-pull-down")),k||(i.trigger("ptr:pullstart"),r.emit("local::pullStart ptrPullStart",i[0]),k=!0),i.trigger("ptr:pullmove",{event:e,scrollTop:b,translate:v,touchesDiff:g}),r.emit("local::pullMove ptrPullMove",i[0],{event:e,scrollTop:b,translate:v,touchesDiff:g});else k=!1,i.removeClass("ptr-pull-up ptr-pull-down"),N=!1;$=setTimeout(G,300)}}}return B.length&&i.length?(i[0].f7PullToRefresh=r,r.attachEvents=function(){var e=!!s.passiveListener&&{passive:!0};i.on(t.touchEvents.start,V,e),t.on("touchmove:active",W),t.on("touchend:passive",H),r.mousewheel&&!r.bottom&&i.on("wheel",q)},r.detachEvents=function(){var e=!!s.passiveListener&&{passive:!0};i.off(t.touchEvents.start,V,e),t.off("touchmove:active",W),t.off("touchend:passive",H),r.mousewheel&&!r.bottom&&i.off("wheel",q)},r.useModules(),r.init(),r||ld(a)):r||ld(a)}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,ud(t,n);var r=a.prototype;return r.init=function(){this.attachEvents()},r.destroy=function(){var e=this;e.emit("local::beforeDestroy ptrBeforeDestroy",e),e.$el.trigger("ptr:beforedestroy"),delete e.el.f7PullToRefresh,e.detachEvents(),Qo(e),e=null},a}(Ts),pd=cd,dd={name:"pullToRefresh",create:function(){var e=this;e.ptr=cs(wl({defaultSelector:".ptr-content",constructor:pd,app:e,domProp:"f7PullToRefresh"}),{done:function(t){var n=e.ptr.get(t);if(n)return n.done()},refresh:function(t){var n=e.ptr.get(t);if(n)return n.refresh()}})},static:{PullToRefresh:pd},on:{tabMounted:function(e){var t=this,n=gl(e),a=n.find(".ptr-content");n.is(".ptr-content")&&a.add(n),a.each((function(e){t.ptr.create(e)}))},tabBeforeRemove:function(e){var t=gl(e),n=this,a=t.find(".ptr-content");t.is(".ptr-content")&&a.add(t),a.each((function(e){n.ptr.destroy(e)}))},pageInit:function(e){var t=this;e.$el.find(".ptr-content").each((function(e){t.ptr.create(e)}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".ptr-content").each((function(e){t.ptr.destroy(e)}))}}},hd={destroy:function(e){var t=gl(e).closest(".page");t.length&&t[0].f7LazyDestroy&&t[0].f7LazyDestroy()},create:function(e){var t=this,n=Ho(),a=ws(),r=gl(e).closest(".page").eq(0),o=r.find(".lazy");if(0!==o.length||r.hasClass("lazy")){var s=t.params.lazy.placeholder;!1!==s&&o.each((function(e){gl(e).attr("data-src")&&!gl(e).attr("src")&&gl(e).attr("src",s)}));var i=[],l=!1;if(t.params.lazy.observer&&a.intersectionObserver){var u=r[0].f7LazyObserver;return u||(u=new n.IntersectionObserver((function(e,n){e.forEach((function(e){if(e.isIntersecting){if(t.params.lazy.sequential&&l)return void(i.indexOf(e.target)<0&&i.push(e.target));l=!0,t.lazy.loadImage(e.target,c),n.unobserve(e.target)}}))}),{root:r[0]})),o.each((function(e){e.f7LazyObserverAdded||(e.f7LazyObserverAdded=!0,u.observe(e))})),void(r[0].f7LazyDestroy||(r[0].f7LazyDestroy=function(){u.disconnect(),delete r[0].f7LazyDestroy,delete r[0].f7LazyObserver}))}r[0].f7LazyDestroy||(r[0].f7LazyDestroy=function(){r[0].f7LazyAttached=!1,delete r[0].f7LazyAttached,r.off("lazy",p),r.off("scroll",p,!0),r.find(".tab").off("tab:mounted tab:show",p),t.off("resize",p)}),r[0].f7LazyAttached||(r[0].f7LazyAttached=!0,r.on("lazy",p),r.on("scroll",p,!0),r.find(".tab").on("tab:mounted tab:show",p),t.on("resize",p)),p()}function c(e){i.indexOf(e)>=0&&i.splice(i.indexOf(e),1),l=!1,t.params.lazy.sequential&&i.length>0&&(l=!0,t.lazy.loadImage(i[0],c))}function p(){t.lazy.load(r,(function(e){t.params.lazy.sequential&&l?i.indexOf(e)<0&&i.push(e):(l=!0,t.lazy.loadImage(e,c))}))}},isInViewport:function(e){var t=this,n=e.getBoundingClientRect(),a=t.params.lazy.threshold||0;return n.top>=0-a&&n.left>=0-a&&n.top<=t.height+a&&n.left<=t.width+a},loadImage:function(e,t){var n=this,a=Ho(),r=gl(e),o=r.attr("data-background"),s=o||r.attr("data-src");function i(){r.removeClass("lazy").addClass("lazy-loaded"),o?r.css("background-image","url("+s+")"):s&&r.attr("src",s),t&&t(e),r.trigger("lazy:loaded"),n.emit("lazyLoaded",r[0])}if(!s)return r.trigger("lazy:load"),n.emit("lazyLoad",r[0]),void i();var l=new a.Image;l.onload=i,l.onerror=function(){r.removeClass("lazy").addClass("lazy-loaded"),o?r.css("background-image","url("+(n.params.lazy.placeholder||"")+")"):r.attr("src",n.params.lazy.placeholder||""),t&&t(e),r.trigger("lazy:error"),n.emit("lazyError",r[0])},l.src=s,r.removeAttr("data-src").removeAttr("data-background"),r.trigger("lazy:load"),n.emit("lazyLoad",r[0])},load:function(e,t){var n=this,a=gl(e);a.hasClass("page")||(a=a.parents(".page").eq(0)),0!==a.length&&a.find(".lazy").each((function(e){gl(e).parents(".tab:not(.tab-active)").length>0||n.lazy.isInViewport(e)&&(t?t(e):n.lazy.loadImage(e))}))}},fd={name:"lazy",params:{lazy:{placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEXCwsK592mkAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",threshold:0,sequential:!0,observer:!0}},create:function(){bs(this,{lazy:hd})},on:{pageInit:function(e){(e.$el.find(".lazy").length>0||e.$el.hasClass("lazy"))&&this.lazy.create(e.$el)},pageAfterIn:function(e){var t=ws();this.params.lazy.observer&&t.intersectionObserver||(e.$el.find(".lazy").length>0||e.$el.hasClass("lazy"))&&this.lazy.create(e.$el)},pageBeforeRemove:function(e){(e.$el.find(".lazy").length>0||e.$el.hasClass("lazy"))&&this.lazy.destroy(e.$el)},tabMounted:function(e){var t=gl(e);(t.find(".lazy").length>0||t.hasClass("lazy"))&&this.lazy.create(t)},tabBeforeRemove:function(e){var t=ws();if(!this.params.lazy.observer||!t.intersectionObserver){var n=gl(e);(n.find(".lazy").length>0||n.hasClass("lazy"))&&this.lazy.destroy(n)}}}};function md(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gd(e,t){return gd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},gd(e,t)}var vd=function(e){var t,n;function a(t,n){var a;void 0===n&&(n={});var r=md(a=e.call(this,n,[t])||this),o={};r.useModulesParams(o),r.params=cs(o,n);var s=gl(r.params.el);if(0===s.length)return md(a);if(r.$el=s,r.el=s[0],r.$el[0].f7DataTable){var i=r.$el[0].f7DataTable;return r.destroy(),i||md(a)}function l(e){if(!e.detail||!e.detail.sentByF7DataTable){var t=gl(this),n=t[0].checked,a=t.parents("td,th").index();if(t.parents("thead").length>0)0===a&&s.find("tbody tr")[n?"addClass":"removeClass"]("data-table-row-selected"),s.find("tbody tr td:nth-child("+(a+1)+") input").prop("checked",n).trigger("change",{sentByF7DataTable:!0}),t.prop("indeterminate",!1);else{0===a&&t.parents("tr")[n?"addClass":"removeClass"]("data-table-row-selected");var o=s.find("tbody .checkbox-cell:nth-child("+(a+1)+') input[type="checkbox"]:checked').length,i=s.find("tbody tr").length,l=s.find("thead .checkbox-cell:nth-child("+(a+1)+') input[type="checkbox"]');n?o===i&&l.prop("checked",!0).trigger("change",{sentByF7DataTable:!0}):l.prop("checked",!1),l.prop("indeterminate",o>0&&o<i)}r.checkSelectedHeader()}}function u(){var e,t=gl(this),n=t.hasClass("sortable-cell-active"),a=t.hasClass("sortable-desc")?"desc":"asc";n?(e="desc"===a?"asc":"desc",t.removeClass("sortable-desc sortable-asc").addClass("sortable-"+e)):(s.find("thead .sortable-cell-active").removeClass("sortable-cell-active"),t.addClass("sortable-cell-active"),e=a),t.trigger("datatable:sort",e),r.emit("local::sort dataTableSort",r,e)}return r.$el[0].f7DataTable=r,cs(r,{collapsible:s.hasClass("data-table-collapsible"),$headerEl:s.find(".data-table-header"),$headerSelectedEl:s.find(".data-table-header-selected")}),r.attachEvents=function(){r.$el.on("change",'.checkbox-cell input[type="checkbox"]',l),r.$el.find("thead .sortable-cell").on("click",u)},r.detachEvents=function(){r.$el.off("change",'.checkbox-cell input[type="checkbox"]',l),r.$el.find("thead .sortable-cell").off("click",u)},r.useModules(),r.init(),r||md(a)}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,gd(t,n);var r=a.prototype;return r.setCollapsibleLabels=function(){var e=this;e.collapsible&&e.$el.find("tbody td:not(.checkbox-cell)").each((function(t){var n=gl(t),a=n.index(),r=n.attr("data-collapsible-title");r||""===r||n.attr("data-collapsible-title",e.$el.find("thead th").eq(a).text())}))},r.checkSelectedHeader=function(){var e=this;if(e.$headerEl.length>0&&e.$headerSelectedEl.length>0){var t=e.$el.find("tbody .checkbox-cell input:checked").length;e.$el[t>0?"addClass":"removeClass"]("data-table-has-checked"),e.$headerSelectedEl.find(".data-table-selected-count").text(t)}},r.init=function(){var e=this;e.attachEvents(),e.setCollapsibleLabels(),e.checkSelectedHeader()},r.destroy=function(){var e=this;e.$el.trigger("datatable:beforedestroy"),e.emit("local::beforeDestroy dataTableBeforeDestroy",e),e.attachEvents(),e.$el[0]&&(e.$el[0].f7DataTable=null,delete e.$el[0].f7DataTable),Qo(e),e=null},a}(Ts),bd=vd,yd={name:"dataTable",static:{DataTable:bd},create:function(){this.dataTable=wl({defaultSelector:".data-table",constructor:bd,app:this,domProp:"f7DataTable"})},on:{tabBeforeRemove:function(e){var t=this;gl(e).find(".data-table-init").each((function(e){t.dataTable.destroy(e)}))},tabMounted:function(e){var t=this;gl(e).find(".data-table-init").each((function(e){t.dataTable.create({el:e})}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".data-table-init").each((function(e){t.dataTable.destroy(e)}))},pageInit:function(e){var t=this;e.$el.find(".data-table-init").each((function(e){t.dataTable.create({el:e})}))}},vnode:{"data-table-init":{insert:function(e){var t=e.elm;this.dataTable.create({el:t})},destroy:function(e){var t=e.elm;this.dataTable.destroy(t)}}}};function wd(){return wd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},wd.apply(this,arguments)}for(var xd={morphOpen:function(e,t){var n=this,a=gl(e),r=gl(t);if(0!==r.length){r.transition(0).addClass("fab-morph-target-visible");var o={width:r[0].offsetWidth,height:r[0].offsetHeight,offset:r.offset(),borderRadius:r.css("border-radius"),zIndex:r.css("z-index")},s={width:a[0].offsetWidth,height:a[0].offsetHeight,offset:a.offset(),translateX:ss(a[0],"x"),translateY:ss(a[0],"y")};a[0].f7FabMorphData={$targetEl:r,target:o,fab:s};var i=s.offset.left+s.width/2-(o.offset.left+o.width/2)-s.translateX,l=s.offset.top+s.height/2-(o.offset.top+o.height/2)-s.translateY,u=o.width/s.width,c=o.height/s.height,p=Math.ceil(parseInt(o.borderRadius,10)/Math.max(u,c));p>0&&(p+=2),a[0].f7FabMorphResizeHandler=function(){a.transition(0).transform(""),r.transition(0),o.width=r[0].offsetWidth,o.height=r[0].offsetHeight,o.offset=r.offset(),s.offset=a.offset();var e=s.offset.left+s.width/2-(o.offset.left+o.width/2)-s.translateX,t=s.offset.top+s.height/2-(o.offset.top+o.height/2)-s.translateY,n=o.width/s.width,i=o.height/s.height;a.transform("translate3d("+-e+"px, "+-t+"px, 0) scale("+n+", "+i+")")},r.css("opacity",0).transform("scale("+1/u+", "+1/c+")"),a.addClass("fab-opened").css("z-index",o.zIndex-1).transform("translate3d("+-i+"px, "+-l+"px, 0)"),a.transitionEnd((function(){r.transition(""),as((function(){r.css("opacity",1).transform("scale(1,1)"),a.transform("translate3d("+-i+"px, "+-l+"px, 0) scale("+u+", "+c+")").css("border-radius",p+"px").css("box-shadow","none").css("opacity","0")})),n.on("resize",a[0].f7FabMorphResizeHandler),r.parents(".page-content").length>0&&r.parents(".page-content").on("scroll",a[0].f7FabMorphResizeHandler)}))}},morphClose:function(e){var t=gl(e),n=t[0].f7FabMorphData;if(n){var a=n.$targetEl,r=n.target,o=n.fab;if(0!==a.length){var s=o.offset.left+o.width/2-(r.offset.left+r.width/2)-o.translateX,i=o.offset.top+o.height/2-(r.offset.top+r.height/2)-o.translateY,l=r.width/o.width,u=r.height/o.height;this.off("resize",t[0].f7FabMorphResizeHandler),a.parents(".page-content").length>0&&a.parents(".page-content").off("scroll",t[0].f7FabMorphResizeHandler),a.css("opacity",0).transform("scale("+1/l+", "+1/u+")"),t.transition("").css("box-shadow","").css("border-radius","").css("opacity","1").transform("translate3d("+-s+"px, "+-i+"px, 0)"),t.transitionEnd((function(){t.css("z-index","").removeClass("fab-opened").transform(""),as((function(){t.transitionEnd((function(){a.removeClass("fab-morph-target-visible").css("opacity","").transform("").transition("")}))}))}))}}},open:function(e,t){var n=this,a=gl(e).eq(0),r=a.find(".fab-buttons");if(a.length&&!a.hasClass("fab-opened")&&(r.length||a.hasClass("fab-morph"))){if(n.fab.openedEl){if(n.fab.openedEl===a[0])return;n.fab.close(n.fab.openedEl)}n.fab.openedEl=a[0],a.hasClass("fab-morph")?n.fab.morphOpen(a,t||a.attr("data-morph-to")):a.addClass("fab-opened"),a.siblings(".fab-backdrop").addClass("backdrop-in"),a.trigger("fab:open")}},close:function(e){void 0===e&&(e=".fab-opened");var t=gl(e).eq(0),n=t.find(".fab-buttons");t.length&&t.hasClass("fab-opened")&&(n.length||t.hasClass("fab-morph"))&&(this.fab.openedEl=null,t.hasClass("fab-morph")?this.fab.morphClose(t):t.removeClass("fab-opened"),t.siblings(".fab-backdrop").removeClass("backdrop-in"),t.trigger("fab:close"))},toggle:function(e){gl(e).hasClass("fab-opened")?this.fab.close(e):this.fab.open(e)}},kd={name:"fab",create:function(){bs(this,{fab:wd({openedEl:null},xd)})},clicks:{".fab > a":function(e){this.fab.toggle(e.parents(".fab"))},".fab-open":function(e,t){void 0===t&&(t={});this.fab.open(t.fab)},".fab-close":function(e,t){void 0===t&&(t={});this.fab.close(t.fab)},".fab-backdrop":function(){this.fab.close()}}},Cd=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"OE",letters:""},{base:"oe",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],Ed={},Sd=0;Sd<Cd.length;Sd+=1)for(var $d=Cd[Sd].letters,Td=0;Td<$d.length;Td+=1)Ed[$d[Td]]=Cd[Sd].base;var Id=function(e){return e.replace(/[^\u0000-\u007E]/g,(function(e){return Ed[e]||e}))};function Nd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Od(e,t){return Od=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Od(e,t)}var Rd=function(e){var t,n;function a(t,n){var a;void 0===n&&(n={});var r=Nd(a=e.call(this,n,[t])||this),o={el:void 0,inputEl:void 0,inputEvents:"change input compositionend",disableButton:!0,disableButtonEl:void 0,backdropEl:void 0,searchContainer:void 0,searchItem:"li",searchIn:void 0,searchGroup:".list-group",searchGroupTitle:".item-divider, .list-group-title",ignore:".searchbar-ignore",foundEl:".searchbar-found",notFoundEl:".searchbar-not-found",hideOnEnableEl:".searchbar-hide-on-enable",hideOnSearchEl:".searchbar-hide-on-search",backdrop:void 0,removeDiacritics:!0,customSearch:!1,hideDividers:!0,hideGroups:!0,disableOnBackdropClick:!0,expandable:!1,inline:!1};r.useModulesParams(o),r.params=cs(o,n);var s,i=gl(r.params.el);if(0===i.length)return r||Nd(a);if(i[0].f7Searchbar)return i[0].f7Searchbar||Nd(a);i[0].f7Searchbar=r;var l,u,c,p,d=i.parents(".navbar");if(i.parents(".page").length>0)s=i.parents(".page");else if(d.length>0&&!(s=gl(t.navbar.getPageByEl(d[0]))).length){var h=i.parents(".view").find(".page-current");h[0]&&h[0].f7Page&&h[0].f7Page.navbarEl===d[0]&&(s=h)}n.foundEl?l=gl(n.foundEl):"string"==typeof r.params.foundEl&&s&&(l=s.find(r.params.foundEl)),n.notFoundEl?u=gl(n.notFoundEl):"string"==typeof r.params.notFoundEl&&s&&(u=s.find(r.params.notFoundEl)),n.hideOnEnableEl?c=gl(n.hideOnEnableEl):"string"==typeof r.params.hideOnEnableEl&&s&&(c=s.find(r.params.hideOnEnableEl)),n.hideOnSearchEl?p=gl(n.hideOnSearchEl):"string"==typeof r.params.hideOnSearchEl&&s&&(p=s.find(r.params.hideOnSearchEl));var f,m,g,v,b=r.params.expandable||i.hasClass("searchbar-expandable"),y=r.params.inline||i.hasClass("searchbar-inline");function w(e){e.preventDefault()}function x(e){r.enable(e),r.$el.addClass("searchbar-focused")}function k(){r.$el.removeClass("searchbar-focused"),"aurora"!==t.theme||v&&v.length&&r.params.disableButton||r.query||r.disable()}function C(){var e=r.$inputEl.val().trim();(r.$searchContainer&&r.$searchContainer.length>0&&(r.params.searchIn||r.isVirtualList||r.params.searchIn===r.params.searchItem)||r.params.customSearch)&&r.search(e,!0)}function E(e,t){r.$el.trigger("searchbar:clear",t),r.emit("local::clear searchbarClear",r,t)}function S(e){r.disable(e)}function $(){!r||r&&!r.$el||r.enabled&&(r.$el.removeClass("searchbar-enabled"),r.expandable&&r.$el.parents(".navbar").removeClass("with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition"))}function T(){!r||r&&!r.$el||r.enabled&&(r.$el.addClass("searchbar-enabled"),r.expandable&&r.$el.parents(".navbar").addClass("with-searchbar-expandable-enabled-no-transition"))}return void 0===r.params.backdrop&&(r.params.backdrop=!y&&"aurora"!==t.theme),r.params.backdrop&&0===(f=r.params.backdropEl?gl(r.params.backdropEl):s&&s.length>0?s.find(".searchbar-backdrop"):i.siblings(".searchbar-backdrop")).length&&(f=gl('<div class="searchbar-backdrop"></div>'),s&&s.length?i.parents(s).length>0&&d&&0===i.parents(d).length?f.insertBefore(i):f.insertBefore(s.find(".page-content").eq(0)):f.insertBefore(i)),r.params.searchContainer&&(m=gl(r.params.searchContainer)),g=r.params.inputEl?gl(r.params.inputEl):i.find('input[type="search"]').eq(0),r.params.disableButton&&(v=r.params.disableButtonEl?gl(r.params.disableButtonEl):i.find(".searchbar-disable-button")),cs(r,{app:t,view:t.views.get(i.parents(".view")),$el:i,el:i[0],$backdropEl:f,backdropEl:f&&f[0],$searchContainer:m,searchContainer:m&&m[0],$inputEl:g,inputEl:g[0],$disableButtonEl:v,disableButtonEl:v&&v[0],disableButtonHasMargin:!1,$pageEl:s,pageEl:s&&s[0],$navbarEl:d,navbarEl:d&&d[0],$foundEl:l,foundEl:l&&l[0],$notFoundEl:u,notFoundEl:u&&u[0],$hideOnEnableEl:c,hideOnEnableEl:c&&c[0],$hideOnSearchEl:p,hideOnSearchEl:p&&p[0],previousQuery:"",query:"",isVirtualList:m&&m.hasClass("virtual-list"),virtualList:void 0,enabled:!1,expandable:b,inline:y}),r.attachEvents=function(){i.on("submit",w),r.params.disableButton&&r.$disableButtonEl.on("click",S),r.params.disableOnBackdropClick&&r.$backdropEl&&r.$backdropEl.on("click",S),r.expandable&&"ios"===t.theme&&r.view&&d.length&&r.$pageEl&&(r.$pageEl.on("page:beforeout",$),r.$pageEl.on("page:beforein",T)),r.$inputEl.on("focus",x),r.$inputEl.on("blur",k),r.$inputEl.on(r.params.inputEvents,C),r.$inputEl.on("input:clear",E)},r.detachEvents=function(){i.off("submit",w),r.params.disableButton&&r.$disableButtonEl.off("click",S),r.params.disableOnBackdropClick&&r.$backdropEl&&r.$backdropEl.off("click",S),r.expandable&&"ios"===t.theme&&r.view&&d.length&&r.$pageEl&&(r.$pageEl.off("page:beforeout",$),r.$pageEl.off("page:beforein",T)),r.$inputEl.off("focus",x),r.$inputEl.off("blur",k),r.$inputEl.off(r.params.inputEvents,C),r.$inputEl.off("input:clear",E)},r.useModules(),r.init(),r||Nd(a)}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,Od(t,n);var r=a.prototype;return r.clear=function(e){var t=this;if(!t.query&&e&&gl(e.target).hasClass("searchbar-clear"))return t.disable(),t;var n=t.value;return t.$inputEl.val("").trigger("change").focus(),t.$el.trigger("searchbar:clear",n),t.emit("local::clear searchbarClear",t,n),t},r.setDisableButtonMargin=function(){var e=this;if(!e.expandable){var t=e.app;e.$disableButtonEl.transition(0).show(),e.$disableButtonEl.css("margin-"+(t.rtl?"left":"right"),-e.disableButtonEl.offsetWidth+"px"),e._clientLeft=e.$disableButtonEl[0].clientLeft,e.$disableButtonEl.transition(""),e.disableButtonHasMargin=!0}},r.enable=function(e){var t=this;if(t.enabled)return t;var n=t.app,a=Vo(),r=xs();function o(){if(t.$backdropEl&&(t.$searchContainer&&t.$searchContainer.length||t.params.customSearch)&&!t.$el.hasClass("searchbar-enabled")&&!t.query&&t.backdropShow(),t.$el.addClass("searchbar-enabled"),(!t.$disableButtonEl||t.$disableButtonEl&&0===t.$disableButtonEl.length)&&t.$el.addClass("searchbar-enabled-no-disable-button"),!t.expandable&&t.$disableButtonEl&&t.$disableButtonEl.length>0&&"md"!==n.theme&&(t.disableButtonHasMargin||t.setDisableButtonMargin(),t.$disableButtonEl.css("margin-"+(n.rtl?"left":"right"),"0px")),t.expandable){var e=t.$el.parents(".navbar");if(e.hasClass("navbar-large")&&t.$pageEl){var a=t.$pageEl.find(".page-content"),r=e.find(".title-large");a.addClass("with-searchbar-expandable-enabled"),e.hasClass("navbar-large")&&e.hasClass("navbar-large-collapsed")&&r.length&&a.length&&(a.transition(0),a[0].scrollTop-=r[0].offsetHeight,setTimeout((function(){a.transition("")}),200))}"md"===n.theme&&e.length?e.addClass("with-searchbar-expandable-enabled"):(e.addClass("with-searchbar-expandable-enabled"),e.hasClass("navbar-large")&&e.addClass("navbar-large-collapsed"))}t.$hideOnEnableEl&&t.$hideOnEnableEl.addClass("hidden-by-searchbar"),t.$el.trigger("searchbar:enable"),t.emit("local::enable searchbarEnable",t)}t.enabled=!0;var s=!1;return!0===e&&a.activeElement!==t.inputEl&&(s=!0),r.ios&&"ios"===n.theme?t.expandable?(s&&t.$inputEl.focus(),o()):(s&&t.$inputEl.focus(),!e||"focus"!==e.type&&!0!==e?o():ns((function(){o()}),400)):(s&&t.$inputEl.focus(),"md"===n.theme&&t.expandable&&t.$el.parents(".page, .view, .navbar-inner, .navbar").scrollLeft(n.rtl?100:0),o()),t},r.disable=function(){var e=this;if(!e.enabled)return e;var t=e.app;if(e.$inputEl.val("").trigger("change"),e.$el.removeClass("searchbar-enabled searchbar-focused searchbar-enabled-no-disable-button"),e.expandable){var n=e.$el.parents(".navbar"),a=e.$pageEl&&e.$pageEl.find(".page-content");if(n.hasClass("navbar-large")&&a.length){var r=n.find(".title-large");if(e.$el.transitionEnd((function(){a.removeClass("with-searchbar-expandable-closing")})),n.hasClass("navbar-large")&&n.hasClass("navbar-large-collapsed")&&r.length){var o=a[0].scrollTop,s=r[0].offsetHeight;o>s&&(a.transition(0),a[0].scrollTop=o+s,setTimeout((function(){a.transition("")}),200))}a.removeClass("with-searchbar-expandable-enabled").addClass("with-searchbar-expandable-closing")}"md"===t.theme&&n.length?(n.removeClass("with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition").addClass("with-searchbar-expandable-closing"),e.$el.transitionEnd((function(){n.removeClass("with-searchbar-expandable-closing")}))):(n.removeClass("with-searchbar-expandable-enabled with-searchbar-expandable-enabled-no-transition").addClass("with-searchbar-expandable-closing"),e.$el.transitionEnd((function(){n.removeClass("with-searchbar-expandable-closing")})),e.$pageEl&&e.$pageEl.find(".page-content").trigger("scroll"))}return!e.expandable&&e.$disableButtonEl&&e.$disableButtonEl.length>0&&"md"!==t.theme&&e.$disableButtonEl.css("margin-"+(t.rtl?"left":"right"),-e.disableButtonEl.offsetWidth+"px"),e.$backdropEl&&(e.$searchContainer&&e.$searchContainer.length||e.params.customSearch)&&e.backdropHide(),e.enabled=!1,e.$inputEl.blur(),e.$hideOnEnableEl&&e.$hideOnEnableEl.removeClass("hidden-by-searchbar"),e.$el.trigger("searchbar:disable"),e.emit("local::disable searchbarDisable",e),e},r.toggle=function(){var e=this;return e.enabled?e.disable():e.enable(!0),e},r.backdropShow=function(){var e=this;return e.$backdropEl&&e.$backdropEl.addClass("searchbar-backdrop-in"),e},r.backdropHide=function(){var e=this;return e.$backdropEl&&e.$backdropEl.removeClass("searchbar-backdrop-in"),e},r.search=function(e,t){var n=this;if(n.previousQuery=n.query||"",e===n.previousQuery)return n;t||(n.enabled||n.enable(),n.$inputEl.val(e),n.$inputEl.trigger("input")),n.query=e,n.value=e;var a=n.$searchContainer,r=n.$el,o=n.$foundEl,s=n.$notFoundEl,i=n.$hideOnSearchEl,l=n.isVirtualList;if(e.length>0&&i?i.addClass("hidden-by-searchbar"):i&&i.removeClass("hidden-by-searchbar"),(a&&a.length&&r.hasClass("searchbar-enabled")||n.params.customSearch&&r.hasClass("searchbar-enabled"))&&(0===e.length?n.backdropShow():n.backdropHide()),n.params.customSearch)return r.trigger("searchbar:search",{query:e,previousQuery:n.previousQuery}),n.emit("local::search searchbarSearch",n,e,n.previousQuery),n;var u,c=[];if(l){if(n.virtualList=a[0].f7VirtualList,""===e.trim())return n.virtualList.resetFilter(),s&&s.hide(),o&&o.show(),r.trigger("searchbar:search",{query:e,previousQuery:n.previousQuery}),n.emit("local::search searchbarSearch",n,e,n.previousQuery),n;if(u=n.params.removeDiacritics?Id(e):e,n.virtualList.params.searchAll)c=n.virtualList.params.searchAll(u,n.virtualList.items)||[];else if(n.virtualList.params.searchByItem)for(var p=0;p<n.virtualList.items.length;p+=1)n.virtualList.params.searchByItem(u,n.virtualList.items[p],p)&&c.push(p)}else{var d;d=n.params.removeDiacritics?Id(e.trim().toLowerCase()).split(" "):e.trim().toLowerCase().split(" "),a.find(n.params.searchItem).removeClass("hidden-by-searchbar").each((function(e){var t=gl(e),a=[],r=n.params.searchIn?t.find(n.params.searchIn):t;n.params.searchIn===n.params.searchItem&&(r=t),r.each((function(e){var t=gl(e).text().trim().toLowerCase();n.params.removeDiacritics&&(t=Id(t)),a.push(t)})),a=a.join(" ");for(var o=0,s=0;s<d.length;s+=1)a.indexOf(d[s])>=0&&(o+=1);o===d.length||n.params.ignore&&t.is(n.params.ignore)?c.push(t[0]):t.addClass("hidden-by-searchbar")})),n.params.hideDividers&&a.find(n.params.searchGroupTitle).each((function(e){for(var t=gl(e),a=t.nextAll(n.params.searchItem),r=!0,o=0;o<a.length;o+=1){var s=a.eq(o);if(s.is(n.params.searchGroupTitle))break;s.hasClass("hidden-by-searchbar")||(r=!1)}var i=n.params.ignore&&t.is(n.params.ignore);r&&!i?t.addClass("hidden-by-searchbar"):t.removeClass("hidden-by-searchbar")})),n.params.hideGroups&&a.find(n.params.searchGroup).each((function(e){var t=gl(e),a=n.params.ignore&&t.is(n.params.ignore);0!==t.find(n.params.searchItem).filter((function(e){return!gl(e).hasClass("hidden-by-searchbar")})).length||a?t.removeClass("hidden-by-searchbar"):t.addClass("hidden-by-searchbar")}))}return 0===c.length?(s&&s.show(),o&&o.hide()):(s&&s.hide(),o&&o.show()),l&&n.virtualList&&n.virtualList.filterItems(c),r.trigger("searchbar:search",{query:e,previousQuery:n.previousQuery,foundItems:c}),n.emit("local::search searchbarSearch",n,e,n.previousQuery,c),n},r.init=function(){var e=this;e.expandable&&e.$el&&e.$el.addClass("searchbar-expandable"),e.inline&&e.$el&&e.$el.addClass("searchbar-inline"),e.attachEvents()},r.destroy=function(){var e=this;e.emit("local::beforeDestroy searchbarBeforeDestroy",e),e.$el.trigger("searchbar:beforedestroy"),e.detachEvents(),e.$el[0]&&(e.$el[0].f7Searchbar=null,delete e.$el[0].f7Searchbar),Qo(e)},a}(Ts),Ad=Rd,Md={name:"searchbar",static:{Searchbar:Ad},create:function(){this.searchbar=wl({defaultSelector:".searchbar",constructor:Ad,app:this,domProp:"f7Searchbar",addMethods:"clear enable disable toggle search".split(" ")})},on:{tabMounted:function(e){var t=this;gl(e).find(".searchbar-init").each((function(e){var n=gl(e);t.searchbar.create(cs(n.dataset(),{el:e}))}))},tabBeforeRemove:function(e){gl(e).find(".searchbar-init").each((function(e){e.f7Searchbar&&e.f7Searchbar.destroy&&e.f7Searchbar.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".searchbar-init").each((function(e){var n=gl(e);t.searchbar.create(cs(n.dataset(),{el:e}))})),"ios"===t.theme&&e.view&&e.view.router.dynamicNavbar&&e.$navbarEl&&e.$navbarEl.length>0&&e.$navbarEl.find(".searchbar-init").each((function(e){var n=gl(e);t.searchbar.create(cs(n.dataset(),{el:e}))}))},pageBeforeRemove:function(e){e.$el.find(".searchbar-init").each((function(e){e.f7Searchbar&&e.f7Searchbar.destroy&&e.f7Searchbar.destroy()})),"ios"===this.theme&&e.view&&e.view.router.dynamicNavbar&&e.$navbarEl&&e.$navbarEl.length>0&&e.$navbarEl.find(".searchbar-init").each((function(e){e.f7Searchbar&&e.f7Searchbar.destroy&&e.f7Searchbar.destroy()}))}},clicks:{".searchbar-clear":function(e,t){void 0===t&&(t={});var n=this.searchbar.get(t.searchbar);n&&n.clear()},".searchbar-enable":function(e,t){void 0===t&&(t={});var n=this.searchbar.get(t.searchbar);n&&n.enable(!0)},".searchbar-disable":function(e,t){void 0===t&&(t={});var n=this.searchbar.get(t.searchbar);n&&n.disable()},".searchbar-toggle":function(e,t){void 0===t&&(t={});var n=this.searchbar.get(t.searchbar);n&&n.toggle()}},vnode:{"searchbar-init":{insert:function(e){var t=e.elm,n=gl(t);this.searchbar.create(cs(n.dataset(),{el:t}))},destroy:function(e){var t=e.elm;t.f7Searchbar&&t.f7Searchbar.destroy&&t.f7Searchbar.destroy()}}}};function Bd(){return Bd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Bd.apply(this,arguments)}function Pd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dd(e,t){return Dd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Dd(e,t)}var Fd=function(e){var t,n;function a(t,n){var a;void 0===n&&(n={});var r=Pd(a=e.call(this,n,[t])||this),o={autoLayout:!0,messages:[],newMessagesFirst:!1,scrollMessages:!0,scrollMessagesOnEdge:!0,firstMessageRule:void 0,lastMessageRule:void 0,tailMessageRule:void 0,sameNameMessageRule:void 0,sameHeaderMessageRule:void 0,sameFooterMessageRule:void 0,sameAvatarMessageRule:void 0,customClassMessageRule:void 0,renderMessage:void 0};r.useModulesParams(o),r.params=cs(o,n);var s=gl(n.el).eq(0);if(0===s.length)return r||Pd(a);if(s[0].f7Messages)return s[0].f7Messages||Pd(a);s[0].f7Messages=r;var i=s.closest(".page-content").eq(0);return cs(r,{messages:r.params.messages,$el:s,el:s[0],$pageContentEl:i,pageContentEl:i[0]}),r.useModules(),r.init(),r||Pd(a)}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,Dd(t,n);var r=a.prototype;return r.getMessageData=function(e){var t=gl(e),n={name:t.find(".message-name").html(),header:t.find(".message-header").html(),textHeader:t.find(".message-text-header").html(),textFooter:t.find(".message-text-footer").html(),footer:t.find(".message-footer").html(),isTitle:t.hasClass("messages-title"),type:t.hasClass("message-sent")?"sent":"received",text:t.find(".message-text").html(),image:t.find(".message-image").html(),imageSrc:t.find(".message-image img").attr("src"),typing:t.hasClass("message-typing")};n.isTitle&&(n.text=t.html()),n.text&&n.textHeader&&(n.text=n.text.replace('<div class="message-text-header">'+n.textHeader+"</div>","")),n.text&&n.textFooter&&(n.text=n.text.replace('<div class="message-text-footer">'+n.textFooter+"</div>",""));var a=t.find(".message-avatar").css("background-image");return"none"!==a&&""!==a||(a=void 0),a=a&&"string"==typeof a?a.replace("url(","").replace(")","").replace(/"/g,"").replace(/'/g,""):void 0,n.avatar=a,n},r.getMessagesData=function(){var e=this,t=[];return e.$el.find(".message, .messages-title").each((function(n){t.push(e.getMessageData(n))})),t},r.renderMessage=function(e){var t=this,n=cs({type:"sent",attrs:{}},e);return t.params.renderMessage?t.params.renderMessage.call(t,n):n.isTitle?'<div class="messages-title">'+n.text+"</div>":ec("div",Bd({class:"message message-"+n.type+" "+(n.isTyping?"message-typing":"")+" "+(n.cssClass||"")},n.attrs),n.avatar&&ec("div",{class:"message-avatar",style:"background-image:url("+n.avatar+")"}),ec("div",{class:"message-content"},n.name&&ec("div",{class:"message-name"},n.name),n.header&&ec("div",{class:"message-header"},n.header),ec("div",{class:"message-bubble"},n.textHeader&&ec("div",{class:"message-text-header"},n.textHeader),n.image&&ec("div",{class:"message-image"},n.image),n.imageSrc&&!n.image&&ec("div",{class:"message-image"},ec("img",{src:n.imageSrc})),(n.text||n.isTyping)&&ec("div",{class:"message-text"},n.text||"",n.isTyping&&ec("div",{class:"message-typing-indicator"},ec("div",null),ec("div",null),ec("div",null))),n.textFooter&&ec("div",{class:"message-text-footer"},n.textFooter)),n.footer&&ec("div",{class:"message-footer"},n.footer)))},r.renderMessages=function(e,t){void 0===e&&(e=this.messages),void 0===t&&(t=this.params.newMessagesFirst?"prepend":"append");var n=this,a=e.map((function(e){return n.renderMessage(e)})).join("");n.$el[t](a)},r.isFirstMessage=function(){var e,t=this;return!!t.params.firstMessageRule&&(e=t.params).firstMessageRule.apply(e,arguments)},r.isLastMessage=function(){var e,t=this;return!!t.params.lastMessageRule&&(e=t.params).lastMessageRule.apply(e,arguments)},r.isTailMessage=function(){var e,t=this;return!!t.params.tailMessageRule&&(e=t.params).tailMessageRule.apply(e,arguments)},r.isSameNameMessage=function(){var e,t=this;return!!t.params.sameNameMessageRule&&(e=t.params).sameNameMessageRule.apply(e,arguments)},r.isSameHeaderMessage=function(){var e,t=this;return!!t.params.sameHeaderMessageRule&&(e=t.params).sameHeaderMessageRule.apply(e,arguments)},r.isSameFooterMessage=function(){var e,t=this;return!!t.params.sameFooterMessageRule&&(e=t.params).sameFooterMessageRule.apply(e,arguments)},r.isSameAvatarMessage=function(){var e,t=this;return!!t.params.sameAvatarMessageRule&&(e=t.params).sameAvatarMessageRule.apply(e,arguments)},r.isCustomClassMessage=function(){var e,t=this;if(t.params.customClassMessageRule)return(e=t.params).customClassMessageRule.apply(e,arguments)},r.layout=function(){var e=this;e.$el.find(".message, .messages-title").each((function(t,n){var a=gl(t);e.messages||(e.messages=e.getMessagesData());var r=[],o=e.messages[n],s=e.messages[n-1],i=e.messages[n+1];e.isFirstMessage(o,s,i)&&r.push("message-first"),e.isLastMessage(o,s,i)&&r.push("message-last"),e.isTailMessage(o,s,i)&&r.push("message-tail"),e.isSameNameMessage(o,s,i)&&r.push("message-same-name"),e.isSameHeaderMessage(o,s,i)&&r.push("message-same-header"),e.isSameFooterMessage(o,s,i)&&r.push("message-same-footer"),e.isSameAvatarMessage(o,s,i)&&r.push("message-same-avatar");var l=e.isCustomClassMessage(o,s,i);l&&l.length&&("string"==typeof l&&(l=l.split(" ")),l.forEach((function(e){r.push(e)}))),a.removeClass("message-first message-last message-tail message-same-name message-same-header message-same-footer message-same-avatar"),r.forEach((function(e){a.addClass(e)}))}))},r.clear=function(){this.messages=[],this.$el.html("")},r.removeMessage=function(e,t){void 0===t&&(t=!0);var n,a,r=this;return"number"==typeof e?(n=e,a=r.$el.find(".message, .messages-title").eq(n)):r.messages&&r.messages.indexOf(e)>=0?(n=r.messages.indexOf(e),a=r.$el.children().eq(n)):n=(a=gl(e)).index(),0===a.length||(a.remove(),r.messages.splice(n,1),r.params.autoLayout&&t&&r.layout()),r},r.removeMessages=function(e,t){void 0===t&&(t=!0);var n=this;if(Array.isArray(e)){var a=[];e.forEach((function(e){a.push(n.$el.find(".message, .messages-title").eq(e))})),a.forEach((function(e){n.removeMessage(e,!1)}))}else gl(e).each((function(e){n.removeMessage(e,!1)}));return n.params.autoLayout&&t&&n.layout(),n},r.addMessage=function(){for(var e,t,n,a=this,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return"boolean"==typeof o[1]?(e=o[0],t=o[1],n=o[2]):(e=o[0],n=o[1],t=o[2]),void 0===t&&(t=!0),void 0===n&&(n=a.params.newMessagesFirst?"prepend":"append"),a.addMessages([e],t,n)},r.setScrollData=function(){var e=this,t=e.pageContentEl.scrollHeight,n=e.pageContentEl.offsetHeight,a=e.pageContentEl.scrollTop;return e.scrollData={scrollHeightBefore:t,heightBefore:n,scrollBefore:a},{scrollHeightBefore:t,heightBefore:n,scrollBefore:a}},r.addMessages=function(){for(var e,t,n,a=this,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];"boolean"==typeof o[1]?(e=o[0],t=o[1],n=o[2]):(e=o[0],n=o[1],t=o[2]),void 0===t&&(t=!0),void 0===n&&(n=a.params.newMessagesFirst?"prepend":"append");var i=a.setScrollData(),l=i.scrollHeightBefore,u=i.scrollBefore,c="",p=a.messages.filter((function(e){return e.isTyping}))[0];e.forEach((function(e){p?"append"===n?a.messages.splice(a.messages.indexOf(p),0,e):a.messages.splice(a.messages.indexOf(p)+1,0,e):a.messages["append"===n?"push":"unshift"](e),c+=a.renderMessage(e)}));var d=gl(c);return t&&("append"!==n||a.params.newMessagesFirst||d.addClass("message-appear-from-bottom"),"prepend"===n&&a.params.newMessagesFirst&&d.addClass("message-appear-from-top")),p?"append"===n?d.insertBefore(a.$el.find(".message-typing")):d.insertAfter(a.$el.find(".message-typing")):a.$el[n](d),a.params.autoLayout&&a.layout(),"prepend"!==n||p||(a.pageContentEl.scrollTop=u+(a.pageContentEl.scrollHeight-l)),a.params.scrollMessages&&("append"===n&&!a.params.newMessagesFirst||"prepend"===n&&a.params.newMessagesFirst&&!p)&&a.scrollWithEdgeCheck(t),a},r.showTyping=function(e){void 0===e&&(e={});var t=this,n=t.messages.filter((function(e){return e.isTyping}))[0];return n&&t.removeMessage(t.messages.indexOf(n)),t.addMessage(cs({type:"received",isTyping:!0},e)),t},r.hideTyping=function(){var e,t,n=this;if(n.messages.forEach((function(t,n){t.isTyping&&(e=n)})),void 0!==e&&n.$el.find(".message").eq(e).hasClass("message-typing")&&(t=!0,n.removeMessage(e)),!t){var a=n.$el.find(".message-typing");a.length&&n.removeMessage(a)}return n},r.scrollWithEdgeCheck=function(e){var t=this,n=t.scrollData,a=n.scrollBefore,r=n.scrollHeightBefore,o=n.heightBefore;if(t.params.scrollMessagesOnEdge){var s=!1;t.params.newMessagesFirst&&0===a&&(s=!0),!t.params.newMessagesFirst&&a-(r-o)>=-10&&(s=!0),s&&t.scroll(e?void 0:0)}else t.scroll(e?void 0:0)},r.scroll=function(e,t){void 0===e&&(e=300);var n,a=this,r=a.pageContentEl.scrollTop;if(void 0!==t)n=t;else if((n=a.params.newMessagesFirst?0:a.pageContentEl.scrollHeight-a.pageContentEl.offsetHeight)===r)return a;return a.$pageContentEl.scrollTop(n,e),a},r.init=function(){var e=this;e.messages&&0!==e.messages.length||(e.messages=e.getMessagesData()),e.params.messages&&e.params.messages.length&&e.renderMessages(),e.params.autoLayout&&e.layout(),e.params.scrollMessages&&e.scroll(0)},r.destroy=function(){var e=this;e.emit("local::beforeDestroy messagesBeforeDestroy",e),e.$el.trigger("messages:beforedestroy"),e.$el[0]&&(e.$el[0].f7Messages=null,delete e.$el[0].f7Messages),Qo(e)},a}(Ts),_d=Fd,Ld={name:"messages",static:{Messages:_d},create:function(){this.messages=wl({defaultSelector:".messages",constructor:_d,app:this,domProp:"f7Messages",addMethods:"renderMessages layout scroll clear removeMessage removeMessages addMessage addMessages".split(" ")})},on:{tabBeforeRemove:function(e){var t=this;gl(e).find(".messages-init").each((function(e){t.messages.destroy(e)}))},tabMounted:function(e){var t=this;gl(e).find(".messages-init").each((function(e){t.messages.create({el:e})}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".messages-init").each((function(e){t.messages.destroy(e)}))},pageInit:function(e){var t=this;e.$el.find(".messages-init").each((function(e){t.messages.create({el:e})}))}},vnode:{"messages-init":{insert:function(e){var t=e.elm;this.messages.create({el:t})},destroy:function(e){var t=e.elm;this.messages.destroy(t)}}}};function zd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vd(e,t){return Vd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Vd(e,t)}var Wd=function(e){var t,n;function a(t,n){var a;void 0===n&&(n={});var r=zd(a=e.call(this,n,[t])||this),o={top:!1,topOffset:0,bottomOffset:0,attachments:[],renderAttachments:void 0,renderAttachment:void 0,maxHeight:null,resizePage:!0};r.useModulesParams(o),r.params=cs(o,n);var s=gl(r.params.el);if(0===s.length)return r||zd(a);if(s[0].f7Messagebar)return s[0].f7Messagebar||zd(a);s[0].f7Messagebar=r;var i,l=s.parents(".page").eq(0),u=l.find(".page-content").eq(0),c=s.find(".messagebar-area");i=r.params.textareaEl?gl(r.params.textareaEl):s.find("textarea");var p=s.find(".messagebar-attachments"),d=s.find(".messagebar-sheet");function h(){r.params.resizePage&&r.resizePage()}function f(e){e.preventDefault()}function m(e){var t=gl(this).index();gl(e.target).closest(".messagebar-attachment-delete").length?(gl(this).trigger("messagebar:attachmentdelete",t),r.emit("local::attachmentDelete messagebarAttachmentDelete",r,this,t)):(gl(this).trigger("messagebar:attachmentclick",t),r.emit("local::attachmentClick messagebarAttachmentClick",r,this,t))}function g(){r.checkEmptyState(),r.$el.trigger("messagebar:change"),r.emit("local::change messagebarChange",r)}function v(){r.sheetHide(),r.$el.addClass("messagebar-focused"),r.$el.trigger("messagebar:focus"),r.emit("local::focus messagebarFocus",r)}function b(){r.$el.removeClass("messagebar-focused"),r.$el.trigger("messagebar:blur"),r.emit("local::blur messagebarBlur",r)}return r.params.top&&s.addClass("messagebar-top"),cs(r,{$el:s,el:s[0],$areaEl:c,areaEl:c[0],$textareaEl:i,textareaEl:i[0],$attachmentsEl:p,attachmentsEl:p[0],attachmentsVisible:p.hasClass("messagebar-attachments-visible"),$sheetEl:d,sheetEl:d[0],sheetVisible:d.hasClass("messagebar-sheet-visible"),$pageEl:l,pageEl:l[0],$pageContentEl:u,pageContentEl:u,top:s.hasClass("messagebar-top")||r.params.top,attachments:[]}),r.attachEvents=function(){s.on("textarea:resize",h),s.on("submit",f),s.on("click",".messagebar-attachment",m),i.on("change input",g),i.on("focus",v),i.on("blur",b),t.on("resize",h)},r.detachEvents=function(){s.off("textarea:resize",h),s.off("submit",f),s.off("click",".messagebar-attachment",m),i.off("change input",g),i.off("focus",v),i.off("blur",b),t.off("resize",h)},r.useModules(),r.init(),r||zd(a)}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,Vd(t,n);var r=a.prototype;return r.focus=function(){return this.$textareaEl.focus(),this},r.blur=function(){return this.$textareaEl.blur(),this},r.clear=function(){return this.$textareaEl.val("").trigger("change"),this},r.getValue=function(){return this.$textareaEl.val().trim()},r.setValue=function(e){return this.$textareaEl.val(e).trigger("change"),this},r.setPlaceholder=function(e){return this.$textareaEl.attr("placeholder",e),this},r.resizePage=function(){var e=this,t=e.params,n=e.$el,a=e.top,r=e.$pageEl,o=e.$pageContentEl,s=e.$areaEl,i=e.$textareaEl,l=e.$sheetEl,u=e.$attachmentsEl,c=n[0].offsetHeight,p=t.maxHeight;if(a);else{var d=parseInt(o.css("padding-bottom"),10),h=c+t.bottomOffset;if(h!==d&&o.length){var f=parseInt(o.css("padding-top"),10),m=o[0].scrollHeight,g=o[0].offsetHeight,v=o[0].scrollTop===m-g;p||(p=r[0].offsetHeight-f-l.outerHeight()-u.outerHeight()-parseInt(s.css("margin-top"),10)-parseInt(s.css("margin-bottom"),10)),i.css("max-height",p+"px"),o.css("padding-bottom",h+"px"),v&&o.scrollTop(o[0].scrollHeight-g),n.trigger("messagebar:resizepage"),e.emit("local::resizePage messagebarResizePage",e)}}},r.checkEmptyState=function(){var e=this.$el,t=this.$textareaEl.val().trim();t&&t.length?e.addClass("messagebar-with-value"):e.removeClass("messagebar-with-value")},r.attachmentsCreate=function(e){void 0===e&&(e="");var t=this,n=gl('<div class="messagebar-attachments">'+e+"</div>");return n.insertBefore(t.$textareaEl),cs(t,{$attachmentsEl:n,attachmentsEl:n[0]}),t},r.attachmentsShow=function(e){void 0===e&&(e="");var t=this;return t.$attachmentsEl=t.$el.find(".messagebar-attachments"),0===t.$attachmentsEl.length&&t.attachmentsCreate(e),t.$el.addClass("messagebar-attachments-visible"),t.attachmentsVisible=!0,t.params.resizePage&&t.resizePage(),t},r.attachmentsHide=function(){var e=this;return e.$el.removeClass("messagebar-attachments-visible"),e.attachmentsVisible=!1,e.params.resizePage&&e.resizePage(),e},r.attachmentsToggle=function(){var e=this;return e.attachmentsVisible?e.attachmentsHide():e.attachmentsShow(),e},r.renderAttachment=function(e){var t=this;return t.params.renderAttachment?t.params.renderAttachment.call(t,e):'\n      <div class="messagebar-attachment">\n        <img src="'+e+'">\n        <span class="messagebar-attachment-delete"></span>\n      </div>\n    '},r.renderAttachments=function(){var e,t=this;e=t.params.renderAttachments?t.params.renderAttachments.call(t,t.attachments):""+t.attachments.map((function(e){return t.renderAttachment(e)})).join(""),0===t.$attachmentsEl.length?t.attachmentsCreate(e):t.$attachmentsEl.html(e)},r.sheetCreate=function(e){void 0===e&&(e="");var t=this,n=gl('<div class="messagebar-sheet">'+e+"</div>");return t.$el.append(n),cs(t,{$sheetEl:n,sheetEl:n[0]}),t},r.sheetShow=function(e){void 0===e&&(e="");var t=this;return t.$sheetEl=t.$el.find(".messagebar-sheet"),0===t.$sheetEl.length&&t.sheetCreate(e),t.$el.addClass("messagebar-sheet-visible"),t.sheetVisible=!0,t.params.resizePage&&t.resizePage(),t},r.sheetHide=function(){var e=this;return e.$el.removeClass("messagebar-sheet-visible"),e.sheetVisible=!1,e.params.resizePage&&e.resizePage(),e},r.sheetToggle=function(){var e=this;return e.sheetVisible?e.sheetHide():e.sheetShow(),e},r.init=function(){var e=this;return e.attachEvents(),e.checkEmptyState(),e},r.destroy=function(){var e=this;e.emit("local::beforeDestroy messagebarBeforeDestroy",e),e.$el.trigger("messagebar:beforedestroy"),e.detachEvents(),e.$el[0]&&(e.$el[0].f7Messagebar=null,delete e.$el[0].f7Messagebar),Qo(e)},a}(Ts),Hd=Wd,jd={name:"messagebar",static:{Messagebar:Hd},create:function(){this.messagebar=wl({defaultSelector:".messagebar",constructor:Hd,app:this,domProp:"f7Messagebar",addMethods:"clear getValue setValue setPlaceholder resizePage focus blur attachmentsCreate attachmentsShow attachmentsHide attachmentsToggle renderAttachments sheetCreate sheetShow sheetHide sheetToggle".split(" ")})},on:{tabBeforeRemove:function(e){var t=this;gl(e).find(".messagebar-init").each((function(e){t.messagebar.destroy(e)}))},tabMounted:function(e){var t=this;gl(e).find(".messagebar-init").each((function(e){t.messagebar.create(cs({el:e},gl(e).dataset()))}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".messagebar-init").each((function(e){t.messagebar.destroy(e)}))},pageInit:function(e){var t=this;e.$el.find(".messagebar-init").each((function(e){t.messagebar.create(cs({el:e},gl(e).dataset()))}))}},vnode:{"messagebar-init":{insert:function(e){var t=e.elm;this.messagebar.create(cs({el:t},gl(t).dataset()))},destroy:function(e){var t=e.elm;this.messagebar.destroy(t)}}}},Ud={addClass:_s,removeClass:Ls,hasClass:Vs,toggleClass:zs,attr:Ws,removeAttr:Hs,transform:Ks,transition:Js,on:Zs,off:Qs,trigger:ti,transitionEnd:ni,outerWidth:oi,outerHeight:ii,styles:pi,offset:li,css:di,each:hi,html:mi,text:gi,is:vi,index:bi,eq:yi,append:wi,prepend:ki,next:$i,nextAll:Ti,prev:Ii,prevAll:Ni,parent:Ri,parents:Ai,closest:Mi,find:Bi,children:Pi,filter:fi,remove:Di};Object.keys(Ud).forEach((function(e){Object.defineProperty(Fs.fn,e,{value:Ud[e],writable:!0})}));var Gd,qd,Xd,Yd=Fs;function Kd(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function Jd(){return Date.now()}function Zd(e,t){void 0===t&&(t="x");var n,a,r,o=Ho(),s=function(e){var t,n=Ho();return n.getComputedStyle&&(t=n.getComputedStyle(e,null)),!t&&e.currentStyle&&(t=e.currentStyle),t||(t=e.style),t}(e);return o.WebKitCSSMatrix?((a=s.transform||s.webkitTransform).split(",").length>6&&(a=a.split(", ").map((function(e){return e.replace(",",".")})).join(", ")),r=new o.WebKitCSSMatrix("none"===a?"":a)):n=(r=s.MozTransform||s.OTransform||s.MsTransform||s.msTransform||s.transform||s.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===t&&(a=o.WebKitCSSMatrix?r.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===t&&(a=o.WebKitCSSMatrix?r.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),a||0}function Qd(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function eh(e){return"undefined"!=typeof window&&void 0!==window.HTMLElement?e instanceof HTMLElement:e&&(1===e.nodeType||11===e.nodeType)}function th(){for(var e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"],n=1;n<arguments.length;n+=1){var a=n<0||arguments.length<=n?void 0:arguments[n];if(null!=a&&!eh(a))for(var r=Object.keys(Object(a)).filter((function(e){return t.indexOf(e)<0})),o=0,s=r.length;o<s;o+=1){var i=r[o],l=Object.getOwnPropertyDescriptor(a,i);void 0!==l&&l.enumerable&&(Qd(e[i])&&Qd(a[i])?a[i].__swiper__?e[i]=a[i]:th(e[i],a[i]):!Qd(e[i])&&Qd(a[i])?(e[i]={},a[i].__swiper__?e[i]=a[i]:th(e[i],a[i])):e[i]=a[i])}}return e}function nh(e,t){Object.keys(t).forEach((function(n){Qd(t[n])&&Object.keys(t[n]).forEach((function(a){"function"==typeof t[n][a]&&(t[n][a]=t[n][a].bind(e))})),e[n]=t[n]}))}function ah(e){return void 0===e&&(e=""),"."+e.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,".")}function rh(e,t,n,a){var r=Vo();return n&&Object.keys(a).forEach((function(n){if(!t[n]&&!0===t.auto){var o=r.createElement("div");o.className=a[n],e.append(o),t[n]=o}})),t}function oh(){return Gd||(Gd=function(){var e=Ho(),t=Vo();return{touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),pointerEvents:!!e.PointerEvent&&"maxTouchPoints"in e.navigator&&e.navigator.maxTouchPoints>=0,observer:"MutationObserver"in e||"WebkitMutationObserver"in e,passiveListener:function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});e.addEventListener("testPassiveListener",null,n)}catch(e){}return t}(),gestures:"ongesturestart"in e}}()),Gd}function sh(e){return void 0===e&&(e={}),qd||(qd=function(e){var t=(void 0===e?{}:e).userAgent,n=oh(),a=Ho(),r=a.navigator.platform,o=t||a.navigator.userAgent,s={ios:!1,android:!1},i=a.screen.width,l=a.screen.height,u=o.match(/(Android);?[\s\/]+([\d.]+)?/),c=o.match(/(iPad).*OS\s([\d_]+)/),p=o.match(/(iPod)(.*OS\s([\d_]+))?/),d=!c&&o.match(/(iPhone\sOS|iOS)\s([\d_]+)/),h="Win32"===r,f="MacIntel"===r;return!c&&f&&n.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(i+"x"+l)>=0&&((c=o.match(/(Version)\/([\d.]+)/))||(c=[0,1,"13_0_0"]),f=!1),u&&!h&&(s.os="android",s.android=!0),(c||d||p)&&(s.os="ios",s.ios=!0),s}(e)),qd}function ih(){return Xd||(Xd=function(){var e,t=Ho();return{isEdge:!!t.navigator.userAgent.match(/Edge/g),isSafari:(e=t.navigator.userAgent.toLowerCase(),e.indexOf("safari")>=0&&e.indexOf("chrome")<0&&e.indexOf("android")<0),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(t.navigator.userAgent)}}()),Xd}var lh={name:"resize",create:function(){var e=this;th(e,{resize:{observer:null,createObserver:function(){e&&!e.destroyed&&e.initialized&&(e.resize.observer=new ResizeObserver((function(t){var n=e.width,a=e.height,r=n,o=a;t.forEach((function(t){var n=t.contentBoxSize,a=t.contentRect,s=t.target;s&&s!==e.el||(r=a?a.width:(n[0]||n).inlineSize,o=a?a.height:(n[0]||n).blockSize)})),r===n&&o===a||e.resize.resizeHandler()})),e.resize.observer.observe(e.el))},removeObserver:function(){e.resize.observer&&e.resize.observer.unobserve&&e.el&&(e.resize.observer.unobserve(e.el),e.resize.observer=null)},resizeHandler:function(){e&&!e.destroyed&&e.initialized&&(e.emit("beforeResize"),e.emit("resize"))},orientationChangeHandler:function(){e&&!e.destroyed&&e.initialized&&e.emit("orientationchange")}}})},on:{init:function(e){var t=Ho();e.params.resizeObserver&&void 0!==Ho().ResizeObserver?e.resize.createObserver():(t.addEventListener("resize",e.resize.resizeHandler),t.addEventListener("orientationchange",e.resize.orientationChangeHandler))},destroy:function(e){var t=Ho();e.resize.removeObserver(),t.removeEventListener("resize",e.resize.resizeHandler),t.removeEventListener("orientationchange",e.resize.orientationChangeHandler)}}};function uh(){return uh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},uh.apply(this,arguments)}var ch={attach:function(e,t){void 0===t&&(t={});var n=Ho(),a=this,r=new(n.MutationObserver||n.WebkitMutationObserver)((function(e){if(1!==e.length){var t=function(){a.emit("observerUpdate",e[0])};n.requestAnimationFrame?n.requestAnimationFrame(t):n.setTimeout(t,0)}else a.emit("observerUpdate",e[0])}));r.observe(e,{attributes:void 0===t.attributes||t.attributes,childList:void 0===t.childList||t.childList,characterData:void 0===t.characterData||t.characterData}),a.observer.observers.push(r)},init:function(){var e=this;if(e.support.observer&&e.params.observer){if(e.params.observeParents)for(var t=e.$el.parents(),n=0;n<t.length;n+=1)e.observer.attach(t[n]);e.observer.attach(e.$el[0],{childList:e.params.observeSlideChildren}),e.observer.attach(e.$wrapperEl[0],{attributes:!1})}},destroy:function(){this.observer.observers.forEach((function(e){e.disconnect()})),this.observer.observers=[]}},ph={name:"observer",params:{observer:!1,observeParents:!1,observeSlideChildren:!1},create:function(){nh(this,{observer:uh({},ch,{observers:[]})})},on:{init:function(e){e.observer.init()},destroy:function(e){e.observer.destroy()}}},dh={on:function(e,t,n){var a=this;if("function"!=typeof t)return a;var r=n?"unshift":"push";return e.split(" ").forEach((function(e){a.eventsListeners[e]||(a.eventsListeners[e]=[]),a.eventsListeners[e][r](t)})),a},once:function(e,t,n){var a=this;if("function"!=typeof t)return a;function r(){a.off(e,r),r.__emitterProxy&&delete r.__emitterProxy;for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];t.apply(a,o)}return r.__emitterProxy=t,a.on(e,r,n)},onAny:function(e,t){var n=this;if("function"!=typeof e)return n;var a=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[a](e),n},offAny:function(e){var t=this;if(!t.eventsAnyListeners)return t;var n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off:function(e,t){var n=this;return n.eventsListeners?(e.split(" ").forEach((function(e){void 0===t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach((function(a,r){(a===t||a.__emitterProxy&&a.__emitterProxy===t)&&n.eventsListeners[e].splice(r,1)}))})),n):n},emit:function(){var e,t,n,a=this;if(!a.eventsListeners)return a;for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];"string"==typeof o[0]||Array.isArray(o[0])?(e=o[0],t=o.slice(1,o.length),n=a):(e=o[0].events,t=o[0].data,n=o[0].context||a),t.unshift(n);var i=Array.isArray(e)?e:e.split(" ");return i.forEach((function(e){a.eventsAnyListeners&&a.eventsAnyListeners.length&&a.eventsAnyListeners.forEach((function(a){a.apply(n,[e].concat(t))})),a.eventsListeners&&a.eventsListeners[e]&&a.eventsListeners[e].forEach((function(e){e.apply(n,t)}))})),a}};var hh={updateSize:function(){var e,t,n=this,a=n.$el;e=void 0!==n.params.width&&null!==n.params.width?n.params.width:a[0].clientWidth,t=void 0!==n.params.height&&null!==n.params.height?n.params.height:a[0].clientHeight,0===e&&n.isHorizontal()||0===t&&n.isVertical()||(e=e-parseInt(a.css("padding-left")||0,10)-parseInt(a.css("padding-right")||0,10),t=t-parseInt(a.css("padding-top")||0,10)-parseInt(a.css("padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),th(n,{width:e,height:t,size:n.isHorizontal()?e:t}))},updateSlides:function(){var e=this;function t(t){return e.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}function n(e,n){return parseFloat(e.getPropertyValue(t(n))||0)}var a=e.params,r=e.$wrapperEl,o=e.size,s=e.rtlTranslate,i=e.wrongRTL,l=e.virtual&&a.virtual.enabled,u=l?e.virtual.slides.length:e.slides.length,c=r.children("."+e.params.slideClass),p=l?e.virtual.slides.length:c.length,d=[],h=[],f=[],m=a.slidesOffsetBefore;"function"==typeof m&&(m=a.slidesOffsetBefore.call(e));var g=a.slidesOffsetAfter;"function"==typeof g&&(g=a.slidesOffsetAfter.call(e));var v=e.snapGrid.length,b=e.slidesGrid.length,y=a.spaceBetween,w=-m,x=0,k=0;if(void 0!==o){var C,E;"string"==typeof y&&y.indexOf("%")>=0&&(y=parseFloat(y.replace("%",""))/100*o),e.virtualSize=-y,s?c.css({marginLeft:"",marginBottom:"",marginTop:""}):c.css({marginRight:"",marginBottom:"",marginTop:""}),a.slidesPerColumn>1&&(C=Math.floor(p/a.slidesPerColumn)===p/e.params.slidesPerColumn?p:Math.ceil(p/a.slidesPerColumn)*a.slidesPerColumn,"auto"!==a.slidesPerView&&"row"===a.slidesPerColumnFill&&(C=Math.max(C,a.slidesPerView*a.slidesPerColumn)));for(var S,$,T,I=a.slidesPerColumn,N=C/I,O=Math.floor(p/a.slidesPerColumn),R=0;R<p;R+=1){E=0;var A=c.eq(R);if(a.slidesPerColumn>1){var M=void 0,B=void 0,P=void 0;if("row"===a.slidesPerColumnFill&&a.slidesPerGroup>1){var D=Math.floor(R/(a.slidesPerGroup*a.slidesPerColumn)),F=R-a.slidesPerColumn*a.slidesPerGroup*D,_=0===D?a.slidesPerGroup:Math.min(Math.ceil((p-D*I*a.slidesPerGroup)/I),a.slidesPerGroup);M=(B=F-(P=Math.floor(F/_))*_+D*a.slidesPerGroup)+P*C/I,A.css({"-webkit-box-ordinal-group":M,"-moz-box-ordinal-group":M,"-ms-flex-order":M,"-webkit-order":M,order:M})}else"column"===a.slidesPerColumnFill?(P=R-(B=Math.floor(R/I))*I,(B>O||B===O&&P===I-1)&&(P+=1)>=I&&(P=0,B+=1)):B=R-(P=Math.floor(R/N))*N;A.css(t("margin-top"),0!==P?a.spaceBetween&&a.spaceBetween+"px":"")}if("none"!==A.css("display")){if("auto"===a.slidesPerView){var L=getComputedStyle(A[0]),z=A[0].style.transform,V=A[0].style.webkitTransform;if(z&&(A[0].style.transform="none"),V&&(A[0].style.webkitTransform="none"),a.roundLengths)E=e.isHorizontal()?A.outerWidth(!0):A.outerHeight(!0);else{var W=n(L,"width"),H=n(L,"padding-left"),j=n(L,"padding-right"),U=n(L,"margin-left"),G=n(L,"margin-right"),q=L.getPropertyValue("box-sizing");if(q&&"border-box"===q)E=W+U+G;else{var X=A[0],Y=X.clientWidth;E=W+H+j+U+G+(X.offsetWidth-Y)}}z&&(A[0].style.transform=z),V&&(A[0].style.webkitTransform=V),a.roundLengths&&(E=Math.floor(E))}else E=(o-(a.slidesPerView-1)*y)/a.slidesPerView,a.roundLengths&&(E=Math.floor(E)),c[R]&&(c[R].style[t("width")]=E+"px");c[R]&&(c[R].swiperSlideSize=E),f.push(E),a.centeredSlides?(w=w+E/2+x/2+y,0===x&&0!==R&&(w=w-o/2-y),0===R&&(w=w-o/2-y),Math.abs(w)<.001&&(w=0),a.roundLengths&&(w=Math.floor(w)),k%a.slidesPerGroup==0&&d.push(w),h.push(w)):(a.roundLengths&&(w=Math.floor(w)),(k-Math.min(e.params.slidesPerGroupSkip,k))%e.params.slidesPerGroup==0&&d.push(w),h.push(w),w=w+E+y),e.virtualSize+=E+y,x=E,k+=1}}if(e.virtualSize=Math.max(e.virtualSize,o)+g,s&&i&&("slide"===a.effect||"coverflow"===a.effect)&&r.css({width:e.virtualSize+a.spaceBetween+"px"}),a.setWrapperSize)r.css((($={})[t("width")]=e.virtualSize+a.spaceBetween+"px",$));if(a.slidesPerColumn>1)if(e.virtualSize=(E+a.spaceBetween)*C,e.virtualSize=Math.ceil(e.virtualSize/a.slidesPerColumn)-a.spaceBetween,r.css(((T={})[t("width")]=e.virtualSize+a.spaceBetween+"px",T)),a.centeredSlides){S=[];for(var K=0;K<d.length;K+=1){var J=d[K];a.roundLengths&&(J=Math.floor(J)),d[K]<e.virtualSize+d[0]&&S.push(J)}d=S}if(!a.centeredSlides){S=[];for(var Z=0;Z<d.length;Z+=1){var Q=d[Z];a.roundLengths&&(Q=Math.floor(Q)),d[Z]<=e.virtualSize-o&&S.push(Q)}d=S,Math.floor(e.virtualSize-o)-Math.floor(d[d.length-1])>1&&d.push(e.virtualSize-o)}if(0===d.length&&(d=[0]),0!==a.spaceBetween){var ee,te=e.isHorizontal()&&s?"marginLeft":t("marginRight");c.filter((function(e,t){return!a.cssMode||t!==c.length-1})).css(((ee={})[te]=y+"px",ee))}if(a.centeredSlides&&a.centeredSlidesBounds){var ne=0;f.forEach((function(e){ne+=e+(a.spaceBetween?a.spaceBetween:0)}));var ae=(ne-=a.spaceBetween)-o;d=d.map((function(e){return e<0?-m:e>ae?ae+g:e}))}if(a.centerInsufficientSlides){var re=0;if(f.forEach((function(e){re+=e+(a.spaceBetween?a.spaceBetween:0)})),(re-=a.spaceBetween)<o){var oe=(o-re)/2;d.forEach((function(e,t){d[t]=e-oe})),h.forEach((function(e,t){h[t]=e+oe}))}}th(e,{slides:c,snapGrid:d,slidesGrid:h,slidesSizesGrid:f}),p!==u&&e.emit("slidesLengthChange"),d.length!==v&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),h.length!==b&&e.emit("slidesGridLengthChange"),(a.watchSlidesProgress||a.watchSlidesVisibility)&&e.updateSlidesOffset()}},updateAutoHeight:function(e){var t,n=this,a=[],r=n.virtual&&n.params.virtual.enabled,o=0;"number"==typeof e?n.setTransition(e):!0===e&&n.setTransition(n.params.speed);var s=function(e){return r?n.slides.filter((function(t){return parseInt(t.getAttribute("data-swiper-slide-index"),10)===e}))[0]:n.slides.eq(e)[0]};if("auto"!==n.params.slidesPerView&&n.params.slidesPerView>1)if(n.params.centeredSlides)n.visibleSlides.each((function(e){a.push(e)}));else for(t=0;t<Math.ceil(n.params.slidesPerView);t+=1){var i=n.activeIndex+t;if(i>n.slides.length&&!r)break;a.push(s(i))}else a.push(s(n.activeIndex));for(t=0;t<a.length;t+=1)if(void 0!==a[t]){var l=a[t].offsetHeight;o=l>o?l:o}o&&n.$wrapperEl.css("height",o+"px")},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);var t=this,n=t.params,a=t.slides,r=t.rtlTranslate;if(0!==a.length){void 0===a[0].swiperSlideOffset&&t.updateSlidesOffset();var o=-e;r&&(o=e),a.removeClass(n.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(var s=0;s<a.length;s+=1){var i=a[s],l=(o+(n.centeredSlides?t.minTranslate():0)-i.swiperSlideOffset)/(i.swiperSlideSize+n.spaceBetween);if(n.watchSlidesVisibility||n.centeredSlides&&n.autoHeight){var u=-(o-i.swiperSlideOffset),c=u+t.slidesSizesGrid[s];(u>=0&&u<t.size-1||c>1&&c<=t.size||u<=0&&c>=t.size)&&(t.visibleSlides.push(i),t.visibleSlidesIndexes.push(s),a.eq(s).addClass(n.slideVisibleClass))}i.progress=r?-l:l}t.visibleSlides=Yd(t.visibleSlides)}},updateProgress:function(e){var t=this;if(void 0===e){var n=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*n||0}var a=t.params,r=t.maxTranslate()-t.minTranslate(),o=t.progress,s=t.isBeginning,i=t.isEnd,l=s,u=i;0===r?(o=0,s=!0,i=!0):(s=(o=(e-t.minTranslate())/r)<=0,i=o>=1),th(t,{progress:o,isBeginning:s,isEnd:i}),(a.watchSlidesProgress||a.watchSlidesVisibility||a.centeredSlides&&a.autoHeight)&&t.updateSlidesProgress(e),s&&!l&&t.emit("reachBeginning toEdge"),i&&!u&&t.emit("reachEnd toEdge"),(l&&!s||u&&!i)&&t.emit("fromEdge"),t.emit("progress",o)},updateSlidesClasses:function(){var e,t=this,n=t.slides,a=t.params,r=t.$wrapperEl,o=t.activeIndex,s=t.realIndex,i=t.virtual&&a.virtual.enabled;n.removeClass(a.slideActiveClass+" "+a.slideNextClass+" "+a.slidePrevClass+" "+a.slideDuplicateActiveClass+" "+a.slideDuplicateNextClass+" "+a.slideDuplicatePrevClass),(e=i?t.$wrapperEl.find("."+a.slideClass+'[data-swiper-slide-index="'+o+'"]'):n.eq(o)).addClass(a.slideActiveClass),a.loop&&(e.hasClass(a.slideDuplicateClass)?r.children("."+a.slideClass+":not(."+a.slideDuplicateClass+')[data-swiper-slide-index="'+s+'"]').addClass(a.slideDuplicateActiveClass):r.children("."+a.slideClass+"."+a.slideDuplicateClass+'[data-swiper-slide-index="'+s+'"]').addClass(a.slideDuplicateActiveClass));var l=e.nextAll("."+a.slideClass).eq(0).addClass(a.slideNextClass);a.loop&&0===l.length&&(l=n.eq(0)).addClass(a.slideNextClass);var u=e.prevAll("."+a.slideClass).eq(0).addClass(a.slidePrevClass);a.loop&&0===u.length&&(u=n.eq(-1)).addClass(a.slidePrevClass),a.loop&&(l.hasClass(a.slideDuplicateClass)?r.children("."+a.slideClass+":not(."+a.slideDuplicateClass+')[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(a.slideDuplicateNextClass):r.children("."+a.slideClass+"."+a.slideDuplicateClass+'[data-swiper-slide-index="'+l.attr("data-swiper-slide-index")+'"]').addClass(a.slideDuplicateNextClass),u.hasClass(a.slideDuplicateClass)?r.children("."+a.slideClass+":not(."+a.slideDuplicateClass+')[data-swiper-slide-index="'+u.attr("data-swiper-slide-index")+'"]').addClass(a.slideDuplicatePrevClass):r.children("."+a.slideClass+"."+a.slideDuplicateClass+'[data-swiper-slide-index="'+u.attr("data-swiper-slide-index")+'"]').addClass(a.slideDuplicatePrevClass)),t.emitSlidesClasses()},updateActiveIndex:function(e){var t,n=this,a=n.rtlTranslate?n.translate:-n.translate,r=n.slidesGrid,o=n.snapGrid,s=n.params,i=n.activeIndex,l=n.realIndex,u=n.snapIndex,c=e;if(void 0===c){for(var p=0;p<r.length;p+=1)void 0!==r[p+1]?a>=r[p]&&a<r[p+1]-(r[p+1]-r[p])/2?c=p:a>=r[p]&&a<r[p+1]&&(c=p+1):a>=r[p]&&(c=p);s.normalizeSlideIndex&&(c<0||void 0===c)&&(c=0)}if(o.indexOf(a)>=0)t=o.indexOf(a);else{var d=Math.min(s.slidesPerGroupSkip,c);t=d+Math.floor((c-d)/s.slidesPerGroup)}if(t>=o.length&&(t=o.length-1),c!==i){var h=parseInt(n.slides.eq(c).attr("data-swiper-slide-index")||c,10);th(n,{snapIndex:t,realIndex:h,previousIndex:i,activeIndex:c}),n.emit("activeIndexChange"),n.emit("snapIndexChange"),l!==h&&n.emit("realIndexChange"),(n.initialized||n.params.runCallbacksOnInit)&&n.emit("slideChange")}else t!==u&&(n.snapIndex=t,n.emit("snapIndexChange"))},updateClickedSlide:function(e){var t,n=this,a=n.params,r=Yd(e.target).closest("."+a.slideClass)[0],o=!1;if(r)for(var s=0;s<n.slides.length;s+=1)if(n.slides[s]===r){o=!0,t=s;break}if(!r||!o)return n.clickedSlide=void 0,void(n.clickedIndex=void 0);n.clickedSlide=r,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(Yd(r).attr("data-swiper-slide-index"),10):n.clickedIndex=t,a.slideToClickedSlide&&void 0!==n.clickedIndex&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}};var fh={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");var t=this,n=t.params,a=t.rtlTranslate,r=t.translate,o=t.$wrapperEl;if(n.virtualTranslate)return a?-r:r;if(n.cssMode)return r;var s=Zd(o[0],e);return a&&(s=-s),s||0},setTranslate:function(e,t){var n=this,a=n.rtlTranslate,r=n.params,o=n.$wrapperEl,s=n.wrapperEl,i=n.progress,l=0,u=0;n.isHorizontal()?l=a?-e:e:u=e,r.roundLengths&&(l=Math.floor(l),u=Math.floor(u)),r.cssMode?s[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-l:-u:r.virtualTranslate||o.transform("translate3d("+l+"px, "+u+"px, 0px)"),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?l:u;var c=n.maxTranslate()-n.minTranslate();(0===c?0:(e-n.minTranslate())/c)!==i&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,n,a,r){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),void 0===a&&(a=!0);var o=this,s=o.params,i=o.wrapperEl;if(o.animating&&s.preventInteractionOnTransition)return!1;var l,u=o.minTranslate(),c=o.maxTranslate();if(l=a&&e>u?u:a&&e<c?c:e,o.updateProgress(l),s.cssMode){var p,d=o.isHorizontal();if(0===t)i[d?"scrollLeft":"scrollTop"]=-l;else if(i.scrollTo)i.scrollTo(((p={})[d?"left":"top"]=-l,p.behavior="smooth",p));else i[d?"scrollLeft":"scrollTop"]=-l;return!0}return 0===t?(o.setTransition(0),o.setTranslate(l),n&&(o.emit("beforeTransitionStart",t,r),o.emit("transitionEnd"))):(o.setTransition(t),o.setTranslate(l),n&&(o.emit("beforeTransitionStart",t,r),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(e){o&&!o.destroyed&&e.target===this&&(o.$wrapperEl[0].removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.$wrapperEl[0].removeEventListener("webkitTransitionEnd",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,n&&o.emit("transitionEnd"))}),o.$wrapperEl[0].addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.$wrapperEl[0].addEventListener("webkitTransitionEnd",o.onTranslateToWrapperTransitionEnd))),!0}};var mh={setTransition:function(e,t){var n=this;n.params.cssMode||n.$wrapperEl.transition(e),n.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);var n=this,a=n.activeIndex,r=n.params,o=n.previousIndex;if(!r.cssMode){r.autoHeight&&n.updateAutoHeight();var s=t;if(s||(s=a>o?"next":a<o?"prev":"reset"),n.emit("transitionStart"),e&&a!==o){if("reset"===s)return void n.emit("slideResetTransitionStart");n.emit("slideChangeTransitionStart"),"next"===s?n.emit("slideNextTransitionStart"):n.emit("slidePrevTransitionStart")}}},transitionEnd:function(e,t){void 0===e&&(e=!0);var n=this,a=n.activeIndex,r=n.previousIndex,o=n.params;if(n.animating=!1,!o.cssMode){n.setTransition(0);var s=t;if(s||(s=a>r?"next":a<r?"prev":"reset"),n.emit("transitionEnd"),e&&a!==r){if("reset"===s)return void n.emit("slideResetTransitionEnd");n.emit("slideChangeTransitionEnd"),"next"===s?n.emit("slideNextTransitionEnd"):n.emit("slidePrevTransitionEnd")}}}};var gh={slideTo:function(e,t,n,a,r){if(void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0),"number"!=typeof e&&"string"!=typeof e)throw new Error("The 'index' argument cannot have type other than 'number' or 'string'. ["+typeof e+"] given.");if("string"==typeof e){var o=parseInt(e,10);if(!isFinite(o))throw new Error("The passed-in 'index' (string) couldn't be converted to 'number'. ["+e+"] given.");e=o}var s=this,i=e;i<0&&(i=0);var l=s.params,u=s.snapGrid,c=s.slidesGrid,p=s.previousIndex,d=s.activeIndex,h=s.rtlTranslate,f=s.wrapperEl,m=s.enabled;if(s.animating&&l.preventInteractionOnTransition||!m&&!a&&!r)return!1;var g=Math.min(s.params.slidesPerGroupSkip,i),v=g+Math.floor((i-g)/s.params.slidesPerGroup);v>=u.length&&(v=u.length-1),(d||l.initialSlide||0)===(p||0)&&n&&s.emit("beforeSlideChangeStart");var b,y=-u[v];if(s.updateProgress(y),l.normalizeSlideIndex)for(var w=0;w<c.length;w+=1){var x=-Math.floor(100*y),k=Math.floor(100*c[w]),C=Math.floor(100*c[w+1]);void 0!==c[w+1]?x>=k&&x<C-(C-k)/2?i=w:x>=k&&x<C&&(i=w+1):x>=k&&(i=w)}if(s.initialized&&i!==d){if(!s.allowSlideNext&&y<s.translate&&y<s.minTranslate())return!1;if(!s.allowSlidePrev&&y>s.translate&&y>s.maxTranslate()&&(d||0)!==i)return!1}if(b=i>d?"next":i<d?"prev":"reset",h&&-y===s.translate||!h&&y===s.translate)return s.updateActiveIndex(i),l.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),"slide"!==l.effect&&s.setTranslate(y),"reset"!==b&&(s.transitionStart(n,b),s.transitionEnd(n,b)),!1;if(l.cssMode){var E,S=s.isHorizontal(),$=-y;if(h&&($=f.scrollWidth-f.offsetWidth-$),0===t)f[S?"scrollLeft":"scrollTop"]=$;else if(f.scrollTo)f.scrollTo(((E={})[S?"left":"top"]=$,E.behavior="smooth",E));else f[S?"scrollLeft":"scrollTop"]=$;return!0}return 0===t?(s.setTransition(0),s.setTranslate(y),s.updateActiveIndex(i),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,a),s.transitionStart(n,b),s.transitionEnd(n,b)):(s.setTransition(t),s.setTranslate(y),s.updateActiveIndex(i),s.updateSlidesClasses(),s.emit("beforeTransitionStart",t,a),s.transitionStart(n,b),s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(e){s&&!s.destroyed&&e.target===this&&(s.$wrapperEl[0].removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].removeEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(n,b))}),s.$wrapperEl[0].addEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.$wrapperEl[0].addEventListener("webkitTransitionEnd",s.onSlideToWrapperTransitionEnd))),!0},slideToLoop:function(e,t,n,a){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===n&&(n=!0);var r=this,o=e;return r.params.loop&&(o+=r.loopedSlides),r.slideTo(o,t,n,a)},slideNext:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var a=this,r=a.params,o=a.animating;if(!a.enabled)return a;var s=a.activeIndex<r.slidesPerGroupSkip?1:r.slidesPerGroup;if(r.loop){if(o&&r.loopPreventsSlide)return!1;a.loopFix(),a._clientLeft=a.$wrapperEl[0].clientLeft}return a.slideTo(a.activeIndex+s,e,t,n)},slidePrev:function(e,t,n){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0);var a=this,r=a.params,o=a.animating,s=a.snapGrid,i=a.slidesGrid,l=a.rtlTranslate;if(!a.enabled)return a;if(r.loop){if(o&&r.loopPreventsSlide)return!1;a.loopFix(),a._clientLeft=a.$wrapperEl[0].clientLeft}function u(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var c,p=u(l?a.translate:-a.translate),d=s.map((function(e){return u(e)})),h=s[d.indexOf(p)-1];return void 0===h&&r.cssMode&&s.forEach((function(e){!h&&p>=e&&(h=e)})),void 0!==h&&(c=i.indexOf(h))<0&&(c=a.activeIndex-1),a.slideTo(c,e,t,n)},slideReset:function(e,t,n){return void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),this.slideTo(this.activeIndex,e,t,n)},slideToClosest:function(e,t,n,a){void 0===e&&(e=this.params.speed),void 0===t&&(t=!0),void 0===a&&(a=.5);var r=this,o=r.activeIndex,s=Math.min(r.params.slidesPerGroupSkip,o),i=s+Math.floor((o-s)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[i]){var u=r.snapGrid[i];l-u>(r.snapGrid[i+1]-u)*a&&(o+=r.params.slidesPerGroup)}else{var c=r.snapGrid[i-1];l-c<=(r.snapGrid[i]-c)*a&&(o-=r.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,r.slidesGrid.length-1),r.slideTo(o,e,t,n)},slideToClickedSlide:function(){var e,t=this,n=t.params,a=t.$wrapperEl,r="auto"===n.slidesPerView?t.slidesPerViewDynamic():n.slidesPerView,o=t.clickedIndex;if(n.loop){if(t.animating)return;e=parseInt(Yd(t.clickedSlide).attr("data-swiper-slide-index"),10),n.centeredSlides?o<t.loopedSlides-r/2||o>t.slides.length-t.loopedSlides+r/2?(t.loopFix(),o=a.children("."+n.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+n.slideDuplicateClass+")").eq(0).index(),Kd((function(){t.slideTo(o)}))):t.slideTo(o):o>t.slides.length-r?(t.loopFix(),o=a.children("."+n.slideClass+'[data-swiper-slide-index="'+e+'"]:not(.'+n.slideDuplicateClass+")").eq(0).index(),Kd((function(){t.slideTo(o)}))):t.slideTo(o)}else t.slideTo(o)}};var vh={loopCreate:function(){var e=this,t=Vo(),n=e.params,a=e.$wrapperEl;a.children("."+n.slideClass+"."+n.slideDuplicateClass).remove();var r=a.children("."+n.slideClass);if(n.loopFillGroupWithBlank){var o=n.slidesPerGroup-r.length%n.slidesPerGroup;if(o!==n.slidesPerGroup){for(var s=0;s<o;s+=1){var i=Yd(t.createElement("div")).addClass(n.slideClass+" "+n.slideBlankClass);a.append(i)}r=a.children("."+n.slideClass)}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=r.length),e.loopedSlides=Math.ceil(parseFloat(n.loopedSlides||n.slidesPerView,10)),e.loopedSlides+=n.loopAdditionalSlides,e.loopedSlides>r.length&&(e.loopedSlides=r.length);var l=[],u=[];r.each((function(t,n){var a=Yd(t);n<e.loopedSlides&&u.push(t),n<r.length&&n>=r.length-e.loopedSlides&&l.push(t),a.attr("data-swiper-slide-index",n)}));for(var c=0;c<u.length;c+=1)a.append(Yd(u[c].cloneNode(!0)).addClass(n.slideDuplicateClass));for(var p=l.length-1;p>=0;p-=1)a.prepend(Yd(l[p].cloneNode(!0)).addClass(n.slideDuplicateClass))},loopFix:function(){var e=this;e.emit("beforeLoopFix");var t,n=e.activeIndex,a=e.slides,r=e.loopedSlides,o=e.allowSlidePrev,s=e.allowSlideNext,i=e.snapGrid,l=e.rtlTranslate;e.allowSlidePrev=!0,e.allowSlideNext=!0;var u=-i[n]-e.getTranslate();if(n<r)t=a.length-3*r+n,t+=r,e.slideTo(t,0,!1,!0)&&0!==u&&e.setTranslate((l?-e.translate:e.translate)-u);else if(n>=a.length-r){t=-a.length+n+r,t+=r,e.slideTo(t,0,!1,!0)&&0!==u&&e.setTranslate((l?-e.translate:e.translate)-u)}e.allowSlidePrev=o,e.allowSlideNext=s,e.emit("loopFix")},loopDestroy:function(){var e=this,t=e.$wrapperEl,n=e.params,a=e.slides;t.children("."+n.slideClass+"."+n.slideDuplicateClass+",."+n.slideClass+"."+n.slideBlankClass).remove(),a.removeAttr("data-swiper-slide-index")}};var bh={setGrabCursor:function(e){var t=this;if(!(t.support.touch||!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)){var n=t.el;n.style.cursor="move",n.style.cursor=e?"-webkit-grabbing":"-webkit-grab",n.style.cursor=e?"-moz-grabbin":"-moz-grab",n.style.cursor=e?"grabbing":"grab"}},unsetGrabCursor:function(){var e=this;e.support.touch||e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.el.style.cursor="")}};var yh={appendSlide:function(e){var t=this,n=t.$wrapperEl,a=t.params;if(a.loop&&t.loopDestroy(),"object"==typeof e&&"length"in e)for(var r=0;r<e.length;r+=1)e[r]&&n.append(e[r]);else n.append(e);a.loop&&t.loopCreate(),a.observer&&t.support.observer||t.update()},prependSlide:function(e){var t=this,n=t.params,a=t.$wrapperEl,r=t.activeIndex;n.loop&&t.loopDestroy();var o=r+1;if("object"==typeof e&&"length"in e){for(var s=0;s<e.length;s+=1)e[s]&&a.prepend(e[s]);o=r+e.length}else a.prepend(e);n.loop&&t.loopCreate(),n.observer&&t.support.observer||t.update(),t.slideTo(o,0,!1)},addSlide:function(e,t){var n=this,a=n.$wrapperEl,r=n.params,o=n.activeIndex;r.loop&&(o-=n.loopedSlides,n.loopDestroy(),n.slides=a.children("."+r.slideClass));var s=n.slides.length;if(e<=0)n.prependSlide(t);else if(e>=s)n.appendSlide(t);else{for(var i=o>e?o+1:o,l=[],u=s-1;u>=e;u-=1){var c=n.slides.eq(u);c.remove(),l.unshift(c)}if("object"==typeof t&&"length"in t){for(var p=0;p<t.length;p+=1)t[p]&&a.append(t[p]);i=o>e?o+t.length:o}else a.append(t);for(var d=0;d<l.length;d+=1)a.append(l[d]);r.loop&&n.loopCreate(),r.observer&&n.support.observer||n.update(),r.loop?n.slideTo(i+n.loopedSlides,0,!1):n.slideTo(i,0,!1)}},removeSlide:function(e){var t=this,n=t.params,a=t.$wrapperEl,r=t.activeIndex;n.loop&&(r-=t.loopedSlides,t.loopDestroy(),t.slides=a.children("."+n.slideClass));var o,s=r;if("object"==typeof e&&"length"in e){for(var i=0;i<e.length;i+=1)o=e[i],t.slides[o]&&t.slides.eq(o).remove(),o<s&&(s-=1);s=Math.max(s,0)}else o=e,t.slides[o]&&t.slides.eq(o).remove(),o<s&&(s-=1),s=Math.max(s,0);n.loop&&t.loopCreate(),n.observer&&t.support.observer||t.update(),n.loop?t.slideTo(s+t.loopedSlides,0,!1):t.slideTo(s,0,!1)},removeAllSlides:function(){for(var e=[],t=0;t<this.slides.length;t+=1)e.push(t);this.removeSlide(e)}};function wh(e){var t=this,n=Vo(),a=Ho(),r=t.touchEventsData,o=t.params,s=t.touches;if(t.enabled&&(!t.animating||!o.preventInteractionOnTransition)){var i=e;i.originalEvent&&(i=i.originalEvent);var l=Yd(i.target);if(("wrapper"!==o.touchEventsTarget||l.closest(t.wrapperEl).length)&&(r.isTouchEvent="touchstart"===i.type,(r.isTouchEvent||!("which"in i)||3!==i.which)&&!(!r.isTouchEvent&&"button"in i&&i.button>0||r.isTouched&&r.isMoved))){!!o.noSwipingClass&&""!==o.noSwipingClass&&i.target&&i.target.shadowRoot&&e.path&&e.path[0]&&(l=Yd(e.path[0]));var u=o.noSwipingSelector?o.noSwipingSelector:"."+o.noSwipingClass,c=!(!i.target||!i.target.shadowRoot);if(o.noSwiping&&(c?function(e,t){return void 0===t&&(t=this),function t(n){return n&&n!==Vo()&&n!==Ho()?(n.assignedSlot&&(n=n.assignedSlot),n.closest(e)||t(n.getRootNode().host)):null}(t)}(u,i.target):l.closest(u)[0]))t.allowClick=!0;else if(!o.swipeHandler||l.closest(o.swipeHandler)[0]){s.currentX="touchstart"===i.type?i.targetTouches[0].pageX:i.pageX,s.currentY="touchstart"===i.type?i.targetTouches[0].pageY:i.pageY;var p=s.currentX,d=s.currentY,h=o.edgeSwipeDetection||o.iOSEdgeSwipeDetection,f=o.edgeSwipeThreshold||o.iOSEdgeSwipeThreshold;if(h&&(p<=f||p>=a.innerWidth-f)){if("prevent"!==h)return;e.preventDefault()}if(th(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),s.startX=p,s.startY=d,r.touchStartTime=Jd(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,o.threshold>0&&(r.allowThresholdMove=!1),"touchstart"!==i.type){var m=!0;l.is(r.focusableElements)&&(m=!1),n.activeElement&&Yd(n.activeElement).is(r.focusableElements)&&n.activeElement!==l[0]&&n.activeElement.blur();var g=m&&t.allowTouchMove&&o.touchStartPreventDefault;!o.touchStartForcePreventDefault&&!g||l[0].isContentEditable||i.preventDefault()}t.emit("touchStart",i)}}}}function xh(e){var t=Vo(),n=this,a=n.touchEventsData,r=n.params,o=n.touches,s=n.rtlTranslate;if(n.enabled){var i=e;if(i.originalEvent&&(i=i.originalEvent),a.isTouched){if(!a.isTouchEvent||"touchmove"===i.type){var l="touchmove"===i.type&&i.targetTouches&&(i.targetTouches[0]||i.changedTouches[0]),u="touchmove"===i.type?l.pageX:i.pageX,c="touchmove"===i.type?l.pageY:i.pageY;if(i.preventedByNestedSwiper)return o.startX=u,void(o.startY=c);if(!n.allowTouchMove)return n.allowClick=!1,void(a.isTouched&&(th(o,{startX:u,startY:c,currentX:u,currentY:c}),a.touchStartTime=Jd()));if(a.isTouchEvent&&r.touchReleaseOnEdges&&!r.loop)if(n.isVertical()){if(c<o.startY&&n.translate<=n.maxTranslate()||c>o.startY&&n.translate>=n.minTranslate())return a.isTouched=!1,void(a.isMoved=!1)}else if(u<o.startX&&n.translate<=n.maxTranslate()||u>o.startX&&n.translate>=n.minTranslate())return;if(a.isTouchEvent&&t.activeElement&&i.target===t.activeElement&&Yd(i.target).is(a.focusableElements))return a.isMoved=!0,void(n.allowClick=!1);if(a.allowTouchCallbacks&&n.emit("touchMove",i),!(i.targetTouches&&i.targetTouches.length>1)){o.currentX=u,o.currentY=c;var p=o.currentX-o.startX,d=o.currentY-o.startY;if(!(n.params.threshold&&Math.sqrt(Math.pow(p,2)+Math.pow(d,2))<n.params.threshold)){var h;if(void 0===a.isScrolling)n.isHorizontal()&&o.currentY===o.startY||n.isVertical()&&o.currentX===o.startX?a.isScrolling=!1:p*p+d*d>=25&&(h=180*Math.atan2(Math.abs(d),Math.abs(p))/Math.PI,a.isScrolling=n.isHorizontal()?h>r.touchAngle:90-h>r.touchAngle);if(a.isScrolling&&n.emit("touchMoveOpposite",i),void 0===a.startMoving&&(o.currentX===o.startX&&o.currentY===o.startY||(a.startMoving=!0)),a.isScrolling)a.isTouched=!1;else if(a.startMoving){n.allowClick=!1,!r.cssMode&&i.cancelable&&i.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&i.stopPropagation(),a.isMoved||(r.loop&&n.loopFix(),a.startTranslate=n.getTranslate(),n.setTransition(0),n.animating&&n.$wrapperEl.trigger("webkitTransitionEnd transitionend"),a.allowMomentumBounce=!1,!r.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",i)),n.emit("sliderMove",i),a.isMoved=!0;var f=n.isHorizontal()?p:d;o.diff=f,f*=r.touchRatio,s&&(f=-f),n.swipeDirection=f>0?"prev":"next",a.currentTranslate=f+a.startTranslate;var m=!0,g=r.resistanceRatio;if(r.touchReleaseOnEdges&&(g=0),f>0&&a.currentTranslate>n.minTranslate()?(m=!1,r.resistance&&(a.currentTranslate=n.minTranslate()-1+Math.pow(-n.minTranslate()+a.startTranslate+f,g))):f<0&&a.currentTranslate<n.maxTranslate()&&(m=!1,r.resistance&&(a.currentTranslate=n.maxTranslate()+1-Math.pow(n.maxTranslate()-a.startTranslate-f,g))),m&&(i.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&a.currentTranslate<a.startTranslate&&(a.currentTranslate=a.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&a.currentTranslate>a.startTranslate&&(a.currentTranslate=a.startTranslate),n.allowSlidePrev||n.allowSlideNext||(a.currentTranslate=a.startTranslate),r.threshold>0){if(!(Math.abs(f)>r.threshold||a.allowThresholdMove))return void(a.currentTranslate=a.startTranslate);if(!a.allowThresholdMove)return a.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,a.currentTranslate=a.startTranslate,void(o.diff=n.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY)}r.followFinger&&!r.cssMode&&((r.freeMode||r.watchSlidesProgress||r.watchSlidesVisibility)&&(n.updateActiveIndex(),n.updateSlidesClasses()),r.freeMode&&(0===a.velocities.length&&a.velocities.push({position:o[n.isHorizontal()?"startX":"startY"],time:a.touchStartTime}),a.velocities.push({position:o[n.isHorizontal()?"currentX":"currentY"],time:Jd()})),n.updateProgress(a.currentTranslate),n.setTranslate(a.currentTranslate))}}}}}else a.startMoving&&a.isScrolling&&n.emit("touchMoveOpposite",i)}}function kh(e){var t=this,n=t.touchEventsData,a=t.params,r=t.touches,o=t.rtlTranslate,s=t.$wrapperEl,i=t.slidesGrid,l=t.snapGrid;if(t.enabled){var u=e;if(u.originalEvent&&(u=u.originalEvent),n.allowTouchCallbacks&&t.emit("touchEnd",u),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&a.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);a.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var c,p=Jd(),d=p-n.touchStartTime;if(t.allowClick&&(t.updateClickedSlide(u),t.emit("tap click",u),d<300&&p-n.lastClickTime<300&&t.emit("doubleTap doubleClick",u)),n.lastClickTime=Jd(),Kd((function(){t.destroyed||(t.allowClick=!0)})),!n.isTouched||!n.isMoved||!t.swipeDirection||0===r.diff||n.currentTranslate===n.startTranslate)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,c=a.followFinger?o?t.translate:-t.translate:-n.currentTranslate,!a.cssMode)if(a.freeMode){if(c<-t.minTranslate())return void t.slideTo(t.activeIndex);if(c>-t.maxTranslate())return void(t.slides.length<l.length?t.slideTo(l.length-1):t.slideTo(t.slides.length-1));if(a.freeModeMomentum){if(n.velocities.length>1){var h=n.velocities.pop(),f=n.velocities.pop(),m=h.position-f.position,g=h.time-f.time;t.velocity=m/g,t.velocity/=2,Math.abs(t.velocity)<a.freeModeMinimumVelocity&&(t.velocity=0),(g>150||Jd()-h.time>300)&&(t.velocity=0)}else t.velocity=0;t.velocity*=a.freeModeMomentumVelocityRatio,n.velocities.length=0;var v=1e3*a.freeModeMomentumRatio,b=t.velocity*v,y=t.translate+b;o&&(y=-y);var w,x,k=!1,C=20*Math.abs(t.velocity)*a.freeModeMomentumBounceRatio;if(y<t.maxTranslate())a.freeModeMomentumBounce?(y+t.maxTranslate()<-C&&(y=t.maxTranslate()-C),w=t.maxTranslate(),k=!0,n.allowMomentumBounce=!0):y=t.maxTranslate(),a.loop&&a.centeredSlides&&(x=!0);else if(y>t.minTranslate())a.freeModeMomentumBounce?(y-t.minTranslate()>C&&(y=t.minTranslate()+C),w=t.minTranslate(),k=!0,n.allowMomentumBounce=!0):y=t.minTranslate(),a.loop&&a.centeredSlides&&(x=!0);else if(a.freeModeSticky){for(var E,S=0;S<l.length;S+=1)if(l[S]>-y){E=S;break}y=-(y=Math.abs(l[E]-y)<Math.abs(l[E-1]-y)||"next"===t.swipeDirection?l[E]:l[E-1])}if(x&&t.once("transitionEnd",(function(){t.loopFix()})),0!==t.velocity){if(v=o?Math.abs((-y-t.translate)/t.velocity):Math.abs((y-t.translate)/t.velocity),a.freeModeSticky){var $=Math.abs((o?-y:y)-t.translate),T=t.slidesSizesGrid[t.activeIndex];v=$<T?a.speed:$<2*T?1.5*a.speed:2.5*a.speed}}else if(a.freeModeSticky)return void t.slideToClosest();a.freeModeMomentumBounce&&k?(t.updateProgress(w),t.setTransition(v),t.setTranslate(y),t.transitionStart(!0,t.swipeDirection),t.animating=!0,s.transitionEnd((function(){t&&!t.destroyed&&n.allowMomentumBounce&&(t.emit("momentumBounce"),t.setTransition(a.speed),setTimeout((function(){t.setTranslate(w),s.transitionEnd((function(){t&&!t.destroyed&&t.transitionEnd()}))}),0))}))):t.velocity?(t.updateProgress(y),t.setTransition(v),t.setTranslate(y),t.transitionStart(!0,t.swipeDirection),t.animating||(t.animating=!0,s.transitionEnd((function(){t&&!t.destroyed&&t.transitionEnd()})))):(t.emit("_freeModeNoMomentumRelease"),t.updateProgress(y)),t.updateActiveIndex(),t.updateSlidesClasses()}else{if(a.freeModeSticky)return void t.slideToClosest();a.freeMode&&t.emit("_freeModeNoMomentumRelease")}(!a.freeModeMomentum||d>=a.longSwipesMs)&&(t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses())}else{for(var I=0,N=t.slidesSizesGrid[0],O=0;O<i.length;O+=O<a.slidesPerGroupSkip?1:a.slidesPerGroup){var R=O<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;void 0!==i[O+R]?c>=i[O]&&c<i[O+R]&&(I=O,N=i[O+R]-i[O]):c>=i[O]&&(I=O,N=i[i.length-1]-i[i.length-2])}var A=(c-i[I])/N,M=I<a.slidesPerGroupSkip-1?1:a.slidesPerGroup;if(d>a.longSwipesMs){if(!a.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(A>=a.longSwipesRatio?t.slideTo(I+M):t.slideTo(I)),"prev"===t.swipeDirection&&(A>1-a.longSwipesRatio?t.slideTo(I+M):t.slideTo(I))}else{if(!a.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(u.target===t.navigation.nextEl||u.target===t.navigation.prevEl)?u.target===t.navigation.nextEl?t.slideTo(I+M):t.slideTo(I):("next"===t.swipeDirection&&t.slideTo(I+M),"prev"===t.swipeDirection&&t.slideTo(I))}}}}function Ch(){var e=this,t=e.params,n=e.el;if(!n||0!==n.offsetWidth){t.breakpoints&&e.setBreakpoint();var a=e.allowSlideNext,r=e.allowSlidePrev,o=e.snapGrid;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),("auto"===t.slidesPerView||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=r,e.allowSlideNext=a,e.params.watchOverflow&&o!==e.snapGrid&&e.checkOverflow()}}function Eh(e){var t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function Sh(){var e=this,t=e.wrapperEl,n=e.rtlTranslate;if(e.enabled){e.previousTranslate=e.translate,e.isHorizontal()?e.translate=n?t.scrollWidth-t.offsetWidth-t.scrollLeft:-t.scrollLeft:e.translate=-t.scrollTop,-0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();var a=e.maxTranslate()-e.minTranslate();(0===a?0:(e.translate-e.minTranslate())/a)!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}}var $h=!1;function Th(){}var Ih={attachEvents:function(){var e=this,t=Vo(),n=e.params,a=e.touchEvents,r=e.el,o=e.wrapperEl,s=e.device,i=e.support;e.onTouchStart=wh.bind(e),e.onTouchMove=xh.bind(e),e.onTouchEnd=kh.bind(e),n.cssMode&&(e.onScroll=Sh.bind(e)),e.onClick=Eh.bind(e);var l=!!n.nested;if(!i.touch&&i.pointerEvents)r.addEventListener(a.start,e.onTouchStart,!1),t.addEventListener(a.move,e.onTouchMove,l),t.addEventListener(a.end,e.onTouchEnd,!1);else{if(i.touch){var u=!("touchstart"!==a.start||!i.passiveListener||!n.passiveListeners)&&{passive:!0,capture:!1};r.addEventListener(a.start,e.onTouchStart,u),r.addEventListener(a.move,e.onTouchMove,i.passiveListener?{passive:!1,capture:l}:l),r.addEventListener(a.end,e.onTouchEnd,u),a.cancel&&r.addEventListener(a.cancel,e.onTouchEnd,u),$h||(t.addEventListener("touchstart",Th),$h=!0)}(n.simulateTouch&&!s.ios&&!s.android||n.simulateTouch&&!i.touch&&s.ios)&&(r.addEventListener("mousedown",e.onTouchStart,!1),t.addEventListener("mousemove",e.onTouchMove,l),t.addEventListener("mouseup",e.onTouchEnd,!1))}(n.preventClicks||n.preventClicksPropagation)&&r.addEventListener("click",e.onClick,!0),n.cssMode&&o.addEventListener("scroll",e.onScroll),n.updateOnWindowResize?e.on(s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",Ch,!0):e.on("observerUpdate",Ch,!0)},detachEvents:function(){var e=this,t=Vo(),n=e.params,a=e.touchEvents,r=e.el,o=e.wrapperEl,s=e.device,i=e.support,l=!!n.nested;if(!i.touch&&i.pointerEvents)r.removeEventListener(a.start,e.onTouchStart,!1),t.removeEventListener(a.move,e.onTouchMove,l),t.removeEventListener(a.end,e.onTouchEnd,!1);else{if(i.touch){var u=!("onTouchStart"!==a.start||!i.passiveListener||!n.passiveListeners)&&{passive:!0,capture:!1};r.removeEventListener(a.start,e.onTouchStart,u),r.removeEventListener(a.move,e.onTouchMove,l),r.removeEventListener(a.end,e.onTouchEnd,u),a.cancel&&r.removeEventListener(a.cancel,e.onTouchEnd,u)}(n.simulateTouch&&!s.ios&&!s.android||n.simulateTouch&&!i.touch&&s.ios)&&(r.removeEventListener("mousedown",e.onTouchStart,!1),t.removeEventListener("mousemove",e.onTouchMove,l),t.removeEventListener("mouseup",e.onTouchEnd,!1))}(n.preventClicks||n.preventClicksPropagation)&&r.removeEventListener("click",e.onClick,!0),n.cssMode&&o.removeEventListener("scroll",e.onScroll),e.off(s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",Ch)}};var Nh={setBreakpoint:function(){var e=this,t=e.activeIndex,n=e.initialized,a=e.loopedSlides,r=void 0===a?0:a,o=e.params,s=e.$el,i=o.breakpoints;if(i&&(!i||0!==Object.keys(i).length)){var l=e.getBreakpoint(i,e.params.breakpointsBase,e.el);if(l&&e.currentBreakpoint!==l){var u=l in i?i[l]:void 0;u&&["slidesPerView","spaceBetween","slidesPerGroup","slidesPerGroupSkip","slidesPerColumn"].forEach((function(e){var t=u[e];void 0!==t&&(u[e]="slidesPerView"!==e||"AUTO"!==t&&"auto"!==t?"slidesPerView"===e?parseFloat(t):parseInt(t,10):"auto")}));var c=u||e.originalParams,p=o.slidesPerColumn>1,d=c.slidesPerColumn>1,h=o.enabled;p&&!d?(s.removeClass(o.containerModifierClass+"multirow "+o.containerModifierClass+"multirow-column"),e.emitContainerClasses()):!p&&d&&(s.addClass(o.containerModifierClass+"multirow"),(c.slidesPerColumnFill&&"column"===c.slidesPerColumnFill||!c.slidesPerColumnFill&&"column"===o.slidesPerColumnFill)&&s.addClass(o.containerModifierClass+"multirow-column"),e.emitContainerClasses());var f=c.direction&&c.direction!==o.direction,m=o.loop&&(c.slidesPerView!==o.slidesPerView||f);f&&n&&e.changeDirection(),th(e.params,c);var g=e.params.enabled;th(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),h&&!g?e.disable():!h&&g&&e.enable(),e.currentBreakpoint=l,e.emit("_beforeBreakpoint",c),m&&n&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-r+e.loopedSlides,0,!1)),e.emit("breakpoint",c)}}},getBreakpoint:function(e,t,n){if(void 0===t&&(t="window"),e&&("container"!==t||n)){var a=!1,r=Ho(),o="window"===t?r.innerHeight:n.clientHeight,s=Object.keys(e).map((function(e){if("string"==typeof e&&0===e.indexOf("@")){var t=parseFloat(e.substr(1));return{value:o*t,point:e}}return{value:e,point:e}}));s.sort((function(e,t){return parseInt(e.value,10)-parseInt(t.value,10)}));for(var i=0;i<s.length;i+=1){var l=s[i],u=l.point,c=l.value;"window"===t?r.matchMedia("(min-width: "+c+"px)").matches&&(a=u):c<=n.clientWidth&&(a=u)}return a||"max"}}};var Oh={addClasses:function(){var e,t,n,a=this,r=a.classNames,o=a.params,s=a.rtl,i=a.$el,l=a.device,u=a.support,c=(e=["initialized",o.direction,{"pointer-events":u.pointerEvents&&!u.touch},{"free-mode":o.freeMode},{autoheight:o.autoHeight},{rtl:s},{multirow:o.slidesPerColumn>1},{"multirow-column":o.slidesPerColumn>1&&"column"===o.slidesPerColumnFill},{android:l.android},{ios:l.ios},{"css-mode":o.cssMode}],t=o.containerModifierClass,n=[],e.forEach((function(e){"object"==typeof e?Object.keys(e).forEach((function(a){e[a]&&n.push(t+a)})):"string"==typeof e&&n.push(t+e)})),n);r.push.apply(r,c),i.addClass([].concat(r).join(" ")),a.emitContainerClasses()},removeClasses:function(){var e=this,t=e.$el,n=e.classNames;t.removeClass(n.join(" ")),e.emitContainerClasses()}};var Rh={loadImage:function(e,t,n,a,r,o){var s,i=Ho();function l(){o&&o()}Yd(e).parent("picture")[0]||e.complete&&r?l():t?((s=new i.Image).onload=l,s.onerror=l,a&&(s.sizes=a),n&&(s.srcset=n),t&&(s.src=t)):l()},preloadImages:function(){var e=this;function t(){null!=e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(var n=0;n<e.imagesToLoad.length;n+=1){var a=e.imagesToLoad[n];e.loadImage(a,a.currentSrc||a.getAttribute("src"),a.srcset||a.getAttribute("srcset"),a.sizes||a.getAttribute("sizes"),!0,t)}}};var Ah={checkOverflow:function(){var e=this,t=e.params,n=e.isLocked,a=e.slides.length>0&&t.slidesOffsetBefore+t.spaceBetween*(e.slides.length-1)+e.slides[0].offsetWidth*e.slides.length;t.slidesOffsetBefore&&t.slidesOffsetAfter&&a?e.isLocked=a<=e.size:e.isLocked=1===e.snapGrid.length,e.allowSlideNext=!e.isLocked,e.allowSlidePrev=!e.isLocked,n!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock"),n&&n!==e.isLocked&&(e.isEnd=!1,e.navigation&&e.navigation.update())}},Mh={init:!0,direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!1,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,freeMode:!1,freeModeMomentum:!0,freeModeMomentumRatio:1,freeModeMomentumBounce:!0,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:!1,freeModeMinimumVelocity:.02,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,slidesPerGroupSkip:0,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!1,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,watchSlidesVisibility:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function Bh(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Ph={modular:{useParams:function(e){var t=this;t.modules&&Object.keys(t.modules).forEach((function(n){var a=t.modules[n];a.params&&th(e,a.params)}))},useModules:function(e){void 0===e&&(e={});var t=this;t.modules&&Object.keys(t.modules).forEach((function(n){var a=t.modules[n],r=e[n]||{};a.on&&t.on&&Object.keys(a.on).forEach((function(e){t.on(e,a.on[e])})),a.create&&a.create.bind(t)(r)}))}},eventsEmitter:dh,update:hh,translate:fh,transition:mh,slide:gh,loop:vh,grabCursor:bh,manipulation:yh,events:Ih,breakpoints:Nh,checkOverflow:Ah,classes:Oh,images:Rh},Dh={},Fh=function(){function e(){for(var t,n,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];if(1===r.length&&r[0].constructor&&"Object"===Object.prototype.toString.call(r[0]).slice(8,-1)?n=r[0]:(t=r[0],n=r[1]),n||(n={}),n=th({},n),t&&!n.el&&(n.el=t),n.el&&Yd(n.el).length>1){var s=[];return Yd(n.el).each((function(t){var a=th({},n,{el:t});s.push(new e(a))})),s}var i=this;i.__swiper__=!0,i.support=oh(),i.device=sh({userAgent:n.userAgent}),i.browser=ih(),i.eventsListeners={},i.eventsAnyListeners=[],void 0===i.modules&&(i.modules={}),Object.keys(i.modules).forEach((function(e){var t=i.modules[e];if(t.params){var a=Object.keys(t.params)[0],r=t.params[a];if("object"!=typeof r||null===r)return;if(["navigation","pagination","scrollbar"].indexOf(a)>=0&&!0===n[a]&&(n[a]={auto:!0}),!(a in n)||!("enabled"in r))return;!0===n[a]&&(n[a]={enabled:!0}),"object"!=typeof n[a]||"enabled"in n[a]||(n[a].enabled=!0),n[a]||(n[a]={enabled:!1})}}));var l=th({},Mh);return i.useParams(l),i.params=th({},l,Dh,n),i.originalParams=th({},i.params),i.passedParams=th({},n),i.params&&i.params.on&&Object.keys(i.params.on).forEach((function(e){i.on(e,i.params.on[e])})),i.params&&i.params.onAny&&i.onAny(i.params.onAny),i.$=Yd,th(i,{enabled:i.params.enabled,el:t,classNames:[],slides:Yd(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===i.params.direction},isVertical:function(){return"vertical"===i.params.direction},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:i.params.allowSlideNext,allowSlidePrev:i.params.allowSlidePrev,touchEvents:function(){var e=["touchstart","touchmove","touchend","touchcancel"],t=["mousedown","mousemove","mouseup"];return i.support.pointerEvents&&(t=["pointerdown","pointermove","pointerup"]),i.touchEventsTouch={start:e[0],move:e[1],end:e[2],cancel:e[3]},i.touchEventsDesktop={start:t[0],move:t[1],end:t[2]},i.support.touch||!i.params.simulateTouch?i.touchEventsTouch:i.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:i.params.focusableElements,lastClickTime:Jd(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:i.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),i.useModules(),i.emit("_swiper"),i.params.init&&i.init(),i}var t,n,a,r=e.prototype;return r.enable=function(){var e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))},r.disable=function(){var e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))},r.setProgress=function(e,t){var n=this;e=Math.min(Math.max(e,0),1);var a=n.minTranslate(),r=(n.maxTranslate()-a)*e+a;n.translateTo(r,void 0===t?0:t),n.updateActiveIndex(),n.updateSlidesClasses()},r.emitContainerClasses=function(){var e=this;if(e.params._emitClasses&&e.el){var t=e.el.className.split(" ").filter((function(t){return 0===t.indexOf("swiper-container")||0===t.indexOf(e.params.containerModifierClass)}));e.emit("_containerClasses",t.join(" "))}},r.getSlideClasses=function(e){var t=this;return e.className.split(" ").filter((function(e){return 0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)})).join(" ")},r.emitSlidesClasses=function(){var e=this;if(e.params._emitClasses&&e.el){var t=[];e.slides.each((function(n){var a=e.getSlideClasses(n);t.push({slideEl:n,classNames:a}),e.emit("_slideClass",n,a)})),e.emit("_slideClasses",t)}},r.slidesPerViewDynamic=function(){var e=this,t=e.params,n=e.slides,a=e.slidesGrid,r=e.size,o=e.activeIndex,s=1;if(t.centeredSlides){for(var i,l=n[o].swiperSlideSize,u=o+1;u<n.length;u+=1)n[u]&&!i&&(s+=1,(l+=n[u].swiperSlideSize)>r&&(i=!0));for(var c=o-1;c>=0;c-=1)n[c]&&!i&&(s+=1,(l+=n[c].swiperSlideSize)>r&&(i=!0))}else for(var p=o+1;p<n.length;p+=1)a[p]-a[o]<r&&(s+=1);return s},r.update=function(){var e=this;if(e&&!e.destroyed){var t=e.snapGrid,n=e.params;n.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode?(a(),e.params.autoHeight&&e.updateAutoHeight()):(("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0))||a(),n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}function a(){var t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}},r.changeDirection=function(e,t){void 0===t&&(t=!0);var n=this,a=n.params.direction;return e||(e="horizontal"===a?"vertical":"horizontal"),e===a||"horizontal"!==e&&"vertical"!==e||(n.$el.removeClass(""+n.params.containerModifierClass+a).addClass(""+n.params.containerModifierClass+e),n.emitContainerClasses(),n.params.direction=e,n.slides.each((function(t){"vertical"===e?t.style.width="":t.style.height=""})),n.emit("changeDirection"),t&&n.update()),n},r.mount=function(e){var t=this;if(t.mounted)return!0;var n=Yd(e||t.params.el);if(!(e=n[0]))return!1;e.swiper=t;var a=function(){return"."+(t.params.wrapperClass||"").trim().split(" ").join(".")},r=function(){if(e&&e.shadowRoot&&e.shadowRoot.querySelector){var t=Yd(e.shadowRoot.querySelector(a()));return t.children=function(e){return n.children(e)},t}return n.children(a())}();if(0===r.length&&t.params.createElements){var o=Vo().createElement("div");r=Yd(o),o.className=t.params.wrapperClass,n.append(o),n.children("."+t.params.slideClass).each((function(e){r.append(e)}))}return th(t,{$el:n,el:e,$wrapperEl:r,wrapperEl:r[0],mounted:!0,rtl:"rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction")),wrongRTL:"-webkit-box"===r.css("display")}),!0},r.init=function(e){var t=this;return t.initialized||!1===t.mount(e)||(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.params.loop&&t.loopCreate(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.preloadImages&&t.preloadImages(),t.params.loop?t.slideTo(t.params.initialSlide+t.loopedSlides,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.attachEvents(),t.initialized=!0,t.emit("init"),t.emit("afterInit")),t},r.destroy=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var n,a=this,r=a.params,o=a.$el,s=a.$wrapperEl,i=a.slides;return void 0===a.params||a.destroyed||(a.emit("beforeDestroy"),a.initialized=!1,a.detachEvents(),r.loop&&a.loopDestroy(),t&&(a.removeClasses(),o.removeAttr("style"),s.removeAttr("style"),i&&i.length&&i.removeClass([r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),a.emit("destroy"),Object.keys(a.eventsListeners).forEach((function(e){a.off(e)})),!1!==e&&(a.$el[0].swiper=null,n=a,Object.keys(n).forEach((function(e){try{n[e]=null}catch(e){}try{delete n[e]}catch(e){}}))),a.destroyed=!0),null},e.extendDefaults=function(e){th(Dh,e)},e.installModule=function(t){e.prototype.modules||(e.prototype.modules={});var n=t.name||Object.keys(e.prototype.modules).length+"_"+Jd();e.prototype.modules[n]=t},e.use=function(t){return Array.isArray(t)?(t.forEach((function(t){return e.installModule(t)})),e):(e.installModule(t),e)},t=e,a=[{key:"extendedDefaults",get:function(){return Dh}},{key:"defaults",get:function(){return Mh}}],(n=null)&&Bh(t.prototype,n),a&&Bh(t,a),e}();Object.keys(Ph).forEach((function(e){Object.keys(Ph[e]).forEach((function(t){Fh.prototype[t]=Ph[e][t]}))})),Fh.use([lh,ph]);var _h=Fh;function Lh(){return Lh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Lh.apply(this,arguments)}var zh={update:function(e){var t=this,n=t.params,a=n.slidesPerView,r=n.slidesPerGroup,o=n.centeredSlides,s=t.params.virtual,i=s.addSlidesBefore,l=s.addSlidesAfter,u=t.virtual,c=u.from,p=u.to,d=u.slides,h=u.slidesGrid,f=u.renderSlide,m=u.offset;t.updateActiveIndex();var g,v,b,y=t.activeIndex||0;g=t.rtlTranslate?"right":t.isHorizontal()?"left":"top",o?(v=Math.floor(a/2)+r+l,b=Math.floor(a/2)+r+i):(v=a+(r-1)+l,b=r+i);var w=Math.max((y||0)-b,0),x=Math.min((y||0)+v,d.length-1),k=(t.slidesGrid[w]||0)-(t.slidesGrid[0]||0);function C(){t.updateSlides(),t.updateProgress(),t.updateSlidesClasses(),t.lazy&&t.params.lazy.enabled&&t.lazy.load()}if(th(t.virtual,{from:w,to:x,offset:k,slidesGrid:t.slidesGrid}),c===w&&p===x&&!e)return t.slidesGrid!==h&&k!==m&&t.slides.css(g,k+"px"),void t.updateProgress();if(t.params.virtual.renderExternal)return t.params.virtual.renderExternal.call(t,{offset:k,from:w,to:x,slides:function(){for(var e=[],t=w;t<=x;t+=1)e.push(d[t]);return e}()}),void(t.params.virtual.renderExternalUpdate&&C());var E=[],S=[];if(e)t.$wrapperEl.find("."+t.params.slideClass).remove();else for(var $=c;$<=p;$+=1)($<w||$>x)&&t.$wrapperEl.find("."+t.params.slideClass+'[data-swiper-slide-index="'+$+'"]').remove();for(var T=0;T<d.length;T+=1)T>=w&&T<=x&&(void 0===p||e?S.push(T):(T>p&&S.push(T),T<c&&E.push(T)));S.forEach((function(e){t.$wrapperEl.append(f(d[e],e))})),E.sort((function(e,t){return t-e})).forEach((function(e){t.$wrapperEl.prepend(f(d[e],e))})),t.$wrapperEl.children(".swiper-slide").css(g,k+"px"),C()},renderSlide:function(e,t){var n=this,a=n.params.virtual;if(a.cache&&n.virtual.cache[t])return n.virtual.cache[t];var r=a.renderSlide?Yd(a.renderSlide.call(n,e,t)):Yd('<div class="'+n.params.slideClass+'" data-swiper-slide-index="'+t+'">'+e+"</div>");return r.attr("data-swiper-slide-index")||r.attr("data-swiper-slide-index",t),a.cache&&(n.virtual.cache[t]=r),r},appendSlide:function(e){var t=this;if("object"==typeof e&&"length"in e)for(var n=0;n<e.length;n+=1)e[n]&&t.virtual.slides.push(e[n]);else t.virtual.slides.push(e);t.virtual.update(!0)},prependSlide:function(e){var t=this,n=t.activeIndex,a=n+1,r=1;if(Array.isArray(e)){for(var o=0;o<e.length;o+=1)e[o]&&t.virtual.slides.unshift(e[o]);a=n+e.length,r=e.length}else t.virtual.slides.unshift(e);if(t.params.virtual.cache){var s=t.virtual.cache,i={};Object.keys(s).forEach((function(e){var t=s[e],n=t.attr("data-swiper-slide-index");n&&t.attr("data-swiper-slide-index",parseInt(n,10)+1),i[parseInt(e,10)+r]=t})),t.virtual.cache=i}t.virtual.update(!0),t.slideTo(a,0)},removeSlide:function(e){var t=this;if(null!=e){var n=t.activeIndex;if(Array.isArray(e))for(var a=e.length-1;a>=0;a-=1)t.virtual.slides.splice(e[a],1),t.params.virtual.cache&&delete t.virtual.cache[e[a]],e[a]<n&&(n-=1),n=Math.max(n,0);else t.virtual.slides.splice(e,1),t.params.virtual.cache&&delete t.virtual.cache[e],e<n&&(n-=1),n=Math.max(n,0);t.virtual.update(!0),t.slideTo(n,0)}},removeAllSlides:function(){var e=this;e.virtual.slides=[],e.params.virtual.cache&&(e.virtual.cache={}),e.virtual.update(!0),e.slideTo(0,0)}},Vh={name:"virtual",params:{virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}},create:function(){nh(this,{virtual:Lh({},zh,{slides:this.params.virtual.slides,cache:{}})})},on:{beforeInit:function(e){if(e.params.virtual.enabled){e.classNames.push(e.params.containerModifierClass+"virtual");var t={watchSlidesProgress:!0};th(e.params,t),th(e.originalParams,t),e.params.initialSlide||e.virtual.update()}},setTranslate:function(e){e.params.virtual.enabled&&e.virtual.update()}}};function Wh(){return Wh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Wh.apply(this,arguments)}var Hh={handle:function(e){var t=this;if(t.enabled){var n=Ho(),a=Vo(),r=t.rtlTranslate,o=e;o.originalEvent&&(o=o.originalEvent);var s=o.keyCode||o.charCode,i=t.params.keyboard.pageUpDown,l=i&&33===s,u=i&&34===s,c=37===s,p=39===s,d=38===s,h=40===s;if(!t.allowSlideNext&&(t.isHorizontal()&&p||t.isVertical()&&h||u))return!1;if(!t.allowSlidePrev&&(t.isHorizontal()&&c||t.isVertical()&&d||l))return!1;if(!(o.shiftKey||o.altKey||o.ctrlKey||o.metaKey||a.activeElement&&a.activeElement.nodeName&&("input"===a.activeElement.nodeName.toLowerCase()||"textarea"===a.activeElement.nodeName.toLowerCase()))){if(t.params.keyboard.onlyInViewport&&(l||u||c||p||d||h)){var f=!1;if(t.$el.parents("."+t.params.slideClass).length>0&&0===t.$el.parents("."+t.params.slideActiveClass).length)return;var m=t.$el,g=m[0].clientWidth,v=m[0].clientHeight,b=n.innerWidth,y=n.innerHeight,w=t.$el.offset();r&&(w.left-=t.$el[0].scrollLeft);for(var x=[[w.left,w.top],[w.left+g,w.top],[w.left,w.top+v],[w.left+g,w.top+v]],k=0;k<x.length;k+=1){var C=x[k];if(C[0]>=0&&C[0]<=b&&C[1]>=0&&C[1]<=y){if(0===C[0]&&0===C[1])continue;f=!0}}if(!f)return}t.isHorizontal()?((l||u||c||p)&&(o.preventDefault?o.preventDefault():o.returnValue=!1),((u||p)&&!r||(l||c)&&r)&&t.slideNext(),((l||c)&&!r||(u||p)&&r)&&t.slidePrev()):((l||u||d||h)&&(o.preventDefault?o.preventDefault():o.returnValue=!1),(u||h)&&t.slideNext(),(l||d)&&t.slidePrev()),t.emit("keyPress",s)}}},enable:function(){var e=this,t=Vo();e.keyboard.enabled||(Yd(t).on("keydown",e.keyboard.handle),e.keyboard.enabled=!0)},disable:function(){var e=this,t=Vo();e.keyboard.enabled&&(Yd(t).off("keydown",e.keyboard.handle),e.keyboard.enabled=!1)}},jh={name:"keyboard",params:{keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}},create:function(){nh(this,{keyboard:Wh({enabled:!1},Hh)})},on:{init:function(e){e.params.keyboard.enabled&&e.keyboard.enable()},destroy:function(e){e.keyboard.enabled&&e.keyboard.disable()}}};var Uh={lastScrollTime:Jd(),lastEventBeforeSnap:void 0,recentWheelEvents:[],event:function(){return Ho().navigator.userAgent.indexOf("firefox")>-1?"DOMMouseScroll":function(){var e=Vo(),t="onwheel",n=t in e;if(!n){var a=e.createElement("div");a.setAttribute(t,"return;"),n="function"==typeof a.onwheel}return!n&&e.implementation&&e.implementation.hasFeature&&!0!==e.implementation.hasFeature("","")&&(n=e.implementation.hasFeature("Events.wheel","3.0")),n}()?"wheel":"mousewheel"},normalize:function(e){var t=0,n=0,a=0,r=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),a=10*t,r=10*n,"deltaY"in e&&(r=e.deltaY),"deltaX"in e&&(a=e.deltaX),e.shiftKey&&!a&&(a=r,r=0),(a||r)&&e.deltaMode&&(1===e.deltaMode?(a*=40,r*=40):(a*=800,r*=800)),a&&!t&&(t=a<1?-1:1),r&&!n&&(n=r<1?-1:1),{spinX:t,spinY:n,pixelX:a,pixelY:r}},handleMouseEnter:function(){this.enabled&&(this.mouseEntered=!0)},handleMouseLeave:function(){this.enabled&&(this.mouseEntered=!1)},handle:function(e){var t=e,n=this;if(n.enabled){var a=n.params.mousewheel;n.params.cssMode&&t.preventDefault();var r=n.$el;if("container"!==n.params.mousewheel.eventsTarget&&(r=Yd(n.params.mousewheel.eventsTarget)),!n.mouseEntered&&!r[0].contains(t.target)&&!a.releaseOnEdges)return!0;t.originalEvent&&(t=t.originalEvent);var o=0,s=n.rtlTranslate?-1:1,i=Uh.normalize(t);if(a.forceToAxis)if(n.isHorizontal()){if(!(Math.abs(i.pixelX)>Math.abs(i.pixelY)))return!0;o=-i.pixelX*s}else{if(!(Math.abs(i.pixelY)>Math.abs(i.pixelX)))return!0;o=-i.pixelY}else o=Math.abs(i.pixelX)>Math.abs(i.pixelY)?-i.pixelX*s:-i.pixelY;if(0===o)return!0;a.invert&&(o=-o);var l=n.getTranslate()+o*a.sensitivity;if(l>=n.minTranslate()&&(l=n.minTranslate()),l<=n.maxTranslate()&&(l=n.maxTranslate()),(!!n.params.loop||!(l===n.minTranslate()||l===n.maxTranslate()))&&n.params.nested&&t.stopPropagation(),n.params.freeMode){var u={time:Jd(),delta:Math.abs(o),direction:Math.sign(o)},c=n.mousewheel.lastEventBeforeSnap,p=c&&u.time<c.time+500&&u.delta<=c.delta&&u.direction===c.direction;if(!p){n.mousewheel.lastEventBeforeSnap=void 0,n.params.loop&&n.loopFix();var d=n.getTranslate()+o*a.sensitivity,h=n.isBeginning,f=n.isEnd;if(d>=n.minTranslate()&&(d=n.minTranslate()),d<=n.maxTranslate()&&(d=n.maxTranslate()),n.setTransition(0),n.setTranslate(d),n.updateProgress(),n.updateActiveIndex(),n.updateSlidesClasses(),(!h&&n.isBeginning||!f&&n.isEnd)&&n.updateSlidesClasses(),n.params.freeModeSticky){clearTimeout(n.mousewheel.timeout),n.mousewheel.timeout=void 0;var m=n.mousewheel.recentWheelEvents;m.length>=15&&m.shift();var g=m.length?m[m.length-1]:void 0,v=m[0];if(m.push(u),g&&(u.delta>g.delta||u.direction!==g.direction))m.splice(0);else if(m.length>=15&&u.time-v.time<500&&v.delta-u.delta>=1&&u.delta<=6){var b=o>0?.8:.2;n.mousewheel.lastEventBeforeSnap=u,m.splice(0),n.mousewheel.timeout=Kd((function(){n.slideToClosest(n.params.speed,!0,void 0,b)}),0)}n.mousewheel.timeout||(n.mousewheel.timeout=Kd((function(){n.mousewheel.lastEventBeforeSnap=u,m.splice(0),n.slideToClosest(n.params.speed,!0,void 0,.5)}),500))}if(p||n.emit("scroll",t),n.params.autoplay&&n.params.autoplayDisableOnInteraction&&n.autoplay.stop(),d===n.minTranslate()||d===n.maxTranslate())return!0}}else{var y={time:Jd(),delta:Math.abs(o),direction:Math.sign(o),raw:e},w=n.mousewheel.recentWheelEvents;w.length>=2&&w.shift();var x=w.length?w[w.length-1]:void 0;if(w.push(y),x?(y.direction!==x.direction||y.delta>x.delta||y.time>x.time+150)&&n.mousewheel.animateSlider(y):n.mousewheel.animateSlider(y),n.mousewheel.releaseScroll(y))return!0}return t.preventDefault?t.preventDefault():t.returnValue=!1,!1}},animateSlider:function(e){var t=this,n=Ho();return!(this.params.mousewheel.thresholdDelta&&e.delta<this.params.mousewheel.thresholdDelta)&&(!(this.params.mousewheel.thresholdTime&&Jd()-t.mousewheel.lastScrollTime<this.params.mousewheel.thresholdTime)&&(e.delta>=6&&Jd()-t.mousewheel.lastScrollTime<60||(e.direction<0?t.isEnd&&!t.params.loop||t.animating||(t.slideNext(),t.emit("scroll",e.raw)):t.isBeginning&&!t.params.loop||t.animating||(t.slidePrev(),t.emit("scroll",e.raw)),t.mousewheel.lastScrollTime=(new n.Date).getTime(),!1)))},releaseScroll:function(e){var t=this,n=t.params.mousewheel;if(e.direction<0){if(t.isEnd&&!t.params.loop&&n.releaseOnEdges)return!0}else if(t.isBeginning&&!t.params.loop&&n.releaseOnEdges)return!0;return!1},enable:function(){var e=this,t=Uh.event();if(e.params.cssMode)return e.wrapperEl.removeEventListener(t,e.mousewheel.handle),!0;if(!t)return!1;if(e.mousewheel.enabled)return!1;var n=e.$el;return"container"!==e.params.mousewheel.eventsTarget&&(n=Yd(e.params.mousewheel.eventsTarget)),n.on("mouseenter",e.mousewheel.handleMouseEnter),n.on("mouseleave",e.mousewheel.handleMouseLeave),n.on(t,e.mousewheel.handle),e.mousewheel.enabled=!0,!0},disable:function(){var e=this,t=Uh.event();if(e.params.cssMode)return e.wrapperEl.addEventListener(t,e.mousewheel.handle),!0;if(!t)return!1;if(!e.mousewheel.enabled)return!1;var n=e.$el;return"container"!==e.params.mousewheel.eventsTarget&&(n=Yd(e.params.mousewheel.eventsTarget)),n.off(t,e.mousewheel.handle),e.mousewheel.enabled=!1,!0}},Gh={name:"mousewheel",params:{mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null}},create:function(){nh(this,{mousewheel:{enabled:!1,lastScrollTime:Jd(),lastEventBeforeSnap:void 0,recentWheelEvents:[],enable:Uh.enable,disable:Uh.disable,handle:Uh.handle,handleMouseEnter:Uh.handleMouseEnter,handleMouseLeave:Uh.handleMouseLeave,animateSlider:Uh.animateSlider,releaseScroll:Uh.releaseScroll}})},on:{init:function(e){!e.params.mousewheel.enabled&&e.params.cssMode&&e.mousewheel.disable(),e.params.mousewheel.enabled&&e.mousewheel.enable()},destroy:function(e){e.params.cssMode&&e.mousewheel.enable(),e.mousewheel.enabled&&e.mousewheel.disable()}}};function qh(){return qh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},qh.apply(this,arguments)}var Xh={toggleEl:function(e,t){e[t?"addClass":"removeClass"](this.params.navigation.disabledClass),e[0]&&"BUTTON"===e[0].tagName&&(e[0].disabled=t)},update:function(){var e=this,t=e.params.navigation,n=e.navigation.toggleEl;if(!e.params.loop){var a=e.navigation,r=a.$nextEl,o=a.$prevEl;o&&o.length>0&&(e.isBeginning?n(o,!0):n(o,!1),e.params.watchOverflow&&e.enabled&&o[e.isLocked?"addClass":"removeClass"](t.lockClass)),r&&r.length>0&&(e.isEnd?n(r,!0):n(r,!1),e.params.watchOverflow&&e.enabled&&r[e.isLocked?"addClass":"removeClass"](t.lockClass))}},onPrevClick:function(e){var t=this;e.preventDefault(),t.isBeginning&&!t.params.loop||t.slidePrev()},onNextClick:function(e){var t=this;e.preventDefault(),t.isEnd&&!t.params.loop||t.slideNext()},init:function(){var e,t,n=this,a=n.params.navigation;(n.params.navigation=rh(n.$el,n.params.navigation,n.params.createElements,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),a.nextEl||a.prevEl)&&(a.nextEl&&(e=Yd(a.nextEl),n.params.uniqueNavElements&&"string"==typeof a.nextEl&&e.length>1&&1===n.$el.find(a.nextEl).length&&(e=n.$el.find(a.nextEl))),a.prevEl&&(t=Yd(a.prevEl),n.params.uniqueNavElements&&"string"==typeof a.prevEl&&t.length>1&&1===n.$el.find(a.prevEl).length&&(t=n.$el.find(a.prevEl))),e&&e.length>0&&e.on("click",n.navigation.onNextClick),t&&t.length>0&&t.on("click",n.navigation.onPrevClick),th(n.navigation,{$nextEl:e,nextEl:e&&e[0],$prevEl:t,prevEl:t&&t[0]}),n.enabled||(e&&e.addClass(a.lockClass),t&&t.addClass(a.lockClass)))},destroy:function(){var e=this,t=e.navigation,n=t.$nextEl,a=t.$prevEl;n&&n.length&&(n.off("click",e.navigation.onNextClick),n.removeClass(e.params.navigation.disabledClass)),a&&a.length&&(a.off("click",e.navigation.onPrevClick),a.removeClass(e.params.navigation.disabledClass))}},Yh={name:"navigation",params:{navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock"}},create:function(){nh(this,{navigation:qh({},Xh)})},on:{init:function(e){e.navigation.init(),e.navigation.update()},toEdge:function(e){e.navigation.update()},fromEdge:function(e){e.navigation.update()},destroy:function(e){e.navigation.destroy()},"enable disable":function(e){var t=e.navigation,n=t.$nextEl,a=t.$prevEl;n&&n[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass),a&&a[e.enabled?"removeClass":"addClass"](e.params.navigation.lockClass)},click:function(e,t){var n=e.navigation,a=n.$nextEl,r=n.$prevEl,o=t.target;if(e.params.navigation.hideOnClick&&!Yd(o).is(r)&&!Yd(o).is(a)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===o||e.pagination.el.contains(o)))return;var s;a?s=a.hasClass(e.params.navigation.hiddenClass):r&&(s=r.hasClass(e.params.navigation.hiddenClass)),!0===s?e.emit("navigationShow"):e.emit("navigationHide"),a&&a.toggleClass(e.params.navigation.hiddenClass),r&&r.toggleClass(e.params.navigation.hiddenClass)}}}};function Kh(){return Kh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Kh.apply(this,arguments)}var Jh={update:function(){var e=this,t=e.rtl,n=e.params.pagination;if(n.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var a,r=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,o=e.pagination.$el,s=e.params.loop?Math.ceil((r-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?((a=Math.ceil((e.activeIndex-e.loopedSlides)/e.params.slidesPerGroup))>r-1-2*e.loopedSlides&&(a-=r-2*e.loopedSlides),a>s-1&&(a-=s),a<0&&"bullets"!==e.params.paginationType&&(a=s+a)):a=void 0!==e.snapIndex?e.snapIndex:e.activeIndex||0,"bullets"===n.type&&e.pagination.bullets&&e.pagination.bullets.length>0){var i,l,u,c=e.pagination.bullets;if(n.dynamicBullets&&(e.pagination.bulletSize=c.eq(0)[e.isHorizontal()?"outerWidth":"outerHeight"](!0),o.css(e.isHorizontal()?"width":"height",e.pagination.bulletSize*(n.dynamicMainBullets+4)+"px"),n.dynamicMainBullets>1&&void 0!==e.previousIndex&&(e.pagination.dynamicBulletIndex+=a-e.previousIndex,e.pagination.dynamicBulletIndex>n.dynamicMainBullets-1?e.pagination.dynamicBulletIndex=n.dynamicMainBullets-1:e.pagination.dynamicBulletIndex<0&&(e.pagination.dynamicBulletIndex=0)),i=a-e.pagination.dynamicBulletIndex,u=((l=i+(Math.min(c.length,n.dynamicMainBullets)-1))+i)/2),c.removeClass(n.bulletActiveClass+" "+n.bulletActiveClass+"-next "+n.bulletActiveClass+"-next-next "+n.bulletActiveClass+"-prev "+n.bulletActiveClass+"-prev-prev "+n.bulletActiveClass+"-main"),o.length>1)c.each((function(e){var t=Yd(e),r=t.index();r===a&&t.addClass(n.bulletActiveClass),n.dynamicBullets&&(r>=i&&r<=l&&t.addClass(n.bulletActiveClass+"-main"),r===i&&t.prev().addClass(n.bulletActiveClass+"-prev").prev().addClass(n.bulletActiveClass+"-prev-prev"),r===l&&t.next().addClass(n.bulletActiveClass+"-next").next().addClass(n.bulletActiveClass+"-next-next"))}));else{var p=c.eq(a),d=p.index();if(p.addClass(n.bulletActiveClass),n.dynamicBullets){for(var h=c.eq(i),f=c.eq(l),m=i;m<=l;m+=1)c.eq(m).addClass(n.bulletActiveClass+"-main");if(e.params.loop)if(d>=c.length-n.dynamicMainBullets){for(var g=n.dynamicMainBullets;g>=0;g-=1)c.eq(c.length-g).addClass(n.bulletActiveClass+"-main");c.eq(c.length-n.dynamicMainBullets-1).addClass(n.bulletActiveClass+"-prev")}else h.prev().addClass(n.bulletActiveClass+"-prev").prev().addClass(n.bulletActiveClass+"-prev-prev"),f.next().addClass(n.bulletActiveClass+"-next").next().addClass(n.bulletActiveClass+"-next-next");else h.prev().addClass(n.bulletActiveClass+"-prev").prev().addClass(n.bulletActiveClass+"-prev-prev"),f.next().addClass(n.bulletActiveClass+"-next").next().addClass(n.bulletActiveClass+"-next-next")}}if(n.dynamicBullets){var v=Math.min(c.length,n.dynamicMainBullets+4),b=(e.pagination.bulletSize*v-e.pagination.bulletSize)/2-u*e.pagination.bulletSize,y=t?"right":"left";c.css(e.isHorizontal()?y:"top",b+"px")}}if("fraction"===n.type&&(o.find(ah(n.currentClass)).text(n.formatFractionCurrent(a+1)),o.find(ah(n.totalClass)).text(n.formatFractionTotal(s))),"progressbar"===n.type){var w;w=n.progressbarOpposite?e.isHorizontal()?"vertical":"horizontal":e.isHorizontal()?"horizontal":"vertical";var x=(a+1)/s,k=1,C=1;"horizontal"===w?k=x:C=x,o.find(ah(n.progressbarFillClass)).transform("translate3d(0,0,0) scaleX("+k+") scaleY("+C+")").transition(e.params.speed)}"custom"===n.type&&n.renderCustom?(o.html(n.renderCustom(e,a+1,s)),e.emit("paginationRender",o[0])):e.emit("paginationUpdate",o[0]),e.params.watchOverflow&&e.enabled&&o[e.isLocked?"addClass":"removeClass"](n.lockClass)}},render:function(){var e=this,t=e.params.pagination;if(t.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var n=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,a=e.pagination.$el,r="";if("bullets"===t.type){var o=e.params.loop?Math.ceil((n-2*e.loopedSlides)/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&!e.params.loop&&o>n&&(o=n);for(var s=0;s<o;s+=1)t.renderBullet?r+=t.renderBullet.call(e,s,t.bulletClass):r+="<"+t.bulletElement+' class="'+t.bulletClass+'"></'+t.bulletElement+">";a.html(r),e.pagination.bullets=a.find(ah(t.bulletClass))}"fraction"===t.type&&(r=t.renderFraction?t.renderFraction.call(e,t.currentClass,t.totalClass):'<span class="'+t.currentClass+'"></span> / <span class="'+t.totalClass+'"></span>',a.html(r)),"progressbar"===t.type&&(r=t.renderProgressbar?t.renderProgressbar.call(e,t.progressbarFillClass):'<span class="'+t.progressbarFillClass+'"></span>',a.html(r)),"custom"!==t.type&&e.emit("paginationRender",e.pagination.$el[0])}},init:function(){var e=this;e.params.pagination=rh(e.$el,e.params.pagination,e.params.createElements,{el:"swiper-pagination"});var t=e.params.pagination;if(t.el){var n=Yd(t.el);0!==n.length&&(e.params.uniqueNavElements&&"string"==typeof t.el&&n.length>1&&(n=e.$el.find(t.el)),"bullets"===t.type&&t.clickable&&n.addClass(t.clickableClass),n.addClass(t.modifierClass+t.type),"bullets"===t.type&&t.dynamicBullets&&(n.addClass(""+t.modifierClass+t.type+"-dynamic"),e.pagination.dynamicBulletIndex=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),"progressbar"===t.type&&t.progressbarOpposite&&n.addClass(t.progressbarOppositeClass),t.clickable&&n.on("click",ah(t.bulletClass),(function(t){t.preventDefault();var n=Yd(this).index()*e.params.slidesPerGroup;e.params.loop&&(n+=e.loopedSlides),e.slideTo(n)})),th(e.pagination,{$el:n,el:n[0]}),e.enabled||n.addClass(t.lockClass))}},destroy:function(){var e=this,t=e.params.pagination;if(t.el&&e.pagination.el&&e.pagination.$el&&0!==e.pagination.$el.length){var n=e.pagination.$el;n.removeClass(t.hiddenClass),n.removeClass(t.modifierClass+t.type),e.pagination.bullets&&e.pagination.bullets.removeClass(t.bulletActiveClass),t.clickable&&n.off("click",ah(t.bulletClass))}}},Zh={name:"pagination",params:{pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",modifierClass:"swiper-pagination-",currentClass:"swiper-pagination-current",totalClass:"swiper-pagination-total",hiddenClass:"swiper-pagination-hidden",progressbarFillClass:"swiper-pagination-progressbar-fill",progressbarOppositeClass:"swiper-pagination-progressbar-opposite",clickableClass:"swiper-pagination-clickable",lockClass:"swiper-pagination-lock"}},create:function(){nh(this,{pagination:Kh({dynamicBulletIndex:0},Jh)})},on:{init:function(e){e.pagination.init(),e.pagination.render(),e.pagination.update()},activeIndexChange:function(e){(e.params.loop||void 0===e.snapIndex)&&e.pagination.update()},snapIndexChange:function(e){e.params.loop||e.pagination.update()},slidesLengthChange:function(e){e.params.loop&&(e.pagination.render(),e.pagination.update())},snapGridLengthChange:function(e){e.params.loop||(e.pagination.render(),e.pagination.update())},destroy:function(e){e.pagination.destroy()},"enable disable":function(e){var t=e.pagination.$el;t&&t[e.enabled?"removeClass":"addClass"](e.params.pagination.lockClass)},click:function(e,t){var n=t.target;if(e.params.pagination.el&&e.params.pagination.hideOnClick&&e.pagination.$el.length>0&&!Yd(n).hasClass(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&n===e.navigation.nextEl||e.navigation.prevEl&&n===e.navigation.prevEl))return;!0===e.pagination.$el.hasClass(e.params.pagination.hiddenClass)?e.emit("paginationShow"):e.emit("paginationHide"),e.pagination.$el.toggleClass(e.params.pagination.hiddenClass)}}}};function Qh(){return Qh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Qh.apply(this,arguments)}var ef={setTranslate:function(){var e=this;if(e.params.scrollbar.el&&e.scrollbar.el){var t=e.scrollbar,n=e.rtlTranslate,a=e.progress,r=t.dragSize,o=t.trackSize,s=t.$dragEl,i=t.$el,l=e.params.scrollbar,u=r,c=(o-r)*a;n?(c=-c)>0?(u=r-c,c=0):-c+r>o&&(u=o+c):c<0?(u=r+c,c=0):c+r>o&&(u=o-c),e.isHorizontal()?(s.transform("translate3d("+c+"px, 0, 0)"),s[0].style.width=u+"px"):(s.transform("translate3d(0px, "+c+"px, 0)"),s[0].style.height=u+"px"),l.hide&&(clearTimeout(e.scrollbar.timeout),i[0].style.opacity=1,e.scrollbar.timeout=setTimeout((function(){i[0].style.opacity=0,i.transition(400)}),1e3))}},setTransition:function(e){var t=this;t.params.scrollbar.el&&t.scrollbar.el&&t.scrollbar.$dragEl.transition(e)},updateSize:function(){var e=this;if(e.params.scrollbar.el&&e.scrollbar.el){var t=e.scrollbar,n=t.$dragEl,a=t.$el;n[0].style.width="",n[0].style.height="";var r,o=e.isHorizontal()?a[0].offsetWidth:a[0].offsetHeight,s=e.size/e.virtualSize,i=s*(o/e.size);r="auto"===e.params.scrollbar.dragSize?o*s:parseInt(e.params.scrollbar.dragSize,10),e.isHorizontal()?n[0].style.width=r+"px":n[0].style.height=r+"px",a[0].style.display=s>=1?"none":"",e.params.scrollbar.hide&&(a[0].style.opacity=0),th(t,{trackSize:o,divider:s,moveDivider:i,dragSize:r}),e.params.watchOverflow&&e.enabled&&t.$el[e.isLocked?"addClass":"removeClass"](e.params.scrollbar.lockClass)}},getPointerPosition:function(e){return this.isHorizontal()?"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientX:e.clientX:"touchstart"===e.type||"touchmove"===e.type?e.targetTouches[0].clientY:e.clientY},setDragPosition:function(e){var t,n=this,a=n.scrollbar,r=n.rtlTranslate,o=a.$el,s=a.dragSize,i=a.trackSize,l=a.dragStartPos;t=(a.getPointerPosition(e)-o.offset()[n.isHorizontal()?"left":"top"]-(null!==l?l:s/2))/(i-s),t=Math.max(Math.min(t,1),0),r&&(t=1-t);var u=n.minTranslate()+(n.maxTranslate()-n.minTranslate())*t;n.updateProgress(u),n.setTranslate(u),n.updateActiveIndex(),n.updateSlidesClasses()},onDragStart:function(e){var t=this,n=t.params.scrollbar,a=t.scrollbar,r=t.$wrapperEl,o=a.$el,s=a.$dragEl;t.scrollbar.isTouched=!0,t.scrollbar.dragStartPos=e.target===s[0]||e.target===s?a.getPointerPosition(e)-e.target.getBoundingClientRect()[t.isHorizontal()?"left":"top"]:null,e.preventDefault(),e.stopPropagation(),r.transition(100),s.transition(100),a.setDragPosition(e),clearTimeout(t.scrollbar.dragTimeout),o.transition(0),n.hide&&o.css("opacity",1),t.params.cssMode&&t.$wrapperEl.css("scroll-snap-type","none"),t.emit("scrollbarDragStart",e)},onDragMove:function(e){var t=this,n=t.scrollbar,a=t.$wrapperEl,r=n.$el,o=n.$dragEl;t.scrollbar.isTouched&&(e.preventDefault?e.preventDefault():e.returnValue=!1,n.setDragPosition(e),a.transition(0),r.transition(0),o.transition(0),t.emit("scrollbarDragMove",e))},onDragEnd:function(e){var t=this,n=t.params.scrollbar,a=t.scrollbar,r=t.$wrapperEl,o=a.$el;t.scrollbar.isTouched&&(t.scrollbar.isTouched=!1,t.params.cssMode&&(t.$wrapperEl.css("scroll-snap-type",""),r.transition("")),n.hide&&(clearTimeout(t.scrollbar.dragTimeout),t.scrollbar.dragTimeout=Kd((function(){o.css("opacity",0),o.transition(400)}),1e3)),t.emit("scrollbarDragEnd",e),n.snapOnRelease&&t.slideToClosest())},enableDraggable:function(){var e=this;if(e.params.scrollbar.el){var t=Vo(),n=e.scrollbar,a=e.touchEventsTouch,r=e.touchEventsDesktop,o=e.params,s=e.support,i=n.$el[0],l=!(!s.passiveListener||!o.passiveListeners)&&{passive:!1,capture:!1},u=!(!s.passiveListener||!o.passiveListeners)&&{passive:!0,capture:!1};i&&(s.touch?(i.addEventListener(a.start,e.scrollbar.onDragStart,l),i.addEventListener(a.move,e.scrollbar.onDragMove,l),i.addEventListener(a.end,e.scrollbar.onDragEnd,u)):(i.addEventListener(r.start,e.scrollbar.onDragStart,l),t.addEventListener(r.move,e.scrollbar.onDragMove,l),t.addEventListener(r.end,e.scrollbar.onDragEnd,u)))}},disableDraggable:function(){var e=this;if(e.params.scrollbar.el){var t=Vo(),n=e.scrollbar,a=e.touchEventsTouch,r=e.touchEventsDesktop,o=e.params,s=e.support,i=n.$el[0],l=!(!s.passiveListener||!o.passiveListeners)&&{passive:!1,capture:!1},u=!(!s.passiveListener||!o.passiveListeners)&&{passive:!0,capture:!1};i&&(s.touch?(i.removeEventListener(a.start,e.scrollbar.onDragStart,l),i.removeEventListener(a.move,e.scrollbar.onDragMove,l),i.removeEventListener(a.end,e.scrollbar.onDragEnd,u)):(i.removeEventListener(r.start,e.scrollbar.onDragStart,l),t.removeEventListener(r.move,e.scrollbar.onDragMove,l),t.removeEventListener(r.end,e.scrollbar.onDragEnd,u)))}},init:function(){var e=this,t=e.scrollbar,n=e.$el;e.params.scrollbar=rh(n,e.params.scrollbar,e.params.createElements,{el:"swiper-scrollbar"});var a=e.params.scrollbar;if(a.el){var r=Yd(a.el);e.params.uniqueNavElements&&"string"==typeof a.el&&r.length>1&&1===n.find(a.el).length&&(r=n.find(a.el));var o=r.find("."+e.params.scrollbar.dragClass);0===o.length&&(o=Yd('<div class="'+e.params.scrollbar.dragClass+'"></div>'),r.append(o)),th(t,{$el:r,el:r[0],$dragEl:o,dragEl:o[0]}),a.draggable&&t.enableDraggable(),r&&r[e.enabled?"removeClass":"addClass"](e.params.scrollbar.lockClass)}},destroy:function(){this.scrollbar.disableDraggable()}},tf={name:"scrollbar",params:{scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag"}},create:function(){nh(this,{scrollbar:Qh({isTouched:!1,timeout:null,dragTimeout:null},ef)})},on:{init:function(e){e.scrollbar.init(),e.scrollbar.updateSize(),e.scrollbar.setTranslate()},update:function(e){e.scrollbar.updateSize()},resize:function(e){e.scrollbar.updateSize()},observerUpdate:function(e){e.scrollbar.updateSize()},setTranslate:function(e){e.scrollbar.setTranslate()},setTransition:function(e,t){e.scrollbar.setTransition(t)},"enable disable":function(e){var t=e.scrollbar.$el;t&&t[e.enabled?"removeClass":"addClass"](e.params.scrollbar.lockClass)},destroy:function(e){e.scrollbar.destroy()}}};function nf(){return nf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},nf.apply(this,arguments)}var af={setTransform:function(e,t){var n=this.rtl,a=Yd(e),r=n?-1:1,o=a.attr("data-swiper-parallax")||"0",s=a.attr("data-swiper-parallax-x"),i=a.attr("data-swiper-parallax-y"),l=a.attr("data-swiper-parallax-scale"),u=a.attr("data-swiper-parallax-opacity");if(s||i?(s=s||"0",i=i||"0"):this.isHorizontal()?(s=o,i="0"):(i=o,s="0"),s=s.indexOf("%")>=0?parseInt(s,10)*t*r+"%":s*t*r+"px",i=i.indexOf("%")>=0?parseInt(i,10)*t+"%":i*t+"px",null!=u){var c=u-(u-1)*(1-Math.abs(t));a[0].style.opacity=c}if(null==l)a.transform("translate3d("+s+", "+i+", 0px)");else{var p=l-(l-1)*(1-Math.abs(t));a.transform("translate3d("+s+", "+i+", 0px) scale("+p+")")}},setTranslate:function(){var e=this,t=e.$el,n=e.slides,a=e.progress,r=e.snapGrid;t.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t){e.parallax.setTransform(t,a)})),n.each((function(t,n){var o=t.progress;e.params.slidesPerGroup>1&&"auto"!==e.params.slidesPerView&&(o+=Math.ceil(n/2)-a*(r.length-1)),o=Math.min(Math.max(o,-1),1),Yd(t).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t){e.parallax.setTransform(t,o)}))}))},setTransition:function(e){void 0===e&&(e=this.params.speed);this.$el.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y], [data-swiper-parallax-opacity], [data-swiper-parallax-scale]").each((function(t){var n=Yd(t),a=parseInt(n.attr("data-swiper-parallax-duration"),10)||e;0===e&&(a=0),n.transition(a)}))}},rf={name:"parallax",params:{parallax:{enabled:!1}},create:function(){nh(this,{parallax:nf({},af)})},on:{beforeInit:function(e){e.params.parallax.enabled&&(e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)},init:function(e){e.params.parallax.enabled&&e.parallax.setTranslate()},setTranslate:function(e){e.params.parallax.enabled&&e.parallax.setTranslate()},setTransition:function(e,t){e.params.parallax.enabled&&e.parallax.setTransition(t)}}};function of(){return of=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},of.apply(this,arguments)}var sf={getDistanceBetweenTouches:function(e){if(e.targetTouches.length<2)return 1;var t=e.targetTouches[0].pageX,n=e.targetTouches[0].pageY,a=e.targetTouches[1].pageX,r=e.targetTouches[1].pageY;return Math.sqrt(Math.pow(a-t,2)+Math.pow(r-n,2))},onGestureStart:function(e){var t=this,n=t.support,a=t.params.zoom,r=t.zoom,o=r.gesture;if(r.fakeGestureTouched=!1,r.fakeGestureMoved=!1,!n.gestures){if("touchstart"!==e.type||"touchstart"===e.type&&e.targetTouches.length<2)return;r.fakeGestureTouched=!0,o.scaleStart=sf.getDistanceBetweenTouches(e)}o.$slideEl&&o.$slideEl.length||(o.$slideEl=Yd(e.target).closest("."+t.params.slideClass),0===o.$slideEl.length&&(o.$slideEl=t.slides.eq(t.activeIndex)),o.$imageEl=o.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),o.$imageWrapEl=o.$imageEl.parent("."+a.containerClass),o.maxRatio=o.$imageWrapEl.attr("data-swiper-zoom")||a.maxRatio,0!==o.$imageWrapEl.length)?(o.$imageEl&&o.$imageEl.transition(0),t.zoom.isScaling=!0):o.$imageEl=void 0},onGestureChange:function(e){var t=this,n=t.support,a=t.params.zoom,r=t.zoom,o=r.gesture;if(!n.gestures){if("touchmove"!==e.type||"touchmove"===e.type&&e.targetTouches.length<2)return;r.fakeGestureMoved=!0,o.scaleMove=sf.getDistanceBetweenTouches(e)}o.$imageEl&&0!==o.$imageEl.length?(n.gestures?r.scale=e.scale*r.currentScale:r.scale=o.scaleMove/o.scaleStart*r.currentScale,r.scale>o.maxRatio&&(r.scale=o.maxRatio-1+Math.pow(r.scale-o.maxRatio+1,.5)),r.scale<a.minRatio&&(r.scale=a.minRatio+1-Math.pow(a.minRatio-r.scale+1,.5)),o.$imageEl.transform("translate3d(0,0,0) scale("+r.scale+")")):"gesturechange"===e.type&&r.onGestureStart(e)},onGestureEnd:function(e){var t=this,n=t.device,a=t.support,r=t.params.zoom,o=t.zoom,s=o.gesture;if(!a.gestures){if(!o.fakeGestureTouched||!o.fakeGestureMoved)return;if("touchend"!==e.type||"touchend"===e.type&&e.changedTouches.length<2&&!n.android)return;o.fakeGestureTouched=!1,o.fakeGestureMoved=!1}s.$imageEl&&0!==s.$imageEl.length&&(o.scale=Math.max(Math.min(o.scale,s.maxRatio),r.minRatio),s.$imageEl.transition(t.params.speed).transform("translate3d(0,0,0) scale("+o.scale+")"),o.currentScale=o.scale,o.isScaling=!1,1===o.scale&&(s.$slideEl=void 0))},onTouchStart:function(e){var t=this.device,n=this.zoom,a=n.gesture,r=n.image;a.$imageEl&&0!==a.$imageEl.length&&(r.isTouched||(t.android&&e.cancelable&&e.preventDefault(),r.isTouched=!0,r.touchesStart.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,r.touchesStart.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY))},onTouchMove:function(e){var t=this,n=t.zoom,a=n.gesture,r=n.image,o=n.velocity;if(a.$imageEl&&0!==a.$imageEl.length&&(t.allowClick=!1,r.isTouched&&a.$slideEl)){r.isMoved||(r.width=a.$imageEl[0].offsetWidth,r.height=a.$imageEl[0].offsetHeight,r.startX=Zd(a.$imageWrapEl[0],"x")||0,r.startY=Zd(a.$imageWrapEl[0],"y")||0,a.slideWidth=a.$slideEl[0].offsetWidth,a.slideHeight=a.$slideEl[0].offsetHeight,a.$imageWrapEl.transition(0));var s=r.width*n.scale,i=r.height*n.scale;if(!(s<a.slideWidth&&i<a.slideHeight)){if(r.minX=Math.min(a.slideWidth/2-s/2,0),r.maxX=-r.minX,r.minY=Math.min(a.slideHeight/2-i/2,0),r.maxY=-r.minY,r.touchesCurrent.x="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,r.touchesCurrent.y="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,!r.isMoved&&!n.isScaling){if(t.isHorizontal()&&(Math.floor(r.minX)===Math.floor(r.startX)&&r.touchesCurrent.x<r.touchesStart.x||Math.floor(r.maxX)===Math.floor(r.startX)&&r.touchesCurrent.x>r.touchesStart.x))return void(r.isTouched=!1);if(!t.isHorizontal()&&(Math.floor(r.minY)===Math.floor(r.startY)&&r.touchesCurrent.y<r.touchesStart.y||Math.floor(r.maxY)===Math.floor(r.startY)&&r.touchesCurrent.y>r.touchesStart.y))return void(r.isTouched=!1)}e.cancelable&&e.preventDefault(),e.stopPropagation(),r.isMoved=!0,r.currentX=r.touchesCurrent.x-r.touchesStart.x+r.startX,r.currentY=r.touchesCurrent.y-r.touchesStart.y+r.startY,r.currentX<r.minX&&(r.currentX=r.minX+1-Math.pow(r.minX-r.currentX+1,.8)),r.currentX>r.maxX&&(r.currentX=r.maxX-1+Math.pow(r.currentX-r.maxX+1,.8)),r.currentY<r.minY&&(r.currentY=r.minY+1-Math.pow(r.minY-r.currentY+1,.8)),r.currentY>r.maxY&&(r.currentY=r.maxY-1+Math.pow(r.currentY-r.maxY+1,.8)),o.prevPositionX||(o.prevPositionX=r.touchesCurrent.x),o.prevPositionY||(o.prevPositionY=r.touchesCurrent.y),o.prevTime||(o.prevTime=Date.now()),o.x=(r.touchesCurrent.x-o.prevPositionX)/(Date.now()-o.prevTime)/2,o.y=(r.touchesCurrent.y-o.prevPositionY)/(Date.now()-o.prevTime)/2,Math.abs(r.touchesCurrent.x-o.prevPositionX)<2&&(o.x=0),Math.abs(r.touchesCurrent.y-o.prevPositionY)<2&&(o.y=0),o.prevPositionX=r.touchesCurrent.x,o.prevPositionY=r.touchesCurrent.y,o.prevTime=Date.now(),a.$imageWrapEl.transform("translate3d("+r.currentX+"px, "+r.currentY+"px,0)")}}},onTouchEnd:function(){var e=this.zoom,t=e.gesture,n=e.image,a=e.velocity;if(t.$imageEl&&0!==t.$imageEl.length){if(!n.isTouched||!n.isMoved)return n.isTouched=!1,void(n.isMoved=!1);n.isTouched=!1,n.isMoved=!1;var r=300,o=300,s=a.x*r,i=n.currentX+s,l=a.y*o,u=n.currentY+l;0!==a.x&&(r=Math.abs((i-n.currentX)/a.x)),0!==a.y&&(o=Math.abs((u-n.currentY)/a.y));var c=Math.max(r,o);n.currentX=i,n.currentY=u;var p=n.width*e.scale,d=n.height*e.scale;n.minX=Math.min(t.slideWidth/2-p/2,0),n.maxX=-n.minX,n.minY=Math.min(t.slideHeight/2-d/2,0),n.maxY=-n.minY,n.currentX=Math.max(Math.min(n.currentX,n.maxX),n.minX),n.currentY=Math.max(Math.min(n.currentY,n.maxY),n.minY),t.$imageWrapEl.transition(c).transform("translate3d("+n.currentX+"px, "+n.currentY+"px,0)")}},onTransitionEnd:function(){var e=this,t=e.zoom,n=t.gesture;n.$slideEl&&e.previousIndex!==e.activeIndex&&(n.$imageEl&&n.$imageEl.transform("translate3d(0,0,0) scale(1)"),n.$imageWrapEl&&n.$imageWrapEl.transform("translate3d(0,0,0)"),t.scale=1,t.currentScale=1,n.$slideEl=void 0,n.$imageEl=void 0,n.$imageWrapEl=void 0)},toggle:function(e){var t=this.zoom;t.scale&&1!==t.scale?t.out():t.in(e)},in:function(e){var t,n,a,r,o,s,i,l,u,c,p,d,h,f,m,g,v=this,b=Ho(),y=v.zoom,w=v.params.zoom,x=y.gesture,k=y.image;(x.$slideEl||(e&&e.target&&(x.$slideEl=Yd(e.target).closest("."+v.params.slideClass)),x.$slideEl||(v.params.virtual&&v.params.virtual.enabled&&v.virtual?x.$slideEl=v.$wrapperEl.children("."+v.params.slideActiveClass):x.$slideEl=v.slides.eq(v.activeIndex)),x.$imageEl=x.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),x.$imageWrapEl=x.$imageEl.parent("."+w.containerClass)),x.$imageEl&&0!==x.$imageEl.length&&x.$imageWrapEl&&0!==x.$imageWrapEl.length)&&(x.$slideEl.addClass(""+w.zoomedSlideClass),void 0===k.touchesStart.x&&e?(t="touchend"===e.type?e.changedTouches[0].pageX:e.pageX,n="touchend"===e.type?e.changedTouches[0].pageY:e.pageY):(t=k.touchesStart.x,n=k.touchesStart.y),y.scale=x.$imageWrapEl.attr("data-swiper-zoom")||w.maxRatio,y.currentScale=x.$imageWrapEl.attr("data-swiper-zoom")||w.maxRatio,e?(m=x.$slideEl[0].offsetWidth,g=x.$slideEl[0].offsetHeight,a=x.$slideEl.offset().left+b.scrollX+m/2-t,r=x.$slideEl.offset().top+b.scrollY+g/2-n,i=x.$imageEl[0].offsetWidth,l=x.$imageEl[0].offsetHeight,u=i*y.scale,c=l*y.scale,h=-(p=Math.min(m/2-u/2,0)),f=-(d=Math.min(g/2-c/2,0)),(o=a*y.scale)<p&&(o=p),o>h&&(o=h),(s=r*y.scale)<d&&(s=d),s>f&&(s=f)):(o=0,s=0),x.$imageWrapEl.transition(300).transform("translate3d("+o+"px, "+s+"px,0)"),x.$imageEl.transition(300).transform("translate3d(0,0,0) scale("+y.scale+")"))},out:function(){var e=this,t=e.zoom,n=e.params.zoom,a=t.gesture;a.$slideEl||(e.params.virtual&&e.params.virtual.enabled&&e.virtual?a.$slideEl=e.$wrapperEl.children("."+e.params.slideActiveClass):a.$slideEl=e.slides.eq(e.activeIndex),a.$imageEl=a.$slideEl.find("img, svg, canvas, picture, .swiper-zoom-target"),a.$imageWrapEl=a.$imageEl.parent("."+n.containerClass)),a.$imageEl&&0!==a.$imageEl.length&&a.$imageWrapEl&&0!==a.$imageWrapEl.length&&(t.scale=1,t.currentScale=1,a.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"),a.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"),a.$slideEl.removeClass(""+n.zoomedSlideClass),a.$slideEl=void 0)},toggleGestures:function(e){var t=this,n=t.zoom,a=n.slideSelector,r=n.passiveListener;t.$wrapperEl[e]("gesturestart",a,n.onGestureStart,r),t.$wrapperEl[e]("gesturechange",a,n.onGestureChange,r),t.$wrapperEl[e]("gestureend",a,n.onGestureEnd,r)},enableGestures:function(){this.zoom.gesturesEnabled||(this.zoom.gesturesEnabled=!0,this.zoom.toggleGestures("on"))},disableGestures:function(){this.zoom.gesturesEnabled&&(this.zoom.gesturesEnabled=!1,this.zoom.toggleGestures("off"))},enable:function(){var e=this,t=e.support,n=e.zoom;if(!n.enabled){n.enabled=!0;var a=!("touchstart"!==e.touchEvents.start||!t.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1},r=!t.passiveListener||{passive:!1,capture:!0},o="."+e.params.slideClass;e.zoom.passiveListener=a,e.zoom.slideSelector=o,t.gestures?(e.$wrapperEl.on(e.touchEvents.start,e.zoom.enableGestures,a),e.$wrapperEl.on(e.touchEvents.end,e.zoom.disableGestures,a)):"touchstart"===e.touchEvents.start&&(e.$wrapperEl.on(e.touchEvents.start,o,n.onGestureStart,a),e.$wrapperEl.on(e.touchEvents.move,o,n.onGestureChange,r),e.$wrapperEl.on(e.touchEvents.end,o,n.onGestureEnd,a),e.touchEvents.cancel&&e.$wrapperEl.on(e.touchEvents.cancel,o,n.onGestureEnd,a)),e.$wrapperEl.on(e.touchEvents.move,"."+e.params.zoom.containerClass,n.onTouchMove,r)}},disable:function(){var e=this,t=e.zoom;if(t.enabled){var n=e.support;e.zoom.enabled=!1;var a=!("touchstart"!==e.touchEvents.start||!n.passiveListener||!e.params.passiveListeners)&&{passive:!0,capture:!1},r=!n.passiveListener||{passive:!1,capture:!0},o="."+e.params.slideClass;n.gestures?(e.$wrapperEl.off(e.touchEvents.start,e.zoom.enableGestures,a),e.$wrapperEl.off(e.touchEvents.end,e.zoom.disableGestures,a)):"touchstart"===e.touchEvents.start&&(e.$wrapperEl.off(e.touchEvents.start,o,t.onGestureStart,a),e.$wrapperEl.off(e.touchEvents.move,o,t.onGestureChange,r),e.$wrapperEl.off(e.touchEvents.end,o,t.onGestureEnd,a),e.touchEvents.cancel&&e.$wrapperEl.off(e.touchEvents.cancel,o,t.onGestureEnd,a)),e.$wrapperEl.off(e.touchEvents.move,"."+e.params.zoom.containerClass,t.onTouchMove,r)}}},lf={name:"zoom",params:{zoom:{enabled:!1,maxRatio:3,minRatio:1,toggle:!0,containerClass:"swiper-zoom-container",zoomedSlideClass:"swiper-slide-zoomed"}},create:function(){var e=this;nh(e,{zoom:of({enabled:!1,scale:1,currentScale:1,isScaling:!1,gesture:{$slideEl:void 0,slideWidth:void 0,slideHeight:void 0,$imageEl:void 0,$imageWrapEl:void 0,maxRatio:3},image:{isTouched:void 0,isMoved:void 0,currentX:void 0,currentY:void 0,minX:void 0,minY:void 0,maxX:void 0,maxY:void 0,width:void 0,height:void 0,startX:void 0,startY:void 0,touchesStart:{},touchesCurrent:{}},velocity:{x:void 0,y:void 0,prevPositionX:void 0,prevPositionY:void 0,prevTime:void 0}},sf)});var t=1;Object.defineProperty(e.zoom,"scale",{get:function(){return t},set:function(n){if(t!==n){var a=e.zoom.gesture.$imageEl?e.zoom.gesture.$imageEl[0]:void 0,r=e.zoom.gesture.$slideEl?e.zoom.gesture.$slideEl[0]:void 0;e.emit("zoomChange",n,a,r)}t=n}})},on:{init:function(e){e.params.zoom.enabled&&e.zoom.enable()},destroy:function(e){e.zoom.disable()},touchStart:function(e,t){e.zoom.enabled&&e.zoom.onTouchStart(t)},touchEnd:function(e,t){e.zoom.enabled&&e.zoom.onTouchEnd(t)},doubleTap:function(e,t){!e.animating&&e.params.zoom.enabled&&e.zoom.enabled&&e.params.zoom.toggle&&e.zoom.toggle(t)},transitionEnd:function(e){e.zoom.enabled&&e.params.zoom.enabled&&e.zoom.onTransitionEnd()},slideChange:function(e){e.zoom.enabled&&e.params.zoom.enabled&&e.params.cssMode&&e.zoom.onTransitionEnd()}}};function uf(){return uf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},uf.apply(this,arguments)}var cf={loadInSlide:function(e,t){void 0===t&&(t=!0);var n=this,a=n.params.lazy;if(void 0!==e&&0!==n.slides.length){var r=n.virtual&&n.params.virtual.enabled?n.$wrapperEl.children("."+n.params.slideClass+'[data-swiper-slide-index="'+e+'"]'):n.slides.eq(e),o=r.find("."+a.elementClass+":not(."+a.loadedClass+"):not(."+a.loadingClass+")");!r.hasClass(a.elementClass)||r.hasClass(a.loadedClass)||r.hasClass(a.loadingClass)||o.push(r[0]),0!==o.length&&o.each((function(e){var o=Yd(e);o.addClass(a.loadingClass);var s=o.attr("data-background"),i=o.attr("data-src"),l=o.attr("data-srcset"),u=o.attr("data-sizes"),c=o.parent("picture");n.loadImage(o[0],i||s,l,u,!1,(function(){if(null!=n&&n&&(!n||n.params)&&!n.destroyed){if(s?(o.css("background-image",'url("'+s+'")'),o.removeAttr("data-background")):(l&&(o.attr("srcset",l),o.removeAttr("data-srcset")),u&&(o.attr("sizes",u),o.removeAttr("data-sizes")),c.length&&c.children("source").each((function(e){var t=Yd(e);t.attr("data-srcset")&&(t.attr("srcset",t.attr("data-srcset")),t.removeAttr("data-srcset"))})),i&&(o.attr("src",i),o.removeAttr("data-src"))),o.addClass(a.loadedClass).removeClass(a.loadingClass),r.find("."+a.preloaderClass).remove(),n.params.loop&&t){var e=r.attr("data-swiper-slide-index");if(r.hasClass(n.params.slideDuplicateClass)){var p=n.$wrapperEl.children('[data-swiper-slide-index="'+e+'"]:not(.'+n.params.slideDuplicateClass+")");n.lazy.loadInSlide(p.index(),!1)}else{var d=n.$wrapperEl.children("."+n.params.slideDuplicateClass+'[data-swiper-slide-index="'+e+'"]');n.lazy.loadInSlide(d.index(),!1)}}n.emit("lazyImageReady",r[0],o[0]),n.params.autoHeight&&n.updateAutoHeight()}})),n.emit("lazyImageLoad",r[0],o[0])}))}},load:function(){var e=this,t=e.$wrapperEl,n=e.params,a=e.slides,r=e.activeIndex,o=e.virtual&&n.virtual.enabled,s=n.lazy,i=n.slidesPerView;function l(e){if(o){if(t.children("."+n.slideClass+'[data-swiper-slide-index="'+e+'"]').length)return!0}else if(a[e])return!0;return!1}function u(e){return o?Yd(e).attr("data-swiper-slide-index"):Yd(e).index()}if("auto"===i&&(i=0),e.lazy.initialImageLoaded||(e.lazy.initialImageLoaded=!0),e.params.watchSlidesVisibility)t.children("."+n.slideVisibleClass).each((function(t){var n=o?Yd(t).attr("data-swiper-slide-index"):Yd(t).index();e.lazy.loadInSlide(n)}));else if(i>1)for(var c=r;c<r+i;c+=1)l(c)&&e.lazy.loadInSlide(c);else e.lazy.loadInSlide(r);if(s.loadPrevNext)if(i>1||s.loadPrevNextAmount&&s.loadPrevNextAmount>1){for(var p=s.loadPrevNextAmount,d=i,h=Math.min(r+d+Math.max(p,d),a.length),f=Math.max(r-Math.max(d,p),0),m=r+i;m<h;m+=1)l(m)&&e.lazy.loadInSlide(m);for(var g=f;g<r;g+=1)l(g)&&e.lazy.loadInSlide(g)}else{var v=t.children("."+n.slideNextClass);v.length>0&&e.lazy.loadInSlide(u(v));var b=t.children("."+n.slidePrevClass);b.length>0&&e.lazy.loadInSlide(u(b))}},checkInViewOnLoad:function(){var e=Ho(),t=this;if(t&&!t.destroyed){var n=t.params.lazy.scrollingElement?Yd(t.params.lazy.scrollingElement):Yd(e),a=n[0]===e,r=a?e.innerWidth:n[0].offsetWidth,o=a?e.innerHeight:n[0].offsetHeight,s=t.$el.offset(),i=!1;t.rtlTranslate&&(s.left-=t.$el[0].scrollLeft);for(var l=[[s.left,s.top],[s.left+t.width,s.top],[s.left,s.top+t.height],[s.left+t.width,s.top+t.height]],u=0;u<l.length;u+=1){var c=l[u];if(c[0]>=0&&c[0]<=r&&c[1]>=0&&c[1]<=o){if(0===c[0]&&0===c[1])continue;i=!0}}var p=!("touchstart"!==t.touchEvents.start||!t.support.passiveListener||!t.params.passiveListeners)&&{passive:!0,capture:!1};i?(t.lazy.load(),n.off("scroll",t.lazy.checkInViewOnLoad,p)):t.lazy.scrollHandlerAttached||(t.lazy.scrollHandlerAttached=!0,n.on("scroll",t.lazy.checkInViewOnLoad,p))}}},pf={name:"lazy",params:{lazy:{checkInView:!1,enabled:!1,loadPrevNext:!1,loadPrevNextAmount:1,loadOnTransitionStart:!1,scrollingElement:"",elementClass:"swiper-lazy",loadingClass:"swiper-lazy-loading",loadedClass:"swiper-lazy-loaded",preloaderClass:"swiper-lazy-preloader"}},create:function(){nh(this,{lazy:uf({initialImageLoaded:!1},cf)})},on:{beforeInit:function(e){e.params.lazy.enabled&&e.params.preloadImages&&(e.params.preloadImages=!1)},init:function(e){e.params.lazy.enabled&&!e.params.loop&&0===e.params.initialSlide&&(e.params.lazy.checkInView?e.lazy.checkInViewOnLoad():e.lazy.load())},scroll:function(e){e.params.freeMode&&!e.params.freeModeSticky&&e.lazy.load()},"scrollbarDragMove resize _freeModeNoMomentumRelease":function(e){e.params.lazy.enabled&&e.lazy.load()},transitionStart:function(e){e.params.lazy.enabled&&(e.params.lazy.loadOnTransitionStart||!e.params.lazy.loadOnTransitionStart&&!e.lazy.initialImageLoaded)&&e.lazy.load()},transitionEnd:function(e){e.params.lazy.enabled&&!e.params.lazy.loadOnTransitionStart&&e.lazy.load()},slideChange:function(e){var t=e.params,n=t.lazy,a=t.cssMode,r=t.watchSlidesVisibility,o=t.watchSlidesProgress,s=t.touchReleaseOnEdges,i=t.resistanceRatio;n.enabled&&(a||(r||o)&&(s||0===i))&&e.lazy.load()}}};function df(){return df=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},df.apply(this,arguments)}var hf={LinearSpline:function(e,t){var n,a,r,o,s,i=function(e,t){for(a=-1,n=e.length;n-a>1;)e[r=n+a>>1]<=t?a=r:n=r;return n};return this.x=e,this.y=t,this.lastIndex=e.length-1,this.interpolate=function(e){return e?(s=i(this.x,e),o=s-1,(e-this.x[o])*(this.y[s]-this.y[o])/(this.x[s]-this.x[o])+this.y[o]):0},this},getInterpolateFunction:function(e){var t=this;t.controller.spline||(t.controller.spline=t.params.loop?new hf.LinearSpline(t.slidesGrid,e.slidesGrid):new hf.LinearSpline(t.snapGrid,e.snapGrid))},setTranslate:function(e,t){var n,a,r=this,o=r.controller.control,s=r.constructor;function i(e){var t=r.rtlTranslate?-r.translate:r.translate;"slide"===r.params.controller.by&&(r.controller.getInterpolateFunction(e),a=-r.controller.spline.interpolate(-t)),a&&"container"!==r.params.controller.by||(n=(e.maxTranslate()-e.minTranslate())/(r.maxTranslate()-r.minTranslate()),a=(t-r.minTranslate())*n+e.minTranslate()),r.params.controller.inverse&&(a=e.maxTranslate()-a),e.updateProgress(a),e.setTranslate(a,r),e.updateActiveIndex(),e.updateSlidesClasses()}if(Array.isArray(o))for(var l=0;l<o.length;l+=1)o[l]!==t&&o[l]instanceof s&&i(o[l]);else o instanceof s&&t!==o&&i(o)},setTransition:function(e,t){var n,a=this,r=a.constructor,o=a.controller.control;function s(t){t.setTransition(e,a),0!==e&&(t.transitionStart(),t.params.autoHeight&&Kd((function(){t.updateAutoHeight()})),t.$wrapperEl.transitionEnd((function(){o&&(t.params.loop&&"slide"===a.params.controller.by&&t.loopFix(),t.transitionEnd())})))}if(Array.isArray(o))for(n=0;n<o.length;n+=1)o[n]!==t&&o[n]instanceof r&&s(o[n]);else o instanceof r&&t!==o&&s(o)}},ff={name:"controller",params:{controller:{control:void 0,inverse:!1,by:"slide"}},create:function(){nh(this,{controller:df({control:this.params.controller.control},hf)})},on:{update:function(e){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)},resize:function(e){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)},observerUpdate:function(e){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)},setTranslate:function(e,t,n){e.controller.control&&e.controller.setTranslate(t,n)},setTransition:function(e,t,n){e.controller.control&&e.controller.setTransition(t,n)}}};function mf(){return mf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},mf.apply(this,arguments)}var gf={getRandomNumber:function(e){void 0===e&&(e=16);return"x".repeat(e).replace(/x/g,(function(){return Math.round(16*Math.random()).toString(16)}))},makeElFocusable:function(e){return e.attr("tabIndex","0"),e},makeElNotFocusable:function(e){return e.attr("tabIndex","-1"),e},addElRole:function(e,t){return e.attr("role",t),e},addElRoleDescription:function(e,t){return e.attr("aria-roledescription",t),e},addElControls:function(e,t){return e.attr("aria-controls",t),e},addElLabel:function(e,t){return e.attr("aria-label",t),e},addElId:function(e,t){return e.attr("id",t),e},addElLive:function(e,t){return e.attr("aria-live",t),e},disableEl:function(e){return e.attr("aria-disabled",!0),e},enableEl:function(e){return e.attr("aria-disabled",!1),e},onEnterOrSpaceKey:function(e){if(13===e.keyCode||32===e.keyCode){var t=this,n=t.params.a11y,a=Yd(e.target);t.navigation&&t.navigation.$nextEl&&a.is(t.navigation.$nextEl)&&(t.isEnd&&!t.params.loop||t.slideNext(),t.isEnd?t.a11y.notify(n.lastSlideMessage):t.a11y.notify(n.nextSlideMessage)),t.navigation&&t.navigation.$prevEl&&a.is(t.navigation.$prevEl)&&(t.isBeginning&&!t.params.loop||t.slidePrev(),t.isBeginning?t.a11y.notify(n.firstSlideMessage):t.a11y.notify(n.prevSlideMessage)),t.pagination&&a.is(ah(t.params.pagination.bulletClass))&&a[0].click()}},notify:function(e){var t=this.a11y.liveRegion;0!==t.length&&(t.html(""),t.html(e))},updateNavigation:function(){var e=this;if(!e.params.loop&&e.navigation){var t=e.navigation,n=t.$nextEl,a=t.$prevEl;a&&a.length>0&&(e.isBeginning?(e.a11y.disableEl(a),e.a11y.makeElNotFocusable(a)):(e.a11y.enableEl(a),e.a11y.makeElFocusable(a))),n&&n.length>0&&(e.isEnd?(e.a11y.disableEl(n),e.a11y.makeElNotFocusable(n)):(e.a11y.enableEl(n),e.a11y.makeElFocusable(n)))}},updatePagination:function(){var e=this,t=e.params.a11y;e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.bullets.each((function(n){var a=Yd(n);e.a11y.makeElFocusable(a),e.params.pagination.renderBullet||(e.a11y.addElRole(a,"button"),e.a11y.addElLabel(a,t.paginationBulletMessage.replace(/\{\{index\}\}/,a.index()+1)))}))},init:function(){var e=this,t=e.params.a11y;e.$el.append(e.a11y.liveRegion);var n=e.$el;t.containerRoleDescriptionMessage&&e.a11y.addElRoleDescription(n,t.containerRoleDescriptionMessage),t.containerMessage&&e.a11y.addElLabel(n,t.containerMessage);var a=e.$wrapperEl,r=a.attr("id")||"swiper-wrapper-"+e.a11y.getRandomNumber(16),o=e.params.autoplay&&e.params.autoplay.enabled?"off":"polite";e.a11y.addElId(a,r),e.a11y.addElLive(a,o),t.itemRoleDescriptionMessage&&e.a11y.addElRoleDescription(Yd(e.slides),t.itemRoleDescriptionMessage),e.a11y.addElRole(Yd(e.slides),t.slideRole);var s,i,l=e.params.loop?e.slides.filter((function(t){return!t.classList.contains(e.params.slideDuplicateClass)})).length:e.slides.length;e.slides.each((function(n,a){var r=Yd(n),o=e.params.loop?parseInt(r.attr("data-swiper-slide-index"),10):a,s=t.slideLabelMessage.replace(/\{\{index\}\}/,o+1).replace(/\{\{slidesLength\}\}/,l);e.a11y.addElLabel(r,s)})),e.navigation&&e.navigation.$nextEl&&(s=e.navigation.$nextEl),e.navigation&&e.navigation.$prevEl&&(i=e.navigation.$prevEl),s&&s.length&&(e.a11y.makeElFocusable(s),"BUTTON"!==s[0].tagName&&(e.a11y.addElRole(s,"button"),s.on("keydown",e.a11y.onEnterOrSpaceKey)),e.a11y.addElLabel(s,t.nextSlideMessage),e.a11y.addElControls(s,r)),i&&i.length&&(e.a11y.makeElFocusable(i),"BUTTON"!==i[0].tagName&&(e.a11y.addElRole(i,"button"),i.on("keydown",e.a11y.onEnterOrSpaceKey)),e.a11y.addElLabel(i,t.prevSlideMessage),e.a11y.addElControls(i,r)),e.pagination&&e.params.pagination.clickable&&e.pagination.bullets&&e.pagination.bullets.length&&e.pagination.$el.on("keydown",ah(e.params.pagination.bulletClass),e.a11y.onEnterOrSpaceKey)},destroy:function(){var e,t,n=this;n.a11y.liveRegion&&n.a11y.liveRegion.length>0&&n.a11y.liveRegion.remove(),n.navigation&&n.navigation.$nextEl&&(e=n.navigation.$nextEl),n.navigation&&n.navigation.$prevEl&&(t=n.navigation.$prevEl),e&&e.off("keydown",n.a11y.onEnterOrSpaceKey),t&&t.off("keydown",n.a11y.onEnterOrSpaceKey),n.pagination&&n.params.pagination.clickable&&n.pagination.bullets&&n.pagination.bullets.length&&n.pagination.$el.off("keydown",ah(n.params.pagination.bulletClass),n.a11y.onEnterOrSpaceKey)}},vf={name:"a11y",params:{a11y:{enabled:!0,notificationClass:"swiper-notification",prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",slideLabelMessage:"{{index}} / {{slidesLength}}",containerMessage:null,containerRoleDescriptionMessage:null,itemRoleDescriptionMessage:null,slideRole:"group"}},create:function(){nh(this,{a11y:mf({},gf,{liveRegion:Yd('<span class="'+this.params.a11y.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>')})})},on:{afterInit:function(e){e.params.a11y.enabled&&(e.a11y.init(),e.a11y.updateNavigation())},toEdge:function(e){e.params.a11y.enabled&&e.a11y.updateNavigation()},fromEdge:function(e){e.params.a11y.enabled&&e.a11y.updateNavigation()},paginationUpdate:function(e){e.params.a11y.enabled&&e.a11y.updatePagination()},destroy:function(e){e.params.a11y.enabled&&e.a11y.destroy()}}};function bf(){return bf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},bf.apply(this,arguments)}var yf={init:function(){var e=this,t=Ho();if(e.params.history){if(!t.history||!t.history.pushState)return e.params.history.enabled=!1,void(e.params.hashNavigation.enabled=!0);var n=e.history;n.initialized=!0,n.paths=yf.getPathValues(e.params.url),(n.paths.key||n.paths.value)&&(n.scrollToSlide(0,n.paths.value,e.params.runCallbacksOnInit),e.params.history.replaceState||t.addEventListener("popstate",e.history.setHistoryPopState))}},destroy:function(){var e=Ho();this.params.history.replaceState||e.removeEventListener("popstate",this.history.setHistoryPopState)},setHistoryPopState:function(){var e=this;e.history.paths=yf.getPathValues(e.params.url),e.history.scrollToSlide(e.params.speed,e.history.paths.value,!1)},getPathValues:function(e){var t=Ho(),n=(e?new URL(e):t.location).pathname.slice(1).split("/").filter((function(e){return""!==e})),a=n.length;return{key:n[a-2],value:n[a-1]}},setHistory:function(e,t){var n=this,a=Ho();if(n.history.initialized&&n.params.history.enabled){var r;r=n.params.url?new URL(n.params.url):a.location;var o=n.slides.eq(t),s=yf.slugify(o.attr("data-history"));if(n.params.history.root.length>0){var i=n.params.history.root;"/"===i[i.length-1]&&(i=i.slice(0,i.length-1)),s=i+"/"+e+"/"+s}else r.pathname.includes(e)||(s=e+"/"+s);var l=a.history.state;l&&l.value===s||(n.params.history.replaceState?a.history.replaceState({value:s},null,s):a.history.pushState({value:s},null,s))}},slugify:function(e){return e.toString().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},scrollToSlide:function(e,t,n){var a=this;if(t)for(var r=0,o=a.slides.length;r<o;r+=1){var s=a.slides.eq(r);if(yf.slugify(s.attr("data-history"))===t&&!s.hasClass(a.params.slideDuplicateClass)){var i=s.index();a.slideTo(i,e,n)}}else a.slideTo(0,e,n)}},wf={name:"history",params:{history:{enabled:!1,root:"",replaceState:!1,key:"slides"}},create:function(){nh(this,{history:bf({},yf)})},on:{init:function(e){e.params.history.enabled&&e.history.init()},destroy:function(e){e.params.history.enabled&&e.history.destroy()},"transitionEnd _freeModeNoMomentumRelease":function(e){e.history.initialized&&e.history.setHistory(e.params.history.key,e.activeIndex)},slideChange:function(e){e.history.initialized&&e.params.cssMode&&e.history.setHistory(e.params.history.key,e.activeIndex)}}};function xf(){return xf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},xf.apply(this,arguments)}var kf={onHashChange:function(){var e=this,t=Vo();e.emit("hashChange");var n=t.location.hash.replace("#","");if(n!==e.slides.eq(e.activeIndex).attr("data-hash")){var a=e.$wrapperEl.children("."+e.params.slideClass+'[data-hash="'+n+'"]').index();if(void 0===a)return;e.slideTo(a)}},setHash:function(){var e=this,t=Ho(),n=Vo();if(e.hashNavigation.initialized&&e.params.hashNavigation.enabled)if(e.params.hashNavigation.replaceState&&t.history&&t.history.replaceState)t.history.replaceState(null,null,"#"+e.slides.eq(e.activeIndex).attr("data-hash")||0),e.emit("hashSet");else{var a=e.slides.eq(e.activeIndex),r=a.attr("data-hash")||a.attr("data-history");n.location.hash=r||"",e.emit("hashSet")}},init:function(){var e=this,t=Vo(),n=Ho();if(!(!e.params.hashNavigation.enabled||e.params.history&&e.params.history.enabled)){e.hashNavigation.initialized=!0;var a=t.location.hash.replace("#","");if(a)for(var r=0,o=e.slides.length;r<o;r+=1){var s=e.slides.eq(r);if((s.attr("data-hash")||s.attr("data-history"))===a&&!s.hasClass(e.params.slideDuplicateClass)){var i=s.index();e.slideTo(i,0,e.params.runCallbacksOnInit,!0)}}e.params.hashNavigation.watchState&&Yd(n).on("hashchange",e.hashNavigation.onHashChange)}},destroy:function(){var e=Ho();this.params.hashNavigation.watchState&&Yd(e).off("hashchange",this.hashNavigation.onHashChange)}},Cf={name:"hash-navigation",params:{hashNavigation:{enabled:!1,replaceState:!1,watchState:!1}},create:function(){nh(this,{hashNavigation:xf({initialized:!1},kf)})},on:{init:function(e){e.params.hashNavigation.enabled&&e.hashNavigation.init()},destroy:function(e){e.params.hashNavigation.enabled&&e.hashNavigation.destroy()},"transitionEnd _freeModeNoMomentumRelease":function(e){e.hashNavigation.initialized&&e.hashNavigation.setHash()},slideChange:function(e){e.hashNavigation.initialized&&e.params.cssMode&&e.hashNavigation.setHash()}}};function Ef(){return Ef=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ef.apply(this,arguments)}var Sf={run:function(){var e=this,t=e.slides.eq(e.activeIndex),n=e.params.autoplay.delay;t.attr("data-swiper-autoplay")&&(n=t.attr("data-swiper-autoplay")||e.params.autoplay.delay),clearTimeout(e.autoplay.timeout),e.autoplay.timeout=Kd((function(){var t;e.params.autoplay.reverseDirection?e.params.loop?(e.loopFix(),t=e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.isBeginning?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(t=e.slideTo(e.slides.length-1,e.params.speed,!0,!0),e.emit("autoplay")):(t=e.slidePrev(e.params.speed,!0,!0),e.emit("autoplay")):e.params.loop?(e.loopFix(),t=e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")):e.isEnd?e.params.autoplay.stopOnLastSlide?e.autoplay.stop():(t=e.slideTo(0,e.params.speed,!0,!0),e.emit("autoplay")):(t=e.slideNext(e.params.speed,!0,!0),e.emit("autoplay")),(e.params.cssMode&&e.autoplay.running||!1===t)&&e.autoplay.run()}),n)},start:function(){var e=this;return void 0===e.autoplay.timeout&&(!e.autoplay.running&&(e.autoplay.running=!0,e.emit("autoplayStart"),e.autoplay.run(),!0))},stop:function(){var e=this;return!!e.autoplay.running&&(void 0!==e.autoplay.timeout&&(e.autoplay.timeout&&(clearTimeout(e.autoplay.timeout),e.autoplay.timeout=void 0),e.autoplay.running=!1,e.emit("autoplayStop"),!0))},pause:function(e){var t=this;t.autoplay.running&&(t.autoplay.paused||(t.autoplay.timeout&&clearTimeout(t.autoplay.timeout),t.autoplay.paused=!0,0!==e&&t.params.autoplay.waitForTransition?["transitionend","webkitTransitionEnd"].forEach((function(e){t.$wrapperEl[0].addEventListener(e,t.autoplay.onTransitionEnd)})):(t.autoplay.paused=!1,t.autoplay.run())))},onVisibilityChange:function(){var e=this,t=Vo();"hidden"===t.visibilityState&&e.autoplay.running&&e.autoplay.pause(),"visible"===t.visibilityState&&e.autoplay.paused&&(e.autoplay.run(),e.autoplay.paused=!1)},onTransitionEnd:function(e){var t=this;t&&!t.destroyed&&t.$wrapperEl&&e.target===t.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach((function(e){t.$wrapperEl[0].removeEventListener(e,t.autoplay.onTransitionEnd)})),t.autoplay.paused=!1,t.autoplay.running?t.autoplay.run():t.autoplay.stop())},onMouseEnter:function(){var e=this;e.params.autoplay.disableOnInteraction?e.autoplay.stop():e.autoplay.pause(),["transitionend","webkitTransitionEnd"].forEach((function(t){e.$wrapperEl[0].removeEventListener(t,e.autoplay.onTransitionEnd)}))},onMouseLeave:function(){var e=this;e.params.autoplay.disableOnInteraction||(e.autoplay.paused=!1,e.autoplay.run())},attachMouseEvents:function(){var e=this;e.params.autoplay.pauseOnMouseEnter&&(e.$el.on("mouseenter",e.autoplay.onMouseEnter),e.$el.on("mouseleave",e.autoplay.onMouseLeave))},detachMouseEvents:function(){var e=this;e.$el.off("mouseenter",e.autoplay.onMouseEnter),e.$el.off("mouseleave",e.autoplay.onMouseLeave)}},$f={name:"autoplay",params:{autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}},create:function(){nh(this,{autoplay:Ef({},Sf,{running:!1,paused:!1})})},on:{init:function(e){e.params.autoplay.enabled&&(e.autoplay.start(),Vo().addEventListener("visibilitychange",e.autoplay.onVisibilityChange),e.autoplay.attachMouseEvents())},beforeTransitionStart:function(e,t,n){e.autoplay.running&&(n||!e.params.autoplay.disableOnInteraction?e.autoplay.pause(t):e.autoplay.stop())},sliderFirstMove:function(e){e.autoplay.running&&(e.params.autoplay.disableOnInteraction?e.autoplay.stop():e.autoplay.pause())},touchEnd:function(e){e.params.cssMode&&e.autoplay.paused&&!e.params.autoplay.disableOnInteraction&&e.autoplay.run()},destroy:function(e){e.autoplay.detachMouseEvents(),e.autoplay.running&&e.autoplay.stop(),Vo().removeEventListener("visibilitychange",e.autoplay.onVisibilityChange)}}};function Tf(){return Tf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Tf.apply(this,arguments)}var If={setTranslate:function(){for(var e=this,t=e.slides,n=0;n<t.length;n+=1){var a=e.slides.eq(n),r=-a[0].swiperSlideOffset;e.params.virtualTranslate||(r-=e.translate);var o=0;e.isHorizontal()||(o=r,r=0);var s=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(a[0].progress),0):1+Math.min(Math.max(a[0].progress,-1),0);a.css({opacity:s}).transform("translate3d("+r+"px, "+o+"px, 0px)")}},setTransition:function(e){var t=this,n=t.slides,a=t.$wrapperEl;if(n.transition(e),t.params.virtualTranslate&&0!==e){var r=!1;n.transitionEnd((function(){if(!r&&t&&!t.destroyed){r=!0,t.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],n=0;n<e.length;n+=1)a.trigger(e[n])}}))}}},Nf={name:"effect-fade",params:{fadeEffect:{crossFade:!1}},create:function(){nh(this,{fadeEffect:Tf({},If)})},on:{beforeInit:function(e){if("fade"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"fade");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};th(e.params,t),th(e.originalParams,t)}},setTranslate:function(e){"fade"===e.params.effect&&e.fadeEffect.setTranslate()},setTransition:function(e,t){"fade"===e.params.effect&&e.fadeEffect.setTransition(t)}}};function Of(){return Of=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Of.apply(this,arguments)}var Rf={setTranslate:function(){var e,t=this,n=t.$el,a=t.$wrapperEl,r=t.slides,o=t.width,s=t.height,i=t.rtlTranslate,l=t.size,u=t.browser,c=t.params.cubeEffect,p=t.isHorizontal(),d=t.virtual&&t.params.virtual.enabled,h=0;c.shadow&&(p?(0===(e=a.find(".swiper-cube-shadow")).length&&(e=Yd('<div class="swiper-cube-shadow"></div>'),a.append(e)),e.css({height:o+"px"})):0===(e=n.find(".swiper-cube-shadow")).length&&(e=Yd('<div class="swiper-cube-shadow"></div>'),n.append(e)));for(var f=0;f<r.length;f+=1){var m=r.eq(f),g=f;d&&(g=parseInt(m.attr("data-swiper-slide-index"),10));var v=90*g,b=Math.floor(v/360);i&&(v=-v,b=Math.floor(-v/360));var y=Math.max(Math.min(m[0].progress,1),-1),w=0,x=0,k=0;g%4==0?(w=4*-b*l,k=0):(g-1)%4==0?(w=0,k=4*-b*l):(g-2)%4==0?(w=l+4*b*l,k=l):(g-3)%4==0&&(w=-l,k=3*l+4*l*b),i&&(w=-w),p||(x=w,w=0);var C="rotateX("+(p?0:-v)+"deg) rotateY("+(p?v:0)+"deg) translate3d("+w+"px, "+x+"px, "+k+"px)";if(y<=1&&y>-1&&(h=90*g+90*y,i&&(h=90*-g-90*y)),m.transform(C),c.slideShadows){var E=p?m.find(".swiper-slide-shadow-left"):m.find(".swiper-slide-shadow-top"),S=p?m.find(".swiper-slide-shadow-right"):m.find(".swiper-slide-shadow-bottom");0===E.length&&(E=Yd('<div class="swiper-slide-shadow-'+(p?"left":"top")+'"></div>'),m.append(E)),0===S.length&&(S=Yd('<div class="swiper-slide-shadow-'+(p?"right":"bottom")+'"></div>'),m.append(S)),E.length&&(E[0].style.opacity=Math.max(-y,0)),S.length&&(S[0].style.opacity=Math.max(y,0))}}if(a.css({"-webkit-transform-origin":"50% 50% -"+l/2+"px","-moz-transform-origin":"50% 50% -"+l/2+"px","-ms-transform-origin":"50% 50% -"+l/2+"px","transform-origin":"50% 50% -"+l/2+"px"}),c.shadow)if(p)e.transform("translate3d(0px, "+(o/2+c.shadowOffset)+"px, "+-o/2+"px) rotateX(90deg) rotateZ(0deg) scale("+c.shadowScale+")");else{var $=Math.abs(h)-90*Math.floor(Math.abs(h)/90),T=1.5-(Math.sin(2*$*Math.PI/360)/2+Math.cos(2*$*Math.PI/360)/2),I=c.shadowScale,N=c.shadowScale/T,O=c.shadowOffset;e.transform("scale3d("+I+", 1, "+N+") translate3d(0px, "+(s/2+O)+"px, "+-s/2/N+"px) rotateX(-90deg)")}var R=u.isSafari||u.isWebView?-l/2:0;a.transform("translate3d(0px,0,"+R+"px) rotateX("+(t.isHorizontal()?0:h)+"deg) rotateY("+(t.isHorizontal()?-h:0)+"deg)")},setTransition:function(e){var t=this,n=t.$el;t.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),t.params.cubeEffect.shadow&&!t.isHorizontal()&&n.find(".swiper-cube-shadow").transition(e)}},Af={name:"effect-cube",params:{cubeEffect:{slideShadows:!0,shadow:!0,shadowOffset:20,shadowScale:.94}},create:function(){nh(this,{cubeEffect:Of({},Rf)})},on:{beforeInit:function(e){if("cube"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"cube"),e.classNames.push(e.params.containerModifierClass+"3d");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,resistanceRatio:0,spaceBetween:0,centeredSlides:!1,virtualTranslate:!0};th(e.params,t),th(e.originalParams,t)}},setTranslate:function(e){"cube"===e.params.effect&&e.cubeEffect.setTranslate()},setTransition:function(e,t){"cube"===e.params.effect&&e.cubeEffect.setTransition(t)}}};function Mf(){return Mf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Mf.apply(this,arguments)}var Bf={setTranslate:function(){for(var e=this,t=e.slides,n=e.rtlTranslate,a=0;a<t.length;a+=1){var r=t.eq(a),o=r[0].progress;e.params.flipEffect.limitRotation&&(o=Math.max(Math.min(r[0].progress,1),-1));var s=-180*o,i=0,l=-r[0].swiperSlideOffset,u=0;if(e.isHorizontal()?n&&(s=-s):(u=l,l=0,i=-s,s=0),r[0].style.zIndex=-Math.abs(Math.round(o))+t.length,e.params.flipEffect.slideShadows){var c=e.isHorizontal()?r.find(".swiper-slide-shadow-left"):r.find(".swiper-slide-shadow-top"),p=e.isHorizontal()?r.find(".swiper-slide-shadow-right"):r.find(".swiper-slide-shadow-bottom");0===c.length&&(c=Yd('<div class="swiper-slide-shadow-'+(e.isHorizontal()?"left":"top")+'"></div>'),r.append(c)),0===p.length&&(p=Yd('<div class="swiper-slide-shadow-'+(e.isHorizontal()?"right":"bottom")+'"></div>'),r.append(p)),c.length&&(c[0].style.opacity=Math.max(-o,0)),p.length&&(p[0].style.opacity=Math.max(o,0))}r.transform("translate3d("+l+"px, "+u+"px, 0px) rotateX("+i+"deg) rotateY("+s+"deg)")}},setTransition:function(e){var t=this,n=t.slides,a=t.activeIndex,r=t.$wrapperEl;if(n.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e),t.params.virtualTranslate&&0!==e){var o=!1;n.eq(a).transitionEnd((function(){if(!o&&t&&!t.destroyed){o=!0,t.animating=!1;for(var e=["webkitTransitionEnd","transitionend"],n=0;n<e.length;n+=1)r.trigger(e[n])}}))}}},Pf={name:"effect-flip",params:{flipEffect:{slideShadows:!0,limitRotation:!0}},create:function(){nh(this,{flipEffect:Mf({},Bf)})},on:{beforeInit:function(e){if("flip"===e.params.effect){e.classNames.push(e.params.containerModifierClass+"flip"),e.classNames.push(e.params.containerModifierClass+"3d");var t={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!0};th(e.params,t),th(e.originalParams,t)}},setTranslate:function(e){"flip"===e.params.effect&&e.flipEffect.setTranslate()},setTransition:function(e,t){"flip"===e.params.effect&&e.flipEffect.setTransition(t)}}};function Df(){return Df=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Df.apply(this,arguments)}var Ff={setTranslate:function(){for(var e=this,t=e.width,n=e.height,a=e.slides,r=e.slidesSizesGrid,o=e.params.coverflowEffect,s=e.isHorizontal(),i=e.translate,l=s?t/2-i:n/2-i,u=s?o.rotate:-o.rotate,c=o.depth,p=0,d=a.length;p<d;p+=1){var h=a.eq(p),f=r[p],m=(l-h[0].swiperSlideOffset-f/2)/f*o.modifier,g=s?u*m:0,v=s?0:u*m,b=-c*Math.abs(m),y=o.stretch;"string"==typeof y&&-1!==y.indexOf("%")&&(y=parseFloat(o.stretch)/100*f);var w=s?0:y*m,x=s?y*m:0,k=1-(1-o.scale)*Math.abs(m);Math.abs(x)<.001&&(x=0),Math.abs(w)<.001&&(w=0),Math.abs(b)<.001&&(b=0),Math.abs(g)<.001&&(g=0),Math.abs(v)<.001&&(v=0),Math.abs(k)<.001&&(k=0);var C="translate3d("+x+"px,"+w+"px,"+b+"px)  rotateX("+v+"deg) rotateY("+g+"deg) scale("+k+")";if(h.transform(C),h[0].style.zIndex=1-Math.abs(Math.round(m)),o.slideShadows){var E=s?h.find(".swiper-slide-shadow-left"):h.find(".swiper-slide-shadow-top"),S=s?h.find(".swiper-slide-shadow-right"):h.find(".swiper-slide-shadow-bottom");0===E.length&&(E=Yd('<div class="swiper-slide-shadow-'+(s?"left":"top")+'"></div>'),h.append(E)),0===S.length&&(S=Yd('<div class="swiper-slide-shadow-'+(s?"right":"bottom")+'"></div>'),h.append(S)),E.length&&(E[0].style.opacity=m>0?m:0),S.length&&(S[0].style.opacity=-m>0?-m:0)}}},setTransition:function(e){this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e)}},_f={name:"effect-coverflow",params:{coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}},create:function(){nh(this,{coverflowEffect:Df({},Ff)})},on:{beforeInit:function(e){"coverflow"===e.params.effect&&(e.classNames.push(e.params.containerModifierClass+"coverflow"),e.classNames.push(e.params.containerModifierClass+"3d"),e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0)},setTranslate:function(e){"coverflow"===e.params.effect&&e.coverflowEffect.setTranslate()},setTransition:function(e,t){"coverflow"===e.params.effect&&e.coverflowEffect.setTransition(t)}}};function Lf(){return Lf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Lf.apply(this,arguments)}var zf={init:function(){var e=this,t=e.params.thumbs;if(e.thumbs.initialized)return!1;e.thumbs.initialized=!0;var n=e.constructor;return t.swiper instanceof n?(e.thumbs.swiper=t.swiper,th(e.thumbs.swiper.originalParams,{watchSlidesProgress:!0,slideToClickedSlide:!1}),th(e.thumbs.swiper.params,{watchSlidesProgress:!0,slideToClickedSlide:!1})):Qd(t.swiper)&&(e.thumbs.swiper=new n(th({},t.swiper,{watchSlidesVisibility:!0,watchSlidesProgress:!0,slideToClickedSlide:!1})),e.thumbs.swiperCreated=!0),e.thumbs.swiper.$el.addClass(e.params.thumbs.thumbsContainerClass),e.thumbs.swiper.on("tap",e.thumbs.onThumbClick),!0},onThumbClick:function(){var e=this,t=e.thumbs.swiper;if(t){var n=t.clickedIndex,a=t.clickedSlide;if(!(a&&Yd(a).hasClass(e.params.thumbs.slideThumbActiveClass)||null==n)){var r;if(r=t.params.loop?parseInt(Yd(t.clickedSlide).attr("data-swiper-slide-index"),10):n,e.params.loop){var o=e.activeIndex;e.slides.eq(o).hasClass(e.params.slideDuplicateClass)&&(e.loopFix(),e._clientLeft=e.$wrapperEl[0].clientLeft,o=e.activeIndex);var s=e.slides.eq(o).prevAll('[data-swiper-slide-index="'+r+'"]').eq(0).index(),i=e.slides.eq(o).nextAll('[data-swiper-slide-index="'+r+'"]').eq(0).index();r=void 0===s?i:void 0===i?s:i-o<o-s?i:s}e.slideTo(r)}}},update:function(e){var t=this,n=t.thumbs.swiper;if(n){var a="auto"===n.params.slidesPerView?n.slidesPerViewDynamic():n.params.slidesPerView,r=t.params.thumbs.autoScrollOffset,o=r&&!n.params.loop;if(t.realIndex!==n.realIndex||o){var s,i,l=n.activeIndex;if(n.params.loop){n.slides.eq(l).hasClass(n.params.slideDuplicateClass)&&(n.loopFix(),n._clientLeft=n.$wrapperEl[0].clientLeft,l=n.activeIndex);var u=n.slides.eq(l).prevAll('[data-swiper-slide-index="'+t.realIndex+'"]').eq(0).index(),c=n.slides.eq(l).nextAll('[data-swiper-slide-index="'+t.realIndex+'"]').eq(0).index();s=void 0===u?c:void 0===c?u:c-l==l-u?n.params.slidesPerGroup>1?c:l:c-l<l-u?c:u,i=t.activeIndex>t.previousIndex?"next":"prev"}else i=(s=t.realIndex)>t.previousIndex?"next":"prev";o&&(s+="next"===i?r:-1*r),n.visibleSlidesIndexes&&n.visibleSlidesIndexes.indexOf(s)<0&&(n.params.centeredSlides?s=s>l?s-Math.floor(a/2)+1:s+Math.floor(a/2)-1:s>l&&n.params.slidesPerGroup,n.slideTo(s,e?0:void 0))}var p=1,d=t.params.thumbs.slideThumbActiveClass;if(t.params.slidesPerView>1&&!t.params.centeredSlides&&(p=t.params.slidesPerView),t.params.thumbs.multipleActiveThumbs||(p=1),p=Math.floor(p),n.slides.removeClass(d),n.params.loop||n.params.virtual&&n.params.virtual.enabled)for(var h=0;h<p;h+=1)n.$wrapperEl.children('[data-swiper-slide-index="'+(t.realIndex+h)+'"]').addClass(d);else for(var f=0;f<p;f+=1)n.slides.eq(t.realIndex+f).addClass(d)}}},Vf={name:"thumbs",params:{thumbs:{swiper:null,multipleActiveThumbs:!0,autoScrollOffset:0,slideThumbActiveClass:"swiper-slide-thumb-active",thumbsContainerClass:"swiper-container-thumbs"}},create:function(){nh(this,{thumbs:Lf({swiper:null,initialized:!1},zf)})},on:{beforeInit:function(e){var t=e.params.thumbs;t&&t.swiper&&(e.thumbs.init(),e.thumbs.update(!0))},slideChange:function(e){e.thumbs.swiper&&e.thumbs.update()},update:function(e){e.thumbs.swiper&&e.thumbs.update()},resize:function(e){e.thumbs.swiper&&e.thumbs.update()},observerUpdate:function(e){e.thumbs.swiper&&e.thumbs.update()},setTransition:function(e,t){var n=e.thumbs.swiper;n&&n.setTransition(t)},beforeDestroy:function(e){var t=e.thumbs.swiper;t&&e.thumbs.swiperCreated&&t&&t.destroy()}}},Wf=[Vh,jh,Gh,Yh,Zh,tf,rf,lf,pf,ff,vf,wf,Cf,$f,Nf,Af,Pf,_f,Vf];function Hf(e){var t=this,n=gl(e);if(0!==n.length&&!n[0].swiper){var a,r,o,s={};n.hasClass("tabs-swipeable-wrap")&&(n.addClass("swiper-container").children(".tabs").addClass("swiper-wrapper").children(".tab").addClass("swiper-slide"),a=n.children(".tabs").children(".tab-active").index(),r=!0,o=n.find(".tabs-routable").length>0),n.attr("data-swiper")?s=JSON.parse(n.attr("data-swiper")):n[0].f7SwiperParams?s=n[0].f7SwiperParams:(s=n.dataset(),Object.keys(s).forEach((function(e){var t=s[e];if("string"==typeof t&&0===t.indexOf("{")&&t.indexOf("}")>0)try{s[e]=JSON.parse(t)}catch(e){}}))),void 0===s.initialSlide&&void 0!==a&&(s.initialSlide=a);var i=t.swiper.create(n[0],s),l=n.parents(".tab").filter((function(e){return 0===gl(e).parent(".tabs").parent(".tabs-animated-wrap, .tabs-swipeable-wrap").length})).eq(0);n.parents(".popup, .login-screen, .sheet-modal, .popover").on("modal:open",u),n.parents(".panel").on("panel:open",u),l&&l.length&&l.on("tab:show",u),i.on("beforeDestroy",(function(){n.parents(".popup, .login-screen, .sheet-modal, .popover").off("modal:open",u),n.parents(".panel").off("panel:open",u),l&&l.length&&l.off("tab:show",u)})),r&&i.on("slideChange",(function(){if(o){var e=t.views.get(n.parents(".view"));e||(e=t.views.main);var a=e.router,r=a.findTabRouteUrl(i.slides.eq(i.activeIndex)[0]);r&&setTimeout((function(){a.navigate(r)}),0)}else t.tab.show({tabEl:i.slides.eq(i.activeIndex)})}))}function u(){i.update()}}_h.use(Wf);var jf={name:"swiper",static:{Swiper:_h},create:function(){this.swiper=wl({defaultSelector:".swiper-container",constructor:_h,domProp:"swiper"})},on:{pageBeforeRemove:function(e){var t=this;e.$el.find(".swiper-init, .tabs-swipeable-wrap").each((function(e){t.swiper.destroy(e)}))},pageMounted:function(e){var t=this;e.$el.find(".tabs-swipeable-wrap").each((function(e){Hf.call(t,e)}))},pageInit:function(e){var t=this;e.$el.find(".swiper-init, .tabs-swipeable-wrap").each((function(e){Hf.call(t,e)}))},pageReinit:function(e){var t=this;e.$el.find(".swiper-init, .tabs-swipeable-wrap").each((function(e){var n=t.swiper.get(e);n&&n.update&&n.update()}))},tabMounted:function(e){var t=this;gl(e).find(".swiper-init, .tabs-swipeable-wrap").each((function(e){Hf.call(t,e)}))},tabShow:function(e){var t=this;gl(e).find(".swiper-init, .tabs-swipeable-wrap").each((function(e){var n=t.swiper.get(e);n&&n.update&&n.update()}))},tabBeforeRemove:function(e){var t=this;gl(e).find(".swiper-init, .tabs-swipeable-wrap").each((function(e){t.swiper.destroy(e)}))}},vnode:{"swiper-init":{insert:function(e){var t=e.elm;Hf.call(this,t)},destroy:function(e){var t=e.elm;this.swiper.destroy(t)}},"tabs-swipeable-wrap":{insert:function(e){var t=e.elm;Hf.call(this,t)},destroy:function(e){var t=e.elm;this.swiper.destroy(t)}}}};function Uf(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Gf(e,t){return Gf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Gf(e,t)}var qf=function(e){var t,n;function a(t,n){var a;void 0===n&&(n={});var r=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(a=e.call(this,n,[t])||this);r.app=t;var o=cs({on:{}},t.params.photoBrowser);return r.useModulesParams(o),r.params=cs(o,n),cs(r,{exposed:!1,opened:!1,activeIndex:r.params.swiper.initialSlide,url:r.params.url,swipeToClose:{allow:!0,isTouched:!1,diff:void 0,start:void 0,current:void 0,started:!1,activeSlide:void 0,timeStart:void 0}}),r.useModules(),r.init(),a}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,Gf(t,n);var r,o,s,i=a.prototype;return i.onSlideChange=function(e){var t=this;t.activeIndex=e.activeIndex;var n=e.activeIndex+1,a=t.params.virtualSlides?t.params.photos.length:e.slides.length;e.params.loop&&(a-=2,(n-=e.loopedSlides)<1&&(n=a+n),n>a&&(n-=a));var r,o=t.params.virtualSlides?e.$wrapperEl.find('.swiper-slide[data-swiper-slide-index="'+e.activeIndex+'"]'):e.slides.eq(e.activeIndex),s=t.params.virtualSlides?e.$wrapperEl.find('.swiper-slide[data-swiper-slide-index="'+e.previousIndex+'"]'):e.slides.eq(e.previousIndex),i=t.$el.find(".photo-browser-current"),l=t.$el.find(".photo-browser-total");if("page"===t.params.type&&t.params.navbar&&0===i.length&&"ios"===t.app.theme&&(r=t.app.navbar.getElByPage(t.$el))&&(i=gl(r).find(".photo-browser-current"),l=gl(r).find(".photo-browser-total")),i.length&&l.length&&(i.text(n),l.text(a),r||(r=i.parents(".navbar")[0]),r&&t.app.navbar.size(r)),t.captions.length>0){var u=e.params.loop?o.attr("data-swiper-slide-index"):t.activeIndex;t.$captionsContainerEl.find(".photo-browser-caption-active").removeClass("photo-browser-caption-active"),t.$captionsContainerEl.find('[data-caption-index="'+u+'"]').addClass("photo-browser-caption-active")}var c=s.find("video");c.length>0&&"pause"in c[0]&&c[0].pause()},i.onTouchStart=function(){var e=this.swipeToClose;e.allow&&(e.isTouched=!0)},i.onTouchMove=function(e){var t=this,n=t.swipeToClose;n.isTouched&&(n.started||(n.started=!0,n.start="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,t.params.virtualSlides?n.activeSlide=t.swiper.$wrapperEl.children(".swiper-slide-active"):n.activeSlide=t.swiper.slides.eq(t.swiper.activeIndex),n.timeStart=rs()),e.preventDefault(),n.current="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,n.diff=n.start-n.current,t.$el.transition(0).transform("translate3d(0,"+-n.diff+"px,0)"))},i.onTouchEnd=function(){var e=this,t=e.swipeToClose;if(t.isTouched=!1,t.started){t.started=!1,t.allow=!1;var n=Math.abs(t.diff),a=(new Date).getTime()-t.timeStart;a<300&&n>20||a>=300&&n>100?ns((function(){e.$el&&(t.diff<0?e.$el.addClass("swipe-close-to-bottom"):e.$el.addClass("swipe-close-to-top")),e.emit("local::swipeToClose",e),e.$el.transform("").transition(""),e.close(),t.allow=!0})):(0!==n?e.$el.addClass("photo-browser-transitioning").transitionEnd((function(){t.allow=!0,e.$el.removeClass("photo-browser-transitioning")})):t.allow=!0,ns((function(){e.$el.transform("").transition("")})))}else t.started=!1},i.renderNavbar=function(){var e=this;if(e.params.renderNavbar)return e.params.renderNavbar.call(e);var t=e.params.iconsColor;e.params.iconsColor||"dark"!==e.params.theme||(t="white");var n="ios"!==e.app.theme&&"aurora"!==e.app.theme||!e.params.pageBackLinkText?"":e.params.pageBackLinkText,a=void 0===e.params.navbarShowCount?e.params.photos.length>1:e.params.navbarShowCount,r="page"!==e.params.type;return ec("div",{class:"navbar navbar-photo-browser "+("dark"===e.params.theme?"navbar-photo-browser-dark":"")},ec("div",{class:"navbar-bg"}),ec("div",{class:"navbar-inner navbar-inner-centered-title sliding"},!r&&ec("div",{class:"left"},ec("a",{class:"link "+(n?"":"icon-only")+" back"},ec("i",{class:"icon icon-back "+(t?"color-"+t:"")}),n&&ec("span",null,n))),a&&ec("div",{class:"title"},ec("span",{class:"photo-browser-current"}),ec("span",{class:"photo-browser-of"},e.params.navbarOfText),ec("span",{class:"photo-browser-total"})),r&&ec("div",{class:"right"},ec("a",{class:"link popup-close","data-popup":".photo-browser-popup"},ec("span",null,e.params.popupCloseLinkText)))))},i.renderToolbar=function(){var e=this;if(e.params.renderToolbar)return e.params.renderToolbar.call(e);var t=e.params.iconsColor;return e.params.iconsColor||"dark"!==e.params.theme||(t="white"),ec("div",{class:"toolbar toolbar-bottom tabbar"},ec("div",{class:"toolbar-inner"},ec("a",{class:"link photo-browser-prev"},ec("i",{class:"icon icon-back "+(t?"color-"+t:"")})),ec("a",{class:"link photo-browser-next"},ec("i",{class:"icon icon-forward "+(t?"color-"+t:"")}))))},i.renderCaption=function(e,t){var n=this;return n.params.renderCaption?n.params.renderCaption.call(n,e,t):ec("div",{class:"photo-browser-caption","data-caption-index":t},e)},i.renderObject=function(e,t){var n=this;return n.params.renderObject?n.params.renderObject.call(n,e,t):ec("div",{class:"photo-browser-slide photo-browser-object-slide swiper-slide","data-swiper-slide-index":t},e.html?e.html:e)},i.renderLazyPhoto=function(e,t){var n=this;return n.params.renderLazyPhoto?n.params.renderLazyPhoto.call(n,e,t):ec("div",{class:"photo-browser-slide photo-browser-slide-lazy swiper-slide","data-swiper-slide-index":t},ec("div",{class:"swiper-lazy-preloader"}),ec("span",{class:"swiper-zoom-container"},ec("img",{"data-src":e.url?e.url:e,class:"swiper-lazy"})))},i.renderPhoto=function(e,t){var n=this;return n.params.renderPhoto?n.params.renderPhoto.call(n,e,t):ec("div",{class:"photo-browser-slide swiper-slide","data-swiper-slide-index":t},ec("span",{class:"swiper-zoom-container"},ec("img",{src:e.url?e.url:e})))},i.render=function(){var e=this;return e.params.render?e.params.render.call(e,e.params):ec("div",{class:"photo-browser photo-browser-"+e.params.theme},ec("div",{class:"view"},ec("div",{class:"page photo-browser-page photo-browser-page-"+e.params.theme+" no-toolbar "+(e.params.navbar?"":"no-navbar"),"data-name":"photo-browser-page"},e.params.navbar&&e.renderNavbar(),e.params.toolbar&&e.renderToolbar(),ec("div",{class:"photo-browser-captions photo-browser-captions-"+(e.params.captionsTheme||e.params.theme)},e.params.photos.map((function(t,n){return t.caption?e.renderCaption(t.caption,n):""}))),ec("div",{class:"photo-browser-swiper-container swiper-container"},ec("div",{class:"photo-browser-swiper-wrapper swiper-wrapper"},!e.params.virtualSlides&&e.params.photos.map((function(t,n){return t.html||("string"==typeof t||t instanceof String)&&t.indexOf("<")>=0&&t.indexOf(">")>=0?e.renderObject(t,n):!0===e.params.swiper.lazy||e.params.swiper.lazy&&e.params.swiper.lazy.enabled?e.renderLazyPhoto(t,n):e.renderPhoto(t,n)})))))))},i.renderStandalone=function(){var e=this;return e.params.renderStandalone?e.params.renderStandalone.call(e):'<div class="popup photo-browser-popup photo-browser-standalone popup-tablet-fullscreen">'+e.render()+"</div>"},i.renderPage=function(){var e=this;return e.params.renderPage?e.params.renderPage.call(e):e.render()},i.renderPopup=function(){var e=this;return e.params.renderPopup?e.params.renderPopup.call(e):'<div class="popup photo-browser-popup">'+e.render()+"</div>"},i.onOpen=function(e,t){var n,a=this,r=a.app,o=gl(t);o[0].f7PhotoBrowser=a,a.$el=o,a.el=o[0],a.openedIn=e,a.opened=!0,a.$swiperContainerEl=a.$el.find(".photo-browser-swiper-container"),a.$swiperWrapperEl=a.$el.find(".photo-browser-swiper-wrapper"),a.slides=a.$el.find(".photo-browser-slide"),a.$captionsContainerEl=a.$el.find(".photo-browser-captions"),a.captions=a.$el.find(".photo-browser-caption");var s=cs({},a.params.swiper,{initialSlide:a.activeIndex,on:{click:function(e){clearTimeout(n),a.params.exposition&&(n=setTimeout((function(){a.expositionToggle()}),350)),a.emit("local::tap",e),a.emit("local::click",e)},doubleClick:function(e){clearTimeout(n),a.emit("local::doubleTap",e),a.emit("local::doubleClick",e)},slideChange:function(){var e=this;a.onSlideChange(e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];a.emit.apply(a,["local::slideChange"].concat(n))},transitionStart:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.emit.apply(a,["local::transitionStart"].concat(t))},transitionEnd:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.emit.apply(a,["local::transitionEnd"].concat(t))},slideChangeTransitionStart:function(){var e=this;a.onSlideChange(e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];a.emit.apply(a,["local::slideChangeTransitionStart"].concat(n))},slideChangeTransitionEnd:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.emit.apply(a,["local::slideChangeTransitionEnd"].concat(t))},lazyImageLoad:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.emit.apply(a,["local::lazyImageLoad"].concat(t))},lazyImageReady:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];gl(r).removeClass("photo-browser-slide-lazy"),a.emit.apply(a,["local::lazyImageReady"].concat(t))}}});a.params.swipeToClose&&"page"!==a.params.type&&cs(s.on,{touchStart:function(e,t){a.onTouchStart(t),a.emit("local::touchStart",t)},touchMoveOpposite:function(e,t){a.onTouchMove(t),a.emit("local::touchMoveOpposite",t)},touchEnd:function(e,t){a.onTouchEnd(t),a.emit("local::touchEnd",t)}}),a.params.virtualSlides&&cs(s,{virtual:{slides:a.params.photos,renderSlide:function(e,t){return e.html||("string"==typeof e||e instanceof String)&&e.indexOf("<")>=0&&e.indexOf(">")>=0?a.renderObject(e,t):!0===a.params.swiper.lazy||a.params.swiper.lazy&&a.params.swiper.lazy.enabled?a.renderLazyPhoto(e,t):a.renderPhoto(e,t)}}});var i=Ho();a.swiper=r.swiper?r.swiper.create(a.$swiperContainerEl,s):new i.Swiper(a.$swiperContainerEl,s),0===a.activeIndex&&a.onSlideChange(a.swiper),a.$el&&a.$el.trigger("photobrowser:open"),a.emit("local::open photoBrowserOpen",a)},i.onOpened=function(){var e=this;e.$el&&"standalone"===e.params.type&&e.$el.css("animation","none"),e.$el&&e.$el.trigger("photobrowser:opened"),e.emit("local::opened photoBrowserOpened",e)},i.onClose=function(){var e=this;e.destroyed||(e.swiper&&e.swiper.destroy&&(e.swiper.destroy(!0,!1),e.swiper=null,delete e.swiper),e.$el&&e.$el.trigger("photobrowser:close"),e.emit("local::close photoBrowserClose",e))},i.onClosed=function(){var e=this;e.destroyed||(e.opened=!1,e.$el=null,e.el=null,delete e.$el,delete e.el,e.$el&&e.$el.trigger("photobrowser:closed"),e.emit("local::closed photoBrowserClosed",e))},i.openPage=function(){var e=this;if(e.opened)return e;var t=e.renderPage();return e.view.router.navigate({url:e.url,route:{content:t,path:e.url,on:{pageBeforeIn:function(t,n){e.view.$el.addClass("with-photo-browser-page with-photo-browser-page-"+e.params.theme),e.onOpen("page",n.el)},pageAfterIn:function(t,n){e.onOpened("page",n.el)},pageBeforeOut:function(t,n){e.view.$el.removeClass("with-photo-browser-page with-photo-browser-page-exposed with-photo-browser-page-"+e.params.theme),e.onClose("page",n.el)},pageAfterOut:function(t,n){e.onClosed("page",n.el)}}}}),e},i.openStandalone=function(){var e=this;if(e.opened)return e;var t={backdrop:!1,content:e.renderStandalone(),on:{popupOpen:function(t){e.onOpen("popup",t.el)},popupOpened:function(t){e.onOpened("popup",t.el)},popupClose:function(t){e.onClose("popup",t.el)},popupClosed:function(t){e.onClosed("popup",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,popup:t}}):e.modal=e.app.popup.create(t).open(),e},i.openPopup=function(){var e=this;if(e.opened)return e;var t={content:e.renderPopup(),push:e.params.popupPush,on:{popupOpen:function(t){e.onOpen("popup",t.el)},popupOpened:function(t){e.onOpened("popup",t.el)},popupClose:function(t){e.onClose("popup",t.el)},popupClosed:function(t){e.onClosed("popup",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,popup:t}}):e.modal=e.app.popup.create(t).open(),e},i.expositionEnable=function(){var e=this;return"page"===e.params.type&&e.view.$el.addClass("with-photo-browser-page-exposed"),e.$el&&e.$el.addClass("photo-browser-exposed"),e.params.expositionHideCaptions&&e.$captionsContainerEl.addClass("photo-browser-captions-exposed"),e.exposed=!0,e},i.expositionDisable=function(){var e=this;return"page"===e.params.type&&e.view.$el.removeClass("with-photo-browser-page-exposed"),e.$el&&e.$el.removeClass("photo-browser-exposed"),e.params.expositionHideCaptions&&e.$captionsContainerEl.removeClass("photo-browser-captions-exposed"),e.exposed=!1,e},i.expositionToggle=function(){var e=this;return"page"===e.params.type&&e.view.$el.toggleClass("with-photo-browser-page-exposed"),e.$el&&e.$el.toggleClass("photo-browser-exposed"),e.params.expositionHideCaptions&&e.$captionsContainerEl.toggleClass("photo-browser-captions-exposed"),e.exposed=!e.exposed,e},i.open=function(e){var t=this,n=t.params.type;return t.opened?(t.swiper&&void 0!==e&&t.swiper.slideTo(parseInt(e,10)),t):(void 0!==e&&(t.activeIndex=e),"standalone"===n&&t.openStandalone(),"page"===n&&t.openPage(),"popup"===n&&t.openPopup(),t)},i.close=function(){var e=this;return e.opened?(e.params.routableModals&&e.view||"page"===e.openedIn?e.view.router.back():(e.modal.once("modalClosed",(function(){ns((function(){e.destroyed||(e.modal.destroy(),delete e.modal)}))})),e.modal.close()),e):e},i.init=function(){},i.destroy=function(){var e=this;e.emit("local::beforeDestroy photoBrowserBeforeDestroy",e),e.$el&&(e.$el.trigger("photobrowser:beforedestroy"),e.$el[0].f7PhotoBrowser=null,delete e.$el[0].f7PhotoBrowser),Qo(e),e.destroyed=!0,e=null},r=a,o=[{key:"view",get:function(){var e=this.params,t=this.app;return e.view||t.views.main}}],o&&Uf(r.prototype,o),s&&Uf(r,s),a}(Ts),Xf=qf,Yf={name:"photoBrowser",params:{photoBrowser:{photos:[],exposition:!0,expositionHideCaptions:!1,type:"standalone",navbar:!0,toolbar:!0,theme:"light",captionsTheme:void 0,iconsColor:void 0,popupPush:!1,swipeToClose:!0,pageBackLinkText:"Back",popupCloseLinkText:"Close",navbarOfText:"of",navbarShowCount:void 0,view:void 0,url:"photos/",routableModals:!1,virtualSlides:!0,renderNavbar:void 0,renderToolbar:void 0,renderCaption:void 0,renderObject:void 0,renderLazyPhoto:void 0,renderPhoto:void 0,renderPage:void 0,renderPopup:void 0,renderStandalone:void 0,swiper:{initialSlide:0,spaceBetween:20,speed:300,loop:!1,preloadImages:!0,navigation:{nextEl:".photo-browser-next",prevEl:".photo-browser-prev"},zoom:{enabled:!0,maxRatio:3,minRatio:1},lazy:{enabled:!0}}}},create:function(){this.photoBrowser=wl({defaultSelector:".photo-browser-popup, .photo-browser-page",constructor:Xf,app:this,domProp:"f7PhotoBrowser"})},static:{PhotoBrowser:Xf}};function Kf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jf(e,t){return Jf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Jf(e,t)}var Zf=function(e){var t,n;function a(t,n){var a,r=cs({on:{}},t.params.notification,n),o=Kf(a=e.call(this,t,r)||this);o.app=t,o.params=r;var s,i,l,u,c,p,d,h=o.params,f=h.icon,m=h.title,g=h.titleRightText,v=h.subtitle,b=h.text,y=h.closeButton,w=h.closeTimeout,x=h.cssClass,k=h.closeOnClick;if(o.params.el)s=gl(o.params.el);else{var C=o.render({icon:f,title:m,titleRightText:g,subtitle:v,text:b,closeButton:y,cssClass:x});s=gl(C)}if(s&&s.length>0&&s[0].f7Modal)return s[0].f7Modal||Kf(a);if(0===s.length)return o.destroy()||Kf(a);cs(o,{$el:s,el:s[0],type:"notification"}),s[0].f7Modal=o,y&&s.find(".notification-close-button").on("click",(function(){o.close()})),s.on("click",(function(e){y&&gl(e.target).closest(".notification-close-button").length||(o.emit("local::click notificationClick",o),k&&o.close())})),o.on("beforeDestroy",(function(){s.off("click")}));var E,S={};function $(e){i||(i=!0,l=!1,u=void 0,p=rs(),S.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,S.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY)}function T(e){if(i){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,n="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if(void 0===u&&(u=!!(u||Math.abs(n-S.y)<Math.abs(t-S.x))),u)i=!1;else{e.preventDefault(),l||(o.$el.removeClass("notification-transitioning"),o.$el.transition(0),d=o.$el[0].offsetHeight/2),l=!0;var a=c=n-S.y;c>0&&(a=Math.pow(c,.8)),o.$el.transform("translate3d(0, "+a+"px, 0)")}}}function I(){if(!i||!l)return i=!1,void(l=!1);if(i=!1,l=!1,0!==c){var e=rs()-p;o.$el.transition(""),o.$el.addClass("notification-transitioning"),o.$el.transform(""),(c<-10&&e<300||-c>=d/1)&&o.close()}}function N(){E=ns((function(){i&&l?N():o.close()}),w)}return o.on("open",(function(){o.params.swipeToClose&&(o.$el.on(t.touchEvents.start,$,{passive:!0}),t.on("touchmove:active",T),t.on("touchend:passive",I)),gl(".notification.modal-in").each((function(e){var n=t.notification.get(e);e!==o.el&&n&&n.close()})),w&&N()})),o.on("close beforeDestroy",(function(){o.params.swipeToClose&&(o.$el.off(t.touchEvents.start,$,{passive:!0}),t.off("touchmove:active",T),t.off("touchend:passive",I)),clearTimeout(E)})),o||Kf(a)}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,Jf(t,n),a.prototype.render=function(){var e=this;if(e.params.render)return e.params.render.call(e,e);var t=e.params,n=t.icon,a=t.title,r=t.titleRightText,o=t.subtitle,s=t.text,i=t.closeButton,l=t.cssClass;return ec("div",{class:"notification "+(l||"")},ec("div",{class:"notification-header"},n&&ec("div",{class:"notification-icon"},n),a&&ec("div",{class:"notification-title"},a),r&&ec("div",{class:"notification-title-right-text"},r),i&&ec("span",{class:"notification-close-button"})),ec("div",{class:"notification-content"},o&&ec("div",{class:"notification-subtitle"},o),s&&ec("div",{class:"notification-text"},s)))},a}(Xu),Qf=Zf,em={name:"notification",static:{Notification:Qf},create:function(){this.notification=cs({},kl({app:this,constructor:Qf,defaultSelector:".notification.modal-in"}))},params:{notification:{icon:null,title:null,titleRightText:null,subtitle:null,text:null,closeButton:!1,closeTimeout:null,closeOnClick:!1,swipeToClose:!0,cssClass:null,render:null,containerEl:null}}};function tm(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function nm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function am(e,t){return am=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},am(e,t)}var rm=function(e){var t,n;function a(t,n){var a;void 0===n&&(n={});var r=nm(a=e.call(this,n,[t])||this);r.app=t;var o,s,i=xs(),l=cs({on:{}},t.params.autocomplete);void 0===l.searchbarDisableButton&&(l.searchbarDisableButton="aurora"!==t.theme),r.useModulesParams(l),r.params=cs(l,n),r.params.openerEl&&(o=gl(r.params.openerEl)).length&&(o[0].f7Autocomplete=r),r.params.inputEl&&(s=gl(r.params.inputEl)).length&&(s[0].f7Autocomplete=r);var u=Go(),c=n.url;!c&&o&&o.length&&(o.attr("href")?c=o.attr("href"):o.find("a").length>0&&(c=o.find("a").attr("href"))),c&&"#"!==c&&""!==c||(c=r.params.url);var p=r.params.multiple?"checkbox":"radio";cs(r,{$openerEl:o,openerEl:o&&o[0],$inputEl:s,inputEl:s&&s[0],id:u,url:c,value:r.params.value||[],inputType:p,inputName:p+"-"+u,$modalEl:void 0,$dropdownEl:void 0});var d="";function h(){var e=r.$inputEl.val().trim();r.params.source&&r.params.source.call(r,e,(function(t){var n,a,o,i="",l=r.params.limit?Math.min(r.params.limit,t.length):t.length;r.items=t,r.params.highlightMatches&&(e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n=new RegExp("("+e+")","i"));for(var u=0;u<l;u+=1){var c="object"==typeof t[u]?t[u][r.params.valueProperty]:t[u],p="object"==typeof t[u]?t[u][r.params.textProperty]:t[u];0===u&&(a=c,o=r.items[u]),i+=r.renderItem({value:c,text:r.params.highlightMatches?p.replace(n,"<b>$1</b>"):p},u)}if(""===i&&""===e&&r.params.dropdownPlaceholderText&&(i+=r.renderItem({placeholder:!0,text:r.params.dropdownPlaceholderText})),r.$dropdownEl.find("ul").html(i),r.params.typeahead){if(!a||!o)return;if(0!==a.toLowerCase().indexOf(e.toLowerCase()))return;if(d.toLowerCase()===e.toLowerCase())return void(r.value=[]);if(0===d.toLowerCase().indexOf(e.toLowerCase()))return d=e,void(r.value=[]);s.val(a),s[0].setSelectionRange(e.length,a.length);var h="object"==typeof r.value[0]?r.value[0][r.params.valueProperty]:r.value[0];h&&a.toLowerCase()===h.toLowerCase()||(r.value=[o],r.emit("local::change autocompleteChange",[o]))}d=e}))}function f(){var e,t,n,a=this,o=a.value;if(gl(a).parents(".autocomplete-values").length>0){if("checkbox"===r.inputType&&!a.checked){for(var s=0;s<r.value.length;s+=1)(n="string"==typeof r.value[s]?r.value[s]:r.value[s][r.params.valueProperty])!==o&&1*n!=1*o||r.value.splice(s,1);r.updateValues(),r.emit("local::change autocompleteChange",r.value)}}else{for(var i=0;i<r.items.length;i+=1)(t="object"==typeof r.items[i]?r.items[i][r.params.valueProperty]:r.items[i])!==o&&1*t!=1*o||(e=r.items[i]);if("radio"===r.inputType)r.value=[e];else if(a.checked)r.value.push(e);else for(var l=0;l<r.value.length;l+=1)(n="object"==typeof r.value[l]?r.value[l][r.params.valueProperty]:r.value[l])!==o&&1*n!=1*o||r.value.splice(l,1);r.updateValues(),("radio"===r.inputType&&a.checked||"checkbox"===r.inputType)&&r.emit("local::change autocompleteChange",r.value)}}function m(e){var t=gl(e.target);t.is(r.$inputEl[0])||r.$dropdownEl&&t.closest(r.$dropdownEl[0]).length||r.close()}function g(){r.open()}function v(){r.open()}function b(){r.$dropdownEl.find("label.active-state").length>0||setTimeout((function(){r.close()}),0)}function y(){r.positionDropdown()}function w(e){if(r.opened){if(27===e.keyCode)return e.preventDefault(),void r.$inputEl.blur();if(13===e.keyCode){var t=r.$dropdownEl.find(".autocomplete-dropdown-selected label");return t.length?(e.preventDefault(),t.trigger("click"),void r.$inputEl.blur()):void(r.params.typeahead&&(e.preventDefault(),r.$inputEl.blur()))}if(40===e.keyCode||38===e.keyCode){e.preventDefault();var n,a=r.$dropdownEl.find(".autocomplete-dropdown-selected");a.length&&(n=a[40===e.keyCode?"next":"prev"]("li")).length||(n=r.$dropdownEl.find("li").eq(40===e.keyCode?0:r.$dropdownEl.find("li").length-1)),n.hasClass("autocomplete-dropdown-placeholder")||(a.removeClass("autocomplete-dropdown-selected"),n.addClass("autocomplete-dropdown-selected"))}}}function x(){for(var e,t=gl(this),n=0;n<r.items.length;n+=1){var a="object"==typeof r.items[n]?r.items[n][r.params.valueProperty]:r.items[n],o=t.attr("data-value");a!==o&&1*a!=1*o||(e=r.items[n])}r.params.updateInputValueOnSelect&&(r.$inputEl.val("object"==typeof e?e[r.params.valueProperty]:e),r.$inputEl.trigger("input change")),r.value=[e],r.emit("local::change autocompleteChange",[e]),r.close()}return r.attachEvents=function(){"dropdown"!==r.params.openIn&&r.$openerEl&&r.$openerEl.on("click",g),"dropdown"===r.params.openIn&&r.$inputEl&&(r.$inputEl.on("focus",v),r.$inputEl.on(r.params.inputEvents,h),i.android?gl("html").on("click",m):r.$inputEl.on("blur",b),r.$inputEl.on("keydown",w))},r.detachEvents=function(){"dropdown"!==r.params.openIn&&r.$openerEl&&r.$openerEl.off("click",g),"dropdown"===r.params.openIn&&r.$inputEl&&(r.$inputEl.off("focus",v),r.$inputEl.off(r.params.inputEvents,h),i.android?gl("html").off("click",m):r.$inputEl.off("blur",b),r.$inputEl.off("keydown",w))},r.attachDropdownEvents=function(){r.$dropdownEl.on("click","label",x),t.on("resize",y)},r.detachDropdownEvents=function(){r.$dropdownEl.off("click","label",x),t.off("resize",y)},r.attachPageEvents=function(){r.$el.on("change",'input[type="radio"], input[type="checkbox"]',f),r.params.closeOnSelect&&!r.params.multiple&&r.$el.once("click",".list label",(function(){ns((function(){r.close()}))}))},r.detachPageEvents=function(){r.$el.off("change",'input[type="radio"], input[type="checkbox"]',f)},r.useModules(),r.init(),r||nm(a)}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,am(t,n);var r,o,s,i=a.prototype;return i.positionDropdown=function(){var e,t=this,n=t.$inputEl,a=t.app,r=t.$dropdownEl,o=n.parents(".page-content");if(0!==o.length){var s,i=n.offset(),l=n[0].offsetWidth,u=n[0].offsetHeight,c=n.parents(".list");c.parents().each((function(e){if(!s){var t=gl(e);t.parent(o).length&&(s=t)}}));var p,d=c.offset(),h=parseInt(o.css("padding-bottom"),10),f=c.length>0?d.left-o.offset().left:0,m=i.left-(c.length>0?d.left:0)-(a.rtl,0),g=i.top-(o.offset().top-o[0].scrollTop),v=o[0].scrollHeight-h-(g+o[0].scrollTop)-n[0].offsetHeight,b=a.rtl?"padding-right":"padding-left";c.length&&!t.params.expandInput&&(p=(a.rtl?c[0].offsetWidth-m-l:m)-("md"===a.theme?16:15)),r.css({left:(c.length>0?f:m)+"px",top:g+o[0].scrollTop+u+"px",width:(c.length>0?c[0].offsetWidth:l)+"px"}),r.children(".autocomplete-dropdown-inner").css(((e={maxHeight:v+"px"})[b]=c.length>0&&!t.params.expandInput?p+"px":"",e))}},i.focus=function(){this.$el.find("input[type=search]").focus()},i.source=function(e){var t=this;if(t.params.source){var n=t.$el;t.params.source.call(t,e,(function(a){var r="",o=t.params.limit?Math.min(t.params.limit,a.length):a.length;t.items=a;for(var s=0;s<o;s+=1){for(var i=!1,l="object"==typeof a[s]?a[s][t.params.valueProperty]:a[s],u=0;u<t.value.length;u+=1){var c="object"==typeof t.value[u]?t.value[u][t.params.valueProperty]:t.value[u];c!==l&&1*c!=1*l||(i=!0)}r+=t.renderItem({value:l,text:"object"==typeof a[s]?a[s][t.params.textProperty]:a[s],inputType:t.inputType,id:t.id,inputName:t.inputName,selected:i},s)}n.find(".autocomplete-found ul").html(r),0===a.length?0!==e.length?(n.find(".autocomplete-not-found").show(),n.find(".autocomplete-found, .autocomplete-values").hide()):(n.find(".autocomplete-values").show(),n.find(".autocomplete-found, .autocomplete-not-found").hide()):(n.find(".autocomplete-found").show(),n.find(".autocomplete-not-found, .autocomplete-values").hide())}))}},i.updateValues=function(){for(var e=this,t="",n=0;n<e.value.length;n+=1)t+=e.renderItem({value:"object"==typeof e.value[n]?e.value[n][e.params.valueProperty]:e.value[n],text:"object"==typeof e.value[n]?e.value[n][e.params.textProperty]:e.value[n],inputType:e.inputType,id:e.id,inputName:e.inputName+"-checked}",selected:!0},n);e.$el.find(".autocomplete-values ul").html(t)},i.preloaderHide=function(){var e=this;"dropdown"===e.params.openIn&&e.$dropdownEl?e.$dropdownEl.find(".autocomplete-preloader").removeClass("autocomplete-preloader-visible"):gl(".autocomplete-preloader").removeClass("autocomplete-preloader-visible")},i.preloaderShow=function(){var e=this;"dropdown"===e.params.openIn&&e.$dropdownEl?e.$dropdownEl.find(".autocomplete-preloader").addClass("autocomplete-preloader-visible"):gl(".autocomplete-preloader").addClass("autocomplete-preloader-visible")},i.renderPreloader=function(){var e=this,t={iosPreloaderContent:Ko,mdPreloaderContent:Yo,auroraPreloaderContent:Jo};return ec("div",{class:"autocomplete-preloader preloader "+(e.params.preloaderColor?"color-"+e.params.preloaderColor:"")},t[e.app.theme+"PreloaderContent"]||"")},i.renderSearchbar=function(){var e=this;return e.params.renderSearchbar?e.params.renderSearchbar.call(e):ec("form",{class:"searchbar"},ec("div",{class:"searchbar-inner"},ec("div",{class:"searchbar-input-wrap"},ec("input",{type:"search",spellcheck:e.params.searchbarSpellcheck||"false",placeholder:e.params.searchbarPlaceholder}),ec("i",{class:"searchbar-icon"}),ec("span",{class:"input-clear-button"})),e.params.searchbarDisableButton&&ec("span",{class:"searchbar-disable-button"},e.params.searchbarDisableText)))},i.renderItem=function(e,t){var n=this;if(n.params.renderItem)return n.params.renderItem.call(n,e,t);var a=e.value&&"string"==typeof e.value?e.value.replace(/"/g,"&quot;"):e.value;return"dropdown"!==n.params.openIn?ec("li",null,ec("label",{class:"item-"+e.inputType+" item-content"},ec("input",{type:e.inputType,name:e.inputName,value:a,_checked:e.selected}),ec("i",{class:"icon icon-"+e.inputType}),ec("div",{class:"item-inner"},ec("div",{class:"item-title"},e.text)))):e.placeholder?ec("li",{class:"autocomplete-dropdown-placeholder"},ec("label",{class:"item-content"},ec("div",{class:"item-inner"},ec("div",{class:"item-title"},e.text)))):ec("li",null,ec("label",{class:"item-radio item-content","data-value":a},ec("div",{class:"item-inner"},ec("div",{class:"item-title"},e.text))))},i.renderNavbar=function(){var e=this;if(e.params.renderNavbar)return e.params.renderNavbar.call(e);var t=e.params.pageTitle;void 0===t&&e.$openerEl&&e.$openerEl.length&&(t=e.$openerEl.find(".item-title").text().trim());var n="popup"===e.params.openIn,a=n?e.params.preloader&&ec("div",{class:"left"},e.renderPreloader()):ec("div",{class:"left sliding"},ec("a",{class:"link back"},ec("i",{class:"icon icon-back"}),ec("span",{class:"if-not-md"},e.params.pageBackLinkText))),r=n?ec("div",{class:"right"},ec("a",{class:"link popup-close","data-popup":".autocomplete-popup"},e.params.popupCloseLinkText)):e.params.preloader&&ec("div",{class:"right"},e.renderPreloader());return ec("div",{class:"navbar "+(e.params.navbarColorTheme?"color-"+e.params.navbarColorTheme:"")},ec("div",{class:"navbar-bg"}),ec("div",{class:"navbar-inner "+(e.params.navbarColorTheme?"color-"+e.params.navbarColorTheme:"")},a,t&&ec("div",{class:"title sliding"},t),r,ec("div",{class:"subnavbar sliding"},e.renderSearchbar())))},i.renderDropdown=function(){var e=this;return e.params.renderDropdown?e.params.renderDropdown.call(e,e.items):ec("div",{class:"autocomplete-dropdown"},ec("div",{class:"autocomplete-dropdown-inner"},ec("div",{class:"list "+(e.params.expandInput?"":"no-safe-areas")},ec("ul",null))),e.params.preloader&&e.renderPreloader())},i.renderPage=function(e){var t=this;return t.params.renderPage?t.params.renderPage.call(t,t.items):ec("div",{class:"page page-with-subnavbar autocomplete-page","data-name":"autocomplete-page"},t.renderNavbar(e),ec("div",{class:"searchbar-backdrop"}),ec("div",{class:"page-content"},ec("div",{class:"list autocomplete-list autocomplete-found autocomplete-list-"+t.id+" "+(t.params.formColorTheme?"color-"+t.params.formColorTheme:"")},ec("ul",null)),ec("div",{class:"list autocomplete-not-found"},ec("ul",null,ec("li",{class:"item-content"},ec("div",{class:"item-inner"},ec("div",{class:"item-title"},t.params.notFoundText))))),ec("div",{class:"list autocomplete-values"},ec("ul",null))))},i.renderPopup=function(){var e=this;return e.params.renderPopup?e.params.renderPopup.call(e,e.items):ec("div",{class:"popup autocomplete-popup"},ec("div",{class:"view"},e.renderPage(!0),";"))},i.onOpen=function(e,t){var n=this,a=n.app,r=gl(t);if(n.$el=r,n.el=r[0],n.openedIn=e,n.opened=!0,"dropdown"===n.params.openIn)n.attachDropdownEvents(),n.$dropdownEl.addClass("autocomplete-dropdown-in"),n.$inputEl.trigger("input");else{var o=r.find(".searchbar");"page"===n.params.openIn&&"ios"===a.theme&&0===o.length&&(o=gl(a.navbar.getElByPage(r)).find(".searchbar")),n.searchbar=a.searchbar.create({el:o,backdropEl:r.find(".searchbar-backdrop"),customSearch:!0,on:{search:function(e,t){0===t.length&&n.searchbar.enabled?n.searchbar.backdropShow():n.searchbar.backdropHide(),n.source(t)}}}),n.attachPageEvents(),n.updateValues(),n.params.requestSourceOnOpen&&n.source("")}n.emit("local::open autocompleteOpen",n)},i.autoFocus=function(){var e=this;return e.searchbar&&e.searchbar.$inputEl&&e.searchbar.$inputEl.focus(),e},i.onOpened=function(){var e=this;"dropdown"!==e.params.openIn&&e.params.autoFocus&&e.autoFocus(),e.emit("local::opened autocompleteOpened",e)},i.onClose=function(){var e=this;e.destroyed||(e.searchbar&&e.searchbar.destroy&&(e.searchbar.destroy(),e.searchbar=null,delete e.searchbar),"dropdown"===e.params.openIn?(e.detachDropdownEvents(),e.$dropdownEl.removeClass("autocomplete-dropdown-in").remove(),e.$inputEl.parents(".item-content-dropdown-expanded").removeClass("item-content-dropdown-expanded")):e.detachPageEvents(),e.emit("local::close autocompleteClose",e))},i.onClosed=function(){var e=this;e.destroyed||(e.opened=!1,e.$el=null,e.el=null,delete e.$el,delete e.el,e.emit("local::closed autocompleteClosed",e))},i.openPage=function(){var e=this;if(e.opened)return e;var t=e.renderPage();return e.view.router.navigate({url:e.url,route:{content:t,path:e.url,on:{pageBeforeIn:function(t,n){e.onOpen("page",n.el)},pageAfterIn:function(t,n){e.onOpened("page",n.el)},pageBeforeOut:function(t,n){e.onClose("page",n.el)},pageAfterOut:function(t,n){e.onClosed("page",n.el)}},options:{animate:e.params.animate}}}),e},i.openPopup=function(){var e=this;if(e.opened)return e;var t={content:e.renderPopup(),animate:e.params.animate,push:e.params.popupPush,swipeToClose:e.params.popupSwipeToClose,on:{popupOpen:function(t){e.onOpen("popup",t.el)},popupOpened:function(t){e.onOpened("popup",t.el)},popupClose:function(t){e.onClose("popup",t.el)},popupClosed:function(t){e.onClosed("popup",t.el)}}};return e.params.routableModals&&e.view?e.view.router.navigate({url:e.url,route:{path:e.url,popup:t}}):e.modal=e.app.popup.create(t).open(e.params.animate),e},i.openDropdown=function(){var e=this;e.$dropdownEl||(e.$dropdownEl=gl(e.renderDropdown())),e.$inputEl.parents(".list").length&&e.$inputEl.parents(".item-content").length>0&&e.params.expandInput&&e.$inputEl.parents(".item-content").addClass("item-content-dropdown-expanded");var t=e.$inputEl.parents(".page-content");e.params.dropdownContainerEl?gl(e.params.dropdownContainerEl).append(e.$dropdownEl):0===t.length?e.$dropdownEl.insertAfter(e.$inputEl):(e.positionDropdown(),t.append(e.$dropdownEl)),e.onOpen("dropdown",e.$dropdownEl),e.onOpened("dropdown",e.$dropdownEl)},i.open=function(){var e=this;return e.opened||e["open"+e.params.openIn.split("").map((function(e,t){return 0===t?e.toUpperCase():e})).join("")](),e},i.close=function(){var e=this;return e.opened?("dropdown"===e.params.openIn?(e.onClose(),e.onClosed()):e.params.routableModals&&e.view||"page"===e.openedIn?e.view.router.back({animate:e.params.animate}):(e.modal.once("modalClosed",(function(){ns((function(){e.destroyed||(e.modal.destroy(),delete e.modal)}))})),e.modal.close()),e):e},i.init=function(){this.attachEvents()},i.destroy=function(){var e=this;e.emit("local::beforeDestroy autocompleteBeforeDestroy",e),e.detachEvents(),e.$inputEl&&e.$inputEl[0]&&delete e.$inputEl[0].f7Autocomplete,e.$openerEl&&e.$openerEl[0]&&delete e.$openerEl[0].f7Autocomplete,Qo(e),e.destroyed=!0},r=a,o=[{key:"view",get:function(){var e,t=this,n=t.$openerEl,a=t.$inputEl,r=t.app;if(t.params.view)e=t.params.view;else if(n||a){var o=n||a;e=o.closest(".view").length&&o.closest(".view")[0].f7View}return e||(e=r.views.main),e}}],o&&tm(r.prototype,o),s&&tm(r,s),a}(Ts),om=rm,sm={name:"autocomplete",params:{autocomplete:{openerEl:void 0,inputEl:void 0,view:void 0,dropdownContainerEl:void 0,dropdownPlaceholderText:void 0,typeahead:!1,highlightMatches:!0,expandInput:!1,updateInputValueOnSelect:!0,inputEvents:"input",value:void 0,multiple:!1,source:void 0,limit:void 0,valueProperty:"id",textProperty:"text",openIn:"page",pageBackLinkText:"Back",popupCloseLinkText:"Close",pageTitle:void 0,searchbarPlaceholder:"Search...",searchbarDisableText:"Cancel",searchbarDisableButton:void 0,searchbarSpellcheck:!1,popupPush:!1,popupSwipeToClose:void 0,animate:!0,autoFocus:!1,closeOnSelect:!1,notFoundText:"Nothing found",requestSourceOnOpen:!1,preloaderColor:void 0,preloader:!1,formColorTheme:void 0,navbarColorTheme:void 0,routableModals:!1,url:"select/",renderDropdown:void 0,renderPage:void 0,renderPopup:void 0,renderItem:void 0,renderSearchbar:void 0,renderNavbar:void 0}},static:{Autocomplete:om},create:function(){var e=this;e.autocomplete=cs(wl({defaultSelector:void 0,constructor:om,app:e,domProp:"f7Autocomplete"}),{open:function(t){var n=e.autocomplete.get(t);if(n&&n.open)return n.open()},close:function(t){var n=e.autocomplete.get(t);if(n&&n.close)return n.close()}})}};function im(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lm(e,t){return lm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},lm(e,t)}var um=function(e){var t,n;function a(t,n){var a;void 0===n&&(n={});var r=im(a=e.call(this,n,[t])||this),o=ws(),s=cs({},t.params.tooltip),i=Vo();r.useModulesParams(s),r.params=cs(s,n),void 0===n.offset&&o.touch&&"hover"===r.params.trigger&&(r.params.offset=10);var l=r.params,u=l.targetEl,c=l.containerEl;if(!u&&!r.params.delegated)return r||im(a);var p=gl(u);if(0===p.length&&!r.params.delegated)return r||im(a);if(p[0]&&p[0].f7Tooltip&&!r.params.delegated)return p[0].f7Tooltip||im(a);var d=gl(c||t.$el).eq(0);0===d.length&&(d=t.$el);var h=gl(r.render()).eq(0);cs(r,{app:t,$targetEl:p,targetEl:p&&p[0],$containerEl:d,containerEl:d&&d[0],$el:h,el:h&&h[0],text:r.params.text||"",visible:!1,opened:!1}),p[0]&&(p[0].f7Tooltip=r);var f,m={};function g(){r.opened?r.hide():r.show(this)}function v(e){r.opened&&(gl(e.target).closest(p).length||gl(e.target).closest(r.$el).length)||r.hide()}function b(e){f||(f=!0,m.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,m.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,r.show(this))}function y(e){if(f){var t="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,n="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;Math.pow(Math.pow(t-m.x,2)+Math.pow(n-m.y,2),.5)>50&&(f=!1,r.hide())}}function w(){f&&(f=!1,r.hide())}function x(){r.show(this)}function k(){r.hide()}function C(){h.hasClass("tooltip-in")||h.removeClass("tooltip-out").remove()}return r.attachEvents=function(){if(h.on("transitionend",C),"click"===r.params.trigger)return r.params.delegated?gl(i).on("click",r.params.targetEl,g):r.$targetEl.on("click",g),void gl("html").on("click",v);if("manual"!==r.params.trigger)if(o.touch){var e=!!o.passiveListener&&{passive:!0};r.params.delegated?gl(i).on(t.touchEvents.start,r.params.targetEl,b,e):r.$targetEl.on(t.touchEvents.start,b,e),t.on("touchmove",y),t.on("touchend:passive",w)}else r.params.delegated?(gl(i).on(o.pointerEvents?"pointerenter":"mouseenter",r.params.targetEl,x,!0),gl(i).on(o.pointerEvents?"pointerleave":"mouseleave",r.params.targetEl,k,!0)):(r.$targetEl.on(o.pointerEvents?"pointerenter":"mouseenter",x),r.$targetEl.on(o.pointerEvents?"pointerleave":"mouseleave",k))},r.detachEvents=function(){if(h.off("transitionend",C),"click"===r.params.trigger)return r.params.delegated?gl(i).on("click",r.params.targetEl,g):r.$targetEl.off("click",g),void gl("html").off("click",v);if("manual"!==r.params.trigger)if(o.touch){var e=!!o.passiveListener&&{passive:!0};r.params.delegated?gl(i).off(t.touchEvents.start,r.params.targetEl,b,e):r.$targetEl.off(t.touchEvents.start,b,e),t.off("touchmove",y),t.off("touchend:passive",w)}else r.params.delegated?(gl(i).off(o.pointerEvents?"pointerenter":"mouseenter",r.params.targetEl,x,!0),gl(i).off(o.pointerEvents?"pointerleave":"mouseleave",r.params.targetEl,k,!0)):(r.$targetEl.off(o.pointerEvents?"pointerenter":"mouseenter",x),r.$targetEl.off(o.pointerEvents?"pointerleave":"mouseleave",k))},r.useModules(),r.init(),r||im(a)}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,lm(t,n);var r=a.prototype;return r.setTargetEl=function(e){var t=this;return t.detachEvents(),t.$targetEl=gl(e),t.targetEl=t.$targetEl[0],t.attachEvents(),t},r.position=function(e){var t=this,n=t.$el,a=t.app,r=t.$containerEl,o=!!t.params.containerEl,s=t.params.offset||0;n.css({left:"",top:""});var i,l,u,c,p=gl(e||t.targetEl),d=[n.width(),n.height()],h=d[0],f=d[1];n.css({left:"",top:""});var m=o&&r.length?r[0].getBoundingClientRect():a;if(p&&p.length>0){if(i=p.outerWidth(),l=p.outerHeight(),void 0===i&&void 0===l){var g=p[0].getBoundingClientRect();i=g.width,l=g.height}var v=p.offset();u=v.left-m.left,c=v.top-m.top;var b=p.parents(".page");b.length>0&&(c-=b[0].scrollTop)}var y=[0,0,0],w=y[0],x=y[1],k="top";f+s<c?x=c-f-s:f<m.height-c-l?(k="bottom",x=c+l+s):(k="middle",(x=l/2+c-f/2)<=0?x=8:x+f>=m.height&&(x=m.height-f-8)),"top"===k||"bottom"===k?((w=i/2+u-h/2)<8&&(w=8),w+h>m.width&&(w=m.width-h-8),w<0&&(w=0)):"middle"===k&&((w=u-h)<8||w+h>m.width)&&(w<8&&(w=u+i),w+h>m.width&&(w=m.width-h-8)),n.css({top:x+"px",left:w+"px"})},r.show=function(e){var t=this,n=t.$el,a=t.$targetEl,r=t.$containerEl;r[0]&&n[0]&&!r[0].contains(n[0])&&r.append(n),t.position(e);var o=gl(e);return t.visible=!0,t.opened=!0,a.trigger("tooltip:show"),n.trigger("tooltip:show"),o.length&&o[0]!==a[0]&&o.trigger("tooltip:show"),t.emit("local::show tooltipShow",t),n.removeClass("tooltip-out").addClass("tooltip-in"),t},r.hide=function(){var e=this,t=e.$el,n=e.$targetEl;return e.visible=!1,e.opened=!1,n.trigger("tooltip:hide"),t.trigger("tooltip:hide"),e.emit("local::hide tooltipHide",e),t.addClass("tooltip-out").removeClass("tooltip-in"),e},r.render=function(){var e=this;if(e.params.render)return e.params.render.call(e,e);var t=e.params;return('\n      <div class="tooltip '+(t.cssClass||"")+'">\n        <div class="tooltip-content">'+(t.text||"")+"</div>\n      </div>\n    ").trim()},r.setText=function(e){var t=this;return void 0===e||(t.params.text=e,t.text=e,t.$el&&t.$el.children(".tooltip-content").html(e),t.opened&&t.position()),t},r.init=function(){this.attachEvents()},r.destroy=function(){var e=this;e.$targetEl&&!e.destroyed&&(e.$targetEl.trigger("tooltip:beforedestroy"),e.emit("local::beforeDestroy tooltipBeforeDestroy",e),e.$el.remove(),e.$targetEl[0]&&delete e.$targetEl[0].f7Tooltip,e.detachEvents(),Qo(e),e.destroyed=!0)},a}(Ts),cm=um,pm={name:"tooltip",static:{Tooltip:cm},create:function(){var e=this;e.tooltip=wl({defaultSelector:".tooltip",constructor:cm,app:e,domProp:"f7Tooltip"}),e.tooltip.show=function(e){var t=gl(e);if(0!==t.length){var n=t[0].f7Tooltip;if(n)return n.show(t[0]),n}},e.tooltip.hide=function(e){var t=gl(e);if(0!==t.length){var n=t[0].f7Tooltip;if(n)return n.hide(),n}},e.tooltip.setText=function(e,t){var n=gl(e);if(0!==n.length){var a=n[0].f7Tooltip;if(a)return a.setText(t),a}}},params:{tooltip:{targetEl:null,delegated:!1,text:null,cssClass:null,render:null,offset:0,trigger:"hover",containerEl:void 0}},on:{tabMounted:function(e){var t=this;gl(e).find(".tooltip-init").each((function(e){var n=gl(e).attr("data-tooltip");n&&t.tooltip.create({targetEl:e,text:n})}))},tabBeforeRemove:function(e){gl(e).find(".tooltip-init").each((function(e){e.f7Tooltip&&e.f7Tooltip.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".tooltip-init").each((function(e){var n=gl(e).attr("data-tooltip");n&&t.tooltip.create({targetEl:e,text:n})})),"ios"===t.theme&&e.view&&e.view.router.dynamicNavbar&&e.$navbarEl&&e.$navbarEl.length>0&&e.$navbarEl.find(".tooltip-init").each((function(e){var n=gl(e).attr("data-tooltip");n&&t.tooltip.create({targetEl:e,text:n})}))},pageBeforeRemove:function(e){e.$el.find(".tooltip-init").each((function(e){e.f7Tooltip&&e.f7Tooltip.destroy()})),"ios"===this.theme&&e.view&&e.view.router.dynamicNavbar&&e.$navbarEl&&e.$navbarEl.length>0&&e.$navbarEl.find(".tooltip-init").each((function(e){e.f7Tooltip&&e.f7Tooltip.destroy()}))}},vnode:{"tooltip-init":{insert:function(e){var t=e.elm,n=gl(t).attr("data-tooltip");n&&this.tooltip.create({targetEl:t,text:n})},update:function(e){var t=e.elm;t.f7Tooltip&&e&&e.data&&e.data.attrs&&e.data.attrs["data-tooltip"]&&t.f7Tooltip.setText(e.data.attrs["data-tooltip"])},destroy:function(e){var t=e.elm;t.f7Tooltip&&t.f7Tooltip.destroy()}}}},dm={open:function(e){void 0===e&&(e=".menu-item-dropdown");if(e){var t=gl(e).closest(".menu-item-dropdown");if(t.length){var n=t.closest(".menu").eq(0);if(n.length){var a=n.css("z-index"),r=n[0].style.zIndex;n.css("z-index",parseInt(a||0,10)+1),n[0].f7MenuZIndex=r}t.eq(0).addClass("menu-item-dropdown-opened").trigger("menu:opened"),this.emit("menuOpened",t.eq(0)[0])}}},close:function(e){void 0===e&&(e=".menu-item-dropdown-opened");if(e){var t=gl(e).closest(".menu-item-dropdown-opened");if(t.length){var n=t.closest(".menu").eq(0);if(n.length){var a=n[0].f7MenuZIndex;n.css("z-index",a),delete n[0].f7MenuZIndex}t.eq(0).removeClass("menu-item-dropdown-opened").trigger("menu:closed"),this.emit("menuClosed",t.eq(0)[0])}}}},hm={name:"menu",create:function(){bs(this,{menu:dm})},on:{click:function(e){var t=this,n=gl(".menu-item-dropdown-opened");n.length&&n.each((function(n){gl(e.target).closest(".menu-item-dropdown-opened").length||t.menu.close(n)}))}},clicks:{".menu-item-dropdown":function(e,t,n){if(e.hasClass("menu-item-dropdown-opened")){if(gl(n.target).closest(".menu-dropdown").length)return;this.menu.close(e)}else this.menu.open(e)},".menu-close":function(){this.menu.close()}}},fm={render:function(e){var t=e.params,n=t.sliderLabel,a=t.sliderValue,r=t.sliderValueEditable,o=t.alphaLabelText;return ec("div",{class:"color-picker-module color-picker-module-alpha-slider"},ec("div",{class:"color-picker-slider-wrap"},n&&ec("div",{class:"color-picker-slider-label"},o),ec("div",{class:"range-slider color-picker-slider color-picker-slider-alpha"}),a&&ec("div",{class:"color-picker-slider-value"},r?ec("input",{type:"number",step:"0.01",min:"0",max:"1",class:"color-picker-value-alpha"}):ec("span",{class:"color-picker-value-alpha"}))))},init:function(e){function t(t){var n=e.value.alpha,a=parseFloat(t.target.value);Number.isNaN(a)?t.target.value=n:(a=Math.max(0,Math.min(1,a)),e.setValue({alpha:a}))}e.alphaRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-alpha"),min:0,max:1,step:.01,value:1,on:{change:function(t,n){var a=Math.floor(100*n)/100;e.setValue({alpha:a})}}}),e.$el.on("change",".color-picker-module-alpha-slider input",t),e.destroyAlphaSliderEvents=function(){e.$el.off("change",".color-picker-module-alpha-slider input",t)}},update:function(e){var t=e.value,n=e.params,a=n.sliderValue,r=n.sliderValueEditable,o=t.alpha;e.alphaRangeSlider.value=o,e.alphaRangeSlider.layout(),a&&r?e.$el.find("input.color-picker-value-alpha").val(o):e.$el.find("span.color-picker-value-alpha").text(o)},destroy:function(e){e.alphaRangeSlider&&e.alphaRangeSlider.destroy&&e.alphaRangeSlider.destroy(),delete e.alphaRangeSlider,e.destroyAlphaSliderEvents&&e.destroyAlphaSliderEvents(),delete e.destroyAlphaSliderEvents}},mm={render:function(){return ec("div",{class:"color-picker-module color-picker-module-current-color"},ec("div",{class:"color-picker-current-color"}))},update:function(e){e.$el.find(".color-picker-module-current-color .color-picker-current-color").css("background-color",e.value.hex)}},gm={render:function(e){var t=e.params,n=t.hexLabel,a=t.hexLabelText,r=t.hexValueEditable;return ec("div",{class:"color-picker-module color-picker-module-hex"},ec("div",{class:"color-picker-hex-wrap"},n&&ec("div",{class:"color-picker-hex-label"},a),ec("div",{class:"color-picker-hex-value"},r?ec("input",{type:"text",class:"color-picker-value-hex"}):ec("span",{class:"color-picker-value-hex"}))))},init:function(e){function t(t){var n=e.value.hex,a=t.target.value.replace(/#/g,"");if(Number.isNaN(a)||!a||3!==a.length&&6!==a.length)t.target.value=n;else{var r=parseInt(a,16);r>parseInt("ffffff",16)&&(a="fff"),r<0&&(a="000"),e.setValue({hex:a})}}e.$el.on("change",".color-picker-module-hex input",t),e.destroyHexEvents=function(){e.$el.off("change",".color-picker-module-hex input",t)}},update:function(e){var t=e.value,n=e.params.hexValueEditable,a=t.hex;n?e.$el.find("input.color-picker-value-hex").val(a):e.$el.find("span.color-picker-value-hex").text(a)},destroy:function(e){e.destroyHexEvents&&e.destroyHexEvents(),delete e.destroyHexEvents}},vm={render:function(e){var t=e.params,n=t.sliderLabel,a=t.sliderValue,r=t.sliderValueEditable,o=t.hueLabelText,s=t.saturationLabelText,i=t.brightnessLabelText;return ec("div",{class:"color-picker-module color-picker-module-hsb-sliders"},ec("div",{class:"color-picker-slider-wrap"},n&&ec("div",{class:"color-picker-slider-label"},o),ec("div",{class:"range-slider color-picker-slider color-picker-slider-hue"}),a&&ec("div",{class:"color-picker-slider-value"},r?ec("input",{type:"number",step:"0.1",min:"0",max:"360",class:"color-picker-value-hue","data-color-index":"0"}):ec("span",{class:"color-picker-value-hue"}))),ec("div",{class:"color-picker-slider-wrap"},n&&ec("div",{class:"color-picker-slider-label"},s),ec("div",{class:"range-slider color-picker-slider color-picker-slider-saturation"}),a&&ec("div",{class:"color-picker-slider-value"},r?ec("input",{type:"number",step:"0.1",min:"0",max:"100",class:"color-picker-value-saturation","data-color-index":"1"}):ec("span",{class:"color-picker-value-saturation"}))),ec("div",{class:"color-picker-slider-wrap"},n&&ec("div",{class:"color-picker-slider-label"},i),ec("div",{class:"range-slider color-picker-slider color-picker-slider-brightness"}),a&&ec("div",{class:"color-picker-slider-value"},r?ec("input",{type:"number",step:"0.1",min:"0",max:"100",class:"color-picker-value-brightness","data-color-index":"2"}):ec("span",{class:"color-picker-value-brightness"}))))},init:function(e){function t(t){var n=[].concat(e.value.hsb),a=parseInt(gl(t.target).attr("data-color-index"),10),r=parseFloat(t.target.value);Number.isNaN(r)?t.target.value=n[a]:(r=0===a?Math.max(0,Math.min(360,r)):Math.max(0,Math.min(100,r))/100,n[a]=r,e.setValue({hsb:n}))}e.hueRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-hue"),min:0,max:360,step:.1,value:0,on:{change:function(t,n){e.setValue({hue:n})}}}),e.saturationRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-saturation"),min:0,max:1,step:.001,value:0,on:{change:function(t,n){var a=Math.floor(1e3*n)/1e3;e.setValue({hsb:[e.value.hsb[0],a,e.value.hsb[2]]})}}}),e.brightnessRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-brightness"),min:0,max:1,step:.001,value:0,on:{change:function(t,n){var a=Math.floor(1e3*n)/1e3;e.setValue({hsb:[e.value.hsb[0],e.value.hsb[1],a]})}}}),e.$el.on("change",".color-picker-module-hsb-sliders input",t),e.destroyHsbSlidersEvents=function(){e.$el.off("change",".color-picker-module-hsb-sliders input",t)}},update:function(e){var t=e.app,n=e.value,a=e.params,r=a.sliderValue,o=a.sliderValueEditable,s=n.hsb,i=n.hue;e.hueRangeSlider.value=i,e.saturationRangeSlider.value=s[1],e.brightnessRangeSlider.value=s[2],e.hueRangeSlider.layout(),e.saturationRangeSlider.layout(),e.brightnessRangeSlider.layout();var l=ms(s[0],s[1],1),u=ms(s[0],0,1),c=ms(s[0],1,1),p=s[2];e.hueRangeSlider.$el[0].style.setProperty("--f7-range-knob-color","hsl("+i+", 100%, 50%)"),e.saturationRangeSlider.$el[0].style.setProperty("--f7-range-knob-color","hsl("+l[0]+", "+100*l[1]+"%, "+100*l[2]+"%)"),e.brightnessRangeSlider.$el[0].style.setProperty("--f7-range-knob-color","rgb("+255*p+", "+255*p+", "+255*p+")"),e.saturationRangeSlider.$el.find(".range-bar").css("background-image","linear-gradient("+(t.rtl?"to left":"to right")+", hsl("+u[0]+", "+100*u[1]+"%, "+100*u[2]+"%), hsl("+c[0]+", "+100*c[1]+"%, "+100*c[2]+"%))"),r&&o?(e.$el.find("input.color-picker-value-hue").val(""+i),e.$el.find("input.color-picker-value-saturation").val(""+1e3*s[1]/10),e.$el.find("input.color-picker-value-brightness").val(""+1e3*s[2]/10)):r&&(e.$el.find("span.color-picker-value-hue").text(""+i),e.$el.find("span.color-picker-value-saturation").text(""+1e3*s[1]/10),e.$el.find("span.color-picker-value-brightness").text(""+1e3*s[2]/10))},destroy:function(e){e.hueRangeSlider&&e.hueRangeSlider.destroy&&e.hueRangeSlider.destroy(),e.saturationRangeSlider&&e.saturationRangeSlider.destroy&&e.saturationRangeSlider.destroy(),e.brightnessRangeSlider&&e.brightnessRangeSlider.destroy&&e.brightnessRangeSlider.destroy(),delete e.hueRangeSlider,delete e.saturationRangeSlider,delete e.brightnessRangeSlider,e.destroyHsbSlidersEvents&&e.destroyHsbSlidersEvents(),delete e.destroyHsbSlidersEvents}},bm={render:function(e){var t=e.params,n=t.sliderLabel,a=t.sliderValue,r=t.sliderValueEditable,o=t.hueLabelText;return ec("div",{class:"color-picker-module color-picker-module-hue-slider"},ec("div",{class:"color-picker-slider-wrap"},n&&ec("div",{class:"color-picker-slider-label"},o),ec("div",{class:"range-slider color-picker-slider color-picker-slider-hue"}),a&&ec("div",{class:"color-picker-slider-value"},r?ec("input",{type:"number",step:"0.1",min:"0",max:"360",class:"color-picker-value-hue"}):ec("span",{class:"color-picker-value-hue"}))))},init:function(e){e.hueRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-hue"),min:0,max:360,step:.1,value:0,on:{change:function(t,n){e.setValue({hue:n})}}})},update:function(e){var t=e.value,n=e.params,a=n.sliderValue,r=n.sliderValueEditable,o=t.hue;e.hueRangeSlider.value=o,e.hueRangeSlider.layout(),e.hueRangeSlider.$el[0].style.setProperty("--f7-range-knob-color","hsl("+o+", 100%, 50%)"),a&&r?e.$el.find("input.color-picker-value-hue").val(""+o):a&&e.$el.find("span.color-picker-value-hue").text(""+o)},destroy:function(e){e.hueRangeSlider&&e.hueRangeSlider.destroy&&e.hueRangeSlider.destroy(),delete e.hueRangeSlider}},ym={render:function(e){var t=e.params,n=t.sliderLabel,a=t.sliderValue,r=t.sliderValueEditable,o=t.brightnessLabelText;return ec("div",{class:"color-picker-module color-picker-module-brightness-slider"},ec("div",{class:"color-picker-slider-wrap"},n&&ec("div",{class:"color-picker-slider-label"},o),ec("div",{class:"range-slider color-picker-slider color-picker-slider-brightness"}),a&&ec("div",{class:"color-picker-slider-value"},r?ec("input",{type:"number",step:"0.1",min:"0",max:"100",class:"color-picker-value-brightness"}):ec("span",{class:"color-picker-value-brightness"}))))},init:function(e){e.brightnessRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-brightness"),min:0,max:1,step:.001,value:0,on:{change:function(t,n){var a=Math.floor(1e3*n)/1e3;e.setValue({hsb:[e.value.hsb[0],e.value.hsb[1],a]})}}})},update:function(e){var t=e.value,n=e.app,a=e.params,r=a.sliderValue,o=a.sliderValueEditable,s=t.hsb;e.brightnessRangeSlider.value=s[2],e.brightnessRangeSlider.layout();var i=ms(s[0],s[1],s[2]),l=ms(s[0],s[1],0),u=ms(s[0],s[1],1);e.brightnessRangeSlider.$el[0].style.setProperty("--f7-range-knob-color","hsl("+i[0]+", "+100*i[1]+"%, "+100*i[2]+"%)"),e.brightnessRangeSlider.$el.find(".range-bar").css("background-image","linear-gradient("+(n.rtl?"to left":"to right")+", hsl("+l[0]+", "+100*l[1]+"%, "+100*l[2]+"%), hsl("+u[0]+", "+100*u[1]+"%, "+100*u[2]+"%))"),r&&o?e.$el.find("input.color-picker-value-brightness").val(""+1e3*s[2]/10):r&&e.$el.find("span.color-picker-value-brightness").text(""+1e3*s[2]/10)},destroy:function(e){e.brightnessRangeSlider&&e.brightnessRangeSlider.destroy&&e.brightnessRangeSlider.destroy(),delete e.brightnessRangeSlider}},wm={render:function(e){return ec("div",{class:"color-picker-module color-picker-module-palette"},ec("div",{class:"color-picker-palette"},e.params.palette.map((function(e){if(Array.isArray(e)){var t='<div class="color-picker-palette-row">';return t+=e.map((function(e){return'\n                <div class="color-picker-palette-value" data-palette-color="'+e+'" style="background-color: '+e+'"></div>\n              '})).join(""),t+="</div>"}return ec("div",{class:"color-picker-palette-value","data-palette-color":e,style:"background-color: "+e})}))))},init:function(e){function t(t){var n=gl(t.target).attr("data-palette-color");e.setValue({hex:n})}e.$el.on("click",".color-picker-module-palette .color-picker-palette-value",t),e.destroyPaletteEvents=function(){e.$el.off("click",".color-picker-module-hex input",t)}},destroy:function(e){e.destroyPaletteEvents&&e.destroyPaletteEvents(),delete e.destroyPaletteEvents}},xm={render:function(){return ec("div",{class:"color-picker-module color-picker-module-initial-current-colors"},ec("div",{class:"color-picker-initial-current-colors"},ec("div",{class:"color-picker-initial-color"}),ec("div",{class:"color-picker-current-color"})))},init:function(e){function t(){if(e.initialValue){var t=e.initialValue,n=t.hex,a=t.alpha;e.setValue({hex:n,alpha:a})}}e.$el.on("click",".color-picker-initial-color",t),e.destroyInitialCurrentEvents=function(){e.$el.off("click",".color-picker-initial-color",t)}},update:function(e){e.$el.find(".color-picker-module-initial-current-colors .color-picker-initial-color").css("background-color",e.initialValue.hex),e.$el.find(".color-picker-module-initial-current-colors .color-picker-current-color").css("background-color",e.value.hex)},destroy:function(e){e.destroyInitialCurrentEvents&&e.destroyInitialCurrentEvents(),delete e.destroyInitialCurrentEvents}},km={render:function(e){var t=e.params,n=t.barLabel,a=t.barValue,r=t.barValueEditable,o=t.redLabelText,s=t.greenLabelText,i=t.blueLabelText;return ec("div",{class:"color-picker-module color-picker-module-rgb-bars"},ec("div",{class:"color-picker-bar-wrap"},n&&ec("div",{class:"color-picker-bar-label"},o),ec("div",{class:"range-slider color-picker-bar color-picker-bar-red"}),a&&ec("div",{class:"color-picker-bar-value"},r?ec("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-bar-red","data-color-index":"0"}):ec("span",{class:"color-picker-value-bar-red"}))),ec("div",{class:"color-picker-bar-wrap"},n&&ec("div",{class:"color-picker-bar-label"},s),ec("div",{class:"range-slider color-picker-bar color-picker-bar-green"}),a&&ec("div",{class:"color-picker-bar-value"},r?ec("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-bar-green","data-color-index":"1"}):ec("span",{class:"color-picker-value-bar-green"}))),ec("div",{class:"color-picker-bar-wrap"},n&&ec("div",{class:"color-picker-bar-label"},i),ec("div",{class:"range-slider color-picker-bar color-picker-bar-blue"}),a&&ec("div",{class:"color-picker-bar-value"},r?ec("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-bar-blue","data-color-index":"2"}):ec("span",{class:"color-picker-value-bar-blue"}))))},init:function(e){function t(t){var n=[].concat(e.value.rgb),a=parseInt(gl(t.target).attr("data-color-index"),10),r=parseInt(t.target.value,10);Number.isNaN(r)?t.target.value=n[a]:(r=Math.max(0,Math.min(255,r)),n[a]=r,e.setValue({rgb:n}))}e.redBar=e.app.range.create({el:e.$el.find(".color-picker-bar-red"),min:0,max:255,step:1,value:0,vertical:!0,on:{change:function(t,n){e.setValue({rgb:[n,e.value.rgb[1],e.value.rgb[2]]})}}}),e.greenBar=e.app.range.create({el:e.$el.find(".color-picker-bar-green"),min:0,max:255,step:1,value:0,vertical:!0,on:{change:function(t,n){e.setValue({rgb:[e.value.rgb[0],n,e.value.rgb[2]]})}}}),e.blueBar=e.app.range.create({el:e.$el.find(".color-picker-bar-blue"),min:0,max:255,step:1,value:0,vertical:!0,on:{change:function(t,n){e.setValue({rgb:[e.value.rgb[0],e.value.rgb[1],n]})}}}),e.$el.on("change",".color-picker-module-rgb-bars input",t),e.destroyRgbBarsEvents=function(){e.$el.off("change",".color-picker-module-rgb-bars input",t)}},update:function(e){var t=e.value,n=e.redBar,a=e.greenBar,r=e.blueBar,o=e.params,s=o.barValue,i=o.barValueEditable,l=t.rgb;n.value=l[0],a.value=l[1],r.value=l[2],n.layout(),a.layout(),r.layout(),n.$el.find(".range-bar").css("background-image","linear-gradient(to top, rgb(0, "+l[1]+", "+l[2]+"), rgb(255, "+l[1]+", "+l[2]+"))"),a.$el.find(".range-bar").css("background-image","linear-gradient(to top, rgb("+l[0]+", 0, "+l[2]+"), rgb("+l[0]+", 255, "+l[2]+"))"),r.$el.find(".range-bar").css("background-image","linear-gradient(to top, rgb("+l[0]+", "+l[1]+", 0), rgb("+l[0]+", "+l[1]+", 255))"),s&&i?(e.$el.find("input.color-picker-value-bar-red").val(l[0]),e.$el.find("input.color-picker-value-bar-green").val(l[1]),e.$el.find("input.color-picker-value-bar-blue").val(l[2])):s&&(e.$el.find("span.color-picker-value-bar-red").text(l[0]),e.$el.find("span.color-picker-value-bar-green").text(l[1]),e.$el.find("span.color-picker-value-bar-blue").text(l[2]))},destroy:function(e){e.redBar&&e.redBar.destroy&&e.redBar.destroy(),e.greenBar&&e.greenBar.destroy&&e.greenBar.destroy(),e.blueBar&&e.blueBar.destroy&&e.blueBar.destroy(),delete e.redBar,delete e.greenBar,delete e.blueBar,e.destroyRgbBarsEvents&&e.destroyRgbBarsEvents(),delete e.destroyRgbBarsEvents}},Cm={render:function(e){var t=e.params,n=t.sliderLabel,a=t.sliderValue,r=t.sliderValueEditable,o=t.redLabelText,s=t.greenLabelText,i=t.blueLabelText;return ec("div",{class:"color-picker-module color-picker-module-rgb-sliders"},ec("div",{class:"color-picker-slider-wrap"},n&&ec("div",{class:"color-picker-slider-label"},o),ec("div",{class:"range-slider color-picker-slider color-picker-slider-red"}),a&&ec("div",{class:"color-picker-slider-value"},r?ec("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-red","data-color-index":"0"}):ec("span",{class:"color-picker-value-red"}))),ec("div",{class:"color-picker-slider-wrap"},n&&ec("div",{class:"color-picker-slider-label"},s),ec("div",{class:"range-slider color-picker-slider color-picker-slider-green"}),a&&ec("div",{class:"color-picker-slider-value"},r?ec("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-green","data-color-index":"1"}):ec("span",{class:"color-picker-value-green"}))),ec("div",{class:"color-picker-slider-wrap"},n&&ec("div",{class:"color-picker-slider-label"},i),ec("div",{class:"range-slider color-picker-slider color-picker-slider-blue"}),a&&ec("div",{class:"color-picker-slider-value"},r?ec("input",{type:"number",step:"1",min:"0",max:"255",class:"color-picker-value-blue","data-color-index":"2"}):ec("span",{class:"color-picker-value-blue"}))))},init:function(e){function t(t){var n=[].concat(e.value.rgb),a=parseInt(gl(t.target).attr("data-color-index"),10),r=parseInt(t.target.value,10);Number.isNaN(r)?t.target.value=n[a]:(r=Math.max(0,Math.min(255,r)),n[a]=r,e.setValue({rgb:n}))}e.redRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-red"),min:0,max:255,step:1,value:0,on:{change:function(t,n){e.setValue({rgb:[n,e.value.rgb[1],e.value.rgb[2]]})}}}),e.greenRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-green"),min:0,max:255,step:1,value:0,on:{change:function(t,n){e.setValue({rgb:[e.value.rgb[0],n,e.value.rgb[2]]})}}}),e.blueRangeSlider=e.app.range.create({el:e.$el.find(".color-picker-slider-blue"),min:0,max:255,step:1,value:0,on:{change:function(t,n){e.setValue({rgb:[e.value.rgb[0],e.value.rgb[1],n]})}}}),e.$el.on("change",".color-picker-module-rgb-sliders input",t),e.destroyRgbSlidersEvents=function(){e.$el.off("change",".color-picker-module-rgb-sliders input",t)}},update:function(e){var t=e.app,n=e.value,a=e.redRangeSlider,r=e.greenRangeSlider,o=e.blueRangeSlider,s=e.params,i=s.sliderValue,l=s.sliderValueEditable,u=n.rgb;a.value=u[0],r.value=u[1],o.value=u[2],a.layout(),r.layout(),o.layout(),a.$el[0].style.setProperty("--f7-range-knob-color","rgb("+u[0]+", "+u[1]+", "+u[2]+")"),r.$el[0].style.setProperty("--f7-range-knob-color","rgb("+u[0]+", "+u[1]+", "+u[2]+")"),o.$el[0].style.setProperty("--f7-range-knob-color","rgb("+u[0]+", "+u[1]+", "+u[2]+")");var c=t.rtl?"to left":"to right";a.$el.find(".range-bar").css("background-image","linear-gradient("+c+", rgb(0, "+u[1]+", "+u[2]+"), rgb(255, "+u[1]+", "+u[2]+"))"),r.$el.find(".range-bar").css("background-image","linear-gradient("+c+", rgb("+u[0]+", 0, "+u[2]+"), rgb("+u[0]+", 255, "+u[2]+"))"),o.$el.find(".range-bar").css("background-image","linear-gradient("+c+", rgb("+u[0]+", "+u[1]+", 0), rgb("+u[0]+", "+u[1]+", 255))"),i&&l?(e.$el.find("input.color-picker-value-red").val(u[0]),e.$el.find("input.color-picker-value-green").val(u[1]),e.$el.find("input.color-picker-value-blue").val(u[2])):i&&(e.$el.find("span.color-picker-value-red").text(u[0]),e.$el.find("span.color-picker-value-green").text(u[1]),e.$el.find("span.color-picker-value-blue").text(u[2]))},destroy:function(e){e.redRangeSlider&&e.redRangeSlider.destroy&&e.redRangeSlider.destroy(),e.greenRangeSlider&&e.greenRangeSlider.destroy&&e.greenRangeSlider.destroy(),e.blueRangeSlider&&e.blueRangeSlider.destroy&&e.blueRangeSlider.destroy(),delete e.redRangeSlider,delete e.greenRangeSlider,delete e.blueRangeSlider,e.destroyRgbSlidersEvents&&e.destroyRgbSlidersEvents(),delete e.destroyRgbSlidersEvents}},Em={render:function(){return ec("div",{class:"color-picker-module color-picker-module-sb-spectrum"},ec("div",{class:"color-picker-sb-spectrum",style:"background-color: hsl(0, 100%, 50%)"},ec("div",{class:"color-picker-sb-spectrum-handle"})))},init:function(e){var t,n,a,r,o,s,i,l,u=e.app,c=e.$el;function p(t,n){var a=(t-s.left)/s.width,r=(n-s.top)/s.height;a=Math.max(0,Math.min(1,a)),r=1-Math.max(0,Math.min(1,r)),e.setValue({hsb:[e.value.hue,a,r]})}function d(e){if(!t){n="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,r=n,a="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,o=a;var u=gl(e.target);(l=u.closest(".color-picker-sb-spectrum-handle").length>0)||(i=u.closest(".color-picker-sb-spectrum").length>0),i&&(s=c.find(".color-picker-sb-spectrum")[0].getBoundingClientRect(),p(n,a)),(l||i)&&c.find(".color-picker-sb-spectrum-handle").addClass("color-picker-sb-spectrum-handle-pressed")}}function h(e){(i||l)&&(r="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,o="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,e.preventDefault(),t||(t=!0,l&&(s=c.find(".color-picker-sb-spectrum")[0].getBoundingClientRect())),(i||l)&&p(r,o))}function f(){t=!1,(i||l)&&c.find(".color-picker-sb-spectrum-handle").removeClass("color-picker-sb-spectrum-handle-pressed"),i=!1,l=!1}function m(){e.modules["sb-spectrum"].update(e)}var g=!("touchstart"!==u.touchEvents.start||!ws().passiveListener)&&{passive:!0,capture:!1};e.$el.on(u.touchEvents.start,d,g),u.on("touchmove:active",h),u.on("touchend:passive",f),u.on("resize",m),e.destroySpectrumEvents=function(){e.$el.off(u.touchEvents.start,d,g),u.off("touchmove:active",h),u.off("touchend:passive",f),u.off("resize",m)}},update:function(e){var t=e.value,n=t.hsl,a=t.hsb,r=e.$el.find(".color-picker-sb-spectrum")[0].offsetWidth,o=e.$el.find(".color-picker-sb-spectrum")[0].offsetHeight;e.$el.find(".color-picker-sb-spectrum").css("background-color","hsl("+n[0]+", 100%, 50%)"),e.$el.find(".color-picker-sb-spectrum-handle").css("background-color","hsl("+n[0]+", "+100*n[1]+"%, "+100*n[2]+"%)").transform("translate("+r*a[1]+"px, "+o*(1-a[2])+"px)")},destroy:function(e){e.destroySpectrumEvents&&e.destroySpectrumEvents(),delete e.destroySpectrumEvents}},Sm={render:function(){return ec("div",{class:"color-picker-module color-picker-module-hs-spectrum"},ec("div",{class:"color-picker-hs-spectrum"},ec("div",{class:"color-picker-hs-spectrum-handle"})))},init:function(e){var t,n,a,r,o,s,i,l,u=e.app,c=e.$el;function p(t,n){var a=(t-s.left)/s.width*360,r=(n-s.top)/s.height;a=Math.max(0,Math.min(360,a)),r=1-Math.max(0,Math.min(1,r)),e.setValue({hsb:[a,r,e.value.hsb[2]]})}function d(e){if(!t){n="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,r=n,a="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,o=a;var u=gl(e.target);(l=u.closest(".color-picker-hs-spectrum-handle").length>0)||(i=u.closest(".color-picker-hs-spectrum").length>0),i&&(s=c.find(".color-picker-hs-spectrum")[0].getBoundingClientRect(),p(n,a)),(l||i)&&c.find(".color-picker-hs-spectrum-handle").addClass("color-picker-hs-spectrum-handle-pressed")}}function h(e){(i||l)&&(r="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,o="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,e.preventDefault(),t||(t=!0,l&&(s=c.find(".color-picker-hs-spectrum")[0].getBoundingClientRect())),(i||l)&&p(r,o))}function f(){t=!1,(i||l)&&c.find(".color-picker-hs-spectrum-handle").removeClass("color-picker-hs-spectrum-handle-pressed"),i=!1,l=!1}function m(){e.modules["hs-spectrum"].update(e)}var g=!("touchstart"!==u.touchEvents.start||!ws().passiveListener)&&{passive:!0,capture:!1};e.$el.on(u.touchEvents.start,d,g),u.on("touchmove:active",h),u.on("touchend:passive",f),u.on("resize",m),e.destroySpectrumEvents=function(){e.$el.off(u.touchEvents.start,d,g),u.off("touchmove:active",h),u.off("touchend:passive",f),u.off("resize",m)}},update:function(e){var t=e.value.hsb,n=e.$el.find(".color-picker-hs-spectrum")[0].offsetWidth,a=e.$el.find(".color-picker-hs-spectrum")[0].offsetHeight,r=ms(t[0],t[1],1);e.$el.find(".color-picker-hs-spectrum-handle").css("background-color","hsl("+r[0]+", "+100*r[1]+"%, "+100*r[2]+"%)").transform("translate("+n*(t[0]/360)+"px, "+a*(1-t[1])+"px)")},destroy:function(e){e.destroySpectrumEvents&&e.destroySpectrumEvents(),delete e.destroySpectrumEvents}};var $m={render:function(){return ec("div",{class:"color-picker-module color-picker-module-wheel"},ec("div",{class:"color-picker-wheel"},ec("svg",{viewBox:"0 0 300 300",width:"300",height:"300"},function(){for(var e="",t=256;t>0;t-=1){var n=t*Math.PI/128,a=1.40625*t;e+='<circle cx="'+(150-125*Math.sin(n))+'" cy="'+(150-125*Math.cos(n))+'" r="25" fill="hsl('+a+', 100%, 50%)"></circle>'}return e}()),ec("div",{class:"color-picker-wheel-handle"}),ec("div",{class:"color-picker-sb-spectrum",style:"background-color: hsl(0, 100%, 50%)"},ec("div",{class:"color-picker-sb-spectrum-handle"}))))},init:function(e){var t,n,a,r,o,s,i,l,u,c,p,d=e.app,h=e.$el;function f(t,n){var a=s.left+s.width/2,r=s.top+s.height/2,o=180*Math.atan2(n-r,t-a)/Math.PI+90;o<0&&(o+=360),o=360-o,e.setValue({hue:o})}function m(t,n){var a=(t-u.left)/u.width,r=(n-u.top)/u.height;a=Math.max(0,Math.min(1,a)),r=1-Math.max(0,Math.min(1,r)),e.setValue({hsb:[e.value.hue,a,r]})}function g(e){if(!t){n="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,r=n,a="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,o=a;var d=gl(e.target);l=d.closest(".color-picker-wheel-handle").length>0,i=d.closest("circle").length>0,(p=d.closest(".color-picker-sb-spectrum-handle").length>0)||(c=d.closest(".color-picker-sb-spectrum").length>0),i&&(s=h.find(".color-picker-wheel")[0].getBoundingClientRect(),f(n,a)),c&&(u=h.find(".color-picker-sb-spectrum")[0].getBoundingClientRect(),m(n,a)),(p||c)&&h.find(".color-picker-sb-spectrum-handle").addClass("color-picker-sb-spectrum-handle-pressed")}}function v(e){(i||l||c||p)&&(r="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,o="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,e.preventDefault(),t||(t=!0,l&&(s=h.find(".color-picker-wheel")[0].getBoundingClientRect()),p&&(u=h.find(".color-picker-sb-spectrum")[0].getBoundingClientRect())),(i||l)&&f(r,o),(c||p)&&m(r,o))}function b(){t=!1,(c||p)&&h.find(".color-picker-sb-spectrum-handle").removeClass("color-picker-sb-spectrum-handle-pressed"),i=!1,l=!1,c=!1,p=!1}function y(){e.modules.wheel.update(e)}var w=!("touchstart"!==d.touchEvents.start||!ws().passiveListener)&&{passive:!0,capture:!1};e.$el.on(d.touchEvents.start,g,w),d.on("touchmove:active",v),d.on("touchend:passive",b),d.on("resize",y),e.destroyWheelEvents=function(){e.$el.off(d.touchEvents.start,g,w),d.off("touchmove:active",v),d.off("touchend:passive",b),d.off("resize",y)}},update:function(e){var t=e.value,n=t.hsl,a=t.hsb,r=e.$el.find(".color-picker-sb-spectrum")[0].offsetWidth,o=e.$el.find(".color-picker-sb-spectrum")[0].offsetHeight,s=e.$el.find(".color-picker-wheel")[0].offsetWidth,i=s/2,l=t.hue*Math.PI/180,u=s/6/2,c=i-Math.sin(l)*(i-u)-u,p=i-Math.cos(l)*(i-u)-u;e.$el.find(".color-picker-wheel-handle").css("background-color","hsl("+n[0]+", 100%, 50%)").transform("translate("+c+"px, "+p+"px)"),e.$el.find(".color-picker-sb-spectrum").css("background-color","hsl("+n[0]+", 100%, 50%)"),e.$el.find(".color-picker-sb-spectrum-handle").css("background-color","hsl("+n[0]+", "+100*n[1]+"%, "+100*n[2]+"%)").transform("translate("+r*a[1]+"px, "+o*(1-a[2])+"px)")},destroy:function(e){e.destroyWheelEvents&&e.destroyWheelEvents(),delete e.destroyWheelEvents}};function Tm(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Im(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nm(e,t){return Nm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Nm(e,t)}var Om=function(e){var t,n;function a(t,n){var a;void 0===n&&(n={});var r,o,s,i=Im(a=e.call(this,n,[t])||this);if(i.params=cs({},t.params.colorPicker,n),i.params.containerEl&&0===(r=gl(i.params.containerEl)).length)return i||Im(a);function l(){i.open()}function u(e){e.preventDefault()}function c(){i.open()}function p(e){if(!i.destroyed&&i.params&&"page"!==i.params.openIn){var t=gl(e.target);i.opened&&!i.closing&&(t.closest('[class*="backdrop"]').length||t.closest(".color-picker-popup, .color-picker-popover").length||(o&&o.length>0?t[0]!==o[0]&&0===t.closest(".sheet-modal").length&&i.close():0===gl(e.target).closest(".sheet-modal").length&&i.close()))}}return i.params.inputEl&&(o=gl(i.params.inputEl)),i.params.targetEl&&(s=gl(i.params.targetEl)),cs(i,{app:t,$containerEl:r,containerEl:r&&r[0],inline:r&&r.length>0,$inputEl:o,inputEl:o&&o[0],$targetEl:s,targetEl:s&&s[0],initialized:!1,opened:!1,url:i.params.url,modules:{"alpha-slider":fm,"current-color":mm,hex:gm,"hsb-sliders":vm,"hue-slider":bm,"brightness-slider":ym,palette:wm,"initial-current-colors":xm,"rgb-bars":km,"rgb-sliders":Cm,"sb-spectrum":Em,"hs-spectrum":Sm,wheel:$m}}),cs(i,{attachInputEvents:function(){i.$inputEl.on("click",l),i.params.inputReadOnly&&(i.$inputEl.on("focus mousedown",u),i.$inputEl[0]&&(i.$inputEl[0].f7ValidateReadonly=!0))},detachInputEvents:function(){i.$inputEl.off("click",l),i.params.inputReadOnly&&(i.$inputEl.off("focus mousedown",u),i.$inputEl[0]&&delete i.$inputEl[0].f7ValidateReadonly)},attachTargetEvents:function(){i.$targetEl.on("click",c)},detachTargetEvents:function(){i.$targetEl.off("click",c)},attachHtmlEvents:function(){t.on("click",p)},detachHtmlEvents:function(){t.off("click",p)}}),i.init(),i||Im(a)}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,Nm(t,n);var r,o,s,i=a.prototype;return i.attachEvents=function(){var e=this;e.centerModules=e.centerModules.bind(e),e.params.centerModules&&e.app.on("resize",e.centerModules)},i.detachEvents=function(){var e=this;e.params.centerModules&&e.app.off("resize",e.centerModules)},i.centerModules=function(){var e=this;if(e.opened&&e.$el&&!e.inline){var t=e.$el.find(".page-content");if(t.length){var n=t[0];n.scrollHeight<=n.offsetHeight?t.addClass("justify-content-center"):t.removeClass("justify-content-center")}}},i.initInput=function(){var e=this;e.$inputEl&&e.params.inputReadOnly&&e.$inputEl.prop("readOnly",!0)},i.getModalType=function(){var e=this,t=e.app,n=e.modal,a=e.params,r=a.openIn,o=a.openInPhone,s=xs();return n&&n.type?n.type:"auto"!==r?r:e.inline?null:s.ios?s.ipad?"popover":o:t.width>=768||s.desktop&&"aurora"===t.theme?"popover":o},i.formatValue=function(){var e=this,t=e.value;return e.params.formatValue?e.params.formatValue.call(e,t):t.hex},i.normalizeHsValues=function(e){return[Math.floor(10*e[0])/10,Math.floor(1e3*e[1])/1e3,Math.floor(1e3*e[2])/1e3]},i.setValue=function(e,t){void 0===e&&(e={}),void 0===t&&(t=!0);var n=this;if(void 0!==e){var a,r=n.value||{},o=r.hex,s=r.rgb,i=r.hsl,l=r.hsb,u=r.alpha,c=void 0===u?1:u,p=r.hue,d=r.rgba,h=r.hsla,f=n.value||!n.value&&!n.params.value;if(Object.keys(e).forEach((function(t){if(n.value&&void 0!==n.value[t]){var r=e[t];Array.isArray(r)?r.forEach((function(e,r){e!==n.value[t][r]&&(a=!0)})):r!==n.value[t]&&(a=!0)}else a=!0})),a){if(e.rgb||e.rgba){var m=e.rgb||e.rgba,g=m[0],v=m[1],b=m[2],y=m[3],w=void 0===y?c:y;s=[g,v,b],o=ds.apply(void 0,s),i=hs.apply(void 0,s),l=gs.apply(void 0,i),i=n.normalizeHsValues(i),p=(l=n.normalizeHsValues(l))[0],c=w,d=[s[0],s[1],s[2],w],h=[i[0],i[1],i[2],w]}if(e.hsl||e.hsla){var x=e.hsl||e.hsla,k=x[0],C=x[1],E=x[2],S=x[3],$=void 0===S?c:S;i=[k,C,E],s=fs.apply(void 0,i),o=ds.apply(void 0,s),l=gs.apply(void 0,i),i=n.normalizeHsValues(i),p=(l=n.normalizeHsValues(l))[0],c=$,d=[s[0],s[1],s[2],$],h=[i[0],i[1],i[2],$]}if(e.hsb){var T=e.hsb,I=T[0],N=T[1],O=T[2],R=T[3],A=void 0===R?c:R;l=[I,N,O],i=ms.apply(void 0,l),s=fs.apply(void 0,i),o=ds.apply(void 0,s),i=n.normalizeHsValues(i),p=(l=n.normalizeHsValues(l))[0],c=A,d=[s[0],s[1],s[2],A],h=[i[0],i[1],i[2],A]}if(e.hex&&(s=ps(e.hex),o=ds.apply(void 0,s),i=hs.apply(void 0,s),l=gs.apply(void 0,i),i=n.normalizeHsValues(i),p=(l=n.normalizeHsValues(l))[0],d=[s[0],s[1],s[2],c],h=[i[0],i[1],i[2],c]),void 0!==e.alpha&&(c=e.alpha,void 0!==s&&(d=[s[0],s[1],s[2],c]),void 0!==i&&(h=[i[0],i[1],i[2],c])),void 0!==e.hue){var M=i,B=(M[0],M[1]),P=M[2];i=[e.hue,B,P],l=gs.apply(void 0,i),s=fs.apply(void 0,i),o=ds.apply(void 0,s),i=n.normalizeHsValues(i),p=(l=n.normalizeHsValues(l))[0],d=[s[0],s[1],s[2],c],h=[i[0],i[1],i[2],c]}n.value={hex:o,alpha:c,hue:p,rgb:s,hsl:i,hsb:l,rgba:d,hsla:h},n.initialValue||(n.initialValue=cs({},n.value)),n.updateValue(f),n.opened&&t&&n.updateModules()}}},i.getValue=function(){return this.value},i.updateValue=function(e){void 0===e&&(e=!0);var t=this,n=t.$inputEl,a=t.value,r=t.$targetEl;if(r&&t.params.targetElSetBackgroundColor){var o=a.rgba;r.css("background-color","rgba("+o.join(", ")+")")}if(e&&t.emit("local::change colorPickerChange",t,a),n&&n.length){var s=t.formatValue(a);n&&n.length&&(n.val(s),e&&n.trigger("change"))}},i.updateModules=function(){var e=this,t=e.modules;e.params.modules.forEach((function(n){"string"==typeof n&&t[n]&&t[n].update?t[n].update(e):n&&n.update&&n.update(e)}))},i.update=function(){this.updateModules()},i.renderPicker=function(){var e=this,t=e.params,n=e.modules,a="";return t.modules.forEach((function(t){"string"==typeof t&&n[t]&&n[t].render?a+=n[t].render(e):t&&t.render&&(a+=t.render(e))})),a},i.renderNavbar=function(){var e=this;if(e.params.renderNavbar)return e.params.renderNavbar.call(e,e);var t=e.params,n=t.openIn,a=t.navbarTitleText,r=t.navbarBackLinkText,o=t.navbarCloseText;return ec("div",{class:"navbar"},ec("div",{class:"navbar-bg"}),ec("div",{class:"navbar-inner sliding"},"page"===n&&ec("div",{class:"left"},ec("a",{class:"link back"},ec("i",{class:"icon icon-back"}),ec("span",{class:"if-not-md"},r))),ec("div",{class:"title"},a),"page"!==n&&ec("div",{class:"right"},ec("a",{class:"link popup-close","data-popup":".color-picker-popup"},o))))},i.renderToolbar=function(){var e=this;return e.params.renderToolbar?e.params.renderToolbar.call(e,e):ec("div",{class:"toolbar toolbar-top no-shadow"},ec("div",{class:"toolbar-inner"},ec("div",{class:"left"}),ec("div",{class:"right"},ec("a",{class:"link sheet-close popover-close","data-sheet":".color-picker-sheet-modal","data-popover":".color-picker-popover"},e.params.toolbarCloseText))))},i.renderInline=function(){var e=this.params,t=e.cssClass,n=e.groupedModules;return ec("div",{class:"color-picker color-picker-inline "+(n?"color-picker-grouped-modules":"")+" "+(t||"")},this.renderPicker())},i.renderSheet=function(){var e=this,t=e.params,n=t.cssClass,a=t.toolbarSheet,r=t.groupedModules;return ec("div",{class:"sheet-modal color-picker color-picker-sheet-modal "+(r?"color-picker-grouped-modules":"")+" "+(n||"")},a&&e.renderToolbar(),ec("div",{class:"sheet-modal-inner"},ec("div",{class:"page-content"},e.renderPicker())))},i.renderPopover=function(){var e=this,t=e.params,n=t.cssClass,a=t.toolbarPopover,r=t.groupedModules;return ec("div",{class:"popover color-picker-popover "+(n||"")},ec("div",{class:"popover-inner"},ec("div",{class:"color-picker "+(r?"color-picker-grouped-modules":"")},a&&e.renderToolbar(),ec("div",{class:"page-content"},e.renderPicker()))))},i.renderPopup=function(){var e=this,t=e.params,n=t.cssClass,a=t.navbarPopup,r=t.groupedModules;return ec("div",{class:"popup color-picker-popup "+(n||"")},ec("div",{class:"page"},a&&e.renderNavbar(),ec("div",{class:"color-picker "+(r?"color-picker-grouped-modules":"")},ec("div",{class:"page-content"},e.renderPicker()))))},i.renderPage=function(){var e=this,t=e.params,n=t.cssClass,a=t.groupedModules;return ec("div",{class:"page color-picker-page "+(n||""),"data-name":"color-picker-page"},e.renderNavbar(),ec("div",{class:"color-picker "+(a?"color-picker-grouped-modules":"")},ec("div",{class:"page-content"},e.renderPicker())))},i.render=function(){var e=this,t=e.params;if(t.render)return t.render.call(e);if(e.inline)return e.renderInline();if("page"===t.openIn)return e.renderPage();var n=e.getModalType();return"popover"===n?e.renderPopover():"sheet"===n?e.renderSheet():"popup"===n?e.renderPopup():void 0},i.onOpen=function(){var e=this,t=e.initialized,n=e.$el,a=e.app,r=e.$inputEl,o=e.inline,s=e.value,i=e.params,l=e.modules;e.closing=!1,e.opened=!0,e.opening=!0,e.attachEvents(),i.modules.forEach((function(t){"string"==typeof t&&l[t]&&l[t].init?l[t].init(e):t&&t.init&&t.init(e)}));var u=!s&&i.value;t?s&&(e.initialValue=cs({},s),e.setValue(s,!1)):s?e.setValue(s):i.value?e.setValue(i.value,!1):i.value||e.setValue({hex:"#ff0000"},!1),u&&e.updateValue(),e.updateModules(),i.centerModules&&e.centerModules(),!o&&r&&r.length&&"md"===a.theme&&r.trigger("focus"),e.initialized=!0,n&&n.trigger("colorpicker:open"),r&&r.trigger("colorpicker:open"),e.emit("local::open colorPickerOpen",e)},i.onOpened=function(){var e=this;e.opening=!1,e.$el&&e.$el.trigger("colorpicker:opened"),e.$inputEl&&e.$inputEl.trigger("colorpicker:opened"),e.emit("local::opened colorPickerOpened",e)},i.onClose=function(){var e=this,t=e.app,n=e.params,a=e.modules;if(e.opening=!1,e.closing=!0,e.detachEvents(),e.$inputEl)if("md"===t.theme)e.$inputEl.trigger("blur");else{var r=e.$inputEl.attr("validate"),o=e.$inputEl.attr("required");r&&o&&t.input.validate(e.$inputEl)}n.modules.forEach((function(t){"string"==typeof t&&a[t]&&a[t].destroy?a[t].destroy(e):t&&t.destroy&&t.destroy(e)})),e.$el&&e.$el.trigger("colorpicker:close"),e.$inputEl&&e.$inputEl.trigger("colorpicker:close"),e.emit("local::close colorPickerClose",e)},i.onClosed=function(){var e=this;e.opened=!1,e.closing=!1,e.inline||ns((function(){e.modal&&e.modal.el&&e.modal.destroy&&(e.params.routableModals||e.modal.destroy()),delete e.modal})),e.$el&&e.$el.trigger("colorpicker:closed"),e.$inputEl&&e.$inputEl.trigger("colorpicker:closed"),e.emit("local::closed colorPickerClosed",e)},i.open=function(){var e=this,t=e.app,n=e.opened,a=e.inline,r=e.$inputEl,o=e.$targetEl,s=e.params;if(!n){if(a)return e.$el=gl(e.render()),e.$el[0].f7ColorPicker=e,e.$containerEl.append(e.$el),e.onOpen(),void e.onOpened();var i=e.render();if("page"===s.openIn)e.view.router.navigate({url:e.url,route:{content:i,path:e.url,on:{pageBeforeIn:function(t,n){e.$el=n.$el.find(".color-picker"),e.$el[0].f7ColorPicker=e,e.onOpen()},pageAfterIn:function(){e.onOpened()},pageBeforeOut:function(){e.onClose()},pageAfterOut:function(){e.onClosed(),e.$el&&e.$el[0]&&(e.$el[0].f7ColorPicker=null,delete e.$el[0].f7ColorPicker)}}}});else{var l=e.getModalType(),u=s.backdrop;null==u&&("popover"===l&&!1!==t.params.popover.backdrop&&(u=!0),"popup"===l&&(u=!0));var c,p={targetEl:o||r,scrollToEl:s.scrollToInput?o||r:void 0,content:i,backdrop:u,closeByBackdropClick:s.closeByBackdropClick,on:{open:function(){var t=this;e.modal=t,e.$el="popover"===l||"popup"===l?t.$el.find(".color-picker"):t.$el,e.$el[0].f7ColorPicker=e,e.onOpen()},opened:function(){e.onOpened()},close:function(){e.onClose()},closed:function(){e.onClosed(),e.$el&&e.$el[0]&&(e.$el[0].f7ColorPicker=null,delete e.$el[0].f7ColorPicker)}}};if("popup"===l&&(p.push=s.popupPush,p.swipeToClose=s.popupSwipeToClose),"sheet"===l&&(p.push=s.sheetPush,p.swipeToClose=s.sheetSwipeToClose),s.routableModals&&e.view)e.view.router.navigate({url:e.url,route:(c={path:e.url},c[l]=p,c)});else e.modal=t[l].create(p),e.modal.open()}}},i.close=function(){var e=this,t=e.opened,n=e.inline;if(t)return n?(e.onClose(),void e.onClosed()):void(e.params.routableModals&&e.view||"page"===e.params.openIn?e.view.router.back():e.modal.close())},i.init=function(){var e=this;if(e.initInput(),e.inline)return e.open(),void e.emit("local::init colorPickerInit",e);!e.initialized&&e.params.value&&e.setValue(e.params.value),e.$inputEl&&e.attachInputEvents(),e.$targetEl&&e.attachTargetEvents(),e.params.closeByOutsideClick&&e.attachHtmlEvents(),e.emit("local::init colorPickerInit",e)},i.destroy=function(){var e=this;if(!e.destroyed){var t=e.$el;e.emit("local::beforeDestroy colorPickerBeforeDestroy",e),t&&t.trigger("colorpicker:beforedestroy"),e.close(),e.detachEvents(),e.$inputEl&&e.detachInputEvents(),e.$targetEl&&e.detachTargetEvents(),e.params.closeByOutsideClick&&e.detachHtmlEvents(),t&&t.length&&delete e.$el[0].f7ColorPicker,Qo(e),e.destroyed=!0}},r=a,o=[{key:"view",get:function(){var e,t=this.$inputEl,n=this.$targetEl,a=this.app,r=this.params;return r.view?e=r.view:(t&&(e=t.parents(".view").length&&t.parents(".view")[0].f7View),!e&&n&&(e=n.parents(".view").length&&n.parents(".view")[0].f7View)),e||(e=a.views.main),e}}],o&&Tm(r.prototype,o),s&&Tm(r,s),a}(Ts),Rm=Om,Am={name:"colorPicker",static:{ColorPicker:Rm},create:function(){var e=this;e.colorPicker=wl({defaultSelector:".color-picker",constructor:Rm,app:e,domProp:"f7ColorPicker"}),e.colorPicker.close=function(e){void 0===e&&(e=".color-picker");var t=gl(e);if(0!==t.length){var n=t[0].f7ColorPicker;!n||n&&!n.opened||n.close()}}},params:{colorPicker:{value:null,modules:["wheel"],palette:[["#FFEBEE","#FFCDD2","#EF9A9A","#E57373","#EF5350","#F44336","#E53935","#D32F2F","#C62828","#B71C1C"],["#F3E5F5","#E1BEE7","#CE93D8","#BA68C8","#AB47BC","#9C27B0","#8E24AA","#7B1FA2","#6A1B9A","#4A148C"],["#E8EAF6","#C5CAE9","#9FA8DA","#7986CB","#5C6BC0","#3F51B5","#3949AB","#303F9F","#283593","#1A237E"],["#E1F5FE","#B3E5FC","#81D4FA","#4FC3F7","#29B6F6","#03A9F4","#039BE5","#0288D1","#0277BD","#01579B"],["#E0F2F1","#B2DFDB","#80CBC4","#4DB6AC","#26A69A","#009688","#00897B","#00796B","#00695C","#004D40"],["#F1F8E9","#DCEDC8","#C5E1A5","#AED581","#9CCC65","#8BC34A","#7CB342","#689F38","#558B2F","#33691E"],["#FFFDE7","#FFF9C4","#FFF59D","#FFF176","#FFEE58","#FFEB3B","#FDD835","#FBC02D","#F9A825","#F57F17"],["#FFF3E0","#FFE0B2","#FFCC80","#FFB74D","#FFA726","#FF9800","#FB8C00","#F57C00","#EF6C00","#E65100"]],groupedModules:!1,centerModules:!0,sliderLabel:!1,sliderValue:!1,sliderValueEdiable:!1,barLabel:!1,barValue:!1,barValueEdiable:!1,hexLabel:!1,hexValueEditable:!1,redLabelText:"R",greenLabelText:"G",blueLabelText:"B",hueLabelText:"H",saturationLabelText:"S",brightnessLabelText:"B",hexLabelText:"HEX",alphaLabelText:"A",containerEl:null,openIn:"popover",openInPhone:"popup",popupPush:!1,popupSwipeToClose:void 0,sheetPush:!1,sheetSwipeToClose:void 0,formatValue:null,targetEl:null,targetElSetBackgroundColor:!1,inputEl:null,inputReadOnly:!0,closeByOutsideClick:!0,scrollToInput:!0,toolbarSheet:!0,toolbarPopover:!1,toolbarCloseText:"Done",navbarPopup:!0,navbarCloseText:"Done",navbarTitleText:"Color",navbarBackLinkText:"Back",cssClass:null,routableModals:!1,view:null,url:"color/",backdrop:null,closeByBackdropClick:!0,renderToolbar:null,renderNavbar:null,renderInline:null,renderPopover:null,renderSheet:null,renderPopup:null,render:null}}},Mm={open:function(e){var t=this,n=gl(e).eq(0);if(n.length&&(n.addClass("treeview-item-opened"),n.trigger("treeview:open"),t.emit("treeviewOpen",n[0]),n.hasClass("treeview-load-children")&&!n[0].f7TreeviewChildrenLoaded)){var a={iosPreloaderContent:Ko,mdPreloaderContent:Yo,auroraPreloaderContent:Jo};n.trigger("treeview:loadchildren",r),t.emit("treeviewLoadChildren",n[0],r),n.find(".treeview-toggle").addClass("treeview-toggle-hidden"),n.find(".treeview-item-root").prepend('<div class="preloader treeview-preloader">'+a[t.theme+"PreloaderContent"]+"</div>")}function r(e){e?(n.removeClass("treeview-item-opened"),n.trigger("treeview:close"),t.emit("treeviewClose",n[0])):n[0].f7TreeviewChildrenLoaded=!0,n.find(".treeview-toggle").removeClass("treeview-toggle-hidden"),n.find(".treeview-preloader").remove()}},close:function(e){var t=gl(e).eq(0);t.length&&(t.removeClass("treeview-item-opened"),t.trigger("treeview:close"),this.emit("treeviewClose",t[0]))},toggle:function(e){var t=gl(e).eq(0);if(t.length){var n=t.hasClass("treeview-item-opened");this.treeview[n?"close":"open"](t)}}},Bm={name:"treeview",create:function(){bs(this,{treeview:Mm})},clicks:{".treeview-toggle":function(e,t,n){if(!e.parents(".treeview-item-toggle").length){var a=e.parents(".treeview-item").eq(0);a.length&&(n.preventF7Router=!0,this.treeview.toggle(a[0]))}},".treeview-item-toggle":function(e,t,n){var a=e.closest(".treeview-item").eq(0);a.length&&(n.preventF7Router=!0,this.treeview.toggle(a[0]))}}};function Pm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dm(e,t){return Dm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Dm(e,t)}var Fm={bold:["bold","format_bold","bold"],italic:["italic","format_italic","italic"],underline:["underline","format_underlined","underline"],strikeThrough:["strikethrough","strikethrough_s","strikeThrough"],orderedList:["list_number","format_list_numbered","insertOrderedList"],unorderedList:["list_bullet","format_list_bulleted","insertUnorderedList"],link:["link","link","createLink"],image:["photo","image","insertImage"],paragraph:["paragraph",'<i class="icon"></i>',"formatBlock.P"],h1:['<i class="icon">H<sub>1</sub></i>','<i class="icon">H<sub>1</sub></i>',"formatBlock.H1"],h2:['<i class="icon">H<sub>2</sub></i>','<i class="icon">H<sub>2</sub></i>',"formatBlock.H2"],h3:['<i class="icon">H<sub>3</sub></i>','<i class="icon">H<sub>3</sub></i>',"formatBlock.H3"],alignLeft:["text_alignleft","format_align_left","justifyLeft"],alignCenter:["text_aligncenter","format_align_center","justifyCenter"],alignRight:["text_alignright","format_align_right","justifyRight"],alignJustify:["text_justify","format_align_justify","justifyFull"],subscript:["textformat_subscript",'<i class="icon">A<sub>1</sub></i>',"subscript"],superscript:["textformat_superscript",'<i class="icon">A<sup>1</sup></i>',"superscript"],indent:["increase_indent","format_indent_increase","indent"],outdent:["decrease_indent","format_indent_decrease","outdent"]},_m=function(e){var t,n;function a(t,n){var a,r=Pm(a=e.call(this,n,[t])||this),o=Vo(),s=xs(),i=cs({},t.params.textEditor);r.useModulesParams(i),r.params=cs(i,n);var l=r.params.el;if(!l)return r||Pm(a);var u=gl(l);if(0===u.length)return r||Pm(a);if(u[0].f7TextEditor)return u[0].f7TextEditor||Pm(a);var c=u.children(".text-editor-content");if(c.length||(u.append('<div class="text-editor-content" contenteditable></div>'),c=u.children(".text-editor-content")),cs(r,{app:t,$el:u,el:u[0],$contentEl:c,contentEl:c[0]}),"value"in n&&(r.value=r.params.value),"keyboard-toolbar"===r.params.mode&&(s.cordova||s.capacitor||s.android||(r.params.mode="popover")),"string"==typeof r.params.buttons)try{r.params.buttons=JSON.parse(r.params.buttons)}catch(e){throw new Error('Framework7: TextEditor: wrong "buttons" parameter format')}return u[0].f7TextEditor=r,r.onButtonClick=r.onButtonClick.bind(r),r.onFocus=r.onFocus.bind(r),r.onBlur=r.onBlur.bind(r),r.onInput=r.onInput.bind(r),r.onPaste=r.onPaste.bind(r),r.onSelectionChange=r.onSelectionChange.bind(r),r.closeKeyboardToolbar=r.closeKeyboardToolbar.bind(r),r.attachEvents=function(){"toolbar"===r.params.mode&&r.$el.find(".text-editor-toolbar").on("click","button",r.onButtonClick),"keyboard-toolbar"===r.params.mode&&(r.$keyboardToolbarEl.on("click","button",r.onButtonClick),r.$el.parents(".page").on("page:beforeout",r.closeKeyboardToolbar)),"popover"===r.params.mode&&r.popover&&r.popover.$el.on("click","button",r.onButtonClick),r.$contentEl.on("paste",r.onPaste),r.$contentEl.on("focus",r.onFocus),r.$contentEl.on("blur",r.onBlur),r.$contentEl.on("input",r.onInput,!0),gl(o).on("selectionchange",r.onSelectionChange)},r.detachEvents=function(){"toolbar"===r.params.mode&&r.$el.find(".text-editor-toolbar").off("click","button",r.onButtonClick),"keyboard-toolbar"===r.params.mode&&(r.$keyboardToolbarEl.off("click","button",r.onButtonClick),r.$el.parents(".page").off("page:beforeout",r.closeKeyboardToolbar)),"popover"===r.params.mode&&r.popover&&r.popover.$el.off("click","button",r.onButtonClick),r.$contentEl.off("paste",r.onPaste),r.$contentEl.off("focus",r.onFocus),r.$contentEl.off("blur",r.onBlur),r.$contentEl.off("input",r.onInput,!0),gl(o).off("selectionchange",r.onSelectionChange)},r.useModules(),r.init(),r||Pm(a)}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,Dm(t,n);var r=a.prototype;return r.setValue=function(e){var t=this;return t.value===e||(t.value=e,t.$contentEl.html(e),t.$el.trigger("texteditor:change",t.value),t.emit("local::change textEditorChange",t,t.value)),t},r.getValue=function(){return this.value},r.clearValue=function(){var e=this;return e.setValue(""),e.params.placeholder&&!e.$contentEl.html()&&e.insertPlaceholder(),e},r.createLink=function(){var e,t=this,n=Ho(),a=Vo(),r=n.getSelection(),o=[];if(r&&r.anchorNode&&gl(r.anchorNode).parents(t.$el).length){for(var s=r.anchorNode;s;)o.push(s),s.nextSibling&&s!==r.focusNode||(s=null),s&&(s=s.nextSibling);for(var i=[],l=gl(o),u=0;u<l.length;u+=1){var c=l[u].children;if(c)for(var p=0;p<c.length;p+=1)gl(c[p]).is("a")&&i.push(c[p])}e=l.closest("a").add(gl(i))}if(e&&e.length)return e.each((function(e){var t=n.getSelection(),r=a.createRange();r.selectNodeContents(e),t.removeAllRanges(),t.addRange(r),a.execCommand("unlink",!1),t.removeAllRanges()})),t;var d=t.getSelectionRange();return d?(t.app.dialog.prompt(t.params.linkUrlText,"",(function(e){e&&e.trim().length&&(t.setSelectionRange(d),a.execCommand("createLink",!1,e.trim()),t.$el.trigger("texteditor:insertlink",{url:e.trim()}),t.emit("local:insertLink textEditorInsertLink",t,e.trim()))})).$el.find("input").focus(),t):t},r.insertImage=function(){var e=this,t=Vo(),n=e.getSelectionRange();return n?(e.app.dialog.prompt(e.params.imageUrlText,"",(function(a){a&&a.trim().length&&(e.setSelectionRange(n),t.execCommand("insertImage",!1,a.trim()),e.$el.trigger("texteditor:insertimage",{url:a.trim()}),e.emit("local:insertImage textEditorInsertImage",e,a.trim()))})).$el.find("input").focus(),e):e},r.removePlaceholder=function(){this.$contentEl.find(".text-editor-placeholder").remove()},r.insertPlaceholder=function(){this.$contentEl.append('<div class="text-editor-placeholder">'+this.params.placeholder+"</div>")},r.onSelectionChange=function(){var e=this,t=Ho(),n=Vo();if("toolbar"!==e.params.mode){var a=t.getSelection(),r=gl(a.anchorNode).parents(e.contentEl).length||a.anchorNode===e.contentEl;if("keyboard-toolbar"!==e.params.mode){if("popover"===e.params.mode){var o=gl(a.anchorNode).parents(e.popover.el).length||a.anchorNode===e.popover.el;if(!r&&!o)return void e.closePopover();if(!a.isCollapsed&&a.rangeCount){var s=a.getRangeAt(0).getBoundingClientRect(),i=e.app.$el[0]||n.body;e.openPopover(s.x+(t.scrollX||0)-i.offsetLeft,s.y+(t.scrollY||0)-i.offsetTop,s.width,s.height)}else a.isCollapsed&&e.closePopover()}}else r?e.openKeyboardToolbar():e.closeKeyboardToolbar()}},r.onPaste=function(e){var t=Vo();if(this.params.clearFormattingOnPaste&&e.clipboardData&&e.clipboardData.getData){var n=e.clipboardData.getData("text/plain");e.preventDefault(),t.execCommand("insertText",!1,n)}},r.onInput=function(){var e=this,t=e.$contentEl.html();e.value=t,e.$el.trigger("texteditor:input"),e.emit("local:input textEditorInput",e,e.value),e.$el.trigger("texteditor:change",e.value),e.emit("local::change textEditorChange",e,e.value)},r.onFocus=function(){var e=this;e.removePlaceholder(),e.$contentEl.focus(),e.$el.trigger("texteditor:focus"),e.emit("local::focus textEditorFocus",e)},r.onBlur=function(){var e=this,t=Ho(),n=Vo();if(e.params.placeholder&&""===e.$contentEl.html()&&e.insertPlaceholder(),"popover"===e.params.mode){var a=t.getSelection(),r=gl(a.anchorNode).parents(e.contentEl).length||a.anchorNode===e.contentEl;n.activeElement&&e.popover&&gl(n.activeElement).closest(e.popover.$el).length||r||e.closePopover()}if("keyboard-toolbar"===e.params.mode){var o=t.getSelection();gl(o.anchorNode).parents(e.contentEl).length||o.anchorNode===e.contentEl||e.closeKeyboardToolbar()}e.$el.trigger("texteditor:blur"),e.emit("local::blur textEditorBlur",e)},r.onButtonClick=function(e){var t=this,n=Ho(),a=Vo(),r=n.getSelection();if(gl(r.anchorNode).parents(t.contentEl).length||r.anchorNode===t.contentEl){var o=gl(e.target).closest("button");o.parents("form").length&&e.preventDefault();var s=o.attr("data-button"),i=t.params.customButtons&&t.params.customButtons[s];if(s&&(Fm[s]||i))if(o.trigger("texteditor:buttonclick",s),t.emit("local::buttonClick textEditorButtonClick",t,s),i)i.onClick&&i.onClick(t,o[0]);else{var l=Fm[s][2];if("createLink"!==l)if("insertImage"!==l)if(0!==l.indexOf("formatBlock"))a.execCommand(l,!1);else{var u=l.split(".")[1],c=gl(r.anchorNode);c.parents(u.toLowerCase()).length||c.is(u)?a.execCommand("formatBlock",!1,"div"):a.execCommand("formatBlock",!1,u)}else t.insertImage();else t.createLink()}}},r.getSelectionRange=function(){var e=Ho(),t=Vo();if(e.getSelection){var n=e.getSelection();if(n.getRangeAt&&n.rangeCount)return n.getRangeAt(0)}else if(t.selection&&t.selection.createRange)return t.selection.createRange();return null},r.setSelectionRange=function(e){var t=Ho(),n=Vo();if(e)if(t.getSelection){var a=t.getSelection();a.removeAllRanges(),a.addRange(e)}else n.selection&&e.select&&e.select()},r.renderButtons=function(){var e=this,t="";function n(t){var n="md"===e.app.theme?"material-icons":"f7-icons";if(e.params.customButtons&&e.params.customButtons[t])return'<button type="button" class="text-editor-button" data-button="'+t+'">'+(e.params.customButtons[t].content||"")+"</button>";if(!Fm[t])return"";var a=Fm[t]["md"===e.app.theme?1:0];return('<button type="button" class="text-editor-button" data-button="'+t+'">'+(a.indexOf("<")>=0?a:'<i class="'+n+'">'+a+"</i>")+"</button>").trim()}return e.params.buttons.forEach((function(a,r){Array.isArray(a)?(a.forEach((function(e){t+=n(e)})),r<e.params.buttons.length-1&&e.params.dividers&&(t+='<div class="text-editor-button-divider"></div>')):t+=n(a)})),t},r.createToolbar=function(){this.$el.prepend('<div class="text-editor-toolbar">'+this.renderButtons()+"</div>")},r.createKeyboardToolbar=function(){this.$keyboardToolbarEl=gl('<div class="toolbar toolbar-bottom text-editor-keyboard-toolbar"><div class="toolbar-inner">'+this.renderButtons()+"</div></div>")},r.createPopover=function(){var e=this;e.popover=e.app.popover.create({content:'\n        <div class="popover theme-dark text-editor-popover">\n          <div class="popover-inner">'+e.renderButtons()+"</div>\n        </div>\n      ",closeByOutsideClick:!1,backdrop:!1})},r.openKeyboardToolbar=function(){var e=this;e.$keyboardToolbarEl.parent(e.app.$el).length||(e.$el.trigger("texteditor:keyboardopen"),e.emit("local::keyboardOpen textEditorKeyboardOpen",e),e.app.$el.append(e.$keyboardToolbarEl))},r.closeKeyboardToolbar=function(){var e=this;e.$keyboardToolbarEl.remove(),e.$el.trigger("texteditor:keyboardclose"),e.emit("local::keyboardClose textEditorKeyboardClose",e)},r.openPopover=function(e,t,n,a){var r=this;r.popover&&(Object.assign(r.popover.params,{targetX:e,targetY:t,targetWidth:n,targetHeight:a}),clearTimeout(r.popoverTimeout),r.popoverTimeout=setTimeout((function(){r.popover&&(r.popover.opened?r.popover.resize():(r.$el.trigger("texteditor:popoveropen"),r.emit("local::popoverOpen textEditorPopoverOpen",r),r.popover.open()))}),400))},r.closePopover=function(){var e=this;clearTimeout(e.popoverTimeout),e.popover&&e.popover.opened&&(e.popoverTimeout=setTimeout((function(){e.popover&&(e.$el.trigger("texteditor:popoverclose"),e.emit("local::popoverClose textEditorPopoverClose",e),e.popover.close())}),400))},r.init=function(){var e=this;return e.value?e.$contentEl.html(e.value):e.value=e.$contentEl.html(),e.params.placeholder&&""===e.value&&e.insertPlaceholder(),"toolbar"===e.params.mode?e.createToolbar():"popover"===e.params.mode?e.createPopover():"keyboard-toolbar"===e.params.mode&&e.createKeyboardToolbar(),e.attachEvents(),e.$el.trigger("texteditor:init"),e.emit("local::init textEditorInit",e),e},r.destroy=function(){var e=this;e.$el.trigger("texteditor:beforedestroy"),e.emit("local::beforeDestroy textEditorBeforeDestroy",e),e.detachEvents(),"keyboard-toolbar"===e.params.mode&&e.$keyboardToolbarEl&&e.$keyboardToolbarEl.remove(),e.popover&&(e.popover.close(!1),e.popover.destroy()),delete e.$el[0].f7TextEditor,Qo(e),e=null},a}(Ts),Lm=_m,zm={name:"textEditor",params:{textEditor:{el:null,mode:"toolbar",value:void 0,customButtons:null,buttons:[["bold","italic","underline","strikeThrough"],["orderedList","unorderedList"],["link","image"],["paragraph","h1","h2","h3"],["alignLeft","alignCenter","alignRight","alignJustify"],["subscript","superscript"],["indent","outdent"]],dividers:!0,imageUrlText:"Insert image URL",linkUrlText:"Insert link URL",placeholder:null,clearFormattingOnPaste:!0}},create:function(){this.textEditor=cs(wl({defaultSelector:".text-editor",constructor:Lm,app:this,domProp:"f7TextEditor"}))},static:{TextEditor:Lm},on:{tabMounted:function(e){var t=this;gl(e).find(".text-editor-init").each((function(e){var n=gl(e).dataset();t.textEditor.create(cs({el:e},n||{}))}))},tabBeforeRemove:function(e){gl(e).find(".text-editor-init").each((function(e){e.f7TextEditor&&e.f7TextEditor.destroy()}))},pageInit:function(e){var t=this;e.$el.find(".text-editor-init").each((function(e){var n=gl(e).dataset();t.textEditor.create(cs({el:e},n||{}))}))},pageBeforeRemove:function(e){e.$el.find(".text-editor-init").each((function(e){e.f7TextEditor&&e.f7TextEditor.destroy()}))}},vnode:{"text-editor-init":{insert:function(e){var t=e.elm,n=gl(t).dataset();this.textEditor.create(cs({el:t},n||{}))},destroy:function(e){var t=e.elm;t.f7TextEditor&&t.f7TextEditor.destroy()}}}};Nl.use([Ol,Rl,Al,Ml,Ul,Gl,ku,gu,Cu,Su,Iu,Ru,Au,Bu,Du,Fu,Wu,Qu,{name:"appbar"},sc,pc,gc,xc,$c,Rc,Dc,_c,zc,Wc,jc,Gc,{name:"contactsList"},Jc,np,{name:"timeline"},rp,pp,hp,{name:"chip"},yp,xp,{name:"checkbox"},{name:"radio"},$p,Rp,Dp,Wp,Gp,Zp,od,id,dd,fd,yd,kd,Md,Ld,jd,jf,Yf,em,sm,pm,{name:"skeleton"},hm,Am,Bm,zm,{name:"elevation"},{name:"typography"}]);var Vm=Nl;Nl.use([Ol,Rl,Al,Ml,Ul,Gl,ku,gu,Cu,Su,Iu,Ru,Au,Bu,Du,Fu,Wu,Qu]);var Wm=Nl;function Hm(e){var t={};return Object.keys(e).forEach((function(n){void 0!==e[n]&&(t[n]=e[n])})),t}function jm(e){return"string"==typeof e&&""!==e}function Um(e){return"object"==typeof e&&null!==e&&e.constructor&&e.constructor===Object}function Gm(){return Date.now()}function qm(){for(var e,t,n=!0,a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];"boolean"==typeof r[0]?(n=r[0],e=r[1],r.splice(0,2),t=r):(e=r[0],r.splice(0,1),t=r);for(var s=0;s<t.length;s+=1){var i=r[s];if(null!=i)for(var l=Object.keys(Object(i)),u=0,c=l.length;u<c;u+=1){var p=l[u],d=Object.getOwnPropertyDescriptor(i,p);void 0!==d&&d.enumerable&&(n?Um(e[p])&&Um(i[p])?qm(e[p],i[p]):!Um(e[p])&&Um(i[p])?(e[p]={},qm(e[p],i[p])):e[p]=i[p]:e[p]=i[p])}}return e}function Xm(){for(var e=[],t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];n.forEach((function(t){"object"==typeof t&&t.constructor===Object?Object.keys(t).forEach((function(n){t[n]&&e.push(n)})):t&&e.push(t)}));var r=[];return e.forEach((function(e){r.indexOf(e)<0&&r.push(e)})),r.join(" ")}var Ym,Km,Jm=0,Zm=0;function Qm(){return Jm+=1,Gm()+"_"+Jm}function eg(){return Zm+=1,Gm()+"_"+Zm}var tg={},ng={views:[],tabs:[],modals:null},ag=function(){Ym&&(tg.ios="ios"===Ym.theme,tg.md="md"===Ym.theme,tg.aurora="aurora"===Ym.theme)},rg=function(){Jm=0,Zm=0,delete tg.ios,delete tg.md,delete tg.aurora,ng.views=[],ng.tabs=[],ng.modals=null},og=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=!0);var a=qm({},t,{el:e,init:n});if(void 0!==t.store&&(a.store=t.store),a.routes||(a.routes=[]),a.userAgent&&("auto"===a.theme||!a.theme)){var r=Wm.getDevice({userAgent:a.userAgent},!0);tg.ios=!!r.ios,tg.aurora=r.desktop&&r.electron,tg.md=!tg.ios&&!tg.aurora}if(!Ym||"undefined"==typeof window){"undefined"==typeof window&&rg();var o=new Wm(a);Ym=o,ag(),o.initialized?(Ym=o,Km.emit("ready",Ym)):o.on("init",(function(){Ym=o,Km.emit("ready",Ym)}))}},sg=function(e){e&&(Ym&&Ym.initialized?e(Ym):Km.once("ready",e))},ig=function(e){for(var t=[],n=0;n<e.children.length;n+=1)t.push(e.children[n]);return t},lg={proto:{pageComponentLoader:function(e){var t,n=e.routerEl,a=e.component,r=e.options,o=e.resolve,s=e.reject,i=this.id,l=n;if(ng.views.forEach((function(e){(e.el&&e.el===n||e.routerId&&e.routerId===i)&&(t=e)})),t){var u,c={component:a,id:eg(),props:qm({f7route:r.route,f7router:this},r.route.params,r.props||{})},p=ig(l);Km.on("viewRouterDidUpdate",(function e(n){if(n===t&&!u){var a=ig(l);if(!function(e,t){return e.length===t.length&&new Set([].concat(e,t)).size===e.length}(p,a)){Km.off("viewRouterDidUpdate",e);var r=l.children[l.children.length-1];c.el=r,o(r),u=!0}}})),t.pages.push(c),t.setPages(t.pages)}else s()},removePage:function(e){if(e){var t,n=this;if((t="length"in e&&e[0]?e[0].f7Page:e.f7Page)&&t.route&&t.route.route&&t.route.route.keepAlive)n.app.$(e).remove();else{var a,r,o;if(ng.views.forEach((function(e){e.el&&e.el===n.el&&(a=e)})),"length"in e){if(0===e.length)return;r=e[0]}else r=e;if(r)a.pages.forEach((function(e,t){e.el===r&&(o=!0,a.pages.splice(t,1),a.setPages(a.pages))})),o||r.parentNode.removeChild(r)}}},tabComponentLoader:function(e){var t,n=void 0===e?{}:e,a=n.tabEl,r=n.component,o=n.options,s=n.resolve,i=n.reject;if(a||i(),ng.tabs.forEach((function(e){e.el&&e.el===a&&(t=e)})),t){var l,u={id:eg(),component:r,props:qm({f7route:o.route,f7router:this},o.route.route&&o.route.route.tab&&o.route.route.tab.options&&o.route.route.tab.options.props||{},o.route.params,o.props||{})};Km.on("tabRouterDidUpdate",(function e(n){if(n===t&&!l){Km.off("tabRouterDidUpdate",e);var r=a.children[0];s(r),l=!0}})),t.setTabContent(u)}else i()},removeTabContent:function(e){var t;e&&(ng.tabs.forEach((function(n){n.el&&n.el===e&&(t=n)})),t?t.setTabContent(null):e.innerHTML="")},modalComponentLoader:function(e){var t=void 0===e?{}:e,n=t.component,a=t.options,r=t.resolve,o=t.reject,s=ng.modals;if(s){var i,l={component:n,id:eg(),props:qm({f7route:a.route,f7router:this},a.route.params,a.props||{})};Km.on("modalsRouterDidUpdate",(function e(){if(!i){Km.off("modalsRouterDidUpdate",e);var t=s.el.children[s.el.children.length-1];l.el=t,r(t),i=!0}})),s.modals.push(l),s.setModals(s.modals)}else o()},removeModal:function(e){var t,n=ng.modals;n&&(n.modals.forEach((function(n){n.el===e&&(t=n)})),n.modals.splice(n.modals.indexOf(t),1),n.setModals(n.modals))}}},ug={name:"vuePlugin",installed:!1,install:function(e){if(void 0===e&&(e={}),!ug.installed){ug.installed=!0,Km=new Wm.Events;var t=e,n=t.theme,a=t.userAgent;if("md"===n&&(tg.md=!0),"ios"===n&&(tg.ios=!0),"aurora"===n&&(tg.aurora=!0),("undefined"!=typeof window||!!a)&&(!n||"auto"===n)){var r=Wm.getDevice({userAgent:a},!0);tg.ios=!!r.ios,tg.aurora=r.desktop&&r.electron,tg.md=!tg.ios&&!tg.aurora}sg((function(){ag()})),Wm.Router.use(lg)}}},cg=ug;function pg(e){var t,n=e.color,a=e.colorTheme,r=e.textColor,o=e.bgColor,s=e.borderColor,i=e.rippleColor;return(t={"theme-dark":e.themeDark})["color-"+n]=n,t["color-theme-"+a]=a,t["text-color-"+r]=r,t["bg-color-"+o]=o,t["border-color-"+s]=s,t["ripple-color-"+i]=i,t}var dg={color:String,colorTheme:String,textColor:String,bgColor:String,borderColor:String,rippleColor:String,themeDark:Boolean},hg={icon:String,iconMaterial:String,iconF7:String,iconIos:String,iconMd:String,iconAurora:String,iconColor:String,iconSize:[String,Number],iconBadge:[String,Number],iconBadgeColor:String},fg={back:Boolean,external:Boolean,force:Boolean,animate:{type:Boolean,default:void 0},ignoreCache:Boolean,reloadCurrent:Boolean,reloadAll:Boolean,reloadPrevious:Boolean,reloadDetail:{type:Boolean,default:void 0},routeTabId:String,view:String,routeProps:Object,preventRouter:Boolean,transition:String,openIn:String};function mg(e){var t,n,a=e.force,r=e.reloadCurrent,o=e.reloadPrevious,s=e.reloadAll,i=e.reloadDetail,l=e.animate,u=e.ignoreCache,c=e.routeTabId,p=e.view,d=e.transition,h=e.openIn;return"animate"in e&&void 0!==l&&(t=l.toString()),"reloadDetail"in e&&void 0!==i&&(n=i.toString()),{"data-force":a||void 0,"data-reload-current":r||void 0,"data-reload-all":s||void 0,"data-reload-previous":o||void 0,"data-reload-detail":n,"data-animate":t,"data-ignore-cache":u||void 0,"data-route-tab-id":c||void 0,"data-view":jm(p)?p:void 0,"data-transition":jm(d)?d:void 0,"data-open-in":jm(h)?h:void 0}}function gg(e){var t=e.back,n=e.linkBack;return{back:t||n,external:e.external,"prevent-router":e.preventRouter}}var vg={searchbarEnable:[Boolean,String],searchbarDisable:[Boolean,String],searchbarClear:[Boolean,String],searchbarToggle:[Boolean,String],panelOpen:[Boolean,String],panelClose:[Boolean,String],panelToggle:[Boolean,String],popupOpen:[Boolean,String],popupClose:[Boolean,String],actionsOpen:[Boolean,String],actionsClose:[Boolean,String],popoverOpen:[Boolean,String],popoverClose:[Boolean,String],loginScreenOpen:[Boolean,String],loginScreenClose:[Boolean,String],sheetOpen:[Boolean,String],sheetClose:[Boolean,String],sortableEnable:[Boolean,String],sortableDisable:[Boolean,String],sortableToggle:[Boolean,String],cardOpen:[Boolean,String],cardPreventOpen:[Boolean,String],cardClose:[Boolean,String],menuClose:{type:[Boolean,String],default:void 0}};function bg(e){var t=e.searchbarEnable,n=e.searchbarDisable,a=e.searchbarClear,r=e.searchbarToggle,o=e.panelOpen,s=e.panelClose,i=e.panelToggle,l=e.popupOpen,u=e.popupClose,c=e.actionsOpen,p=e.actionsClose,d=e.popoverOpen,h=e.popoverClose,f=e.loginScreenOpen,m=e.loginScreenClose,g=e.sheetOpen,v=e.sheetClose,b=e.sortableEnable,y=e.sortableDisable,w=e.sortableToggle,x=e.cardOpen,k=e.cardClose;return{"data-searchbar":jm(t)&&t||jm(n)&&n||jm(a)&&a||jm(r)&&r||void 0,"data-panel":jm(o)&&o||jm(s)&&s||jm(i)&&i||void 0,"data-popup":jm(l)&&l||jm(u)&&u||void 0,"data-actions":jm(c)&&c||jm(p)&&p||void 0,"data-popover":jm(d)&&d||jm(h)&&h||void 0,"data-sheet":jm(g)&&g||jm(v)&&v||void 0,"data-login-screen":jm(f)&&f||jm(m)&&m||void 0,"data-sortable":jm(b)&&b||jm(y)&&y||jm(w)&&w||void 0,"data-card":jm(x)&&x||jm(k)&&k||void 0}}function yg(e){var t=e.searchbarEnable,n=e.searchbarDisable,a=e.searchbarClear,r=e.searchbarToggle,o=e.panelOpen,s=e.panelClose,i=e.panelToggle,l=e.popupOpen,u=e.popupClose,c=e.actionsClose,p=e.actionsOpen,d=e.popoverOpen,h=e.popoverClose,f=e.loginScreenOpen,m=e.loginScreenClose,g=e.sheetOpen,v=e.sheetClose,b=e.sortableEnable,y=e.sortableDisable,w=e.sortableToggle,x=e.cardOpen,k=e.cardPreventOpen,C=e.cardClose,E=e.menuClose;return{"searchbar-enable":t||""===t,"searchbar-disable":n||""===n,"searchbar-clear":a||""===a,"searchbar-toggle":r||""===r,"panel-close":s||""===s,"panel-open":o||""===o,"panel-toggle":i||""===i,"popup-close":u||""===u,"popup-open":l||""===l,"actions-close":c||""===c,"actions-open":p||""===p,"popover-close":h||""===h,"popover-open":d||""===d,"sheet-close":v||""===v,"sheet-open":g||""===g,"login-screen-close":m||""===m,"login-screen-open":f||""===f,"sortable-enable":b||""===b,"sortable-disable":y||""===y,"sortable-toggle":w||""===w,"card-close":C||""===C,"card-open":x||""===x,"card-prevent-open":k||""===k,"menu-close":E||""===E}}function wg(){return wg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},wg.apply(this,arguments)}var xg={name:"f7-accordion-content",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Ya(e.$slots,"default")],2)},props:wg({},dg),setup:function(e){return{classes:Nt((function(){return Xm("accordion-item-content",pg(e))}))}}};function kg(){return kg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},kg.apply(this,arguments)}var Cg={name:"f7-accordion-item",render:function(e,t){return Ea(),Na("div",{ref:"elRef",class:e.classes},[Ya(e.$slots,"default")],2)},props:kg({opened:Boolean},dg),emits:["accordion:beforeopen","accordion:open","accordion:opened","accordion:beforeclose","accordion:close","accordion:closed"],setup:function(e,t){var n=t.emit,a=Ct(null),r=function(e,t){a.value===e&&n("accordion:beforeopen",t)},o=function(e){a.value===e&&n("accordion:open")},s=function(e){a.value===e&&n("accordion:opened")},i=function(e,t){a.value===e&&n("accordion:beforeclose",t)},l=function(e){a.value===e&&n("accordion:close")},u=function(e){a.value===e&&n("accordion:closed")};Cn((function(){sg((function(){Ym.on("accordionBeforeOpen",r),Ym.on("accordionOpen",o),Ym.on("accordionOpened",s),Ym.on("accordionBeforeClose",i),Ym.on("accordionClose",l),Ym.on("accordionClosed",u)}))})),$n((function(){return Ym.off("accordionBeforeOpen",r),Ym.off("accordionOpen",o),Ym.off("accordionOpened",s),Ym.off("accordionBeforeClose",i),Ym.off("accordionClose",l),void Ym.off("accordionClosed",u)}));var c=Nt((function(){return Xm("accordion-item",{"accordion-item-opened":e.opened},pg(e))}));return{elRef:a,classes:c}}};function Eg(){return Eg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Eg.apply(this,arguments)}var Sg={name:"f7-accordion-toggle",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Ya(e.$slots,"default")],2)},props:Eg({},dg),setup:function(e){return{classes:Nt((function(){return Xm("accordion-item-toggle",pg(e))}))}}};function $g(){return $g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},$g.apply(this,arguments)}var Tg={name:"f7-accordion",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Ya(e.$slots,"default")],2)},props:$g({accordionOpposite:Boolean},dg),setup:function(e){return{classes:Nt((function(){return Xm("accordion-list",e.accordionOpposite&&"accordion-opposite",pg(e))}))}}};function Ig(){return Ig=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ig.apply(this,arguments)}var Ng={key:0,class:"actions-button-media"},Og={class:"actions-button-text"};var Rg={name:"f7-actions-button",render:function(e,t){return Ea(),Na("div",{ref:"elRef",class:e.classes,onClick:t[1]||(t[1]=function(){return e.onClick&&e.onClick.apply(e,arguments)})},[e.hasMedia?(Ea(),Na("div",Ng,[Ya(e.$slots,"media")])):Wa("",!0),Da("div",Og,[Ya(e.$slots,"default")])],2)},props:Ig({bold:Boolean,close:{type:Boolean,default:!0}},dg),emits:["click"],setup:function(e,t){var n=t.slots,a=t.emit,r=Ct(null),o=Nt((function(){return n&&!!n.media}));return{classes:Nt((function(){return Xm({"actions-button":!0,"actions-button-bold":e.bold},pg(e))})),elRef:r,hasMedia:o,onClick:function(t){r.value&&e.close&&Ym&&Ym.actions.close(Ym.$(r.value).parents(".actions-modal")),a("click",t)}}}};function Ag(){return Ag=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ag.apply(this,arguments)}var Mg={name:"f7-actions-group",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Ya(e.$slots,"default")],2)},props:Ag({},dg),setup:function(e){return{classes:Nt((function(){return Xm("actions-group",pg(e))}))}}};function Bg(){return Bg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Bg.apply(this,arguments)}var Pg={name:"f7-actions-label",render:function(e,t){return Ea(),Na("div",{class:e.classes,onClick:t[1]||(t[1]=function(){return e.onClick&&e.onClick.apply(e,arguments)})},[Ya(e.$slots,"default")],2)},props:Bg({bold:Boolean},dg),emits:["click"],setup:function(e,t){var n=t.emit;return{classes:Nt((function(){return Xm("actions-label",{"actions-button-bold":e.bold},pg(e))})),onClick:function(e){n("click",e)}}}},Dg=function(e){var t=void 0===e?{}:e,n=t.isOpened,a=t.isClosing;return{"modal-in":n&&!a,"modal-out":a}};function Fg(){return Fg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fg.apply(this,arguments)}var _g={name:"f7-actions",render:function(e,t){return Ea(),Na("div",{ref:"elRef",class:e.classes},[Ya(e.$slots,"default")],2)},props:Fg({tabletFullscreen:Boolean,opened:Boolean,animate:{type:Boolean,default:void 0},grid:Boolean,target:{type:[String,Object],default:void 0},convertToPopover:{type:Boolean,default:void 0},forceToPopover:{type:Boolean,default:void 0},backdrop:{type:Boolean,default:void 0},backdropEl:{type:[String,Object],default:void 0},closeByBackdropClick:{type:Boolean,default:void 0},closeByOutsideClick:{type:Boolean,default:void 0},closeOnEscape:{type:Boolean,default:void 0},containerEl:{type:[String,Object],default:void 0}},dg),emits:["actions:open","actions:opened","actions:close","actions:closed","update:opened"],setup:function(e,t){var n=t.emit,a=null,r=e.opened,o=!1,s=Ct(null),i=function(e){r=!0,o=!1,n("actions:open",e),n("update:opened",!0)},l=function(e){n("actions:opened",e)},u=function(e){r=!1,o=!0,n("actions:close",e)},c=function(e){o=!1,n("actions:closed",e),n("update:opened",!1)};jr((function(){return e.opened}),(function(e){a&&(e?a.open():a.close())})),Cn((function(){if(s.value){var t=e.target,n=e.convertToPopover,r=e.forceToPopover,o=e.closeByBackdropClick,p=e.closeByOutsideClick,d=e.closeOnEscape,h=e.backdrop,f=e.backdropEl,m=e.grid,g=e.containerEl,v={el:s.value,grid:m,on:{open:i,opened:l,close:u,closed:c}};void 0!==t&&(v.target=t),void 0!==n&&(v.convertToPopover=n),void 0!==r&&(v.forceToPopover=r),void 0!==o&&(v.closeByBackdropClick=o),void 0!==p&&(v.closeByOutsideClick=p),void 0!==d&&(v.closeOnEscape=d),void 0!==h&&(v.backdrop=h),void 0!==f&&(v.backdropEl=f),void 0!==g&&(v.containerEl=g),sg((function(){a=Ym.popup.create(v),e.opened&&a.open(!1)}))}})),$n((function(){a&&a.destroy(),a=null}));var p=Nt((function(){return Xm("actions-modal",{"actions-grid":e.grid},Dg({isOpened:r,isClosing:o}),pg(e))}));return{elRef:s,classes:p}}};function Lg(){return Lg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Lg.apply(this,arguments)}var zg={name:"f7-routable-modals",setup:function(){var e=Ct(null),t=Ct([]),n=Ct(null);Cn((function(){n.value={modals:t,el:e.value,setModals:function(e){e.forEach((function(e){e.component=gt(e.component)})),t.value=[].concat(e)}},ng.modals=n.value})),Sn((function(){n.value&&Ym&&Km.emit("modalsRouterDidUpdate",n.value)})),$n((function(){n.value&&(ng.modals=null,n.value=null)}));return function(){return Yr("div",{ref:e,class:"framework7-modals"},[].concat(t.value.map((function(e){return Yr(function(e){return gt(e.component)}(e),Lg({key:e.id},function(e){var t=e.component,n=e.props,a=[],r={};return t&&t.props&&(a=Object.keys(t.props)),a.forEach((function(e){e in n&&(r[e]=n[e])})),r}(e)))}))))}}};function Vg(){return Vg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Vg.apply(this,arguments)}var Wg={name:"f7-app",render:function(e,t){var n=ha("routable-modals");return Ea(),Na("div",{id:"framework7-root",ref:"elRef",class:e.classes},[Ya(e.$slots,"default"),Da(n)],2)},components:{RoutableModals:zg},inheritAttrs:!1,props:Vg({id:{type:String,default:void 0},name:{type:String,default:void 0},version:{type:String,default:void 0},theme:{type:String,default:void 0},language:{type:String,default:void 0},routes:{type:Array,default:function(){return[]}},store:Object,autoDarkTheme:{type:Boolean,default:void 0},lazyModulesPath:{type:String,default:void 0},initOnDeviceReady:{type:Boolean,default:void 0},iosTranslucentBars:{type:Boolean,default:void 0},iosTranslucentModals:{type:Boolean,default:void 0},userAgent:{type:String,default:void 0},url:{type:String,default:void 0},accordion:{type:Object,default:function(){}},actions:{type:Object,default:function(){}},areaChart:{type:Object,default:function(){}},autocomplete:{type:Object,default:function(){}},calendar:{type:Object,default:function(){}},card:{type:Object,default:function(){}},colorPicker:{type:Object,default:function(){}},dialog:{type:Object,default:function(){}},form:{type:Object,default:function(){}},gauge:{type:Object,default:function(){}},grid:{type:Object,default:function(){}},infiniteScroll:{type:Object,default:function(){}},input:{type:Object,default:function(){}},lazy:{type:Object,default:function(){}},listIndex:{type:Object,default:function(){}},loginScreen:{type:Object,default:function(){}},messagebar:{type:Object,default:function(){}},messages:{type:Object,default:function(){}},navbar:{type:Object,default:function(){}},notification:{type:Object,default:function(){}},panel:{type:Object,default:function(){}},photoBrowser:{type:Object,default:function(){}},picker:{type:Object,default:function(){}},pieChart:{type:Object,default:function(){}},popover:{type:Object,default:function(){}},popup:{type:Object,default:function(){}},range:{type:Object,default:function(){}},searchbar:{type:Object,default:function(){}},sheet:{type:Object,default:function(){}},smartSelect:{type:Object,default:function(){}},sortable:{type:Object,default:function(){}},statusbar:{type:Object,default:function(){}},stepper:{type:Object,default:function(){}},swipeout:{type:Object,default:function(){}},textEditor:{type:Object,default:function(){}},toast:{type:Object,default:function(){}},toolbar:{type:Object,default:function(){}},tooltip:{type:Object,default:function(){}},view:{type:Object,default:function(){}},virtualList:{type:Object,default:function(){}},clicks:{type:Object,default:function(){}},serviceWorker:{type:Object,default:function(){}},touch:{type:Object,default:function(){}}},dg),setup:function(e){var t=Ct(null),n=gt(e.routes);return Ym&&"undefined"!=typeof window||og(t.value,Hm(Vg({},e,{routes:n})),!1),Cn((function(){var a=t.value&&t.value.parentNode;"undefined"!=typeof document&&a&&a!==document.body&&a.parentNode===document.body&&(a.style.height="100%"),Ym?Ym.init(t.value):og(t.value,Hm(Vg({},e,{routes:n})),!0)})),{classes:Nt((function(){return Xm("framework7-root",pg(e))})),elRef:t}}};function Hg(){return Hg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Hg.apply(this,arguments)}var jg={name:"f7-appbar",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Ya(e.$slots,"before-inner"),e.inner?(Ea(),Na("div",{key:0,class:e.innerClasses},[Ya(e.$slots,"default")],2)):Ya(e.$slots,"default",{key:1}),Ya(e.$slots,"after-inner")],2)},props:Hg({noShadow:Boolean,noHairline:Boolean,inner:{type:Boolean,default:!0},innerClass:String,innerClassName:String},dg),setup:function(e){return{classes:Nt((function(){return Xm("appbar",{"no-shadow":e.noShadow,"no-hairline":e.noHairline},pg(e))})),innerClasses:Nt((function(){return Xm("appbar-inner",e.innerClass,e.innerClassName)}))}}},Ug={key:0,class:"area-chart-axis"},Gg={key:0},qg={key:1,class:"area-chart-legend"};var Xg={name:"f7-area-chart",render:function(e,t){return Ea(),Na("div",{ref:"elRef",class:e.classes},[(Ea(),Na("svg",{ref:"svgElRef",xmlns:"http://www.w3.org/2000/svg",width:e.width,height:e.height,viewBox:"0 0 "+e.width+" "+e.height,preserveAspectRatio:"none"},[(Ea(!0),Na(ba,null,Xa(e.chartData,(function(t,n){return Ea(),Na(ma(e.ChartTag),{key:e.ChartTag+"-"+n,fill:e.lineChart?void 0:t.color,stroke:e.lineChart?t.color:void 0,"fill-rule":"evenodd",points:e.lineChart?void 0:t.points,d:e.lineChart?t.points:void 0},null,8,["fill","stroke","points","d"])})),128)),(Ea(!0),Na(ba,null,Xa(e.verticalLines,(function(t,n){return Ea(),Na("line",{key:"line-"+n,"data-index":n,fill:"#000",x1:t,y1:0,x2:t,y2:e.height,class:e.classNames({"area-chart-current-line":e.currentIndex===n})},null,10,["data-index","x1","x2","y2"])})),128))],8,["width","height","viewBox"])),e.axis?(Ea(),Na("div",Ug,[(Ea(!0),Na(ba,null,Xa(e.axisLabels,(function(t,n){return Ea(),Na("span",{key:n},[e.visibleLegends.includes(t)?(Ea(),Na("span",Gg,g(e.formatAxisLabelMethod(t)),1)):Wa("",!0)])})),128))])):Wa("",!0),e.legend?(Ea(),Na("div",qg,[(Ea(!0),Na(ba,null,Xa(e.datasets,(function(t,n){return Ea(),Na(ma(e.LegendItemTag),{key:n,class:e.classNames("area-chart-legend-item",{"area-chart-legend-item-hidden":e.hiddenDatasets.includes(n),"area-chart-legend-button":e.toggleDatasets}),type:e.toggleDatasets?"button":void 0,onClick:function(t){return e.toggleDataset(n)}},{default:Ut((function(){return[Da("span",{style:{backgroundColor:t.color}},null,4),za(" "+g(e.formatLegendLabelMethod(t.label)),1)]})),_:2},1032,["class","type","onClick"])})),128))])):Wa("",!0),Ya(e.$slots,"default")],2)},props:{lineChart:Boolean,datasets:{type:Array,default:function(){return[]}},axis:Boolean,axisLabels:{type:Array,default:function(){return[]}},tooltip:Boolean,legend:Boolean,toggleDatasets:Boolean,width:{type:Number,default:640},height:{type:Number,default:320},maxAxisLabels:{type:Number,default:8},formatAxisLabel:Function,formatLegendLabel:Function,formatTooltip:Function,formatTooltipAxisLabel:Function,formatTooltipTotal:Function,formatTooltipDataset:Function},emits:["select"],setup:function(e,t){var n=t.emit,a=null,r=Ct(null),o=Ct([]),s=Ct(null),i=Ct(null),l=Ct(null),u=Nt((function(){if(!e.maxAxisLabels||e.axisLabels.length<=e.maxAxisLabels)return e.axisLabels;var t=Math.ceil(e.axisLabels.length/e.maxAxisLabels),n=e.axisLabels.filter((function(e,n){return n%t==0}));return n})),c=Nt((function(){var t=[];return e.datasets.filter((function(e,t){return!o.value.includes(t)})).forEach((function(e){e.values.forEach((function(e,n){t[n]||(t[n]=0),t[n]+=e}))})),t})),p=Nt((function(){var t=e.datasets,n=e.lineChart,a=e.width,r=e.height,s=[];if(!t.length)return s;var i=t[0].values.map((function(){return 0})),l=0;return n?t.forEach((function(e){var t=e.values,n=Math.max.apply(Math,t);n>l&&(l=n)})):l=Math.max.apply(Math,c.value),t.filter((function(e,t){return!o.value.includes(t)})).forEach((function(e){var t=e.label,o=e.values,u=e.color,c=o.map((function(e,t){i[t]+=e;var s=n?e:i[t],u=t/(o.length-1)*a,c=r-s/l*r;return n?(0===t?"M":"L")+u+","+c:u+" "+c}));n||c.push(a+" "+r+" 0 "+r),s.push({label:t,points:c.join(" "),color:u})})),s.reverse()})),d=Nt((function(){var t=[];if(!e.datasets.length)return t;var n=e.datasets[0].values;return n.forEach((function(a,r){var o=r/(n.length-1)*e.width;t.push(o)})),t})),h=function(t){return e.formatAxisLabel?e.formatAxisLabel(t):t},f=function(){var e=i.value.querySelectorAll("line");l.value=[];for(var t=0;t<e.length;t+=1)l.value.push(e[t].getBoundingClientRect().left)},m=function(){var t=r.value;if(null===t)return"";var n=0,a=e.datasets.filter((function(e,t){return!o.value.includes(t)})).map((function(e){return{color:e.color,label:e.label,value:e.values[t]}}));if(a.forEach((function(e){n+=e.value})),e.formatTooltip)return e.formatTooltip({index:t,total:n,datasets:a});var s=e.formatTooltipAxisLabel?e.formatTooltipAxisLabel(e.axisLabels[t]):h(e.axisLabels[t]);s||(s="");var i=e.formatTooltipTotal?e.formatTooltipTotal(n):n,l=a.length>0?'\n      <ul class="area-chart-tooltip-list">\n        '+a.map((function(t){var n=t.label,a=t.color,r=t.value;return'\n              <li><span style="background-color: '+a+';"></span>'+(e.formatTooltipDataset?e.formatTooltipDataset(n,r,a):n+": "+r)+"</li>\n            "})).join("")+"\n      </ul>":"";return'\n      <div class="area-chart-tooltip-label">'+s+'</div>\n      <div class="area-chart-tooltip-total">'+i+"</div>\n      "+l+"\n    "},g=function(){f()},v=function(e){l.value||f();var t=e.pageX;void 0===t&&(t=0);var n=l.value.map((function(e){return Math.abs(t-e)})),a=Math.min.apply(Math,n),o=n.indexOf(a);r.value=o},b=function(){r.value=null};jr((function(){return r.value}),(function(){n("select",r.value),function(){var t=e.tooltip,n=e.datasets,l=r.value;if(t){var u=n.filter((function(e,t){return!o.value.includes(t)})).length>0;u?null===l||a?a&&a.hide&&a.show&&(null!==l?(a.setText(m()),a.setTargetEl(i.value.querySelector('line[data-index="'+l+'"]')),a.show()):a.hide()):(a=Ym.tooltip.create({trigger:"manual",containerEl:s.value,targetEl:i.value.querySelector('line[data-index="'+l+'"]'),text:m(),cssClass:"area-chart-tooltip"}))&&a.show&&a.show():a&&a.hide&&a.hide()}}()})),Cn((function(){i.value&&(i.value.addEventListener("mouseenter",g),i.value.addEventListener("mousemove",v),i.value.addEventListener("mouseleave",b))})),$n((function(){a&&a.destroy&&a.destroy(),a=null,i.value&&(i.value.removeEventListener("mouseenter",g),i.value.removeEventListener("mousemove",v),i.value.removeEventListener("mouseleave",b))}));var y=Nt((function(){return Xm("area-chart")})),w=Nt((function(){return e.toggleDatasets?"button":"span"})),x=Nt((function(){return e.lineChart?"path":"polygon"}));return{currentIndex:r,hiddenDatasets:o,visibleLegends:u,chartData:p,verticalLines:d,elRef:s,svgElRef:i,classes:y,toggleDataset:function(t){e.toggleDatasets&&(o.value.includes(t)?o.value.splice(o.value.indexOf(t),1):o.value.push(t),o.value=[].concat(o.value))},formatAxisLabelMethod:h,formatLegendLabelMethod:function(t){return e.formatLegendLabel?e.formatLegendLabel(t):t},LegendItemTag:w,ChartTag:x,classNames:Xm}}},Yg=function(e,t){var n=null,a=t.tooltip,r=t.tooltipTrigger;Cn((function(){e.value&&a&&sg((function(){n=Ym.tooltip.create({targetEl:e.value,text:a,trigger:r})}))})),$n((function(){n&&n.destroy&&(n.destroy(),n=null)})),jr((function(){return t.tooltip}),(function(t){if(!t&&n)return n.destroy(),void(n=null);t&&!n&&Ym?n=Ym.tooltip.create({targetEl:e.value,text:t,trigger:r}):t&&n&&n.setText(t)}))};function Kg(){return Kg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Kg.apply(this,arguments)}var Jg={name:"f7-badge",render:function(e,t){return Ea(),Na("span",{ref:"elRef",class:e.classes},[Ya(e.$slots,"default")],2)},props:Kg({tooltip:String,tooltipTrigger:String},dg),setup:function(e){var t=Ct(null);return Yg(t,e),{elRef:t,classes:Nt((function(){return Xm("badge",pg(e))}))}}};function Zg(){return Zg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Zg.apply(this,arguments)}var Qg={name:"f7-block-footer",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Ya(e.$slots,"default")],2)},props:Zg({},dg),setup:function(e){return{classes:Nt((function(){return Xm("block-footer",pg(e))}))}}};function ev(){return ev=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ev.apply(this,arguments)}var tv={name:"f7-block-header",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Ya(e.$slots,"default")],2)},props:ev({},dg),setup:function(e){return{classes:Nt((function(){return Xm("block-header",pg(e))}))}}};function nv(){return nv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},nv.apply(this,arguments)}var av={name:"f7-block-title",render:function(e,t){return Ea(),Na("div",{class:e.classes,medium:e.medium},[Ya(e.$slots,"default")],10,["medium"])},props:nv({large:Boolean,medium:Boolean},dg),setup:function(e){return{classes:Nt((function(){return Xm("block-title",{"block-title-large":e.large,"block-title-medium":e.medium},pg(e))}))}}},rv=function(e,t){var n=function(n){e.value===n&&t("tab:show",n)},a=function(n){e.value===n&&t("tab:hide",n)};Cn((function(){e.value&&sg((function(){Ym.on("tabShow",n),Ym.on("tabHide",a)}))})),$n((function(){Ym&&(Ym.off("tabShow",n),Ym.off("tabHide",a))}))};function ov(){return ov=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ov.apply(this,arguments)}var sv={name:"f7-block",render:function(e,t){return Ea(),Na("div",{ref:"elRef",class:e.classes},[Ya(e.$slots,"default")],2)},props:ov({inset:Boolean,xsmallInset:Boolean,smallInset:Boolean,mediumInset:Boolean,largeInset:Boolean,xlargeInset:Boolean,strong:Boolean,tabs:Boolean,tab:Boolean,tabActive:Boolean,accordionList:Boolean,accordionOpposite:Boolean,noHairlines:Boolean,noHairlinesMd:Boolean,noHairlinesIos:Boolean,noHairlinesAurora:Boolean},dg),emits:["tab:hide","tab:show"],setup:function(e,t){var n=t.emit,a=Ct(null);return rv(a,n),{elRef:a,classes:Nt((function(){return Xm("block",{inset:e.inset,"xsmall-inset":e.xsmallInset,"small-inset":e.smallInset,"medium-inset":e.mediumInset,"large-inset":e.largeInset,"xlarge-inset":e.xlargeInset,"block-strong":e.strong,"accordion-list":e.accordionList,"accordion-opposite":e.accordionOpposite,tabs:e.tabs,tab:e.tab,"tab-active":e.tabActive,"no-hairlines":e.noHairlines,"no-hairlines-md":e.noHairlinesMd,"no-hairlines-ios":e.noHairlinesIos,"no-hairlines-aurora":e.noHairlinesAurora},pg(e))}))}}},iv=function(e){void 0===e&&(e={});var t=e,n=t.icon,a=t.iconMaterial,r=t.iconF7,o=t.iconMd,s=t.iconIos,i=t.iconAurora,l=t.iconColor,u=t.iconSize,c=t.iconBadge,p=t.badgeColor,d=t.iconBadgeColor;return n||a||r||o||s||i?{props:{material:a,f7:r,icon:n,md:o,ios:s,aurora:i,color:l,size:u},badge:c||0===c?{props:{color:p||d},content:c}:null}:null},lv=function(e,t){var n=(void 0===t?{}:t).routeProps;Cn((function(){e.value&&n&&(e.value.f7RouteProps=n)})),Sn((function(){e.value&&n?e.value.f7RouteProps=n:e.value&&e.value.f7RouteProps&&delete e.value.f7RouteProps}))},uv=function(){var e=Ct(Ym?tg:null);return Ym||sg((function(){e.value=tg})),e};function cv(){return cv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},cv.apply(this,arguments)}var pv={key:0,class:"preloader-inner"},dv=Da("svg",{viewBox:"0 0 36 36"},[Da("circle",{cx:"18",cy:"18",r:"16"})],-1),hv={key:1,class:"preloader-inner"},fv=Va('<span class="preloader-inner-line"></span><span class="preloader-inner-line"></span><span class="preloader-inner-line"></span><span class="preloader-inner-line"></span><span class="preloader-inner-line"></span><span class="preloader-inner-line"></span><span class="preloader-inner-line"></span><span class="preloader-inner-line"></span>',8),mv={key:2,class:"preloader-inner"},gv=Da("span",{class:"preloader-inner-circle"},null,-1),vv={key:3,class:"preloader-inner"};var bv={name:"f7-preloader",render:function(e,t){return Ea(),Na("div",{class:e.classes,style:e.style},[e.theme&&e.theme.md?(Ea(),Na("span",pv,[dv])):e.theme&&e.theme.ios?(Ea(),Na("span",hv,[fv])):e.theme&&e.theme.aurora?(Ea(),Na("span",mv,[gv])):e.theme?Wa("",!0):(Ea(),Na("span",vv))],6)},props:cv({size:[Number,String]},dg),setup:function(e){var t=uv();return{classes:Nt((function(){return Xm("preloader",pg(e))})),style:Nt((function(){var t={},n=e.size;return n&&"string"==typeof n&&n.indexOf("px")>=0&&(n=n.replace("px","")),n&&(t.width=n+"px",t.height=n+"px",t["--f7-preloader-size"]=n+"px"),t})),theme:t}}};function yv(){return yv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},yv.apply(this,arguments)}var wv={name:"f7-icon",render:function(e,t){return Ea(),Na("i",{ref:"elRef",style:{fontSize:e.sizeComputed,width:e.sizeComputed,height:e.sizeComputed},class:e.classesComputed},[za(g(e.iconText)+" ",1),Ya(e.$slots,"default")],6)},props:yv({material:String,f7:String,icon:String,ios:String,aurora:String,md:String,tooltip:String,tooltipTrigger:String,size:[String,Number]},dg),setup:function(e){var t=Ct(null),n=uv();Yg(t,e);var a=Nt((function(){var t,a=e.ios,r=e.md,o=e.aurora,s=e.f7,i=e.material,l=e.icon,u={icon:!0};if(n.value&&n.value.ios?t=a:n.value&&n.value.md?t=r:n.value&&n.value.aurora&&(t=o),t){var c=t.split(":"),p=c[0],d=c[1];"material"!==p&&"f7"!==p||(u["material-icons"]="material"===p,u["f7-icons"]="f7"===p),"icon"===p&&(u[d]=!0)}else u={icon:!0,"material-icons":i,"f7-icons":s},l&&(u[l]=!0);return Xm(u,pg(e))})),r=Nt((function(){var t=e.size;return"number"!=typeof e.size&&parseFloat(e.size)!==1*e.size||(t=e.size+"px"),t}));return{elRef:t,sizeComputed:r,classesComputed:a,iconText:Nt((function(){var t=e.ios,a=e.md,r=e.aurora,o=e.f7,s=e.material||o;return a&&n.value&&n.value.md&&(a.indexOf("material:")>=0||a.indexOf("f7:")>=0)?s=a.split(":")[1]:t&&n.value&&n.value.ios&&(t.indexOf("material:")>=0||t.indexOf("f7:")>=0)?s=t.split(":")[1]:r&&n.value&&n.value.aurora&&(r.indexOf("material:")>=0||r.indexOf("f7:")>=0)&&(s=r.split(":")[1]),s}))}}};var xv={name:"f7-use-icon",render:function(e,t){var n=ha("f7-badge"),a=ha("f7-icon");return Ea(),Na(a,e.icon.props,{default:Ut((function(){return[e.icon.badge?(Ea(),Na(n,Ga({key:0},e.icon.badge.props),{default:Ut((function(){return[za(g(e.icon.badge.content),1)]})),_:1},16)):Wa("",!0)]})),_:1},16)},components:{f7Icon:wv,f7Badge:Jg},props:{icon:Object}};function kv(){return kv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},kv.apply(this,arguments)}var Cv={key:1},Ev={key:1};var Sv={name:"f7-button",render:function(e,t){var n=ha("f7-preloader"),a=ha("f7-use-icon");return Ea(),Na(ma(e.tag),Ga({ref:"elRef",class:e.classesComputed},e.attrs),{default:Ut((function(){return[e.preloader?(Ea(),Na(ba,{key:0},[Da(n,{size:e.preloaderSize,color:e.preloaderColor},null,8,["size","color"]),Da("span",null,[e.icon?(Ea(),Na(a,{key:0,icon:e.icon},null,8,["icon"])):Wa("",!0),e.text?(Ea(),Na("span",Cv,g(e.text),1)):Wa("",!0),Ya(e.$slots,"default")])],64)):(Ea(),Na(ba,{key:1},[e.icon?(Ea(),Na(a,{key:0,icon:e.icon},null,8,["icon"])):Wa("",!0),e.text?(Ea(),Na("span",Ev,g(e.text),1)):Wa("",!0),Ya(e.$slots,"default")],64))]})),_:3},16,["class"])},components:{f7Preloader:bv,f7UseIcon:xv},props:kv({text:String,tabLink:[Boolean,String],tabLinkActive:Boolean,type:String,href:{type:[String,Boolean],default:"#"},target:String,round:Boolean,roundMd:Boolean,roundIos:Boolean,roundAurora:Boolean,fill:Boolean,fillMd:Boolean,fillIos:Boolean,fillAurora:Boolean,large:Boolean,largeMd:Boolean,largeIos:Boolean,largeAurora:Boolean,small:Boolean,smallMd:Boolean,smallIos:Boolean,smallAurora:Boolean,raised:Boolean,raisedMd:Boolean,raisedIos:Boolean,raisedAurora:Boolean,outline:Boolean,outlineMd:Boolean,outlineIos:Boolean,outlineAurora:Boolean,active:Boolean,disabled:Boolean,tooltip:String,tooltipTrigger:String,preloader:Boolean,preloaderSize:[Number,String],preloaderColor:String,loading:Boolean},hg,dg,vg,fg),setup:function(e){var t=Ct(null);Yg(t,e),lv(t,e);var n=Nt((function(){return iv(e)})),a=Nt((function(){return"submit"===e.type||"reset"===e.type||"button"===e.type?"button":"a"})),r=Nt((function(){var t=e.href,n=e.tabLink,r=e.target,o=e.type,s=t;return!0===t&&(s="#"),!1!==t&&"button"!==a.value||(s=void 0),qm({href:s,target:r,type:o,"data-tab":jm(n)&&n||void 0},mg(e),bg(e))})),o=Nt((function(){var t=e.tabLink,n=e.tabLinkActive,a=e.round,r=e.roundMd,o=e.roundIos,s=e.roundAurora,i=e.fill,l=e.fillMd,u=e.fillIos,c=e.fillAurora,p=e.large,d=e.largeMd,h=e.largeIos,f=e.largeAurora,m=e.small,g=e.smallMd,v=e.smallIos,b=e.smallAurora,y=e.raised,w=e.raisedMd,x=e.raisedIos,k=e.raisedAurora,C=e.outline,E=e.outlineMd,S=e.outlineIos,$=e.outlineAurora,T=e.active,I=e.disabled;return Xm("button",{"tab-link":t||""===t,"tab-link-active":n,"button-round":a,"button-round-ios":o,"button-round-aurora":s,"button-round-md":r,"button-fill":i,"button-fill-ios":u,"button-fill-aurora":c,"button-fill-md":l,"button-large":p,"button-large-ios":h,"button-large-aurora":f,"button-large-md":d,"button-small":m,"button-small-ios":v,"button-small-aurora":b,"button-small-md":g,"button-raised":y,"button-raised-ios":x,"button-raised-aurora":k,"button-raised-md":w,"button-active":T,"button-outline":C,"button-outline-ios":S,"button-outline-aurora":$,"button-outline-md":E,"button-preloader":e.preloader,"button-loading":e.loading,disabled:I},pg(e),gg(e),yg(e))}));return{tag:a,elRef:t,attrs:r,classesComputed:o,icon:n}}};function $v(){return $v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},$v.apply(this,arguments)}var Tv={name:"f7-card-content",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Ya(e.$slots,"default")],2)},props:$v({padding:{type:Boolean,default:!0}},dg),setup:function(e){return{classes:Nt((function(){return Xm("card-content",{"card-content-padding":e.padding},pg(e))}))}}};function Iv(){return Iv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Iv.apply(this,arguments)}var Nv={name:"f7-card-footer",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Ya(e.$slots,"default")],2)},props:Iv({},dg),setup:function(e){return{classes:Nt((function(){return Xm("card-footer",pg(e))}))}}};function Ov(){return Ov=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ov.apply(this,arguments)}var Rv={name:"f7-card-header",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Ya(e.$slots,"default")],2)},props:Ov({},dg),setup:function(e){return{classes:Nt((function(){return Xm("card-header",pg(e))}))}}};function Av(){return Av=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Av.apply(this,arguments)}var Mv={name:"f7-card",render:function(e,t){var n=ha("f7-card-header"),a=ha("f7-card-content"),r=ha("f7-card-footer");return Ea(),Na("div",{ref:"elRef",class:e.classes,"data-animate":void 0===e.animate?e.animate:e.animate.toString(),"data-hide-navbar-on-open":void 0===e.hideNavbarOnOpen?e.hideNavbarOnOpen:e.hideNavbarOnOpen.toString(),"data-hide-toolbar-on-open":void 0===e.hideToolbarOnOpen?e.hideToolbarOnOpen:e.hideToolbarOnOpen.toString(),"data-hide-statusbar-on-open":void 0===e.hideStatusbarOnOpen?e.hideStatusbarOnOpen:e.hideStatusbarOnOpen.toString(),"data-scrollable-el":e.scrollableEl,"data-swipe-to-close":void 0===e.swipeToClose?e.swipeToClose:e.swipeToClose.toString(),"data-close-by-backdrop-click":void 0===e.closeByBackdropClick?e.closeByBackdropClick:e.closeByBackdropClick.toString(),"data-backdrop":void 0===e.backdrop?e.backdrop:e.backdrop.toString(),"data-backdrop-el":e.backdropEl},[e.hasHeader?(Ea(),Na(n,{key:0},{default:Ut((function(){return[za(g(e.title)+" ",1),Ya(e.$slots,"header")]})),_:3})):Wa("",!0),e.hasContent?(Ea(),Na(a,{key:1,padding:e.padding},{default:Ut((function(){return[za(g(e.content)+" ",1),Ya(e.$slots,"content")]})),_:3},8,["padding"])):Wa("",!0),e.hasFooter?(Ea(),Na(r,{key:2},{default:Ut((function(){return[za(g(e.footer)+" ",1),Ya(e.$slots,"footer")]})),_:3})):Wa("",!0),Ya(e.$slots,"default")],10,["data-animate","data-hide-navbar-on-open","data-hide-toolbar-on-open","data-hide-statusbar-on-open","data-scrollable-el","data-swipe-to-close","data-close-by-backdrop-click","data-backdrop","data-backdrop-el"])},components:{f7CardHeader:Rv,f7CardContent:Tv,f7CardFooter:Nv},props:Av({title:[String,Number],content:[String,Number],footer:[String,Number],outline:Boolean,expandable:Boolean,expandableAnimateWidth:Boolean,expandableOpened:Boolean,animate:{type:Boolean,default:void 0},hideNavbarOnOpen:{type:Boolean,default:void 0},hideToolbarOnOpen:{type:Boolean,default:void 0},hideStatusbarOnOpen:{type:Boolean,default:void 0},scrollableEl:{type:String,default:void 0},swipeToClose:{type:Boolean,default:void 0},closeByBackdropClick:{type:Boolean,default:void 0},backdrop:{type:Boolean,default:void 0},backdropEl:{type:String,default:void 0},noShadow:Boolean,noBorder:Boolean,padding:{type:Boolean,default:!0}},dg),emits:["card:beforeopen","card:open","card:opened","card:close","card:closed","update:expandableOpened"],setup:function(e,t){var n=t.emit,a=t.slots,r=Ct(null),o=function(e,t){r.value===e&&n("card:beforeopen",e,t)},s=function(e){r.value===e&&(n("card:open",e),n("update:expandableOpened",!0))},i=function(e,t){r.value===e&&n("card:opened",e,t)},l=function(e){r.value===e&&n("card:close",e)},u=function(e,t){r.value===e&&(n("card:closed",e,t),n("update:expandableOpened",!1))};Cn((function(){e.expandable&&r.value&&sg((function(){e.expandable&&e.expandableOpened&&Ym.card.open(r.value,!1),Ym.on("cardBeforeOpen",o),Ym.on("cardOpen",s),Ym.on("cardOpened",i),Ym.on("cardClose",l),Ym.on("cardClosed",u)}))})),$n((function(){Ym.off("cardBeforeOpen",o),Ym.off("cardOpen",s),Ym.off("cardOpened",i),Ym.off("cardClose",l),Ym.off("cardClosed",u)})),jr((function(){return e.expandableOpened}),(function(e){e?r.value&&Ym.card.open(r.value):r.value&&Ym.card.close(r.value)}));var c=Nt((function(){return e.title||a.header})),p=Nt((function(){return e.content||a.content})),d=Nt((function(){return e.footer||a.footer})),h=Nt((function(){return Xm("card",{"card-outline":e.outline,"card-expandable":e.expandable,"card-expandable-animate-width":e.expandableAnimateWidth,"no-shadow":e.noShadow,"no-border":e.noBorder},pg(e))}));return{elRef:r,classes:h,hasHeader:c,hasContent:p,hasFooter:d}}};function Bv(){return Bv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Bv.apply(this,arguments)}var Pv=Da("i",{class:"icon-checkbox"},null,-1);var Dv={name:"f7-checkbox",render:function(e,t){return Ea(),Na("label",{class:e.classes},[Da("input",{ref:"inputElRef",type:"checkbox",name:e.name,value:e.value,disabled:e.disabled,readonly:e.readonly,checked:e.checked,onChange:t[1]||(t[1]=function(){return e.onChange&&e.onChange.apply(e,arguments)})},null,40,["name","value","disabled","readonly","checked"]),Pv,Ya(e.$slots,"default")],2)},props:Bv({checked:Boolean,indeterminate:Boolean,name:[Number,String],value:{type:[Number,String,Boolean],default:void 0},disabled:Boolean,readonly:Boolean},dg),emits:["update:checked","change"],setup:function(e,t){var n=t.emit,a=Ct(null);Cn((function(){a.value&&(a.value.indeterminate=!!e.indeterminate)})),jr((function(){return e.indeterminate}),(function(e){a.value&&(a.value.indeterminate=!!e)}));var r=Nt((function(){return Xm({checkbox:!0,disabled:e.disabled},pg(e))}));return{inputElRef:a,classes:r,onChange:function(e){n("update:checked",e.target.checked),n("change",e)}}}};function Fv(){return Fv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fv.apply(this,arguments)}var _v={key:1,class:"chip-label"};var Lv={name:"f7-chip",render:function(e,t){var n=ha("f7-use-icon");return Ea(),Na("div",{ref:"elRef",class:e.classes},[e.hasMedia?(Ea(),Na("div",{key:0,class:e.mediaClasses},[e.icon?(Ea(),Na(n,{key:0,icon:e.icon},null,8,["icon"])):Wa("",!0),za(" "+g(e.media)+" ",1),Ya(e.$slots,"media")],2)):Wa("",!0),e.hasLabel?(Ea(),Na("div",_v,[za(g(e.text)+" ",1),Ya(e.$slots,"text"),Ya(e.$slots,"default")])):Wa("",!0),e.deleteable?(Ea(),Na("a",{key:2,class:"chip-delete",onClick:t[1]||(t[1]=function(){return e.onDeleteClick&&e.onDeleteClick.apply(e,arguments)})})):Wa("",!0)],2)},components:{f7UseIcon:xv},props:Fv({media:String,text:[String,Number],deleteable:Boolean,mediaBgColor:String,mediaTextColor:String,outline:Boolean,tooltip:String,tooltipTrigger:String},hg,dg),emits:["delete"],setup:function(e,t){var n=t.slots,a=t.emit,r=Ct(null);Yg(r,e);var o=Nt((function(){return iv(e)})),s=Nt((function(){return Xm("chip-media",e.mediaTextColor&&"text-color-"+e.mediaTextColor,e.mediaBgColor&&"bg-color-"+e.mediaBgColor)})),i=Nt((function(){return Xm("chip",{"chip-outline":e.outline},pg(e))})),l=Nt((function(){return e.text||n&&(n.text||n.default)})),u=Nt((function(){return e.media||o.value||n&&n.media}));return{classes:i,icon:o,mediaClasses:s,elRef:r,hasLabel:l,hasMedia:u,onDeleteClick:function(e){a("delete",e)}}}};function zv(){return zv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},zv.apply(this,arguments)}var Vv={key:0,class:"resize-handler"};var Wv={name:"f7-col",render:function(e,t){return Ea(),Na(ma(e.tag),{ref:"elRef",class:e.classes},{default:Ut((function(){return[Ya(e.$slots,"default"),e.resizable&&e.resizableHandler?(Ea(),Na("span",Vv)):Wa("",!0)]})),_:3},8,["class"])},props:zv({tag:{type:String,default:"div"},width:{type:[Number,String],default:"auto"},xsmall:{type:[Number,String]},small:{type:[Number,String]},medium:{type:[Number,String]},large:{type:[Number,String]},xlarge:{type:[Number,String]},resizable:Boolean,resizableFixed:Boolean,resizableAbsolute:Boolean,resizableHandler:{type:Boolean,default:!0}},dg),emits:["grid:resize"],setup:function(e,t){var n=t.emit,a=Ct(null),r=function(e){e===a.value&&n("grid:resize")};return Cn((function(){sg((function(){Ym.on("gridResize",r)}))})),$n((function(){Ym.off("gridResize",r)})),{classes:Nt((function(){var t;return Xm(((t={col:"auto"===e.width})["col-"+e.width]="auto"!==e.width,t["xsmall-"+e.xsmall]=e.xsmall,t["small-"+e.small]=e.small,t["medium-"+e.medium]=e.medium,t["large-"+e.large]=e.large,t["xlarge-"+e.xlarge]=e.xlarge,t.resizable=e.resizable,t["resizable-fixed"]=e.resizableFixed,t["resizable-absolute"]=e.resizableAbsolute,t),pg(e))})),elRef:a}}};function Hv(){return Hv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Hv.apply(this,arguments)}var jv={name:"f7-fab-backdrop",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Ya(e.$slots,"default")],2)},props:Hv({},dg),setup:function(e){return{classes:Nt((function(){return Xm("fab-backdrop",pg(e))}))}}};function Uv(){return Uv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Uv.apply(this,arguments)}var Gv={key:0,class:"fab-label"};var qv={name:"f7-fab-button",render:function(e,t){return Ea(),Na("a",{ref:"elRef",class:e.classes,target:e.target,onClick:t[1]||(t[1]=function(){return e.onClick&&e.onClick.apply(e,arguments)})},[Ya(e.$slots,"default"),e.label?(Ea(),Na("span",Gv,g(e.label),1)):Wa("",!0)],10,["target"])},props:Uv({fabClose:Boolean,label:String,target:String,tooltip:String,tooltipTrigger:String},dg),emits:["click"],setup:function(e,t){var n=t.emit,a=Ct(null);return Yg(a,e),{classes:Nt((function(){return Xm({"fab-close":e.fabClose,"fab-label-button":e.label},pg(e))})),onClick:function(e){n("click",e)},elRef:a}}};function Xv(){return Xv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xv.apply(this,arguments)}var Yv={name:"f7-fab-buttons",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Ya(e.$slots,"default")],2)},props:Xv({position:{type:String,default:"top"}},dg),setup:function(e){return{classes:Nt((function(){return Xm("fab-buttons","fab-buttons-"+e.position,pg(e))}))}}};function Kv(){return Kv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Kv.apply(this,arguments)}var Jv={name:"f7-fab",props:Kv({morphTo:String,href:[Boolean,String],target:String,text:String,position:{type:String,default:"right-bottom"},tooltip:String,tooltipTrigger:String},dg),emits:["click"],setup:function(e,t){var n=t.emit,a=t.slots,r=Ct(null),o=function(e){n("click",e)};Yg(r,e);var s=Nt((function(){var t=e.href;return!0===t&&(t="#"),!1===t&&(t=void 0),t}));return function(){var t,n,i=[],l=[],u=a.link,c=a.default,p=a.root,d=a.text;return c&&c().forEach((function(e){if(void 0!==e){var t=e.type&&e.type.name?e.type.name:e.type;"FabButtons"===t||"f7-fab-buttons"===t?l.push(e):i.push(e)}})),(e.text||d)&&(t=Yr("div",{class:"fab-text"},[e.text,d&&d()])),(i.length||u||t)&&(n=Yr("a",{target:e.target,href:s.value,onClick:o},[i,t,u&&u()])),Yr("div",{class:Xm("fab","fab-"+e.position,{"fab-morph":e.morphTo,"fab-extended":void 0!==t},pg(e)),"data-morph-to":e.morphTo,ref:r},[n,l,p&&p()])}}},Zv={class:"gauge"};var Qv={name:"f7-gauge",render:function(e,t){return Ea(),Na("div",Zv,[(Ea(),Na("svg",{class:"gauge-svg",width:e.size+"px",height:(e.semiCircle?e.size/2:e.size)+"px",viewBox:"0 0 "+e.size+" "+(e.semiCircle?e.size/2:e.size)},[e.semiCircle?(Ea(),Na("path",{key:0,class:"gauge-back-semi",d:"M"+(e.size-e.borderWidth/2)+","+e.size/2+" a1,1 0 0,0 -"+(e.size-e.borderWidth)+",0",stroke:e.borderBgColor,"stroke-width":e.borderWidth,fill:e.bgColor||"none"},null,8,["d","stroke","stroke-width","fill"])):Wa("",!0),e.semiCircle?(Ea(),Na("path",{key:1,class:"gauge-front-semi",d:"M"+(e.size-e.borderWidth/2)+","+e.size/2+" a1,1 0 0,0 -"+(e.size-e.borderWidth)+",0",stroke:e.borderColor,"stroke-width":e.borderWidth,"stroke-dasharray":e.length/2,"stroke-dashoffset":e.length/2*(1+e.progress),fill:e.borderBgColor?"none":e.bgColor||"none"},null,8,["d","stroke","stroke-width","stroke-dasharray","stroke-dashoffset","fill"])):Wa("",!0),!e.semiCircle&&e.borderBgColor?(Ea(),Na("circle",{key:2,class:"gauge-back-circle",stroke:e.borderBgColor,"stroke-width":e.borderWidth,fill:e.bgColor||"none",cx:e.size/2,cy:e.size/2,r:e.radius},null,8,["stroke","stroke-width","fill","cx","cy","r"])):Wa("",!0),e.semiCircle?Wa("",!0):(Ea(),Na("circle",{key:3,class:"gauge-front-circle",transform:"rotate(-90 "+e.size/2+" "+e.size/2+")",stroke:e.borderColor,"stroke-width":e.borderWidth,"stroke-dasharray":e.length,"stroke-dashoffset":e.length*(1-e.progress),fill:e.borderBgColor?"none":e.bgColor||"none",cx:e.size/2,cy:e.size/2,r:e.radius},null,8,["transform","stroke","stroke-width","stroke-dasharray","stroke-dashoffset","fill","cx","cy","r"])),e.valueText?(Ea(),Na("text",{key:4,class:"gauge-value-text",x:"50%",y:e.semiCircle?"100%":"50%","font-weight":e.valueFontWeight,"font-size":e.valueFontSize,fill:e.valueTextColor,dy:e.semiCircle?e.labelText?-e.labelFontSize-15:-5:0,"text-anchor":"middle","dominant-baseline":e.semiCircle?null:"middle"},g(e.valueText),9,["y","font-weight","font-size","fill","dy","dominant-baseline"])):Wa("",!0),e.labelText?(Ea(),Na("text",{key:5,class:"gauge-label-text",x:"50%",y:e.semiCircle?"100%":"50%","font-weight":e.labelFontWeight,"font-size":e.labelFontSize,fill:e.labelTextColor,dy:e.semiCircle?-5:e.valueText?e.valueFontSize/2+10:0,"text-anchor":"middle","dominant-baseline":e.semiCircle?null:"middle"},g(e.labelText),9,["y","font-weight","font-size","fill","dy","dominant-baseline"])):Wa("",!0)],8,["width","height","viewBox"]))])},props:{type:{type:String,default:"circle"},value:{type:[Number,String],default:0},size:{type:[Number,String],default:200},bgColor:{type:String,default:"transparent"},borderBgColor:{type:String,default:"#eeeeee"},borderColor:{type:String,default:"#000000"},borderWidth:{type:[Number,String],default:10},valueText:[Number,String],valueTextColor:{type:String,default:"#000000"},valueFontSize:{type:[Number,String],default:31},valueFontWeight:{type:[Number,String],default:500},labelText:String,labelTextColor:{type:String,default:"#888888"},labelFontSize:{type:[Number,String],default:14},labelFontWeight:{type:[Number,String],default:400}},setup:function(e){var t=Nt((function(){return"semicircle"===e.type})),n=Nt((function(){return e.size/2-e.borderWidth/2})),a=Nt((function(){return 2*Math.PI*n.value})),r=Nt((function(){return Math.max(Math.min(e.value,1),0)}));return{semiCircle:t,radius:n,length:a,progress:r}}};function eb(){return eb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},eb.apply(this,arguments)}var tb=Da("span",{class:"toggle-icon"},null,-1);var nb={name:"f7-toggle",render:function(e,t){return Ea(),Na("label",{ref:"elRef",class:e.classes},[Da("input",{type:"checkbox",name:e.name,disabled:e.disabled,readonly:e.readonly,checked:e.checked,value:e.value,onChange:t[1]||(t[1]=function(){return e.onChange&&e.onChange.apply(e,arguments)})},null,40,["name","disabled","readonly","checked","value"]),tb],2)},props:eb({init:{type:Boolean,default:!0},checked:Boolean,disabled:Boolean,readonly:Boolean,name:String,value:[String,Number,Array],tooltip:String,tooltipTrigger:String},dg),emits:["change","toggle:change","update:checked"],setup:function(e,t){var n=t.emit,a=null,r=Ct(null);Yg(r,e);return jr((function(){return e.checked}),(function(e){a&&(a.checked=e)})),Cn((function(){sg((function(){e.init&&r.value&&(a=Ym.toggle.create({el:r.value,on:{change:function(e){n("toggle:change",e.checked),n("update:checked",e.checked)}}}))}))})),$n((function(){a&&a.destroy&&a.$el&&a.destroy(),a=null})),{classes:Nt((function(){return Xm("toggle",{disabled:e.disabled},pg(e))})),elRef:r,f7Toggle:a,onChange:function(e){n("change",e)}}}};function ab(){return ab=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ab.apply(this,arguments)}var rb={name:"f7-range",render:function(e,t){return Ea(),Na("div",{ref:"elRef",class:e.classes},[e.input?(Ea(),Na("input",{key:0,id:"inputId",type:"range",name:e.name},null,8,["name"])):Wa("",!0),Ya(e.$slots,"default")],2)},props:ab({init:{type:Boolean,default:!0},value:{type:[Number,Array,String],default:0},min:{type:[Number,String],default:0},max:{type:[Number,String],default:100},step:{type:[Number,String],default:1},label:{type:Boolean,default:!1},dual:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},verticalReversed:{type:Boolean,default:!1},draggableBar:{type:Boolean,default:!0},formatLabel:Function,scale:{type:Boolean,default:!1},scaleSteps:{type:Number,default:5},scaleSubSteps:{type:Number,default:0},formatScaleLabel:Function,limitKnobPosition:{type:Boolean,default:void 0},name:String,input:Boolean,inputId:String,disabled:Boolean},dg),emits:["range:change","range:changed","rangeChange","rangeChanged","update:value"],setup:function(e,t){var n=t.emit,a=null,r=Ct(null);jr((function(){return e.value}),(function(e){if(a){var t=a.value;Array.isArray(e)&&Array.isArray(t)&&t[0]===e[0]&&t[1]===e[1]||a.setValue(e)}})),Cn((function(){sg((function(){e.init&&r.value&&(a=Ym.range.create(Hm(ab({el:r.value},e,{on:{change:function(e,t){n("range:change",t),n("rangeChange",t)},changed:function(e,t){n("range:changed",t),n("rangeChanged",t),n("update:value",t)}}}))))}))})),$n((function(){a&&a.destroy&&a.destroy(),a=null}));var o=Nt((function(){return Xm("range-slider",{"range-slider-horizontal":!e.vertical,"range-slider-vertical":e.vertical,"range-slider-vertical-reversed":e.vertical&&e.verticalReversed,disabled:e.disabled},pg(e))}));return{elRef:r,classes:o}}};function ob(){return ob=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ob.apply(this,arguments)}var sb={class:"text-editor-content",contenteditable:""};var ib={name:"f7-text-editor",render:function(e,t){return Ea(),Na("div",{ref:"elRef",class:e.classes},[Ya(e.$slots,"root-start"),Da("div",sb,[Ya(e.$slots,"default")]),Ya(e.$slots,"root-end"),Ya(e.$slots,"root")],2)},props:ob({mode:{type:String,default:void 0},value:{type:String,default:void 0},buttons:Array,customButtons:Object,dividers:{type:Boolean,default:void 0},imageUrlText:{type:String,default:void 0},linkUrlText:{type:String,default:void 0},placeholder:{type:String,default:void 0},clearFormattingOnPaste:{type:Boolean,default:void 0},resizable:{type:Boolean,default:!1}},dg),emits:["texteditor:change","texteditor:input","texteditor:focus","texteditor:blur","texteditor:buttonclick","texteditor:keyboardopen","texteditor:keyboardclose","texteditor:popoveropen","texteditor:popoverclose","texteditor:insertlink","texteditor:insertimage","texteditorChange","texteditorInput","texteditorFocus","texteditorBlur"],setup:function(e,t){var n=t.emit,a=null,r=Ct(null),o=function(e,t){n("texteditor:change",t),n("texteditorChange",t)},s=function(e,t){n("texteditor:input",t),n("texteditorInput",t)},i=function(){n("texteditor:focus"),n("texteditorFocus")},l=function(){n("texteditor:blur"),n("texteditorBlur")},u=function(e,t){n("texteditor:buttonclick",t)},c=function(){n("texteditor:keyboardopen")},p=function(){n("texteditor:keyboardclose")},d=function(){n("texteditor:popoveropen")},h=function(){n("texteditor:popoverclose")},f=function(t,a){n(e,"texteditor:insertlink",a)},m=function(t,a){n(e,"texteditor:insertimage",a)};jr((function(){return e.value}),(function(e){a&&a.setValue(e)})),Cn((function(){var t=Hm({el:r.value,mode:e.mode,value:e.value,buttons:e.buttons,customButtons:e.customButtons,dividers:e.dividers,imageUrlText:e.imageUrlText,linkUrlText:e.linkUrlText,placeholder:e.placeholder,clearFormattingOnPaste:e.clearFormattingOnPaste,on:{change:o,input:s,focus:i,blur:l,buttonClick:u,keyboardOpen:c,keyboardClose:p,popoverOpen:d,popoverClose:h,insertLink:f,insertImage:m}});sg((function(){a=Ym.textEditor.create(t)}))})),$n((function(){a&&a.destroy&&a.destroy(),a=null}));var g=Nt((function(){return Xm("text-editor",e.resizable&&"text-editor-resizable",pg(e))}));return{elRef:r,classes:g}}};function lb(){return lb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},lb.apply(this,arguments)}var ub={name:"f7-input",props:lb({type:String,name:String,value:{type:[String,Number,Array,Date,Object],default:void 0},inputmode:String,placeholder:String,inputId:[String,Number],size:[String,Number],accept:[String,Number],autocomplete:[String],autocorrect:[String],autocapitalize:[String],spellcheck:[String],autofocus:Boolean,autosave:String,checked:Boolean,disabled:Boolean,max:[String,Number],min:[String,Number],step:[String,Number],maxlength:[String,Number],minlength:[String,Number],multiple:Boolean,readonly:Boolean,required:Boolean,inputStyle:[String,Object],pattern:String,validate:[Boolean,String],validateOnBlur:Boolean,onValidate:Function,tabindex:[String,Number],resizable:Boolean,clearButton:Boolean,noFormStoreData:Boolean,noStoreData:Boolean,ignoreStoreData:Boolean,errorMessage:String,errorMessageForce:Boolean,info:String,outline:Boolean,wrap:{type:Boolean,default:!0},dropdown:{type:[String,Boolean],default:"auto"},calendarParams:Object,colorPickerParams:Object,textEditorParams:Object},dg),emits:["input","focus","blur","change","textarea:resize","input:notempty","input:empty","input:clear","texteditor:change","calendar:change","colorpicker:change","update:value"],setup:function(e,t){var n=t.emit,a=t.slots,r=null,o=null,s=Ct(!1),i=Ct(!1),l=Ct(null),u=Ct(null),c=!1,p=Ct(function(){if(u.value)return u.value.value}()),d=Nt((function(){return("datepicker"!==e.type||!Array.isArray(e.value)||0!==e.value.length)&&(void 0===e.value?p.value||0===p.value:e.value||0===e.value)})),h=function(){if(Ym&&u.value){var t=u.value.validity;t&&(t.valid?(e.onValidate&&e.onValidate(!0),!1!==s.value&&(s.value=!1)):(e.onValidate&&e.onValidate(!1),!0!==s.value&&(s.value=!0)))}},f=function(e){n("textarea:resize",e)},m=function(e){n("input:notempty",e)},g=function(e){n("input:empty",e)},v=function(e){n("input:clear",e)},b=function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];n.apply(void 0,["input"].concat(a)),u.value&&(p.value=u.value.value),e.validateOnBlur||""===e.validateOnBlur||!e.validate&&""!==e.validate||!u.value||h(),u.value&&"texteditor"!==e.type&&"colorpicker"!==e.type&&"datepicker"!==e.type&&n("update:value",u.value.value)},y=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];n.apply(void 0,["focus"].concat(t)),i.value=!0},w=function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];n.apply(void 0,["blur"].concat(a)),(e.validate||""===e.validate||e.validateOnBlur||""===e.validateOnBlur)&&u.value&&h(),i.value=!1},x=function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];n.apply(void 0,["change"].concat(a)),"texteditor"===e.type&&(n("texteditor:change",a[1]),n("update:value",a[1]))};Cn((function(){var t=e.type,a=e.resizable,s=e.clearButton,i=e.value,l=e.calendarParams,c=e.colorPickerParams,p=e.validate,d=e.validateOnBlur;sg((function(){"range"!==t&&"toggle"!==t&&u.value&&(u.value.addEventListener("input:notempty",m,!1),"textarea"===t&&a&&u.value.addEventListener("textarea:resize",f,!1),s&&(u.value.addEventListener("input:empty",g,!1),u.value.addEventListener("input:clear",v,!1)),"datepicker"===t&&(r=Ym.calendar.create(lb({inputEl:u.value,value:i,on:{change:function(e,t){n("calendar:change",t),n("update:value",t)}}},l||{}))),"colorpicker"===t&&(o=Ym.colorPicker.create(lb({inputEl:u.value,value:i,on:{change:function(e,t){n("colorpicker:change",t),n("update:value",t)}}},c||{}))),Ym.input.checkEmptyState(u.value),d||""===d||!p&&""!==p||null==i||""===i||setTimeout((function(){h()}),0),a&&Ym.input.resizeTextarea(u.value))}))})),$n((function(){"range"!==e.type&&"toggle"!==e.type&&u.value&&(u.value.removeEventListener("input:notempty",m,!1),"textarea"===e.type&&e.resizable&&u.value.removeEventListener("textarea:resize",f,!1),e.clearButton&&(u.value.removeEventListener("input:empty",g,!1),u.value.removeEventListener("input:clear",v,!1)),r&&r.destroy&&(r.destroy(),r=null),o&&o.destroy&&(o.destroy(),o=null))})),Sn((function(){if(Ym&&c){if(!u.value)return;c=!1,Ym.input.checkEmptyState(u.value),e.validate&&!e.validateOnBlur&&h(),e.resizable&&Ym.input.resizeTextarea(u.value)}})),jr((function(){return e.colorPickerParams}),(function(e){Ym&&o&&qm(o.params,e||{})})),jr((function(){return e.calendarParams}),(function(e){Ym&&r&&qm(r.params,e||{})})),jr((function(){return e.value}),(function(t){"range"!==e.type&&"toggle"!==e.type&&Ym&&(c=!0,r&&r.setValue(t),o&&o.setValue(t))}));var k=function(t,n){var a="file"!==e.type&&"datepicker"!==e.type&&"colorpicker"!==e.type,r="input"===t,o=e.type;"datepicker"!==o&&"colorpicker"!==o||(o="text");var l,c=Xm({resizable:"textarea"===o&&e.resizable,"no-store-data":e.noFormStoreData||e.noStoreData||e.ignoreStoreData,"input-invalid":e.errorMessage&&e.errorMessageForce||s.value,"input-with-value":d.value,"input-focused":i.value});a&&(l=void 0!==e.value?e.value:p.value);var h={};"datepicker"!==e.type&&"colorpicker"!==e.type&&"value"in e&&(h.value=l);var f=Hm({name:e.name,type:r?o:void 0,placeholder:e.placeholder,inputmode:e.inputmode,id:e.inputId,size:e.size,accept:e.accept,autocomplete:e.autocomplete,autoCorrect:e.autocorrect,autocapitalize:e.autocapitalize,spellcheck:e.spellcheck,autofocus:e.autofocus,autoSave:e.autosave,checked:e.checked,disabled:e.disabled,max:e.max,maxlength:e.maxlength,min:e.min,minlength:e.minlength,step:e.step,multiple:e.multiple,readonly:e.readonly,required:e.required,pattern:e.pattern,validate:"string"==typeof e.validate&&e.validate.length?e.validate:void 0,tabindex:e.tabindex});return Yr(t,lb({ref:u,style:e.inputStyle},f,{"data-validate":!0===e.validate||""===e.validate||!0===e.validateOnBlur||""===e.validateOnBlur||void 0,"data-validate-on-blur":!0===e.validateOnBlur||""===e.validateOnBlur||void 0,"data-error-message":e.errorMessageForce?void 0:e.errorMessage,class:c,onFocus:y,onBlur:w,onInput:b,onChange:x},h),[n])},C=Nt((function(){return Xm("input",{"input-outline":e.outline,"input-dropdown":"auto"===e.dropdown?"select"===e.type:e.dropdown,"input-invalid":e.errorMessage&&e.errorMessageForce||s.value},pg(e))}));return function(){var t;return t="select"===e.type||"textarea"===e.type||"file"===e.type?"select"===e.type?k("select",a.default&&a.default()):"file"===e.type?k("input"):k("textarea"):a.default||!e.type?a.default():"toggle"===e.type?Yr(nb,{checked:e.checked,readonly:e.readonly,name:e.name,value:e.value,disabled:e.disabled,id:e.inputId,onChange:x}):"range"===e.type?Yr(rb,{value:e.value,disabled:e.disabled,min:e.min,max:e.max,step:e.step,name:e.name,id:e.inputId,input:!0,onRangeChange:x}):"texteditor"===e.type?Yr(ib,lb({value:e.value,resizable:e.resizable,placeholder:e.placeholder,onTextEditorFocus:y,onTextEditorBlur:w,onTextEditorInput:b,onTextEditorChange:x},e.textEditorParams||{})):k("input"),e.wrap?Yr("div",{class:C.value,ref:l},[t,(e.errorMessage||a["error-message"])&&e.errorMessageForce&&Yr("div",{class:"input-error-message"},[e.errorMessage,a["error-message"]&&a["error-message"]()]),e.clearButton&&Yr("span",{class:"input-clear-button"}),(e.info||a.info)&&Yr("div",{class:"input-info"},[e.info,a.info&&a.info()])]):t}}},cb=function(e,t,n){var a;Cn((function(){sg((function(){if(e.smartSelect){var r=qm({el:n()},e.smartSelectParams||{});a=Ym.smartSelect.create(r),t(a)}}))})),$n((function(){a&&a.destroy&&a.destroy(),t(a=null)}))};function pb(){return pb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},pb.apply(this,arguments)}var db={name:"f7-link",render:function(e,t){var n=ha("f7-use-icon"),a=ha("f7-badge");return Ea(),Na("a",Ga({ref:"elRef",class:e.classes},e.attrs),[e.icon?(Ea(),Na(n,{key:0,icon:e.icon},null,8,["icon"])):Wa("",!0),e.text?(Ea(),Na("span",{key:1,class:e.isTabbarLabel?"tabbar-label":""},[za(g(e.text)+" ",1),e.badge?(Ea(),Na(a,{key:0,color:e.badgeColor},{default:Ut((function(){return[za(g(e.badge),1)]})),_:1},8,["color"])):Wa("",!0)],2)):Wa("",!0),Ya(e.$slots,"default")],16)},components:{f7Badge:Jg,f7UseIcon:xv},props:pb({noLinkClass:Boolean,text:String,tabLink:[Boolean,String],tabLinkActive:Boolean,tabbarLabel:Boolean,iconOnly:Boolean,badge:[String,Number],badgeColor:[String],href:{type:[String,Boolean],default:"#"},target:String,tooltip:String,tooltipTrigger:String,smartSelect:Boolean,smartSelectParams:Object},hg,dg,vg,fg),setup:function(e,t){var n=t.slots,a=Ct(null),r=null;Yg(a,e),lv(a,e),cb(e,(function(e){r=e}),(function(){return a.value}));var o=Qt("TabbarContext",{value:{}}),s=Nt((function(){return e.tabbarLabel||o.value.tabbarHasLabels})),i=Nt((function(){var t=e.href,n=e.tabLink,a=t;return!0===t&&(a="#"),!1===t&&(a=void 0),pb({href:a,target:e.target,"data-tab":jm(n)&&n||void 0},mg(e),bg(e))})),l=Nt((function(){var t,a=e.iconOnly,r=e.text,o=e.noLinkClass,i=e.tabLink,l=e.tabLinkActive,u=e.smartSelect,c=n&&n.default;return t=!(!a&&(r||c)),Xm({link:!(o||s.value),"icon-only":t,"tab-link":i||""===i,"tab-link-active":l,"smart-select":u},pg(e),gg(e),yg(e))})),u=Nt((function(){return iv(e)}));return{elRef:a,icon:u,isTabbarLabel:s,attrs:i,classes:l,f7SmartSelect:r}}};function hb(){return hb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},hb.apply(this,arguments)}var fb={name:"f7-list-button",render:function(e,t){return Ea(),Na("li",null,[Da("a",Ga({ref:"linkElRef",class:e.linkClasses},e.linkAttrs,{onClick:t[1]||(t[1]=function(){return e.onClick&&e.onClick.apply(e,arguments)})}),[za(g(e.title)+" "+g(e.text)+" ",1),Ya(e.$slots,"default")],16)])},props:hb({title:[String,Number],text:[String,Number],tabLink:[Boolean,String],tabLinkActive:Boolean,link:[Boolean,String],href:[Boolean,String],target:String,tooltip:String,tooltipTrigger:String},dg,vg,fg),emits:["click"],setup:function(e,t){var n=t.emit,a=Ct(null);return Yg(a,e),lv(a,e),{linkAttrs:Nt((function(){return hb({href:"boolean"==typeof e.link&&"boolean"==typeof e.href?"#":e.link||e.href,target:e.target,"data-tab":jm(e.tabLink)&&e.tabLink},mg(e),bg(e))})),linkClasses:Nt((function(){return Xm(hb({"list-button":!0,"tab-link":e.tabLink||""===e.tabLink,"tab-link-active":e.tabLinkActive},pg(e),gg(e),yg(e)))})),onClick:function(e){n("click",e)},linkElRef:a}}};function mb(){return mb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},mb.apply(this,arguments)}var gb={name:"f7-list-group",render:function(e,t){return Ea(),Na("div",{class:e.classes,"data-sortable-move-elements":void 0!==e.sortableMoveElements?e.sortableMoveElements.toString():void 0},[Da("ul",null,[Ya(e.$slots,"default")])],10,["data-sortable-move-elements"])},props:mb({mediaList:Boolean,simpleList:Boolean,sortable:Boolean,sortableOpposite:Boolean,sortableTapHold:Boolean,sortableMoveElements:{type:Boolean,default:void 0}},dg),setup:function(e){var t=Qt("ListContext",{value:{listIsMedia:e.mediaList,listIsSimple:e.simpleList,listIsSortable:e.sortable,listIsSortableOpposite:e.sortableOpposite}});return Zt("ListContext",Nt((function(){return{listIsMedia:e.mediaList||t.value.listIsMedia,listIsSimple:e.simpleList||t.value.listIsSimple,listIsSortable:e.sortable||t.value.listIsSortable,listIsSortableOpposite:e.sortableOpposite||t.value.listIsSortableOpposite}}))),{classes:Nt((function(){return Xm("list-group",{"media-list":e.mediaList,sortable:e.sortable,"sortable-tap-hold":e.sortableTapHold,"sortable-opposite":e.sortableOpposite},pg(e))}))}}};function vb(){return vb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},vb.apply(this,arguments)}var bb={name:"f7-list-index",render:function(e,t){return Ea(),Na("div",{ref:"elRef",class:e.classes},[Ya(e.$slots,"default")],2)},props:vb({init:{type:Boolean,default:!0},listEl:[String,Object],indexes:{type:[String,Array],default:"auto"},scrollList:{type:Boolean,default:!0},label:{type:Boolean,default:!1},iosItemHeight:{type:Number,default:14},mdItemHeight:{type:Number,default:14},auroraItemHeight:{type:Number,default:14}},dg),emits:["listindex:select"],setup:function(e,t){var n=t.emit,a=null,r=Ct(null),o=function(){a&&a.update()};jr((function(){return e.indexes}),(function(e){a&&(a.params.indexes=e,o())})),Cn((function(){e.init&&sg((function(){a=Ym.listIndex.create({el:r.value,listEl:e.listEl,indexes:e.indexes,iosItemHeight:e.iosItemHeight,mdItemHeight:e.mdItemHeight,auroraItemHeight:e.auroraItemHeight,scrollList:e.scrollList,label:e.label,on:{select:function(e,t,a){n("listindex:select",t,a)}}})}))})),$n((function(){a&&a.destroy&&a.destroy(),a=null}));var s=Nt((function(){return Xm("list-index",pg(e))}));return{elRef:r,classes:s,update:o,scrollListToIndex:function(e){a&&a.scrollListToIndex(e)}}}};function yb(){return yb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},yb.apply(this,arguments)}var wb={name:"f7-list-input",props:yb({sortable:{type:Boolean,default:void 0},media:String,dropdown:{type:[String,Boolean],default:"auto"},wrap:{type:Boolean,default:!0},input:{type:Boolean,default:!0},type:{type:String,default:"text"},name:String,value:{type:[String,Number,Array,Date,Object],default:void 0},inputmode:String,readonly:Boolean,required:Boolean,disabled:Boolean,placeholder:String,inputId:[String,Number],size:[String,Number],accept:[String,Number],autocomplete:[String],autocorrect:[String],autocapitalize:[String],spellcheck:[String],autofocus:Boolean,autosave:String,max:[String,Number],min:[String,Number],step:[String,Number],maxlength:[String,Number],minlength:[String,Number],multiple:Boolean,inputStyle:[String,Object],pattern:String,validate:[Boolean,String],validateOnBlur:Boolean,onValidate:Function,tabindex:[String,Number],resizable:Boolean,clearButton:Boolean,noFormStoreData:Boolean,noStoreData:Boolean,ignoreStoreData:Boolean,errorMessage:String,errorMessageForce:Boolean,info:String,outline:Boolean,label:[String,Number],inlineLabel:Boolean,floatingLabel:Boolean,calendarParams:Object,colorPickerParams:Object,textEditorParams:Object},dg),emits:["textarea:resize","input:notempty","input:empty","input:clear","texteditor:change","calendar:change","colorpicker:change","change","focus","blur","input","update:value"],setup:function(e,t){var n=t.emit,a=t.slots,r=Ct(!1),o=Ct(!1),s=Qt("ListContext",{value:{listIsMedia:!1,listIsSortable:!1,listIsSortableOpposite:!1,listIsSimple:!1}}),i=null,l=null,u=Ct(null),c=Ct(null),p=Ct(null),d=!1,h=Ct(function(){if(c.value)return c.value.value}()),f=Nt((function(){return("datepicker"!==e.type||!Array.isArray(e.value)||0!==e.value.length)&&(void 0===e.value?h.value||0===h.value:e.value||0===e.value)})),m=function(){if(Ym&&c.value){var t=c.value.validity;t&&(t.valid?(e.onValidate&&e.onValidate(!0),!1!==r.value&&(r.value=!1)):(e.onValidate&&e.onValidate(!1),!0!==r.value&&(r.value=!0)))}},g=function(e){n("textarea:resize",e)},v=function(e){n("input:notempty",e)},b=function(e){n("input:empty",e)},y=function(e){n("input:clear",e)},w=function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];n.apply(void 0,["input"].concat(a)),c.value&&(h.value=c.value.value),e.validateOnBlur||""===e.validateOnBlur||!e.validate&&""!==e.validate||!c.value||m(c.value),c.value&&"texteditor"!==e.type&&"colorpicker"!==e.type&&"datepicker"!==e.type&&n("update:value",c.value.value)},x=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];n.apply(void 0,["focus"].concat(t)),o.value=!0},k=function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];n.apply(void 0,["blur"].concat(a)),(e.validate||""===e.validate||e.validateOnBlur||""===e.validateOnBlur)&&c.value&&m(c.value),o.value=!1},C=function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];n.apply(void 0,["change"].concat(a)),"texteditor"===e.type&&(n("texteditor:change",a[0]),n("update:value",a[0]))};Cn((function(){(u.value||p.value)&&sg((function(){c.value&&(c.value.addEventListener("input:notempty",v,!1),c.value.addEventListener("textarea:resize",g,!1),c.value.addEventListener("input:empty",b,!1),c.value.addEventListener("input:clear",y,!1),"datepicker"===e.type&&(i=Ym.calendar.create(yb({inputEl:c.value,value:e.value,on:{change:function(e,t){n("update:value",t),n("calendar:change",t)}}},e.calendarParams||{}))),"colorpicker"===e.type&&(l=Ym.colorPicker.create(yb({inputEl:c.value,value:e.value,on:{change:function(e,t){n("update:value",t),n("colorpicker:change",t)}}},e.colorPickerParams||{}))),e.validateOnBlur||""===e.validateOnBlur||!e.validate&&""!==e.validate||void 0===e.value||null===e.value||""===e.value||setTimeout((function(){m()}),0),"textarea"===e.type&&e.resizable&&Ym.input.resizeTextarea(c.value))}))})),$n((function(){c.value&&(c.value.removeEventListener("input:notempty",v,!1),c.value.removeEventListener("textarea:resize",g,!1),c.value.removeEventListener("input:empty",b,!1),c.value.removeEventListener("input:clear",y,!1)),i&&i.destroy&&(i.destroy(),i=null),l&&l.destroy&&(l.destroy(),l=null)})),Sn((function(){if(Ym&&d){if(!c.value)return;d=!1,e.validate&&!e.validateOnBlur&&m(),"textarea"===e.type&&e.resizable&&Ym.input.resizeTextarea(c.value)}})),jr((function(){return e.colorPickerParams}),(function(e){Ym&&l&&qm(l.params,e||{})})),jr((function(){return e.calendarParams}),(function(e){Ym&&i&&qm(i.params,e||{})})),jr((function(){return e.value}),(function(e){Ym&&(d=!0,i&&i.setValue(e),l&&l.setValue(e))}));var E=Nt((function(){return!0===e.sortable||!1===e.sortable?e.sortable:s.value.listIsSortable||!1})),S=function(t,n){var a="file"!==e.type&&"datepicker"!==e.type&&"colorpicker"!==e.type,s="input"===t,i=e.type;"datepicker"!==i&&"colorpicker"!==i||(i="text");var l,u=Xm({resizable:"textarea"===i&&e.resizable,"no-store-data":e.noFormStoreData||e.noStoreData||e.ignoreStoreData,"input-invalid":e.errorMessage&&e.errorMessageForce||r.value,"input-with-value":f.value,"input-focused":o.value});a&&(l=void 0!==e.value?e.value:h.value);var p={};"datepicker"!==e.type&&"colorpicker"!==e.type&&"value"in e&&(p.value=l);var d=Hm({name:e.name,type:s?i:void 0,placeholder:e.placeholder,inputmode:e.inputmode,id:e.inputId,size:e.size,accept:e.accept,autocomplete:e.autocomplete,autocorrect:e.autocorrect,autocapitalize:e.autocapitalize,spellcheck:e.spellcheck,autofocus:e.autofocus,autosave:e.autosave,disabled:e.disabled,max:e.max,maxlength:e.maxlength,min:e.min,minlength:e.minlength,step:e.step,multiple:e.multiple,readonly:e.readonly,required:e.required,pattern:e.pattern,validate:"string"==typeof e.validate&&e.validate.length?e.validate:void 0,tabindex:e.tabindex});return Yr(t,yb({ref:c,style:e.inputStyle},d,{"data-validate":!0===e.validate||""===e.validate||!0===e.validateOnBlur||""===e.validateOnBlur||void 0,"data-validate-on-blur":!0===e.validateOnBlur||""===e.validateOnBlur||void 0,"data-error-message":e.errorMessageForce?void 0:e.errorMessage,class:u,onFocus:x,onBlur:k,onInput:w,onChange:C},p),[n])};return function(){var t;e.input&&(t="select"===e.type||"textarea"===e.type||"file"===e.type?"select"===e.type?S("select",a.default&&a.default()):"file"===e.type?S("input"):S("textarea"):"texteditor"===e.type?Yr(ib,yb({value:e.value,resizable:e.resizable,placeholder:e.placeholder,onTexteditorFocus:x,onTexteditorBlur:k,onTexteditorInput:w,onTexteditorChange:C},e.textEditorParams||{})):S("input"));var n=!!e.errorMessage||a["error-message"],s=Yr("div",{ref:p,class:Xm("item-content item-input",!e.wrap&&{disabled:e.disabled},!e.wrap&&pg(e),{"inline-label":e.inlineLabel,"item-input-outline":e.outline,"item-input-focused":o.value,"item-input-with-info":!!e.info||a.info,"item-input-with-value":f.value,"item-input-with-error-message":n&&e.errorMessageForce||r.value,"item-input-invalid":n&&e.errorMessageForce||r.value})},[a["content-start"]&&a["content-start"](),(e.media||a.media)&&Yr("div",{class:"item-media"},[e.media&&Yr("img",{src:e.media}),a.media&&a.media()]),Yr("div",{class:"item-inner"},[a["inner-start"]&&a["inner-start"](),(e.label||a.label)&&Yr("div",{class:Xm("item-title item-label",{"item-floating-label":e.floatingLabel})},[e.label,a.label&&a.label()]),Yr("div",{class:Xm("item-input-wrap",{"input-dropdown":"auto"===e.dropdown?"select"===e.type:e.dropdown})},[t,a.input&&a.input(),n&&e.errorMessageForce&&Yr("div",{class:"item-input-error-message"},[e.errorMessage,a["error-message"]&&a["error-message"]()]),e.clearButton&&Yr("span",{class:"input-clear-button"}),(e.info||a.info)&&Yr("div",{class:"item-input-info"},[e.info,a.info&&a.info()])]),a.inner&&a.inner(),a["inner-end"]&&a["inner-end"]()]),a.content&&a.content(),a["content-end"]&&a["content-end"]()]);return e.wrap?Yr("li",{ref:u,class:Xm({disabled:e.disabled},pg(e))},[a["root-start"]&&a["root-start"](),s,E.value&&Yr("div",{class:"sortable-handler"}),a.root&&a.root(),a["root-end"]&&a["root-end"]()]):s}}};function xb(){return xb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},xb.apply(this,arguments)}var kb={name:"f7-list-item-cell",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Ya(e.$slots,"default")],2)},props:xb({},dg),setup:function(e){return{classes:Nt((function(){return Xm("item-cell",pg(e))}))}}};function Cb(){return Cb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Cb.apply(this,arguments)}var Eb={name:"f7-list-item-row",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Ya(e.$slots,"default")],2)},props:Cb({},dg),setup:function(e){return{classes:Nt((function(){return Xm("item-row",pg(e))}))}}};function Sb(){return Sb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Sb.apply(this,arguments)}var $b={name:"f7-list-item",props:Sb({title:[String,Number],text:[String,Number],media:String,subtitle:[String,Number],header:[String,Number],footer:[String,Number],tooltip:String,tooltipTrigger:String,link:[Boolean,String],target:String,tabLink:[Boolean,String],tabLinkActive:Boolean,selected:Boolean,after:[String,Number],badge:[String,Number],badgeColor:String,mediaItem:Boolean,mediaList:Boolean,divider:Boolean,groupTitle:Boolean,swipeout:Boolean,swipeoutOpened:Boolean,sortable:{type:Boolean,default:void 0},sortableOpposite:{type:Boolean,default:void 0},accordionItem:Boolean,accordionItemOpened:Boolean,smartSelect:Boolean,smartSelectParams:Object,noChevron:Boolean,chevronCenter:Boolean,checkbox:Boolean,radio:Boolean,radioIcon:String,checked:Boolean,indeterminate:Boolean,name:String,value:{type:[String,Number,Array],default:void 0},readonly:Boolean,required:Boolean,disabled:Boolean,virtualListIndex:Number},dg,vg,fg),emits:["click","swipeout","swipeout:overswipeenter","swipeout:overswipeexit","swipeout:deleted","swipeout:delete","swipeout:close","swipeout:closed","swipeout:open","swipeout:opened","accordion:beforeclose","accordion:close","accordion:closed","accordion:beforeopen","accordion:open","accordion:opened","change","update:checked"],setup:function(e,t){var n=t.slots,a=t.emit,r=Qt("ListContext",{value:{listIsMedia:!1,listIsSortable:!1,listIsSortableOpposite:!1,listIsSimple:!1}}),o=Nt((function(){return r.value.listIsMedia||!1})),s=Nt((function(){return r.value.listIsSortable||!1})),i=Nt((function(){return r.value.listIsSortableOpposite||!1})),l=Nt((function(){return r.value.listIsSimple||!1})),u=Ct(null),c=Ct(null),p=Ct(null),d=function(e){"input"!==e.target.tagName.toLowerCase()&&a("click",e)},h=function(e){u.value===e&&a("swipeout:overswipeenter")},f=function(e){u.value===e&&a("swipeout:overswipeexit")},m=function(e){u.value===e&&a("swipeout:deleted")},g=function(e){u.value===e&&a("swipeout:delete")},v=function(e){u.value===e&&a("swipeout:close")},b=function(e){u.value===e&&a("swipeout:closed")},y=function(e){u.value===e&&a("swipeout:open")},w=function(e){u.value===e&&a("swipeout:opened")},x=function(e,t){u.value===e&&a("swipeout",t)},k=function(e,t){u.value===e&&a("accordion:beforeclose",t)},C=function(e){u.value===e&&a("accordion:close")},E=function(e){u.value===e&&a("accordion:closed")},S=function(e,t){u.value===e&&a("accordion:beforeopen",t)},$=function(e){u.value===e&&a("accordion:open")},T=function(e){u.value===e&&a("accordion:opened")},I=function(e){a("change",e),a("update:checked",e.target.checked)};Yg(u,e),lv(c,e),cb(e,(function(){}),(function(){return u.value.querySelector("a.smart-select")})),jr((function(){return e.swipeoutOpened}),(function(t){e.swipeout&&u.value&&Ym&&(t?Ym.swipeout.open(u.value):Ym.swipeout.close(u.value))})),Cn((function(){sg((function(){e.swipeout&&(Ym.on("swipeoutOpen",y),Ym.on("swipeoutOpened",w),Ym.on("swipeoutClose",v),Ym.on("swipeoutClosed",b),Ym.on("swipeoutDelete",g),Ym.on("swipeoutDeleted",m),Ym.on("swipeoutOverswipeEnter",h),Ym.on("swipeoutOverswipeExit",f),Ym.on("swipeout",x)),e.accordionItem&&(Ym.on("accordionBeforeOpen",S),Ym.on("accordionOpen",$),Ym.on("accordionOpened",T),Ym.on("accordionBeforeClose",k),Ym.on("accordionClose",C),Ym.on("accordionClosed",E)),e.swipeout&&e.swipeoutOpened&&Ym.swipeout.open(u.value)})),e.checkbox&&p.value&&(p.value.indeterminate=!!e.indeterminate)})),$n((function(){Ym&&(Ym.off("swipeoutOpen",y),Ym.off("swipeoutOpened",w),Ym.off("swipeoutClose",v),Ym.off("swipeoutClosed",b),Ym.off("swipeoutDelete",g),Ym.off("swipeoutDeleted",m),Ym.off("swipeoutOverswipeEnter",h),Ym.off("swipeoutOverswipeExit",f),Ym.off("swipeout",x),Ym.off("accordionBeforeOpen",S),Ym.off("accordionOpen",$),Ym.off("accordionOpened",T),Ym.off("accordionBeforeClose",k),Ym.off("accordionClose",C),Ym.off("accordionClosed",E))})),jr((function(){return e.indeterminate}),(function(e){p.value&&(p.value.indeterminate=!!e)}));var N=Nt((function(){return e.mediaItem||e.mediaList||o.value})),O=Nt((function(){return!0===e.sortable||!1===e.sortable?e.sortable:s.value})),R=Nt((function(){return O.value&&(e.sortableOpposite||i.value)})),A=Nt((function(){return Sb({href:!0===e.link?"":e.link||e.href,target:e.target,"data-tab":jm(e.tabLink)&&e.tabLink||void 0},mg(e),bg(e))})),M=Nt((function(){return Xm({"item-link":!0,"smart-select":e.smartSelect,"tab-link":e.tabLink||""===e.tabLink,"tab-link-active":e.tabLinkActive,"item-selected":e.selected},gg(e),yg(e))})),B=Nt((function(){return Xm("item-content",{"item-checkbox":e.checkbox,"item-radio":e.radio,"item-radio-icon-start":e.radio&&"start"===e.radioIcon,"item-radio-icon-end":e.radio&&"end"===e.radioIcon},pg(e))})),P=Nt((function(){return Xm({"item-divider":e.divider,"list-group-title":e.groupTitle,"media-item":N.value,swipeout:e.swipeout,"accordion-item":e.accordionItem,"accordion-item-opened":e.accordionItemOpened,disabled:e.disabled&&!(e.radio||e.checkbox),"no-chevron":e.noChevron,"chevron-center":e.chevronCenter,"disallow-sorting":!1===e.sortable},pg(e))}));return function(){var t,a;if(l.value||(a=function(e){var t,n,a,r,o,s,i,l,u,c,p,d,h,f,m=void 0===e?{}:e,g=m.props,v=m.slots,b=m.inputElRef,y=m.onChange,w=m.onClick,x=m.isMediaComputed,k=m.isSortableComputed,C=m.isSortableOppositeComputed,E=m.itemContentClasses,S=g.radio,$=g.checkbox,T=g.value,I=g.name,N=g.readonly,O=g.disabled,R=g.checked,A=g.required,M=g.media,B=g.header,P=g.footer,D=g.title,F=g.subtitle,_=g.text,L=g.after,z=g.badge,V=g.badgeColor,W=g.swipeout,H=g.sortable,j=g.accordionItem;return(S||$)&&(c=Yr("input",{ref:b,value:T,name:I,checked:R,readonly:N,disabled:O,required:A,type:S?"radio":"checkbox",onChange:y}),p=Yr("i",{class:"icon icon-"+(S?"radio":"checkbox")})),(M||v.media)&&(M&&(f=Yr("img",{src:M})),u=Yr("div",{class:"item-media"},[f,v.media&&v.media()])),(B||v.header)&&(d=Yr("div",{class:"item-header"},[B,v.header&&v.header()])),(P||v.footer)&&(h=Yr("div",{class:"item-footer"},[P,v.footer&&v.footer()])),(D||v.title||!x.value&&d||!x.value&&h)&&(t=Yr("div",{class:"item-title"},[!x.value&&d,D,v.title&&v.title(),!x.value&&h])),(F||v.subtitle)&&(i=Yr("div",{class:"item-subtitle"},[F,v.subtitle&&v.subtitle()])),(_||v.text)&&(l=Yr("div",{class:"item-text"},[_,v.text&&v.text()])),(L||z||v.after)&&(L&&(a=Yr("span",[L])),z&&(r=Yr(Jg,{color:V},(function(){return z}))),n=Yr("div",{class:"item-after"},[v["after-start"]&&v["after-start"](),a,r,v.after&&v.after(),v["after-end"]&&v["after-end"]()])),x.value?(s=Yr("div",{class:"item-title-row"},[v["before-title"]&&v["before-title"](),t,v["after-title"]&&v["after-title"](),n]),o=Yr("div",{class:"item-inner"},[v["inner-start"]&&v["inner-start"],d,s,i,l,W||j?null:v.default&&v.default(),v.inner&&v.inner(),h,v["inner-end"]&&v["inner-end"]])):o=Yr("div",{class:"item-inner"},[v["inner-start"]&&v["inner-start"](),v["before-title"]&&v["before-title"](),t,v["after-title"]&&v["after-title"](),n,W||j?null:v.default&&v.default(),v.inner&&v.inner(),v["inner-end"]&&v["inner-end"]()]),Yr($||S?"label":"div",{class:E.value,onClick:w},[k.value&&!1!==H&&C.value&&Yr("div",{class:"sortable-handler"}),v["content-start"]&&v["content-start"](),c,p,u,o,v.content&&v.content(),v["content-end"]&&v["content-end"]()])}({props:e,slots:n,inputElRef:p,onChange:I,onClick:e.link||e.href||e.accordionItem||e.smartSelect?void 0:d,isMediaComputed:N,isSortableComputed:O,isSortableOppositeComputed:R,itemContentClasses:B}),(e.link||e.href||e.accordionItem||e.smartSelect)&&(t=Yr("a",Sb({ref:c,class:M.value},A.value,{onClick:d}),[a]))),e.divider||e.groupTitle)return Yr("li",{ref:u,class:P.value,"data-virtual-list-index":e.virtualListIndex,onClick:d},[e.title,n.default&&n.default()]);if(l.value)return Yr("li",{ref:u,class:P.value,onClick:d,"data-virtual-list-index":e.virtualListIndex},[e.title,n.default&&n.default()]);var r=e.link||e.href||e.smartSelect||e.accordionItem?t:a;return Yr("li",{ref:u,class:P.value,"data-virtual-list-index":e.virtualListIndex},[n["root-start"]&&n["root-start"](),e.swipeout?Yr("div",{class:"swipeout-content"},[r]):r,O.value&&!1!==e.sortable&&!R.value&&Yr("div",{class:"sortable-handler"}),(e.swipeout||e.accordionItem)&&n.default(),n.root&&n.root(),n["root-end"]&&n["root-end"]()])}}};function Tb(){return Tb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Tb.apply(this,arguments)}var Ib={name:"f7-list",props:Tb({inset:Boolean,xsmallInset:Boolean,smallInset:Boolean,mediumInset:Boolean,largeInset:Boolean,xlargeInset:Boolean,mediaList:Boolean,sortable:Boolean,sortableTapHold:Boolean,sortableEnabled:Boolean,sortableMoveElements:{type:Boolean,default:void 0},sortableOpposite:Boolean,accordionList:Boolean,accordionOpposite:Boolean,contactsList:Boolean,simpleList:Boolean,linksList:Boolean,menuList:Boolean,noHairlines:Boolean,noHairlinesBetween:Boolean,noHairlinesMd:Boolean,noHairlinesBetweenMd:Boolean,noHairlinesIos:Boolean,noHairlinesBetweenIos:Boolean,noHairlinesAurora:Boolean,noHairlinesBetweenAurora:Boolean,noChevron:Boolean,chevronCenter:Boolean,tab:Boolean,tabActive:Boolean,form:Boolean,formStoreData:Boolean,inlineLabels:Boolean,virtualList:Boolean,virtualListParams:Object},dg),emits:["submit","sortable:enable","sortable:disable","sortable:sort","sortable:move","virtual:itembeforeinsert","virtual:beforeclear","virtual:itemsbeforeinsert","virtual:itemsafterinsert","tab:hide","tab:show"],setup:function(e,t){var n=t.emit,a=t.slots,r=null,o=Ct(null),s=function(e){n("submit",e)},i=function(e){o.value===e&&n("sortable:enable")},l=function(e){o.value===e&&n("sortable:disable")},u=function(e,t,a){o.value===a&&n("sortable:sort",t)},c=function(t,a){o.value===a&&n(e,"sortable:move",t,a)};rv(o,n),Cn((function(){sg((function(){if(Ym.on("sortableEnable",i),Ym.on("sortableDisable",l),Ym.on("sortableSort",u),Ym.on("sortableMove",c),e.virtualList){var t=e.virtualListParams||{};(t.renderItem||t.renderExternal)&&(t.items&&(t.items=gt(t.items)),r=Ym.virtualList.create(qm({el:o.value,on:{itemBeforeInsert:function(e,t){n("virtual:itembeforeinsert",this,e,t)},beforeClear:function(e){n("virtual:beforeclear",this,e)},itemsBeforeInsert:function(e){n("virtual:itemsbeforeinsert",this,e)},itemsAfterInsert:function(e){n("virtual:itemsafterinsert",this,e)}}},t)))}}))})),$n((function(){Ym&&(Ym.off("sortableEnable",i),Ym.off("sortableDisable",l),Ym.off("sortableSort",u),Ym.off("sortableMove",c),e.virtualList&&r&&(r.destroy&&r.destroy(),r=null))}));var p=Nt((function(){return Xm("list",{inset:e.inset,"xsmall-inset":e.xsmallInset,"small-inset":e.smallInset,"medium-inset":e.mediumInset,"large-inset":e.largeInset,"xlarge-inset":e.xlargeInset,"media-list":e.mediaList,"simple-list":e.simpleList,"links-list":e.linksList,"menu-list":e.menuList,sortable:e.sortable,"sortable-tap-hold":e.sortableTapHold,"sortable-enabled":e.sortableEnabled,"sortable-opposite":e.sortableOpposite,"accordion-list":e.accordionList,"accordion-opposite":e.accordionOpposite,"contacts-list":e.contactsList,"virtual-list":e.virtualList,tab:e.tab,"tab-active":e.tabActive,"no-hairlines":e.noHairlines,"no-hairlines-md":e.noHairlinesMd,"no-hairlines-ios":e.noHairlinesIos,"no-hairlines-aurora":e.noHairlinesAurora,"no-hairlines-between":e.noHairlinesBetween,"no-hairlines-between-md":e.noHairlinesBetweenMd,"no-hairlines-between-ios":e.noHairlinesBetweenIos,"no-hairlines-between-aurora":e.noHairlinesBetweenAurora,"form-store-data":e.formStoreData,"inline-labels":e.inlineLabels,"no-chevron":e.noChevron,"chevron-center":e.chevronCenter},pg(e))})),d=Nt((function(){return e.form?"form":"div"}));return Zt("ListContext",Nt((function(){return{listIsMedia:e.mediaList,listIsSimple:e.simpleList,listIsSortable:e.sortable,listIsSortableOpposite:e.sortableOpposite}}))),function(){var t=a.list,n=a.default,r=[],i=[],l=t||[],u=!1;return n&&n().forEach((function(e){if(void 0!==e){var t=e.type&&e.type.name?e.type.name:e.type;t&&"symbol"==typeof t?(u=!0,l.push(e)):!t||t&&!("li"===t||t.indexOf("f7-list-item")>=0||t.indexOf("f7-list-button")>=0||t.indexOf("f7-list-input")>=0)?u?i.push(e):r.push(e):t&&(u=!0,l.push(e))}})),Yr(d.value,{ref:o,class:p.value,"data-sortable-move-elements":void 0!==e.sortableMoveElements?e.sortableMoveElements.toString():void 0,onSubmit:s},[a["before-list"]&&a["before-list"](),r,l.length>0&&Yr("ul",l),a["after-list"]&&a["after-list"](),i])}}};function Nb(){return Nb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Nb.apply(this,arguments)}var Ob={name:"f7-login-screen-title",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Ya(e.$slots,"default")],2)},props:Nb({},dg),setup:function(e){return{classes:Nt((function(){return Xm("login-screen-title",pg(e))}))}}};function Rb(){return Rb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Rb.apply(this,arguments)}var Ab={name:"f7-login-screen",render:function(e,t){return Ea(),Na("div",{ref:"elRef",class:e.classes},[Ya(e.$slots,"default")],2)},props:Rb({opened:Boolean,animate:{type:Boolean,default:void 0},containerEl:{type:[String,Object],default:void 0}},dg),emits:["loginscreen:open","loginscreen:opened","loginscreen:close","loginscreen:closed","update:opened"],setup:function(e,t){var n=t.emit,a=Ct(null),r=e.opened,o=!1,s=Ct(null),i=function(e){r=!0,o=!1,n("loginscreen:open",e),n("update:opened",!0)},l=function(e){n("loginscreen:opened",e)},u=function(e){r=!1,o=!0,n("loginscreen:close",e)},c=function(e){o=!1,n("loginscreen:closed",e),n("update:opened",!1)};jr((function(){return e.opened}),(function(e){a.value&&(e?a.value.open():a.value.close())})),Cn((function(){s.value&&sg((function(){var t={el:s.value,on:{open:i,opened:l,close:u,closed:c}};void 0!==e.animate&&(t.animate=e.animate),void 0!==e.containerEl&&(t.containerEl=e.containerEl),a.value=Ym.loginScreen.create(t),e.opened&&a.value.open(!1)}))})),$n((function(){a.value&&a.value.destroy(),a.value=null}));var p=Nt((function(){return Xm("login-screen",Dg({isOpened:r,isClosing:o}),pg(e))}));return{elRef:s,classes:p}}};function Mb(){return Mb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Mb.apply(this,arguments)}var Bb={name:"f7-menu-dropdown-item",render:function(e,t){return Ea(),Na("div",Ga({ref:"elRef",class:e.classes},e.attrs,{onClick:t[1]||(t[1]=function(){return e.onClick&&e.onClick.apply(e,arguments)})}),[za(g(e.text)+" ",1),Ya(e.$slots,"default")],16)},props:Mb({text:String,link:Boolean,href:String,target:String,divider:Boolean},dg,fg,vg),emits:["click"],setup:function(e,t){var n=t.emit,a=Ct(null);lv(a,e);var r=Nt((function(){return e.link||e.href||""===e.href})),o=Nt((function(){return r.value?"a":"div"}));return{classes:Nt((function(){return Xm({"menu-dropdown-link":r.value&&!e.divider,"menu-dropdown-item":!r.value&&!e.divider,"menu-dropdown-divider":e.divider},pg(e),gg(e),yg(e),{"menu-close":void 0===e.menuClose})})),attrs:Nt((function(){var t=e.href;return void 0===t&&e.link&&(t="#"),Mb({href:t,target:e.target},mg(e),bg(e))})),tag:o,onClick:function(e){n("click",e)},elRef:a}}};function Pb(){return Pb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Pb.apply(this,arguments)}var Db={name:"f7-menu-dropdown",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Da("div",{class:"menu-dropdown-content",style:{height:e.contentHeight}},[Ya(e.$slots,"default")],4)],2)},props:Pb({contentHeight:String,position:String,left:Boolean,center:Boolean,right:Boolean},dg),setup:function(e){return{classes:Nt((function(){var t=e.position||"left";return e.left&&(t="left"),e.center&&(t="center"),e.right&&(t="right"),Xm("menu-dropdown","menu-dropdown-"+t,pg(e))}))}}};function Fb(){return Fb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fb.apply(this,arguments)}var _b={key:0,class:"menu-item-content"};var Lb={name:"f7-menu-item",render:function(e,t){var n=ha("f7-use-icon");return Ea(),Na(ma(e.tag),Ga({ref:"elRef",class:e.classes},e.attrs,{onClick:e.onClick}),{default:Ut((function(){return[e.text||e.$slots.text||e.icon?(Ea(),Na("div",_b,[za(g(e.text)+" ",1),e.icon?(Ea(),Na(n,{key:0,icon:e.icon},null,8,["icon"])):Wa("",!0),Ya(e.$slots,"text")])):Wa("",!0),Ya(e.$slots,"default")]})),_:3},16,["class","onClick"])},components:{f7UseIcon:xv},props:Fb({text:String,iconOnly:Boolean,href:String,link:Boolean,target:String,dropdown:Boolean,tooltip:String,tooltipTrigger:String},dg,fg,vg,hg),emits:["click","menu:opened","menu:closed"],setup:function(e,t){var n=t.slots,a=t.emit,r=Ct(null);Yg(r,e);var o=function(e){r.value===e&&a("menu:opened",e)},s=function(e){r.value===e&&a("menu:closed",e)};lv(r,e);Cn((function(){sg((function(){Ym.on("menuOpened",o),Ym.on("menuClosed",s)}))})),$n((function(){return Ym.off("menuOpened",o),void Ym.off("menuClosed",o)}));var i=Nt((function(){return iv(e)}));return{tag:Nt((function(){return e.link||e.href||""===e.href?"a":"div"})),classes:Nt((function(){var t;return t=!(!e.iconOnly&&(e.text||n.text)),Xm({"menu-item":!0,"menu-item-dropdown":e.dropdown||""===e.dropdown,"icon-only":t},pg(e),gg(e),yg(e))})),attrs:Nt((function(){var t=e.href;return void 0===t&&e.link&&(t="#"),Fb({href:t,target:e.target},mg(e),bg(e))})),icon:i,onClick:function(e){a("click",e)},elRef:r}}};function zb(){return zb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},zb.apply(this,arguments)}var Vb={class:"menu-inner"};var Wb={name:"f7-menu",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Da("div",Vb,[Ya(e.$slots,"default")])],2)},props:zb({},dg),setup:function(e){return{classes:Nt((function(){return Xm("menu",pg(e))}))}}};function Hb(){return Hb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Hb.apply(this,arguments)}var jb={class:"message-content"},Ub={key:0,class:"message-image"},Gb={key:1,class:"message-text-header"},qb={key:0,class:"message-typing-indicator"},Xb=Da("div",null,null,-1),Yb=Da("div",null,null,-1),Kb=Da("div",null,null,-1),Jb={key:3,class:"message-text-footer"};var Zb={name:"f7-message",render:function(e,t){return Ea(),Na("div",{class:e.classes,onClick:t[7]||(t[7]=function(){return e.onClick&&e.onClick.apply(e,arguments)})},[Ya(e.$slots,"start"),e.hasAvatar?(Ea(),Na("div",{key:0,class:"message-avatar",style:{backgroundImage:e.avatar&&"url("+e.avatar+")"},onClick:t[1]||(t[1]=function(){return e.onAvatarClick&&e.onAvatarClick.apply(e,arguments)})},[Ya(e.$slots,"avatar")],4)):Wa("",!0),Da("div",jb,[Ya(e.$slots,"content-start"),e.hasName?(Ea(),Na("div",{key:0,class:"message-name",onClick:t[2]||(t[2]=function(){return e.onNameClick&&e.onNameClick.apply(e,arguments)})},[za(g(e.name)+" ",1),Ya(e.$slots,"name")])):Wa("",!0),e.hasHeader?(Ea(),Na("div",{key:1,class:"message-header",onClick:t[3]||(t[3]=function(){return e.onHeaderClick&&e.onHeaderClick.apply(e,arguments)})},[za(g(e.header)+" ",1),Ya(e.$slots,"header")])):Wa("",!0),Da("div",{class:"message-bubble",onClick:t[5]||(t[5]=function(){return e.onBubbleClick&&e.onBubbleClick.apply(e,arguments)})},[Ya(e.$slots,"bubble-start"),e.hasImage?(Ea(),Na("div",Ub,[Ya(e.$slots,"image",{},(function(){return[Da("img",{src:e.image},null,8,["src"])]}))])):Wa("",!0),e.hasTextHeader?(Ea(),Na("div",Gb,[za(g(e.textHeader)+" ",1),Ya(e.$slots,"text-header")])):Wa("",!0),e.hasText?(Ea(),Na("div",{key:2,class:"message-text",onClick:t[4]||(t[4]=function(){return e.onTextClick&&e.onTextClick.apply(e,arguments)})},[za(g(e.text)+" ",1),Ya(e.$slots,"text"),e.typing?(Ea(),Na("div",qb,[Xb,Yb,Kb])):Wa("",!0)])):Wa("",!0),e.hasTextFooter?(Ea(),Na("div",Jb,[za(g(e.textFooter)+" ",1),Ya(e.$slots,"text-footer")])):Wa("",!0),Ya(e.$slots,"bubble-end"),Ya(e.$slots,"default")]),e.hasFooter?(Ea(),Na("div",{key:2,class:"message-footer",onClick:t[6]||(t[6]=function(){return e.onFooterClick&&e.onFooterClick.apply(e,arguments)})},[za(g(e.footer)+" ",1),Ya(e.$slots,"footer")])):Wa("",!0),Ya(e.$slots,"content-end")]),Ya(e.$slots,"end")],2)},props:Hb({text:String,name:String,avatar:String,type:{type:String,default:"sent"},image:String,header:String,footer:String,textHeader:String,textFooter:String,first:Boolean,last:Boolean,tail:Boolean,sameName:Boolean,sameHeader:Boolean,sameFooter:Boolean,sameAvatar:Boolean,typing:Boolean},dg),emits:["click","click:name","click:text","click:avatar","click:header","click:footer","click:bubble"],setup:function(e,t){var n=t.emit,a=t.slots;return{classes:Nt((function(){return Xm("message",{"message-sent":"sent"===e.type,"message-received":"received"===e.type,"message-typing":e.typing,"message-first":e.first,"message-last":e.last,"message-tail":e.tail,"message-same-name":e.sameName,"message-same-header":e.sameHeader,"message-same-footer":e.sameFooter,"message-same-avatar":e.sameAvatar},pg(e))})),onClick:function(e){n("click",e)},onNameClick:function(e){n("click:name",e)},onTextClick:function(e){n("click:text",e)},onAvatarClick:function(e){n("click:avatar",e)},onHeaderClick:function(e){n("click:header",e)},onFooterClick:function(e){n("click:footer",e)},onBubbleClick:function(e){n("click:bubble",e)},hasAvatar:Nt((function(){return a.avatar||e.avatar})),hasName:Nt((function(){return a.name||e.name})),hasHeader:Nt((function(){return a.header||e.header})),hasImage:Nt((function(){return a.image||e.image})),hasTextHeader:Nt((function(){return a["text-header"]||e.textHeader})),hasText:Nt((function(){return a.text||e.text||e.typing})),hasTextFooter:Nt((function(){return a["text-footer"]||e.textFooter})),hasFooter:Nt((function(){return a.footer||e.footer}))}}};function Qb(){return Qb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Qb.apply(this,arguments)}var ey={name:"f7-messagebar-attachment",render:function(e,t){return Ea(),Na("div",{class:e.classes,onClick:t[2]||(t[2]=function(){return e.onClick&&e.onClick.apply(e,arguments)})},[e.image?(Ea(),Na("img",{key:0,src:e.image},null,8,["src"])):Wa("",!0),e.deletable?(Ea(),Na("span",{key:1,class:"messagebar-attachment-delete",onClick:t[1]||(t[1]=function(){return e.onDeleteClick&&e.onDeleteClick.apply(e,arguments)})})):Wa("",!0),Ya(e.$slots,"default")],2)},props:Qb({image:String,deletable:{type:Boolean,default:!0}},dg),emits:["attachment:click","attachment:delete"],setup:function(e,t){var n=t.emit;return{classes:Nt((function(){return Xm("messagebar-attachment",pg(e))})),onClick:function(e){n("attachment:click",e)},onDeleteClick:function(e){n("attachment:delete",e)}}}};function ty(){return ty=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ty.apply(this,arguments)}var ny={name:"f7-messagebar-attachments",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Ya(e.$slots,"default")],2)},props:ty({},dg),setup:function(e){return{classes:Nt((function(){return Xm("messagebar-attachments",pg(e))}))}}};function ay(){return ay=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ay.apply(this,arguments)}var ry=Da("i",{class:"icon icon-checkbox"},null,-1);var oy={name:"f7-messagebar-sheet-image",render:function(e,t){return Ea(),Na("label",{class:e.classes,style:e.styles},[Da("input",{type:"checkbox",checked:e.checked,onChange:t[1]||(t[1]=function(){return e.onChange&&e.onChange.apply(e,arguments)})},null,40,["checked"]),ry,Ya(e.$slots,"default")],6)},props:ay({image:String,checked:Boolean},dg),emits:["checked","unchecked","change","update:checked"],setup:function(e,t){var n=t.emit;return{classes:Nt((function(){return Xm("messagebar-sheet-image","checkbox",pg(e))})),styles:Nt((function(){return{backgroundImage:e.image&&"url("+e.image+")"}})),onChange:function(e){e.target.checked?n("checked",e):n("unchecked",e),n("update:checked",e.target.checked),n("change",e)}}}};function sy(){return sy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},sy.apply(this,arguments)}var iy={name:"f7-messagebar-sheet-item",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Ya(e.$slots,"default")],2)},props:sy({},dg),setup:function(e){return{classes:Nt((function(){return Xm("messagebar-sheet-item",pg(e))}))}}};function ly(){return ly=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ly.apply(this,arguments)}var uy={name:"f7-messagebar-sheet",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Ya(e.$slots,"default")],2)},props:ly({},dg),setup:function(e){return{classes:Nt((function(){return Xm("messagebar-sheet",pg(e))}))}}};function cy(){return cy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},cy.apply(this,arguments)}var py={name:"f7-messagebar",props:cy({sheetVisible:Boolean,attachmentsVisible:Boolean,top:Boolean,resizable:{type:Boolean,default:!0},bottomOffset:{type:Number,default:0},topOffset:{type:Number,default:0},maxHeight:Number,resizePage:{type:Boolean,default:!0},sendLink:String,value:[String,Number,Array],disabled:Boolean,readonly:Boolean,textareaId:[Number,String],name:String,placeholder:{type:String,default:"Message"},init:{type:Boolean,default:!0}},dg),emits:["change","input","focus","blur","submit","send","click","messagebar:attachmentdelete","messagebar:attachmentclick","messagebar:resizepage","update:value"],setup:function(e,t){var n=t.emit,a=t.slots,r=Ct(null),o=Ct(null),s=null,i=!1,l=!1,u=function(e){n("change",e)},c=function(e){n("input",e),n("update:value",e.target.value)},p=function(e){n("focus",e)},d=function(e){n("blur",e)},h=function(e){var t=o.value.$el,a=s?function(){s.clear()}:function(){};n("submit",t,a),n("send",t,a),n("click",e)},f=function(e,t,a){n("messagebar:attachmentdelete",e,t,a)},m=function(e,t,a){n("messagebar:attachmentclick",e,t,a)},g=function(e){n("messagebar:resizepage",e)};jr((function(){return e.sheetVisible}),(function(){e.resizable&&s&&(i=!0)})),jr((function(){return e.attachmentsVisible}),(function(){e.resizable&&s&&(l=!0)})),Cn((function(){if(e.init&&r.value){var t=Hm({el:r.value,top:e.top,resizePage:e.resizePage,bottomOffset:e.bottomOffset,topOffset:e.topOffset,maxHeight:e.maxHeight,on:{attachmentDelete:f,attachmentClick:m,resizePage:g}});sg((function(){s=Ym.messagebar.create(t)}))}})),Sn((function(){s&&(i&&(i=!1,s.sheetVisible=e.sheetVisible,s.resizePage()),l&&(l=!1,s.attachmentsVisible=e.attachmentsVisible,s.resizePage()))})),$n((function(){s&&s.destroy&&s.destroy(),s=null}));var v=Nt((function(){return Xm("toolbar","messagebar",{"messagebar-attachments-visible":e.attachmentsVisible,"messagebar-sheet-visible":e.sheetVisible},pg(e))}));return function(){var t={};"value"in e&&(t.value=e.value);var n,s,i=a.default,l=a["before-inner"],f=a["after-inner"],m=a["send-link"],g=a["inner-start"],b=a["inner-end"],y=a["before-area"],w=a["after-area"],x=[];return i&&i().forEach((function(e){if(void 0!==e){var t=e.type&&e.type.name?e.type.name:e.type;t&&(t.indexOf("messagebar-attachments")>=0||"F7MessagebarAttachments"===t||"f7-messagebar-attachments"===t)?n=e:t&&(t.indexOf("messagebar-sheet")>=0||"F7MessagebarSheet"===t||"f7-messagebar-sheet"===t)?s=e:x.push(e)}})),Yr("div",{class:v.value,ref:r},[l&&l(),Yr("div",{class:"toolbar-inner"},[g&&g(),Yr("div",{class:"messagebar-area"},[y&&y(),n,Yr(ub,cy({id:e.textareaId,ref:o,type:"textarea",wrap:!1,placeholder:e.placeholder,disabled:e.disabled,name:e.name,readonly:e.readonly,resizable:e.resizable,onInput:c,onChange:u,onFocus:p,onBlur:d},t)),w&&w()]),(e.sendLink&&e.sendLink.length>0||m)&&Yr(db,{onClick:h},[m?m():e.sendLink]),b&&b(),x]),f&&f(),s])}}};function dy(){return dy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},dy.apply(this,arguments)}var hy={name:"f7-messages-title",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Ya(e.$slots,"default")],2)},props:dy({},dg),setup:function(e){return{classes:Nt((function(){return Xm("messages-title",pg(e))}))}}};function fy(){return fy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},fy.apply(this,arguments)}var my={name:"f7-messages",render:function(e,t){return Ea(),Na("div",{ref:"elRef",class:e.classes},[Ya(e.$slots,"default")],2)},props:fy({autoLayout:{type:Boolean,default:!1},messages:{type:Array,default:function(){return[]}},newMessagesFirst:{type:Boolean,default:!1},scrollMessages:{type:Boolean,default:!0},scrollMessagesOnEdge:{type:Boolean,default:!0},typing:{type:Boolean,default:!1},firstMessageRule:Function,lastMessageRule:Function,tailMessageRule:Function,sameNameMessageRule:Function,sameHeaderMessageRule:Function,sameFooterMessageRule:Function,sameAvatarMessageRule:Function,customClassMessageRule:Function,renderMessage:Function,init:{type:Boolean,default:!0}},dg),setup:function(e,t){var n=t.slots,a=null,r=null,o=Ct(null);Cn((function(){e.init&&sg((function(){(a=Ym.messages.create(Hm({el:o.value,autoLayout:e.autoLayout,messages:e.messages,newMessagesFirst:e.newMessagesFirst,scrollMessages:e.scrollMessages,scrollMessagesOnEdge:e.scrollMessagesOnEdge,firstMessageRule:e.firstMessageRule,lastMessageRule:e.lastMessageRule,tailMessageRule:e.tailMessageRule,sameNameMessageRule:e.sameNameMessageRule,sameHeaderMessageRule:e.sameHeaderMessageRule,sameFooterMessageRule:e.sameFooterMessageRule,sameAvatarMessageRule:e.sameAvatarMessageRule,customClassMessageRule:e.customClassMessageRule,renderMessage:e.renderMessage})))&&e.typing&&a.showTyping()}))})),En((function(){if(e.init&&o.value){var t=o.value.children;if(t){r=t.length;for(var s=0;s<t.length;s+=1)t[s].classList.add("message-appeared");var i=function(e,t){void 0===t&&(t="default");var n=[];return e[t]&&function e(t){Array.isArray(t)&&t.forEach((function(t){t.type===ba&&t.children?e(t.children):t.type&&t.type!==wa&&n.push(t)}))}(e[t]()),n}(n);a&&e.scrollMessages&&r!==i&&a.setScrollData()}}})),Sn((function(){if(e.init&&o.value){var t=o.value.children;if(t){for(var n=t.length,s=0;s<t.length;s+=1)t[s].classList.contains("message-appeared")||t[s].classList.add("message-appear-from-bottom");a&&a.layout&&e.autoLayout&&a.layout(),n!==r&&a&&a.scroll&&a.scrollData&&e.scrollMessages&&a.scrollWithEdgeCheck(!0)}}})),$n((function(){a&&a.destroy&&a.destroy(),a=null})),jr((function(){return e.typing}),(function(e){a&&(e?a.showTyping():a.hideTyping())}));var s=Nt((function(){return Xm("messages",pg(e))}));return{elRef:o,classes:s}}};function gy(){return gy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},gy.apply(this,arguments)}var vy={name:"f7-nav-left",render:function(e,t){var n=ha("f7-link");return Ea(),Na("div",{class:e.classes},[e.backLink?(Ea(),Na(n,{key:0,href:e.backLinkUrl||"#",back:"",icon:"icon-back",force:e.backLinkForce||void 0,class:e.text?void 0:"icon-only",text:e.text,onClick:e.onBackClick},null,8,["href","force","class","text","onClick"])):Wa("",!0),Ya(e.$slots,"default")],2)},components:{f7Link:db},props:gy({backLink:[Boolean,String],backLinkUrl:String,backLinkForce:Boolean,backLinkShowText:{type:Boolean,default:void 0},sliding:Boolean},dg),emits:["back:click","click:back"],setup:function(e,t){var n=t.emit,a=uv(),r=Nt((function(){var t=e.backLinkShowText;if(void 0===t&&(t=!a.value.md),e.backLink)return!0!==e.backLink&&t?e.backLink:void 0}));return{classes:Nt((function(){return Xm("left",{sliding:e.sliding},pg(e))})),onBackClick:function(e){n("back:click",e),n("click:back",e)},text:r}}};function by(){return by=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},by.apply(this,arguments)}var yy={name:"f7-nav-right",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Ya(e.$slots,"default")],2)},props:by({sliding:Boolean},dg),setup:function(e){return{classes:Nt((function(){return Xm("right",{sliding:e.sliding},pg(e))}))}}};function wy(){return wy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},wy.apply(this,arguments)}var xy={class:"title-large-text"};var ky={name:"f7-nav-title-large",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Da("div",xy,[Ya(e.$slots,"default")])],2)},props:wy({},dg),setup:function(e){return{classes:Nt((function(){return Xm("title-large",pg(e))}))}}};function Cy(){return Cy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Cy.apply(this,arguments)}var Ey={key:0,class:"subtitle"};var Sy={name:"f7-nav-title",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Ya(e.$slots,"default"),za(" "+g(e.title)+" ",1),e.subtitle?(Ea(),Na("span",Ey,g(e.subtitle),1)):Wa("",!0)],2)},props:Cy({title:String,subtitle:String,sliding:Boolean},dg),setup:function(e){return{classes:Nt((function(){return Xm("title",{sliding:e.sliding},pg(e))}))}}};function $y(){return $y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},$y.apply(this,arguments)}var Ty=Da("div",{class:"navbar-bg"},null,-1),Iy={key:3,className:"title-large"},Ny={className:"title-large-text"};var Oy={name:"f7-navbar",render:function(e,t){var n=ha("f7-nav-left"),a=ha("f7-nav-title"),r=ha("f7-nav-right");return Ea(),Na("div",{ref:"elRef",class:e.classes},[Ty,Ya(e.$slots,"before-inner"),Da("div",{class:e.innerClasses},[e.hasLeft?(Ea(),Na(n,{key:0,"back-link":e.backLink,"back-link-url":e.backLinkUrl,"back-link-force":e.backLinkForce,"back-link-show-text":e.backLinkShowText,"onBack:click":e.onBackClick},{default:Ut((function(){return[Ya(e.$slots,"nav-left"),Ya(e.$slots,"left")]})),_:3},8,["back-link","back-link-url","back-link-force","back-link-show-text","onBack:click"])):Wa("",!0),e.hasTitle?(Ea(),Na(a,{key:1,title:e.title,subtitle:e.subtitle},{default:Ut((function(){return[Ya(e.$slots,"title")]})),_:3},8,["title","subtitle"])):Wa("",!0),e.hasRight?(Ea(),Na(r,{key:2},{default:Ut((function(){return[Ya(e.$slots,"nav-right"),Ya(e.$slots,"right")]})),_:3})):Wa("",!0),e.hasLargeTitle?(Ea(),Na("div",Iy,[Da("div",Ny,[za(g(e.largeTitle)+" ",1),Ya(e.$slots,"title-large")])])):Wa("",!0),Ya(e.$slots,"default")],2),Ya(e.$slots,"after-inner")],2)},components:{f7NavLeft:vy,f7NavTitle:Sy,f7NavRight:yy},props:$y({backLink:[Boolean,String],backLinkUrl:String,backLinkForce:Boolean,backLinkShowText:{type:Boolean,default:void 0},sliding:{type:Boolean,default:!0},title:String,subtitle:String,hidden:Boolean,noShadow:Boolean,noHairline:Boolean,innerClass:String,innerClassName:String,large:Boolean,largeTransparent:Boolean,transparent:Boolean,titleLarge:String},dg),emits:["navbar:hide","navbar:show","navbar:expand","navbar:collapse","navbar:transparentshow","navbar:transparenthide","click:back","back:click"],setup:function(e,t){var n=t.emit,a=t.slots,r="",o=!1,s=null,i=!1,l=!1,u=!1,c=Ct(null),p=uv(),d=function(e){c.value===e&&n("navbar:hide")},h=function(e){c.value===e&&n("navbar:show")},f=function(e){c.value===e&&(o=!1,n("navbar:expand"))},m=function(e){c.value===e&&(o=!0,n("navbar:collapse"))},g=function(e){c.value===e&&(u=!0,n("navbar:transparentshow"))},v=function(e){c.value===e&&(u=!1,n("navbar:transparenthide"))},b=function(e,t){c.value===e&&(r=t?"navbar-"+t:"")},y=function(e,t){c.value===e&&(s=t.role,i=t.detailRoot)},w=function(e){c.value===e&&(l=!0)},x=function(e){c.value===e&&(l=!1)};Cn((function(){c.value&&sg((function(){Ym.navbar.size(c.value),Ym.on("navbarShow",h),Ym.on("navbarHide",d),Ym.on("navbarCollapse",m),Ym.on("navbarExpand",f),Ym.on("navbarPosition",b),Ym.on("navbarRole",y),Ym.on("navbarMasterStack",w),Ym.on("navbarMasterUnstack",x),Ym.on("navbarTransparentShow",g),Ym.on("navbarTransparentHide",v)}))})),$n((function(){Ym&&(Ym.off("navbarShow",h),Ym.off("navbarHide",d),Ym.off("navbarCollapse",m),Ym.off("navbarExpand",f),Ym.off("navbarPosition",b),Ym.off("navbarRole",y),Ym.off("navbarMasterStack",w),Ym.off("navbarMasterUnstack",x),Ym.off("navbarTransparentShow",g),Ym.off("navbarTransparentHide",v))}));var k=Nt((function(){return p.value&&p.value.ios&&Ym&&!Ym.params.navbar.iosCenterTitle})),C=Nt((function(){return p.value&&p.value.md&&Ym&&Ym.params.navbar.mdCenterTitle||p.value&&p.value.aurora&&Ym&&Ym.params.navbar.auroraCenterTitle})),E=Nt((function(){return e.large||e.largeTransparent})),S=Nt((function(){return e.transparent||E.value&&e.largeTransparent})),$=Nt((function(){return S.value&&u})),T=Nt((function(){return Xm("navbar",r,{"navbar-hidden":e.hidden,"navbar-large":E.value,"navbar-large-collapsed":E.value&&o,"navbar-transparent":S.value,"navbar-transparent-visible":$.value,"navbar-master":"master"===s,"navbar-master-detail":"detail"===s,"navbar-master-detail-root":!0===i,"navbar-master-stacked":!0===l,"no-shadow":e.noShadow,"no-hairline":e.noHairline},pg(e))})),I=Nt((function(){var t=e.titleLarge;return!t&&e.large&&e.title&&(t=e.title),t})),N=Nt((function(){return e.backLink||a["nav-left"]||a.left})),O=Nt((function(){return e.title||e.subtitle||a.title})),R=Nt((function(){return a["nav-right"]||a.right})),A=Nt((function(){return I.value||a["title-large"]})),M=Nt((function(){return Xm("navbar-inner",e.innerClass,e.innerClassName,{sliding:e.sliding,"navbar-inner-left-title":k.value,"navbar-inner-centered-title":C.value})}));return{elRef:c,classes:T,innerClasses:M,hide:function(e){Ym&&Ym.navbar.hide(c.value,e)},show:function(e){Ym&&Ym.navbar.show(c.value,e)},size:function(){Ym&&Ym.navbar.size(c.value)},largeTitle:I,hasLeft:N,hasTitle:O,hasRight:R,hasLargeTitle:A,onBackClick:function(e){n("back:click",e),n("click:back",e)}}}};function Ry(){return Ry=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ry.apply(this,arguments)}var Ay={key:0,class:"ptr-preloader"},My=Da("div",{class:"ptr-arrow"},null,-1),By={key:3,class:"ptr-preloader"},Py=Da("div",{class:"ptr-arrow"},null,-1);var Dy={name:"f7-page-content",render:function(e,t){var n=ha("f7-preloader");return Ea(),Na("div",{ref:"elRef",class:e.classes,"data-ptr-distance":e.ptrDistance||void 0,"data-ptr-mousewheel":e.ptrMousewheel||void 0,"data-infinite-distance":e.infiniteDistance||void 0},[e.ptr&&e.ptrPreloader&&!e.ptrBottom?(Ea(),Na("div",Ay,[Da(n),My])):Wa("",!0),e.infinite&&e.infinitePreloader&&e.infiniteTop?(Ea(),Na(n,{key:1,class:"infinite-scroll-preloader"})):Wa("",!0),Ya(e.$slots,"default"),e.infinite&&e.infinitePreloader&&!e.infiniteTop?(Ea(),Na(n,{key:2,class:"infinite-scroll-preloader"})):Wa("",!0),e.ptr&&e.ptrPreloader&&e.ptrBottom?(Ea(),Na("div",By,[Da(n),Py])):Wa("",!0)],10,["data-ptr-distance","data-ptr-mousewheel","data-infinite-distance"])},components:{f7Preloader:bv},props:Ry({tab:Boolean,tabActive:Boolean,ptr:Boolean,ptrDistance:Number,ptrPreloader:{type:Boolean,default:!0},ptrBottom:Boolean,ptrMousewheel:Boolean,infinite:Boolean,infiniteTop:Boolean,infiniteDistance:Number,infinitePreloader:{type:Boolean,default:!0},hideBarsOnScroll:Boolean,hideNavbarOnScroll:Boolean,hideToolbarOnScroll:Boolean,messagesContent:Boolean,loginScreen:Boolean},dg),emits:["ptr:pullstart","ptr:pullmove","ptr:pullend","ptr:refresh","ptr:done","infinite","ptrPullStart","ptrPullMove","ptrPullEnd","ptrRefresh","ptrDone","tab:hide","tab:show"],setup:function(e,t){var n=t.emit,a=Ct(null),r=function(e){a.value===e&&(n("ptr:pullstart"),n("ptrPullStart"))},o=function(e){a.value===e&&(n("ptr:pullmove"),n("ptrPullMove"))},s=function(e){a.value===e&&(n("ptr:pullend"),n("ptrPullEnd"))},i=function(e,t){a.value===e&&(n("ptr:refresh",t),n("ptrRefresh",t))},l=function(e){a.value===e&&(n("ptr:done"),n("ptrDone"))},u=function(e){a.value===e&&n("infinite")};rv(a,n),Cn((function(){sg((function(){e.ptr&&(Ym.on("ptrPullStart",r),Ym.on("ptrPullMove",o),Ym.on("ptrPullEnd",s),Ym.on("ptrRefresh",i),Ym.on("ptrDone",l)),e.infinite&&Ym.on("infinite",u)}))})),$n((function(){Ym&&(Ym.off("ptrPullStart",r),Ym.off("ptrPullMove",o),Ym.off("ptrPullEnd",s),Ym.off("ptrRefresh",i),Ym.off("ptrDone",l),Ym.off("infinite",u))}));var c=Nt((function(){return Xm("page-content",{tab:e.tab,"tab-active":e.tabActive,"ptr-content":e.ptr,"ptr-bottom":e.ptrBottom,"infinite-scroll-content":e.infinite,"infinite-scroll-top":e.infiniteTop,"hide-bars-on-scroll":e.hideBarsOnScroll,"hide-navbar-on-scroll":e.hideNavbarOnScroll,"hide-toolbar-on-scroll":e.hideToolbarOnScroll,"messages-content":e.messagesContent,"login-screen-content":e.loginScreen},pg(e))}));return{elRef:a,classes:c}}};function Fy(){return Fy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fy.apply(this,arguments)}var _y={name:"f7-page",props:Fy({name:String,stacked:Boolean,withSubnavbar:{type:Boolean,default:void 0},subnavbar:{type:Boolean,default:void 0},withNavbarLarge:{type:Boolean,default:void 0},navbarLarge:{type:Boolean,default:void 0},noNavbar:Boolean,noToolbar:Boolean,tabs:Boolean,pageContent:{type:Boolean,default:!0},noSwipeback:Boolean,ptr:Boolean,ptrDistance:Number,ptrPreloader:{type:Boolean,default:!0},ptrBottom:Boolean,ptrMousewheel:Boolean,infinite:Boolean,infiniteTop:Boolean,infiniteDistance:Number,infinitePreloader:{type:Boolean,default:!0},hideBarsOnScroll:Boolean,hideNavbarOnScroll:Boolean,hideToolbarOnScroll:Boolean,messagesContent:Boolean,loginScreen:Boolean},dg),emits:["page:mounted","page:init","page:reinit","page:beforein","page:beforeout","page:afterout","page:afterin","page:beforeremove","page:beforeunmount","page:tabshow","page:tabhide","ptr:pullstart","ptr:pullmove","ptr:pullend","ptr:refresh","ptr:done","infinite"],setup:function(e,t){var n=t.emit,a=t.slots,r=!1,o=!1,s=!1,i=!1,l="",u=!1,c=null,p=!1,d=!1,h=Ct(null),f=function(e){h.value===e.el&&n("page:mounted",e)},m=function(t){h.value===t.el&&(void 0===e.withSubnavbar&&void 0===e.subnavbar&&(t.$navbarEl&&t.$navbarEl.length&&t.$navbarEl.find(".subnavbar").length||t.$el.children(".navbar").find(".subnavbar").length)&&(r=!0),void 0===e.withNavbarLarge&&void 0===e.navbarLarge&&t.$navbarEl&&t.$navbarEl.hasClass("navbar-large")&&(o=!0),n("page:init",t))},g=function(e){h.value===e.el&&n("page:reinit",e)},v=function(e){h.value===e.el&&(e.swipeBack||("next"===e.from&&(l="page-next"),"previous"===e.from&&(l="page-previous")),n("page:beforein",e))},b=function(e){h.value===e.el&&n("page:beforeout",e)},y=function(e){h.value===e.el&&("next"===e.to&&(l="page-next"),"previous"===e.to&&(l="page-previous"),n("page:afterout",e))},w=function(e){h.value===e.el&&(l="page-current",n("page:afterin",e))},x=function(e){h.value===e.el&&n("page:beforeremove",e)},k=function(e){h.value===e.el&&n("page:beforeunmount",e)},C=function(e){h.value===e&&(u=!1)},E=function(e){h.value===e&&(u=!0)},S=function(e,t){h.value===e&&(l="page-"+t)},$=function(e,t){h.value===e&&(c=t.role,p=t.detailRoot)},T=function(e){h.value===e&&(d=!0)},I=function(e){h.value===e&&(d=!1)},N=function(e){h.value===e&&(s=!0)},O=function(e){h.value===e&&(s=!1)},R=function(e,t){h.value===t&&(i=!0)},A=function(e,t){h.value===t&&(i=!1)},M=function(e){h.value===e&&n("page:tabshow")},B=function(e){h.value===e&&n("page:tabhide")},P=function(){n("ptr:pullstart")},D=function(){n("ptr:pullmove")},F=function(){n("ptr:pullend")},_=function(e){n("ptr:refresh",e)},L=function(){n("ptr:done")},z=function(){n("infinite")};Cn((function(){sg((function(){Ym.on("pageMounted",f),Ym.on("pageInit",m),Ym.on("pageReinit",g),Ym.on("pageBeforeIn",v),Ym.on("pageBeforeOut",b),Ym.on("pageAfterOut",y),Ym.on("pageAfterIn",w),Ym.on("pageBeforeRemove",x),Ym.on("pageBeforeUnmount",k),Ym.on("pageStack",C),Ym.on("pageUnstack",E),Ym.on("pagePosition",S),Ym.on("pageRole",$),Ym.on("pageMasterStack",T),Ym.on("pageMasterUnstack",I),Ym.on("pageNavbarLargeCollapsed",N),Ym.on("pageNavbarLargeExpanded",O),Ym.on("cardOpened",R),Ym.on("cardClose",A),Ym.on("pageTabShow",M),Ym.on("pageTabHide",B)}))})),$n((function(){Ym&&(Ym.off("pageMounted",f),Ym.off("pageInit",m),Ym.off("pageReinit",g),Ym.off("pageBeforeIn",v),Ym.off("pageBeforeOut",b),Ym.off("pageAfterOut",y),Ym.off("pageAfterIn",w),Ym.off("pageBeforeRemove",x),Ym.off("pageBeforeUnmount",k),Ym.off("pageStack",C),Ym.off("pageUnstack",E),Ym.off("pagePosition",S),Ym.off("pageRole",$),Ym.off("pageMasterStack",T),Ym.off("pageMasterUnstack",I),Ym.off("pageNavbarLargeCollapsed",N),Ym.off("pageNavbarLargeExpanded",O),Ym.off("cardOpened",R),Ym.off("cardClose",A),Ym.off("pageTabShow",M),Ym.off("pageTabHide",B))}));var V=Nt((function(){return Xm("page",l,{stacked:e.stacked&&!u,tabs:e.tabs,"page-with-subnavbar":e.subnavbar||e.withSubnavbar,"page-with-navbar-large":e.navbarLarge||e.withNavbarLarge,"no-navbar":e.noNavbar,"no-toolbar":e.noToolbar,"no-swipeback":e.noSwipeback,"page-master":"master"===c,"page-master-detail":"detail"===c,"page-master-detail-root":!0===p,"page-master-stacked":!0===d,"page-with-navbar-large-collapsed":!0===s,"page-with-card-opened":!0===i,"login-screen-page":e.loginScreen},pg(e))})),W="navbar toolbar tabbar subnavbar searchbar messagebar fab list-index panel".split(" ").map((function(e){return"f7-"+e}));return function(){var t=[],n=[],s=a.static,i=a.fixed,l=a.default,u=!1,c=!1,p=e.messagesContent,d=l&&l();d&&d.forEach((function(a){if(void 0!==a){var r=a.type&&a.type.name?a.type.name:a.type,o=!1;r?("f7-subnavbar"===r&&(u=!0),"f7-navbar"===r&&a.props&&(a.props.large||""===a.props.large)&&(c=!0),void 0===p&&"f7-messages"===r&&(p=!0),W.indexOf(r)>=0&&(o=!0),e.pageContent&&(o?t.push(a):n.push(a))):(e.pageContent||""===e.pageContent)&&n.push(a)}}));var f=V.value;return(u||r)&&void 0===e.subnavbar&&void 0===e.withSubnavbar&&f.indexOf("page-with-subnavbar")<0&&(f+=" page-with-subnavbar"),(c||o)&&void 0===e.navbarLarge&&void 0===e.withNavbarLarge&&f.indexOf("page-with-navbar-large")<0&&(f+=" page-with-navbar-large"),e.pageContent?Yr("div",{class:f,ref:h,"data-name":e.name},[t,i&&i(),Yr(Dy,{ptr:e.ptr,ptrDistance:e.ptrDistance,ptrPreloader:e.ptrPreloader,ptrBottom:e.ptrBottom,ptrMousewheel:e.ptrMousewheel,infinite:e.infinite,infiniteTop:e.infiniteTop,infiniteDistance:e.infiniteDistance,infinitePreloader:e.infinitePreloader,hideBarsOnScroll:e.hideBarsOnScroll,hideNavbarOnScroll:e.hideNavbarOnScroll,hideToolbarOnScroll:e.hideToolbarOnScroll,messagesContent:e.messagesContent||p,loginScreen:e.loginScreen,onPtrPullStart:P,onPtrPullMove:D,onPtrPullEnd:F,onPtrRefresh:_,onPtrDone:L,onInfinite:z},(function(){return[s&&s(),n]}))]):Yr("div",{class:f,ref:h,"data-name":e.name},[i&&i(),s&&s(),l&&d])}}};function Ly(){return Ly=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ly.apply(this,arguments)}var zy={key:0,class:"panel-resize-handler"};var Vy={name:"f7-panel",render:function(e,t){return Ea(),Na("div",{ref:"elRef",class:e.classes},[Ya(e.$slots,"default"),e.resizable?(Ea(),Na("div",zy)):Wa("",!0)],2)},props:Ly({side:String,effect:String,cover:Boolean,reveal:Boolean,push:Boolean,left:Boolean,right:Boolean,opened:Boolean,resizable:Boolean,backdrop:{type:Boolean,default:!0},backdropEl:{type:String,default:void 0},containerEl:{type:String,default:void 0},visibleBreakpoint:{type:Number,default:void 0},collapsedBreakpoint:{type:Number,default:void 0},swipe:Boolean,swipeNoFollow:Boolean,swipeOnlyClose:Boolean,swipeActiveArea:{type:Number,default:0},swipeThreshold:{type:Number,default:0}},dg),emits:["panel:open","panel:opened","panel:close","panel:closed","click","panel:backdropclick","panel:swipe","panel:swipeopen","panel:breakpoint","panel:collapsedbreakpoint","panel:resize","update:opened"],setup:function(e,t){var n=t.emit,a=null,r=Ct(null),o=!1,s=!1,i=!1,l=!1,u=function(e){o=!0,s=!1,n("panel:open",e),n("update:opened",!0)},c=function(e){n("panel:opened",e)},p=function(e){o=!1,s=!0,n("panel:close",e)},d=function(e){s=!1,n("panel:closed",e),n("update:opened",!1)},h=function(e){n("click",e),n("panel:backdropclick",e)},f=function(e){n("panel:swipe",e)},m=function(e){n("panel:swipeopen",e)},g=function(e){l=!0,i=!1,n("panel:breakpoint",e)},v=function(e){l=!1,i=!0,n("panel:collapsedbreakpoint",e)},b=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];n.apply(void 0,["panel:resize"].concat(t))};jr((function(){return e.resizable}),(function(e){a&&(e?a.enableResizable():a.disableResizable())})),jr((function(){return e.opened}),(function(e){a&&(e?a.open():a.close())})),Cn((function(){sg((function(){var t=Ym.$;if(t){0===t(".panel-backdrop").length&&t('<div class="panel-backdrop"></div>').insertBefore(r.value);var n=Hm({el:r.value,resizable:e.resizable,backdrop:e.backdrop,backdropEl:e.backdropEl,containerEl:e.containerEl,visibleBreakpoint:e.visibleBreakpoint,collapsedBreakpoint:e.collapsedBreakpoint,swipe:e.swipe,swipeNoFollow:e.swipeNoFollow,swipeOnlyClose:e.swipeOnlyClose,swipeActiveArea:e.swipeActiveArea,swipeThreshold:e.swipeThreshold,on:{open:u,opened:c,close:p,closed:d,backdropClick:h,swipe:f,swipeOpen:m,collapsedBreakpoint:v,breakpoint:g,resize:b}});a=Ym.panel.create(n),e.opened&&a.open(!1)}}))})),$n((function(){a&&a.destroy&&a.destroy(),a=null}));var y=Nt((function(){var t,n=e.side||(e.left?"left":"right"),a=e.effect||(e.reveal?"reveal":e.push?"push":"cover");return Xm("panel",((t={"panel-in":o&&!s&&!l,"panel-in-breakpoint":l,"panel-in-collapsed":i,"panel-resizable":e.resizable})["panel-"+n]=n,t["panel-"+a]=a,t),pg(e))}));return{elRef:r,classes:y}}};function Wy(){return Wy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Wy.apply(this,arguments)}var Hy={name:"f7-photo-browser",props:{init:{type:Boolean,default:!0},params:Object,photos:Array,exposition:{type:Boolean,default:!0},expositionHideCaptions:{type:Boolean,default:!1},type:{type:String},navbar:{type:Boolean,default:!0},toolbar:{type:Boolean,default:!0},theme:{type:String},captionsTheme:{type:String},iconsColor:{type:String},swipeToClose:{type:Boolean,default:!0},pageBackLinkText:{type:String,default:void 0},popupCloseLinkText:{type:String,default:void 0},navbarOfText:{type:String,default:void 0},navbarShowCount:{type:Boolean,default:void 0},swiper:{type:Object},url:{type:String},routableModals:{type:Boolean,default:!1},virtualSlides:{type:Boolean,default:!0},view:[String,Object],renderNavbar:Function,renderToolbar:Function,renderCaption:Function,renderObject:Function,renderLazyPhoto:Function,renderPhoto:Function,renderPage:Function,renderPopup:Function,renderStandalone:Function},emits:["photobrowser:open","photobrowser:close","photobrowser:opened","photobrowser:closed","photobrowser:swipetoclose"],setup:function(e,t){var n=t.emit,a=null;return jr((function(){return e.photos}),(function(e){var t=a;t&&(t.params.photos=e,t.opened&&t.swiper&&t.swiper.update())})),Cn((function(){e.init&&sg((function(){var t;void 0!==e.params?t=e.params:delete(t=Wy({},e)).params,Object.keys(t).forEach((function(e){void 0!==t[e]&&""!==t[e]||delete t[e]})),t=qm({},t,{on:{open:function(){n("photobrowser:open")},close:function(){n("photobrowser:close")},opened:function(){n("photobrowser:opened")},closed:function(){n("photobrowser:closed")},swipeToClose:function(){n("photobrowser:swipetoclose")}}}),a=Ym.photoBrowser.create(t)}))})),$n((function(){a&&a.destroy&&a.destroy(),a=null})),{open:function(e){return a.open(e)},close:function(){return a.close()},expositionToggle:function(){return a.expositionToggle()},expositionEnable:function(){return a.expositionEnable()},expositionDisable:function(){return a.expositionDisable()}}},render:function(){return null}};var jy={name:"f7-pie-chart",render:function(e,t){return Ea(),Na("div",{ref:"elRef",class:e.classes},[(Ea(),Na("svg",{xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,viewBox:"-"+e.size/3+" -"+e.size/3+" "+2*e.size/3+" "+2*e.size/3,style:{transform:"rotate(-90deg)"}},[(Ea(!0),Na(ba,null,Xa(e.paths,(function(n,a){return Ea(),Na("path",{key:n.label||a,d:n.points,fill:n.color,"data-index":a,class:e.classNames({"pie-chart-hidden":null!==e.currentIndex&&e.currentIndex!==a}),onClick:function(t){return e.setCurrentIndex(a)},onMouseenter:function(t){return e.setCurrentIndex(a)},onMouseleave:t[1]||(t[1]=function(t){return e.setCurrentIndex(null)})},null,42,["d","fill","data-index","onClick","onMouseenter"])})),128))],12,["width","height","viewBox"])),Ya(e.$slots,"default")],2)},props:{size:{type:Number,default:320},tooltip:Boolean,datasets:{type:Array,default:function(){return[]}},formatTooltip:Function},emits:["select"],setup:function(e,t){var n=t.emit,a=Ct(null),r=null,o=Ct(null),s=Nt((function(){var t=0;return e.datasets.map((function(e){return e.value||0})).forEach((function(e){t+=e})),t})),i=Nt((function(){var t=[],n=0;function a(t){return[Math.cos(2*Math.PI*t)*(e.size/3),Math.sin(2*Math.PI*t)*(e.size/3)]}return e.datasets.forEach((function(r){var o=r.value,i=r.label,l=r.color,u=o/s.value,c=a(n),p=c[0],d=c[1],h=a(n+=u),f=h[0],m=h[1],g=u>.5?1:0,v=["M "+p+" "+d,"A "+e.size/3+" "+e.size/3+" 0 "+g+" 1 "+f+" "+m,"L 0 0"].join(" ");t.push({points:v,label:i,color:l})})),t})),l=function(){if(null===o.value)return"";var t=e.datasets[o.value],n=t.value,a=t.label,r=t.color,i=n/s.value*100,l=function(e){return parseInt(e,10)===e?e:Math.round(100*e)/100};return e.formatTooltip?e.formatTooltip({index:o.value,value:n,label:a,color:r,percentage:i}):'\n      <div class="pie-chart-tooltip-label">\n        <span class="pie-chart-tooltip-color" style="background-color: '+r+';"></span> '+((a?a+": ":"")+l(n)+" ("+l(i)+"%)")+"\n      </div>\n    "};jr((function(){return o.value}),(function(){n("select",o.value,e.datasets[o.value]),function(){var t=o.value;(null!==t||r)&&e.tooltip&&a.value&&Ym&&(null===t||r?r&&(null!==t?(r.setText(l()),r.setTargetEl(a.value.querySelector('path[data-index="'+t+'"]')),r.show()):r.hide()):(r=Ym.tooltip.create({trigger:"manual",containerEl:a.value,targetEl:a.value.querySelector('path[data-index="'+t+'"]'),text:l(),cssClass:"pie-chart-tooltip"})).show())}()})),$n((function(){r&&r.destroy&&r.destroy(),r=null}));var u=Nt((function(){return Xm("pie-chart")}));return{elRef:a,currentIndex:o,classes:u,paths:i,classNames:Xm,setCurrentIndex:function(e){o.value=e}}}};function Uy(){return Uy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Uy.apply(this,arguments)}var Gy=Da("div",{class:"popover-angle"},null,-1),qy={class:"popover-inner"};var Xy={name:"f7-popover",render:function(e,t){return Ea(),Na("div",{ref:"elRef",class:e.classes},[Gy,Da("div",qy,[Ya(e.$slots,"default")])],2)},props:Uy({opened:Boolean,animate:{type:Boolean,default:void 0},targetEl:{type:[String,Object],default:void 0},backdrop:{type:Boolean,default:void 0},backdropEl:{type:[String,Object],default:void 0},closeByBackdropClick:{type:Boolean,default:void 0},closeByOutsideClick:{type:Boolean,default:void 0},closeOnEscape:{type:Boolean,default:void 0},containerEl:{type:[String,Object],default:void 0}},dg),emits:["popover:open","popover:opened","popover:close","popover:closed","update:opened"],setup:function(e,t){var n=t.emit,a=Ct(null),r=e.opened,o=!1,s=Ct(null),i=function(e){r=!0,o=!1,n("popover:open",e),n("update:opened",!0)},l=function(e){n("popover:opened",e)},u=function(e){r=!1,o=!0,n("popover:close",e)},c=function(e){o=!1,n("popover:closed",e),n("update:opened",!1)};jr((function(){return e.opened}),(function(e){a.value&&(e?a.value.open():a.value.close())})),Cn((function(){if(s.value){var t={el:s.value,on:{open:i,opened:l,close:u,closed:c}},n=e.targetEl,r=e.closeByBackdropClick,o=e.closeByOutsideClick,p=e.closeOnEscape,d=e.backdrop,h=e.backdropEl,f=e.containerEl;void 0!==n&&(t.targetEl=n),void 0!==r&&(t.closeByBackdropClick=r),void 0!==o&&(t.closeByOutsideClick=o),void 0!==p&&(t.closeOnEscape=p),void 0!==d&&(t.backdrop=d),void 0!==h&&(t.backdropEl=h),void 0!==f&&(t.containerEl=f),sg((function(){a.value=Ym.popover.create(t),e.opened&&a.value.open(n,!1)}))}})),$n((function(){a.value&&a.value.destroy(),a.value=null}));var p=Nt((function(){return Xm("popover",Dg({isOpened:r,isClosing:o}),pg(e))}));return{elRef:s,classes:p}}};function Yy(){return Yy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Yy.apply(this,arguments)}var Ky={name:"f7-popup",render:function(e,t){return Ea(),Na("div",{ref:"elRef",class:e.classes},[Ya(e.$slots,"default")],2)},props:Yy({tabletFullscreen:Boolean,opened:Boolean,animate:{type:Boolean,default:void 0},backdrop:{type:Boolean,default:void 0},backdropEl:{type:[String,Object],default:void 0},closeByBackdropClick:{type:Boolean,default:void 0},closeOnEscape:{type:Boolean,default:void 0},swipeToClose:{type:[Boolean,String],default:!1},swipeHandler:{type:[String,Object],default:void 0},push:Boolean,containerEl:{type:[String,Object],default:void 0}},dg),emits:["popup:swipestart","popup:swipemove","popup:swipeend","popup:swipeclose","popup:open","popup:opened","popup:close","popup:closed","update:opened"],setup:function(e,t){var n=t.emit,a=Ct(null),r=e.opened,o=!1,s=Ct(null),i=function(e){n("popup:swipestart",e)},l=function(e){n("popup:swipemove",e)},u=function(e){n("popup:swipeend",e)},c=function(e){n("popup:swipeclose",e)},p=function(e){r=!0,o=!1,n("popup:open",e),n("update:opened",!0)},d=function(e){n("popup:opened",e)},h=function(e){r=!1,o=!0,n("popup:close",e)},f=function(e){o=!1,n("popup:closed",e),n("update:opened",!1)};jr((function(){return e.opened}),(function(e){a.value&&(e?a.value.open():a.value.close())})),Cn((function(){if(s.value){var t={el:s.value,on:{swipeStart:i,swipeMove:l,swipeEnd:u,swipeClose:c,open:p,opened:d,close:h,closed:f}},n=e.closeByBackdropClick,r=e.closeOnEscape,o=e.animate,m=e.backdrop,g=e.backdropEl,v=e.swipeToClose,b=e.swipeHandler,y=e.containerEl;void 0!==n&&(t.closeByBackdropClick=n),void 0!==r&&(t.closeOnEscape=r),void 0!==o&&(t.animate=o),void 0!==m&&(t.backdrop=m),void 0!==g&&(t.backdropEl=g),void 0!==v&&(t.swipeToClose=v),void 0!==b&&(t.swipeHandler=b),void 0!==y&&(t.containerEl=y),sg((function(){a.value=Ym.popup.create(t),e.opened&&a.value.open(!1)}))}})),$n((function(){a.value&&a.value.destroy(),a.value=null}));var m=Nt((function(){return Xm("popup",{"popup-tablet-fullscreen":e.tabletFullscreen,"popup-push":e.push},Dg({isOpened:r,isClosing:o}),pg(e))}));return{elRef:s,classes:m}}};function Jy(){return Jy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Jy.apply(this,arguments)}var Zy={name:"f7-progressbar",render:function(e,t){return Ea(),Na("span",{ref:"elRef",class:e.classes,"data-progress":e.progress},[Da("span",{style:e.transformStyle},null,4)],10,["data-progress"])},props:Jy({progress:Number,infinite:Boolean},dg),setup:function(e){var t=Ct(null),n=Nt((function(){return{transform:e.progress?"translate3d("+(-100+e.progress)+"%, 0, 0)":"",WebkitTransform:e.progress?"translate3d("+(-100+e.progress)+"%, 0, 0)":""}}));return{classes:Nt((function(){return Xm("progressbar",{"progressbar-infinite":e.infinite},pg(e))})),set:function(e,n){Ym&&Ym.progressbar.set(t.value,e,n)},transformStyle:n,elRef:t}}};function Qy(){return Qy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Qy.apply(this,arguments)}var ew=Da("i",{class:"icon-radio"},null,-1);var tw={name:"f7-radio",render:function(e,t){return Ea(),Na("label",{class:e.classes},[Da("input",{ref:"inputElRef",type:"radio",name:e.name,value:e.value,disabled:e.disabled,readonly:e.readonly,checked:e.checked,onChange:t[1]||(t[1]=function(){return e.onChange&&e.onChange.apply(e,arguments)})},null,40,["name","value","disabled","readonly","checked"]),ew,Ya(e.$slots,"default")],2)},props:Qy({checked:Boolean,name:[Number,String],value:{type:[Number,String,Boolean],default:void 0},disabled:Boolean,readonly:Boolean},dg),emits:["update:checked","change"],setup:function(e,t){var n=t.emit;return{inputElRef:Ct(null),classes:Nt((function(){return Xm({radio:!0,disabled:e.disabled},pg(e))})),onChange:function(e){n("update:checked",e.target.checked),n("change",e)}}}};function aw(){return aw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},aw.apply(this,arguments)}var rw={key:0,class:"resize-handler"};var ow={name:"f7-row",render:function(e,t){return Ea(),Na(ma(e.tag),{ref:"elRef",class:e.classes},{default:Ut((function(){return[Ya(e.$slots,"default"),e.resizable&&e.resizableHandler?(Ea(),Na("span",rw)):Wa("",!0)]})),_:3},8,["class"])},props:aw({noGap:Boolean,tag:{type:String,default:"div"},resizable:Boolean,resizableFixed:Boolean,resizableAbsolute:Boolean,resizableHandler:{type:Boolean,default:!0}},dg),emits:["grid:resize"],setup:function(e,t){var n=t.emit,a=Ct(null),r=function(e){e===a.value&&n("grid:resize")};return Cn((function(){sg((function(){Ym.on("gridResize",r)}))})),$n((function(){Ym.off("gridResize",r)})),{classes:Nt((function(){return Xm("row",{"no-gap":e.noGap,resizable:e.resizable,"resizable-fixed":e.resizableFixed,"resizable-absolute":e.resizableAbsolute},pg(e))})),elRef:a}}};function sw(){return sw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},sw.apply(this,arguments)}var iw={class:"searchbar-inner"},lw={class:"searchbar-input-wrap"},uw=Da("i",{class:"searchbar-icon"},null,-1);var cw={name:"f7-searchbar",render:function(e,t){return Ea(),Na(ma(e.tag),{ref:"elRef",class:e.classes,onSubmit:e.onSubmit},{default:Ut((function(){return[Ya(e.$slots,"before-inner"),Da("div",iw,[Ya(e.$slots,"inner-start"),Da("div",lw,[Ya(e.$slots,"input-wrap-start"),Da("input",{value:e.value,placeholder:e.placeholder,spellcheck:e.spellcheck,type:"search",onInput:t[1]||(t[1]=function(){return e.onInput&&e.onInput.apply(e,arguments)}),onChange:t[2]||(t[2]=function(){return e.onChange&&e.onChange.apply(e,arguments)}),onFocus:t[3]||(t[3]=function(){return e.onFocus&&e.onFocus.apply(e,arguments)}),onBlur:t[4]||(t[4]=function(){return e.onBlur&&e.onBlur.apply(e,arguments)})},null,40,["value","placeholder","spellcheck"]),uw,e.clearButton?(Ea(),Na("span",{key:0,class:"input-clear-button",onClick:t[5]||(t[5]=function(){return e.onClearButtonClick&&e.onClearButtonClick.apply(e,arguments)})})):Wa("",!0),Ya(e.$slots,"input-wrap-end")]),e.disableButton?(Ea(),Na("span",{key:0,class:"searchbar-disable-button",onClick:t[6]||(t[6]=function(){return e.onDisableButtonClick&&e.onDisableButtonClick.apply(e,arguments)})},g(e.disableButtonText),1)):Wa("",!0),Ya(e.$slots,"inner-end"),Ya(e.$slots,"default")]),Ya(e.$slots,"after-inner")]})),_:3},8,["class","onSubmit"])},props:sw({noShadow:Boolean,noHairline:Boolean,form:{type:Boolean,default:!0},placeholder:{type:String,default:"Search"},spellcheck:{type:Boolean,default:void 0},disableButton:{type:Boolean,default:!0},disableButtonText:{type:String,default:"Cancel"},clearButton:{type:Boolean,default:!0},value:[String,Number,Array],inputEvents:{type:String,default:"change input compositionend"},expandable:Boolean,inline:Boolean,searchContainer:[String,Object],searchIn:{type:String,default:".item-title"},searchItem:{type:String,default:"li"},searchGroup:{type:String,default:".list-group"},searchGroupTitle:{type:String,default:".item-divider, .list-group-title"},foundEl:{type:[String,Object],default:".searchbar-found"},notFoundEl:{type:[String,Object],default:".searchbar-not-found"},backdrop:{type:Boolean,default:void 0},backdropEl:[String,Object],hideOnEnableEl:{type:[String,Object],default:".searchbar-hide-on-enable"},hideOnSearchEl:{type:[String,Object],default:".searchbar-hide-on-search"},ignore:{type:String,default:".searchbar-ignore"},customSearch:{type:Boolean,default:!1},removeDiacritics:{type:Boolean,default:!1},hideDividers:{type:Boolean,default:!0},hideGroups:{type:Boolean,default:!0},init:{type:Boolean,default:!0}},dg),emits:["change","input","focus","blur","submit","click:clear","click:disable","searchbar:search","searchbar:clear","searchbar:enable","searchbar:disable","update:value"],setup:function(e,t){var n=t.emit,a=null,r=Ct(null);Cn((function(){e.init&&sg((function(){var t=Hm({el:r.value,inputEvents:e.inputEvents,searchContainer:e.searchContainer,searchIn:e.searchIn,searchItem:e.searchItem,searchGroup:e.searchGroup,searchGroupTitle:e.searchGroupTitle,hideOnEnableEl:e.hideOnEnableEl,hideOnSearchEl:e.hideOnSearchEl,foundEl:e.foundEl,notFoundEl:e.notFoundEl,backdrop:e.backdrop,backdropEl:e.backdropEl,disableButton:e.disableButton,ignore:e.ignore,customSearch:e.customSearch,removeDiacritics:e.removeDiacritics,hideDividers:e.hideDividers,hideGroups:e.hideGroups,expandable:e.expandable,inline:e.inline,on:{search:function(e,t,a){n("searchbar:search",e,t,a)},clear:function(e,t){n("searchbar:clear",e,t)},enable:function(e){n("searchbar:enable",e)},disable:function(e){n("searchbar:disable",e)}}});Object.keys(t).forEach((function(e){""===t[e]&&delete t[e]})),a=Ym.searchbar.create(t)}))})),$n((function(){a&&a.destroy&&a.destroy(),a=null}));var o=Nt((function(){return Xm("searchbar",{"searchbar-inline":e.inline,"no-shadow":e.noShadow,"no-hairline":e.noHairline,"searchbar-expandable":e.expandable},pg(e))})),s=Nt((function(){return e.form?"form":"div"}));return{elRef:r,tag:s,classes:o,search:function(e){if(a)return a.search(e)},enable:function(){if(a)return a.enable()},disable:function(){if(a)return a.disable()},toggle:function(){if(a)return a.toggle()},clear:function(){if(a)return a.clear()},onChange:function(e){n("change",e)},onInput:function(e){n("input",e),n("update:value",e.target.value)},onFocus:function(e){n("focus",e)},onBlur:function(e){n("blur",e)},onSubmit:function(e){n("submit",e)},onClearButtonClick:function(e){n("click:clear",e)},onDisableButtonClick:function(e){n("click:disable",e)}}}};function pw(){return pw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},pw.apply(this,arguments)}var dw={key:0,class:"segmented-highlight"};var hw={name:"f7-segmented",render:function(e,t){return Ea(),Na(ma(e.tag),{class:e.classes},{default:Ut((function(){return[Ya(e.$slots,"default"),e.strong||e.strongIos||e.strongMd||e.strongAurora?(Ea(),Na("span",dw)):Wa("",!0)]})),_:3},8,["class"])},props:pw({raised:Boolean,raisedIos:Boolean,raisedMd:Boolean,raisedAurora:Boolean,round:Boolean,roundIos:Boolean,roundMd:Boolean,roundAurora:Boolean,strong:Boolean,strongIos:Boolean,strongMd:Boolean,strongAurora:Boolean,tag:{type:String,default:"div"}},dg),setup:function(e){return{classes:Nt((function(){return Xm({segmented:!0,"segmented-raised":e.raised,"segmented-raised-ios":e.raisedIos,"segmented-raised-aurora":e.raisedAurora,"segmented-raised-md":e.raisedMd,"segmented-round":e.round,"segmented-round-ios":e.roundIos,"segmented-round-aurora":e.roundAurora,"segmented-round-md":e.roundMd,"segmented-strong":e.strong,"segmented-strong-ios":e.strongIos,"segmented-strong-md":e.strongMd,"segmented-strong-aurora":e.strongAurora},pg(e))}))}}};function fw(){return fw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},fw.apply(this,arguments)}var mw={name:"f7-sheet",props:fw({opened:Boolean,animate:{type:Boolean,default:void 0},top:Boolean,bottom:Boolean,position:String,backdrop:{type:Boolean,default:void 0},backdropEl:{type:[String,Object],default:void 0},closeByBackdropClick:{type:Boolean,default:void 0},closeByOutsideClick:{type:Boolean,default:void 0},closeOnEscape:{type:Boolean,default:void 0},push:Boolean,swipeToClose:{type:Boolean,default:void 0},swipeToStep:{type:Boolean,default:void 0},swipeHandler:{type:[String,Object],default:void 0},containerEl:{type:[String,Object],default:void 0}},dg),emits:["sheet:stepprogress","sheet:stepopen","sheet:stepclose","sheet:open","sheet:opened","sheet:close","sheet:closed","update:opened"],setup:function(e,t){var n=t.emit,a=t.slots,r=null,o=e.opened,s=!1,i=Ct(null),l=function(e,t){n("sheet:stepprogress",e,t)},u=function(e){n("sheet:stepopen",e)},c=function(e){n("sheet:stepclose",e)},p=function(e){o=!0,s=!1,n("sheet:open",e),n("update:opened",!0)},d=function(e){n("sheet:opened",e)},h=function(e){o=!1,s=!0,n("sheet:close",e)},f=function(e){s=!1,n("sheet:closed",e),n("update:opened",!1)};Cn((function(){if(i.value){var t={el:i.value,on:{open:p,opened:d,close:h,closed:f,stepOpen:u,stepClose:c,stepProgress:l}},n=e.animate,a=e.backdrop,o=e.backdropEl,s=e.closeByBackdropClick,m=e.closeByOutsideClick,g=e.closeOnEscape,v=e.swipeToClose,b=e.swipeToStep,y=e.swipeHandler,w=e.containerEl;void 0!==n&&(t.animate=n),void 0!==a&&(t.backdrop=a),void 0!==o&&(t.backdropEl=o),void 0!==s&&(t.closeByBackdropClick=s),void 0!==m&&(t.closeByOutsideClick=m),void 0!==g&&(t.closeOnEscape=g),void 0!==v&&(t.swipeToClose=v),void 0!==b&&(t.swipeToStep=b),void 0!==y&&(t.swipeHandler=y),void 0!==w&&(t.containerEl=w),sg((function(){r=Ym.sheet.create(t),e.opened&&r.open(!1)}))}})),$n((function(){r&&r.destroy(),r=null})),jr((function(){return e.opened}),(function(e){r&&(e?r.open():r.close())})),["closeByBackdropClick","closeByOutsideClick","closeOnEscape","swipeToClose"].forEach((function(t){jr((function(){return e[t]}),(function(e){r&&(r.params[t]=e)}))}));var m=Nt((function(){var t="bottom";return e.position?t=e.position:e.top?t="top":e.bottom&&(t="bottom"),Xm("sheet-modal","sheet-modal-"+t,{"sheet-modal-push":e.push},Dg({isOpened:o,isClosing:s}),pg(e))})),g="navbar toolbar tabbar subnavbar searchbar messagebar fab list-index panel".split(" ").map((function(e){return"f7-"+e}));return function(){var e=[],t=[];return a.default&&a.default().forEach((function(n){if(void 0!==n){var a=n.type&&n.type.name?n.type.name:n.type;g.indexOf(a)>=0?e.push(n):t.push(n)}})),Yr("div",{class:m.value,ref:i},[e,a.fixed&&a.fixed(),Yr("div",{class:"sheet-modal-inner"},[t,a.static&&a.static()])])}}};var gw=function(e,t,n,a){var r=.5*Math.min(n,a),o=r/t;return e.replace(/([0-9,\.]{1,})/g,(function(e){e=e.split(",").map((function(e){return parseFloat(e)}));var s=e[0]*o+n/2-t*o/2,i=e[1]*o+a/2-t*o/2;return r>=100?Math.round(s)+","+Math.round(i):s+","+i}))},vw={name:"skeleton-avatar",props:{tag:{type:String,default:"span"},size:{type:Number,default:48},borderRadius:{type:[String,Number],default:"50%"},color:String,iconColor:String,showIcon:{type:Boolean,default:!0},effect:String},render:function(){var e,t=this.tag,n=this.color,a=this.iconColor,r=this.showIcon,o=this.size,s=this.borderRadius,i=this.effect;return Yr(t,{class:(e={"skeleton-avatar":!0},e["skeleton-effect-"+i]=i,e)},[Yr("svg",{xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 "+o+" "+o,preserveAspectRatio:"none"},[Yr("rect",{style:{fill:n},fillRule:"evenodd",width:o,height:o,rx:s}),r&&Yr("path",{style:{fill:a},d:gw("M28.22461,27.1590817 C34.9209931,27.1590817 40.6829044,21.1791004 40.6829044,13.3926332 C40.6829044,5.69958662 34.8898972,0 28.22461,0 C21.5594557,0 15.7663156,5.82423601 15.7663156,13.4549579 C15.7663156,21.1791004 21.5594557,27.1590817 28.22461,27.1590817 Z M8.66515427,56 L47.7841986,56 C52.6739629,56 54.4181241,54.5984253 54.4181241,51.8576005 C54.4181241,43.8219674 44.358068,32.7341519 28.22461,32.7341519 C12.0600561,32.7341519 2,43.8219674 2,51.8576005 C2,54.5984253 3.74402832,56 8.66515427,56 Z",56,o,o)})]),this.$slots.default&&this.$slots.default()])}},bw=vw,yw={name:"skeleton-block",props:{tag:{type:String,default:"div"},width:[String,Number],height:[String,Number],borderRadius:String,effect:String},render:function(){var e;return Yr(this.tag,{class:(e={"skeleton-block":!0},e["skeleton-effect-"+this.effect]=this.effect,e),style:{width:this.width,height:this.height,borderRadius:this.borderRadius}},this.$slots.default&&this.$slots.default())}},ww={name:"skeleton-image",props:{tag:{type:String,default:"span"},width:{type:Number,default:1200},height:{type:Number,default:600},color:String,iconColor:String,showIcon:{type:Boolean,default:!0},effect:String,borderRadius:String},render:function(){var e,t=this.tag,n=this.color,a=this.iconColor,r=this.showIcon,o=this.width,s=this.height,i=this.effect,l=this.borderRadius;return Yr(t,{class:(e={"skeleton-image":!0},e["skeleton-effect-"+i]=i,e)},[Yr("svg",{xmlns:"http://www.w3.org/2000/svg",width:o,height:s,viewBox:"0 0 "+o+" "+s,style:{borderRadius:l},preserveAspectRatio:"none"},[Yr("polygon",{style:{fill:n},fillRule:"evenodd",points:"0 0 "+o+" 0 "+o+" "+s+" 0 "+s}),r&&Yr("path",{style:{fill:a},d:gw("M7.7148,49.5742 L48.2852,49.5742 C53.1836,49.5742 55.6446,47.1367 55.6446,42.3086 L55.6446,13.6914 C55.6446,8.8633 53.1836,6.4258 48.2852,6.4258 L7.7148,6.4258 C2.8398,6.4258 0.3554,8.8398 0.3554,13.6914 L0.3554,42.3086 C0.3554,47.1602 2.8398,49.5742 7.7148,49.5742 Z M39.2851,27.9414 C38.2304,27.0039 37.0351,26.5118 35.7695,26.5118 C34.457,26.5118 33.3085,26.9571 32.2304,27.918 L21.6366,37.3867 L17.3007,33.4492 C16.3163,32.582 15.2617,32.1133 14.1366,32.1133 C13.1054,32.1133 12.0976,32.5586 11.1366,33.4258 L4.1288,39.7305 L4.1288,13.8789 C4.1288,11.4414 5.4413,10.1992 7.7851,10.1992 L48.2147,10.1992 C50.535,10.1992 51.8708,11.4414 51.8708,13.8789 L51.8708,39.7539 L39.2851,27.9414 Z M17.8163,28.1992 C20.8398,28.1992 23.3241,25.7149 23.3241,22.668 C23.3241,19.6445 20.8398,17.1367 17.8163,17.1367 C14.7695,17.1367 12.2851,19.6445 12.2851,22.668 C12.2851,25.7149 14.7695,28.1992 17.8163,28.1992 Z",56,o,s)})]),this.$slots.default&&this.$slots.default()])}},xw=ww,kw={name:"skeleton-text",props:{tag:{type:String,default:"span"},effect:String},render:function(){var e;return Yr(this.tag,{class:(e={"skeleton-text":!0},e["skeleton-effect-"+this.effect]=this.effect,e)},this.$slots.default&&this.$slots.default())}};function Cw(){return Cw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Cw.apply(this,arguments)}var Ew={key:0,class:"stepper-input-wrap"},Sw={key:1,class:"stepper-value"};var $w={name:"f7-stepper",render:function(e,t){return Ea(),Na("div",{ref:"elRef",class:e.classes},[Da("div",{class:"stepper-button-minus",onClick:t[1]||(t[1]=function(){return e.onMinusClick&&e.onMinusClick.apply(e,arguments)})}),e.input&&!e.buttonsOnly?(Ea(),Na("div",Ew,[Da("input",{id:e.inputId,name:e.name,type:e.inputType,min:"number"===e.inputType?e.min:void 0,max:"number"===e.inputType?e.max:void 0,step:"number"===e.inputType?e.step:void 0,value:e.value,readonly:e.inputReadonly,onInput:t[2]||(t[2]=function(){return e.onInput&&e.onInput.apply(e,arguments)}),onChange:t[3]||(t[3]=function(){return e.onChange&&e.onChange.apply(e,arguments)})},null,40,["id","name","type","min","max","step","value","readonly"])])):Wa("",!0),e.input||e.buttonsOnly?Wa("",!0):(Ea(),Na("div",Sw,g(e.value),1)),Da("div",{class:"stepper-button-plus",onClick:t[4]||(t[4]=function(){return e.onPlusClick&&e.onPlusClick.apply(e,arguments)})})],2)},props:Cw({init:{type:Boolean,default:!0},value:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},formatValue:Function,name:String,inputId:String,input:{type:Boolean,default:!0},inputType:{type:String,default:"text"},inputReadonly:{type:Boolean,default:!1},autorepeat:{type:Boolean,default:!1},autorepeatDynamic:{type:Boolean,default:!1},wraps:{type:Boolean,default:!1},manualInputMode:{type:Boolean,default:!1},decimalPoint:{type:Number,default:4},buttonsEndInputMode:{type:Boolean,default:!0},disabled:Boolean,buttonsOnly:Boolean,round:Boolean,roundMd:Boolean,roundIos:Boolean,roundAurora:Boolean,fill:Boolean,fillMd:Boolean,fillIos:Boolean,fillAurora:Boolean,large:Boolean,largeMd:Boolean,largeIos:Boolean,largeAurora:Boolean,small:Boolean,smallMd:Boolean,smallIos:Boolean,smallAurora:Boolean,raised:Boolean,raisedMd:Boolean,raisedIos:Boolean,raisedAurora:Boolean},dg),emits:["input","change","stepper:minusclick","stepper:plusclick","stepper:change","update:value"],setup:function(e,t){var n=t.emit,a=null,r=Ct(null);jr((function(){return e.value}),(function(e){a&&a.setValue(e)})),Cn((function(){sg((function(){e.init&&r.value&&(a=Ym.stepper.create(Hm({el:r.value,min:e.min,max:e.max,value:e.value,step:e.step,formatValue:e.formatValue,autorepeat:e.autorepeat,autorepeatDynamic:e.autorepeatDynamic,wraps:e.wraps,manualInputMode:e.manualInputMode,decimalPoint:e.decimalPoint,buttonsEndInputMode:e.buttonsEndInputMode,on:{change:function(e,t){n("stepper:change",t),n("update:value",t)}}})))}))})),$n((function(){a&&a.destroy&&a.destroy(),a=null}));var o=Nt((function(){return Xm("stepper",{disabled:e.disabled,"stepper-round":e.round,"stepper-round-ios":e.roundIos,"stepper-round-md":e.roundMd,"stepper-round-aurora":e.roundAurora,"stepper-fill":e.fill,"stepper-fill-ios":e.fillIos,"stepper-fill-md":e.fillMd,"stepper-fill-aurora":e.fillAurora,"stepper-large":e.large,"stepper-large-ios":e.largeIos,"stepper-large-md":e.largeMd,"stepper-large-aurora":e.largeAurora,"stepper-small":e.small,"stepper-small-ios":e.smallIos,"stepper-small-md":e.smallMd,"stepper-small-aurora":e.smallAurora,"stepper-raised":e.raised,"stepper-raised-ios":e.raisedIos,"stepper-raised-md":e.raisedMd,"stepper-raised-aurora":e.raisedAurora},pg(e))}));return{elRef:r,classes:o,increment:function(){a&&a.increment()},decrement:function(){a&&a.decrement()},setValue:function(e){a&&a.setValue&&a.setValue(e)},getValue:function(){if(a&&a.getValue)return a.getValue()},onInput:function(e){n("input",e,a)},onChange:function(e){n("change",e,a)},onMinusClick:function(e){n("stepper:minusclick",e,a)},onPlusClick:function(e){n("stepper:plusclick",e,a)}}}};function Tw(){return Tw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Tw.apply(this,arguments)}var Iw={key:0,class:"subnavbar-inner"},Nw={key:0,class:"subnavbar-title"};var Ow={name:"f7-subnavbar",render:function(e,t){return Ea(),Na("div",{class:e.classes},[e.inner?(Ea(),Na("div",Iw,[e.title?(Ea(),Na("div",Nw,g(e.title),1)):Wa("",!0),Ya(e.$slots,"default")])):Ya(e.$slots,"default",{key:1})],2)},props:Tw({sliding:Boolean,title:String,inner:{type:Boolean,default:!0}},dg),setup:function(e){return{classes:Nt((function(){return Xm("subnavbar",{sliding:e.sliding},pg(e))}))}}};function Rw(){return Rw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Rw.apply(this,arguments)}var Aw={name:"f7-swipeout-actions",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Ya(e.$slots,"default")],2)},props:Rw({left:Boolean,right:Boolean,side:String},dg),setup:function(e){var t=Nt((function(){var t=e.side;return t||(e.left&&(t="left"),e.right&&(t="right")),t}));return{classes:Nt((function(){return Xm("swipeout-actions-"+t.value,pg(e))}))}}};function Mw(){return Mw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Mw.apply(this,arguments)}var Bw={name:"f7-swipeout-button",render:function(e,t){return Ea(),Na("a",{href:e.href||"#","data-confirm":e.confirmText||void 0,"data-confirm-title":e.confirmTitle||void 0,class:e.classes,onClick:t[1]||(t[1]=function(){return e.onClick&&e.onClick.apply(e,arguments)})},[za(g(e.text)+" ",1),Ya(e.$slots,"default")],10,["href","data-confirm","data-confirm-title"])},props:Mw({text:String,confirmTitle:String,confirmText:String,overswipe:Boolean,close:Boolean,delete:Boolean,href:String},dg),emits:["click"],setup:function(e,t){var n=t.emit;return{classes:Nt((function(){return Xm({"swipeout-overswipe":e.overswipe,"swipeout-delete":e.delete,"swipeout-close":e.close},pg(e))})),onClick:function(e){n("click",e)}}}};function Pw(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function Dw(e,t){var n=["__proto__","constructor","prototype"];Object.keys(t).filter((function(e){return n.indexOf(e)<0})).forEach((function(n){void 0===e[n]?e[n]=t[n]:Pw(t[n])&&Pw(e[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?e[n]=t[n]:Dw(e[n],t[n]):e[n]=t[n]}))}function Fw(e){return void 0===e&&(e={}),e.navigation&&void 0===e.navigation.nextEl&&void 0===e.navigation.prevEl}function _w(e){return void 0===e&&(e={}),e.pagination&&void 0===e.pagination.el}function Lw(e){return void 0===e&&(e={}),e.scrollbar&&void 0===e.scrollbar.el}function zw(e){void 0===e&&(e="");var t=e.split(" ").map((function(e){return e.trim()})).filter((function(e){return!!e})),n=[];return t.forEach((function(e){n.indexOf(e)<0&&n.push(e)})),n.join(" ")}var Vw={name:"SwiperSlide",props:{tag:{type:String,default:"div"},swiperRef:Object,zoom:{type:Boolean,default:void 0},virtualIndex:{type:[String,Number],default:void 0}},setup:function(e,t){var n=t.slots,a=!1,r=e.swiperRef,o=Ct(null),s=Ct("swiper-slide");function i(e,t,n){t===o.value&&(s.value=n)}Cn((function(){r.value&&(r.value.on("_slideClass",i),a=!0)})),En((function(){!a&&r&&r.value&&(r.value.on("_slideClass",i),a=!0)})),Sn((function(){o.value&&r&&r.value&&r.value.destroyed&&"swiper-slide"!==s.value&&(s.value="swiper-slide")})),$n((function(){r&&r.value&&r.value.off("_slideClass",i)}));var l=Nt((function(){return{isActive:s.value.indexOf("swiper-slide-active")>=0||s.value.indexOf("swiper-slide-duplicate-active")>=0,isVisible:s.value.indexOf("swiper-slide-visible")>=0,isDuplicate:s.value.indexOf("swiper-slide-duplicate")>=0,isPrev:s.value.indexOf("swiper-slide-prev")>=0||s.value.indexOf("swiper-slide-duplicate-prev")>=0,isNext:s.value.indexOf("swiper-slide-next")>=0||s.value.indexOf("swiper-slide-duplicate-next")>=0}}));return function(){return Yr(e.tag,{class:zw(""+s.value),ref:o,"data-swiper-slide-index":e.virtualIndex},e.zoom?Yr("div",{class:"swiper-zoom-container","data-swiper-zoom":"number"==typeof e.zoom?e.zoom:void 0},n.default&&n.default(l.value)):n.default&&n.default(l.value))}}},Ww=Vw,Hw=["init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_freeModeMomentum","_freeModeMomentumRatio","_freeModeMomentumBounce","_freeModeMomentumBounceRatio","_freeModeMomentumVelocityRatio","_freeModeSticky","_freeModeMinimumVelocity","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","_slidesPerColumn","_slidesPerColumnFill","_slidesPerGroup","_slidesPerGroupSkip","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_watchSlidesVisibility","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopFillGroupWithBlank","loopPreventsSlide","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];function jw(e){void 0===e&&(e={});var t={on:{}},n={};Dw(t,_h.defaults),Dw(t,_h.extendedDefaults),t._emitClasses=!0,t.init=!1;var a={},r=Hw.map((function(e){return e.replace(/_/,"")})),o=Object.assign({},e);return Object.keys(o).forEach((function(o){void 0!==e[o]&&(r.indexOf(o)>=0?Pw(e[o])?(t[o]={},n[o]={},Dw(t[o],e[o]),Dw(n[o],e[o])):(t[o]=e[o],n[o]=e[o]):0===o.search(/on[A-Z]/)&&"function"==typeof e[o]?t.on[""+o[2].toLowerCase()+o.substr(3)]=e[o]:a[o]=e[o])})),["navigation","pagination","scrollbar"].forEach((function(e){!0===t[e]&&(t[e]={}),!1===t[e]&&delete t[e]})),{params:t,passedParams:n,rest:a}}function Uw(){return Uw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Uw.apply(this,arguments)}function Gw(e,t){var n=t.slidesPerView;if(t.breakpoints){var a=_h.prototype.getBreakpoint(t.breakpoints),r=a in t.breakpoints?t.breakpoints[a]:void 0;r&&r.slidesPerView&&(n=r.slidesPerView)}var o=Math.ceil(parseFloat(t.loopedSlides||n,10));return(o+=t.loopAdditionalSlides)>e.length&&(o=e.length),o}function qw(e,t,n){void 0===e&&(e={});var a=[],r={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]},o=function e(t,n){Array.isArray(t)&&t.forEach((function(t){var o="symbol"==typeof t.type;"default"===n&&(n="container-end"),o&&t.children?e(t.children,"default"):!t.type||"SwiperSlide"!==t.type.name&&"AsyncComponentWrapper"!==t.type.name?r[n]&&r[n].push(t):a.push(t)}))};return Object.keys(e).forEach((function(t){var n=e[t]();o(n,t)})),n.value=t.value,t.value=a,{slides:a,slots:r}}function Xw(e){var t,n,a,r,o,s=e.swiper,i=e.slides,l=e.passedParams,u=e.changedParams,c=e.nextEl,p=e.prevEl,d=e.paginationEl,h=e.scrollbarEl,f=u.filter((function(e){return"children"!==e&&"direction"!==e})),m=s.params,g=s.pagination,v=s.navigation,b=s.scrollbar,y=s.virtual,w=s.thumbs;u.includes("thumbs")&&l.thumbs&&l.thumbs.swiper&&m.thumbs&&!m.thumbs.swiper&&(t=!0),u.includes("controller")&&l.controller&&l.controller.control&&m.controller&&!m.controller.control&&(n=!0),u.includes("pagination")&&l.pagination&&(l.pagination.el||d)&&(m.pagination||!1===m.pagination)&&g&&!g.el&&(a=!0),u.includes("scrollbar")&&l.scrollbar&&(l.scrollbar.el||h)&&(m.scrollbar||!1===m.scrollbar)&&b&&!b.el&&(r=!0),u.includes("navigation")&&l.navigation&&(l.navigation.prevEl||p)&&(l.navigation.nextEl||c)&&(m.navigation||!1===m.navigation)&&v&&!v.prevEl&&!v.nextEl&&(o=!0);(f.forEach((function(e){if(Pw(m[e])&&Pw(l[e]))Dw(m[e],l[e]);else{var t=l[e];!0!==t&&!1!==t||"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e?m[e]=l[e]:!1===t&&function(e){s[e]&&(s[e].destroy(),"navigation"===e?(m[e].prevEl=void 0,m[e].nextEl=void 0,s[e].prevEl=void 0,s[e].nextEl=void 0):(m[e].el=void 0,s[e].el=void 0))}(e)}})),u.includes("children")&&y&&m.virtual.enabled?(y.slides=i,y.update(!0)):u.includes("children")&&s.lazy&&s.params.lazy.enabled&&s.lazy.load(),t)&&(w.init()&&w.update(!0));n&&(s.controller.control=m.controller.control),a&&(d&&(m.pagination.el=d),g.init(),g.render(),g.update()),r&&(h&&(m.scrollbar.el=h),b.init(),b.updateSize(),b.setTranslate()),o&&(c&&(m.navigation.nextEl=c),p&&(m.navigation.prevEl=p),v.init(),v.update()),u.includes("allowSlideNext")&&(s.allowSlideNext=l.allowSlideNext),u.includes("allowSlidePrev")&&(s.allowSlidePrev=l.allowSlidePrev),u.includes("direction")&&s.changeDirection(l.direction,!1),s.update()}function Yw(){return Yw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Yw.apply(this,arguments)}var Kw={name:"Swiper",props:{tag:{type:String,default:"div"},wrapperTag:{type:String,default:"div"},init:{type:Boolean,default:void 0},direction:{type:String,default:void 0},touchEventsTarget:{type:String,default:void 0},initialSlide:{type:Number,default:void 0},speed:{type:Number,default:void 0},cssMode:{type:Boolean,default:void 0},updateOnWindowResize:{type:Boolean,default:void 0},resizeObserver:{type:Boolean,default:void 0},nested:{type:Boolean,default:void 0},focusableElements:{type:String,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},preventInteractionOnTransition:{type:Boolean,default:void 0},userAgent:{type:String,default:void 0},url:{type:String,default:void 0},edgeSwipeDetection:{type:[Boolean,String],default:void 0},edgeSwipeThreshold:{type:Number,default:void 0},freeMode:{type:Boolean,default:void 0},freeModeMomentum:{type:Boolean,default:void 0},freeModeMomentumRatio:{type:Number,default:void 0},freeModeMomentumBounce:{type:Boolean,default:void 0},freeModeMomentumBounceRatio:{type:Number,default:void 0},freeModeMomentumVelocityRatio:{type:Number,default:void 0},freeModeSticky:{type:Boolean,default:void 0},freeModeMinimumVelocity:{type:Number,default:void 0},autoHeight:{type:Boolean,default:void 0},setWrapperSize:{type:Boolean,default:void 0},virtualTranslate:{type:Boolean,default:void 0},effect:{type:String,default:void 0},breakpoints:{type:Object,default:void 0},spaceBetween:{type:Number,default:void 0},slidesPerView:{type:[Number,String],default:void 0},slidesPerColumn:{type:Number,default:void 0},slidesPerColumnFill:{type:String,default:void 0},slidesPerGroup:{type:Number,default:void 0},slidesPerGroupSkip:{type:Number,default:void 0},centeredSlides:{type:Boolean,default:void 0},centeredSlidesBounds:{type:Boolean,default:void 0},slidesOffsetBefore:{type:Number,default:void 0},slidesOffsetAfter:{type:Number,default:void 0},normalizeSlideIndex:{type:Boolean,default:void 0},centerInsufficientSlides:{type:Boolean,default:void 0},watchOverflow:{type:Boolean,default:void 0},roundLengths:{type:Boolean,default:void 0},touchRatio:{type:Number,default:void 0},touchAngle:{type:Number,default:void 0},simulateTouch:{type:Boolean,default:void 0},shortSwipes:{type:Boolean,default:void 0},longSwipes:{type:Boolean,default:void 0},longSwipesRatio:{type:Number,default:void 0},longSwipesMs:{type:Number,default:void 0},followFinger:{type:Boolean,default:void 0},allowTouchMove:{type:Boolean,default:void 0},threshold:{type:Number,default:void 0},touchMoveStopPropagation:{type:Boolean,default:void 0},touchStartPreventDefault:{type:Boolean,default:void 0},touchStartForcePreventDefault:{type:Boolean,default:void 0},touchReleaseOnEdges:{type:Boolean,default:void 0},uniqueNavElements:{type:Boolean,default:void 0},resistance:{type:Boolean,default:void 0},resistanceRatio:{type:Number,default:void 0},watchSlidesProgress:{type:Boolean,default:void 0},watchSlidesVisibility:{type:Boolean,default:void 0},grabCursor:{type:Boolean,default:void 0},preventClicks:{type:Boolean,default:void 0},preventClicksPropagation:{type:Boolean,default:void 0},slideToClickedSlide:{type:Boolean,default:void 0},preloadImages:{type:Boolean,default:void 0},updateOnImagesReady:{type:Boolean,default:void 0},loop:{type:Boolean,default:void 0},loopAdditionalSlides:{type:Number,default:void 0},loopedSlides:{type:Number,default:void 0},loopFillGroupWithBlank:{type:Boolean,default:void 0},loopPreventsSlide:{type:Boolean,default:void 0},allowSlidePrev:{type:Boolean,default:void 0},allowSlideNext:{type:Boolean,default:void 0},swipeHandler:{type:Boolean,default:void 0},noSwiping:{type:Boolean,default:void 0},noSwipingClass:{type:String,default:void 0},noSwipingSelector:{type:String,default:void 0},passiveListeners:{type:Boolean,default:void 0},containerModifierClass:{type:String,default:void 0},slideClass:{type:String,default:void 0},slideBlankClass:{type:String,default:void 0},slideActiveClass:{type:String,default:void 0},slideDuplicateActiveClass:{type:String,default:void 0},slideVisibleClass:{type:String,default:void 0},slideDuplicateClass:{type:String,default:void 0},slideNextClass:{type:String,default:void 0},slideDuplicateNextClass:{type:String,default:void 0},slidePrevClass:{type:String,default:void 0},slideDuplicatePrevClass:{type:String,default:void 0},wrapperClass:{type:String,default:void 0},runCallbacksOnInit:{type:Boolean,default:void 0},observer:{type:Boolean,default:void 0},observeParents:{type:Boolean,default:void 0},observeSlideChildren:{type:Boolean,default:void 0},a11y:{type:[Boolean,Object],default:void 0},autoplay:{type:[Boolean,Object],default:void 0},controller:{type:Object,default:void 0},coverflowEffect:{type:Object,default:void 0},cubeEffect:{type:Object,default:void 0},fadeEffect:{type:Object,default:void 0},flipEffect:{type:Object,default:void 0},hashNavigation:{type:[Boolean,Object],default:void 0},history:{type:[Boolean,Object],default:void 0},keyboard:{type:[Boolean,Object],default:void 0},lazy:{type:[Boolean,Object],default:void 0},mousewheel:{type:[Boolean,Object],default:void 0},navigation:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:void 0},parallax:{type:[Boolean,Object],default:void 0},scrollbar:{type:[Boolean,Object],default:void 0},thumbs:{type:Object,default:void 0},virtual:{type:[Boolean,Object],default:void 0},zoom:{type:[Boolean,Object],default:void 0}},emits:["_beforeBreakpoint","_containerClasses","_slideClass","_slideClasses","_swiper","activeIndexChange","afterInit","autoplay","autoplayStart","autoplayStop","beforeDestroy","beforeInit","beforeLoopFix","beforeResize","beforeSlideChangeStart","beforeTransitionStart","breakpoint","changeDirection","click","disable","doubleTap","doubleClick","destroy","enable","fromEdge","hashChange","hashSet","imagesReady","init","keyPress","lazyImageLoad","lazyImageReady","lock","loopFix","momentumBounce","navigationHide","navigationShow","observerUpdate","orientationchange","paginationHide","paginationRender","paginationShow","paginationUpdate","progress","reachBeginning","reachEnd","realIndexChange","resize","scroll","scrollbarDragEnd","scrollbarDragMove","scrollbarDragStart","setTransition","setTranslate","slideChange","slideChangeTransitionEnd","slideChangeTransitionStart","slideNextTransitionEnd","slideNextTransitionStart","slidePrevTransitionEnd","slidePrevTransitionStart","slideResetTransitionStart","slideResetTransitionEnd","sliderMove","sliderFirstMove","slidesLengthChange","slidesGridLengthChange","snapGridLengthChange","snapIndexChange","swiper","tap","toEdge","touchEnd","touchMove","touchMoveOpposite","touchStart","transitionEnd","transitionStart","unlock","update","zoomChange"],setup:function(e,t){var n=t.slots,a=t.emit,r=e.tag,o=e.wrapperTag,s=Ct("swiper-container"),i=Ct(null),l=Ct(!1),u=Ct(!1),c=Ct(null),p=Ct(null),d=Ct(null),h={value:[]},f={value:[]},m=Ct(null),g=Ct(null),v=Ct(null),b=Ct(null),y=jw(e),w=y.params,x=y.passedParams;qw(n,h,f),d.value=x,f.value=h.value;if(w.onAny=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.apply(void 0,[e].concat(n))},Object.assign(w.on,{_beforeBreakpoint:function(){qw(n,h,f),l.value=!0},_containerClasses:function(e,t){s.value=t}}),p.value=function(e){return new _h(e)}(w),p.value.loopCreate=function(){},p.value.loopDestroy=function(){},w.loop&&(p.value.loopedSlides=Gw(h.value,w)),p.value.virtual&&p.value.params.virtual.enabled){p.value.virtual.slides=h.value;var k={cache:!1,renderExternal:function(e){i.value=e},renderExternalUpdate:!1};Dw(p.value.params.virtual,k),Dw(p.value.originalParams.virtual,k)}function C(e){return w.virtual?function(e,t,n){var a;if(!n)return null;var r=e.value.isHorizontal()?((a={})[e.value.rtlTranslate?"right":"left"]=n.offset+"px",a):{top:n.offset+"px"};return t.filter((function(e,t){return t>=n.from&&t<=n.to})).map((function(t){return t.props||(t.props={}),t.props.style||(t.props.style={}),t.props.swiperRef=e,t.props.style=r,Yr(t.type,Yw({},t.props),t.children)}))}(p,e,i.value):!w.loop||p.value&&p.value.destroyed?(e.forEach((function(e){e.props||(e.props={}),e.props.swiperRef=p})),e):function(e,t,n){var a=t.map((function(t,n){return t.props||(t.props={}),t.props.swiperRef=e,t.props["data-swiper-slide-index"]=n,t}));function r(e,t,a){return e.props||(e.props={}),Yr(e.type,Uw({},e.props,{key:e.key+"-duplicate-"+t+"-"+a,class:(e.props.className||"")+" "+n.slideDuplicateClass+" "+(e.props.class||"")}),e.children)}if(n.loopFillGroupWithBlank){var o=n.slidesPerGroup-a.length%n.slidesPerGroup;if(o!==n.slidesPerGroup)for(var s=0;s<o;s+=1){var i=Yr("div",{class:n.slideClass+" "+n.slideBlankClass});a.push(i)}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=a.length);var l=Gw(a,n),u=[],c=[];return a.forEach((function(e,t){t<l&&c.push(r(e,t,"prepend")),t<a.length&&t>=a.length-l&&u.push(r(e,t,"append"))})),e.value&&(e.value.loopedSlides=l),[].concat(u,a,c)}(p,e,w)}return Sn((function(){!u.value&&p.value&&(p.value.emitSlidesClasses(),u.value=!0);var t=jw(e).passedParams,n=function(e,t,n,a){var r=[];if(!t)return r;var o=function(e){r.indexOf(e)<0&&r.push(e)},s=a.map((function(e){return e.props&&e.props.key})),i=n.map((function(e){return e.props&&e.props.key}));return s.join("")!==i.join("")&&r.push("children"),a.length!==n.length&&r.push("children"),Hw.filter((function(e){return"_"===e[0]})).map((function(e){return e.replace(/_/,"")})).forEach((function(n){if(n in e&&n in t)if(Pw(e[n])&&Pw(t[n])){var a=Object.keys(e[n]),r=Object.keys(t[n]);a.length!==r.length?o(n):(a.forEach((function(a){e[n][a]!==t[n][a]&&o(n)})),r.forEach((function(a){e[n][a]!==t[n][a]&&o(n)})))}else e[n]!==t[n]&&o(n)})),r}(t,d.value,h.value,f.value);d.value=t,(n.length||l.value)&&p.value&&!p.value.destroyed&&Xw({swiper:p.value,slides:h.value,passedParams:t,changedParams:n,nextEl:m.value,prevEl:g.value,scrollbarEl:b.value,paginationEl:v.value}),l.value=!1})),jr(i,(function(){Br((function(){!function(e){!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())}(p.value)}))})),Cn((function(){c.value&&(!function(e,t){var n=e.el,a=e.nextEl,r=e.prevEl,o=e.paginationEl,s=e.scrollbarEl,i=e.swiper;Fw(t)&&a&&r&&(i.params.navigation.nextEl=a,i.originalParams.navigation.nextEl=a,i.params.navigation.prevEl=r,i.originalParams.navigation.prevEl=r),_w(t)&&o&&(i.params.pagination.el=o,i.originalParams.pagination.el=o),Lw(t)&&s&&(i.params.scrollbar.el=s,i.originalParams.scrollbar.el=s),i.init(n)}({el:c.value,nextEl:m.value,prevEl:g.value,paginationEl:v.value,scrollbarEl:b.value,swiper:p.value},w),a("swiper",p.value))})),$n((function(){p.value&&!p.value.destroyed&&p.value.destroy(!0,!1)})),function(){var t=qw(n,h,f),a=t.slides,i=t.slots;return Yr(r,{ref:c,class:zw(s.value)},[i["container-start"],Fw(e)&&[Yr("div",{ref:g,class:"swiper-button-prev"}),Yr("div",{ref:m,class:"swiper-button-next"})],Lw(e)&&Yr("div",{ref:b,class:"swiper-scrollbar"}),_w(e)&&Yr("div",{ref:v,class:"swiper-pagination"}),Yr(o,{class:"swiper-wrapper"},[i["wrapper-start"],C(a),i["wrapper-end"]]),i["container-end"]])}}},Jw=Kw;function Zw(){return Zw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Zw.apply(this,arguments)}var Qw={name:"f7-tab",render:function(e,t){var n;return Ea(),Na("div",{ref:"elRef",class:e.classes},[e.tabContent?(Ea(),Na(ma(e.getComponent(e.tabContent)),Ga((n={key:0},n.key=e.tabContent.id,n),e.getProps(e.tabContent)),null,16)):Ya(e.$slots,"default",{key:1})],2)},props:Zw({tabActive:Boolean},dg),emits:["tab:show","tab:hide"],setup:function(e,t){var n=t.emit,a=Ct(null),r=Ct(null),o=Qt("f7route",null),s=Qt("f7route",null),i=null;if(!r.value&&o&&o.route&&o.route.tab&&o.route.tab.id===e.id){var l=o.route.tab,u=l.component,c=l.asyncComponent,p=l.options;if(u||c){var d=o.route.options&&o.route.options.props;i={id:eg(),component:u||c,isAsync:!!c,props:Zw({},d||{},p&&p.props||{},{f7router:s,f7route:o},o.params)}}}var h=Ct(i||null),f=function(e){h.value=e};Ym&&!r.value&&(r.value={setTabContent:f},ng.tabs.push(r.value)),Cn((function(){a.value&&i&&(a.value.f7RouterTabLoaded=!0),sg((function(){r.value?r.value.el=a.value:(r.value={el:a.value,setTabContent:f},ng.tabs.push(r.value))}))})),$n((function(){r.value&&(ng.tabs.splice(ng.tabs.indexOf(r.value),1),r.value=null)})),Sn((function(){r.value&&Ym&&Km.emit("tabRouterDidUpdate",r.value)})),rv(a,n);var m=Nt((function(){return Xm("tab",{"tab-active":e.tabActive},pg(e))}));return{elRef:a,classes:m,tabContent:h,getComponent:function(e){return gt(e.component)},getProps:function(e){var t=e.component,n=e.props,a=[],r={};return t&&t.props&&(a=Object.keys(t.props)),a.forEach((function(e){e in n&&(r[e]=n[e])})),r}}}};function ex(){return ex=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ex.apply(this,arguments)}var tx={name:"f7-tabs",render:function(e,t){return e.animated||e.swipeable?(Ea(),Na("div",{key:0,ref:"elRef",class:e.classNames(e.wrapClasses,e.classes)},[Da("div",{class:e.tabsClasses},[Ya(e.$slots,"default")],2)],2)):(Ea(),Na("div",{key:1,ref:"elRef",class:e.classNames(e.tabsClasses,e.classes)},[Ya(e.$slots,"default")],2))},props:ex({animated:Boolean,swipeable:Boolean,routable:Boolean,swiperParams:{type:Object,default:void 0}},dg),setup:function(e){var t=Ct(null);Cn((function(){e.swipeable&&e.swiperParams&&t.value&&(t.value.f7SwiperParams=e.swiperParams)}));var n=Nt((function(){return Xm(pg(e))})),a=Nt((function(){return Xm({"tabs-animated-wrap":e.animated,"tabs-swipeable-wrap":e.swipeable})})),r=Nt((function(){return Xm({tabs:!0,"tabs-routable":e.routable})}));return{elRef:t,classes:n,wrapClasses:a,tabsClasses:r,classNames:Xm}}};function nx(){return nx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},nx.apply(this,arguments)}var ax={key:0,className:"toolbar-inner"};var rx={name:"f7-toolbar",render:function(e,t){return Ea(),Na("div",{ref:"elRef",class:e.classes},[Ya(e.$slots,"before-inner"),e.inner?(Ea(),Na("div",ax,[Ya(e.$slots,"default")])):Ya(e.$slots,"default",{key:1}),Ya(e.$slots,"after-inner")],2)},props:nx({tabbar:Boolean,labels:Boolean,scrollable:Boolean,hidden:Boolean,noShadow:Boolean,noHairline:Boolean,noBorder:Boolean,position:{type:String,default:void 0},topMd:{type:Boolean,default:void 0},topIos:{type:Boolean,default:void 0},topAurora:{type:Boolean,default:void 0},top:{type:Boolean,default:void 0},bottomMd:{type:Boolean,default:void 0},bottomIos:{type:Boolean,default:void 0},bottomAurora:{type:Boolean,default:void 0},bottom:{type:Boolean,default:void 0},inner:{type:Boolean,default:!0}},dg),emits:["toolbar:hide","toolbar:show"],setup:function(e,t){var n=t.emit,a=Ct(null),r=uv(),o=function(e){a.value===e&&n("toolbar:hide")},s=function(e){a.value===e&&n("toolbar:show")};return Cn((function(){e.tabbar&&Ym&&a.value&&Ym.toolbar.setHighlight(a.value),Ym.on("toolbarShow",s),Ym.on("toolbarHide",o)})),$n((function(){Ym.off("toolbarShow",s),Ym.off("toolbarHide",o)})),Zt("TabbarContext",Nt((function(){return{tabbarHasLabels:e.labels}}))),{classes:Nt((function(){var t=e.tabbar,n=e.bottomMd,a=e.bottomIos,o=e.bottomAurora,s=e.bottom,i=e.position,l=e.topMd,u=e.topIos,c=e.topAurora,p=e.top,d=e.labels,h=e.scrollable,f=e.hidden,m=e.noShadow,g=e.noHairline,v=e.noBorder;return Xm("toolbar",{tabbar:t,"toolbar-bottom":r.value&&r.value.md&&n||r.value&&r.value.ios&&a||r.value&&r.value.aurora&&o||s||"bottom"===i,"toolbar-top":r.value&&r.value.md&&l||r.value&&r.value.ios&&u||r.value&&r.value.aurora&&c||p||"top"===i,"tabbar-labels":d,"tabbar-scrollable":h,"toolbar-hidden":f,"no-shadow":m,"no-hairline":g||v},pg(e))})),elRef:a,hide:function(e){Ym&&Ym.toolbar.hide(a.value,e)},show:function(e){Ym&&Ym.toolbar.show(a.value,e)}}}};function ox(){return ox=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ox.apply(this,arguments)}var sx={key:0,className:"treeview-toggle"},ix={className:"treeview-item-content"},lx={className:"treeview-item-label"},ux={key:0,className:"treeview-item-children"};var cx={name:"f7-treeview-item",render:function(e,t){var n=ha("f7-use-icon");return Ea(),Na("div",{ref:"elRef",class:e.classes},[(Ea(),Na(ma(e.itemRootTag),Ga({class:e.itemRootClasses},e.itemRootAttrs,{onClick:e.onClick}),{default:Ut((function(){return[Ya(e.$slots,"root-start"),e.needToggle?(Ea(),Na("div",sx)):Wa("",!0),Da("div",ix,[Ya(e.$slots,"content-start"),e.icon?(Ea(),Na(n,{key:0,icon:e.icon},null,8,["icon"])):Wa("",!0),Ya(e.$slots,"media"),Da("div",lx,[Ya(e.$slots,"label-start"),za(" "+g(e.label)+" ",1),Ya(e.$slots,"label")]),Ya(e.$slots,"content"),Ya(e.$slots,"content-end")]),Ya(e.$slots,"root"),Ya(e.$slots,"root-end")]})),_:3},16,["class","onClick"])),e.hasChildren?(Ea(),Na("div",ux,[Ya(e.$slots,"children-start"),Ya(e.$slots,"default"),Ya(e.$slots,"children")])):Wa("",!0)],2)},components:{f7UseIcon:xv},props:ox({toggle:{type:Boolean,default:void 0},itemToggle:Boolean,selectable:Boolean,selected:Boolean,opened:Boolean,label:String,loadChildren:Boolean,link:{type:[Boolean,String],default:void 0}},dg,vg,hg,fg),emits:["click","treeview:open","treeview:close","treeview:loadchildren"],setup:function(e,t){var n=t.slots,a=t.emit,r=Ct(null),o=Nt((function(){return n.default||n.children||n["children-start"]})),s=Nt((function(){return void 0===e.toggle?o.value:e.toggle})),i=Nt((function(){return iv(e)})),l=function(e){r.value===e&&a("treeview:open",e)},u=function(e){r.value===e&&a("treeview:close",e)},c=function(e,t){r.value===e&&a("treeview:loadchildren",e,t)};Cn((function(){r.value&&sg((function(){Ym.on("treeviewOpen",l),Ym.on("treeviewClose",u),Ym.on("treeviewLoadChildren",c)}))})),$n((function(){Ym&&(Ym.off("treeviewOpen",l),Ym.off("treeviewClose",u),Ym.off("treeviewLoadChildren",c))}));var p=Nt((function(){return Xm("treeview-item",{"treeview-item-opened":e.opened,"treeview-load-children":e.loadChildren},pg(e))})),d=Nt((function(){return Xm("treeview-item-root",{"treeview-item-selectable":e.selectable,"treeview-item-selected":e.selected,"treeview-item-toggle":e.itemToggle},gg(e),yg(e))}));return{itemRootTag:Nt((function(){return e.link||""===e.link?"a":"div"})),itemRootAttrs:Nt((function(){var t=e.link;return!0===e.link&&(t="#"),!1===e.link&&(t=void 0),ox({href:t},mg(e),bg(e))})),itemRootClasses:d,classes:p,icon:i,onClick:function(e){a("click",e)},hasChildren:o,needToggle:s,elRef:r}}};function px(){return px=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},px.apply(this,arguments)}var dx={name:"f7-treeview",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Ya(e.$slots,"default")],2)},props:px({},dg),setup:function(e){return{classes:Nt((function(){return Xm("treeview",pg(e))}))}}};function hx(){return hx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},hx.apply(this,arguments)}function fx(){return fx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},fx.apply(this,arguments)}var mx={name:"f7-view",props:fx({tab:Boolean,tabActive:Boolean,name:String,router:{type:Boolean,default:!0},linksView:[Object,String],url:String,main:{type:Boolean,default:void 0},stackPages:{type:Boolean,default:void 0},xhrCache:{type:Boolean,default:void 0},xhrCacheIgnore:Array,xhrCacheIgnoreGetParameters:{type:Boolean,default:void 0},xhrCacheDuration:Number,preloadPreviousPage:{type:Boolean,default:void 0},allowDuplicateUrls:{type:Boolean,default:void 0},reloadPages:{type:Boolean,default:void 0},reloadDetail:{type:Boolean,default:void 0},masterDetailResizable:{type:Boolean,default:void 0},masterDetailBreakpoint:Number,removeElements:{type:Boolean,default:void 0},removeElementsWithTimeout:{type:Boolean,default:void 0},removeElementsTimeout:Number,restoreScrollTopOnBack:{type:Boolean,default:void 0},loadInitialPage:{type:Boolean,default:void 0},iosSwipeBack:{type:Boolean,default:void 0},iosSwipeBackAnimateShadow:{type:Boolean,default:void 0},iosSwipeBackAnimateOpacity:{type:Boolean,default:void 0},iosSwipeBackActiveArea:Number,iosSwipeBackThreshold:Number,mdSwipeBack:{type:Boolean,default:void 0},mdSwipeBackAnimateShadow:{type:Boolean,default:void 0},mdSwipeBackAnimateOpacity:{type:Boolean,default:void 0},mdSwipeBackActiveArea:Number,mdSwipeBackThreshold:Number,auroraSwipeBack:{type:Boolean,default:void 0},auroraSwipeBackAnimateShadow:{type:Boolean,default:void 0},auroraSwipeBackAnimateOpacity:{type:Boolean,default:void 0},auroraSwipeBackActiveArea:Number,auroraSwipeBackThreshold:Number,browserHistory:{type:Boolean,default:void 0},browserHistoryRoot:String,browserHistoryAnimate:{type:Boolean,default:void 0},browserHistoryAnimateOnLoad:{type:Boolean,default:void 0},browserHistorySeparator:String,browserHistoryOnLoad:{type:Boolean,default:void 0},browserHistoryInitialMatch:{type:Boolean,default:!0},browserHistoryStoreHistory:{type:Boolean,default:void 0},animate:{type:Boolean,default:void 0},transition:String,iosDynamicNavbar:{type:Boolean,default:void 0},iosAnimateNavbarBackIcon:{type:Boolean,default:void 0},materialPageLoadDelay:Number,passRouteQueryToRequest:{type:Boolean,default:void 0},passRouteParamsToRequest:{type:Boolean,default:void 0},routes:Array,routesAdd:Array,routesBeforeEnter:[Function,Array],routesBeforeLeave:[Function,Array],init:{type:Boolean,default:!0}},dg),emits:["view:init","view:resize","swipeback:move","swipeback:beforechange","swipeback:afterchange","swipeback:beforereset","swipeback:afterreset","tab:hide","tab:show"],setup:function(e,t){var n,a,r=t.emit,o=t.slots,s=null,i=Ct(null),l=null,u=function(t){r("view:init",t),e.init||(l.instance=t,s=l.instance)},c=function(){var t=gt(e.routes||[]),n=gt(e.routesAdd||[]);return Hm(fx({},e,{routes:t,routesAdd:n}))};if(Ym&&!s&&e.init){var p=Qm();if(s=Ym.views.create(i.value,fx({},c(),{routerId:p,init:!1,on:{init:u}})),l={routerId:p,instance:s},ng.views.push(l),s&&s.router&&(e.url||e.main)){var d=function(e,t){var n,a,r=e.getInitialUrl().initialUrl,o=e.findMatchingRoute(r),s={};return o&&o.route&&o.route.options&&(s=o.route.options.props),!o||!o.route||!o.route.component&&!o.route.asyncComponent||!0===(a=o.route).master||"function"==typeof a.master&&a.master(e.app)||(n={component:o.route.component||o.route.asyncComponent,initialComponent:t,id:eg(),isAsync:!!o.route.asyncComponent,props:hx({f7route:o,f7router:e},s,o.params)}),{initialPage:n,initialRoute:o}}(s.router,null);n=d.initialPage,(a=d.initialRoute)&&a.route&&a.route.masterRoute&&(n=void 0,a=void 0)}}var h=Ct(n?[n]:[]),f=function(e){e.forEach((function(e){e.component=gt(e.component)})),h.value=e},m=function(e,t){r("view:resize",t)},g=function(e){r("swipeback:move",e)},v=function(e){r("swipeback:beforechange",e)},b=function(e){r("swipeback:afterchange",e)},y=function(e){r("swipeback:beforereset",e)},w=function(e){r("swipeback:afterreset",e)};Cn((function(){sg((function(){if(s)l.el=i.value,l.pages=h.value,l.setPages=function(e){f([].concat(e))},n&&n.isAsync&&!n.initialComponent?n.component().then((function(){setTimeout((function(){s.init(i.value),n&&(n.el=s.router.currentPageEl,a&&a.route&&a.route.keepAlive&&(a.route.keepAliveData={pageEl:n.el}))}),100)})):(s.init(i.value),n&&(n.el=s.router.currentPageEl,a&&a.route&&a.route.keepAlive&&(a.route.keepAliveData={pageEl:n.el})));else{var t=Qm();l={el:i.value,routerId:t,pages:h.value,instance:s,setPages:function(e){f([].concat(e))}},ng.views.push(l),l.instance=Ym.views.create(i.value,fx({routerId:t},c(),{on:{init:u}})),s=l.instance}e.init&&(s.on("resize",m),s.on("swipebackMove",g),s.on("swipebackBeforeChange",v),s.on("swipebackAfterChange",b),s.on("swipebackBeforeReset",y),s.on("swipebackAfterReset",w))}))})),$n((function(){s&&(s.off("resize",m),s.off("swipebackMove",g),s.off("swipebackBeforeChange",v),s.off("swipebackAfterChange",b),s.off("swipebackBeforeReset",y),s.off("swipebackAfterReset",w),s.destroy&&s.destroy(),s=null),ng.views.splice(ng.views.indexOf(l),1),l=null})),Sn((function(){l&&Ym&&Km.emit("viewRouterDidUpdate",l)})),rv(i,r);var x=Nt((function(){return Xm("view",{"view-main":e.main,"tab-active":e.tabActive,tab:e.tab},pg(e))}));return function(){return Yr("div",{ref:i,class:x.value},[o.default&&o.default()].concat(h.value.map((function(e){return Yr(function(e){return gt(e.component)}(e),fx({key:e.id},function(e){var t=e.component,n=e.props,a=[],r={};return t&&t.props&&(a=Object.keys(t.props)),a.forEach((function(e){e in n&&(r[e]=n[e])})),r}(e)))}))))}}};function gx(){return gx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},gx.apply(this,arguments)}var vx={name:"f7-views",render:function(e,t){return Ea(),Na("div",{class:e.classes},[Ya(e.$slots,"default")],2)},props:gx({tabs:Boolean},dg),setup:function(e){return{classes:Nt((function(){return Xm("views",{tabs:e.tabs},pg(e))}))}}},bx=cg;var yx=function(e){return function(e){Ht=e}("data-v-4c11f1e6"),e=e(),Ht=null,e},wx=za("Fruit freshness"),xx={style:{"font-size":"1.5rem"}},kx={class:"camera"},Cx=yx((function(){return Pa("p",null,"Usermedia",-1)})),Ex={ref:"videoRef",playsinline:"",autoplay:""},Sx={class:"camera"},$x=[yx((function(){return Pa("p",null,"Image",-1)})),yx((function(){return Pa("img",{style:{width:"480px",height:"480px"},id:"imageFile"},null,-1)}))],Tx={class:"camera"},Ix=yx((function(){return Pa("p",null,"Canvas",-1)})),Nx={id:"canvas",ref:"canvasRef"};function Ox(e,t,n,a,r,o,s){try{var i=e[o](s),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(a,r)}function Rx(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function s(e){Ox(o,a,r,s,i,"next",e)}function i(e){Ox(o,a,r,s,i,"throw",e)}s(void 0)}))}}var Ax=n(757),Mx=n.n(Ax);class Bx{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class Px{refCount(e){return Dx("refCount")}incRef(e){return Dx("incRef")}timerAvailable(){return!0}time(e){return Dx("time")}read(e){return Dx("read")}readSync(e){return Dx("readSync")}numDataIds(){return Dx("numDataIds")}disposeData(e,t){return Dx("disposeData")}write(e,t,n){return Dx("write")}move(e,t,n,a,r){return Dx("move")}memory(){return Dx("memory")}floatPrecision(){return Dx("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return Dx("dispose")}}function Dx(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function Fx(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,zx(e,t,n)}function _x(e,t,n){return Math.max(e,Math.min(t,n))}function Lx(e){return e%2==0?e:e+1}function zx(e,t,n){const a=e[t];e[t]=e[n],e[n]=a}function Vx(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function Wx(e,t,n=""){Vx(Gx(e,t),(()=>n+` Shapes ${e} and ${t} must match`))}function Hx(e){Vx(null!=e,(()=>"The input to the tensor constructor must be a non-null value."))}function jx(e,t=[],n=!1){if(null==t&&(t=[]),Array.isArray(e)||ak(e)&&!n)for(let a=0;a<e.length;++a)jx(e[a],t,n);else t.push(e);return t}function Ux(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function Gx(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function qx(e){return e%1==0}function Xx(e){const t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Yx(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function Kx(e,t=(e=>0),n){return new Promise(((a,r)=>{let o=0;const s=()=>{if(e())return void a();o++;const i=t(o);null!=n&&o>=n?r():setTimeout(s,i)};s()}))}function Jx(e,t){let n=1,a=-1;for(let t=0;t<e.length;++t)if(e[t]>=0)n*=e[t];else if(-1===e[t]){if(-1!==a)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${a} and dim ${t}`);a=t}else if(e[t]<0)throw Error(`Shapes can not be < 0. Found ${e[t]} at dim ${t}`);if(-1===a){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(0===n)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!=0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);const r=e.slice();return r[a]=t/n,r}function Zx(e,t){const n=t.length;return e=null==e?t.map(((e,t)=>t)):[].concat(e),Vx(e.every((e=>e>=-n&&e<n)),(()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`)),Vx(e.every((e=>qx(e))),(()=>`All values in axis param must be integers but got axis ${e}`)),e.map((e=>e<0?n+e:e))}function Qx(e,t){const n=[],a=[],r=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||r?null:Zx(t,e).sort();let s=0;for(let t=0;t<e.length;++t){if(null!=o){if(o[s]===t&&1!==e[t])throw new Error(`Can't squeeze axis ${t} since its dim '${e[t]}' is not 1`);(null==o[s]||o[s]>t)&&1===e[t]&&(n.push(e[t]),a.push(t)),o[s]<=t&&s++}1!==e[t]&&(n.push(e[t]),a.push(t))}return{newShape:n,keptDims:a}}function ek(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error(`Unknown data type ${e}`);n=new Uint8Array(t)}return n}function tk(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error(`Unknown data type ${e}`);n=new Array(t)}return n}function nk(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function ak(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function rk(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error(`Unknown dtype ${e}`)}function ok(e){return"string"==typeof e||e instanceof String}function sk(e){return"number"==typeof e}function ik(e){return Array.isArray(e)?ik(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":sk(e)?"float32":ok(e)?"string":function(e){return"boolean"==typeof e}(e)?"bool":"float32"}function lk(e){return!!(e&&e.constructor&&e.call&&e.apply)}function uk(e,t){for(let n=t;n<e;++n)if(e%n==0)return n;return e}function ck(e){const t=e.length;if(t<2)return[];const n=new Array(t-1);n[t-2]=e[t-1];for(let a=t-3;a>=0;--a)n[a]=n[a+1]*e[a+1];return n}function pk(e,t,n,a=!1){const r=new Array;if(1===t.length){const o=t[0]*(a?2:1);for(let t=0;t<o;t++)r[t]=n[e+t]}else{const o=t[0],s=t.slice(1),i=s.reduce(((e,t)=>e*t))*(a?2:1);for(let t=0;t<o;t++)r[t]=pk(e+t*i,s,n,a)}return r}function dk(e,t,n=!1){if(0===e.length)return t[0];const a=e.reduce(((e,t)=>e*t))*(n?2:1);if(0===a)return[];if(a!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return pk(0,e,t,n)}function hk(e,t){const n=fk(e,t);for(let e=0;e<n.length;e++)n[e]=1;return n}function fk(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error(`Unknown data type ${t}`)}function mk(e,t){const n=e.reduce(((e,t)=>e*t),1);if(null==t||"float32"===t)return dk(e,new Float32Array(n));if("int32"===t)return dk(e,new Int32Array(n));if("bool"===t)return dk(e,new Uint8Array(n));throw new Error(`Unknown data type ${t}`)}function gk(e){e.forEach((t=>{Vx(Number.isInteger(t)&&t>=0,(()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`))}))}function vk(e,t,n){if(0===t)return 0;if(1===t)return e[0];let a=e[e.length-1];for(let t=0;t<e.length-1;++t)a+=n[t]*e[t];return a}function bk(e,t,n){if(0===t)return[];if(1===t)return[e];const a=new Array(t);for(let t=0;t<a.length-1;++t)a[t]=Math.floor(e/n[t]),e-=a[t]*n[t];return a[a.length-1]=e,a}function yk(e){return e&&e.then&&"function"==typeof e.then}const wk="tfjsflags";class xk{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=kk,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(Ck().getBool("IS_TEST")||Ck().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`)),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){const t=this.urlFlags[e];Ck().getBool("IS_TEST")||Ck().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${t}.`),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];const t=this.evaluateFlag(e);if(yk(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;const e=this.getQueryParams(this.global.location.search);if(wk in e){e.tfjsflags.split(",").forEach((e=>{const[t,n]=e.split(":");this.urlFlags[t]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error(`Could not parse value flag value ${t} for flag ${e}.`)}(t,n)}))}}}function kk(e){const t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,((e,...n)=>(function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,n[0],n[1]),n.join("=")))),t}function Ck(){return Sk}let Ek,Sk=null;function $k(){if(null==Ek){let e;if("undefined"!=typeof window)e=window;else if(void 0!==n.g)e=n.g;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}Ek=e}return Ek}function Tk(e,t){const n=function(){const e=$k();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{const a=t();return n.set(e,a),n.get(e)}}const Ik="Abs",Nk="Acos",Ok="Acosh",Rk="Add",Ak="AddN",Mk="All",Bk="Any",Pk="ArgMax",Dk="ArgMin",Fk="Asin",_k="Asinh",Lk="Atan",zk="Atanh",Vk="Atan2",Wk="AvgPool",Hk="AvgPoolGrad",jk="AvgPool3D",Uk="AvgPool3DGrad",Gk="BatchMatMul",qk="BatchToSpaceND",Xk="Bincount",Yk="BroadcastArgs",Kk="Cast",Jk="Ceil",Zk="ClipByValue",Qk="Complex",eC="ComplexAbs",tC="Concat",nC="Conv2D",aC="Conv2DBackpropFilter",rC="Conv2DBackpropInput",oC="Conv3D",sC="Conv3DBackpropFilterV2",iC="Conv3DBackpropInputV2",lC="Cos",uC="Cosh",cC="Cumsum",pC="CropAndResize",dC="DenseBincount",hC="DepthToSpace",fC="DepthwiseConv2dNative",mC="DepthwiseConv2dNativeBackpropFilter",gC="DepthwiseConv2dNativeBackpropInput",vC="Diag",bC="Dilation2D",yC="Dilation2DBackpropInput",wC="Dilation2DBackpropFilter",xC="RealDiv",kC="Einsum",CC="Elu",EC="EluGrad",SC="Erf",$C="Equal",TC="Exp",IC="ExpandDims",NC="Expm1",OC="FFT",RC="Fill",AC="FlipLeftRight",MC="Floor",BC="FloorDiv",PC="FusedBatchNorm",DC="GatherV2",FC="GatherNd",_C="Greater",LC="GreaterEqual",zC="Identity",VC="IFFT",WC="Imag",HC="IsFinite",jC="IsInf",UC="IsNan",GC="LeakyRelu",qC="Less",XC="LessEqual",YC="LinSpace",KC="Log",JC="Log1p",ZC="LogicalAnd",QC="LogicalNot",eE="LogicalOr",tE="LRN",nE="LRNGrad",aE="Max",rE="Maximum",oE="MaxPool",sE="MaxPoolGrad",iE="MaxPool3D",lE="MaxPool3DGrad",uE="MaxPoolWithArgmax",cE="Mean",pE="Min",dE="Minimum",hE="MirrorPad",fE="Mod",mE="Multinomial",gE="Multiply",vE="Neg",bE="NotEqual",yE="NonMaxSuppressionV3",wE="NonMaxSuppressionV4",xE="NonMaxSuppressionV5",kE="OnesLike",CE="OneHot",EE="Pack",SE="PadV2",$E="Pow",TE="Prelu",IE="Prod",NE="Range",OE="Real",RE="Reciprocal",AE="Relu",ME="Reshape",BE="ResizeNearestNeighbor",PE="ResizeNearestNeighborGrad",DE="ResizeBilinear",FE="ResizeBilinearGrad",_E="Relu6",LE="Reverse",zE="Round",VE="Rsqrt",WE="ScatterNd",HE="Select",jE="Selu",UE="Slice",GE="Sin",qE="Sinh",XE="Sign",YE="Sigmoid",KE="Softplus",JE="Sqrt",ZE="Sum",QE="SpaceToBatchND",eS="SplitV",tS="Softmax",nS="SparseFillEmptyRows",aS="SparseReshape",rS="SparseSegmentMean",oS="SparseSegmentSum",sS="SparseToDense",iS="SquaredDifference",lS="Square",uS="StridedSlice",cS="StringNGrams",pS="StringSplit",dS="StringToHashBucketFast",hS="Sub",fS="Tan",mS="Tanh",gS="Tile",vS="TopK",bS="Transform",yS="Transpose",wS="Unique",xS="Unpack",kS="UnsortedSegmentSum",CS="ZerosLike",ES="Step",SS="FromPixels",$S="RotateWithOffset",TS="_FusedMatMul",IS="FusedConv2D",NS="FusedDepthwiseConv2D";function OS(...e){Ck().getBool("IS_TEST")||Ck().getBool("PROD")||console.warn(...e)}function RS(...e){Ck().getBool("IS_TEST")||Ck().getBool("PROD")||console.log(...e)}const AS=Tk("kernelRegistry",(()=>new Map)),MS=Tk("gradRegistry",(()=>new Map));function BS(e,t){const n=LS(e,t);return AS.get(n)}function PS(e){return MS.get(e)}function DS(e){const t=AS.entries(),n=[];for(;;){const{done:a,value:r}=t.next();if(a)break;const[o,s]=r,[i]=o.split("_");i===e&&n.push(s)}return n}function FS(e){const{kernelName:t,backendName:n}=e,a=LS(t,n);AS.has(a)&&OS(`The kernel '${t}' for backend '${n}' is already registered`),AS.set(a,e)}function _S(e){const{kernelName:t}=e;MS.has(t)&&Ck().getBool("DEBUG")&&OS(`Overriding the gradient for '${t}'`),MS.set(t,e)}function LS(e,t){return`${t}_${e}`}var zS=n(720);const VS=n.n(zS)()||zS;function WS(e){return VS.fromString(e,!0,16)}const HS=WS("c3a5c85c97cb3127"),jS=WS("b492b66fbe98f273"),US=WS("9ae16a3b2f90404f");function GS(e){return e.xor(e.shru(47))}function qS(e,t,n){const a=e.slice(t,t+n);return VS.fromBytes(Array.from(a),!0,!0)}function XS(e,t){return qS(e,t,8)}function YS(e,t){return qS(e,t,4)}function KS(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function JS(e,t,n=WS("9ddfea08eb382d69")){let a=e.xor(t).mul(n);a=a.xor(a.shru(47));let r=t.xor(a).mul(n);return r=r.xor(r.shru(47)),r=r.mul(n),r}function ZS(e,t,n,a){return function(e,t,n,a,r,o){r=r.add(e),o=KS(o.add(r).add(a),21);const s=r;return r=(r=r.add(t)).add(n),o=o.add(KS(r,44)),[r.add(a),o.add(s)]}(XS(e,t),XS(e,t+8),XS(e,t+16),XS(e,t+24),n,a)}function QS(e,t=e.length){const n=VS.fromNumber(81,!0);if(t<=32)return t<=16?function(e,t=e.length){if(t>=8){const n=US.add(2*t),a=XS(e,0).add(US),r=XS(e,t-8);return JS(KS(r,37).mul(n).add(a),KS(a,25).add(r).mul(n),n)}if(t>=4){const n=US.add(2*t);return JS(YS(e,0).shl(3).add(t),YS(e,t-4),n)}if(t>0){const n=e[0]+(e[t>>1]<<8),a=t+(e[t-1]<<2);return GS(US.mul(n).xor(HS.mul(a))).mul(US)}return US}(e,t):function(e,t=e.length){const n=US.add(2*t),a=XS(e,0).mul(jS),r=XS(e,8),o=XS(e,t-8).mul(n),s=XS(e,t-16).mul(US);return JS(KS(a.add(r),43).add(KS(o,30)).add(s),a.add(KS(r.add(US),18)).add(o),n)}(e,t);if(t<=64)return function(e,t=e.length){const n=US.add(2*t),a=XS(e,0).mul(US),r=XS(e,8),o=XS(e,t-8).mul(n),s=XS(e,t-16).mul(US),i=KS(a.add(r),43).add(KS(o,30)).add(s),l=JS(i,a.add(KS(r.add(US),18)).add(o),n),u=XS(e,16).mul(n),c=XS(e,24),p=i.add(XS(e,t-32)).mul(n),d=l.add(XS(e,t-24)).mul(n);return JS(KS(u.add(c),43).add(KS(p,30)).add(d),u.add(KS(c.add(a),18)).add(p),n)}(e,t);let a=n,r=n.mul(jS).add(113),o=GS(r.mul(US).add(113)).mul(US),s=[VS.UZERO,VS.UZERO],i=[VS.UZERO,VS.UZERO];a=a.mul(US).add(XS(e,0));let l=0;const u=64*(t-1>>6),c=u+(t-1&63)-63;do{a=KS(a.add(r).add(s[0]).add(XS(e,l+8)),37).mul(jS),r=KS(r.add(s[1]).add(XS(e,l+48)),42).mul(jS),a=a.xor(i[1]),r=r.add(s[0]).add(XS(e,l+40)),o=KS(o.add(i[0]),33).mul(jS),s=ZS(e,l,s[1].mul(jS),a.add(i[0])),i=ZS(e,l+32,o.add(i[1]),r.add(XS(e,l+16))),[o,a]=[a,o],l+=64}while(l!==u);const p=jS.add(o.and(255).shl(1));return l=c,i[0]=i[0].add(t-1&63),s[0]=s[0].add(i[0]),i[0]=i[0].add(s[0]),a=KS(a.add(r).add(s[0]).add(XS(e,l+8)),37).mul(p),r=KS(r.add(s[1]).add(XS(e,l+48)),42).mul(p),a=a.xor(i[1].mul(9)),r=r.add(s[0].mul(9).add(XS(e,l+40))),o=KS(o.add(i[0]),33).mul(p),s=ZS(e,l,s[1].mul(p),a.add(i[0])),i=ZS(e,l+32,o.add(i[1]),r.add(XS(e,l+16))),[o,a]=[a,o],JS(JS(s[0],i[0],p).add(GS(r).mul(HS)).add(o),JS(s[1],i[1],p).add(a),p)}function e$(e,t){return"string"===t?a$(e):t$([e],t)}function t$(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=jx(e)),Ck().getBool("DEBUG")&&function(e,t){for(let n=0;n<e.length;n++){const a=e[n];if(isNaN(a)||!isFinite(a))throw Error(`A tensor of type ${t} being uploaded contains ${a}.`)}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){const t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error(`Unknown data type ${t}`)}function n$(){return Ck().platform.now()}function a$(e,t="utf-8"){return t=t||"utf-8",Ck().platform.encode(e,t)}function r$(e,t="utf-8"){return t=t||"utf-8",Ck().platform.decode(e,t)}class o${constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new i$)}profileKernel(e,t,n){let a;const r=()=>{a=n()};let o;const s=n$();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(r);else{r();for(const e of a)e.dataSync();o=Promise.resolve({kernelMs:n$()-s})}if(Ck().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let t=0;t<a.length;t++){const n=a[t];n.data().then((t=>{s$(t,n.dtype,e)}))}return{kernelName:e,outputs:a,inputs:t,timeMs:o.then((e=>e.kernelMs)),extraInfo:o.then((e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""))}}logKernelProfile(e){const{kernelName:t,outputs:n,timeMs:a,inputs:r,extraInfo:o}=e;n.forEach((e=>{Promise.all([e.data(),a,o]).then((n=>{this.logger.logKernelProfile(t,e,n[0],n[1],r,n[2])}))}))}}function s$(e,t,n){if("float32"!==t)return!1;for(let t=0;t<e.length;t++){const a=e[t];if(isNaN(a)||!isFinite(a))return console.warn(`Found ${a} in the result of '${n}'`),!0}return!1}class i${logKernelProfile(e,t,n,a,r,o){const s="number"==typeof a?Yx(`${a}ms`,9):a.error,i=Yx(e,25),l=t.rank,u=t.size,c=Yx(t.shape.toString(),14);let p="";for(const e in r){const n=r[e];if(null!=n){const a=n.shape||t.shape,r=a.length;p+=`${e}: ${r}D ${r>0?a:""} `}}console.log(`%c${i}\t%c${s}\t%c${l}D ${c}\t%c${u}\t%c${p}\t%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}function l$(e,t,n,a){const r=ck(t),o=function(e,t,n,a){const r=Ux(t),o=a[a.length-1],s=new Array(o).fill(0),i=t.length,l="complex64"===n?d$(e):e;if(i>1)for(let e=0;e<r/o;e++){const t=e*o;for(let e=0;e<o;e++)s[e]=Math.max(s[e],u$(l[t+e],0,n).length)}return s}(e,t,n,r),s=t.length,i=p$(e,t,n,r,o),l=["Tensor"];return a&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${s}`),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(i.map((e=>"    "+e)).join("\n")),l.join("\n")}function u$(e,t,n){let a;return a=Array.isArray(e)?`${parseFloat(e[0].toFixed(7))} + ${parseFloat(e[1].toFixed(7))}j`:ok(e)?`'${e}'`:"bool"===n?c$(e):parseFloat(e.toFixed(7)).toString(),Yx(a,t)}function c$(e){return 0===e?"false":"true"}function p$(e,t,n,a,r,o=!0){const s="complex64"===n?2:1,i=t[0],l=t.length;if(0===l){if("complex64"===n){return[u$(d$(e)[0],0,n)]}return"bool"===n?[c$(e[0])]:[e[0].toString()]}if(1===l){if(i>20){const t=3*s;let a=Array.from(e.slice(0,t)),o=Array.from(e.slice((i-3)*s,i*s));return"complex64"===n&&(a=d$(a),o=d$(o)),["["+a.map(((e,t)=>u$(e,r[t],n))).join(", ")+", ..., "+o.map(((e,t)=>u$(e,r[i-3+t],n))).join(", ")+"]"]}return["["+("complex64"===n?d$(e):Array.from(e)).map(((e,t)=>u$(e,r[t],n))).join(", ")+"]"]}const u=t.slice(1),c=a.slice(1),p=a[0]*s,d=[];if(i>20){for(let t=0;t<3;t++){const a=t*p,o=a+p;d.push(...p$(e.slice(a,o),u,n,c,r,!1))}d.push("...");for(let t=i-3;t<i;t++){const a=t*p,o=a+p;d.push(...p$(e.slice(a,o),u,n,c,r,t===i-1))}}else for(let t=0;t<i;t++){const a=t*p,o=a+p;d.push(...p$(e.slice(a,o),u,n,c,r,t===i-1))}const h=2===l?",":"";d[0]="["+d[0]+h;for(let e=1;e<d.length-1;e++)d[e]=" "+d[e]+h;let f=",\n";for(let e=2;e<l;e++)f+="\n";return d[d.length-1]=" "+d[d.length-1]+"]"+(o?"":f),d}function d$(e){const t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}class h${constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=Ux(e),null!=n){const e=n.length;Vx(e===this.size,(()=>`Length of values '${e}' does not match the size inferred by the shape '${this.size}'.`))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||tk(t,this.size),this.strides=ck(e)}set(e,...t){0===t.length&&(t=[0]),Vx(t.length===this.rank,(()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`));const n=this.locToIndex(t);this.values[n]=e}get(...e){0===e.length&&(e=[0]);let t=0;for(const n of e){if(n<0||n>=this.shape[t]){const t=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(t)}t++}let n=e[e.length-1];for(let t=0;t<e.length-1;++t)n+=this.strides[t]*e[t];return this.values[n]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];const t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return f$().makeTensor(this.values,this.shape,this.dtype)}}let f$=null,m$=null,g$=null;class v${constructor(e,t,n,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Ux(e),this.strides=ck(e),this.dataId=n,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return m$.buffer(this.shape,this.dtype,e)}bufferSync(){return m$.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return dk(this.shape,e,"complex64"===this.dtype)}arraySync(){return dk(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();const e=f$().read(this.dataId);if("string"===this.dtype){const t=await e;try{return t.map((e=>r$(e)))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataSync(){this.throwIfDisposed();const e=f$().readSync(this.dataId);if("string"===this.dtype)try{return e.map((e=>r$(e)))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await f$().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(f$().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return m$.print(this,e)}clone(){return this.throwIfDisposed(),m$.clone(this)}toString(e=!1){return l$(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),m$.cast(this,e)}variable(e=!0,t,n){return this.throwIfDisposed(),f$().makeVariable(this,e,t,n)}}function b$(){return Tk("Tensor",(()=>v$))}Object.defineProperty(v$,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),b$();class y$ extends v${constructor(e,t,n,a){super(e.shape,e.dtype,e.dataId,a),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Gx(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);f$().disposeTensor(this),this.dataId=e.dataId,f$().incRef(this,null)}dispose(){f$().disposeVariable(this),this.isDisposedInternal=!0}}var w$,x$,k$,C$,E$;Object.defineProperty(y$,Symbol.hasInstance,{value:e=>e instanceof v$&&null!=e.assign&&e.assign instanceof Function}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(w$||(w$={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(x$||(x$={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(k$||(k$={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(C$||(C$={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(E$||(E$={}));const S$={float32:C$,int32:x$,bool:k$,complex64:E$};function $$(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return S$[e][t]}function T$(e){return $$(e,"int32")}function I$(e,t){if(e.dtype===t.dtype)return[e,t];const n=$$(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function N$(e,t){return t.some((t=>t.id===e.id))}function O$(e){const t=[];return R$(e,t,new Set),t}function R$(e,t,n){if(null==e)return;if(e instanceof v$)return void t.push(e);if(a=e,!Array.isArray(a)&&"object"!=typeof a)return;var a;const r=e;for(const e in r){const a=r[e];n.has(a)||(n.add(a),R$(a,t,n))}}function A$(e){return null!=e.kernelName}class M${constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((e=>e.name))))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class B${constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new M$}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then((()=>{}));if(null!=this.backendInstance)return;const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{const{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,n=1){return e in this.registryFactory?(OS(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;const{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new o$(this.backendInstance),!0}setupRegisteredKernels(){DS(this.backendName).forEach((e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)}))}disposeRegisteredKernels(e){DS(e).forEach((t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])}))}initializeBackend(e){const t=this.registryFactory[e];if(null==t)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const n=t.factory();if(!n||n instanceof Px||"function"!=typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{const t=++this.pendingBackendInitId,a=n.then((n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0))).catch((n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,OS(`Initialization of backend ${e} failed`),OS(n.stack||n.message)),!1)));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}}catch(t){return OS(`Initialization of backend ${e} failed`),OS(t.stack||t.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority))}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let t=0;t<e.length;t++){const n=e[t],{success:a,asyncInit:r}=this.initializeBackend(n);if(r||a)return{name:n,asyncInit:r}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){const n=this.state.tensorInfo.get(t),a=n.backend,r=this.readSync(t),o=a.refCount(t);a.disposeData(t,!0),n.backend=e,e.move(t,r,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,a=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((()=>this.startScope(a)),(()=>this.endScope(n)),(()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n)))}scopedRun(e,t,n){e();try{const e=n();return t(),e}catch(e){throw t(),e}}nextTensorId(){return B$.nextTensorId++}nextVariableId(){return B$.nextVariableId++}clone(e){const t=D$.runKernel(zC,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(e=>({x:()=>{const t={x:e},n={dtype:"float32"};return D$.runKernel(Kk,t,n)}})),[],{}),t}runKernel(e,t,n){null==this.backendName&&this.backend;if(!(null!=BS(e,this.backendName)))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){const a=this.backend.numDataIds();let r=0;n.forEach((e=>{r+="complex64"===e.dtype?3:1}));const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=a-t-r-o;if(s>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${s} data ids) after running '${e}'`)}runKernelFunc(e){let t,n=[];const a=this.isTapeOn(),r=this.state.numBytes,o=this.state.numTensors;let s,i;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const l=A$(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(A$(e)){const{kernelName:t,inputs:r,attrs:o}=e;null==this.backendName&&this.backend;const l=BS(t,this.backendName);Vx(null!=l,(()=>`Cannot find registered kernel '${t}' for backend '${this.backendName}'`)),s=()=>{const e=this.backend.numDataIds();i=l.kernelFunc({inputs:r,attrs:o,backend:this.backend});const s=Array.isArray(i)?i:[i];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,s);const u=s.map((e=>{if(null!=e.rank)return e;const{dataId:t,shape:n,dtype:a}=e;return this.makeTensorFromDataId(t,n,a)}));if(a){const e=this.getTensorsForGradient(t,r,u);n=this.saveTensorsForBackwardMode(e)}return u}}else{const{forwardFunc:t}=e,r=e=>{a&&(n=e.map((e=>this.keep(this.clone(e)))))};s=()=>{const e=this.backend.numDataIds();i=this.tidy((()=>t(this.backend,r)));const n=Array.isArray(i)?i:[i];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,e,n),n}}const{inputs:u,attrs:c}=e,p=A$(e)?null:e.backwardsFunc;let d;return this.scopedRun((()=>this.state.kernelDepth++),(()=>this.state.kernelDepth--),(()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(d=this.profiler.profileKernel(l,u,(()=>s())),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(d),t=d.outputs):t=s()})),a&&this.addTapeNode(l,u,t,p,n,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-r,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map((e=>null!=u[e]?u[e].shape:null)),outputShapes:t.map((e=>e.shape)),kernelTimeMs:d.timeMs,extraInfo:d.extraInfo}),Array.isArray(i)?t:t[0]}saveTensorsForBackwardMode(e){return e.map((e=>this.keep(this.clone(e))))}getTensorsForGradient(e,t,n){const a=PS(e);if(null!=a){const e=a.inputsToSave||[],r=a.outputsToSave||[];let o;a.saveAllInputs?(Vx(Array.isArray(t),(()=>"saveAllInputs is true, expected inputs to be an array.")),o=Object.keys(t).map((e=>t[e]))):o=e.map((e=>t[e]));const s=n.filter(((e,t)=>r[t]));return o.concat(s)}return[]}makeTensor(e,t,n,a){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",a=a||this.backend;let r=e;"string"===n&&ok(e[0])&&(r=e.map((e=>a$(e))));const o=a.write(r,t,n),s=new v$(t,n,o,this.nextTensorId());if(this.trackTensor(s,a),"string"===n){const e=this.state.tensorInfo.get(o),t=function(e){if(null==e)return 0;let t=0;return e.forEach((e=>t+=e.length)),t}(r);this.state.numBytes+=t-e.bytes,e.bytes=t}return s}makeTensorFromDataId(e,t,n,a){const r=new v$(t,n=n||"float32",e,this.nextTensorId());return this.trackTensor(r,a),r}makeVariable(e,t=!0,n,a){n=n||this.nextVariableId().toString(),null!=a&&a!==e.dtype&&(e=e.cast(a));const r=new y$(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[r.name])throw new Error(`Variable with name ${r.name} was already registered`);return this.state.registeredVariables[r.name]=r,this.incRef(r,this.backend),r}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*rk(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof y$||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){const t=e.size*rk(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map((e=>e.totalBytesSnapshot))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const e of this.state.activeProfile.kernels)e.kernelTimeMs=await e.kernelTimeMs,e.extraInfo=await e.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,a,r,o){const s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:r},i=PS(e);null!=i&&(a=i.gradFunc),null!=a&&(s.gradient=e=>(e=e.map(((e,t)=>{if(null==e){const e=n[t],a=fk(e.size,e.dtype);return this.makeTensor(a,e.shape,e.dtype)}return e})),a(e.length>1?e:e[0],r,o))),this.state.activeTape.push(s)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){const t=O$(e),n=new Set(t.map((e=>e.id)));for(let e=0;e<this.state.activeScope.track.length;e++){const t=this.state.activeScope.track[e];t.kept||n.has(t.id)||t.dispose()}const a=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach((e=>{e.kept||e.scopeId!==a.id||this.track(e)}))}gradients(e,t,n,a=!1){if(Vx(t.length>0,(()=>"gradients() received an empty list of xs.")),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);const r=this.scopedRun((()=>this.startTape()),(()=>this.endTape()),(()=>this.tidy("forward",e)));Vx(r instanceof v$,(()=>"The result y returned by f() must be a tensor."));const o=function(e,t,n){const a={},r={};for(let e=0;e<t.length;e++)a[t[e].id]=!0;for(let n=0;n<e.length;n++){const o=e[n],s=o.inputs;for(const e in s){const n=s[e];let i=!1;for(let e=0;e<t.length;e++)if(a[n.id]){o.outputs.forEach((e=>a[e.id]=!0)),i=!0,r[o.id]=!0;break}if(i)break}}const o={};o[n.id]=!0;const s={};for(let t=e.length-1;t>=0;t--){const n=e[t],a=n.inputs;for(let e=0;e<n.outputs.length;e++)if(o[n.outputs[e].id]){for(const e in a)o[a[e].id]=!0,s[n.id]=!0;break}}const i=[];for(let t=0;t<e.length;t++){const n=e[t];if(r[n.id]&&s[n.id]){const e={};for(const t in n.inputs){const r=n.inputs[t];a[r.id]&&(e[t]=r)}const t=Object.assign({},n);t.inputs=e,t.outputs=n.outputs,i.push(t)}}return i}(this.state.activeTape,t,r);if(!a&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(()=>{const e={};e[r.id]=null==n?function(e){const t=hk(Ux(e),"float32");return D$.makeTensor(t,e,"float32")}(r.shape):n,function(e,t,n,a){for(let r=t.length-1;r>=0;r--){const o=t[r],s=[];if(o.outputs.forEach((t=>{const n=e[t.id];null!=n?s.push(n):s.push(null)})),null==o.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${o.kernelName}.`);const i=o.gradient(s);for(const t in o.inputs){if(!(t in i))throw new Error(`Cannot backprop through input ${t}. Available gradients found: ${Object.keys(i)}.`);const r=n((()=>i[t]()));if("float32"!==r.dtype)throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input ${t} must have 'float32' dtype, but has '${r.dtype}'`);const s=o.inputs[t];if(!Gx(r.shape,s.shape))throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input '${t}' has shape '${r.shape}', which does not match the shape of the input '${s.shape}'`);if(null==e[s.id])e[s.id]=r;else{const t=e[s.id];e[s.id]=a(t,r),t.dispose()}}}}(e,o,(e=>this.tidy(e)),F$);const a=t.map((t=>e[t.id]));return 0===this.state.gradientDepth&&(this.state.activeTape.forEach((e=>{for(const t of e.saved)t.dispose()})),this.state.activeTape=null),{value:r,grads:a}}))}customGrad(e){return Vx(lk(e),(()=>"The f passed in customGrad(f) must be a function.")),(...t)=>{let n;Vx(t.every((e=>e instanceof v$)),(()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors"));const a={};t.forEach(((e,t)=>{a[t]=e}));return this.runKernelFunc({forwardFunc:(a,r)=>(n=e(...t,r),Vx(n.value instanceof v$,(()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor")),Vx(lk(n.gradFunc),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.")),n.value),backwardsFunc:(e,a)=>{const r=n.gradFunc(e,a),o=Array.isArray(r)?r:[r];Vx(o.length===t.length,(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).")),Vx(o.every((e=>e instanceof v$)),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."));const s={};return o.forEach(((e,t)=>{s[t]=()=>e})),s},inputs:a})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}async time(e){const t=n$(),n=await this.backend.time(e);return n.wallMs=n$()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new M$;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function P$(){const e=$k();if(null==e._tfengine){const t=new xk(e);e._tfengine=new B$(t)}var t;return t=e._tfengine.ENV,Sk=t,f$=()=>e._tfengine,e._tfengine}B$.nextTensorId=0,B$.nextVariableId=0;const D$=P$();function F$(e,t){const n={a:e,b:t};return D$.runKernel(Rk,n)}let _$;function L$(e){if(void 0!==_$)return _$;if(e||"undefined"!=typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;const t=e.userAgent||e.vendor||("undefined"!=typeof window?window.opera:"");if(!t){const t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function z$(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}const V$=Ck();function W$(e,t){let n=e;if(ak(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];const a=[];for(;Array.isArray(n)||ak(n)&&"string"!==t;)a.push(n.length),n=n[0];return Array.isArray(e)&&Ck().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&H$(e,a,[]),a}function H$(e,t,n){if(n=n||[],!Array.isArray(e)&&!ak(e))return void Vx(0===t.length,(()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`));Vx(t.length>0,(()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${e.length} elements`)),Vx(e.length===t[0],(()=>`Element arr[${n.join("][")}] should have ${t[0]} elements, but has ${e.length} elements`));const a=t.slice(1);for(let t=0;t<e.length;++t)H$(e[t],a,n.concat(t))}function j$(e,t,n,a){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error(`Argument '${n}' passed to '${a}' must be ${e} tensor, but got ${t} tensor`)}}function U$(e,t,n,a="numeric"){if(e instanceof v$)return j$(a,e.dtype,t,n),e;let r=ik(e);if("string"!==r&&["bool","int32","float32"].indexOf(a)>=0&&(r=a),j$(a,r,t,n),null==e||!ak(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){const a=null==e?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${a}'`)}const o=W$(e,r);ak(e)||Array.isArray(e)||(e=[e]);const s="string"!==r?t$(e,r):jx(e,[],!0);return D$.makeTensor(s,o,r)}function G$(e,t,n,a="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map(((e,r)=>U$(e,`${t}[${r}]`,n,a)))}V$.registerFlag("DEBUG",(()=>!1),(e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),V$.registerFlag("IS_BROWSER",(()=>z$())),V$.registerFlag("IS_NODE",(()=>"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node)),V$.registerFlag("IS_CHROME",(()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))),V$.registerFlag("PROD",(()=>!1)),V$.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(()=>V$.getBool("DEBUG"))),V$.registerFlag("DEPRECATION_WARNINGS_ENABLED",(()=>!0)),V$.registerFlag("IS_TEST",(()=>!1)),V$.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(()=>!0)),V$.registerFlag("WRAP_TO_IMAGEBITMAP",(()=>!1));function q$(e){const t=Object.keys(e);if(1!==t.length)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0];const a=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";const r=(...e)=>{D$.startScope(n);try{const t=a(...e);return yk(t)&&console.error("Cannot return a Promise inside of tidy."),D$.endScope(t),t}catch(e){throw D$.endScope(null),e}};return Object.defineProperty(r,"name",{value:n,configurable:!0}),r}const X$=q$({complex_:function(e,t){const n=U$(e,"real","complex"),a=U$(t,"imag","complex");Wx(n.shape,a.shape,`real and imag shapes, ${n.shape} and ${a.shape}, must match in call to tf.complex().`);const r={real:n,imag:a};return D$.runKernel(Qk,r)}});function Y$(e,t,n,a){if(null==a&&(a=ik(e)),"complex64"===a)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!ak(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){gk(t);const e=Ux(t),a=Ux(n);Vx(e===a,(()=>`Based on the provided shape, [${t}], the tensor should have ${e} values but has ${a}`));for(let e=0;e<n.length;++e){const a=n[e],r=e!==n.length-1||a!==Ux(t.slice(e));Vx(n[e]===t[e]||!r,(()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `))}}return ak(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==a?t$(e,a):jx(e,[],!0),D$.makeTensor(e,t,a)}function K$(e,t,n){return Y$(e,t,W$(e,n),n)}const J$={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};async function Z$(e,t){const n=[],a=[],r=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);for(let o=0;o<r.length;++o){const s=r[o],i=Array.isArray(e)?e[o].tensor:e[s];if("float32"!==i.dtype&&"int32"!==i.dtype&&"bool"!==i.dtype&&"string"!==i.dtype&&"complex64"!==i.dtype)throw new Error(`Unsupported dtype in weight '${s}': ${i.dtype}`);const l={name:s,shape:i.shape,dtype:i.dtype};if("string"===i.dtype){const e=new Promise((async e=>{const t=await i.bytes(),n=t.reduce(((e,t)=>e+t.length),0)+4*t.length,a=new Uint8Array(n);let r=0;for(let e=0;e<t.length;e++){const n=t[e],o=new Uint8Array(new Uint32Array([n.length]).buffer);a.set(o,r),r+=4,a.set(n,r),r+=n.length}e(a)}));a.push(e)}else a.push(i.data());null!=t&&(l.group=t),n.push(l)}return{data:eT(await Promise.all(a)),specs:n}}function Q$(e,t){const n={};let a,r=0;for(const o of t){const t=o.name,s=o.dtype,i=o.shape,l=Ux(i);let u;if("quantization"in o){const n=o.quantization;if("uint8"===n.dtype||"uint16"===n.dtype){if(!("min"in n)||!("scale"in n))throw new Error(`Weight ${o.name} with quantization ${n.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==n.dtype)throw new Error(`Weight ${o.name} has unknown quantization dtype ${n.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==s)throw new Error(`Weight ${o.name} is quantized with ${n.dtype} which only supports weights of type float32 not ${s}.`)}const i=J$[n.dtype],c=e.slice(r,r+l*i),p="uint8"===n.dtype?new Uint8Array(c):new Uint16Array(c);if("float32"===s)if("uint8"===n.dtype||"uint16"===n.dtype){u=new Float32Array(p.length);for(let e=0;e<p.length;e++){const t=p[e];u[e]=t*n.scale+n.min}}else{if("float16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type float32.`);void 0===a&&(a=iT()),u=a(p)}else{if("int32"!==s)throw new Error(`Unsupported dtype in weight '${t}': ${s}`);if("uint8"!==n.dtype&&"uint16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type int32.`);u=new Int32Array(p.length);for(let e=0;e<p.length;e++){const t=p[e];u[e]=Math.round(t*n.scale+n.min)}}r+=l*i}else if("string"===s){const t=Ux(o.shape);u=[];for(let n=0;n<t;n++){const t=new Uint32Array(e.slice(r,r+4))[0];r+=4;const n=new Uint8Array(e.slice(r,r+t));u.push(n),r+=t}}else{const a=J$[s],o=e.slice(r,r+l*a);if("float32"===s)u=new Float32Array(o);else if("int32"===s)u=new Int32Array(o);else if("bool"===s)u=new Uint8Array(o);else{if("complex64"!==s)throw new Error(`Unsupported dtype in weight '${t}': ${s}`);{u=new Float32Array(o);const e=new Float32Array(u.length/2),a=new Float32Array(u.length/2);for(let t=0;t<e.length;t++)e[t]=u[2*t],a[t]=u[2*t+1];const r=K$(e,i,"float32"),s=K$(a,i,"float32");n[t]=X$(r,s),r.dispose(),s.dispose()}}r+=l*a}"complex64"!==s&&(n[t]=K$(u,i,s))}return n}function eT(e){if(null===e)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach((e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${e.constructor.name}`)}));const a=new Uint8Array(t);let r=0;return n.forEach((e=>{a.set(new Uint8Array(e.buffer),r),r+=e.byteLength})),a.buffer}const tT="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function nT(e){return tT?Buffer.byteLength(e):new Blob([e]).size}function aT(e){if(1===e.length)return e[0];let t=0;e.forEach((e=>{t+=e.byteLength}));const n=new Uint8Array(t);let a=0;return e.forEach((e=>{n.set(new Uint8Array(e),a),a+=e.byteLength})),n.buffer}function rT(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}async function oT(e,t){const n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),null!=e.weightsManifest){const[a,r]=await t(e.weightsManifest);n.weightSpecs=a,n.weightData=r}return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),n}function sT(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:nT(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:nT(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function iT(){const e=function(){const e=e=>{let t=e<<13,n=0;for(;0==(8388608&t);)n-=8388608,t<<=1;return t&=-8388609,n+=947912704,t|n},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let e=1024;e<2048;e++)t[e]=939524096+(e-1024<<13);return t}(),t=function(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),n=function(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return a=>{const r=new ArrayBuffer(4*a.length),o=new Uint32Array(r);for(let r=0;r<a.length;r++){const s=a[r],i=e[n[s>>10]+(1023&s)]+t[s>>10];o[r]=i}return new Float32Array(r)}}class lT{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==lT.instance&&(lT.instance=new lT),lT.instance}static registerSaveRouter(e){lT.getInstance().saveRouters.push(e)}static registerLoadRouter(e){lT.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return lT.getHandlers(e,"save")}static getLoadHandlers(e,t){return lT.getHandlers(e,"load",t)}static getHandlers(e,t,n){const a=[];return("load"===t?lT.getInstance().loadRouters:lT.getInstance().saveRouters).forEach((t=>{const r=t(e,n);null!==r&&a.push(r)})),a}}const uT="tensorflowjs",cT="models_store",pT="model_info_store";function dT(){if(!Ck().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function hT(e){const t=e.result;t.createObjectStore(cT,{keyPath:"modelPath"}),t.createObjectStore(pT,{keyPath:"modelPath"})}class fT{constructor(e){if(this.indexedDB=dT(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise(((e,n)=>{const a=this.indexedDB.open(uT,1);a.onupgradeneeded=()=>hT(a),a.onsuccess=()=>{const r=a.result;if(null==t){const t=r.transaction(cT,"readonly"),a=t.objectStore(cT).get(this.modelPath);a.onsuccess=()=>{if(null==a.result)return r.close(),n(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));e(a.result.modelArtifacts)},a.onerror=e=>(r.close(),n(a.error)),t.oncomplete=()=>r.close()}else{const a=sT(t),o=r.transaction(pT,"readwrite");let s=o.objectStore(pT);const i=s.put({modelPath:this.modelPath,modelArtifactsInfo:a});let l;i.onsuccess=()=>{l=r.transaction(cT,"readwrite");const i=l.objectStore(cT).put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:a});i.onsuccess=()=>e({modelArtifactsInfo:a}),i.onerror=e=>{s=o.objectStore(pT);const t=s.delete(this.modelPath);t.onsuccess=()=>(r.close(),n(i.error)),t.onerror=e=>(r.close(),n(i.error))}},i.onerror=e=>(r.close(),n(i.error)),o.oncomplete=()=>{null==l?r.close():l.oncomplete=()=>r.close()}}},a.onerror=e=>n(a.error)}))}}fT.URL_SCHEME="indexeddb://";const mT=e=>{return Ck().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(fT.URL_SCHEME)?(t=e.slice(fT.URL_SCHEME.length),new fT(t)):null;var t};lT.registerSaveRouter(mT),lT.registerLoadRouter(mT);class gT{constructor(){this.indexedDB=dT()}async listModels(){return new Promise(((e,t)=>{const n=this.indexedDB.open(uT,1);n.onupgradeneeded=()=>hT(n),n.onsuccess=()=>{const a=n.result,r=a.transaction(pT,"readonly"),o=r.objectStore(pT).getAll();o.onsuccess=()=>{const t={};for(const e of o.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},o.onerror=e=>(a.close(),t(o.error)),r.oncomplete=()=>a.close()},n.onerror=e=>t(n.error)}))}async removeModel(e){var t;return e=(t=e).startsWith(fT.URL_SCHEME)?t.slice(fT.URL_SCHEME.length):t,new Promise(((t,n)=>{const a=this.indexedDB.open(uT,1);a.onupgradeneeded=()=>hT(a),a.onsuccess=()=>{const r=a.result,o=r.transaction(pT,"readwrite"),s=o.objectStore(pT),i=s.get(e);let l;i.onsuccess=()=>{if(null==i.result)return r.close(),n(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const a=s.delete(e),o=()=>{l=r.transaction(cT,"readwrite");const a=l.objectStore(cT).delete(e);a.onsuccess=()=>t(i.result.modelArtifactsInfo),a.onerror=e=>n(i.error)};a.onsuccess=o,a.onerror=e=>(o(),r.close(),n(i.error))}},i.onerror=e=>(r.close(),n(i.error)),o.oncomplete=()=>{null==l?r.close():l.oncomplete=()=>r.close()}},a.onerror=e=>n(a.error)}))}}const vT="/",bT="tensorflowjs_models",yT="info",wT="model_topology",xT="weight_specs",kT="weight_data",CT="model_metadata";function ET(e){return{info:[bT,e,yT].join(vT),topology:[bT,e,wT].join(vT),weightSpecs:[bT,e,xT].join(vT),weightData:[bT,e,kT].join(vT),modelMetadata:[bT,e,CT].join(vT)}}function ST(e){for(const t of Object.values(e))window.localStorage.removeItem(t)}function $T(e){const t=e.split(vT);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(vT)}class TT{constructor(e){if(!Ck().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=ET(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),a=sT(e);try{this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(tT)return Buffer.from(e).toString("base64");const t=new Uint8Array(e);let n="";for(let e=0,a=t.length;e<a;e++)n+=String.fromCharCode(t[e]);return btoa(n)}(e.weightData));const r={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(r)),{modelArtifactsInfo:a}}catch(e){throw ST(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${a.modelTopologyBytes}, weightSpecsBytes=${a.weightSpecsBytes}, weightDataBytes=${a.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=n;const a=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==a)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=a;const r=this.LS.getItem(this.keys.modelMetadata);if(null!=r){const e=JSON.parse(r);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(null==o)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=function(e){if(tT){const t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}const t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n.set([t.charCodeAt(e)],e);return n.buffer}(o),t}}TT.URL_SCHEME="localstorage://";const IT=e=>{return Ck().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(TT.URL_SCHEME)?(t=e.slice(TT.URL_SCHEME.length),new TT(t)):null;var t};lT.registerSaveRouter(IT),lT.registerLoadRouter(IT);class NT{constructor(){Vx(Ck().getBool("IS_BROWSER"),(()=>"Current environment is not a web browser")),Vx("undefined"==typeof window||void 0!==window.localStorage,(()=>"Current browser does not appear to support localStorage")),this.LS=window.localStorage}async listModels(){const e={},t=bT+vT,n=vT+yT;for(let a=0;a<this.LS.length;++a){const r=this.LS.key(a);if(r.startsWith(t)&&r.endsWith(n)){e[$T(r)]=JSON.parse(this.LS.getItem(r))}}return e}async removeModel(e){var t;const n=ET(e=(t=e).startsWith(TT.URL_SCHEME)?t.slice(TT.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error(`Cannot find model at path '${e}'`);const a=JSON.parse(this.LS.getItem(n.info));return ST(n),a}}const OT="://";class RT{constructor(){this.managers={}}static getInstance(){return null==RT.instance&&(RT.instance=new RT),RT.instance}static registerManager(e,t){Vx(null!=e,(()=>"scheme must not be undefined or null.")),e.endsWith(OT)&&(e=e.slice(0,e.indexOf(OT))),Vx(e.length>0,(()=>"scheme must not be an empty string."));const n=RT.getInstance();Vx(null==n.managers[e],(()=>`A model store manager is already registered for scheme '${e}'.`)),n.managers[e]=t}static getManager(e){const t=this.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(this.getInstance().managers)}}class AT{fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Browser's encoder only supports utf-8, but got ${t}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}}if(Ck().get("IS_BROWSER")){Ck().setPlatform("browser",new AT);try{RT.registerManager(TT.URL_SCHEME,new NT)}catch(e){}try{RT.registerManager(fT.URL_SCHEME,new gT)}catch(e){}}const MT=()=>n(410);let BT;class PT{constructor(){this.util=n(628),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=Ck().global.fetch?Ck().global.fetch(e,t):(null==BT&&(BT=MT()),BT(e,t))}now(){const e=process.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error(`Node built-in encoder only supports utf-8, but got ${t}`);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}function DT(e,t="float32",n){return t=t||"float32",gk(e),new h$(e,t,n)}Ck().get("IS_NODE")&&Ck().setPlatform("node",new PT);const FT=q$({cast_:function(e,t){const n=U$(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");const a={x:n},r={dtype:t};return D$.runKernel(Kk,a,r)}});const _T=q$({clone_:function(e){const t={x:U$(e,"x","clone","string_or_numeric")};return D$.runKernel(zC,t)}});P$();m$={buffer:DT,cast:FT,clone:_T,print:function(e,t=!1){console.log(e.toString(t))}};function LT(e){return new Promise((e=>setTimeout(e))).then(e)}class zT{constructor(e){if(!Ck().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(zT.URL_SCHEME)&&(e=e.slice(zT.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const n=rT(e,[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]),a=window.URL.createObjectURL(new Blob([JSON.stringify(n)],{type:"application/json"})),r=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(r.download=this.modelJsonFileName,r.href=a,await LT((()=>r.dispatchEvent(new MouseEvent("click")))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=t,await LT((()=>e.dispatchEvent(new MouseEvent("click"))))}return{modelArtifactsInfo:sT(e)}}}}zT.URL_SCHEME="downloads://";function VT(e,t,n,a){!function(e){Vx(null!=e&&Array.isArray(e)&&e.length>0,(()=>"promises must be a none empty array"))}(e),function(e,t){Vx(e>=0&&e<=1,(()=>`Progress fraction must be in range [0, 1], but got startFraction ${e}`)),Vx(t>=0&&t<=1,(()=>`Progress fraction must be in range [0, 1], but got endFraction ${t}`)),Vx(t>=e,(()=>`startFraction must be no more than endFraction, but got startFraction ${e} and endFraction ${t}`))}(n=null==n?0:n,a=null==a?1:a);let r=0;return Promise.all(e.map((o=>(o.then((o=>{const s=n+ ++r/e.length*(a-n);return t(s),o})),o))))}async function WT(e,t){null==t&&(t={});const n=null==t.fetchFunc?Ck().platform.fetch:t.fetchFunc,a=e.map((e=>n(e,t.requestInit,{isBinary:!0}))),r=(null==t.onProgress?await Promise.all(a):await VT(a,t.onProgress,0,.5)).map((e=>e.arrayBuffer()));return null==t.onProgress?await Promise.all(r):await VT(r,t.onProgress,.5,1)}lT.registerSaveRouter((e=>Ck().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(zT.URL_SCHEME)?function(e="model"){return new zT(e)}(e.slice(zT.URL_SCHEME.length)):null));class HT{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(Vx("function"==typeof t.fetchFunc,(()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)")),this.fetch=t.fetchFunc):this.fetch=Ck().platform.fetch,Vx(null!=e&&e.length>0,(()=>"URL path for http must not be null, undefined or empty.")),Array.isArray(e)&&Vx(2===e.length,(()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`)),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=rT(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin");const a=await this.fetch(this.path,t);if(a.ok)return{modelArtifactsInfo:sT(e),responses:[a]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${a.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch(e){let t=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const n=t.modelTopology,a=t.weightsManifest;if(null==n&&null==a)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return oT(t,(e=>this.loadWeights(e)))}async loadWeights(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,a]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),a=e.substring(0,t),r=n>t?e.substring(n):"";return[a+"/",r]}(t),r=this.weightPathPrefix||n,o=[];for(const t of e)o.push(...t.weights);const s=[],i=[];for(const t of e)for(const e of t.paths)null!=this.weightUrlConverter?i.push(this.weightUrlConverter(e)):s.push(r+e+a);this.weightUrlConverter&&s.push(...await Promise.all(i));return[o,aT(await WT(s,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress}))]}}function jT(e){return null!=e.match(HT.URL_SCHEME_REGEX)}HT.URL_SCHEME_REGEX=/^https?:\/\//;const UT=(e,t)=>{if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every((e=>jT(e))):jT(e),n)return GT(e,t)}return null};function GT(e,t){return new HT(e,t)}lT.registerSaveRouter(UT),lT.registerLoadRouter(UT);function qT(e,t){const n=e.length,a=[];for(let r=0;r<n;r++){const o=n-1-r,s=e[o]||1;(t[t.length-1-r]||1)>1&&1===s&&a.unshift(o)}return a}function XT(e,t){const n=[];for(let a=0;a<t.length;a++){const r=e[e.length-a-1],o=t.length-a-1,s=t[o];(null==r||1===r&&s>1)&&n.unshift(o)}return n}function YT(e,t){const n=[],a=Math.max(e.length,t.length);for(let r=0;r<a;r++){let a=e[e.length-r-1];null==a&&(a=1);let o=t[t.length-r-1];if(null==o&&(o=1),1===a)n.unshift(o);else if(1===o)n.unshift(a);else{if(a!==o){throw Error(`Operands could not be broadcast together with shapes ${e} and ${t}.`)}n.unshift(a)}}return n}let KT;function JT(e,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,a=!1,r=!1,o=!1,s=!1,i=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)a=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)r=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)o=!0;else if(null!=e.getContext)s=!0;else{if(!("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${e.constructor.name}`);i=!0}if(r){const t=2;if(r&&e.readyState<t)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}if(null!=BS(SS,D$.backendName)){const n={pixels:e},a={numChannels:t};return D$.runKernel(SS,n,a)}const[l,u]=r?[e.videoWidth,e.videoHeight]:[e.width,e.height];let c,p;if(s)c=e.getContext("2d").getImageData(0,0,l,u).data;else if(a||n)c=e.data;else if(o||r||i){if(null==KT)if("undefined"==typeof document){if("undefined"==typeof OffscreenCanvas||"undefined"==typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");KT=new OffscreenCanvas(1,1).getContext("2d")}else KT=document.createElement("canvas").getContext("2d");KT.canvas.width=l,KT.canvas.height=u,KT.drawImage(e,0,0,l,u),c=KT.getImageData(0,0,l,u).data}if(4===t)p=new Int32Array(c);else{const e=l*u;p=new Int32Array(e*t);for(let n=0;n<e;n++)for(let e=0;e<t;++e)p[n*t+e]=c[4*n+e]}return function(e,t,n){if(Hx(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");const a=W$(e,n);if(3!==a.length&&1!==a.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===a.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Y$(e,t,a,n)}(p,[u,l,t],"int32")}const ZT=q$({fromPixels_:JT});function QT(e,t,n){const a=e.shape.length;Vx(a===t.length,(()=>`Error in slice${a}D: Length of begin ${t} must match the rank of the array (${a}).`)),Vx(a===n.length,(()=>`Error in slice${a}D: Length of size ${n} must match the rank of the array (${a}).`));for(let r=0;r<a;++r)Vx(t[r]+n[r]<=e.shape[r],(()=>`Error in slice${a}D: begin[${r}] + size[${r}] (${t[r]+n[r]}) would overflow input.shape[${r}] (${e.shape[r]})`))}function eI(e){const t=[];let n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function tI(e,t,n){const a=[];for(let r=0;r<e.length;r++)a[r]=Math.ceil((t[r]-e[r])/n[r]);return a}function nI(e,t,n,a){const r=[...e];for(let e=r.length;e<a.length;e++)r.push(1);for(let e=0;e<n;e++)0===e?r[t]=1:(r.splice(t,0,1),r.pop());return r}function aI(e,t,n){return n<=e?n:n-(t-1)}function rI(e,t){const n=[];for(let a=0;a<e;a++)n.push(t+a);return n}function oI(e,t,n,a,r,o,s,i,l){const u=e.length;let c=new Array(u),p=new Array(u),d=new Array(u);if(t.length&&n>0){const l=t[0],u=n+1;c=sI(s,l,u,a,e),p=iI(i,l,u,r,e),d=nI(o,l,u,e)}else for(let t=0;t<u;t++)c[t]=uI(s,a,o,e,t,l),p[t]=cI(i,r,o,e,t,l),d[t]=lI(o,t,l);return{begin:c,end:p,strides:d}}function sI(e,t,n,a,r){const o=[...r],s=rI(n,t);for(let r=0;r<o.length;r++)if(s.indexOf(r)>-1)o[r]=0;else{const s=aI(t,n,r);let i=a[s];e&1<<s&&(i=0),o[r]=i}return o}function iI(e,t,n,a,r){const o=[...r],s=rI(n,t);for(let r=0;r<o.length;r++)if(s.indexOf(r)>-1)o[r]=Number.MAX_SAFE_INTEGER;else{const s=aI(t,n,r);let i=a[s];e&1<<s&&(i=Number.MAX_SAFE_INTEGER),o[r]=i}for(let e=0;e<o.length;e++){const t=r[e];o[e]<0&&(o[e]+=t),o[e]=_x(0,o[e],r[e])}return o}function lI(e,t,n){let a=e[t];return(n&1<<t||null==a)&&(a=1),a}function uI(e,t,n,a,r,o){let s=t[r];const i=n[r]||1;(e&1<<r||o&1<<r||null==s)&&(s=i>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const l=a[r];return s<0&&(s+=l),s=_x(0,s,l-1),s}function cI(e,t,n,a,r,o){let s=t[r];const i=n[r]||1;(e&1<<r||o&1<<r||null==s)&&(s=i>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const l=a[r];return s<0&&(s+=l),s=i>0?_x(0,s,l):_x(-1,s,l-1),s}function pI(e,t,n){let a=n.length;for(let e=0;e<n.length;e++)if(n[e]>1){a=e;break}for(let r=a+1;r<n.length;r++)if(t[r]>0||n[r]!==e[r])return!1;return!0}function dI(e,t){let n=e.length>0?e[e.length-1]:1;for(let a=0;a<e.length-1;a++)n+=e[a]*t[a];return n}function hI(e,t,n){let a;const r=e.shape.length;let o;return a="number"==typeof t?[t,...new Array(r-1).fill(0)]:t.length<r?t.concat(new Array(r-t.length).fill(0)):t.slice(),a.forEach((e=>{Vx(-1!==e,(()=>"slice() does not support negative begin indexing."))})),o=null==n?new Array(r).fill(-1):"number"==typeof n?[n,...new Array(r-1).fill(-1)]:n.length<r?n.concat(new Array(r-n.length).fill(-1)):n,o=o.map(((t,n)=>t>=0?t:(Vx(-1===t,(()=>`Negative size values should be exactly -1 but got ${t} for the slice() size at index ${n}.`)),e.shape[n]-a[n]))),[a,o]}function fI(e,t,n,a,r,o,s,i,l){let u;if(null==a?(u=new Array(t.length),u.fill(1)):u=a,null!=s&&0!=(s&s-1))throw new Error("Multiple ellipses in slice is not allowed.");let c=!1;const p={dims:u.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:u.slice(),beginMask:r,endMask:o,ellipsisMask:s,newAxisMask:i,shrinkAxisMask:l};for(let e=0;e<p.dims;e++)c&&0!=(1<<e&i)&&p.numAddAxisAfterEllipsis++,1<<e&s&&(c=!0);c||(p.ellipsisMask|=1<<p.dims,p.dims++);const d={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let a=0;a<e.dims;a++)if(1<<a&e.ellipsisMask){const r=Math.min(t.dims-(e.dims-a)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<r;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=a}else if(1<<a&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);null!=e.begin&&(t.begin[n]=e.begin[a]),null!=e.end&&(t.end[n]=e.end[a]),t.strides[n]=e.strides[a],e.beginMask&1<<a&&(t.beginMask|=1<<n),e.endMask&1<<a&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<a?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(a)),t.inputShapeGatherIndicesSparse[n]=a,n++}}(p,d);let h=!0,f=!0,m=!0;const g=[],v=[];for(let t=0;t<e.length;++t){if(0===d.strides[t])throw Error(`strides[${t}] must be non-zero`);const n=!!(d.shrinkAxisMask&1<<t),a=e[t];if(-1===a){g.push(n?1:-1);continue}const r=[d.beginMask&1<<t,d.endMask&1<<t],o=[d.strides[t]>0?0:-1,d.strides[t]>0?a:a-1];if(n&&d.strides[t]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===d.strides[t];const s=!!(d.beginMask&1<<t&&d.endMask&1<<t);if(d.beginValid&&d.endValid){if(n){const e=d.begin[t]<0?a+d.begin[t]:d.begin[t];if(d.begin[t]=e,d.end[t]=d.begin[t]+1,e<0||e>=a)throw Error(`slice index ${d.begin[t]} of dimension ${t} out of bounds.`)}else d.begin[t]=mI(d.begin[t],0,d.strides[t],a,r,o),d.end[t]=mI(d.end[t],1,d.strides[t],a,r,o);const e=1===d.strides[t]&&0===d.begin[t]&&d.end[t]===a;h=h&&e,f=f&&(0===t&&1===d.strides[t]||e)}else h=h&&1===d.strides[t]&&s,f=f&&(0===t&&1===d.strides[t]||s);let i,l=!1;if(d.beginValid&&d.endValid?(i=d.end[t]-d.begin[t],l=!0):n?(i=1,l=!0):s&&a>=0&&(i=d.strides[t]<0?-a:a,l=!0),l){let e;e=0===i||i<0!=d.strides[t]<0?0:Math.trunc(i/d.strides[t])+(i%d.strides[t]!=0?1:0),g.push(e)}else g.push(-1)}for(let e=0;e<d.finalShapeGatherIndices.length;++e){const t=d.finalShapeGatherIndices[e];t>=0?v.push(g[t]):-2===t&&v.push(1)}const b=v.filter(((e,t)=>-2!==d.finalShapeGatherIndices[t]));return{finalShapeSparse:b,finalShape:v,isIdentity:h,sliceDim0:f,isSimpleSlice:m,begin:d.begin,end:d.end,strides:d.strides}}function mI(e,t,n,a,r,o){if(r[t])return n>0?o[t]:o[t+1&1];{const t=e<0?a+e:e;return t<o[0]?o[0]:t>o[1]?o[1]:t}}class gI{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}}class vI{constructor(){this.classNameMap={}}static getMap(){return null==vI.instance&&(vI.instance=new vI),vI.instance}static register(e){vI.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function bI(e){Vx(null!=e.className,(()=>"Class being registered does not have the static className property defined.")),Vx("string"==typeof e.className,(()=>"className is required to be a string, but got type "+typeof e.className)),Vx(e.className.length>0,(()=>"Class being registered has an empty-string as its className, which is disallowed.")),vI.register(e)}function yI(){return D$}function wI(){return D$.memory()}function xI(e,t){return D$.tidy(e,t)}function kI(e){O$(e).forEach((e=>e.dispose()))}function CI(e){return D$.keep(e)}function EI(e,t,n=1){return D$.registerBackend(e,t,n)}function SI(e){return D$.customGrad(e)}function $I(e,t){if((ak(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&ak(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Y$(e,[],[],t)}g$=function(e){Ck().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")};class TI extends gI{minimize(e,t=!1,n){const{value:a,grads:r}=this.computeGradients(e,n);if(null!=n){const e=n.map((e=>({name:e.name,tensor:r[e.name]})));this.applyGradients(e)}else this.applyGradients(r);return kI(r),t?a:(a.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return function(e,t){Vx(lk(e),(()=>"The f passed in variableGrads(f) must be a function")),Vx(null==t||Array.isArray(t)&&t.every((e=>e instanceof y$)),(()=>"The varList passed in variableGrads(f, varList) must be an array of variables"));const n=null!=t;if(!n){t=[];for(const e in D$.registeredVariables)t.push(D$.registeredVariables[e])}const a=n?t.filter((e=>!e.trainable)):null,r=t.length;t=t.filter((e=>e.trainable)),Vx(t.length>0,(()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${r} variables is trainable.`));const{value:o,grads:s}=D$.gradients(e,t,null,!0);Vx(s.some((e=>null!=e)),(()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize().")),Vx(0===o.rank,(()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`));const i={};return t.forEach(((e,t)=>{null!=s[t]&&(i[e.name]=s[t])})),null!=a&&a.forEach((e=>i[e.name]=null)),{value:o,grads:i}}(e,t)}dispose(){null!=this.iterations_&&kI(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:$I(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(TI,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});const II=q$({abs_:function(e){const t=U$(e,"x","abs");if("complex64"===t.dtype){const e={x:t};return D$.runKernel(eC,e)}{const e={x:t};return D$.runKernel(Ik,e)}}});const NI=q$({add_:function(e,t){let n=U$(e,"a","add"),a=U$(t,"b","add");[n,a]=I$(n,a);const r={a:n,b:a};return D$.runKernel(Rk,r)}});const OI=q$({all_:function(e,t=null,n=!1){const a={x:U$(e,"x","all","bool")},r={axis:t,keepDims:n};return D$.runKernel(Mk,a,r)}});const RI=q$({any_:function(e,t=null,n=!1){const a={x:U$(e,"x","any","bool")},r={axis:t,keepDims:n};return D$.runKernel(Bk,a,r)}});const AI=q$({argMax_:function(e,t=0){const n={x:U$(e,"x","argMax")},a={axis:t};return D$.runKernel(Pk,n,a)}});function MI(e,t,n,a,r="NHWC",o){return DI(e,[...t,e[3]],n,o,a,null,null,UI(r))}function BI(e,t,n,a,r,o,s="channelsLast"){const[i,l]=LI(t);let u;if("channelsLast"===s)u=[i,l,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error(`Unknown dataFormat ${s}`);u=[i,l,e[1],e[1]]}return DI(e,u,n,a,r,o,!1,s)}function PI(e,t,n,a,r,o,s="NDHWC"){const[i,l,u]=zI(t);let c,p;if("NDHWC"===s)p="channelsLast",c=[i,l,u,e[4],e[4]];else{if("NCDHW"!==s)throw new Error(`Unknown dataFormat ${s}`);p="channelsFirst",c=[i,l,u,e[1],e[1]]}return FI(e,c,n,a,r,!1,p,o)}function DI(e,t,n,a,r,o,s=!1,i="channelsLast"){let[l,u,c,p]=[-1,-1,-1,-1];if("channelsLast"===i)[l,u,c,p]=e;else{if("channelsFirst"!==i)throw new Error(`Unknown dataFormat ${i}`);[l,p,u,c]=e}const[d,h,,f]=t,[m,g]=LI(n),[v,b]=LI(a),y=VI(d,v),w=VI(h,b),{padInfo:x,outHeight:k,outWidth:C}=function(e,t,n,a,r,o,s,i,l){let u,c,p;if("number"==typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};const r=function(e,t,n,a,r){null==a&&(a=_I(e,t,n));const o=e[0],s=e[1],i=WI((o-t+2*a)/n+1,r),l=WI((s-t+2*a)/n+1,r);return[i,l]}([t,n],o,a,e,i);c=r[0],p=r[1]}else if("same"===e){c=Math.ceil(t/a),p=Math.ceil(n/r);const e=Math.max(0,(c-1)*a+o-t),i=Math.max(0,(p-1)*r+s-n),l=Math.floor(e/2),d=e-l,h=Math.floor(i/2);u={top:l,bottom:d,left:h,right:i-h,type:"SAME"}}else if("valid"===e)u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-o+1)/a),p=Math.ceil((n-s+1)/r);else{if("object"!=typeof e)throw Error(`Unknown padding parameter: ${e}`);{const d="channelsLast"===l?e[1][0]:e[2][0],h="channelsLast"===l?e[1][1]:e[2][1],f="channelsLast"===l?e[2][0]:e[3][0],m="channelsLast"===l?e[2][1]:e[3][1];u={top:d,bottom:h,left:f,right:m,type:0===d&&0===h&&0===f&&0===m?"VALID":"EXPLICIT"},c=WI((t-o+d+h)/a+1,i),p=WI((n-s+f+m)/r+1,i)}}return{padInfo:u,outHeight:c,outWidth:p}}(r,u,c,m,g,y,w,o,i),E=s?f*p:f;let S;return"channelsFirst"===i?S=[l,E,k,C]:"channelsLast"===i&&(S=[l,k,C,E]),{batchSize:l,dataFormat:i,inHeight:u,inWidth:c,inChannels:p,outHeight:k,outWidth:C,outChannels:E,padInfo:x,strideHeight:m,strideWidth:g,filterHeight:d,filterWidth:h,effectiveFilterHeight:y,effectiveFilterWidth:w,dilationHeight:v,dilationWidth:b,inShape:e,outShape:S,filterShape:t}}function FI(e,t,n,a,r,o=!1,s="channelsLast",i){let[l,u,c,p,d]=[-1,-1,-1,-1,-1];if("channelsLast"===s)[l,u,c,p,d]=e;else{if("channelsFirst"!==s)throw new Error(`Unknown dataFormat ${s}`);[l,d,u,c,p]=e}const[h,f,m,,g]=t,[v,b,y]=zI(n),[w,x,k]=zI(a),C=VI(h,w),E=VI(f,x),S=VI(m,k),{padInfo:$,outDepth:T,outHeight:I,outWidth:N}=function(e,t,n,a,r,o,s,i,l,u,c){let p,d,h,f;if("number"==typeof e){p={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};const o=function(e,t,n,a,r,o){null==r&&(r=_I(e,t,a));const s=e[0],i=e[1],l=e[2],u=WI((s-t+2*r)/a+1,o),c=WI((i-t+2*r)/a+1,o),p=WI((l-t+2*r)/a+1,o);return[u,c,p,n]}([t,n,a,1],i,1,r,e,c);d=o[0],h=o[1],f=o[2]}else if("same"===e){d=Math.ceil(t/r),h=Math.ceil(n/o),f=Math.ceil(a/s);const e=(d-1)*r+i-t,c=(h-1)*o+l-n,m=(f-1)*s+u-a,g=Math.floor(e/2),v=e-g,b=Math.floor(c/2),y=c-b,w=Math.floor(m/2);p={top:b,bottom:y,left:w,right:m-w,front:g,back:v,type:"SAME"}}else{if("valid"!==e)throw Error(`Unknown padding parameter: ${e}`);p={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((t-i+1)/r),h=Math.ceil((n-l+1)/o),f=Math.ceil((a-u+1)/s)}return{padInfo:p,outDepth:d,outHeight:h,outWidth:f}}(r,u,c,p,v,b,y,C,E,S,i),O=o?g*d:g;let R;return"channelsFirst"===s?R=[l,O,T,I,N]:"channelsLast"===s&&(R=[l,T,I,N,O]),{batchSize:l,dataFormat:s,inDepth:u,inHeight:c,inWidth:p,inChannels:d,outDepth:T,outHeight:I,outWidth:N,outChannels:O,padInfo:$,strideDepth:v,strideHeight:b,strideWidth:y,filterDepth:h,filterHeight:f,filterWidth:m,effectiveFilterDepth:C,effectiveFilterHeight:E,effectiveFilterWidth:S,dilationDepth:w,dilationHeight:x,dilationWidth:k,inShape:e,outShape:R,filterShape:t}}function _I(e,t,n,a=1){const r=VI(t,a);return Math.floor((e[0]*(n-1)-n+r)/2)}function LI(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function zI(e){return"number"==typeof e?[e,e,e]:e}function VI(e,t){return t<=1?e:e+(e-1)*(t-1)}function WI(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error(`Unknown roundingMode ${t}`)}}function HI(e){const[t,n,a]=LI(e);return 1===t&&1===n&&1===a}function jI(e,t){return HI(e)||HI(t)}function UI(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error(`Unknown dataFormat ${e}`)}function GI(e,t,n){if(null!=n){if("string"==typeof t)throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if("number"==typeof t)Vx(qx(t),(()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`));else{if("object"!=typeof t)throw Error(`Error in ${e}: Unknown padding parameter: ${t}`);t.forEach((t=>{t.forEach((t=>{Vx(qx(t),(()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`))}))}))}}}const qI=q$({reshape_:function(e,t){const n={x:U$(e,"x","reshape","string_or_numeric")},a={shape:t};return D$.runKernel(ME,n,a)}});const XI=q$({avgPool_:function(e,t,n,a,r){const o=U$(e,"x","avgPool","float32");Vx(jI(n,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`));let s=o,i=!1;3===o.rank&&(i=!0,s=qI(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Vx(4===s.rank,(()=>`Error in avgPool: x must be rank 4 but got rank ${s.rank}.`)),GI("avgPool",a,r);const l={x:s},u={filterSize:t,strides:n,pad:a,dimRoundingMode:r};let c=D$.runKernel(Wk,l,u);return c=FT(c,o.dtype),i?qI(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const YI=q$({avgPool3d_:function(e,t,n,a,r,o="NDHWC"){const s=U$(e,"x","avgPool3d","float32");let i=s,l=!1;4===s.rank&&(l=!0,i=qI(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Vx(5===i.rank,(()=>`Error in avgPool3d: x must be rank 5 but got rank ${i.rank}.`)),Vx("NDHWC"===o,(()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`)),GI("avgPool3d",a,r);const u={x:i},c={filterSize:t,strides:n,pad:a,dimRoundingMode:r,dataFormat:o};let p=D$.runKernel(jk,u,c);return p=FT(p,i.dtype),l?qI(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}});const KI=q$({batchNorm_:function(e,t,n,a,r,o){null==o&&(o=.001);const s=U$(e,"x","batchNorm"),i=U$(t,"mean","batchNorm"),l=U$(n,"variance","batchNorm");let u,c;null!=r&&(u=U$(r,"scale","batchNorm")),null!=a&&(c=U$(a,"offset","batchNorm")),Vx(i.rank===l.rank,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),Vx(null==c||i.rank===c.rank,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),Vx(null==u||i.rank===u.rank,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));const p=function(e){let t;return t=0===e.rank||1===e.rank?qI(e,[1,1,1,e.size]):2===e.rank?qI(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?qI(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}(s),d={x:p,scale:u,offset:c,mean:i,variance:l},h={varianceEpsilon:o},f=D$.runKernel(PC,d,h);return qI(f,s.shape)}});const JI=q$({batchNorm2d_:function(e,t,n,a,r,o){const s=U$(e,"x","batchNorm"),i=U$(t,"mean","batchNorm"),l=U$(n,"variance","batchNorm");let u,c;return null!=r&&(u=U$(r,"scale","batchNorm")),null!=a&&(c=U$(a,"offset","batchNorm")),Vx(2===s.rank,(()=>`Error in batchNorm2D: x must be rank 2 but got rank ${s.rank}.`)),Vx(2===i.rank||1===i.rank,(()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${i.rank}.`)),Vx(2===l.rank||1===l.rank,(()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`)),null!=u&&Vx(2===u.rank||1===u.rank,(()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${u.rank}.`)),null!=c&&Vx(2===c.rank||1===c.rank,(()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${c.rank}.`)),KI(s,i,l,c,u,o)}});const ZI=q$({batchNorm3d_:function(e,t,n,a,r,o){const s=U$(e,"x","batchNorm"),i=U$(t,"mean","batchNorm"),l=U$(n,"variance","batchNorm");let u,c;return null!=r&&(u=U$(r,"scale","batchNorm")),null!=a&&(c=U$(a,"offset","batchNorm")),Vx(3===s.rank,(()=>`Error in batchNorm3D: x must be rank 3 but got rank ${s.rank}.`)),Vx(3===i.rank||1===i.rank,(()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${i.rank}.`)),Vx(3===l.rank||1===l.rank,(()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`)),null!=u&&Vx(3===u.rank||1===u.rank,(()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${u.rank}.`)),null!=c&&Vx(3===c.rank||1===c.rank,(()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${c.rank}.`)),KI(s,i,l,c,u,o)}});const QI=q$({batchNorm4d_:function(e,t,n,a,r,o){const s=U$(e,"x","batchNorm"),i=U$(t,"mean","batchNorm"),l=U$(n,"variance","batchNorm");let u,c;return null!=r&&(u=U$(r,"scale","batchNorm")),null!=a&&(c=U$(a,"offset","batchNorm")),Vx(4===s.rank,(()=>`Error in batchNorm4D: x must be rank 4 but got rank ${s.rank}.`)),Vx(4===i.rank||1===i.rank,(()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${i.rank}.`)),Vx(4===l.rank||1===l.rank,(()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`)),null!=u&&Vx(4===u.rank||1===u.rank,(()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${u.rank}.`)),null!=c&&Vx(4===c.rank||1===c.rank,(()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${c.rank}.`)),KI(s,i,l,c,u,o)}});const eN=q$({clipByValue_:function(e,t,n){const a=U$(e,"x","clipByValue");Vx(t<=n,(()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`));const r={x:a},o={clipValueMin:t,clipValueMax:n};return D$.runKernel(Zk,r,o)}});const tN=q$({concat_:function(e,t=0){Vx(e.length>=1,(()=>"Pass at least one tensor to concat"));const n=G$(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${e.dtype}. `)})),1===n.length)return _T(n[0]);const a=n,r={axis:t};return D$.runKernel(tC,a,r)}});const nN=q$({concat1d_:function(e){return tN(e,0)}});const aN=q$({concat2d_:function(e,t){return tN(e,t)}});const rN=q$({concat3d_:function(e,t){return tN(e,t)}});const oN=q$({concat4d_:function(e,t){return tN(e,t)}});const sN=q$({conv2d_:function(e,t,n,a,r="NHWC",o=[1,1],s){const i=U$(e,"x","conv2d","float32"),l=U$(t,"filter","conv2d","float32");let u=i,c=!1;3===i.rank&&(c=!0,u=qI(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Vx(4===u.rank,(()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`)),Vx(4===l.rank,(()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`)),GI("conv2d",a,s);const p="NHWC"===r?u.shape[3]:u.shape[1];Vx(p===l.shape[2],(()=>`Error in conv2d: depth of input (${p}) must match input depth for filter ${l.shape[2]}.`)),Vx(jI(n,o),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`));const d={x:u,filter:l},h={strides:n,pad:a,dataFormat:r,dilations:o,dimRoundingMode:s},f=D$.runKernel(nC,d,h);return c?qI(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const iN=q$({conv1d_:function(e,t,n,a,r="NWC",o=1,s){const i=U$(e,"x","conv1d"),l=U$(t,"filter","conv1d");let u=i,c=!1;2===i.rank&&(c=!0,u=qI(i,[1,i.shape[0],i.shape[1]])),Vx(3===u.rank,(()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`)),Vx(3===l.rank,(()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`)),GI("conv1d",a,s),Vx(u.shape[2]===l.shape[1],(()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`)),Vx(jI(n,o),(()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${o}'`)),Vx("NWC"===r,(()=>`Error in conv1d: got dataFormat of ${r} but only NWC is currently supported.`));const p=qI(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=qI(u,[u.shape[0],1,u.shape[1],u.shape[2]]),h=sN(d,p,[1,n],a,"NHWC",[1,o],s);return qI(h,c?[h.shape[2],h.shape[3]]:[h.shape[0],h.shape[2],h.shape[3]])}});const lN=q$({conv2DBackpropInput_:function(e,t,n,a,r,o="NHWC",s){Vx(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let i=e,l=t,u=!1;3===t.rank&&(u=!0,l=qI(t,[1,t.shape[0],t.shape[1],t.shape[2]]),i=[1,e[0],e[1],e[2]]),Vx(4===i.length,(()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${i.length}.`)),Vx(4===l.rank,(()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`)),Vx(4===n.rank,(()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`));const c="NHWC"===o?i[3]:i[1],p="NHWC"===o?l.shape[3]:l.shape[1];Vx(c===n.shape[2],(()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`)),Vx(p===n.shape[3],(()=>`Error in conv2dDerInput: depth of output (${p}) must match output depth for filter ${n.shape[3]}.`)),GI("conv2dDerInput",r,s);const d={dy:l,filter:n},h={strides:a,pad:r,dataFormat:o,dimRoundingMode:s,inputShape:i},f=D$.runKernel(rC,d,h);return u?qI(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});const uN=q$({conv2dTranspose_:function(e,t,n,a,r,o){const s=U$(e,"x","conv2dTranspose"),i=U$(t,"filter","conv2dTranspose");return lN(n,s,i,a,r,"NHWC",o)}});const cN=q$({conv3d_:function(e,t,n,a,r="NDHWC",o=[1,1,1]){const s=U$(e,"x","conv3d"),i=U$(t,"filter","conv3d");let l=s,u=!1;4===s.rank&&(u=!0,l=qI(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Vx(5===l.rank,(()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`)),Vx(5===i.rank,(()=>`Error in conv3d: filter must be rank 5, but got rank ${i.rank}.`)),Vx(l.shape[4]===i.shape[3],(()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${i.shape[3]}.`)),Vx(jI(n,o),(()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`)),Vx("NDHWC"===r,(()=>`Error in conv3d: got dataFormat of ${r} but only NDHWC is currently supported.`));const c={x:l,filter:i},p={strides:n,pad:a,dataFormat:r,dilations:o},d=D$.runKernel(oC,c,p);return u?qI(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const pN=q$({conv3DBackpropInput_:function(e,t,n,a,r){Vx(e.length===t.rank,(()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`));let o=e,s=t,i=!1;4===t.rank&&(i=!0,s=qI(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),o=[1,e[0],e[1],e[2],e[3]]);const l=o[4],u=s.shape[4];Vx(5===o.length,(()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${o.length}.`)),Vx(5===s.rank,(()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${s.rank}`)),Vx(5===n.rank,(()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`)),Vx(l===n.shape[3],(()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`)),Vx(u===n.shape[4],(()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`));const c={dy:s,filter:n},p={pad:r,strides:a,inputShape:o},d=D$.runKernel(iC,c,p);return i?qI(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});const dN=q$({conv3dTranspose_:function(e,t,n,a,r){const o=U$(e,"x","conv3dTranspose"),s=U$(t,"filter","conv3dTranspose");return pN(n,o,s,a,r)}});const hN=q$({depthwiseConv2d_:function(e,t,n,a,r="NHWC",o=[1,1],s){const i=U$(e,"x","depthwiseConv2d","float32"),l=U$(t,"filter","depthwiseConv2d","float32");let u=i,c=!1;3===i.rank&&(c=!0,u=qI(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Vx(4===u.rank,(()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`)),Vx(4===l.rank,(()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`)),Vx(u.shape[3]===l.shape[2],(()=>`Error in depthwiseConv2d: number of input channels (${u.shape[3]}) must match the inChannels dimension in filter ${l.shape[2]}.`)),GI("depthwiseConv2d",a,s);const p={x:u,filter:l},d={strides:n,pad:a,dataFormat:r,dilations:o,dimRoundingMode:s},h=D$.runKernel(fC,p,d);return c?qI(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});const fN=q$({floorDiv_:function(e,t){let n=U$(e,"a","floorDiv"),a=U$(t,"b","floorDiv");[n,a]=I$(n,a);const r={a:n,b:a};return D$.runKernel(BC,r)}});const mN=q$({div_:function(e,t){let n=U$(e,"a","div"),a=U$(t,"b","div");if([n,a]=I$(n,a),"int32"===n.dtype&&"int32"===a.dtype)return fN(n,a);const r={a:n,b:a};return D$.runKernel(xC,r,{})}});const gN=q$({elu_:function(e){const t={x:U$(e,"x","elu","float32")};return D$.runKernel(CC,t)}});const vN=q$({equal_:function(e,t){let n=U$(e,"a","equal","string_or_numeric"),a=U$(t,"b","equal","string_or_numeric");[n,a]=I$(n,a),YT(n.shape,a.shape);const r={a:n,b:a};return D$.runKernel($C,r)}});const bN=q$({exp_:function(e){const t={x:U$(e,"x","exp")};return D$.runKernel(TC,t)}});const yN=q$({expandDims_:function(e,t=0){const n=U$(e,"x","expandDims","string_or_numeric");Vx(t<=n.rank,(()=>"Axis must be <= rank of the tensor"));const a={input:n},r={dim:t};return D$.runKernel(IC,a,r)}});const wN=q$({tile_:function(e,t){const n=U$(e,"x","tile","string_or_numeric");Vx(n.rank===t.length,(()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`));const a={x:n},r={reps:t};return D$.runKernel(gS,a,r)}});const xN=q$({eye_:function(e,t,n,a="float32"){null==t&&(t=e);const r=DT([e,t],a),o=e<=t?e:t;for(let e=0;e<o;++e)r.set(1,e,e);const s=qI(r.toTensor(),[e,t]);if(null==n)return s;if(1===n.length)return wN(yN(s,0),[n[0],1,1]);if(2===n.length)return wN(yN(yN(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return wN(yN(yN(yN(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}});function kN(e,t,n){const a={shape:e,value:t,dtype:n};return D$.runKernel(RC,{},a)}const CN=q$({floor_:function(e){const t={x:U$(e,"x","floor","float32")};return D$.runKernel(MC,t)}});const EN=q$({gather_:function(e,t,n=0,a=0){const r={x:U$(e,"x","gather"),indices:U$(t,"indices","gather","int32")},o={axis:n,batchDims:a};return D$.runKernel(DC,r,o)}});const SN=q$({greater_:function(e,t){let n=U$(e,"a","greater","string_or_numeric"),a=U$(t,"b","greater","string_or_numeric");[n,a]=I$(n,a),YT(n.shape,a.shape);const r={a:n,b:a};return D$.runKernel(_C,r)}});const $N=q$({greaterEqual_:function(e,t){let n=U$(e,"a","greaterEqual","string_or_numeric"),a=U$(t,"b","greaterEqual","string_or_numeric");[n,a]=I$(n,a),YT(n.shape,a.shape);const r={a:n,b:a};return D$.runKernel(LC,r)}});const TN=q$({leakyRelu_:function(e,t=.2){const n={x:U$(e,"x","leakyRelu")},a={alpha:t};return D$.runKernel(GC,n,a)}});const IN=q$({log_:function(e){const t={x:U$(e,"x","log","float32")};return D$.runKernel(KC,t)}});const NN=q$({log1p_:function(e){const t={x:U$(e,"x","log1p")};return D$.runKernel(JC,t)}});const ON=q$({max_:function(e,t=null,n=!1){const a={x:U$(e,"x","max")},r={reductionIndices:t,keepDims:n};return D$.runKernel(aE,a,r)}});const RN=q$({mul_:function(e,t){let n=U$(e,"a","mul"),a=U$(t,"b","mul");[n,a]=I$(n,a);const r={a:n,b:a};return D$.runKernel(gE,r)}});const AN=q$({sub_:function(e,t){let n=U$(e,"a","sub"),a=U$(t,"b","sub");[n,a]=I$(n,a);const r={a:n,b:a};return D$.runKernel(hS,r)}});const MN=q$({sum_:function(e,t=null,n=!1){let a=U$(e,"x","sum");"bool"===a.dtype&&(a=FT(a,"int32"));const r={x:a},o={axis:t,keepDims:n};return D$.runKernel(ZE,r,o)}});const BN=q$({logSoftmax_:function(e,t=-1){const n=U$(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);const a=SI(((e,n)=>{const a=ON(e,t,!0),r=AN(e,a),o=AN(FT(r,"float32"),IN(MN(bN(r),t,!0)));n([o]);return{value:o,gradFunc:(e,n)=>{const[a]=n,r=bN(a);return AN(e,RN(MN(e,t,!0),r))}}}));return a(n)}});const PN=q$({logicalAnd_:function(e,t){const n=U$(e,"a","logicalAnd","bool"),a=U$(t,"b","logicalAnd","bool");YT(n.shape,a.shape);const r={a:n,b:a};return D$.runKernel(ZC,r)}});const DN=q$({matMul_:function(e,t,n=!1,a=!1){let r=U$(e,"a","matMul"),o=U$(t,"b","matMul");[r,o]=I$(r,o);const s={a:r,b:o},i={transposeA:n,transposeB:a};return D$.runKernel(Gk,s,i)}});const FN=q$({maxPool_:function(e,t,n,a,r){const o=U$(e,"x","maxPool");let s=o,i=!1;3===o.rank&&(i=!0,s=qI(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Vx(4===s.rank,(()=>`Error in maxPool: input must be rank 4 but got rank ${s.rank}.`)),Vx(jI(n,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`)),GI("maxPool",a,r);const l={x:s},u={filterSize:t,strides:n,pad:a,dimRoundingMode:r},c=D$.runKernel(oE,l,u);return i?qI(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});const _N=q$({maxPool3d_:function(e,t=[1,1,1],n,a,r,o="NDHWC"){const s=U$(e,"x","maxPool3d");let i=s,l=!1;4===s.rank&&(l=!0,i=qI(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Vx(5===i.rank,(()=>`Error in maxPool3d: x must be rank 5 but got rank ${i.rank}.`)),Vx("NDHWC"===o,(()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`)),GI("maxPool3d",a,r);const u={x:i},c={filterSize:t,strides:n,pad:a,dimRoundingMode:r,dataFormat:o},p=D$.runKernel(iE,u,c);return l?qI(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}});const LN=q$({maximum_:function(e,t){let n=U$(e,"a","maximum"),a=U$(t,"b","maximum");[n,a]=I$(n,a),"bool"===n.dtype&&(n=FT(n,"int32"),a=FT(a,"int32")),YT(n.shape,a.shape);const r={a:n,b:a};return D$.runKernel(rE,r)}});const zN=q$({mean_:function(e,t=null,n=!1){const a={x:U$(e,"x","mean")},r={axis:t,keepDims:n};return D$.runKernel(cE,a,r)}});const VN=q$({minimum_:function(e,t){let n=U$(e,"a","minimum"),a=U$(t,"b","minimum");[n,a]=I$(n,a),"bool"===n.dtype&&(n=FT(n,"int32"),a=FT(a,"int32")),YT(n.shape,a.shape);const r={a:n,b:a};return D$.runKernel(dE,r)}});function WN(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function HN(e,t,n){const a=e.length+t.length,r=[];let o=0,s=0;for(let i=0;i<a;i++)-1===n.indexOf(i)?r.push(e[o++]):r.push(t[s++]);return r}function jN(e,t){const n=[],a=e.length;for(let r=0;r<a;r++)-1===t.indexOf(r)&&n.push(e[r]);return[n,t.map((t=>e[t]))]}function UN(e,t){return HN(e,t.map((e=>1)),t)}function GN(e,t,n){Vx(WN(t,n),(()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`))}function qN(e,t){if(WN(e,t))return null;const n=[];for(let a=0;a<t;++a)-1===e.indexOf(a)&&n.push(a);return e.forEach((e=>n.push(e))),n}function XN(e){return e.map(((e,t)=>[t,e])).sort(((e,t)=>e[1]-t[1])).map((e=>e[0]))}function YN(e,t){const n=[];for(let a=t-e;a<t;++a)n.push(a);return n}const KN=q$({square_:function(e){const t=U$(e,"x","square");return D$.runKernel("Square",{x:t},{})}});const JN=q$({moments_:function(e,t=null,n=!1){const a=Zx(t,(e=U$(e,"x","moments")).shape),r=zN(e,a,n);let o=r.shape;n||(o=UN(r.shape,a));const s=KN(AN(FT(e,"float32"),qI(r,o)));return{mean:r,variance:zN(s,a,n)}}});const ZN=q$({neg_:function(e){const t={x:U$(e,"x","neg")};return D$.runKernel(vE,t)}});const QN=q$({notEqual_:function(e,t){let n=U$(e,"a","notEqual","string_or_numeric"),a=U$(t,"b","notEqual","string_or_numeric");[n,a]=I$(n,a),YT(n.shape,a.shape);const r={a:n,b:a};return D$.runKernel(bE,r)}});const eO=q$({oneHot_:function(e,t,n=1,a=0){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);const r={indices:U$(e,"indices","oneHot","int32")},o={depth:t,onValue:n,offValue:a};return D$.runKernel(CE,r,o)}});function tO(e,t="float32"){if("complex64"===t){const t=tO(e,"float32"),n=tO(e,"float32");return X$(t,n)}const n=fk(Ux(e),t);return D$.makeTensor(n,e,t)}function nO(e,t="float32"){if("complex64"===t){const t=nO(e,"float32"),n=tO(e,"float32");return X$(t,n)}const n=hk(Ux(e),t);return D$.makeTensor(n,e,t)}const aO=q$({onesLike_:function(e){const t={x:U$(e,"x","onesLike")};return D$.runKernel(kE,t)}});const rO=q$({pad_:function(e,t,n=0){const a=U$(e,"x","pad");if(0===a.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const r={paddings:t,constantValue:n},o={x:a};return D$.runKernel(SE,o,r)}});const oO=q$({prelu_:function(e,t){const n={x:U$(e,"x","prelu"),alpha:U$(t,"alpha","prelu")};return D$.runKernel(TE,n)}});var sO=n(377);class iO{constructor(e,t,n,a,r){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);const o=r||Math.random();this.random=sO.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let a,r,o;do{a=2*this.random()-1,r=2*this.random()-1,o=a*a+r*r}while(o>=1||0===o);const s=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*a*s,t=this.mean+this.stdDev*r*s,this.truncated&&!this.isValidTruncated(e)||(n=!0)}return this.truncated&&!this.isValidTruncated(t)||(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class lO{constructor(e=0,t=1,n,a){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==a&&(a=Math.random()),"number"==typeof a&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=sO.alea(a)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}const uO=q$({randomNormal_:function(e,t=0,n=1,a,r){if(null!=a&&"bool"===a)throw new Error(`Unsupported data type ${a}`);const o=new iO(t,n,a,!1,r),s=DT(e,a);for(let e=0;e<s.values.length;e++)s.values[e]=o.nextValue();return s.toTensor()}});const cO=q$({randomUniform_:function(e,t=0,n=1,a="float32",r){const o=DT(e,a),s=new lO(t,n,null,r);for(let e=0;e<o.values.length;e++)o.values[e]=s.nextValue();return o.toTensor()}});const pO=q$({relu_:function(e){const t={x:U$(e,"x","relu")};return D$.runKernel(AE,t)}});const dO=q$({reverse_:function(e,t){const n={x:U$(e,"x","reverse")},a={dims:t};return D$.runKernel(LE,n,a)}});const hO=q$({selu_:function(e){const t={x:U$(e,"x","selu")};return D$.runKernel(jE,t)}});const fO=q$({separableConv2d_:function(e,t,n,a,r,o=[1,1],s="NHWC"){const i=U$(e,"x","separableConv2d"),l=U$(t,"depthwiseFilter","separableConv2d"),u=U$(n,"pointwiseFilter","separableConv2d");let c=i,p=!1;if(3===i.rank&&(p=!0,c=qI(i,[1,i.shape[0],i.shape[1],i.shape[2]])),"NCHW"===s)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Vx(4===c.rank,(()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`)),Vx(4===l.rank,(()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`)),Vx(4===u.rank,(()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`)),Vx(1===u.shape[0],(()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`)),Vx(1===u.shape[1],(()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`));const d=l.shape[2],h=l.shape[3];Vx(u.shape[2]===d*h,(()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*h}, but got ${u.shape[2]}.`));const f=hN(c,l,a,r,s,o),m=sN(f,u,1,"valid",s);return p?qI(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});const mO=q$({sigmoid_:function(e){const t={x:U$(e,"x","sigmoid","float32")};return D$.runKernel(YE,t)}});const gO=q$({slice_:function(e,t,n){const a=U$(e,"x","slice","string_or_numeric");if(0===a.rank)throw new Error("Slicing scalar is not possible");const r={x:a},o={begin:t,size:n};return D$.runKernel(UE,r,o)}});const vO=q$({slice1d_:function(e,t,n){const a=U$(e,"x","slice1d");return Vx(1===a.rank,(()=>`slice1d expects a rank-1 tensor, but got a rank-${a.rank} tensor`)),gO(a,[t],[n])}});const bO=q$({slice2d_:function(e,t,n){const a=U$(e,"x","slice2d");return Vx(2===a.rank,(()=>`slice2d expects a rank-2 tensor, but got a rank-${a.rank} tensor`)),gO(a,t,n)}});const yO=q$({slice3d_:function(e,t,n){const a=U$(e,"x","slice3d");return Vx(3===a.rank,(()=>`slice3d expects a rank-3 tensor, but got a rank-${a.rank} tensor`)),gO(a,t,n)}});const wO=q$({slice4d_:function(e,t,n){const a=U$(e,"x","slice4d");return Vx(4===a.rank,(()=>`slice4d expects a rank-4 tensor, but got a rank-${a.rank} tensor`)),gO(a,t,n)}});const xO=q$({softmax_:function(e,t=-1){const n=U$(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);const a={logits:n},r={dim:t};return D$.runKernel(tS,a,r)}});const kO=q$({softplus_:function(e){const t={x:U$(e,"x","softplus")};return D$.runKernel(KE,t)}});const CO=q$({split_:function(e,t,n=0){const a={x:U$(e,"x","split")},r={numOrSizeSplits:t,axis:n};return D$.runKernel(eS,a,r)}});const EO=q$({sqrt_:function(e){const t={x:U$(e,"x","sqrt","float32")};return D$.runKernel(JE,t)}});const SO=q$({squeeze_:function(e,t){const n=U$(e,"x","squeeze");return qI(n,Qx(n.shape,t).newShape)}});const $O=q$({stack_:function(e,t=0){const n=G$(e,"tensors","stack","string_or_numeric");Vx(n.length>=1,(()=>"Pass at least one tensor to tf.stack")),n.length>0&&Vx(t<=n[0].rank,(()=>"Axis must be <= rank of the tensor"));const a=n,r={axis:t};return D$.runKernel(EE,a,r)}});const TO=q$({tanh_:function(e){const t={x:U$(e,"x","tanh","float32")};return D$.runKernel(mS,t)}});function IO(e,t){Hx(e);const n=W$(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Y$(e,null,n,t)}const NO=q$({truncatedNormal_:function(e,t=0,n=1,a,r){if(null!=a&&"bool"===a)throw new Error("Unsupported data type $ { dtype }");const o=new iO(t,n,a,!0,r),s=DT(e,a);for(let e=0;e<s.values.length;e++)s.values[e]=o.nextValue();return s.toTensor()}});const OO=q$({unstack_:function(e,t=0){const n=U$(e,"x","unstack","string_or_numeric");Vx(t>=-n.shape.length&&t<n.shape.length,(()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`));const a={value:n},r={axis:t};return D$.runKernel(xS,a,r)}});const RO=q$({broadcastTo_:function(e,t){let n=U$(e,"broadcastTo","x");const a=n.shape;if(t.some((e=>!(e>0)||e%1!=0)))throw new Error(`broadcastTo(): Invalid broadcast shape [${t}].`);if(t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){const e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=qI(n,e)}const r=n.shape,o=Array.from(t);for(let e=t.length-1;e>=0;e--)if(r[e]===t[e])o[e]=1;else if(1!==n.shape[e])throw new Error(`broadcastTo(): [${a}] cannot be broadcast to [${t}].`);const s=o.map(((e,t)=>e>1?t:-1)).filter((e=>e>=0));if(0===s.length)return _T(n);const i={x:n},l={reps:o};return D$.runKernel(gS,i,l)}});const AO=q$({where_:function(e,t,n){const a=U$(t,"a","where"),r=U$(n,"b","where"),o=U$(e,"condition","where","bool"),s=YT(YT(o.shape,a.shape),r.shape),i={condition:RO(o,s),t:RO(a,s),e:RO(r,s)};return D$.runKernel(HE,i)}});const MO=q$({zerosLike_:function(e){const t={x:U$(e,"x","zerosLike")};return D$.runKernel(CS,t)}});const BO=q$({transpose_:function(e,t){const n=U$(e,"x","transpose");if(null==t&&(t=n.shape.map(((e,t)=>t)).reverse()),Vx(n.rank===t.length,(()=>`Error in transpose: rank of input ${n.rank} must match length of perm ${t}.`)),t.forEach((e=>{Vx(e>=0&&e<n.rank,(()=>"All entries in 'perm' must be between 0 and "+(n.rank-1)+` but got ${t}`))})),n.rank<=1)return n.clone();const a={x:n},r={perm:t};return D$.runKernel(yS,a,r)}});const PO=q$({dropout_:function(e,t,n,a){const r=U$(e,"x","dropout");if(Vx("float32"===r.dtype,(()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${r.dtype} tensor instead.`)),Vx(t>=0&&t<1,(()=>`rate must be a float in the range [0, 1), but got ${t}.`)),0===t)return e instanceof v$?r.clone():r;const o=function(e,t){if(null==t)return e.shape.slice();if(Gx(e.shape,t))return t;if(e.shape.length===t.length){const n=[];for(let a=0;a<e.shape.length;a++)null==t[a]&&null!=e.shape[a]?n.push(e.shape[a]):n.push(t[a]);return n}return t}(r,n),s=1-t,i=mN(CN(NI(cO(o,0,1,"float32",a),s)),s);return RN(r,i)}});const DO=q$({imag_:function(e){const t={input:U$(e,"input","imag")};return D$.runKernel(WC,t)}});const FO=q$({real_:function(e){const t={input:U$(e,"input","real")};return D$.runKernel(OE,t)}});const _O=q$({fft_:function(e){Vx("complex64"===e.dtype,(()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`));const t={input:e};return D$.runKernel(OC,t)}});const LO=q$({rfft_:function(e,t){Vx("float32"===e.dtype,(()=>`The dtype for rfft() must be real value but got ${e.dtype}`));let n=e.shape[e.shape.length-1];const a=e.size/n;let r;if(null!=t&&t<n){const a=e.shape.map((e=>0)),o=e.shape.map((e=>e));o[e.shape.length-1]=t,r=gO(e,a,o),n=t}else if(null!=t&&t>n){const a=e.shape.map((e=>e));a[e.shape.length-1]=t-n,r=tN([e,tO(a)],e.shape.length-1),n=t}else r=e;const o=MO(r),s=qI(X$(r,o),[a,n]),i=_O(s),l=Math.floor(n/2)+1,u=FO(i),c=DO(i),p=CO(u,[l,n-l],u.shape.length-1),d=CO(c,[l,n-l],c.shape.length-1),h=r.shape.slice();return h[r.shape.length-1]=l,qI(X$(p[0],d[0]),h)}});const zO=q$({ifft_:function(e){Vx("complex64"===e.dtype,(()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`));const t={input:e};return D$.runKernel(VC,t)}});const VO=q$({irfft_:function(e){const t=e.shape[e.shape.length-1],n=e.size/t;let a;if(t<=2){const r=qI(e,[n,t]);a=zO(r)}else{const r=[n,2*(t-1)],o=qI(FO(e),[n,t]),s=qI(DO(e),[n,t]),i=dO(gO(o,[0,1],[n,t-2]),1),l=RN(dO(gO(s,[0,1],[n,t-2]),1),$I(-1)),u=tN([o,i],1),c=tN([s,l],1),p=qI(X$(u,c),[r[0],r[1]]);a=zO(p)}if(a=FO(a),3===e.rank&&0!==e.shape[0]){const t=a,n=e.shape[0];a=qI(a,[n,a.shape[0]/n,a.shape[1]]),t.dispose()}return a}});const WO=q$({conv2DBackpropFilter_:function(e,t,n,a,r,o="NHWC",s){let i=e;3===e.rank&&(i=qI(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=qI(t,[1,t.shape[0],t.shape[1],t.shape[2]])),Vx(4===i.rank,(()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${i.shape}.`)),Vx(4===l.rank,(()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`)),Vx(4===n.length,(()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`));const u="NHWC"===o?i.shape[3]:i.shape[1],c="NHWC"===o?l.shape[3]:l.shape[1];Vx(u===n[2],(()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`)),Vx(c===n[3],(()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`)),GI("conv2dDerFilter",r,s);const p={x:i,dy:l},d={strides:a,pad:r,dataFormat:o,dimRoundingMode:s,filterShape:n};return D$.runKernel(aC,p,d)}});const HO=q$({relu6_:function(e){const t={x:U$(e,"x","relu6")};return D$.runKernel(_E,t)}});const jO=q$({step_:function(e,t=0){const n={x:U$(e,"x","step")},a={alpha:t};return D$.runKernel(ES,n,a)}});function UO(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return RN(e,jO(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function GO(e,t){let n=t;const a=XT(e.shape,t.shape);return a.length>0&&(n=MN(n,a)),qI(n,e.shape)}function qO(e,t,n,a){if("linear"===t)return e;if("relu"===t)return pO(e);if("elu"===t)return gN(e);if("relu6"===t)return HO(e);if("prelu"===t)return oO(e,n);if("leakyrelu"===t)return TN(e,a);if("sigmoid"===t)return mO(e);throw new Error(`Unknown fused activation ${t}.`)}const XO=(e,t)=>!(e>0)||"linear"===t;const YO=q$({fusedConv2d_:function({x:e,filter:t,strides:n,pad:a,dataFormat:r="NHWC",dilations:o=[1,1],dimRoundingMode:s,bias:i,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",!1===XO(D$.state.gradientDepth,l)){let p=sN(e,t,n,a,r,o,s);return null!=i&&(p=NI(p,i)),qO(p,l,u,c)}const p=U$(e,"x","conv2d","float32"),d=U$(t,"filter","conv2d","float32");let h=p,f=!1;3===p.rank&&(f=!0,h=qI(p,[1,p.shape[0],p.shape[1],p.shape[2]])),Vx(4===h.rank,(()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`)),Vx(4===d.rank,(()=>`Error in fused conv2d: filter must be rank 4, but got rank ${d.rank}.`)),GI("fused conv2d",a,s),Vx(h.shape[3]===d.shape[2],(()=>`Error in conv2d: depth of input (${h.shape[3]}) must match input depth for filter ${d.shape[2]}.`)),Vx(jI(n,o),(()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`)),Vx("NHWC"===r,(()=>`Error in conv2d: got dataFormat of ${r} but only NHWC is currently supported.`));const m=DI(h.shape,d.shape,n,o,a,s);let g,v;null!=i&&(g=U$(i,"bias","fused conv2d"),[g]=I$(g,p),YT(m.outShape,g.shape)),null!=u&&(v=U$(u,"prelu weights","fused conv2d"));const b=(e,t)=>{const[r,s,i,u]=t,c=UO(e,i,l);Vx(HI(o),(()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`));const p=[lN(s.shape,c,r,n,a),WO(s,c,r.shape,n,a)];if(null!=u){const e=GO(u,c);p.push(e)}return p},y={x:h,filter:d,bias:g,preluActivationWeights:v},w={strides:n,pad:a,dataFormat:r,dilations:o,dimRoundingMode:s,activation:l,leakyreluAlpha:c};if(null==i){const e=SI(((e,t,n)=>{let a=D$.runKernel(IS,y,w);return n([t,e,a]),f&&(a=qI(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:b}}));return e(h,d)}{const e=SI(((e,t,n,a)=>{let r=D$.runKernel(IS,y,w);return a([t,e,r,n]),f&&(r=qI(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:b}}));return e(h,d,g)}}});const KO=q$({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,a,r,o=[1,1],s){let i=e;3===e.rank&&(i=qI(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=qI(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={x:i,dy:l},c={strides:a,pad:r,dimRoundingMode:s,dilations:o,filterShape:n};return D$.runKernel(mC,u,c)}});const JO=q$({depthwiseConv2dNativeBackpropInput_:function(e,t,n,a,r,o=[1,1],s){let i=t,l=!1;3===t.rank&&(l=!0,i=qI(t,[1,t.shape[0],t.shape[1],t.shape[2]]));const u={dy:i,filter:n},c={strides:a,pad:r,dimRoundingMode:s,dilations:o,inputShape:e},p=D$.runKernel(gC,u,c);return l?qI(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});q$({fusedDepthwiseConv2d_:function({x:e,filter:t,strides:n,pad:a,dataFormat:r="NHWC",dilations:o=[1,1],dimRoundingMode:s,bias:i,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(!1===XO(D$.state.gradientDepth,l)){let p=hN(e,t,n,a,r,o,s);return null!=i&&(p=NI(p,i)),qO(p,l,u,c)}const p=U$(e,"x","depthwiseConv2d","float32"),d=U$(t,"filter","depthwiseConv2d","float32");let h=p,f=!1;3===p.rank&&(f=!0,h=qI(p,[1,p.shape[0],p.shape[1],p.shape[2]])),Vx(4===h.rank,(()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`)),Vx(4===d.rank,(()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${d.rank}.`)),Vx(h.shape[3]===d.shape[2],(()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${d.shape[2]}.`)),null==o&&(o=[1,1]),Vx(jI(n,o),(()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`)),GI("fused depthwiseConv2d",a,s);const m=DI(h.shape,d.shape,n,o,a,s,!0);let g,v;null!=i&&(g=U$(i,"bias","fused conv2d"),[g]=I$(g,p),YT(m.outShape,g.shape)),null!=u&&(v=U$(u,"prelu weights","fused depthwiseConv2d"));const b=(e,t)=>{Vx(HI(o),(()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`));const[r,i,u,c]=t,p=UO(e,u,l),d=JO(i.shape,p,r,n,a,o,s),h=KO(i,p,r.shape,n,a,o,s);if(null!=c){return[d,h,GO(g,p)]}return[d,h]},y={x:h,filter:d,bias:g,preluActivationWeights:v},w={strides:n,pad:a,dataFormat:r,dilations:o,dimRoundingMode:s,activation:l,leakyreluAlpha:c};if(null==i){const e=SI(((e,t,n)=>{let a=D$.runKernel(NS,y,w);return n([t,e,a]),f&&(a=qI(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:b}}));return e(h,d)}{const e=SI(((e,t,n,a)=>{let r=D$.runKernel(NS,y,w);return a([t,e,r,n]),f&&(r=qI(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:b}}));return e(h,d,g)}}});const ZO=q$({fusedMatMul_:function({a:e,b:t,transposeA:n=!1,transposeB:a=!1,bias:r,activation:o="linear",preluActivationWeights:s,leakyreluAlpha:i}){if(!1===XO(D$.state.gradientDepth,o)){let l=DN(e,t,n,a);return null!=r&&(l=NI(l,r)),qO(l,o,s,i)}let l=U$(e,"a","fused matMul"),u=U$(t,"b","fused matMul");[l,u]=I$(l,u);const c=n?l.shape[l.rank-2]:l.shape[l.rank-1],p=a?u.shape[u.rank-1]:u.shape[u.rank-2],d=n?l.shape[l.rank-1]:l.shape[l.rank-2],h=a?u.shape[u.rank-2]:u.shape[u.rank-1],f=l.shape.slice(0,-2),m=u.shape.slice(0,-2),g=Ux(f),v=Ux(m);Vx(c===p,(()=>`Error in fused matMul: inner shapes (${c}) and (${p}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${a} must match.`));const b=YT(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([d,h]),y=qI(l,n?[g,c,d]:[g,d,c]),w=qI(u,a?[v,h,p]:[v,p,h]);let x,k;null!=r&&(x=U$(r,"bias","fused matMul"),[x]=I$(x,l),YT(b,x.shape)),null!=s&&(k=U$(s,"prelu weights","fused matMul"));const C=(e,t)=>{const[s,i,l,u]=t,c=UO(qI(e,l.shape),l,o);let p,d;if(n||a?!n&&a?(p=DN(c,i,!1,!1),d=DN(c,s,!0,!1)):n&&!a?(p=DN(i,c,!1,!0),d=DN(s,c,!1,!1)):(p=DN(i,c,!0,!0),d=DN(c,s,!0,!0)):(p=DN(c,i,!1,!0),d=DN(s,c,!0,!1)),null!=r){return[p,d,GO(u,c)]}return[p,d]},E={a:y,b:w,bias:x,preluActivationWeights:k},S={transposeA:n,transposeB:a,activation:o,leakyreluAlpha:i};if(null==r){const e=SI(((e,t,n)=>{const a=D$.runKernel(TS,E,S);return n([e,t,a]),{value:qI(a,b),gradFunc:C}}));return e(y,w)}{const e=SI(((e,t,n,a)=>{const r=D$.runKernel(TS,E,S);return a([e,t,r,n]),{value:qI(r,b),gradFunc:C}}));return e(y,w,x)}}});function QO(e,t,n){const a=1-e%2,r=new Float32Array(e);for(let o=0;o<e;++o){const s=2*Math.PI*o/(e+a-1);r[o]=t-n*Math.cos(s)}return IO(r,"float32")}q$({hammingWindow_:function(e){return QO(e,.54,.46)}});const eR=q$({hannWindow_:function(e){return QO(e,.5,.5)}});function tR(e,t,n){if(Hx(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");const a=W$(e,n);if(2!==a.length&&1!==a.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===a.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Y$(e,t,a,n)}const nR=q$({frame_:function(e,t,n,a=!1,r=0){let o=0;const s=[];for(;o+t<=e.size;)s.push(gO(e,o,t)),o+=n;if(a)for(;o<e.size;){const a=o+t-e.size,i=tN([gO(e,o,t-a),kN([a],r)]);s.push(i),o+=n}return 0===s.length?tR([],[0,t]):qI(tN(s),[s.length,t])}});q$({stft_:function(e,t,n,a,r=eR){null==a&&(a=function(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}(t));const o=nR(e,t,n),s=RN(o,r(t));return LO(s,a)}});const aR=q$({cropAndResize_:function(e,t,n,a,r="bilinear",o=0){const s=U$(e,"image","cropAndResize"),i=U$(t,"boxes","cropAndResize","float32"),l=U$(n,"boxInd","cropAndResize","int32"),u=i.shape[0];Vx(4===s.rank,(()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`)),Vx(2===i.rank&&4===i.shape[1],(()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${i.shape}.`)),Vx(1===l.rank&&l.shape[0]===u,(()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${i.shape}.`)),Vx(2===a.length,(()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${a.length}.`)),Vx(a[0]>=1&&a[1]>=1,(()=>`cropSize must be atleast [1,1], but was ${a}`)),Vx("bilinear"===r||"nearest"===r,(()=>`method must be bilinear or nearest, but was ${r}`));const c={image:s,boxes:i,boxInd:l},p={method:r,extrapolationValue:o,cropSize:a};return D$.runKernel(pC,c,p)}});const rR=q$({flipLeftRight_:function(e){const t=U$(e,"image","flipLeftRight","float32");Vx(4===t.rank,(()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`));const n={image:t};return D$.runKernel(AC,n,{})}});const oR=q$({grayscaleToRGB_:function(e){const t=U$(e,"image","grayscaleToRGB"),n=t.rank-1,a=t.shape[n];Vx(t.rank>=2,(()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`)),Vx(1===a,(()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${a}.`));const r=new Array(t.rank);return r.fill(1,0,n),r[n]=3,wN(t,r)}});const sR=q$({rotateWithOffset_:function(e,t,n=0,a=.5){const r=U$(e,"image","rotateWithOffset","float32");Vx(4===r.rank,(()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${r.rank}.`));const o={image:r},s={radians:t,fillValue:n,center:a};return D$.runKernel($S,o,s)}});function iR(e,t,n,a,r,o){null==a&&(a=.5),null==r&&(r=Number.NEGATIVE_INFINITY),null==o&&(o=0);const s=e.shape[0];return n=Math.min(n,s),Vx(0<=a&&a<=1,(()=>`iouThreshold must be in [0, 1], but was '${a}'`)),Vx(2===e.rank,(()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`)),Vx(4===e.shape[1],(()=>`boxes must have 4 columns, but 2nd dimension was ${e.shape[1]}`)),Vx(1===t.rank,(()=>"scores must be a 1D tensor")),Vx(t.shape[0]===s,(()=>`scores has incompatible shape with boxes. Expected ${s}, but was ${t.shape[0]}`)),Vx(0<=o&&o<=1,(()=>`softNmsSigma must be in [0, 1], but was '${o}'`)),{maxOutputSize:n,iouThreshold:a,scoreThreshold:r,softNmsSigma:o}}const lR=q$({nonMaxSuppression_:function(e,t,n,a=.5,r=Number.NEGATIVE_INFINITY){const o=U$(e,"boxes","nonMaxSuppression","float32"),s=U$(t,"scores","nonMaxSuppression","float32"),i=iR(o,s,n,a,r),l={maxOutputSize:n=i.maxOutputSize,iouThreshold:a=i.iouThreshold,scoreThreshold:r=i.scoreThreshold};return D$.runKernel(yE,{boxes:o,scores:s},l)}});function uR(e,t,n){const a=function(e,t,n){return function(e,t,n){let a=0,r=e.length,o=0,s=!1;for(;a<r;){o=a+(r-a>>>1);const i=n(t,e[o]);i>0?a=o+1:(r=o,s=!i)}return s?a:-a-1}(e,t,n||cR)}(e,t,n),r=a<0?-(a+1):a;e.splice(r,0,t)}function cR(e,t){return e>t?1:e<t?-1:0}function pR(e,t,n,a,r){return fR(e,t,n,a,r,0)}function dR(e,t,n,a,r,o){return fR(e,t,n,a,r,0,!1,o,!0)}function hR(e,t,n,a,r,o){return fR(e,t,n,a,r,o,!0)}function fR(e,t,n,a,r,o,s=!1,i=!1,l=!1){const u=[];for(let e=0;e<t.length;e++)t[e]>r&&u.push({score:t[e],boxIndex:e,suppressBeginIndex:0});u.sort(vR);const c=o>0?-.5/o:0,p=[],d=[];for(;p.length<n&&u.length>0;){const t=u.pop(),{score:n,boxIndex:o,suppressBeginIndex:s}=t;if(n<r)break;let i=!1;for(let n=p.length-1;n>=s;--n){const s=mR(e,o,p[n]);if(s>=a){i=!0;break}if(t.score=t.score*gR(a,c,s),t.score<=r)break}t.suppressBeginIndex=p.length,i||(t.score===n?(p.push(o),d.push(t.score)):t.score>r&&uR(u,t,vR))}const h=p.length,f=n-h;i&&f>0&&(p.push(...new Array(f).fill(0)),d.push(...new Array(f).fill(0)));const m={selectedIndices:p};return s&&(m.selectedScores=d),l&&(m.validOutputs=h),m}function mR(e,t,n){const a=e.subarray(4*t,4*t+4),r=e.subarray(4*n,4*n+4),o=Math.min(a[0],a[2]),s=Math.min(a[1],a[3]),i=Math.max(a[0],a[2]),l=Math.max(a[1],a[3]),u=Math.min(r[0],r[2]),c=Math.min(r[1],r[3]),p=Math.max(r[0],r[2]),d=Math.max(r[1],r[3]),h=(i-o)*(l-s),f=(p-u)*(d-c);if(h<=0||f<=0)return 0;const m=Math.max(o,u),g=Math.max(s,c),v=Math.min(i,p),b=Math.min(l,d),y=Math.max(v-m,0)*Math.max(b-g,0);return y/(h+f-y)}function gR(e,t,n){const a=Math.exp(t*n*n);return n<=e?a:0}function vR(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}const bR=async function(e,t,n,a=.5,r=Number.NEGATIVE_INFINITY){const o=U$(e,"boxes","nonMaxSuppressionAsync"),s=U$(t,"scores","nonMaxSuppressionAsync"),i=iR(o,s,n,a,r);n=i.maxOutputSize,a=i.iouThreshold,r=i.scoreThreshold;const l=await Promise.all([o.data(),s.data()]),u=l[0],c=l[1],{selectedIndices:p}=pR(u,c,n,a,r);return o!==e&&o.dispose(),s!==t&&s.dispose(),IO(p,"int32")};const yR=q$({nonMaxSuppressionWithScore_:function(e,t,n,a=.5,r=Number.NEGATIVE_INFINITY,o=0){const s=U$(e,"boxes","nonMaxSuppression"),i=U$(t,"scores","nonMaxSuppression"),l=iR(s,i,n,a,r,o),u={boxes:s,scores:i},c={maxOutputSize:n=l.maxOutputSize,iouThreshold:a=l.iouThreshold,scoreThreshold:r=l.scoreThreshold,softNmsSigma:o=l.softNmsSigma},p=D$.runKernel(xE,u,c);return{selectedIndices:p[0],selectedScores:p[1]}}});const wR=async function(e,t,n,a=.5,r=Number.NEGATIVE_INFINITY,o=0){const s=U$(e,"boxes","nonMaxSuppressionAsync"),i=U$(t,"scores","nonMaxSuppressionAsync"),l=iR(s,i,n,a,r,o);n=l.maxOutputSize,a=l.iouThreshold,r=l.scoreThreshold,o=l.softNmsSigma;const u=await Promise.all([s.data(),i.data()]),c=u[0],p=u[1],{selectedIndices:d,selectedScores:h}=hR(c,p,n,a,r,o);return s!==e&&s.dispose(),i!==t&&i.dispose(),{selectedIndices:IO(d,"int32"),selectedScores:IO(h)}};const xR=q$({nonMaxSuppressionPadded_:function(e,t,n,a=.5,r=Number.NEGATIVE_INFINITY,o=!1){const s=U$(e,"boxes","nonMaxSuppression"),i=U$(t,"scores","nonMaxSuppression"),l=iR(s,i,n,a,r,null),u={boxes:s,scores:i},c={maxOutputSize:l.maxOutputSize,iouThreshold:l.iouThreshold,scoreThreshold:l.scoreThreshold,padToMaxOutputSize:o},p=D$.runKernel(wE,u,c);return{selectedIndices:p[0],validOutputs:p[1]}}});const kR=async function(e,t,n,a=.5,r=Number.NEGATIVE_INFINITY,o=!1){const s=U$(e,"boxes","nonMaxSuppressionAsync"),i=U$(t,"scores","nonMaxSuppressionAsync"),l=iR(s,i,n,a,r,null),u=l.maxOutputSize,c=l.iouThreshold,p=l.scoreThreshold,[d,h]=await Promise.all([s.data(),i.data()]),{selectedIndices:f,validOutputs:m}=dR(d,h,u,c,p,o);return s!==e&&s.dispose(),i!==t&&i.dispose(),{selectedIndices:IO(f,"int32"),validOutputs:$I(m,"int32")}};const CR=q$({resizeBilinear_:function(e,t,n=!1,a=!1){const r=U$(e,"images","resizeBilinear");Vx(3===r.rank||4===r.rank,(()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${r.rank}.`)),Vx(2===t.length,(()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`)),Vx(!1===a||!1===n,(()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."));let o=r,s=!1;3===r.rank&&(s=!0,o=qI(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const[]=t,i={images:o},l={alignCorners:n,halfPixelCenters:a,size:t},u=D$.runKernel(DE,i,l);return s?qI(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const ER=q$({resizeNearestNeighbor_:function(e,t,n=!1,a=!1){const r=U$(e,"images","resizeNearestNeighbor");Vx(3===r.rank||4===r.rank,(()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${r.rank}.`)),Vx(2===t.length,(()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`)),Vx("float32"===r.dtype||"int32"===r.dtype,(()=>"`images` must have `int32` or `float32` as dtype")),Vx(!1===a||!1===n,(()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."));let o=r,s=!1;3===r.rank&&(s=!0,o=qI(r,[1,r.shape[0],r.shape[1],r.shape[2]]));const[]=t,i={images:o},l={alignCorners:n,halfPixelCenters:a,size:t},u=D$.runKernel(BE,i,l);return s?qI(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});const SR=q$({bincount_:function(e,t,n){const a=U$(e,"x","bincount"),r=U$(t,"weights","bincount");Vx("int32"===a.dtype,(()=>`Error in bincount: input dtype must be int32, but got ${a.dtype}`)),Vx(n>=0,(()=>`size must be non-negative, but got ${n}.`)),Vx(r.size===a.size||0===r.size,(()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${a.shape}, weights shape: ${r.shape}.`));const o={x:a,weights:r},s={size:n};return D$.runKernel(Xk,o,s)}});const $R=q$({lessEqual_:function(e,t){let n=U$(e,"a","lessEqual","string_or_numeric"),a=U$(t,"b","lessEqual","string_or_numeric");[n,a]=I$(n,a),YT(n.shape,a.shape);const r={a:n,b:a};return D$.runKernel(XC,r)}});const TR=q$({round_:function(e){const t={x:U$(e,"x","round")};return D$.runKernel(zE,t)}});function IR(e,t,n=1,a="float32"){if(0===n)throw new Error("Cannot have a step of zero");const r={start:e,stop:t,step:n,dtype:a};return D$.runKernel(NE,{},r)}const NR=q$({threshold_:function(e,t="binary",n=!1,a=.5){const r=U$(e,"image","threshold"),o=r.shape[0]*r.shape[1];let s,i,l,u,c=RN(IO([a]),255);if(Vx(3===r.rank,(()=>`Error in threshold: image must be rank 3,but got rank ${r.rank}.`)),Vx(3===r.shape[2]||1===r.shape[2],(()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${r.shape[2]}.`)),Vx("int32"===r.dtype||"float32"===r.dtype,(()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${r.dtype}.`)),Vx("otsu"===t||"binary"===t,(()=>`Method must be binary or otsu, but was ${t}`)),3===r.shape[2]){[s,i,l]=CO(r,[1,1,1],-1);const e=RN(s,.2989),t=RN(i,.587),n=RN(l,.114);u=NI(NI(e,t),n)}else u=e;if("otsu"===t){c=function(e,t){let n,a,r,o,s,i,l=IO([-1]),u=IO([0]),c=IO([0]);for(let p=0;p<e.size-1;p++){n=gO(e,0,p+1),a=gO(e,p+1),s=mN(MN(n),t),i=mN(MN(a),t);const d=MN(RN(n,IR(0,n.size)));r=mN(d,MN(n));const h=kN(a.shape,n.size),f=NI(IR(0,a.size),h),m=RN(a,f);o=mN(MN(m),MN(a));const g=AN(r,o),v=AN(r,o),b=RN(s,i);c=RN(RN(b,g),v);const y=SN(c,u);u=AO(y,c,u),l=AO(y,IO([p]),l)}return l}(SR(FT(TR(u),"int32"),K$([]),256),o)}const p=n?$R(u,c):SN(u,c);return FT(RN(p,255),"int32")}});const OR=q$({transform_:function(e,t,n="nearest",a="constant",r=0,o){const s=U$(e,"image","transform","float32"),i=U$(t,"transforms","transform","float32");Vx(4===s.rank,(()=>`Error in transform: image must be rank 4,but got rank ${s.rank}.`)),Vx(2===i.rank&&(i.shape[0]===s.shape[0]||1===i.shape[0])&&8===i.shape[1],(()=>"Error in transform: Input transform should be batch x 8 or 1 x 8")),Vx(null==o||2===o.length,(()=>`Error in transform: outputShape must be [height, width] or null, but got ${o}.`));const l={image:s,transforms:i},u={interpolation:n,fillMode:a,fillValue:r,outputShape:o};return D$.runKernel(bS,l,u)}});const RR=q$({bandPart_:function(e,t,n){Vx(t%1==0,(()=>`bandPart(): numLower must be an integer, got ${t}.`)),Vx(n%1==0,(()=>`bandPart(): numUpper must be an integer, got ${n}.`));const a=U$(e,"a","bandPart");Vx(a.rank>=2,(()=>`bandPart(): Rank must be at least 2, got ${a.rank}.`));const r=a.shape,[o,s]=a.shape.slice(-2);if(!(t<=o))throw new Error(`bandPart(): numLower (${t}) must not be greater than the number of rows (${o}).`);if(!(n<=s))throw new Error(`bandPart(): numUpper (${n}) must not be greater than the number of columns (${s}).`);t<0&&(t=o),n<0&&(n=s);const i=qI(IR(0,o,1,"int32"),[-1,1]),l=IR(0,s,1,"int32"),u=AN(i,l),c=PN($R(u,$I(+t,"int32")),$N(u,$I(-n,"int32"))),p=tO([o,s],a.dtype);return qI($O(OO(qI(a,[-1,o,s])).map((e=>AO(c,e,p)))),r)}});const AR=q$({min_:function(e,t=null,n=!1){const a={x:U$(e,"x","min")},r={axis:t,keepDims:n};return D$.runKernel(pE,a,r)}});const MR=q$({pow_:function(e,t){let n=U$(e,"base","pow"),a=U$(t,"exp","pow");[n,a]=I$(n,a);const r={a:n,b:a};return D$.runKernel($E,r)}});function BR(e,t,n=null){if(0===e.rank)return II(e);if(1!==e.rank&&null===n)return BR(qI(e,[-1]),t,n);if(1===e.rank||"number"==typeof n||Array.isArray(n)&&1===n.length){if(1===t)return MN(II(e),n);if(t===1/0)return ON(II(e),n);if(t===-1/0)return AR(II(e),n);if("euclidean"===t||2===t)return EO(MN(MR(II(e),$I(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(n)&&2===n.length){if(1===t)return ON(MN(II(e),n[0]),n[1]-1);if(t===1/0)return ON(MN(II(e),n[1]),n[0]);if(t===-1/0)return AR(MN(II(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return EO(MN(KN(e),n));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const PR=q$({norm_:function(e,t="euclidean",n=null,a=!1){const r=BR(e=U$(e,"x","norm"),t,n);let o=r.shape;if(a){const t=Zx(n,e.shape);o=UN(r.shape,t)}return qI(r,o)}});const DR=q$({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,Vx(null!=e&&e.length>0,(()=>"Gram-Schmidt process: input must not be null, undefined, or empty"));const n=e[0].shape[0];for(let t=1;t<e.length;++t)Vx(e[t].shape[0]===n,(()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[t].shape[0]} vs. ${n})`))}else t=!0,e=CO(e,e.shape[0],0).map((e=>SO(e,[0])));Vx(e.length<=e[0].shape[0],(()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`));const n=[],a=e;for(let t=0;t<e.length;++t)n.push(D$.tidy((()=>{let e=a[t];if(t>0)for(let a=0;a<t;++a){const t=RN(MN(RN(n[a],e)),n[a]);e=AN(e,t)}return mN(e,PR(e,"euclidean"))})));return t?$O(n,0):n}});function FR(e,t=!1){return D$.tidy((()=>{Vx(2===e.shape.length,(()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`));const n=e.shape[0],a=e.shape[1];let r=xN(n),o=_T(e);const s=tR([[1]],[1,1]);let i=_T(s);const l=n>=a?a:n;for(let e=0;e<l;++e){const t=o,l=i,u=r;[i,o,r]=D$.tidy((()=>{const t=gO(o,[e,e],[n-e,1]),l=PR(t),u=gO(o,[e,e],[1,1]),c=AO(SN(u,0),tR([[-1]]),tR([[1]])),p=AN(u,RN(c,l)),d=mN(t,p);i=1===d.shape[0]?_T(s):tN([s,gO(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);const h=ZN(mN(DN(c,p),l)),f=gO(o,[e,0],[n-e,a]),m=RN(h,i),g=BO(i);if(0===e)o=AN(f,DN(m,DN(g,f)));else{const t=AN(f,DN(m,DN(g,f)));o=tN([gO(o,[0,0],[e,a]),t],0)}const v=BO(m),b=gO(r,[0,e],[n,r.shape[1]-e]);if(0===e)r=AN(b,DN(DN(b,i),v));else{const t=AN(b,DN(DN(b,i),v));r=tN([gO(r,[0,0],[n,e]),t],1)}return[i,o,r]})),kI([t,l,u])}return!t&&n>a&&(r=gO(r,[0,0],[n,a]),o=gO(o,[0,0],[a,a])),[r,o]}))}const _R=q$({qr_:function(e,t=!1){if(Vx(e.rank>=2,(()=>`qr() requires input tensor to have a rank >= 2, but got rank ${e.rank}`)),2===e.rank)return FR(e,t);{const n=e.shape.slice(0,e.shape.length-2).reduce(((e,t)=>e*t)),a=OO(qI(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),r=[],o=[];a.forEach((e=>{const[n,a]=FR(e,t);r.push(n),o.push(a)}));return[qI($O(r,0),e.shape),qI($O(o,0),e.shape)]}}});var LR;!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(LR||(LR={}));const zR=q$({computeWeightedLoss_:function(e,t,n=LR.SUM_BY_NONZERO_WEIGHTS){const a=U$(e,"losses","computeWeightedLoss");let r=null;null!=t&&(r=U$(t,"weights","computeWeightedLoss"));const o=null==r?a:RN(a,r);if(n===LR.NONE)return o;if(n===LR.SUM)return MN(o);if(n===LR.MEAN){if(null==r)return zN(o);{const e=a.size/r.size,t=mN(MN(o),MN(r));return e>1?mN(t,$I(e)):t}}if(n===LR.SUM_BY_NONZERO_WEIGHTS){if(null==r)return mN(MN(o),$I(a.size));{const e=RN(r,nO(a.shape)),t=FT(MN(QN(e,$I(0))),"float32");return mN(MN(o),t)}}throw Error(`Unknown reduction: ${n}`)}});q$({absoluteDifference_:function(e,t,n,a=LR.SUM_BY_NONZERO_WEIGHTS){const r=U$(e,"labels","absoluteDifference"),o=U$(t,"predictions","absoluteDifference");let s=null;null!=n&&(s=U$(n,"weights","absoluteDifference")),Wx(r.shape,o.shape,"Error in absoluteDifference: ");const i=II(AN(r,o));return zR(i,s,a)}});q$({cosineDistance_:function(e,t,n,a,r=LR.SUM_BY_NONZERO_WEIGHTS){const o=U$(e,"labels","cosineDistance"),s=U$(t,"predictions","cosineDistance");let i=null;null!=a&&(i=U$(a,"weights","cosineDistance")),Wx(o.shape,s.shape,"Error in cosineDistance: ");const l=$I(1),u=AN(l,MN(RN(o,s),n,!0));return zR(u,i,r)}});q$({hingeLoss_:function(e,t,n,a=LR.SUM_BY_NONZERO_WEIGHTS){let r=U$(e,"labels","hingeLoss");const o=U$(t,"predictions","hingeLoss");let s=null;null!=n&&(s=U$(n,"weights","hingeLoss")),Wx(r.shape,o.shape,"Error in hingeLoss: ");const i=$I(1);r=AN(RN($I(2),r),i);const l=pO(AN(i,RN(r,o)));return zR(l,s,a)}});q$({huberLoss_:function(e,t,n,a=1,r=LR.SUM_BY_NONZERO_WEIGHTS){const o=U$(e,"labels","huberLoss"),s=U$(t,"predictions","huberLoss");let i=null;null!=n&&(i=U$(n,"weights","huberLoss")),Wx(o.shape,s.shape,"Error in huberLoss: ");const l=$I(a),u=II(AN(s,o)),c=VN(u,l),p=AN(u,c),d=NI(RN($I(.5),KN(c)),RN(l,p));return zR(d,i,r)}});q$({logLoss_:function(e,t,n,a=1e-7,r=LR.SUM_BY_NONZERO_WEIGHTS){const o=U$(e,"labels","logLoss"),s=U$(t,"predictions","logLoss");let i=null;null!=n&&(i=U$(n,"weights","logLoss")),Wx(o.shape,s.shape,"Error in logLoss: ");const l=$I(1),u=$I(a),c=ZN(RN(o,IN(NI(s,u)))),p=RN(AN(l,o),IN(NI(AN(l,s),u))),d=AN(c,p);return zR(d,i,r)}});const VR=q$({squaredDifference_:function(e,t){let n=U$(e,"a","squaredDifference"),a=U$(t,"b","squaredDifference");[n,a]=I$(n,a),YT(n.shape,a.shape);const r={a:n,b:a};return D$.runKernel(iS,r,{})}});q$({meanSquaredError_:function(e,t,n,a=LR.SUM_BY_NONZERO_WEIGHTS){const r=U$(e,"labels","meanSquaredError"),o=U$(t,"predictions","meanSquaredError");let s=null;null!=n&&(s=U$(n,"weights","meanSquaredError")),Wx(r.shape,o.shape,"Error in meanSquaredError: ");const i=VR(r,o);return zR(i,s,a)}});q$({sigmoidCrossEntropy_:function(e,t,n,a=0,r=LR.SUM_BY_NONZERO_WEIGHTS){let o=U$(e,"multiClassLabels","sigmoidCrossEntropy");const s=U$(t,"logits","sigmoidCrossEntropy");let i=null;if(null!=n&&(i=U$(n,"weights","sigmoidCrossEntropy")),Wx(o.shape,s.shape,"Error in sigmoidCrossEntropy: "),a>0){const e=$I(a),t=$I(1),n=$I(.5);o=NI(RN(o,AN(t,e)),RN(n,e))}const l=function(e,t){const n=U$(e,"labels","sigmoidCrossEntropyWithLogits"),a=U$(t,"logits","sigmoidCrossEntropyWithLogits");Wx(n.shape,a.shape,"Error in sigmoidCrossEntropyWithLogits: ");const r=pO(a),o=RN(a,n),s=NN(bN(ZN(II(a))));return NI(AN(r,o),s)}(o,s);return zR(l,i,r)}});const WR=q$({logSumExp_:function(e,t=null,n=!1){const a=U$(e,"x","logSumExp"),r=Zx(t,a.shape),o=ON(a,r,!0),s=AN(a,o),i=bN(s),l=MN(i,r),u=IN(l),c=NI(qI(o,u.shape),u);if(n){const e=UN(c.shape,r);return qI(c,e)}return c}});q$({softmaxCrossEntropy_:function(e,t,n,a=0,r=LR.SUM_BY_NONZERO_WEIGHTS){let o=U$(e,"onehotLabels","softmaxCrossEntropy");const s=U$(t,"logits","softmaxCrossEntropy");let i=null;if(null!=n&&(i=U$(n,"weights","softmaxCrossEntropy")),Wx(o.shape,s.shape,"Error in softmaxCrossEntropy: "),a>0){const e=$I(a),t=$I(1),n=$I(o.shape[1]);o=NI(RN(o,AN(t,e)),mN(e,n))}const l=function(e,t,n=-1){if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);const a=SI(((e,t,a)=>{const r=WR(t,[n],!0),o=AN(FT(t,"float32"),r);a([e,o]);const s=ZN(RN(o,e));return{value:MN(s,[n]),gradFunc:(e,t)=>{const[a,r]=t,o=UN(e.shape,[n]);return[RN(qI(e,o),AN(FT(a,"float32"),bN(r))),RN(qI(e,o),AN(bN(r),FT(a,"float32")))]}}}));return a(e,t)}(o,s);return zR(l,i,r)}});q$({sparseFillEmptyRows_:function(e,t,n,a){const r=U$(e,"indices","sparseFillEmptyRows","int32"),o=U$(t,"values","sparseFillEmptyRows"),s=U$(n,"denseShape","sparseFillEmptyRows","int32"),i=U$(a,"defaultValue","sparseFillEmptyRows",o.dtype);if(2!==r.rank)throw new Error(`Indices should be Tensor2D but received shape\n        ${r.shape}`);if(1!==o.rank)throw new Error(`Values should be Tensor1D but received shape ${o.shape}`);if(1!==s.rank)throw new Error(`Dense shape should be Tensor1D but received shape ${s.shape}`);if(0!==i.rank)throw new Error(`Default value should be a scalar but received shape ${i.shape}`);const l={indices:r,values:o,denseShape:s,defaultValue:i},u=D$.runKernel(nS,l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}});q$({sparseReshape_:function(e,t,n){const a=U$(e,"inputIndices","sparseReshape","int32"),r=U$(t,"inputShape","sparseReshape","int32"),o=U$(n,"newShape","sparseReshape","int32");if(2!==a.rank)throw new Error(`Input indices should be Tensor2D but received shape\n        ${a.shape}`);if(1!==r.rank)throw new Error(`Input shape should be Tensor1D but received shape ${r.shape}`);if(1!==o.rank)throw new Error(`New shape should be Tensor1D but received shape ${o.shape}`);const s={inputIndices:a,inputShape:r,newShape:o},i=D$.runKernel(aS,s);return{outputIndices:i[0],outputShape:i[1]}}});q$({sparseSegmentMean_:function(e,t,n){const a=U$(e,"data","sparseSegmentMean"),r=U$(t,"indices","sparseSegmentMean","int32"),o=U$(n,"segmentIds","sparseSegmentMean","int32");if(a.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.rank)throw new Error(`Indices should be Tensor1D but received shape\n          ${r.shape}`);if(1!==o.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n          ${o.shape}`);const s={data:a,indices:r,segmentIds:o};return D$.runKernel(rS,s)}});q$({sparseSegmentSum_:function(e,t,n){const a=U$(e,"data","sparseSegmentSum"),r=U$(t,"indices","sparseSegmentSum","int32"),o=U$(n,"segmentIds","sparseSegmentSum","int32");if(a.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.rank)throw new Error(`Indices should be Tensor1D but received shape\n         ${r.shape}`);if(1!==o.rank)throw new Error(`Segment ids should be Tensor1D but received shape\n         ${o.shape}`);const s={data:a,indices:r,segmentIds:o};return D$.runKernel(oS,s)}});q$({stringNGrams_:function(e,t,n,a,r,o,s,i){const l=U$(e,"data","stringNGrams","string");if("string"!==l.dtype)throw new Error("Data must be of datatype string");if(1!==l.shape.length)throw new Error(`Data must be a vector, saw: ${l.shape}`);const u=U$(t,"dataSplits","stringNGrams");if("int32"!==u.dtype)throw new Error("Data splits must be of datatype int32");const c={separator:n,nGramWidths:a,leftPad:r,rightPad:o,padWidth:s,preserveShortSequences:i},p={data:l,dataSplits:u},d=D$.runKernel(cS,p,c);return{nGrams:d[0],nGramsSplits:d[1]}}});q$({stringSplit_:function(e,t,n=!0){const a=U$(e,"input","stringSplit","string"),r=U$(t,"delimiter","stringSplit","string");if(1!==a.rank)throw new Error(`Input should be Tensor1D but received shape ${a.shape}`);if(0!==r.rank)throw new Error(`Delimiter should be a scalar but received shape ${r.shape}`);const o={skipEmpty:n},s={input:a,delimiter:r},i=D$.runKernel(pS,s,o);return{indices:i[0],values:i[1],shape:i[2]}}});q$({stringToHashBucketFast_:function(e,t){const n=U$(e,"input","stringToHashBucketFast","string"),a={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");const r={input:n};return D$.runKernel(dS,r,a)}});const HR={flipLeftRight:rR,grayscaleToRGB:oR,resizeNearestNeighbor:ER,resizeBilinear:CR,rotateWithOffset:sR,cropAndResize:aR,nonMaxSuppression:lR,nonMaxSuppressionAsync:bR,nonMaxSuppressionWithScore:yR,nonMaxSuppressionWithScoreAsync:wR,nonMaxSuppressionPadded:xR,nonMaxSuppressionPaddedAsync:kR,threshold:NR,transform:OR},jR={bandPart:RR,gramSchmidt:DR,qr:_R};class UR extends TI{constructor(e,t,n=null){super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=D$.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const a=D$.registeredVariables[t];null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:`${t}/accum_grad`,variable:xI((()=>MO(a).variable(false)))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:`${t}/accum_var`,variable:xI((()=>MO(a).variable(false)))});const r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;const o=this.accumulatedGrads[n].variable,s=this.accumulatedUpdates[n].variable;xI((()=>{const e=NI(RN(o,this.rho),RN(KN(r),1-this.rho)),t=RN(mN(EO(NI(s,this.epsilon)),EO(NI(o,this.epsilon))),r),n=NI(RN(s,this.rho),RN(KN(t),1-this.rho));o.assign(e),s.assign(n);const i=NI(RN(t,-this.learningRate),a);a.assign(i)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(kI(this.accumulatedGrads.map((e=>e.variable))),kI(this.accumulatedUpdates.map((e=>e.variable))))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){const t=(e=await this.extractIterations(e)).length/2;this.accumulatedGrads=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)}))),this.accumulatedUpdates=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}UR.className="Adadelta",bI(UR);class GR extends TI{constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const a=D$.registeredVariables[t];if(null==this.accumulatedGrads[n]){const e=!1;this.accumulatedGrads[n]={originalName:`${t}/accumulator`,variable:xI((()=>kN(a.shape,this.initialAccumulatorValue).variable(e)))}}const r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;const o=this.accumulatedGrads[n].variable;xI((()=>{const e=NI(o,KN(r));o.assign(e);const t=NI(RN(mN(r,EO(NI(e,D$.backend.epsilon()))),-this.learningRate),a);a.assign(t)}))})),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&kI(this.accumulatedGrads.map((e=>e.variable)))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulatedGrads=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}GR.className="Adagrad",bI(GR);class qR extends TI{constructor(e,t,n,a=null){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=a,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],xI((()=>{this.accBeta1=$I(t).variable(),this.accBeta2=$I(n).variable()})),null==a&&(this.epsilon=D$.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);xI((()=>{const n=AN(1,this.accBeta1),a=AN(1,this.accBeta2);t.forEach(((t,r)=>{const o=D$.registeredVariables[t];null==this.accumulatedFirstMoment[r]&&(this.accumulatedFirstMoment[r]={originalName:`${t}/m`,variable:xI((()=>MO(o).variable(false)))}),null==this.accumulatedSecondMoment[r]&&(this.accumulatedSecondMoment[r]={originalName:`${t}/v`,variable:xI((()=>MO(o).variable(false)))});const s=Array.isArray(e)?e[r].tensor:e[t];if(null==s)return;const i=this.accumulatedFirstMoment[r].variable,l=this.accumulatedSecondMoment[r].variable,u=NI(RN(i,this.beta1),RN(s,1-this.beta1)),c=NI(RN(l,this.beta2),RN(KN(s),1-this.beta2)),p=mN(u,n),d=mN(c,a);i.assign(u),l.assign(c);const h=NI(RN(mN(p,NI(EO(d),this.epsilon)),-this.learningRate),o);o.assign(h)})),this.accBeta1.assign(RN(this.accBeta1,this.beta1)),this.accBeta2.assign(RN(this.accBeta2,this.beta2))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&kI(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedSecondMoment&&kI(this.accumulatedSecondMoment.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e),xI((()=>{this.accBeta1.assign(MR(this.beta1,this.iterations_+1)),this.accBeta2.assign(MR(this.beta2,this.iterations_+1))}));const t=e.length/2;this.accumulatedFirstMoment=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)}))),this.accumulatedSecondMoment=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}qR.className="Adam",bI(qR);class XR extends TI{constructor(e,t,n,a=null,r=0){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=a,this.decay=r,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],xI((()=>{this.iteration=$I(0).variable(),this.accBeta1=$I(t).variable()})),null==a&&(this.epsilon=D$.backend.epsilon())}applyGradients(e){const t=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);xI((()=>{const n=AN(1,this.accBeta1),a=mN(-this.learningRate,NI(RN(this.iteration,this.decay),1));t.forEach(((t,r)=>{const o=D$.registeredVariables[t];null==this.accumulatedFirstMoment[r]&&(this.accumulatedFirstMoment[r]={originalName:`${t}/m`,variable:MO(o).variable(false)}),null==this.accumulatedWeightedInfNorm[r]&&(this.accumulatedWeightedInfNorm[r]={originalName:`${t}/v`,variable:MO(o).variable(false)});const s=Array.isArray(e)?e[r].tensor:e[t];if(null==s)return;const i=this.accumulatedFirstMoment[r].variable,l=this.accumulatedWeightedInfNorm[r].variable,u=NI(RN(i,this.beta1),RN(s,1-this.beta1)),c=RN(l,this.beta2),p=II(s),d=LN(c,p);i.assign(u),l.assign(d);const h=NI(RN(mN(a,n),mN(u,NI(d,this.epsilon))),o);o.assign(h)})),this.iteration.assign(NI(this.iteration,1)),this.accBeta1.assign(RN(this.accBeta1,this.beta1))})),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&kI(this.accumulatedFirstMoment.map((e=>e.variable))),null!=this.accumulatedWeightedInfNorm&&kI(this.accumulatedWeightedInfNorm.map((e=>e.variable)))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}XR.className="Adamax",bI(XR);class YR extends TI{constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const a=Array.isArray(e)?e[n].tensor:e[t];if(null==a)return;const r=D$.registeredVariables[t];xI((()=>{const e=NI(RN(this.c,a),r);r.assign(e)}))})),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=CI($I(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}}YR.className="SGD",bI(YR);class KR extends YR{constructor(e,t,n=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=$I(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const a=D$.registeredVariables[t];if(null==this.accumulations[n]){const e=!1;this.accumulations[n]={originalName:`${t}/momentum`,variable:xI((()=>MO(a).variable(e)))}}const r=this.accumulations[n].variable,o=Array.isArray(e)?e[n].tensor:e[t];null!=o&&xI((()=>{let e;const t=NI(RN(this.m,r),o);e=this.useNesterov?NI(RN(this.c,NI(o,RN(t,this.m))),a):NI(RN(this.c,t),a),r.assign(t),a.assign(e)}))})),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&kI(this.accumulations.map((e=>e.variable)))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map((e=>({originalName:e.name,variable:e.tensor.variable(false)})))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}KR.className="Momentum",bI(KR);class JR extends TI{constructor(e,t=.9,n=0,a=null,r=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=a,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=r,null==a&&(this.epsilon=D$.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map((e=>e.name)):Object.keys(e)).forEach(((t,n)=>{const a=D$.registeredVariables[t],r=!1;null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:`${t}/rms`,variable:xI((()=>MO(a).variable(r)))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:`${t}/momentum`,variable:xI((()=>MO(a).variable(r)))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:`${t}/mg`,variable:xI((()=>MO(a).variable(r)))});const o=Array.isArray(e)?e[n].tensor:e[t];if(null==o)return;const s=this.accumulatedMeanSquares[n].variable,i=this.accumulatedMoments[n].variable;xI((()=>{const e=NI(RN(s,this.decay),RN(KN(o),1-this.decay));if(this.centered){const t=this.accumulatedMeanGrads[n].variable,r=NI(RN(t,this.decay),RN(o,1-this.decay)),l=mN(RN(o,this.learningRate),EO(AN(e,NI(KN(r),this.epsilon)))),u=NI(RN(i,this.momentum),l);s.assign(e),t.assign(r),i.assign(u);const c=AN(a,u);a.assign(c)}else{const e=NI(RN(s,this.decay),RN(KN(o),1-this.decay)),t=NI(RN(i,this.momentum),mN(RN(o,this.learningRate),EO(NI(e,this.epsilon))));s.assign(e),i.assign(t);const n=AN(a,t);a.assign(n)}}))})),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&kI(this.accumulatedMeanSquares.map((e=>e.variable))),null!=this.accumulatedMeanGrads&&this.centered&&kI(this.accumulatedMeanGrads.map((e=>e.variable))),null!=this.accumulatedMoments&&kI(this.accumulatedMoments.map((e=>e.variable)))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map((e=>({name:e.originalName,tensor:e.variable}))))}async setWeights(e){e=await this.extractIterations(e);const t=this.centered?e.length/3:e.length/2,n=!1;this.accumulatedMeanSquares=e.slice(0,t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.accumulatedMoments=e.slice(t,2*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((e=>({originalName:e.name,variable:e.tensor.variable(n)}))))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}JR.className="RMSProp",bI(JR);class ZR{static sgd(e){return new YR(e)}static momentum(e,t,n=!1){return new KR(e,t,n)}static rmsprop(e,t=.9,n=0,a=null,r=!1){return new JR(e,t,n,a,r)}static adam(e=.001,t=.9,n=.999,a=null){return new qR(e,t,n,a)}static adadelta(e=.001,t=.95,n=null){return new UR(e,t,n)}static adamax(e=.002,t=.9,n=.999,a=null,r=0){return new XR(e,t,n,a,r)}static adagrad(e,t=.1){return new GR(e,t)}}const QR={sgd:ZR.sgd,momentum:ZR.momentum,adadelta:ZR.adadelta,adagrad:ZR.adagrad,rmsprop:ZR.rmsprop,adamax:ZR.adamax,adam:ZR.adam},eA="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:e=>e();function tA(){return new Promise((e=>eA((()=>e()))))}function nA(e,t){const n=e[0].length;e.forEach(((e,t)=>{Vx(e.length===n,(()=>`Error in concat${n}D: rank of tensors[${t}] must be the same as the rank of the rest (${n})`))})),Vx(t>=0&&t<n,(()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`));const a=e[0];e.forEach(((e,r)=>{for(let o=0;o<n;o++)Vx(o===t||e[o]===a[o],(()=>`Error in concat${n}D: Shape of tensors[${r}] (${e}) does not match the shape of the rest (${a}) along the non-concatenated axis ${r}.`))}))}function aA(e,t){const n=e[0].slice();for(let a=1;a<e.length;a++)n[t]+=e[a][t];return n}const rA=30;function oA(e){return e<=rA?e:uk(e,Math.floor(Math.sqrt(e)))}function sA(e,t,n){return[n*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}function iA(e,t,n,a=!0){let r=[];if(a)r=r.concat(t.slice(0)),r.push(e[0]/n),r=r.concat(e.slice(1));else{r=r.concat(e[0]);const n=t.length;for(let a=0;a<n;++a)r=r.concat([e[a+1]/t[a],t[a]]);r=r.concat(e.slice(n+1))}return r}function lA(e,t,n=!0){const a=[];if(n){a.push(t);for(let n=t+1;n<e;++n)n<=2*t?(a.push(n),a.push(n-(t+1))):a.push(n)}else{const n=[],r=[];for(let a=1;a<e;++a)a>=2*t+1||a%2==1?r.push(a):n.push(a);a.push(...n),a.push(0),a.push(...r)}return a}function uA(e,t,n,a=!0){const r=[];a?r.push(e[0]/n):r.push(e[0]*n);for(let n=1;n<e.length;++n)n<=t.length?a?r.push(t[n-1]*e[n]):r.push(e[n]/t[n-1]):r.push(e[n]);return r}function cA(e,t){const n=[0];for(let a=0;a<t;++a)n.push(e[a][0]);return n}function pA(e,t,n){const a=e.slice(0,1);for(let r=0;r<n;++r)a.push(e[r+1]-t[r][0]-t[r][1]);return a}function dA(e,t){const n=e.shape.length,a=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(a<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${a}.`);if("int32"!==t.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[a-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[a-1]} vs. ${n}`);if(0===Ux(e.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);const r=t.shape,o=r[r.length-1];let s=1;for(let e=0;e<r.length-1;++e)s*=r[e];const i=e.shape,l=r.slice();l.pop();let u=1;for(let e=o;e<n;++e)u*=i[e],l.push(i[e]);const c=[...ck(e.shape).map((e=>e/u)),1].slice(0,o);return[l,s,u,c]}function hA(e,t,n){const a=t.rank>1?t.shape[t.rank-1]:1,r=t.rank>1?t.rank-1:1,o=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${a}, and batchDim: ${r}.`;if(n.rank<r)throw new Error(o+` update.rank < ${r}. `);if(e.length<a+(n.rank-r))throw new Error(o+` Output shape length < ${a+(n.rank-r)}`);if(n.rank!==r+e.length-a)throw new Error(o+" update.rank != "+(r+e.length-a));for(let e=0;e<r;++e)if(n.shape[e]!==t.shape[e])throw new Error(o+` updates.shape[${e}] (${n.shape[e]}) != indices.shape[${e}] (${t.shape[e]}).`);for(let t=0;t<n.rank-r;++t)if(n.shape[t+r]!==e[t+a])throw new Error(o+` updates.shape[${t+r}] (${n.shape[t+r]}) != shape[${t+r}] (${e[t+r]})`)}function fA(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==t.dtype)throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(0===n.length){if(0===t.size)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(0===e.size)throw new Error(`Updates specified for empty output. updates shape: ${e.shape}`)}hA(n,t,e)}function mA(e,t,n){const a=t.shape.length,r=a>1?t.shape[a-1]:1,o=n.length;let s=1;for(let e=r;e<o;++e)s*=n[e];const i=r<1?1:r;return{sliceRank:r,numUpdates:Ux(t.shape)/i,sliceSize:s,strides:[...ck(n.slice(0,r)),1],outputSize:Ux(n)}}const gA=1.7580993408473768,vA=1.0507009873554805,bA=.3275911,yA=.254829592,wA=-.284496736,xA=1.421413741,kA=-1.453152027,CA=1.061405429;function EA(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);const n=new Float32Array(2*e.length);for(let a=0;a<n.length;a+=2)n[a]=e[a/2],n[a+1]=t[a/2];return n}function SA(e){const t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let a=0;a<e.length;a+=2)t[a/2]=e[a],n[a/2]=e[a+1];return{real:t,imag:n}}function $A(e){const t=Math.ceil(e.length/4),n=new Float32Array(t),a=new Float32Array(t);for(let t=0;t<e.length;t+=4)n[Math.floor(t/4)]=e[t],a[Math.floor(t/4)]=e[t+1];return{real:n,imag:a}}function TA(e){const t=Math.floor(e.length/4),n=new Float32Array(t),a=new Float32Array(t);for(let t=2;t<e.length;t+=4)n[Math.floor(t/4)]=e[t],a[Math.floor(t/4)]=e[t+1];return{real:n,imag:a}}function IA(e,t){return{real:e[2*t],imag:e[2*t+1]}}function NA(e,t,n,a){e[2*a]=t,e[2*a+1]=n}function OA(e,t){const n=new Float32Array(e/2),a=new Float32Array(e/2);for(let r=0;r<Math.ceil(e/2);r++){const o=(t?2:-2)*Math.PI*(r/e);n[r]=Math.cos(o),a[r]=Math.sin(o)}return{real:n,imag:a}}function RA(e,t,n){const a=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(a),imag:Math.sin(a)}}const AA="->",MA=/->/g;function BA(e,t){const n=((e=e.replace(/\s/g,"")).length-e.replace(MA,"").length)/AA.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("->").');const[a,r]=e.split(AA);Vx(-1===a.indexOf("..."),(()=>'The ellipsis notation ("...") is not supported yet.'));const o=a.split(","),s=o.length;if(t!==s)throw new Error(`Expected ${s} input tensors, received ${t}`);if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const i=[];for(let e=0;e<r.length;++e){const t=r[e];if(!o.some((e=>-1!==e.indexOf(t))))throw new Error(`Output subscripts contain the label ${t} not present in the input subscripts.`);-1===i.indexOf(t)&&i.push(t)}for(let e=0;e<a.length;++e){const t=a[e];-1===i.indexOf(t)&&","!==t&&i.push(t)}const l=new Array(o.length);for(let e=0;e<s;++e){if(new Set(o[e].split("")).size!==o[e].length)throw new Error(`Found duplicate axes in input component ${o[e]}. Support for duplicate axes in input is not implemented yet.`);l[e]=[];for(let t=0;t<o[e].length;++t)l[e].push(i.indexOf(o[e][t]))}const u=i.length,c=[];for(let e=r.length;e<u;++e)c.push(e);return{allDims:i,summedDims:c,idDims:l}}function PA(e,t){let n=new Array(e);n.fill(-1);for(let e=0;e<t.length;++e)n[t[e]]=e;const a=[];for(let t=0;t<e;++t)-1===n[t]&&a.push(t);return n=n.filter((e=>-1!==e)),{permutationIndices:n,expandDims:a}}function DA(e,t,n){const a=new Array(e);for(let e=0;e<n.length;++e){const r=n[e].shape;for(let n=0;n<t[e].length;++n)void 0===a[t[e][n]]?a[t[e][n]]=r[n]:Vx(a[t[e][n]]===r[n],(()=>`Expected dimension ${a[t[e][n]]} at axis ${n} of input shaped ${JSON.stringify(r)}, but got dimension ${r[n]}`))}}function FA(e,t){const n=e,a=[];let r=0;0===e.length&&n.push(-1),r=e.length+1;for(let e=0;e<r;++e)a.push([]);const o=[];for(let e=0;e<n.length;++e){const r=LA(t,n[e]);for(const t of r)-1===o.indexOf(t)&&(a[e].push(t),o.push(t))}return{path:n,steps:a}}function _A(e){return e.every(((e,t)=>e===t))}function LA(e,t){const n=[];for(let a=0;a<e.length;++a)0!==e[a].length&&-1===e[a].indexOf(t)&&-1!==t||n.push(a);return n}function zA(e,t,n=0){let a=[];if("number"==typeof t)Vx(e.shape[n]%t==0,(()=>"Number of splits must evenly divide the axis.")),a=new Array(t).fill(e.shape[n]/t);else{const r=t.reduce(((e,t)=>(-1===t&&(e+=1),e)),0);Vx(r<=1,(()=>"There should be only one negative value in split array."));const o=t.indexOf(-1);if(-1!==o){const a=t.reduce(((e,t)=>t>0?e+t:e));t[o]=e.shape[n]-a}Vx(e.shape[n]===t.reduce(((e,t)=>e+t)),(()=>"The sum of sizes must match the size of the axis dimension.")),a=t}return a}function VA(e){return`Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ${e}`}function WA(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function HA(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}function jA(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function UA(e,t){return`size ${e} must be non-negative, not ${t}`}function GA(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function qA(e,t){return`Input to reshape is a SparseTensor with ${Ux(e)}\n  dense values, but the requested shape requires a multiple of ${Ux(t)}. inputShape=${e} outputShape= ${t}`}function XA(e,t){return`Input to reshape is a tensor with ${Ux(e)} dense values, but the requested shape has ${Ux(t)}. inputShape=${e} outputShape=${t}`}function YA(){return"segment ids must be >= 0"}function KA(){return"segment ids are not increasing"}function JA(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function ZA(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}function QA(e,t){let n,a=!1;for(e<=rA?(n=e,a=!0):n=uk(e,Math.floor(Math.sqrt(e)));!a;)n>t||n===e?a=!0:n=uk(e,n+1);return n}function eM(e,t,n){const a=[],r=e.length;for(let o=0;o<r;o++)o!==t?a.push(e[o]):a.push(n);return a}function tM(e,t,n,a){const r=t.shape.length,o=e.shape.length;if(0!==a&&(a<-r||a>r))throw new Error(`Expect batchDims in the range of [-${r}, ${r}], but got ${a}`);if(a<0&&(a+=r),a>o)throw new Error(`batchDims (${a}) must be less than rank(x) (\n    ${o}).`);if(n<a)throw new Error(`batchDims (${a}) must be less than or equal to axis (${n}).`);for(let n=0;n<a;++n)if(e.shape[n]!==t.shape[n])throw new Error(`x.shape[${n}]: ${e.shape[n]} should be equal to indices.shape[${n}]: ${t.shape[n]}.`);const s=e.shape[n],i=[];let l=1,u=1,c=1;for(let t=0;t<a;++t)i.push(e.shape[t]),l*=e.shape[t];for(let t=a;t<n;t++)i.push(e.shape[t]),u*=e.shape[t];for(let e=a;e<r;e++)i.push(t.shape[e]);for(let t=n+1;t<o;t++)i.push(e.shape[t]),c*=e.shape[t];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:s,outputShape:i}}function nM(e){try{return e.map((e=>r$(e)))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function aM(e){return e.map((e=>a$(e)))}function rM(e,t){const n=[];for(let e=0;e<t.length;e++)t[e]&&n.push(e);const a=DT(e,"int32"),r=DT([n.length,e.length],"int32");for(let t=0;t<n.length;t++){const o=a.indexToLoc(n[t]),s=t*e.length;r.values.set(o,s)}return r.toTensor()}const oM={kernelName:Ik,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>RN(e,jO(FT(n,"float32"),-1))}}},sM={kernelName:Nk,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=KN(FT(n,"float32")),a=EO(AN($I(1),t));return ZN(mN(e,a))}}}},iM={kernelName:Ok,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=EO(AN(KN(FT(n,"float32")),1));return mN(e,t)}}}},lM={kernelName:Rk,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t,r=YT(n.shape,a.shape);return{a:()=>{let t=e;const a=XT(n.shape,r);return a.length>0&&(t=MN(t,a)),qI(t,n.shape)},b:()=>{let t=e;const n=XT(a.shape,r);return n.length>0&&(t=MN(t,n)),qI(t,a.shape)}}}},uM={kernelName:Ak,saveAllInputs:!0,gradFunc:(e,t)=>{const n={};return t.forEach(((t,a)=>{n[a]=()=>e.clone()})),n}},cM={kernelName:Pk,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>MO(n)}}},pM={kernelName:Dk,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>MO(n)}}},dM={kernelName:Fk,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>mN(e,EO(AN($I(1),KN(FT(n,"float32")))))}}},hM={kernelName:_k,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=EO(NI($I(1),KN(FT(n,"float32"))));return mN(e,t)}}}},fM={kernelName:Vk,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t,r=YT(n.shape,a.shape);return{a:()=>{const t=NI(KN(n),KN(a));let o=RN(e,mN(a,t));const s=XT(n.shape,r);return s.length>0&&(o=MN(o,s)),qI(o,n.shape)},b:()=>{const t=NI(KN(n),KN(a));let o=ZN(RN(e,mN(n,t)));const s=XT(a.shape,r);return s.length>0&&(o=MN(o,s)),qI(o,a.shape)}}}},mM={kernelName:Lk,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>mN(e,NI(KN(FT(n,"float32")),1))}}},gM={kernelName:zk,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>mN(e,AN($I(1),KN(FT(n,"float32"))))}}};const vM=q$({avgPool3dGrad_:function(e,t,n,a,r,o){const s=U$(e,"dy","avgPool3dGrad"),i=U$(t,"input","avgPool3dGrad");let l=s,u=i,c=!1;4===i.rank&&(c=!0,l=qI(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),u=qI(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]])),Vx(5===l.rank,(()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`)),Vx(5===u.rank,(()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`)),GI("avgPool3dGrad",r,o);const p={dy:l,input:u},d={filterSize:n,strides:a,pad:r,dimRoundingMode:o},h=D$.runKernel(Uk,p,d);return c?qI(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),bM={kernelName:jk,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,{filterSize:r,strides:o,pad:s,dimRoundingMode:i}=n;return{x:()=>vM(e,a,r,o,s,i)}}};const yM=q$({avgPoolGrad_:function(e,t,n,a,r){const o=U$(e,"dy","avgPoolGrad"),s=U$(t,"input","avgPoolGrad");Vx(s.rank===o.rank,(()=>`Rank of input (${s.rank}) does not match rank of dy (${o.rank})`));let i=s,l=o,u=!1;3===s.rank&&(u=!0,i=qI(s,[1,s.shape[0],s.shape[1],s.shape[2]]),l=qI(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Vx(4===l.rank,(()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`)),Vx(4===i.rank,(()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${i.rank}.`));const c={dy:l,input:i},p={filterSize:n,strides:a,pad:r},d=D$.runKernel(Hk,c,p);return u?qI(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),wM={kernelName:Wk,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,{filterSize:r,strides:o,pad:s}=n;return{x:()=>yM(e,a,r,o,s)}}},xM={kernelName:Gk,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{const[a,r]=t,{transposeA:o,transposeB:s}=n;return o||s?!o&&s?{a:()=>DN(e,r,!1,!1),b:()=>DN(e,a,!0,!1)}:o&&!s?{a:()=>DN(r,e,!1,!0),b:()=>DN(a,e,!1,!1)}:{a:()=>DN(r,e,!0,!0),b:()=>DN(e,a,!0,!0)}:{a:()=>DN(e,r,!1,!0),b:()=>DN(a,e,!0,!1)}}};const kM=q$({spaceToBatchND_:function(e,t,n){const a=U$(e,"x","spaceToBatchND");Vx(a.rank>=1+t.length,(()=>`input rank ${a.rank} should be > than [blockShape] ${t.length}`)),Vx(n.length===t.length,(()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`)),Vx(a.shape.reduce(((e,a,r)=>r>0&&r<=t.length?e&&(a+n[r-1][0]+n[r-1][1])%t[r-1]==0:e),!0),(()=>`input spatial dimensions ${a.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`));const r={x:a},o={blockShape:t,paddings:n};return D$.runKernel(QE,r,o)}}),CM={kernelName:qk,gradFunc:(e,t,n)=>{const{blockShape:a,crops:r}=n;return{x:()=>kM(e,a,r)}}},EM={kernelName:"BroadcastTo",gradFunc:(e,t,n)=>{const a=n,r=a.inputShape,o=a.shape,s=Array.from(o);for(let e=r.length-1;e>=0;e--)if(r[e]===o[e])s[e]=1;else if(1!==r[e])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${o}].`);const i=[];for(let e=0;e<s.length;e++)s[e]>1&&i.push(e);return{x:()=>MN(e,i,!0)}}},SM={kernelName:Kk,gradFunc:e=>({x:()=>e.clone()})},$M={kernelName:Jk,gradFunc:e=>({x:()=>MO(e)})},TM={kernelName:Zk,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,{clipValueMin:r,clipValueMax:o}=n;return{x:()=>AO(PN($N(a,r),$R(a,o)),e,MO(e))}}},IM={kernelName:eC,inputsToSave:["x"],gradFunc:oM.gradFunc},NM={kernelName:tC,saveAllInputs:!0,gradFunc:(e,t,n)=>{const a=t.map((e=>e.shape)),{axis:r}=n,o=Zx(r,t[0].shape)[0],s=a.map((e=>e[o]));return CO(e,s,o).map((e=>()=>e))}},OM={kernelName:nC,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[a,r]=t,{dilations:o,strides:s,pad:i,dataFormat:l}=n;return Vx(HI(o),(()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`)),{x:()=>lN(a.shape,e,r,s,i,l),filter:()=>WO(a,e,r.shape,s,i,l)}}},RM={kernelName:rC,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{const[a,r]=t,{strides:o,pad:s,dataFormat:i,dimRoundingMode:l}=n;return{dy:()=>sN(e,r,o,s,i,1,l),filter:()=>WO(e,a,r.shape,o,s,i,l)}}};const AM=q$({conv3DBackpropFilter_:function(e,t,n,a,r){let o=e;4===e.rank&&(o=qI(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let s=t;4===s.rank&&(s=qI(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),Vx(5===o.rank,(()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${o.shape}.`)),Vx(5===s.rank,(()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${s.shape}.`)),Vx(5===n.length,(()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`)),Vx(o.shape[4]===n[3],(()=>`Error in conv3dDerFilter: depth of input ${o.shape[4]}) must match input depth in filter (${n[3]}.`)),Vx(s.shape[4]===n[4],(()=>`Error in conv3dDerFilter: depth of dy (${s.shape[4]}) must match output depth for filter (${n[4]}).`));const i={x:o,dy:s},l={strides:a,pad:r,filterShape:n};return D$.runKernel(sC,i,l)}}),MM={kernelName:oC,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:a,strides:r,pad:o}=n;Vx(HI(a),(()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${a}'`));const[s,i]=t;return{x:()=>pN(s.shape,e,i,r,o),filter:()=>AM(s,e,i.shape,r,o)}}};const BM=q$({sin_:function(e){const t={x:U$(e,"x","sin","float32")};return D$.runKernel(GE,t)}}),PM={kernelName:lC,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>RN(ZN(BM(FT(n,"float32"))),e)}}};const DM=q$({sinh_:function(e){const t={x:U$(e,"x","sinh")};return D$.runKernel(qE,t)}}),FM={kernelName:uC,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>RN(DM(FT(n,"float32")),e)}}};const _M=q$({cumsum_:function(e,t=0,n=!1,a=!1){const r={x:U$(e,"x","cumsum")},o={axis:t,exclusive:n,reverse:a};return D$.runKernel(cC,r,o)}}),LM={kernelName:cC,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,{axis:r,exclusive:o,reverse:s}=n;return{x:()=>{const t=qN([r],a.rank);let n=_M(e,r,o,!s);return null!=t&&(n=BO(n,t)),n}}}},zM={kernelName:fC,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const{dilations:a,strides:r,pad:o,dimRoundingMode:s}=n,i=null==a?[1,1]:a;Vx(HI(i),(()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`));const[l,u]=t;return Vx(4===l.rank,(()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`)),Vx(4===u.rank,(()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`)),Vx(l.shape[3]===u.shape[2],(()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`)),Vx(jI(r,i),(()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${r} and dilations '${i}'.`)),GI("depthwiseConv2d",o,s),{x:()=>JO(l.shape,e,u,r,o,i,s),filter:()=>KO(l,e,u.shape,r,o,i,s)}}},VM={kernelName:bC,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{const[a,r]=t,o={x:a,filter:r,dy:e},s={x:a,filter:r,dy:e};return{x:()=>D$.runKernel(yC,o,n),filter:()=>D$.runKernel(wC,s,n)}}},WM={kernelName:CC,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t,a={dy:e,y:n};return{x:()=>D$.runKernel(EC,a)}}},HM={kernelName:SC,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,a=RN(bN(ZN(KN(n))),2/Math.sqrt(Math.PI));return{x:()=>RN(e,a)}}},jM={kernelName:TC,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>RN(e,n)}}},UM={kernelName:IC,inputsToSave:["input"],gradFunc:(e,t)=>{const[n]=t;return{input:()=>qI(e,n.shape)}}},GM={kernelName:NC,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>RN(e,bN(n))}}},qM={kernelName:MC,gradFunc:e=>({x:()=>MO(e)})},XM={kernelName:BC,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t,r=YT(n.shape,a.shape);return{a:()=>{const t=mN(e,FT(a,"float32")),o=XT(n.shape,r);return o.length>0?qI(MN(t,o),n.shape):t},b:()=>{let t=RN(e,FT(n,"float32"));const o=XT(a.shape,r);o.length>0&&(t=qI(MN(t,o),a.shape));const s=KN(a);return ZN(mN(t,FT(s,"float32")))}}}};const YM=q$({rsqrt_:function(e){const t={x:U$(e,"x","rsqrt","float32")};return D$.runKernel(VE,t)}}),KM={kernelName:PC,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{const{varianceEpsilon:a}=n,[r,o,s,i]=t,l=null==i?$I(1):i,u=XT(o.shape,r.shape),c=[];if(1===o.rank){for(let e=0;e<r.shape.length-1;++e)c.push(r.shape[e]);c.push(1)}const p=AN(r,o),d=RN(e,l),h=YM(NI(s,$I(a))),f=RN(RN(RN(h,h),h),$I(-.5));return{x:()=>1===o.rank?qI(RN(RN(e,wN(qI(h,[1,1,1,o.shape[0]]),c)),l),r.shape):qI(RN(RN(e,h),l),r.shape),mean:()=>{let e=RN(RN(h,$I(-1)),d);return 1===o.rank&&(e=MN(e,u)),qI(e,o.shape)},variance:()=>{let e=RN(RN(f,p),d);return 1===o.rank&&(e=MN(e,u)),qI(e,o.shape)},scale:()=>{const t=RN(p,h);let n=RN(e,t);return 1===o.rank&&(n=MN(n,u)),qI(n,o.shape)},offset:()=>{let t=e;return 1===o.rank&&(t=MN(t,u)),qI(t,o.shape)}}}};const JM=q$({unsortedSegmentSum_:function(e,t,n){const a=U$(e,"x","unsortedSegmentSum"),r=U$(t,"segmentIds","unsortedSegmentSum","int32");Vx(qx(n),(()=>"numSegments must be of dtype int"));const o={x:a,segmentIds:r},s={numSegments:n};return D$.runKernel(kS,o,s)}}),ZM={kernelName:DC,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{const[a,r]=t,{axis:o}=n,s=Zx(o,a.shape)[0];return{x:()=>{const t=a.shape,n=r.size,i=t.slice(0,s),l=i.length,u=t.slice(o,t.length).slice(1),c=u.length,p=QM(0,l),d=QM(l+1,l+1+c),h=eB([i,[n],u]),f=qI(e,h),m=qI(r,[n]),g=eB([[l],p,d]),v=BO(f,g);let b=JM(v,m,a.shape[s]);const y=XN(g);return b=BO(b,y),b},indices:()=>r}}};function QM(e,t){const n=[];for(let a=e;a<t;++a)n.push(a);return n}function eB(e){const t=[];for(let n=0;n<e.length;++n)for(let a=0;a<e[n].length;++a)t.push(e[n][a]);return t}const tB={kernelName:LC,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t;return{a:()=>MO(n),b:()=>MO(a)}}},nB={kernelName:zC,gradFunc:e=>({x:()=>FT(e,"float32")})},aB={kernelName:HC,gradFunc:e=>({x:()=>MO(e)})},rB={kernelName:jC,gradFunc:e=>({x:()=>MO(e)})},oB={kernelName:UC,gradFunc:e=>({x:()=>MO(e)})},sB={kernelName:GC,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,{alpha:r}=n,o=SN(a,0);return{x:()=>AO(o,e,RN(e,r))}}},iB={kernelName:JC,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>mN(e,NI(n,1))}}},lB={kernelName:KC,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>mN(e,FT(n,"float32"))}}},uB={kernelName:"LogSoftmax",inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[a]=t,{axis:r}=n;return{logits:()=>{const t=bN(a);return AN(e,RN(MN(e,r,!0),t))}}}};const cB=q$({localResponseNormalizationBackprop_:function(e,t,n,a=5,r=1,o=1,s=.5){const i={x:e,y:t,dy:n},l={depthRadius:a,bias:r,alpha:o,beta:s};return D$.runKernel(nE,i,l)}}),pB={kernelName:tE,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[a,r]=t,{depthRadius:o,bias:s,alpha:i,beta:l}=n;return{x:()=>cB(a,r,e,o,s,i,l)}}};function dB(e,t,n,a){return t.rank<n.rank&&(t=qI(t,UN(t.shape,a))),e.rank<n.rank&&(e=qI(e,UN(e.shape,a))),{x:()=>RN(e,FT(vN(n,t),e.dtype))}}const hB={kernelName:aE,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const a=n,{reductionIndices:r}=a,o=t[0],s=dB(e,t[1],o,Zx(r,o.shape));return{x:()=>s.x()}}};const fB=q$({less_:function(e,t){let n=U$(e,"a","less","string_or_numeric"),a=U$(t,"b","less","string_or_numeric");[n,a]=I$(n,a),YT(n.shape,a.shape);const r={a:n,b:a};return D$.runKernel(qC,r)}}),mB={kernelName:rE,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t;return{a:()=>RN(e,FT($N(n,a),"float32")),b:()=>RN(e,FT(fB(n,a),"float32"))}}};const gB=q$({maxPool3dGrad_:function(e,t,n,a,r,o,s){const i=U$(e,"dy","maxPool3dGrad"),l=U$(t,"input","maxPool3dGrad"),u=U$(n,"output","maxPool3dGrad");let c=i,p=l,d=u,h=!1;4===l.rank&&(h=!0,c=qI(i,[1,i.shape[0],i.shape[1],i.shape[2],i.shape[3]]),p=qI(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=qI(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),Vx(5===c.rank,(()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`)),Vx(5===p.rank,(()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${p.rank}.`)),Vx(5===d.rank,(()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${d.rank}.`)),GI("maxPool3dGrad",o,s);const f={dy:c,input:p,output:d},m={filterSize:a,strides:r,pad:o,dimRoundingMode:s},g=D$.runKernel(lE,f,m);return h?qI(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),vB={kernelName:iE,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[a,r]=t,{filterSize:o,strides:s,pad:i,dimRoundingMode:l}=n;return{x:()=>gB(e,a,r,o,s,i,l)}}};const bB=q$({maxPoolGrad_:function(e,t,n,a,r,o,s){const i=U$(e,"dy","maxPoolGrad"),l=U$(t,"input","maxPoolGrad"),u=U$(n,"output","maxPoolGrad");Vx(l.rank===i.rank,(()=>`Rank of input (${l.rank}) does not match rank of dy (${i.rank})`)),Vx(4===i.rank,(()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${i.rank}.`)),Vx(4===l.rank,(()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`)),GI("maxPoolGrad",o,s);const c={dy:i,input:l,output:u},p={filterSize:a,strides:r,pad:o,dimRoundingMode:s};return D$.runKernel(sE,c,p)}}),yB={kernelName:oE,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const[a,r]=t,{filterSize:o,strides:s,pad:i}=n;return{x:()=>bB(e,a,r,o,s,i)}}},wB={kernelName:cE,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,{axis:r}=n,o=Zx(r,a.shape),s=Ux(jN(a.shape,o)[1]);return{x:()=>{const t=a.shape.slice();o.forEach((e=>{t[e]=1}));const n=qI(e,t);return mN(RN(n,nO(a.shape,"float32")),s)}}}},xB={kernelName:pE,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{const a=n,{axis:r}=a,[o,s]=t,i=dB(e,s,o,Zx(r,o.shape));return{x:()=>i.x()}}},kB={kernelName:dE,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t;return{a:()=>RN(e,FT($R(n,a),"float32")),b:()=>RN(e,FT(SN(n,a),"float32"))}}},CB={kernelName:hE,inputsToSave:["x"],gradFunc:(e,t,n)=>{const a=t[0],{paddings:r}=n,o=r.map((e=>e[0]));return{x:()=>gO(e,o,a.shape)}}},EB={kernelName:fE,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t,r=YT(n.shape,a.shape);return{a:()=>{const t=XT(n.shape,r);return t.length>0?qI(MN(e,t),n.shape):e},b:()=>{const t=RN(e,ZN(CN(mN(n,a)))),o=XT(a.shape,r);return o.length>0?qI(MN(t,o),a.shape):t}}}},SB={kernelName:gE,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t,r=YT(n.shape,a.shape);return{a:()=>{const t=RN(e,FT(a,"float32")),o=XT(n.shape,r);return o.length>0?qI(MN(t,o),n.shape):t},b:()=>{const t=RN(e,FT(n,"float32")),o=XT(a.shape,r);return o.length>0?qI(MN(t,o),a.shape):t}}}},$B={kernelName:vE,gradFunc:e=>({x:()=>ZN(e)})},TB={kernelName:CE,inputsToSave:["indices"],gradFunc:(e,t)=>{const n=t[0];return{indices:()=>tO(n.shape,"float32")}}},IB={kernelName:kE,gradFunc:e=>({x:()=>MO(e)})},NB={kernelName:EE,saveAllInputs:!0,gradFunc:(e,t,n)=>{const{axis:a}=n;return OO(e,a).map((e=>()=>e))}},OB={kernelName:SE,inputsToSave:["x"],gradFunc:(e,t,n)=>{const a=t[0],{paddings:r}=n,o=r.map((e=>e[0]));return{x:()=>gO(e,o,a.shape)}}},RB={kernelName:$E,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{const[n,a,r]=t,o=n,s=a,i=YT(o.shape,s.shape);return{a:()=>{const t=FT(s,"float32");let n=RN(e,RN(t,MR(o,AN(t,$I(1)))));const a=XT(o.shape,i);return a.length>0&&(n=MN(n,a)),qI(n,o.shape)},b:()=>{const t=SN(o,0),n=AO(t,IN(o),MO(o));let a=RN(e,RN(r,n));const l=XT(s.shape,i);return l.length>0&&(a=MN(a,l)),qI(a,s.shape)}}}},AB={kernelName:TE,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{const[n,a]=t,r=SN(n,0);return{x:()=>AO(r,e,RN(e,a)),alpha:()=>{let t=AO(r,MO(e),RN(e,n));const o=XT(a.shape,e.shape);return o.length>0&&(t=MN(t,o)),qI(t,a.shape)}}}},MB={kernelName:xC,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t,r=YT(n.shape,a.shape);return{a:()=>{const t=mN(e,FT(a,"float32")),o=XT(n.shape,r);return o.length>0?qI(MN(t,o),n.shape):t},b:()=>{let t=RN(e,FT(n,"float32"));const o=XT(a.shape,r);o.length>0&&(t=qI(MN(t,o),a.shape));const s=KN(a);return ZN(mN(t,FT(s,"float32")))}}}},BB={kernelName:RE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>mN(e,ZN(KN(n)))}}},PB={kernelName:_E,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t,a=RN($R(n,6),jO(n));return{x:()=>RN(e,FT(a,"float32"))}}},DB={kernelName:AE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>RN(e,FT(jO(n),"float32"))}}},FB={kernelName:ME,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>qI(e,n.shape)}}},_B={kernelName:DE,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[a]=t,r={dy:e,images:a};return{images:()=>D$.runKernel(FE,r,n)}}},LB={kernelName:BE,inputsToSave:["images"],gradFunc:(e,t,n)=>{const[a]=t,r={dy:e,images:a};return{images:()=>D$.runKernel(PE,r,n)}}},zB={kernelName:LE,gradFunc:(e,t,n)=>{const{dims:a}=n,r=Zx(a,e.shape);return{x:()=>dO(e,r)}}},VB={kernelName:zE,gradFunc:e=>({x:()=>MO(e)})},WB={kernelName:VE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>ZN(mN(e,RN(MR(n,1.5),2)))}}};const HB=q$({logicalNot_:function(e){const t={x:U$(e,"x","logicalNot","bool")};return D$.runKernel(QC,t)}}),jB={kernelName:HE,inputsToSave:["condition"],gradFunc:(e,t)=>{const[n]=t;return{condition:()=>FT(MO(n),"float32"),t:()=>RN(e,FT(n,e.dtype)),e:()=>RN(e,FT(HB(n),e.dtype))}}},UB={kernelName:jE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>{const t=SN(n,$I(0)),a=$I(gA),r=$I(vA),o=RN(e,r),s=RN(RN(e,a),bN(FT(n,"float32")));return AO(t,o,s)}}}},GB={kernelName:YE,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>RN(e,RN(n,AN($I(1),n)))}}},qB={kernelName:XE,gradFunc:e=>({x:()=>MO(e)})};const XB=q$({cos_:function(e){const t={x:U$(e,"x","cos","float32")};return D$.runKernel(lC,t)}}),YB={kernelName:GE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>RN(XB(FT(n,"float32")),e)}}};const KB=q$({cosh_:function(e){const t={x:U$(e,"x","cosh","float32")};return D$.runKernel(uC,t)}}),JB={kernelName:qE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>RN(KB(FT(n,"float32")),e)}}},ZB={kernelName:UE,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,{begin:r,size:o}=n,s=a.shape,[i,l]=hI(a,r,o),u=[];for(let t=0;t<e.rank;t++)u.push([i[t],s[t]-i[t]-l[t]]);return{x:()=>rO(e,u)}}},QB={kernelName:tS,outputsToSave:[!0],gradFunc:(e,t,n)=>{const[a]=t,{dim:r}=n,o=RN(e,a);return{logits:()=>AN(o,RN(MN(o,[r],true),a))}}},eP={kernelName:KE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>RN(e,mO(n))}}};const tP=q$({batchToSpaceND_:function(e,t,n){const a=U$(e,"x","batchToSpaceND"),r=t.reduce(((e,t)=>e*t));Vx(a.rank>=1+t.length,(()=>`input rank is ${a.rank} but should be > than blockShape.length ${t.length}`)),Vx(n.length===t.length,(()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`)),Vx(a.shape[0]%r==0,(()=>`input tensor batch is ${a.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${r}`));const o={x:a},s={blockShape:t,crops:n};return D$.runKernel(qk,o,s)}}),nP={kernelName:QE,gradFunc:(e,t,n)=>{const{blockShape:a,paddings:r}=n;return{x:()=>tP(e,a,r)}}},aP={kernelName:eS,gradFunc:(e,t,n)=>{const{axis:a}=n;return{x:()=>tN(e,a)}}},rP={kernelName:gS,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,{reps:r}=n;return{x:()=>{let t=MO(a);if(1===a.rank)for(let n=0;n<r[0];++n)t=NI(t,gO(e,[n*a.shape[0]],[a.shape[0]]));else if(2===a.rank)for(let n=0;n<r[0];++n)for(let o=0;o<r[1];++o)t=NI(t,gO(e,[n*a.shape[0],o*a.shape[1]],[a.shape[0],a.shape[1]]));else if(3===a.rank)for(let n=0;n<r[0];++n)for(let o=0;o<r[1];++o)for(let s=0;s<r[2];++s)t=NI(t,gO(e,[n*a.shape[0],o*a.shape[1],s*a.shape[2]],[a.shape[0],a.shape[1],a.shape[2]]));else{if(4!==a.rank)throw new Error(`Gradient for tile operation is not implemented for rank-${a.rank} tensors yet.`);for(let n=0;n<r[0];++n)for(let o=0;o<r[1];++o)for(let s=0;s<r[2];++s)for(let i=0;i<r[3];++i)t=NI(t,gO(e,[n*a.shape[0],o*a.shape[1],s*a.shape[2],i*a.shape[3]],[a.shape[0],a.shape[1],a.shape[2],a.shape[3]]))}return t}}}},oP={kernelName:kS,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>function(e,t){const n=LN(t,MO(t)),a=EN(e,n);let r=$N(t,$I(0,"int32"));const o=a.rank-r.rank;for(let e=0;e<o;++e)r=yN(r,e+1);r=PN(r,nO(a.shape,"bool"));const s=MO(a);return AO(r,a,s)}(e,n)}}};const sP=[oM,sM,iM,lM,uM,cM,pM,dM,hM,fM,mM,gM,bM,wM,xM,CM,EM,SM,$M,TM,IM,NM,RM,OM,MM,PM,FM,LM,zM,VM,MB,WM,HM,jM,UM,GM,XM,qM,KM,ZM,tB,nB,aB,rB,oB,sB,iB,lB,uB,pB,hB,hB,mB,vB,yB,wB,xB,kB,CB,EB,SB,$B,TB,IB,NB,OB,OB,RB,AB,BB,PB,DB,FB,_B,LB,zB,VB,WB,jB,UB,GB,qB,YB,JB,ZB,QB,eP,nP,nP,aP,aP,{kernelName:JE,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>mN(e,RN(EO(FT(n,"float32")),2))}}},{kernelName:iS,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t,r=$I(2);return{a:()=>RN(e,RN(r,AN(n,a))),b:()=>RN(e,RN(r,AN(a,n)))}}},{kernelName:lS,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>RN(e,RN(FT(n,"float32"),2))}}},{kernelName:ES,gradFunc:e=>({x:()=>MO(e)})},{kernelName:hS,inputsToSave:["a","b"],gradFunc:(e,t)=>{const[n,a]=t,r=YT(n.shape,a.shape);return{a:()=>{let t=e;const a=XT(n.shape,r);return a.length>0&&(t=MN(t,a)),qI(t,n.shape)},b:()=>{let t=e;const n=XT(a.shape,r);return n.length>0&&(t=MN(t,n)),qI(ZN(t),a.shape)}}}},{kernelName:ZE,inputsToSave:["x"],gradFunc:(e,t,n)=>{const[a]=t,r=a.shape.slice(),{axis:o}=n;Zx(o,a.shape).forEach((e=>{r[e]=1}));const s=qI(e,r),i=RN(s,nO(a.shape,"float32"));return{x:()=>i}}},{kernelName:fS,inputsToSave:["x"],gradFunc:(e,t)=>{const[n]=t;return{x:()=>mN(e,KN(XB(n)))}}},{kernelName:mS,outputsToSave:[!0],gradFunc:(e,t)=>{const[n]=t;return{x:()=>RN(AN($I(1),KN(n)),e)}}},rP,{kernelName:yS,gradFunc:(e,t,n)=>{const a=n,{perm:r}=a,o=XN(r);return{x:()=>BO(e,o)}}},{kernelName:xS,gradFunc:(e,t,n)=>{const a=n,{axis:r}=a;return{value:()=>$O(e,r)}}},oP,{kernelName:CS,gradFunc:e=>({x:()=>MO(e)})}];for(const e of sP)_S(e);b$().prototype.abs=function(){return this.throwIfDisposed(),II(this)};const iP=q$({acos_:function(e){const t={x:U$(e,"x","acos")};return D$.runKernel(Nk,t)}});b$().prototype.acos=function(){return this.throwIfDisposed(),iP(this)};const lP=q$({acosh_:function(e){const t={x:U$(e,"x","acosh")};return D$.runKernel(Ok,t)}});b$().prototype.acosh=function(){return this.throwIfDisposed(),lP(this)},b$().prototype.add=function(e){return this.throwIfDisposed(),NI(this,e)},b$().prototype.all=function(e,t){return this.throwIfDisposed(),OI(this,e,t)},b$().prototype.any=function(e,t){return this.throwIfDisposed(),RI(this,e,t)},b$().prototype.argMax=function(e){return this.throwIfDisposed(),AI(this,e)};const uP=q$({argMin_:function(e,t=0){const n={x:U$(e,"x","argMin")},a={axis:t};return D$.runKernel(Dk,n,a)}});b$().prototype.argMin=function(e){return this.throwIfDisposed(),uP(this,e)},b$().prototype.asScalar=function(){return this.throwIfDisposed(),Vx(1===this.size,(()=>"The array must have only 1 element.")),qI(this,[])},b$().prototype.asType=function(e){return this.throwIfDisposed(),FT(this,e)},b$().prototype.as1D=function(){return this.throwIfDisposed(),qI(this,[this.size])},b$().prototype.as2D=function(e,t){return this.throwIfDisposed(),qI(this,[e,t])},b$().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),qI(this,[e,t,n])},b$().prototype.as4D=function(e,t,n,a){return this.throwIfDisposed(),qI(this,[e,t,n,a])},b$().prototype.as5D=function(e,t,n,a,r){return this.throwIfDisposed(),qI(this,[e,t,n,a,r])};const cP=q$({asin_:function(e){const t={x:U$(e,"x","asin")};return D$.runKernel(Fk,t)}});b$().prototype.asin=function(){return this.throwIfDisposed(),cP(this)};const pP=q$({asinh_:function(e){const t={x:U$(e,"x","asinh")};return D$.runKernel(_k,t)}});b$().prototype.asinh=function(){return this.throwIfDisposed(),pP(this)};const dP=q$({atan_:function(e){const t={x:U$(e,"x","atan")};return D$.runKernel(Lk,t)}});b$().prototype.atan=function(){return this.throwIfDisposed(),dP(this)};const hP=q$({atan2_:function(e,t){let n=U$(e,"a","atan2"),a=U$(t,"b","atan2");[n,a]=I$(n,a);const r={a:n,b:a};return D$.runKernel(Vk,r)}});b$().prototype.atan2=function(e){return this.throwIfDisposed(),hP(this,e)};const fP=q$({atanh_:function(e){const t={x:U$(e,"x","atanh")};return D$.runKernel(zk,t)}});b$().prototype.atanh=function(){return this.throwIfDisposed(),fP(this)},b$().prototype.avgPool=function(e,t,n,a){return this.throwIfDisposed(),XI(this,e,t,n,a)},b$().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),tP(this,e,t)},b$().prototype.batchNorm=function(e,t,n,a,r){return this.throwIfDisposed(),KI(this,e,t,n,a,r)},b$().prototype.broadcastTo=function(e){return this.throwIfDisposed(),RO(this,e)},b$().prototype.cast=function(e){return this.throwIfDisposed(),FT(this,e)};const mP=q$({ceil_:function(e){const t={x:U$(e,"x","ceil","float32")};return D$.runKernel(Jk,t)}});b$().prototype.ceil=function(){return this.throwIfDisposed(),mP(this)},b$().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),eN(this,e,t)},b$().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof v$&&(e=[e]),tN([this,...e],t)},b$().prototype.conv1d=function(e,t,n,a,r,o){return this.throwIfDisposed(),iN(this,e,t,n,a,r,o)},b$().prototype.conv2dTranspose=function(e,t,n,a,r){return this.throwIfDisposed(),uN(this,e,t,n,a,r)},b$().prototype.conv2d=function(e,t,n,a,r,o){return this.throwIfDisposed(),sN(this,e,t,n,a,r,o)},b$().prototype.cos=function(){return this.throwIfDisposed(),XB(this)},b$().prototype.cosh=function(){return this.throwIfDisposed(),KB(this)},b$().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),_M(this,e,t,n)};const gP=q$({depthToSpace_:function(e,t,n="NHWC"){const a=U$(e,"x","depthToSpace","float32"),r="NHWC"===n?a.shape[1]:a.shape[2],o="NHWC"===n?a.shape[2]:a.shape[3],s="NHWC"===n?a.shape[3]:a.shape[1];Vx(t>1,(()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`)),Vx(r*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\n    ${r} and ${t}  for depthToSpace with input shape\n    ${a.shape}`)),Vx(o*t>=0,(()=>`Negative dimension size caused by overflow when multiplying\n    ${o} and ${t} for depthToSpace with input shape\n        ${a.shape}`)),Vx(s%(t*t)==0,(()=>`Dimension size must be evenly divisible by ${t*t} but is ${s} for depthToSpace with input shape ${a.shape}`));const i={x:a},l={blockSize:t,dataFormat:n};return D$.runKernel(hC,i,l)}});b$().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),gP(this,e,t)},b$().prototype.depthwiseConv2d=function(e,t,n,a,r,o){return this.throwIfDisposed(),hN(this,e,t,n,a,r,o)};const vP=q$({dilation2d_:function(e,t,n,a,r=[1,1],o="NHWC"){const s=U$(e,"x","dilation2d"),i=U$(t,"filter","dilation2d");Vx(3===s.rank||4===s.rank,(()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${s.rank}.`)),Vx(3===i.rank,(()=>`Error in dilation2d: filter must be rank 3, but got rank ${i.rank}.`)),Vx("NHWC"===o,(()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${o}`));let l=s,u=!1;3===s.rank&&(l=qI(s,[1,s.shape[0],s.shape[1],s.shape[2]]),u=!0);const c={x:l,filter:i},p={strides:n,pad:a,dilations:r},d=D$.runKernel(bC,c,p);return u?qI(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});b$().prototype.dilation2d=function(e,t,n,a,r){return this.throwIfDisposed(),vP(this,e,t,n,a,r)};const bP=q$({divNoNan_:function(e,t){let n=U$(e,"a","div"),a=U$(t,"b","div");[n,a]=I$(n,a);const r=mN(n,a),o=MO(r),s=vN(a,o);return AO(s,o,r)}});b$().prototype.divNoNan=function(e){return this.throwIfDisposed(),bP(this,e)},b$().prototype.div=function(e){return this.throwIfDisposed(),mN(this,e)};const yP=q$({dot_:function(e,t){const n=U$(e,"t1","dot"),a=U$(t,"t2","dot");Vx(!(1!==n.rank&&2!==n.rank||1!==a.rank&&2!==a.rank),(()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${a.rank}.`));const r=1===n.rank?n.size:n.shape[1],o=1===a.rank?a.size:a.shape[0];if(Vx(r===o,(()=>`Error in dot: inner dimensions of inputs must match, but got ${r} and ${o}.`)),1===n.rank&&1===a.rank){const e=qI(n,[1,-1]),t=qI(a,[-1,1]),r=DN(e,t);return qI(r,[])}if(1===n.rank&&2===a.rank){const e=qI(n,[1,-1]),t=qI(a,[a.shape[0],a.shape[1]]),r=DN(e,t);return qI(r,[r.size])}if(2===n.rank&&1===a.rank){const e=qI(a,[-1,1]),t=DN(n,e);return qI(t,[t.size])}{const e=qI(a,[a.shape[0],a.shape[1]]);return DN(n,e)}}});b$().prototype.dot=function(e){return this.throwIfDisposed(),yP(this,e)},b$().prototype.elu=function(){return this.throwIfDisposed(),gN(this)},b$().prototype.equal=function(e){return this.throwIfDisposed(),vN(this,e)};const wP=q$({erf_:function(e){let t=U$(e,"x","erf");Vx("int32"===t.dtype||"float32"===t.dtype,(()=>"Input dtype must be `int32` or `float32`.")),"int32"===t.dtype&&(t=FT(t,"float32"));const n={x:t};return D$.runKernel(SC,n)}});b$().prototype.erf=function(){return this.throwIfDisposed(),wP(this)},b$().prototype.exp=function(){return this.throwIfDisposed(),bN(this)},b$().prototype.expandDims=function(e){return this.throwIfDisposed(),yN(this,e)};const xP=q$({expm1_:function(e){const t={x:U$(e,"x","expm1")};return D$.runKernel(NC,t)}});b$().prototype.expm1=function(){return this.throwIfDisposed(),xP(this)},b$().prototype.fft=function(){return this.throwIfDisposed(),_O(this)},b$().prototype.flatten=function(){return this.throwIfDisposed(),qI(this,[this.size])},b$().prototype.floor=function(){return this.throwIfDisposed(),CN(this)},b$().prototype.floorDiv=function(e){return this.throwIfDisposed(),fN(this,e)},b$().prototype.gather=function(e,t){return this.throwIfDisposed(),EN(this,e,t)},b$().prototype.greaterEqual=function(e){return this.throwIfDisposed(),$N(this,e)},b$().prototype.greater=function(e){return this.throwIfDisposed(),SN(this,e)},b$().prototype.ifft=function(){return this.throwIfDisposed(),zO(this)},b$().prototype.irfft=function(){return this.throwIfDisposed(),VO(this)};const kP=q$({isFinite_:function(e){const t={x:U$(e,"x","isFinite")};return D$.runKernel(HC,t)}});b$().prototype.isFinite=function(){return this.throwIfDisposed(),kP(this)};const CP=q$({isInf_:function(e){const t={x:U$(e,"x","isInf")};return D$.runKernel(jC,t)}});b$().prototype.isInf=function(){return this.throwIfDisposed(),CP(this)};const EP=q$({isNaN_:function(e){const t={x:U$(e,"x","isNaN")};return D$.runKernel(UC,t)}});b$().prototype.isNaN=function(){return this.throwIfDisposed(),EP(this)},b$().prototype.leakyRelu=function(e){return this.throwIfDisposed(),TN(this,e)},b$().prototype.lessEqual=function(e){return this.throwIfDisposed(),$R(this,e)},b$().prototype.less=function(e){return this.throwIfDisposed(),fB(this,e)};const SP=q$({localResponseNormalization_:function(e,t=5,n=1,a=1,r=.5){const o=U$(e,"x","localResponseNormalization");Vx(4===o.rank||3===o.rank,(()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${o.rank}.`)),Vx(qx(t),(()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`));let s=o,i=!1;3===o.rank&&(i=!0,s=qI(o,[1,o.shape[0],o.shape[1],o.shape[2]]));const l={x:s},u={depthRadius:t,bias:n,alpha:a,beta:r},c=D$.runKernel(tE,l,u);return i?qI(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});b$().prototype.localResponseNormalization=function(e,t,n,a){return this.throwIfDisposed(),SP(this,e,t,n,a)};const $P=q$({logSigmoid_:function(e){const t=U$(e,"x","logSigmoid"),n=SI((e=>({value:ZN(kO(ZN(e))),gradFunc:t=>RN(t,mO(ZN(e)))})));return n(t)}});b$().prototype.logSigmoid=function(){return this.throwIfDisposed(),$P(this)},b$().prototype.logSoftmax=function(e){return this.throwIfDisposed(),BN(this,e)},b$().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),WR(this,e,t)},b$().prototype.log=function(){return this.throwIfDisposed(),IN(this)},b$().prototype.log1p=function(){return this.throwIfDisposed(),NN(this)},b$().prototype.logicalAnd=function(e){return this.throwIfDisposed(),PN(this,e)},b$().prototype.logicalNot=function(){return this.throwIfDisposed(),HB(this)};const TP=q$({logicalOr_:function(e,t){const n=U$(e,"a","logicalOr","bool"),a=U$(t,"b","logicalOr","bool");YT(n.shape,a.shape);const r={a:n,b:a};return D$.runKernel(eE,r)}});b$().prototype.logicalOr=function(e){return this.throwIfDisposed(),TP(this,e)};const IP=q$({logicalXor_:function(e,t){const n=U$(e,"a","logicalXor","bool"),a=U$(t,"b","logicalXor","bool");return YT(n.shape,a.shape),PN(TP(e,t),HB(PN(e,t)))}});b$().prototype.logicalXor=function(e){return this.throwIfDisposed(),IP(this,e)},b$().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),DN(this,e,t,n)},b$().prototype.maxPool=function(e,t,n,a){return this.throwIfDisposed(),FN(this,e,t,n,a)},b$().prototype.max=function(e,t){return this.throwIfDisposed(),ON(this,e,t)},b$().prototype.maximum=function(e){return this.throwIfDisposed(),LN(this,e)},b$().prototype.mean=function(e,t){return this.throwIfDisposed(),zN(this,e,t)},b$().prototype.min=function(e,t){return this.throwIfDisposed(),AR(this,e,t)},b$().prototype.minimum=function(e){return this.throwIfDisposed(),VN(this,e)};const NP=q$({mirrorPad_:function(e,t,n){Vx("reflect"===n||"symmetric"===n,(()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`));const a=U$(e,"x","mirrorPad");if(0===a.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");Vx(t.length===a.rank,(()=>`Padding doesn't match input. Must be ${a.rank}. Got ${t.length}.`));const r="reflect"===n?1:0;for(let e=0;e<a.rank;e++)Vx(2===t[e].length,(()=>"Invalid number of paddings. Must be length of 2 each.")),Vx(t[e][0]>=0&&t[e][0]<=a.shape[e]-r&&t[e][1]>=0&&t[e][1]<=a.shape[e]-r,(()=>`Padding in dimension ${e} cannot be greater than or equal to ${a.shape[e]-r} or less than 0 for input of shape ${a.shape}`));const o={paddings:t,mode:n},s={x:a};return D$.runKernel(hE,s,o)}});b$().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),NP(this,e,t)};const OP=q$({mod_:function(e,t){let n=U$(e,"a","mod"),a=U$(t,"b","mod");[n,a]=I$(n,a);const r={a:n,b:a};return D$.runKernel(fE,r)}});b$().prototype.mod=function(e){return this.throwIfDisposed(),OP(this,e)},b$().prototype.mul=function(e){return this.throwIfDisposed(),RN(this,e)},b$().prototype.neg=function(){return this.throwIfDisposed(),ZN(this)},b$().prototype.norm=function(e,t,n){return this.throwIfDisposed(),PR(this,e,t,n)},b$().prototype.notEqual=function(e){return this.throwIfDisposed(),QN(this,e)},b$().prototype.oneHot=function(e,t=1,n=0){return this.throwIfDisposed(),eO(this,e,t,n)},b$().prototype.onesLike=function(){return this.throwIfDisposed(),aO(this)},b$().prototype.pad=function(e,t){return this.throwIfDisposed(),rO(this,e,t)};const RP=q$({pool_:function(e,t,n,a,r,o,s){null==r&&(r=[1,1]),null==o&&(o=1),0===a&&(a="valid");const i=U$(e,"x","maxPool");let l=i,u=!1;3===i.rank&&(u=!0,l=qI(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Vx(jI(o,r),(()=>`Error in pool: Either strides or dilations must be 1. Got strides ${o} and dilations '${r}'`));const c=BI(l.shape,t,o,r,a),p=[c.dilationHeight,c.dilationWidth];let d;d="same"===a?function(e,t){const n=e.map(((e,n)=>e+(e-1)*(t[n]-1))),a=n.map((e=>e-1)),r=a.map((e=>Math.floor(e/2))),o=a.map(((e,t)=>e-r[t]));return a.map(((e,t)=>[r[t],o[t]]))}([c.filterHeight,c.filterWidth],p):[[0,0],[0,0]];const h=1===p[0]&&1===p[1],[f,m]=function(e,t,n){const a=n.map((e=>e[0])),r=n.map((e=>e[1])),o=e.concat(a,r),s=t.map(((e,t)=>(e-o[t]%e)%e)),i=r.map(((e,t)=>e+s[t])),l=t.map(((e,t)=>[a[t],i[t]])),u=t.map(((e,t)=>[0,s[t]]));return[l,u]}([c.inHeight,c.inWidth],p,d),g=h?a:"valid",v=h?l:kM(l,p,f),b=("avg"===n?()=>XI(v,t,o,g,s):()=>FN(v,t,o,g,s))(),y=h?b:tP(b,p,m);return u?qI(y,[y.shape[1],y.shape[2],y.shape[3]]):y}});b$().prototype.pool=function(e,t,n,a,r,o){return this.throwIfDisposed(),RP(this,e,t,n,a,r,o)},b$().prototype.pow=function(e){return this.throwIfDisposed(),MR(this,e)},b$().prototype.prelu=function(e){return this.throwIfDisposed(),oO(this,e)};const AP=q$({prod_:function(e,t=null,n=!1){let a=U$(e,"x","prod");"bool"===a.dtype&&(a=FT(a,"int32"));const r={x:a},o={axis:t,keepDims:n};return D$.runKernel(IE,r,o)}});b$().prototype.prod=function(e,t){return this.throwIfDisposed(),AP(this,e,t)};const MP=q$({reciprocal_:function(e){const t={x:U$(e,"x","reciprocal")};return D$.runKernel(RE,t)}});b$().prototype.reciprocal=function(){return this.throwIfDisposed(),MP(this)},b$().prototype.relu=function(){return this.throwIfDisposed(),pO(this)},b$().prototype.relu6=function(){return this.throwIfDisposed(),HO(this)},b$().prototype.reshapeAs=function(e){return this.throwIfDisposed(),qI(this,e.shape)},b$().prototype.reshape=function(e){return this.throwIfDisposed(),qI(this,e)},b$().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),CR(this,e,t,n)},b$().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),ER(this,e,t,n)},b$().prototype.reverse=function(e){return this.throwIfDisposed(),dO(this,e)},b$().prototype.rfft=function(){return this.throwIfDisposed(),LO(this)},b$().prototype.round=function(){return this.throwIfDisposed(),TR(this)},b$().prototype.rsqrt=function(){return this.throwIfDisposed(),YM(this)},b$().prototype.selu=function(){return this.throwIfDisposed(),hO(this)},b$().prototype.separableConv2d=function(e,t,n,a,r,o){return this.throwIfDisposed(),fO(this,e,t,n,a,r,o)},b$().prototype.sigmoid=function(){return this.throwIfDisposed(),mO(this)};const BP=q$({sign_:function(e){const t={x:U$(e,"x","sign")};return D$.runKernel(XE,t)}});b$().prototype.sign=function(){return this.throwIfDisposed(),BP(this)},b$().prototype.sin=function(){return this.throwIfDisposed(),BM(this)},b$().prototype.sinh=function(){return this.throwIfDisposed(),DM(this)},b$().prototype.slice=function(e,t){return this.throwIfDisposed(),gO(this,e,t)},b$().prototype.softmax=function(e){return this.throwIfDisposed(),xO(this,e)},b$().prototype.softplus=function(){return this.throwIfDisposed(),kO(this)},b$().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),kM(this,e,t)},b$().prototype.split=function(e,t){return this.throwIfDisposed(),CO(this,e,t)},b$().prototype.sqrt=function(){return this.throwIfDisposed(),EO(this)},b$().prototype.square=function(){return this.throwIfDisposed(),KN(this)},b$().prototype.squaredDifference=function(e){return this.throwIfDisposed(),VR(this,e)},b$().prototype.squeeze=function(e){return this.throwIfDisposed(),SO(this,e)},b$().prototype.stack=function(e,t){this.throwIfDisposed();const n=e instanceof v$?[this,e]:[this,...e];return $O(n,t)},b$().prototype.step=function(e){return this.throwIfDisposed(),jO(this,e)};const PP=q$({stridedSlice_:function(e,t,n,a,r=0,o=0,s=0,i=0,l=0){const u={x:U$(e,"x","stridedSlice","string_or_numeric")},c={begin:t,end:n,strides:a,beginMask:r,endMask:o,ellipsisMask:s,newAxisMask:i,shrinkAxisMask:l};return D$.runKernel(uS,u,c)}});b$().prototype.stridedSlice=function(e,t,n,a,r,o,s,i){return this.throwIfDisposed(),PP(this,e,t,n,a,r,o,s,i)},b$().prototype.sub=function(e){return this.throwIfDisposed(),AN(this,e)},b$().prototype.sum=function(e,t){return this.throwIfDisposed(),MN(this,e,t)};const DP=q$({tan_:function(e){const t={x:U$(e,"x","tan","float32")};return D$.runKernel(fS,t)}});b$().prototype.tan=function(){return this.throwIfDisposed(),DP(this)},b$().prototype.tanh=function(){return this.throwIfDisposed(),TO(this)},b$().prototype.tile=function(e){return this.throwIfDisposed(),wN(this,e)},b$().prototype.toBool=function(){return this.throwIfDisposed(),FT(this,"bool")},b$().prototype.toFloat=function(){return this.throwIfDisposed(),FT(this,"float32")},b$().prototype.toInt=function(){return this.throwIfDisposed(),FT(this,"int32")};const FP=q$({topk_:function(e,t=1,n=!0){const a=U$(e,"x","topk");if(0===a.rank)throw new Error("topk() expects the input to be of rank 1 or higher");const r=a.shape[a.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>r)throw new Error(`'k' passed to topk() must be <= the last dimension (${r}) but got ${t}`);const o={x:a},s={k:t,sorted:n},[i,l]=D$.runKernel(vS,o,s);return{values:i,indices:l}}});b$().prototype.topk=function(e,t){return this.throwIfDisposed(),FP(this,e,t)},b$().prototype.transpose=function(e){return this.throwIfDisposed(),BO(this,e)};const _P=q$({unique_:function(e,t=0){const n=U$(e,"x","unique","string_or_numeric");Vx(n.rank>0,(()=>"The input tensor must be at least 1D"));const a={x:n},r={axis:t},[o,s]=D$.runKernel(wS,a,r);return{values:o,indices:s}}});let LP;function zP(){return null==LP&&(LP=D$.backend.epsilon()),LP}b$().prototype.unique=function(e){return this.throwIfDisposed(),_P(this,e)},b$().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),JM(this,e,t)},b$().prototype.unstack=function(e){return this.throwIfDisposed(),OO(this,e)},b$().prototype.where=function(e,t){return this.throwIfDisposed(),AO(e,this,t)},b$().prototype.zerosLike=function(){return this.throwIfDisposed(),MO(this)};class VP extends Error{constructor(e){super(e),Object.setPrototypeOf(this,VP.prototype)}}class WP extends Error{constructor(e){super(e),Object.setPrototypeOf(this,WP.prototype)}}class HP extends Error{constructor(e){super(e),Object.setPrototypeOf(this,HP.prototype)}}class jP extends Error{constructor(e){super(e),Object.setPrototypeOf(this,jP.prototype)}}class UP extends Error{constructor(e){super(e),Object.setPrototypeOf(this,UP.prototype)}}Error;function GP(e,t){if(Array.isArray(e)){let n=[];for(let a=0;a<t;a++)n=n.concat(e);return n}{const n=new Array(t);return n.fill(e),n}}function qP(e,t){if(!e)throw new UP(t)}function XP(e,t){let n=0;for(const a of e)a===t&&n++;return n}function YP(e){return 1===e.length?e[0]:e}function KP(e){return Array.isArray(e)?e:[e]}function JP(e){const t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function ZP(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,((e,t)=>t.toUpperCase()))}let QP={};function eD(e){if(null==e)return null;const t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function tD(e){if(null!=e&&"object"==typeof e)if(Array.isArray(e))e.forEach((e=>tD(e)));else{const t=Object.keys(e);for(const n of t){const t=e[n];null!=t&&"object"==typeof t&&(Array.isArray(t)||"ndarray"!==t.type||"number"!=typeof t.value?tD(t):e[n]=t.value)}}}function nD(e,t={},n={},a="object",r=!1){if("string"==typeof e){const r=e;let o;if(r in n)o=n[r];else if(r in QP)o=QP[r];else if(o=t[r],null==o)throw new HP(`Unknown ${a}: ${e}. This may be due to one of the following reasons:\n1. The ${a} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${a} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}{const o=e;if(null==o.className||null==o.config)throw new HP(`${a}: Improper config format: ${JSON.stringify(o)}.\n'className' and 'config' must set.`);const s=o.className;let i,l;if(s in n?[i,l]=n[s]:s in QP?[i,l]=QP.className:s in t&&([i,l]=t[s]),null==i)throw new HP(`Unknown ${a}: ${s}. This may be due to one of the following reasons:\n1. The ${a} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${a} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(null!=l){const e={};for(const t of Object.keys(QP))e[t]=QP[t];for(const t of Object.keys(n))e[t]=n[t];o.config.customObjects=e;const t=Object.assign({},QP);for(const e of Object.keys(n))QP[e]=n[e];tD(o.config);const a=l(i,o.config,n,r);return QP=Object.assign({},t),a}{const e=Object.assign({},QP);for(const e of Object.keys(n))QP[e]=n[e];const t=new i(o.config);return QP=Object.assign({},e),t}}}function aD(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function rD(e){if(null==e)return e;const t=[];for(const n of e)-1===t.indexOf(n)&&t.push(n);return t}function oD(e){if(null==e)throw new HP(`Invalid value in obj: ${JSON.stringify(e)}`);for(const t in e)if(e.hasOwnProperty(t))return!1;return!0}function sD(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new HP(`${n} is not a valid ${t}.  Valid values are ${e} or null/undefined.`)}function iD(e,t,n=0,a=1/0){return qP(n>=0),qP(a>=n),Array.isArray(e)&&e.length>=n&&e.length<=a&&e.every((e=>typeof e===t))}function lD(e,t){Array.isArray(e)?(Vx(e.length>0,(()=>`${t} is unexpectedly an empty array.`)),e.forEach(((e,n)=>lD(e,`element ${n+1} of ${t}`)))):Vx(Number.isInteger(e)&&e>0,(()=>`Expected ${t} to be a positive integer, but got ${uD(e)}.`))}function uD(e){return null===e?"null":Array.isArray(e)?"["+e.map((e=>uD(e))).join(",")+"]":"string"==typeof e?`"${e}"`:`${e}`}function cD(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}function pD(e,t){return xI((()=>EO(MN(RN(e,e),t,!0))))}class dD extends gI{getConfig(){return{}}}class hD extends dD{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return xI((()=>{const t=pD(e,this.axis),n=eN(t,0,this.maxValue);return RN(e,mN(n,NI(zP(),t)))}))}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}hD.className="MaxNorm",bI(hD);class fD extends dD{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return xI((()=>mN(e,NI(zP(),pD(e,this.axis)))))}getConfig(){return{axis:this.axis}}}fD.className="UnitNorm",bI(fD);class mD extends dD{apply(e){return pO(e)}}mD.className="NonNeg",bI(mD);class gD extends dD{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return xI((()=>{const t=pD(e,this.axis),n=NI(RN(this.rate,eN(t,this.minValue,this.maxValue)),RN(1-this.rate,t));return RN(e,mN(n,NI(zP(),t)))}))}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}gD.className="MinMaxNorm",bI(gD);const vD={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function bD(e){return eD(e)}function yD(e,t={}){return nD(e,vI.getMap().classNameMap,t,"constraint")}function wD(e){if(null==e)return null;if("string"==typeof e){return yD({className:e in vD?vD[e]:e,config:{}})}return e instanceof dD?e:yD(e)}const xD=["channelsFirst","channelsLast"],kD=["nearest","bilinear"],CD=["valid","same","causal"],ED=["max","avg"],SD=["sum","mul","concat","ave"],$D=new Map;function TD(e){sD(xD,"DataFormat",e)}function ID(e){sD(CD,"PaddingMode",e)}function ND(e){sD(ED,"PoolMode",e)}const OD=[];function RD(e,t){OD.push(e);try{const e=t();return OD.pop(),e}catch(e){throw OD.pop(),e}}function AD(e){if(!PD(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===OD.length?"":OD.join("/")+"/")+e}function MD(e){if(!PD(e))throw new Error("Not a valid tensor name: '"+e+"'");$D.has(e)||$D.set(e,0);const t=$D.get(e);if($D.set(e,$D.get(e)+1),t>0){const n=`${e}_${t}`;return $D.set(n,1),n}return e}const BD=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function PD(e){return!!e.match(BD)}function DD(e,t,n){null==t&&(t=0),null==n&&(n=e.length);let a=1;for(let r=t;r<n;++r)a*=e[r];return a}function FD(e){if(0===e.length)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){const a=e[n];a<t&&(t=a)}return t}function _D(e){if(0===e.length)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){const a=e[n];a>t&&(t=a)}return t}function LD(e,t){if(t<e)throw new HP(`end (${t}) < begin (${e}) is forbidden.`);const n=[];for(let a=e;a<t;++a)n.push(a);return n}function zD(e,t){return FT(e,t)}function VD(e,t=-1){const n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),qI(e,n)}function WD(e,t,n){return xI((()=>{switch(e.rank){case 1:return vO(e,t,n);case 2:return bO(e,[t,0],[n,e.shape[1]]);case 3:return yO(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return wO(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return gO(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return gO(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new HP(`sliceAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function HD(e,t,n){return xI((()=>{switch(e.rank){case 1:return vO(e,t,n);case 2:return bO(e,[0,t],[e.shape[0],n]);case 3:return yO(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return wO(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new HP(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function jD(e,t,n,a){return xI((()=>{switch(e.rank){case 1:return vO(e,t,n);case 2:switch(a){case 1:return WD(e,t,n);case 2:return HD(e,t,n);default:throw new HP(`The axis is not within the rank of the tensor ${a}`)}case 3:switch(a){case 1:return WD(e,t,n);case 2:return yO(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return HD(e,t,n);default:throw new HP(`The axis is not within the rank of the tensor ${a}`)}case 4:switch(a){case 1:return WD(e,t,n);case 2:return wO(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return wO(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return HD(e,t,n);default:throw new HP(`The axis is not within the rank of the tensor ${a}`)}default:throw new HP(`sliceAlongLastAxis() received an unsupported tensor rank: ${e.rank}`)}}))}function UD(e,t=-1){let n;return t<0&&(n=e[0].rank,t=0!==n?n:0),t===e[0].rank&&(t=-1),tN(e,t)}function GD(e,t){switch(e.rank){case 1:return nN([e,t]);case 2:return aN([e,t],0);case 3:return rN([e,t],0);case 4:return oN([e,t],0);default:throw new HP(`concatAlongFirstAxis() received an unsupported tensor rank: ${e.rank}`)}}function qD(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new HP(`The length of input n (${t.length}) does not match the number of dimensions in input x (${e.rank})`);return wN(e,t)}function XD(e,t=0,n=1,a,r){return uO(e,t,n,a,r)}function YD(e,t,n,a){if(e.rank<2||t.rank<2)throw new jP(`dot requires both inputs to be rank >= 2 but got x shape = ${e.shape} and y shape = ${t.shape}`);if(t.rank>=3){if(e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new jP(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${e.shape} and  y shape = ${t.shape}`)}if(2===e.rank&&2===t.rank){return ZO({a:e,b:t,transposeA:!1,transposeB:!1,bias:a?ZD(e.rank,a,"channelsLast"):null,activation:n})}{const r=e.shape.slice(),o=r.pop();e=qI(e,[-1,o]);const s=t.shape.slice(),i=s.pop(),l=s.pop(),u=[...s,i],c=Array.from({length:t.rank},((e,n)=>0===n?t.rank-2:n<=t.rank-2?n-1:n));t=qI(BO(t,c),[l,-1]);const p=[...r,...u];return qI(ZO({a:e,b:t,transposeA:!1,transposeB:!1,bias:a?ZD(e.rank,a,"channelsLast"):null,activation:n}),p)}}function KD(e,t,n){return xI((()=>(t=Array.isArray(t)?IO(t,"int32"):FT(t,"int32"),EN(e,t,n))))}function JD(e){return RN(e,e)}function ZD(e,t,n){const a=t.shape;if(1!==t.rank&&t.rank!==e)throw new HP(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${e}`);if(5===e){if("channelsFirst"===n)return 1===a.length?qI(t,[1,a[0],1,1,1]):qI(t,[1,a[3],a[0],a[1],a[2]]);if("channelsLast"===n)return 1===a.length?qI(t,[1,1,1,1,a[0]]):qI(t,[1].concat(a))}else if(4===e){if("channelsFirst"===n)return 1===a.length?qI(t,[1,a[0],1,1]):qI(t,[1,a[2],a[0],a[1]]);if("channelsLast"===n)return 1===a.length?qI(t,[1,1,1,a[0]]):qI(t,[1].concat(a))}else if(3===e){if("channelsFirst"===n)return 1===a.length?qI(t,[1,a[0],1]):qI(t,[1,a[1],a[0]]);if("channelsLast"===n)return 1===a.length?qI(t,[1,1,a[0]]):qI(t,[1].concat(a))}else if(e<3)return t;throw new HP(`Unsupported input rank by biasAdd: ${t.rank}`)}function QD(e,t,n){return xI((()=>(null==n&&(n="channelsLast"),TD(n),NI(e,ZD(e.rank,t,n)))))}function eF(e,t,n,a){return xI((()=>PO(e,t,n,a)))}function tF(e,t,n=!1){return n?e():t()}const nF=["fanIn","fanOut","fanAvg"],aF=["normal","uniform","truncatedNormal"];class rF extends gI{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class oF extends rF{apply(e,t){return tO(e,t)}}oF.className="Zeros",bI(oF);class sF extends rF{apply(e,t){return nO(e,t)}}sF.className="Ones",bI(sF);class iF extends rF{constructor(e){if(super(),"object"!=typeof e)throw new HP(`Expected argument of type ConstantConfig but got ${e}`);if(void 0===e.value)throw new HP(`config must have value set but got ${e}`);this.value=e.value}apply(e,t){return xI((()=>RN($I(this.value),nO(e,t))))}getConfig(){return{value:this.value}}}iF.className="Constant",bI(iF);class lF extends rF{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return cO(e,this.minval,this.maxval,t)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}lF.className="RandomUniform",bI(lF);class uF extends rF{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new jP(`randomNormal does not support dType ${t}.`);return XD(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}uF.className="RandomNormal",bI(uF);class cF extends rF{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new jP(`truncatedNormal does not support dType ${t}.`);return NO(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}cF.className="TruncatedNormal",bI(cF);class pF extends rF{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,t){return xI((()=>{if(2!==e.length||e[0]!==e[1])throw new HP("Identity matrix initializer can only be used for 2D square matrices.");return RN(this.gain,xN(e[0]))}))}getConfig(){return{gain:this.gain}}}pF.className="Identity",bI(pF);class dF extends rF{constructor(e){if(super(),e.scale<0)throw new HP(`scale must be a positive float. Got: ${e.scale}`);this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,function(e){sD(nF,"FanMode",e)}(this.mode),this.distribution=null==e.distribution?"normal":e.distribution,function(e){sD(aF,"Distribution",e)}(this.distribution),this.seed=e.seed}apply(e,t){const n=function(e,t="channelsLast"){let n,a;if(TD(t),2===e.length)n=e[0],a=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===t){const t=DD(e,2);n=e[1]*t,a=e[0]*t}else if("channelsLast"===t){const t=DD(e,0,e.length-2);n=e[e.length-2]*t,a=e[e.length-1]*t}}else{const t=DD(e);n=Math.sqrt(t),a=Math.sqrt(t)}return[n,a]}(e),a=n[0],r=n[1];let o=this.scale;if("fanIn"===this.mode?o/=Math.max(1,a):"fanOut"===this.mode?o/=Math.max(1,r):o/=Math.max(1,(a+r)/2),"normal"===this.distribution){const n=Math.sqrt(o);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new jP(`${this.getClassName()} does not support dType ${t}.`);return NO(e,0,n,t,this.seed)}{const n=Math.sqrt(3*o);return cO(e,-n,n,t)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}dF.className="VarianceScaling",bI(dF);class hF extends dF{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return dF.className}}hF.className="GlorotUniform",bI(hF);class fF extends dF{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return dF.className}}fF.className="GlorotNormal",bI(fF);class mF extends dF{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return dF.className}}mF.className="HeNormal",bI(mF);class gF extends dF{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return dF.className}}gF.className="HeUniform",bI(gF);class vF extends dF{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return dF.className}}vF.className="LeCunNormal",bI(vF);class bF extends dF{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return dF.className}}bF.className="LeCunNormal",bI(bF);class yF extends rF{constructor(e){if(super(),this.DEFAULT_GAIN=1,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed,null!=this.seed)throw new jP("Random seed is not implemented for Orthogonal Initializer yet.")}apply(e,t){return xI((()=>{if(e.length<2)throw new jP("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn(`Orthogonal initializer is being called on a matrix with more than 2000 (${e[0]*e[1]}) elements: Slowness may result.`);const t=XD(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32");let n=jR.gramSchmidt(t);return e[0]>e[1]&&(n=BO(n)),RN(this.gain,n)}))}getConfig(){return{gain:this.gain,seed:this.seed}}}yF.className="Orthogonal",bI(yF);const wF={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function xF(e,t={}){return nD(e,vI.getMap().classNameMap,t,"initializer")}function kF(e){return eD(e)}function CF(e){if("string"==typeof e){const t=e in wF?wF[e]:e;if("GlorotNormal"===t)return new fF;if("GlorotUniform"===t)return new hF;if("HeNormal"===t)return new mF;if("HeUniform"===t)return new gF;if("LeCunNormal"===t)return new vF;if("LeCunUniform"===t)return new bF;{const e={};return e.className=t,e.config={},xF(e)}}return e instanceof rF?e:xF(e)}let EF=0;function SF(){return EF++}const $F={};function TF(e=""){return e in $F||($F[e]=0),$F[e]+=1,e+$F[e].toString()}function IF(e){return Array.isArray(e)&&Array.isArray(e[0])}function NF(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function OF(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new HP(`Expected Tensor length to be 1; got ${e.length}`);t=e[0]}else t=e;return t}function RF(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return(e=e)[0];throw new HP(`Expected exactly 1 Shape; got ${e.length}`)}return e}function AF(e){let t=0;for(const n of e)0===n.shape.length?t+=1:t+=n.shape.reduce(((e,t)=>e*t));return t}const MF="Variable";class BF{constructor(e,t="float32",n="Variable",a=!0,r=null){this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=SF(),n=null==n?MF:n,this.originalName=AD(n),this.name=MD(this.originalName),this.trainable_=a,this.constraint=r,this.val=function(e,t=!0,n,a){return D$.makeVariable(e,t,n,a)}(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function PF(e){return e.map((e=>e.read()))}function DF(e){e.forEach((e=>{e[0].write(e[1])}))}class FF{constructor(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class _F{constructor(e,t,n,a,r,o,s){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=a,this.callArgs=r,this.outputTensorIndex=s,this.id=SF(),null!=o&&(this.originalName=AD(o),this.name=MD(this.originalName)),this.rank=t.length}}let LF=0;class zF{constructor(e,t){this.callArgs=t,this.id=LF++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const t of e.inboundLayers)null!=t&&t.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const t of this.inboundLayers)null!=t?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}let VF=0;class WF extends gI{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=VF++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){const e=this.getClassName();t=JP(e)+"_"+TF(e)}if(this.name=t,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),t=[n].concat(e.inputShape)}this.batchInputShape=t;let n=e.dtype;null==n&&(n=e.inputDType),null==n&&(n="float32"),this.dtype=n}null!=e.weights?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(0===this.inboundNodes.length)throw new WP(`The layer has never been called and thus has no defined ${t}.`);if(this.inboundNodes.length<=e)throw new HP(`Asked to get ${t} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return YP(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return YP(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new VP(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(0===this.inboundNodes.length)throw new VP(`Layer ${this.name} is not connected, no input to return.`);return YP(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new VP(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new VP(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return YP(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map((e=>e()))}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach((t=>t.trainable=e)),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter((e=>e.trainable)):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter((e=>!e.trainable)).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){if(e=KP(e),null==this.inputSpec||0===this.inputSpec.length)return;const t=KP(this.inputSpec);if(e.length!==t.length)throw new HP(`Layer ${this.name} expects ${t.length} inputs, but it received ${e.length} input tensors. Input received: ${e}`);for(let n=0;n<e.length;n++){const a=e[n],r=t[n];if(null==r)continue;const o=a.rank;if(null!=r.ndim&&o!==r.ndim)throw new HP(`Input ${n} is incompatible with layer ${this.name}: expected ndim=${r.ndim}, found ndim=${o}`);if(null!=r.maxNDim&&o>r.maxNDim)throw new HP(`Input ${n} is incompatible with layer ${this.name}: expected max_ndim=${r.maxNDim}, found ndim=${o}`);if(null!=r.minNDim&&o<r.minNDim)throw new HP(`Input ${n} is incompatible with layer ${this.name}: expected min_ndim=${r.minNDim}, found ndim=${o}.`);if(null!=r.dtype&&a.dtype!==r.dtype)throw new HP(`Input ${n} is incompatible with layer ${this.name} : expected dtype=${r.dtype}, found dtype=${a.dtype}.`);if(r.axes){const e=a.shape;for(const t in r.axes){const a=Number(t),o=r.axes[t],s=a>=0?e[a]:e[e.length+a];if(null!=o&&-1===[o,null].indexOf(s))throw new HP(`Input ${n} is incompatible with layer ${this.name}: expected axis ${a} of input shape to have value ${o} but got shape ${e}.`)}}if(null!=r.shape)for(let e=0;e<r.shape.length;++e){const t=r.shape[e],o=a.shape[e];if(null!=t&&null!=o&&t!==o)throw new HP(`Input ${n} is incompatible with layer ${this.name}: expected shape=${r.shape}, found shape=${a.shape}.`)}}}call(e,t){return e}invokeCallHook(e,t){null!=this._callHook&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();const n=KP(e);let a=!0;for(const e of n)if(!(e instanceof _F)){a=!1;break}let r=!0;for(const e of n)if(e instanceof _F){r=!1;break}if(a===r)throw new HP("Arguments to apply() must be all SymbolicTensors or all Tensors");return RD(this.name,(()=>{if(!this.built){this.assertInputCompatibility(e);const t=[];for(const n of KP(e))t.push(n.shape);this.build(YP(t)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&r&&(this._refCount=1)}if(this.assertInputCompatibility(e),r){let a=this.call(e,t);const r=KP(a),o=[];for(let e of r)-1!==n.indexOf(e)&&(e=e.clone()),o.push(e);if(a=YP(o),null!=this.activityRegularizer)throw new jP("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return a}{const n=function(e){e=KP(e);const t=[];for(const n of e)t.push(n.shape);return YP(t)}(e),a=this.computeOutputShape(n);let r;const o="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(e)?n[0]:n),r=null!=a&&a.length>0&&Array.isArray(a[0])?a.map(((n,a)=>new _F(o,n,this,KP(e),t,this.name,a))):new _F(o,a,this,KP(e),t,this.name),this.addInboundNode(e,r,null,null,n,a,t),this._refCount++,null!=this.activityRegularizer)throw new jP("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}}))}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let t=!1;this.batchInputShape.forEach(((n,a)=>{null!=n&&null!=e[a]&&e[a]!==n&&(t=!0)})),t&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new VP(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const t of this.inboundNodes){const n=JSON.stringify(t.outputShapes);-1===e.indexOf(n)&&e.push(n)}if(1===e.length){const e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new VP(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new WP(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return AF(this.weights)}build(e){this.built=!0}getWeights(e=!1){return PF(e?this.trainableWeights:this.weights)}setWeights(e){xI((()=>{const t=this.weights;if(t.length!==e.length)throw new HP(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${t.length} weights. Provided weights: ${e}...`);if(0===t.length)return;const n=[],a=PF(t);for(let r=0;r<a.length;++r){const o=a[r],s=t[r],i=e[r];if(!Gx(o.shape,i.shape))throw new HP(`Layer weight shape ${o.shape} not compatible with provided weight shape ${i.shape}`);n.push([s,i])}DF(n)}))}addWeight(e,t,n,a,r,o,s,i){if(-1!==this._addedWeightNames.indexOf(e))throw new HP(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(a=null!=i?i():CF("zeros"));const l=a.apply(t,n),u=new BF(l,n,e,o,s);return l.dispose(),null!=r&&this.addLoss((()=>r.apply(u.read()))),null==o&&(o=!0),o?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=KP(e),void 0!==this._losses&&null!==this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);t.forEach((e=>{if(null!=e)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)}))}return null}return t}addInboundNode(e,t,n,a,r,o,s=null){const i=KP(e);t=KP(t),n=KP(n),a=KP(a),r=NF(r),o=NF(o);const l=[],u=[],c=[];for(const e of i)l.push(e.sourceLayer),u.push(e.nodeIndex),c.push(e.tensorIndex);new zF({outboundLayer:this,inboundLayers:l,nodeIndices:u,tensorIndices:c,inputTensors:i,outputTensors:t,inputMasks:n,outputMasks:a,inputShapes:r,outputShapes:o},s);for(let e=0;e<t.length;e++)t[e].sourceLayer=this,t[e].nodeIndex=this.inboundNodes.length-1,t[e].tensorIndex=e}getConfig(){const e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach((e=>e.dispose())),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(null===this._refCount)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return 0==--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function HF(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];{const e=t.inboundNodes[n];if(0===e.inboundLayers.length)return e.inputTensors;{const t=[];for(let n=0;n<e.inboundLayers.length;n++){const a=HF(e.inputTensors[n],e.inboundLayers[n],e.nodeIndices[n]);for(const e of a)-1===t.indexOf(e)&&t.push(e)}return t}}}class jF extends WF{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:TF("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new HP("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(null==t){if(null==e.inputShape)throw new HP("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new HP("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];const a=new _F(this.dtype,this.batchInputShape,this,[],{},this.name);a.nodeIndex=0,a.tensorIndex=0,new zF({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[a],outputTensors:[a],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new HP(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}async function UF(e){if(null==e)return;const t=[],n=[],a=[];for(const r in e){const o=e[r];if("number"!=typeof o){const e=o;t.push(e.data()),n.push(r),a.push(e)}}if(t.length>0){const r=await Promise.all(t);for(let t=0;t<r.length;++t)e[n[t]]=r[t][0];kI(a)}}function GF(e){if(null!=e)for(const t in e){const n=e[t];"number"!=typeof n&&n.dispose()}}var qF;jF.className="InputLayer",bI(jF),function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(qF||(qF={}));class XF{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class YF{constructor(e,t=10){null==e&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(const t of this.callbacks)t.setParams(e)}setModel(e){for(const t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){null==t&&(t={});for(const n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){null==e&&(e={});for(const t of this.callbacks)await t.onTrainEnd(e)}}class KF extends XF{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){null==t&&(t={});const n=null==t.size?0:t.size;this.seen+=n;for(const e in t){const a=t[e];if("number"==typeof a)this.totals.hasOwnProperty(e)||(this.totals[e]=0),this.totals[e]=this.totals[e]+a*n;else{let t;e in this.totals?t=this.totals[e]:this.totals[e]=0;const r=xI((()=>NI(this.totals[e],RN(a,n))));this.totals[e]=r,null!=t&&t.dispose()}}}async onEpochEnd(e,t){if(null!=t)for(const e of this.params.metrics)null!=this.totals[e]&&("number"==typeof this.totals[e]?t[e]=this.totals[e]/this.seen:xI((()=>{const n=RN(mN(1,this.seen),this.totals[e]);t[e]=n,this.totals[e].dispose(),CI(t[e])})))}}class JF extends XF{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){null==t&&(t={}),this.epoch.push(e);for(const e in t)null==this.history[e]&&(this.history[e]=[]),this.history[e].push(t[e])}async syncData(){const e=[],t=[],n=[];for(const a in this.history){const r=this.history[a];for(let o=0;o<r.length;++o)if("number"!=typeof r[o]){const s=r[o];e.push(s.data()),t.push(a),n.push(o)}}const a=await Promise.all(e);for(let e=0;e<a.length;++e){this.history[t[e]][n[e]].dispose(),this.history[t[e]][n[e]]=a[e][0]}}}class ZF extends XF{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||tA,this.yieldEvery=t||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");sk(this.yieldEvery)&&(this.maybeWait=function(e,t,n){let a,r=null!=n?n():n$();return(...o)=>{const s=null!=n?n():n$();return s-r<t||(r=s,a=e(...o)),a}}(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){const a=[];null!=this.yield&&(await UF(n),a.push(this.yield(e,t,n))),a.push(this.nextFrameFunc()),await Promise.all(a)}async onEpochBegin(e,t){this.currentEpoch=e,null!=this.epochBegin&&(await UF(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){const n=[];null!=this.epochEnd&&(await UF(t),n.push(this.epochEnd(e,t))),"epoch"===this.yieldEvery&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){null!=this.batchBegin&&(await UF(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){const n=[];null!=this.batchEnd&&(await UF(t),n.push(this.batchEnd(e,t))),"batch"===this.yieldEvery?n.push(this.nextFrameFunc()):sk(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){null!=this.trainBegin&&(await UF(e),await this.trainBegin(e))}async onTrainEnd(e){null!=this.trainEnd&&(await UF(e),await this.trainEnd(e))}}function QF(e,t){if(null==e&&(e={}),e instanceof XF)return[e];if(Array.isArray(e)&&e[0]instanceof XF)return e;return KP(e).map((e=>new ZF(e,t)))}class e_{constructor(){}static registerCallbackConstructor(e,t){Vx(e>=0&&Number.isInteger(e),(()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`)),e_.checkForDuplicate(t),null==e_.constructors[e]&&(e_.constructors[e]=[]),e_.constructors[e].push(t)}static checkForDuplicate(e){for(const t in e_.constructors){e_.constructors[+t].forEach((t=>{if(t===e)throw new HP("Duplicate callback constructor.")}))}}static clear(){e_.constructors={}}static createCallbacks(e){const t=[];for(const n in e_.constructors){const a=+n;e>=a&&t.push(...e_.constructors[a])}return t.map((e=>new e))}}function t_(e,t,n,a,r,o,s,i,l){const u=new JF,c=[new KF,...e_.createCallbacks(t)];null!=e&&c.push(...e),c.push(u);const p=new YF(c);return p.setParams({epochs:n,initialEpoch:a,samples:r,steps:o,batchSize:s,verbose:t,doValidation:i,metrics:l}),{callbackList:p,history:u}}function n_(e,t={},n=!1){return nD(e,vI.getMap().classNameMap,t,"layer",n)}function a_(e,t){return xI((()=>{"float32"!==e.dtype&&(e=FT(e,"float32"));const n=MN(JD(e),t,!0),a=kN(n.shape,zP()),r=EO(LN(n,a));return mN(e,r)}))}function r_(e,t){return xI((()=>zN(JD(AN(t,e)),-1)))}function o_(e,t){return xI((()=>zN(II(AN(t,e)),-1)))}function s_(e,t){return xI((()=>{const n=AN(e,t),a=eN(II(e),zP(),Number.MAX_VALUE),r=II(mN(n,a));return RN(100,zN(r,-1))}))}function i_(e,t){return xI((()=>{const n=eN(t,zP(),Number.MAX_VALUE),a=IN(NI(1,n)),r=eN(e,zP(),Number.MAX_VALUE),o=IN(NI(1,r));return zN(JD(AN(a,o)),-1)}))}function l_(e,t,n=!1){return xI((()=>{if(n)t=xO(t);else{const e=MN(t,t.shape.length-1,!0);t=mN(t,e)}return t=eN(t,zP(),1-zP()),ZN(MN(RN(FT(e,"float32"),IN(t)),t.shape.length-1))}))}function u_(e,t,n=!1){return xI((()=>{const a=FT(CN(function(e){const t=[DD(e.shape)];return qI(e,t)}(e)),"int32"),r=(t=eN(t,zP(),1-zP())).shape;return l_(qI(eO(a,r[r.length-1]),r),t,n)}))}function c_(e,t){return xI((()=>{let n;return n=eN(t,zP(),1-zP()),n=IN(mN(n,AN(1,n))),zN(function(e,t){if(!Gx(e.shape,t.shape))throw new HP(`logits and labels must have the same shape, but got shapes ${JSON.stringify(e.shape)} and ${JSON.stringify(t.shape)}`);return xI((()=>{const n=pO(t),a=ZN(II(t));return NI(AN(n,RN(t,e)),NN(bN(a)))}))}(e,n),-1)}))}function p_(e,t){return xI((()=>{const n=eN(e,zP(),1),a=eN(t,zP(),1);return MN(RN(e,IN(mN(n,a))),-1)}))}function d_(e,t){return xI((()=>{const n=a_(e,-1),a=a_(t,-1),r=RN(n,a);return ZN(MN(r,-1))}))}e_.constructors={};const h_={meanSquaredError:r_,meanAbsoluteError:o_,meanAbsolutePercentageError:s_,meanSquaredLogarithmicError:i_,squaredHinge:function(e,t){return xI((()=>{const n=LN(0,AN(1,RN(e,t)));return zN(JD(n),-1)}))},hinge:function(e,t){return xI((()=>{const n=LN(0,AN(1,RN(e,t)));return zN(n,-1)}))},categoricalHinge:function(e,t){return xI((()=>{const n=MN(RN(e,t),-1),a=ON(RN(AN(1,e),t),-1);return LN(0,NI(1,AN(a,n)))}))},logcosh:function(e,t){return xI((()=>{const n=Math.log(2),a=AN(t,e),r=AN(NI(a,kO(RN(-2,a))),n);return zN(r,-1)}))},categoricalCrossentropy:l_,sparseCategoricalCrossentropy:u_,binaryCrossentropy:c_,kullbackLeiblerDivergence:p_,poisson:function(e,t){return xI((()=>{const n=IN(NI(zP(),t));return zN(AN(t,RN(e,n)),-1)}))},cosineProximity:d_};function f_(e){if("string"==typeof e){if(e in h_)return h_[e];let t=`Unknown loss ${e}`;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${e}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new HP(t)}return e}function m_(e,t){return xI((()=>{const n=RN(.5,aO(t)),a=zD(SN(t,n),e.dtype);return zN(vN(e,a),-1)}))}function g_(e,t){return xI((()=>zD(vN(AI(e,-1),AI(t,-1)),"float32")))}function v_(e,t){return xI((()=>FT(MN(PN(vN(e,1),vN(t,1))),"float32")))}function b_(e,t){return c_(e,t)}function y_(e,t){return e.rank===t.rank&&(e=SO(e,[e.rank-1])),(t=AI(t,-1)).dtype!==e.dtype&&(t=FT(t,e.dtype)),FT(vN(e,t),"float32")}const w_=l_,x_=u_,k_={binaryAccuracy:m_,categoricalAccuracy:g_,precision:function(e,t){return xI((()=>{const n=v_(e,t),a=function(e,t){return xI((()=>FT(MN(PN(vN(e,0),vN(t,1))),"float32")))}(e,t),r=NI(n,a);return FT(AO(SN(r,0),mN(n,r),0),"float32")}))},categoricalCrossentropy:w_,sparseCategoricalCrossentropy:x_,mse:r_,MSE:r_,mae:o_,MAE:o_,mape:s_,MAPE:s_,cosine:d_};function C_(e){if("string"==typeof e&&e in k_)return k_[e];if("string"!=typeof e&&null!=e)return e;throw new HP(`Unknown metric ${e}`)}function E_(e){if(qP(null!==e,`Unknown LossOrMetricFn ${e}`),"string"==typeof e)return e;{let t;for(const n of Object.keys(h_))if(h_[n]===e){t=n;break}if(void 0!==t)return t;for(const n of Object.keys(k_))if(k_[n]===e){t=n;break}return void 0!==t?t:e.name}}const S_=1048576;function $_(e,t,n=!1){if(null==e||"object"!=typeof e||Object.getPrototypeOf(e)!==Object.prototype||!T_(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const n=JSON.stringify(e);n.length>S_&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${n.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}function T_(e){if(null===e)return!0;if("object"==typeof e){if(Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);for(const n of t){if("string"!=typeof n)return!1;if(!T_(e[n]))return!1}return!0}if(Array.isArray(e)){for(const t of e)if(!T_(t))return!1;return!0}return!1}{const t=typeof e;return"string"===t||"number"===t||"boolean"===t}}function I_(e,t,n,a=console.log){const r=function(e){let t=!0;const n=[],a=[];for(const t in e.nodesByDepth)n.push(e.nodesByDepth[t]);for(const e of n){if(e.length>1||1===e.length&&e[0].inboundLayers.length>1){t=!1;break}a.push(...e)}if(t)for(const n of e.layers){let e=!1;for(const r of n.inboundNodes)if(-1!==a.indexOf(r)){if(e){t=!1;break}e=!0}if(!t)break}return t}(e),o=["Layer (type)","Output shape","Param #"];let s;if(r?(t=t||65,n=n||[.45,.85,1]):(t=t||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map((e=>Math.floor(t*e)))),!r){o.push("Receives inputs"),s=[];for(const t in e.nodesByDepth)s.push(...e.nodesByDepth[t])}a("_".repeat(t)),N_(o,n,a),a("=".repeat(t));const i=e.layers;for(let e=0;e<i.length;++e)r?O_(i[e],n,a):R_(i[e],n,s,a),a((e===i.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();const l=function(e){let t;t=null!=e.collectedTrainableWeights?AF(e.collectedTrainableWeights):AF(e.trainableWeights);return t}(e),u=AF(e.nonTrainableWeights);a(`Total params: ${l+u}`),a(`Trainable params: ${l}`),a(`Non-trainable params: ${u}`),a("_".repeat(t))}function N_(e,t,n=console.log){let a="";for(let n=0;n<e.length;++n)n>0&&(a=a.slice(0,a.length-1)+" "),a+=e[n],a=a.slice(0,t[n]),a+=" ".repeat(t[n]-a.length);n(a)}function O_(e,t,n){let a;try{a=JSON.stringify(e.outputShape)}catch(e){a="multiple"}N_([`${e.name} (${e.getClassName()})`,a,e.countParams().toString()],t,n)}function R_(e,t,n,a){let r;try{r=JSON.stringify(e.outputShape)}catch(e){r="multiple"}const o=[];for(const t of e.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(t)))for(let e=0;e<t.inboundLayers.length;++e){const n=t.inboundLayers[e].name,a=t.nodeIndices[e],r=t.tensorIndices[e];o.push(`${n}[${a}][${r}]`)}const s=e.name,i=e.getClassName(),l=0===o.length?"":o[0];N_([`${s} (${i})`,r,e.countParams().toString(),l],t,a);for(let e=1;e<o.length;++e)N_(["","","",o[e]],t,a)}function A_(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"==typeof n}function M_(e,t){if(null===e)return null;if("string"==typeof e)return ZP(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){const n=[],a=e.length;for(let r=0;r<a;++r){const a=e[r];A_(t,r,a)?n.push(a):n.push(M_(a,t))}return n}{const t={};for(const n of Object.keys(e)){const a=e[n];if("name"===n&&"string"==typeof a)t[n]=a;else{const e=ZP(n);t[e]=M_(a,e)}}return t}}function B_(e,t){if(null==e)return null;if("string"==typeof e)return JP(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){const n=[],a=e.length;for(let r=0;r<a;++r){const a=e[r];A_(t,r,a)?n.push(a):n.push(B_(a,t))}return n}{const t={};for(const n of Object.keys(e)){const a=e[n],r=JP(n);t[r]="name"!==n&&"className"!==n||"string"!=typeof a?B_(a,n):a}return t}}class P_{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof P_)for(const t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(null==e)return;for(const t of e)this.add(t.key,t.value)}}add(e,t,n){if(null!=this.id2Value[e.id])throw new HP(`Duplicate key: name=${e.name}, id=${e.id}`);return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return FT(t,e.dtype)}catch(n){throw new HP(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${e.name}' (${e.dtype}).`)}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof _F){if(null==this.id2Value[e.id])throw new HP(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}{const t=this.name2Id[e];if(null==t)throw new HP(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[t]}}getMask(e){if(e instanceof _F){if(null==this.id2Value[e.id])throw new HP(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}{const t=this.name2Id[e];if(null==t)throw new HP(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&kI(this.id2Mask)}}const D_={},F_={};function __(e,t,n,a){const r=null!=n&&n.training,o=Array.isArray(e),s=o?e:[e],i=s.map((e=>e.name)),l=[],u=t.names();for(const e of i)-1!==u.indexOf(e)?l.push(t.getValue(e)):l.push(null);null!=a&&(a.maxNumTensors=-1/0,a.minNumTensors=1/0);const c=i.join(",")+"|"+t.names().join(",");let p,d;if(null==D_[c]){const e=function(e,t){Vx(null!=e&&e.length>0,(()=>"Expected at least one fetch, got none"));let n=[],a={};if(1===e.length){const r=z_(e[0],t);n=r.sorted,a=r.recipientMap}else{const r=new Set;for(const o of e){const{sorted:e,recipientMap:s}=z_(o,t);for(const t of e)r.has(t.name)||(n.push(t),r.add(t.name));for(const e in s)null==a[e]&&(a[e]=new Set),s[e].forEach((t=>a[e].add(t)))}}return{sorted:n,recipientCounts:L_(a)}}(s,t);p=e.sorted,d=e.recipientCounts,D_[c]=p,F_[c]=d}p=D_[c],d={},r||Object.assign(d,F_[c]);const h=new P_(t);for(let e=0;e<p.length;++e){if(null!=a){const e=wI().numTensors;e>a.maxNumTensors&&(a.maxNumTensors=e),e<a.minNumTensors&&(a.minNumTensors=e)}const o=p[e],s=o.sourceLayer;if(s instanceof jF)continue;const u=[],c=[],f=[];let m=!1;for(const e of o.inputs){const n=h.getValue(e),a=h.getMask(e);u.push(n),c.push(a),null!=a&&(m=!0),r||(d[e.name]--,0!==d[e.name]||t.hasKey(e)||-1!==i.indexOf(e.name)||n.isDisposed||!0===e.sourceLayer.stateful||f.push(n))}m&&((n=n||{}).mask=c[0]);const g=KP(s.apply(u,n));let v=null;s.supportsMasking&&(v=s.computeMask(u,c));const b=V_(o),y=Array.isArray(b)?b:[b];for(let e=0;e<y.length;++e){h.hasKey(y[e])||h.add(y[e],g[e],Array.isArray(v)?v[0]:v);const t=i.indexOf(y[e].name);-1!==t&&(l[t]=g[e])}r||kI(f)}return h.disposeMasks(),o?l:l[0]}function L_(e){const t={};for(const n in e)t[n]=e[n].size;return t}function z_(e,t){const n=new Set,a=[],r={};for(const e of t.names())n.add(e);const o=[],s=[];for(o.push(e);o.length>0;){const e=o[o.length-1];if(n.has(e.name)){o.pop();continue}const t=s[s.length-1]===o.length-1;if(0===e.inputs.length||t)o.pop(),a.push(e),n.add(e.name),t&&s.pop();else{s.push(o.length-1);for(const t of e.inputs)null==r[t.name]&&(r[t.name]=new Set),r[t.name].add(e.name),n.has(t.name)||o.push(t)}}return{sorted:a,recipientMap:r}}function V_(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(const a of e.sourceLayer.inboundNodes[t].outputTensors)if(a.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}class W_ extends WF{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,null==this.name){const e=this.getClassName().toLowerCase();this.name=TF(e)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],rD(this.inputs).length!==this.inputs.length)throw new HP(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map((e=>e.name))}`);rD(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map((e=>e.name))}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const e of this.outputs){const t=e.sourceLayer,n=e.nodeIndex,a=e.tensorIndex;this.outputLayers.push(t),this.outputLayersNodeIndices.push(n),this.outputLayersTensorIndices.push(a)}for(const e of this.inputs){const t=e.sourceLayer,n=e.nodeIndex,a=e.tensorIndex;qP(0===n,"input layer has >1 nodes"),qP(0===a,"input layer has >1 tensors"),this.inputLayers.push(t),this.inputLayersNodeIndices.push(n),this.inputLayersTensorIndices.push(a)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let t=0;t<this.inputLayers.length;t++){const n=this.inputLayers[t];if(!(n instanceof jF))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${t} (0-based) originates from layer type ${n.getClassName()}.`);this.inputNames.push(n.name),this.feedInputShapes.push(n.batchInputShape),this.feedInputNames.push(n.name)}for(const e of this.outputLayers)this.outputNames.push(e.name);this.internalInputShapes=this.inputs.map((e=>e.shape)),this.internalOutputShapes=this.outputs.map((e=>e.shape));const t={},n={},a={},r={},o={},s=[],i=(e,t,n,a,r,l)=>{null!=a&&null!=r&&null!=l||(a=e.sourceLayer,r=e.nodeIndex,l=e.tensorIndex);const u=a.inboundNodes[r];if(-1!==n.indexOf(u))throw new WP(`The tensor ${e.name} at layer "${a.name}" is part of a cycle.`);if(-1!==t.indexOf(u))return;this.containerNodes.add(W_.nodeKey(a,r)),a.id in o||(o[a.id]=Object.keys(o).length),-1===n.indexOf(u)&&n.push(u);const c=u.inboundLayers.length;for(let e=0;e<c;e++){const a=u.inputTensors[e],r=u.inboundLayers[e],o=u.nodeIndices[e],s=u.tensorIndices[e];i(a,t,n,r,o,s)}for(t.push(u);n.indexOf(u)>=0;)n.splice(n.indexOf(u),1);s.push(u)},l=[],u=[];for(const e of this.outputs)i(e,l,u);const c=s.slice().reverse();for(const e of c){n[e.id]=e,e.id in t||(t[e.id]=0);let o=t[e.id];const s=null==a[e.outboundLayer.id]?0:a[e.outboundLayer.id];o=Math.max(o,s),a[e.outboundLayer.id]=o,r[e.outboundLayer.id]=e.outboundLayer,t[e.id]=o;for(let a=0;a<e.inboundLayers.length;a++){const r=e.inboundLayers[a],s=e.nodeIndices[a],i=r.inboundNodes[s],l=null==t[i.id]?0:t[i.id];t[i.id]=Math.max(o+1,l),n[i.id]=i}}const p={};for(const e in t){const a=t[e];a in p||(p[a]=[]),p[a].push(n[e])}const d={};for(const e in a){const t=a[e];t in d||(d[t]=[]),d[t].push(r[e])}let h=Object.keys(d).map((e=>parseInt(e,10))).sort(aD);this.layers=[];for(const e of h){const t=d[e];t.sort(((e,t)=>{const n=o[e.id],a=o[t.id];return n<a?-1:n>a?1:0}));for(const e of t)e instanceof W_&&this.internalContainerRefs.push(e),this.layers.push(e)}this.layersByDepth=d,h=Object.keys(p).map((e=>parseInt(e,10))).sort(aD);const f=this.inputs.slice(),m=[];for(const e of h)for(const t of p[e]){const e=t.outboundLayer;if(null!=e){for(const n of t.inputTensors)if(-1===f.indexOf(n))throw new WP(`Graph disconnected: cannot obtain value for tensor ${n} at layer "${e.name}". The following previous layers were accessed without issue: ${m}`);for(const e of t.outputTensors)f.push(e);m.push(e.name)}}this.nodesByDepth=p;const g=this.layers.map((e=>e.name));for(const e of g){const t=g.filter((t=>t===e)).length;if(1!==t)throw new WP(`The name "${e}" is used ${t} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new zF({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map((e=>null)),outputMasks:this.outputs.map((e=>null)),inputShapes:this.inputs.map((e=>e.shape)),outputShapes:this.outputs.map((e=>e.shape))}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount){for(const t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(const t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach((t=>{t._trainableWeights.forEach((t=>t.trainable=e))})),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new HP("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.layers)t.push(...e.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,t=!0){const n={};let a=0;for(const e of this.layers)for(const t of e.weights){if(null!=n[t.originalName])throw new HP(`Duplicate weight name: ${t.originalName}`);n[t.originalName]=t,a++}const r=[];for(const a in e){let o=a;if(null==n[a]){const e=a.split("/");o=e.slice(0,-2).concat([e[e.length-1]]).join("/")}if(null!=n[o])r.push([n[o],e[a]]);else if(t)throw new HP(`Provided weight data has no target variable: ${a}`);delete n[o]}if(t){const e=[];for(const t in n)e.push(t);if(e.length>0)throw new HP(`${e.length} of ${a} weights are not set: ${e}`)}DF(r)}updatedConfig(){const e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers 3.12.0",t.backend="TensorFlow.js",t}toJSON(e,t=!0){const n=B_(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return xI((()=>{e=KP(e);const n=new P_;for(let t=0;t<this.inputs.length;++t)n.add(this.inputs[t],e[t]);return __(this.outputs,n,t)}))}computeMask(e,t){return xI((()=>{let n;return e=KP(e),n=null==t?GP(null,e.length):KP(t),this.runInternalGraph(e,n)[1]}))}computeOutputShape(e){const t=NF(e);if(t.length!==this.inputLayers.length)throw new HP(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const n={};for(let e=0;e<t.length;e++){const a=this.inputLayers[e],r=t[e];n[a.name+"_0_0"]=r}const a=Object.keys(this.nodesByDepth).map((e=>parseInt(e,10))).sort(aD);if(a.length>1)for(const e of a){const t=this.nodesByDepth[e];for(const e of t){const t=e.outboundLayer;if(-1!==this.inputLayers.map((e=>e.id)).indexOf(t.id))continue;const a=[];for(let t=0;t<e.inboundLayers.length;t++){const r=e.inboundLayers[t],o=e.nodeIndices[t],s=e.tensorIndices[t],i=n[`${r.name}_${o}_${s}`];a.push(i)}const r=NF(t.computeOutputShape(YP(a))),o=t.inboundNodes.indexOf(e);for(let e=0;e<r.length;e++){n[`${t.name}_${o}_${e}`]=r[e]}}}const r=[],o=[];for(let e=0;e<this.outputLayers.length;e++){const t=this.outputLayers[e],n=this.outputLayersNodeIndices[e],a=this.outputLayersTensorIndices[e],r=`${t.name}_${n}_${a}`;o.push(r)}for(let e=0;e<o.length;e++){const t=o[e];qP(t in n),r.push(n[t])}return YP(r)}runInternalGraph(e,t){null==t&&(t=GP(null,e.length));const n={};for(let a=0;a<this.inputs.length;++a){const r=this.inputs[a],o=e[a],s=t[a];n[r.id]=[o,s]}const a=Object.keys(this.nodesByDepth).map((e=>parseInt(e,10))).sort(aD);for(const e of a){const t=this.nodesByDepth[e];for(const e of t){const t=e.outboundLayer,a=e.inputTensors,r=e.outputTensors,o=new Array;for(const e of a)e.id in n&&o.push(n[e.id]);if(o.length===a.length){let a,s,i,l,u={};if(null!=e.callArgs&&(u=e.callArgs),1===o.length){const[e,n]=o[0];null==u.mask&&(u.mask=n),i=KP(t.call(e,u)),l=KP(t.computeMask(e,n)),a=[e],s=[n]}else a=o.map((e=>e[0])),s=o.map((e=>e[1])),null==u.mask&&(u.mask=s),i=KP(t.call(a,u)),l=KP(t.computeMask(a,s));if(t.activityRegularizer)throw new jP("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let e=0;e<r.length;++e){const t=r[e],a=i[e],o=l[e];n[t.id]=[a,o]}}}}const r=[],o=[],s=[];for(const e of this.outputs){qP(e.id in n,`Could not compute output ${e.name} : ${e.id}`);const[t,a]=n[e.id];s.push(t.shape),r.push(t),o.push(a)}return[r,o,s]}buildNodeConversionMap(e){const t={};let n;for(const e of this.layers){n=e instanceof W_?1:0;for(let a=0;a<e.inboundNodes.length;a++){const r=W_.nodeKey(e,a);this.containerNodes.has(r)&&(t[r]=n,n+=1)}}return t}getLayer(e,t){if(null!=t){if(this.layers.length<=t)throw new HP(`Was asked to retrieve layer at index ${t}, but model only has ${this.layers.length} layer(s).`);return this.layers[t]}if(null==e)throw new HP("Provide either a layer name or layer index");for(const t of this.layers)if(t.name===e)return t;throw new HP(`No such layer: ${e}`)}calculateLosses(){return xI((()=>{const e=[];for(const t of this.layers)for(let n=0;n<t.inboundNodes.length;++n){const a=W_.nodeKey(t,n);this.containerNodes.has(a)&&e.push(...t.calculateLosses())}return e}))}getConfig(){const e={name:this.name},t=this.buildNodeConversionMap(this.layers),n=[];for(const e of this.layers){const a=e.getClassName(),r=e.getConfig(),o=[];for(let n=0;n<e.inboundNodes.length;n++){const a=e.inboundNodes[n],r=W_.nodeKey(e,n);let s={};if(this.containerNodes.has(r)){if(a.callArgs)try{JSON.stringify(a.callArgs),s=a.callArgs}catch(t){console.warn(`Layer ${e.name} was passed non-serializable keyword arguments: ${a.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),s={}}if(a.inboundLayers.length>0){const e=[];for(let n=0;n<a.inboundLayers.length;n++){const r=a.inboundLayers[n],o=a.nodeIndices[n],i=a.tensorIndices[n];let l=t[W_.nodeKey(r,o)];null==l&&(l=0),e.push([r.name,l,i,s])}o.push(e)}}}const s={};s.name=e.name,s.className=a,s.config=r,s.inboundNodes=o,n.push(s)}e.layers=n;const a=[];for(let e=0;e<this.inputLayers.length;e++){const n=this.inputLayers[e],r=this.inputLayersNodeIndices[e],o=W_.nodeKey(n,r);if(!this.containerNodes.has(o))continue;let s=t[o];null==s&&(s=0);const i=this.inputLayersTensorIndices[e];a.push([n.name,s,i])}e.inputLayers=a;const r=[];for(let e=0;e<this.outputLayers.length;e++){const n=this.outputLayers[e],a=this.outputLayersNodeIndices[e],o=W_.nodeKey(n,a);if(!this.containerNodes.has(o))continue;let s=t[o];null==s&&(s=0);const i=this.outputLayersTensorIndices[e];r.push([n.name,s,i])}return e.outputLayers=r,e}static fromConfig(e,t,n={},a=!1){const r={},o={};function s(e,t){e.name in o?o[e.name].push(t):o[e.name]=[t]}function i(e,t){const n=[];let a;for(const o of t){const i=o[0],l=o[1],u=o[2];if(a=null==o[3]?{}:o[3],!(i in r))return void s(e,t);const c=r[i];if(c.inboundNodes.length<=l)return void s(e,t);const p=c.inboundNodes[l];n.push(p.outputTensors[u])}n.length>0&&e.apply(YP(n),a)}function l(e){const n=e.name,o=n_(e,null!=t.customObjects?t.customObjects:{});o.setFastWeightInitDuringBuild(a),r[n]=o;e.inboundNodes.forEach((e=>{if(!(e instanceof Array))throw new HP(`Corrupted configuration, expected array for nodeData: ${e}`);s(o,e)}))}const u=t.name,c=t.layers;for(const e of c)l(e);for(;!oD(o);)for(const e of c){const t=r[e.name];if(t.name in o){const e=o[t.name];delete o[t.name];for(const n of e)i(t,n)}}const p=[],d=[],h=t.inputLayers;for(const e of h){const t=e[0],n=e[1],a=e[2];qP(t in r);const o=r[t].inboundNodes[n].outputTensors;p.push(o[a])}const f=t.outputLayers;for(const e of f){const t=e[0],n=e[1],a=e[2];qP(t in r);const o=r[t].inboundNodes[n].outputTensors;d.push(o[a])}return new e({inputs:p,outputs:d,name:u})}get stateful(){if(this._stateful)throw new HP("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){xI((()=>{this.layers.forEach((e=>{e.stateful&&e.resetStates()}))}))}}function H_(e,t,n){const a=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((e=>null));if(1===a)return Array.isArray(e)&&1===e.length?e:"object"==typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==a)throw new Error(`Provided ${n} is an array of ${e.length} element(s), but the model has ${a} outputs. Make sure a set of weights is provided for each model output.`);return e}if("object"==typeof e&&Object.keys(e).length>0&&"object"==typeof e[Object.keys(e)[0]]){const n=[];return t.forEach((t=>{t in e?n.push(e[t]):n.push(null)})),n}throw new Error(`The model has multiple (${a}) outputs, so ${n} must be either an array with ${a} elements or an object with ${t} keys. Provided ${n} not understood: ${JSON.stringify(e)}`)}function j_(e,t){return H_(e,t,"classWeight")}async function U_(e,t,n,a){if(null!=t||null!=a)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){const t=xI((()=>{if(1===e.shape.length)return _T(e);if(2===e.shape.length){if(e.shape[1]>1){return AI(e,1)}if(1===e.shape[1])return qI(e,[e.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${e.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}throw new Error(`Unexpected rank of target (y) tensor (${e.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)})),a=Array.from(await t.data());kI(t);const r=[];return a.forEach((e=>{if(null==n[e])throw new Error(`classWeight must contain all classes in the training data. The class ${e} exists in the data but not in classWeight`);r.push(n[e])})),IO(r,"float32")}return null}function G_(e,t){return RN(e,t)}function q_(e,t){let n,a;const r=t;n=r.xs,a=r.ys,Vx(null!=n&&null!=a,(()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${t}`));const o=X_("input",e.inputNames,n),s=X_("output",e.outputNames,a),i=o[0].shape[0];Vx(o.length===e.inputs.length,(()=>`LayersModel has ${e.inputs.length} inputs, but the dataset provides ${o.length} inputs.  (Expected input keys: ${JSON.stringify(e.inputNames)})`)),Vx(s.length===e.outputs.length,(()=>`LayersModel has ${e.outputs.length} outputs, but the dataset provides ${s.length} outputs.  (Expected output keys: ${JSON.stringify(e.outputNames)})`));for(let t=0;t<o.length;t++)Vx(o[t].shape[0]===i,(()=>`Batch size mismatch: input ${e.inputNames[t]} has ${o[t].shape[0]}; expected  ${i} based on input ${e.inputNames[0]}.`));for(let t=0;t<s.length;t++)Vx(s[t].shape[0]===i,(()=>`Batch size mismatch: output ${e.outputNames[t]} has ${s[t].shape[0]}; expected  ${i} based on input ${e.inputNames[0]}.`));return{xs:o,ys:s}}function X_(e,t,n){if(n instanceof v$)return[n];if(Array.isArray(n))return Vx(n.length===t.length,(()=>`Received an array of ${n.length} Tensors, but expected ${t.length} to match the ${e} keys ${t}.`)),n;{const a=[];for(const r of t){if(null==n[r])throw new HP(`The feature data generated by the dataset lacks the required ${e} key '${r}'.`);a.push(n[r])}return a}}async function Y_(e,t,n){const a=null!=n.batchesPerEpoch;if(Vx(null!=e.optimizer,(()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig).")),Vx(null!=n,(()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call.")),Vx(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),(()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`)),Vx(!a||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),(()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`)),Vx(null==n.validationSplit,(()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead.")),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{const r=null!=n.validationData;let o,s;if(r)if(K_(n.validationData))Vx(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),(()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`));else{const e=function(e){if(3===e.length)throw new jP("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(n.validationData);o=e.xs,s=e.ys}const i=e.makeTrainFunction(),l=e.getDedupedMetricsNames();let u;u=r?l.slice().concat(l.map((e=>"val_"+e))):l.slice();const c=QF(n.callbacks,n.yieldEvery),p=null==n.verbose?1:n.verbose,{callbackList:d,history:h}=t_(c,p,n.epochs,null,null,function(e,t){let n=null;null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size);return n}(t,n),null,r,u);d.setModel(e),e.history=h,await d.onTrainBegin(),e.stopTraining_=!1;let f=null==n.initialEpoch?0:n.initialEpoch,m=await t.iterator();for(;f<n.epochs;){const u={};await d.onEpochBegin(f);let c=0,p=0;for(a||(m=await t.iterator());!a||c<n.batchesPerEpoch;){const t=await m.next();if(a&&t.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${c} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, `+n.batchesPerEpoch*n.epochs+" batches). You may need to use the repeat() function when building your dataset.");break}if(null!=t.value){const{xs:a,ys:r}=q_(e,t.value),o={};o.batch=p,o.size=a[0].shape[0],await d.onBatchBegin(p,o);const s=[];if(null!=n.classWeight){const t=j_(n.classWeight,e.outputNames);for(let e=0;e<t.length;++e)s.push(await U_(r[e],null,t[e]))}const u=a.concat(r).concat(s),h=i(u);kI(u);for(let e=0;e<l.length;++e){const t=l[e],n=h[e];o[t]=n,CI(n)}await d.onBatchEnd(p,o),GF(o),p++,c++}if(a?c>=n.batchesPerEpoch:t.done){if(r){let t;t=K_(n.validationData)?KP(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):KP(e.evaluate(o,s,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<e.metricsNames.length;++n)u[`val_${e.metricsNames[n]}`]=t[n]}break}if(e.stopTraining_)break}if(await d.onEpochEnd(f,u),f++,e.stopTraining_)break}return await d.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function K_(e){return"function"==typeof e.iterator}function J_(e){Vx(e>0&&Number.isInteger(e),(()=>`batchSize is required to be a positive integer, but got ${e}`))}function Z_(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((e=>WD(e,t,n-t))):WD(e,t,n-t)}function Q_(e,t){return xI((()=>null==e?null:Array.isArray(e)?e.map((e=>Q_(e,t))):KD(e,"int32"===t.dtype?t:FT(t,"int32"))))}function eL(e,t){const n=[];let a=0,r=null;for(;a<e;)r=a+t,r>=e&&(r=e),n.push([a,r]),a=r;return n}async function tL(e,t,n,a={}){if(e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");let r,o,s,i,l,u,c;e.isTraining=!0;try{const p=null==a.batchSize?32:a.batchSize;J_(p);const d=!1,h=await e.standardizeUserData(t,n,a.sampleWeight,a.classWeight,d,p);r=h[0],o=h[1],c=h[2];let f,m=!1;if(null!=a.validationData&&a.validationData.length>0){if(m=!0,2!==a.validationData.length)throw 3===a.validationData.length?new jP("validationData including sample weights is not supported yet."):new HP(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${a.validationData} is invalid.`);s=a.validationData[0],i=a.validationData[1];const t=!0,n=await e.standardizeUserData(s,i,null,null,t,p);l=n[0],u=n[1],f=l.concat(u)}else if(null!=a.validationSplit&&a.validationSplit>0&&a.validationSplit<1){m=!0;const e=Math.floor(r[0].shape[0]*(1-a.validationSplit)),t=r[0].shape[0];l=Z_(r,e,t),r=Z_(r,0,e),u=Z_(o,e,t),o=Z_(o,0,e),f=l.concat(u)}else null!=a.validationSteps&&(m=!0);const g=r.concat(o).concat(c);e.checkTrainableWeightsConsistency();const v=e.makeTrainFunction(),b=e.getDedupedMetricsNames();let y,w;m?(e.makeTestFunction(),y=e.testFunction,w=b.slice().concat(b.map((e=>"val_"+e)))):(y=null,f=[],w=b.slice());const x=QF(a.callbacks,a.yieldEvery),k=await async function(e,t,n,a,r,o,s,i,l,u,c,p,d,h,f){null==r&&(r=32),null==o&&(o=1),null==c&&(c=!0),null==d&&(d=0);let m=!1;if(null!=l&&null!=u&&(m=!0),null!=f&&(m=!0,null==h))throw new HP("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const g=e.checkNumSamples(n,r,h,"steps_per_epoch");let v;null!=g&&(v=LD(0,g)),null==s&&(s=1);const{callbackList:b,history:y}=t_(i,s,o,d,g,h,r,m,p);b.setModel(e),e.history=y,await b.onTrainBegin(),e.stopTraining_=!1;for(let s=d;s<o;++s){await b.onEpochBegin(s);const o={};if(null!=h)throw new jP("stepsPerEpoch mode is not implemented yet.");{if("batch"===c)throw new jP("batch shuffling is not implemneted yet");c&&Fx(v);const s=IO(v),i=eL(g,r);for(let c=0;c<i.length;++c){const p={};if(await b.onBatchBegin(c,p),xI((()=>{const d=i[c][0],h=i[c][1],f=WD(s,d,h-d);p.batch=c,p.size=h-d;const g=Q_(n,f),v=t(g);for(let e=0;e<a.length;++e){const t=a[e],n=v[e];p[t]=n,CI(n)}if(c===i.length-1&&m){const t=e.testLoop(l,u,r);for(let e=0;e<a.length;++e){const n=a[e],r=t[e];CI(r),o["val_"+n]=r}}})),await b.onBatchEnd(c,p),GF(p),e.stopTraining_)break}s.dispose()}if(await b.onEpochEnd(s,o),e.stopTraining_)break}return await b.onTrainEnd(),await e.history.syncData(),e.history}(e,v,g,b,p,a.epochs,a.verbose,x,y,f,a.shuffle,w,a.initialEpoch,null,null);return k}finally{e.isTraining=!1,aL(r,t),aL(o,n),aL(l,s),aL(u,i),null!=c&&kI(c)}}function nL(e){const t=[];e instanceof v$&&(e=[e]);for(let n=0;n<e.length;++n){const a=e[n];if(1===a.rank)t.push(VD(a,1));else{if(0===a.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(a)}}return t}function aL(e,t){if(null==e)return;const n=[];if(t instanceof v$)n.push(t.id);else if(Array.isArray(t))t.forEach((e=>n.push(e.id)));else if(null!=t)for(const e in t){const a=t[e];n.push(a.id)}const a=[];if(e instanceof v$)-1===n.indexOf(e.id)&&a.push(e);else if(Array.isArray(e))e.forEach((e=>{-1===n.indexOf(e.id)&&a.push(e)}));else if(null!=e)for(const t in e){const r=e[t];-1===n.indexOf(r.id)&&a.push(r)}a.forEach((e=>{e.isDisposed||e.dispose()}))}function rL(e){return Array.isArray(e)}function oL(e){return!function(e){return e instanceof v$}(e)&&!rL(e)}function sL(e,t,n,a=!0,r=""){if(null==t||0===t.length){if(null!=e){let t=!1;if(rL(e)&&e.length>0)t=!0;else if(oL(e)){for(const n in e)if(e.hasOwnProperty(n)){t=!0;break}}else t=!0;if(t)throw new HP(`Error when checking model ${r} expected no data, but got ${e}`)}return[]}if(null==e)return t.map((e=>null));let o;if(oL(e)){e=e,o=[];for(const n of t){if(null==e[n])throw new HP(`No data provided for "${n}". Need data for each key in: ${t}`);o.push(e[n])}}else if(rL(e)){if((e=e).length!==t.length)throw new HP(`Error when checking model ${r}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${t.length} Tensor(s), but instead got the following list of Tensor(s): ${e}`);o=e}else{if(e=e,t.length>1)throw new HP(`The model ${r} expects ${t.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${e.shape}`);o=[e]}if(o=nL(o),null!=n)for(let e=0;e<t.length;++e){if(null==n[e])continue;const s=o[e];if(s.shape.length!==n[e].length)throw new HP(`Error when checking ${r}: expected ${t[e]} to have ${n[e].length} dimension(s). but got array with shape ${s.shape}`);for(let t=0;t<n[e].length;++t){if(0===t&&!a)continue;const o=s.shape[t],i=n[e][t];if(null!=i&&i>=0&&o!==i)throw new HP(`${r} expected a batch of elements where each example has shape [${n[e].slice(1,n[e].length)}] (i.e.,tensor shape [*,${n[e].slice(1,n[e].length)}]) but the ${r} received an input with ${s.shape[0]} examples, each with shape [${s.shape.slice(1,s.shape.length)}] (tensor shape [${s.shape}])`)}}return o}function iL(e,t,n,a=!0,r=""){let o;if(Array.isArray(e)){if(e.length!==t.length)throw new HP(`Error when checking model ${r}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${t.length} Tensor(s), but instead got ${e.length} Tensors(s).`);o=e}else{if(t.length>1)throw new HP(`The model expects ${t.length} ${r} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(e.shape)}.`);o=[e]}if(null!=n)for(let e=0;e<t.length;++e){if(null==n[e])continue;const s=o[e];if(s.shape.length!==n[e].length)throw new HP(`Error when checking ${r}: expected ${t[e]} to have ${n[e].length} dimension(s), but got array with shape ${JSON.stringify(s.shape)}`);for(let o=0;o<n[e].length;++o){if(0===o&&!a)continue;const i=s.shape[o],l=n[e][o];if(null!=l&&l!==i)throw new HP(`Error when checking ${r}: expected ${t[e]} to have shape ${JSON.stringify(n[e])} but got array with shape ${JSON.stringify(s.shape)}.`)}}}class lL extends W_{constructor(e){super(e),this.isTraining=!1}summary(e,t,n=console.log){if(!this.built)throw new HP("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");I_(this,e,t,n)}compile(e){if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"==typeof e.optimizer)this.optimizer_=function(e){const t={Adagrad:()=>QR.adagrad(.01),Adadelta:()=>QR.adadelta(1,.95,zP()),Adam:()=>QR.adam(.001,.9,.999,zP()),Adamax:()=>QR.adamax(.002,.9,.999,zP(),0),RMSProp:()=>QR.rmsprop(.001,.9,0,zP()),SGD:()=>QR.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new HP(`Unknown Optimizer ${e}`)}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof TI))throw new HP("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(Array.isArray(e.loss)||"string"==typeof e.loss||"function"==typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new HP(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);const n=e.loss;t=n.map((e=>f_(e)))}else{const n=f_(e.loss);this.outputs.forEach((e=>{t.push(n)}))}else{e.loss=e.loss;for(const t in e.loss)if(-1===this.outputNames.indexOf(t))throw new HP(`Unknown entry in loss dictionary: "${t}". Only expected the following keys: ${this.outputNames}`);for(const n of this.outputNames)null==e.loss[n]&&console.warn(`Output "${n}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${n} during training`),t.push(f_(e.loss[n]))}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let e=0;e<this.outputs.length;++e){const t=this.internalOutputShapes[e],n=this.outputNames[e];this.feedOutputNames.push(n),this.feedOutputShapes.push(t),this.feedLossFns.push(this.lossFunctions[e])}const n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],RD("loss",(()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;const t=this.lossFunctions[e];this.outputs.length>1&&(this.metricsTensors.push([t,e]),this.metricsNames.push(this.outputNames[e]+"_loss"))}}));const a=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((e=>[]));let n;if("string"==typeof e||"function"==typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!=typeof e)throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${e}`);n=e}if(Array.isArray(n))return t.map((e=>n));{const e=[];for(const a of t){let t=n.hasOwnProperty(a)?n[a]:[];Array.isArray(t)||(t=[t]),e.push(t)}return e}}(e.metrics,this.outputNames),r=(e,t,n)=>{this.outputNames.length>1&&(t=this.outputNames[e]+"_"+t),this.metricsNames.push(t),this.metricsTensors.push([n,e])};RD("metric",(()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;(t=>{let n,a,o;for(const s of t){if("string"==typeof s&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(s)){const t=this.internalOutputShapes[e];let r;1===t[t.length-1]||this.lossFunctions[e]===c_?-1!==["accuracy","acc"].indexOf(s)?a=m_:-1!==["crossentropy","ce"].indexOf(s)&&(a=b_):this.lossFunctions[e]===u_?-1!==["accuracy","acc"].indexOf(s)?a=y_:-1!==["crossentropy","ce"].indexOf(s)&&(a=x_):-1!==["accuracy","acc"].indexOf(s)?a=g_:-1!==["crossentropy","ce"].indexOf(s)&&(a=w_),-1!==["accuracy","acc"].indexOf(s)?r="acc":-1!==["crossentropy","ce"].indexOf(s)&&(r="ce"),o=a,n=""+r}else{const e=C_(s);o=e,n=""+E_(s)}let t;RD(n,(()=>{t=o})),r(e,n,t)}})(a[e])}})),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t,n={}){const a=null==n.batchSize?32:n.batchSize;J_(a);const r=this.standardizeUserDataXY(e,t,!0,a);try{const o=r[0].concat(r[1]);this.makeTestFunction();const s=this.testFunction;return YP(this.testLoop(s,o,a,n.verbose,n.steps))}finally{aL(r[0],e),aL(r[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),async function(e,t,n){const a=null!=(n=n||{}).batches,r=e.testFunction;let o=[];if(n.verbose>0)throw new jP("Verbose mode is not implemented yet.");Vx(!a||n.batches>0&&Number.isInteger(n.batches),(()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`));const s="function"==typeof t.next?t:await t.iterator();let i=0,l=0;for(;!a||l<n.batches;){const t=await s.next();if(o=xI((()=>{if(t.value){const{xs:n,ys:a}=q_(e,t.value),s=n.concat(a),u=xI((()=>r(s)));if(kI(s),0===l)for(let e=0;e<u.length;++e)o.push($I(0));const c=s[0].shape[0];for(let e=0;e<u.length;++e){const t=u[e],n=o[e];o[e]=xI((()=>NI(o[e],RN(c,t)))),l>0&&kI(n)}kI(u),i+=c,++l}return o})),t.done){a&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let e=0;e<o.length;++e){const t=o[e];o[e]=mN(o[e],i),kI(t)}return YP(o)}(this,e,t)}checkNumSamples(e,t,n,a="steps"){let r;if(null!=n){if(r=null,null!=t)throw new HP(`If ${a} is set, batchSize must be null or undefined.Got batchSize = ${t}`)}else{if(null==e)throw new HP(`Either the input data should have a defined shape, or ${a} shoud be specified.`);r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}execute(e,t){if(Array.isArray(t)&&0===t.length)throw new HP("`outputs` is an empty Array, which is not allowed.");const n=Array.isArray(t),a=n?t:[t],r=this.retrieveSymbolicTensors(a),o=new P_;if(e instanceof v$&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new HP(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let t=0;t<this.inputs.length;++t)o.add(this.inputs[t],e[t])}else for(const t of this.inputs){const n=e[t.name];if(null==n)throw new HP(`No value is provided for the model's input ${t.name}`);o.add(t,n)}const s=__(r,o);return n?s:s[0]}retrieveSymbolicTensors(e){const t=GP(null,e.length);let n=e.length;for(const a of this.layers){const r=Array.isArray(a.output)?a.output:[a.output],o=r.map((e=>e.name));for(let a=0;a<e.length;++a){const s=o.indexOf(e[a]);if(-1!==s&&(t[a]=r[s],n--),0===n)break}if(0===n)break}if(n>0){const n=[];throw t.forEach(((t,a)=>{null==t&&n.push(e[a])})),new HP(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(n)}`)}return t}predictLoop(e,t=32,n=!1){return xI((()=>{const a=this.checkNumSamples(e);if(n)throw new jP("Verbose predictLoop() is not implemented yet.");const r=eL(a,t),o=this.outputs.map((e=>[]));for(let t=0;t<r.length;++t){const n=xI((()=>{const n=r[t][0],a=r[t][1],o=Z_(e,n,a),s=[];if(Array.isArray(o))for(let e=0;e<o.length;++e)s.push({key:this.inputs[e],value:o[e]});else s.push({key:this.inputs[0],value:o});const i=new P_(s);return __(this.outputs,i)}));n.forEach(((e,t)=>o[t].push(e)))}return YP(o.map((e=>tN(e,0))))}))}predict(e,t={}){const n=nL(e);iL(n,this.inputNames,this.feedInputShapes,!1);try{const a=null==t.batchSize?32:t.batchSize;return J_(a),this.predictLoop(n,a)}finally{aL(n,e)}}predictOnBatch(e){iL(e,this.inputNames,this.feedInputShapes,!0);const t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t,n=!0,a){if(null==this.optimizer_)throw new WP("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const r=[];for(let e=0;e<this.feedOutputShapes.length;++e){const t=this.feedOutputShapes[e];this.feedLossFns[e]===u_?r.push(t.slice(0,t.length-1).concat([1])):r.push(t)}if(function(e,t,n){const a=rD(e.map((e=>e.shape[0])));a.sort();const r=rD(t.map((e=>e.shape[0])));if(r.sort(),a.length>1)throw new HP(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map((e=>e.shape)))}`);if(r.length>1)throw new HP(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map((e=>e.shape)))}`);if(a.length>0&&r.length>0&&!Gx(a,r))throw new HP(`Input Tensors should have the same number of samples as target Tensors. Found ${a[0]} input sample(s) and ${r[0]} target sample(s).`)}(e=sL(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=sL(t,this.feedOutputNames,r,!1,"target")),function(e,t,n){const a=[r_,c_,l_];for(let r=0;r<e.length;++r){const o=e[r],s=t[r],i=n[r];if(null!=s){if(s===l_&&1===o.shape[o.shape.length-1])throw new HP(`You are passing a target array of shape ${o.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(-1!==a.indexOf(s)){const e=o.shape.slice(1),t=i.slice(1);for(let n=0;n<e.length;++n){const a=e[n],r=t[n];if(null!=r&&a!==r)throw new HP(`A target Tensor with shape ${o.shape} was passed for an output of shape ${i}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=a&&a>0&&e[0].shape[0]%a!=0)throw new HP(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${a}. Found: ${e[0].shape[0]} sample(s).`);return[e,t]}async standardizeUserData(e,t,n,a,r=!0,o){const[s,i]=this.standardizeUserDataXY(e,t,r,o);if(null!=n)throw new Error("sample weight is not supported yet.");let l=null;if(null!=a){const e=j_(a,this.outputNames);l=[];for(let t=0;t<e.length;++t)l.push(await U_(i[t],null,e[t]))}return[s,i,l]}testLoop(e,t,n,a=0,r){return xI((()=>{const o=this.checkNumSamples(t,n,r,"steps"),s=[];if(a>0)throw new jP("Verbose mode is not implemented yet.");if(null!=r)throw new jP("steps mode in testLoop() is not implemented yet");{const a=eL(o,n),r=IO(LD(0,o));for(let n=0;n<a.length;++n){const o=a[n][0],i=a[n][1],l=WD(r,o,i-o),u=Q_(t,l),c=e(u);if(0===n)for(let e=0;e<c.length;++e)s.push($I(0));for(let e=0;e<c.length;++e){const t=c[e];s[e]=NI(s[e],RN(i-o,t))}}for(let e=0;e<s.length;++e)s[e]=mN(s[e],o)}return s}))}getDedupedMetricsNames(){const e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){const a=e[n];let r=a;if(XP(e,a)>1){r+=`_${XP(e.slice(0,n),a)}`}t.push(r)}return t}makeTrainFunction(){return e=>{const t=[],n=e.slice(0,this.inputs.length),a=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),r=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),o=[],s=this.collectedTrainableWeights.map((e=>e.read())),i=this.optimizer_.minimize((()=>{const e=[];for(let t=0;t<this.inputs.length;++t)e.push({key:this.inputs[t],value:n[t]});const s=new P_(e),i=__(this.outputs,s,{training:!0});let l;for(let e=0;e<this.lossFunctions.length;++e){let n=(0,this.lossFunctions[e])(a[e],i[e]);null!=r[e]&&(n=G_(n,r[e]));const o=zN(n);t.push(o),l=0===e?n:NI(l,n)}for(let e=0;e<this.metricsTensors.length;++e){let n;if(this.outputs.length>1&&e<this.outputs.length)n=t[e];else{const t=this.metricsTensors[e][0],r=this.metricsTensors[e][1];n=zN(t(a[r],i[r]))}CI(n),o.push(n)}return l=zN(l),this.calculateLosses().forEach((e=>{l=NI(l,e)})),l}),!0,s);return[i].concat(o)}}makeTestFunction(){this.testFunction=e=>xI((()=>{const t=[];let n;const a=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let e=0;e<this.inputs.length;++e)o.push({key:this.inputs[e],value:a[e]});const s=new P_(o),i=__(this.outputs,s);for(let e=0;e<this.lossFunctions.length;++e){const a=this.lossFunctions[e],o=zN(a(r[e],i[e]));n=0===e?o:NI(n,o),t.push(n)}for(let e=0;e<this.metricsTensors.length;++e){const n=this.metricsTensors[e][0],a=this.metricsTensors[e][1],o=zN(n(r[a],i[a]));t.push(o)}return t}))}async fit(e,t,n={}){return tL(this,e,t,n)}async fitDataset(e,t){return Y_(this,e,t)}async trainOnBatch(e,t){const n=await this.standardizeUserData(e,t),a=n[0],r=n[1],o=this.makeTrainFunction()(a.concat(r)),s=[];for(const e of o){const t=await e.data();s.push(t[0])}return kI(o),YP(s)}getNamedWeights(e){const t=[],n=null!=e&&e.trainableOnly,a=n?this.trainableWeights:this.weights,r=this.getWeights(n);for(let e=0;e<a.length;++e)n&&!a[e].trainable||t.push({name:a[e].originalName,tensor:r[e]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){const t=wI().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-wI().numTensors}return e}getLossIdentifiers(){let e;if("string"==typeof this.loss)e=JP(this.loss);else if(Array.isArray(this.loss)){for(const e of this.loss)if("string"!=typeof e)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map((e=>JP(e)))}else{const t=Object.keys(this.loss);e={};const n=this.loss;for(const a of t){if("string"!=typeof n[a])throw new Error("Serialization of non-string loss is not supported.");e[a]=JP(n[a])}}return e}getMetricIdentifiers(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[JP(E_(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((e=>JP(E_(e))));{const e={};for(const t in this.metrics)e[t]=JP(E_(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");const t=n_(M_(e.optimizer_config));let n,a;if("string"==typeof e.loss)n=ZP(e.loss);else if(Array.isArray(e.loss))n=e.loss.map((e=>ZP(e)));else if(null!=e.loss){n={};for(const t in e.loss)n[t]=ZP(e.loss[t])}if(Array.isArray(e.metrics))a=e.metrics.map((e=>ZP(e)));else if(null!=e.metrics){a={};for(const t in e.metrics)a[t]=ZP(e.metrics[t])}this.compile({loss:n,metrics:a,optimizer:t})}async save(e,t){if("string"==typeof e){const t=(n=e,lT.getSaveHandlers(n));if(0===t.length)throw new HP(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new HP(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}var n;if(null==e.save)throw new HP("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const a=await Z$(this.getNamedWeights(t)),r={modelTopology:this.toJSON(null,!1),format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v3.12.0",convertedBy:null};if(null!=t&&t.includeOptimizer&&null!=this.optimizer){r.trainingConfig=this.getTrainingConfig();const e="optimizer",{data:t,specs:n}=await Z$(await this.optimizer.getWeights(),e);a.specs.push(...n),a.data=aT([a.data,t])}if(null!=this.userDefinedMetadata){const e=!0;$_(this.userDefinedMetadata,this.name,e),r.userDefinedMetadata=this.userDefinedMetadata}return r.weightData=a.data,r.weightSpecs=a.specs,e.save(r)}setUserDefinedMetadata(e){$_(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}lL.className="Model",bI(lL);class uL extends lL{}async function cL(e,t){if(null==t&&(t={}),"string"==typeof e){const r=(n=e,a=t,lT.getLoadHandlers(n,a));if(0===r.length)r.push(function(e,t){return GT(e,t)}(e,t));else if(r.length>1)throw new HP(`Found more than one (${r.length}) load handlers for URL '${e}'`);e=r[0]}var n,a;return async function(e,t,n){null==n&&(n={});if(null==e.load)throw new HP("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const a=await e.load();let r=a.modelTopology;null!=r.model_config&&(r=r.model_config);const o=null==n.strict||n.strict,s=null!=a.weightData&&null!=a.weightSpecs&&o,i=n_(M_(r),t,s),l=a.trainingConfig;null!=l&&i.loadTrainingConfig(l);null!=a.userDefinedMetadata&&i.setUserDefinedMetadata(a.userDefinedMetadata);if(null!=a.weightData){if(null==a.weightSpecs)throw new HP("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");const{modelWeights:e,optimizerWeights:t}=function(e,t){const n=Q$(e,t),a={},r=[];return t.forEach((e=>{"optimizer"===e.group?r.push({name:e.name,tensor:n[e.name]}):a[e.name]=n[e.name]})),{modelWeights:a,optimizerWeights:r}}(a.weightData,a.weightSpecs);i.loadWeights(e,o),null!=i.optimizer&&t.length>0&&await i.optimizer.setWeights(t),kI(e),kI(t.map((e=>e.tensor)))}return i}(e,void 0,t)}uL.className="Functional",bI(uL);class pL extends lL{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:TF("sequential_"),null!=e.layers)for(const t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some((e=>e<0)))throw new HP(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const t=e instanceof pL||e instanceof lL;let n;if(t){if(n=e,1!==n.outputs.length)throw new HP("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new HP("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new HP("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const t=function(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new HP("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let n=e.dtype;return null==n&&(n="float32"),new jF({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(t)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==e.inboundNodes.length)throw new HP(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(1!==e.inboundNodes[0].outputTensors.length)throw new HP("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=HF(this.outputs[0])}this.inboundNodes=[],new zF({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:GP(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((e=>e.shape)),outputShapes:this.outputs[0].shape})}else{const t=e.apply(this.outputs[0]);if(Array.isArray(t))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if(RF(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new lL({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t,n=console.log){this.built||this.build(),super.summary(e,t,n)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t,n={}){if(!this.built)throw new WP("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new WP("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e,t={}){return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t,n={}){if(!this.built)throw new WP("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new WP("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t,n={},a=!1){let r,o={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new HP("Legacy serialization format not supported yet.");r=t}else Vx(null!=t.layers,(()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field.")),r=t.layers,delete t.layers,o=t;const s=new e(o);if(!(s instanceof pL))throw new jP(`Sequential.fromConfig called on non-Sequential input: ${s}`);for(const e of r){const t=n_(e,void 0,a);a&&t.setFastWeightInitDuringBuild(!0),s.add(t)}return s}set stopTraining(e){if(null==this.model)throw new HP("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new HP("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const t of this.layers){const n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}}pL.className="Sequential",bI(pL);class dL extends gI{getConfig(){return{}}}class hL extends dL{apply(e,t=1){return function(e,t=1){if(1!==t)throw new jP(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return gN(e)}(e,t)}}hL.className="elu",bI(hL);class fL extends dL{apply(e){return hO(e)}}fL.className="selu",bI(fL);class mL extends dL{apply(e){return pO(e)}}mL.className="relu",bI(mL);class gL extends dL{apply(e){return xI((()=>VN(6,pO(e))))}}gL.className="relu6",bI(gL);class vL extends dL{apply(e){return e}}vL.className="linear",bI(vL);class bL extends dL{apply(e){return mO(e)}}bL.className="sigmoid",bI(bL);class yL extends dL{apply(e){return function(e){return xI((()=>{const t=NI(.5,RN(.2,e));return eN(t,0,1)}))}(e)}}yL.className="hardSigmoid",bI(yL);class wL extends dL{apply(e){return kO(e)}}wL.className="softplus",bI(wL);class xL extends dL{apply(e){return function(e){return xI((()=>mN(e,NI(II(e),1))))}(e)}}xL.className="softsign",bI(xL);class kL extends dL{apply(e){return TO(e)}}kL.className="tanh",bI(kL);class CL extends dL{apply(e,t=-1){return xO(e,t)}}CL.className="softmax",bI(CL);class EL extends dL{apply(e,t=-1){return BN(e,t)}}EL.className="logSoftmax",bI(EL);class SL extends dL{apply(e,t=1){return xI((()=>RN(mO(RN(e,t)),e)))}}SL.className="swish",bI(SL);class $L extends dL{apply(e){return xI((()=>RN(e,TO(kO(e)))))}}function TL(e){return e.getClassName()}function IL(e,t={}){return nD(e,vI.getMap().classNameMap,t,"activation")}function NL(e){if(null==e){const e={className:"linear",config:{}};return IL(e)}if("string"==typeof e){const t={};return t.className=e,t.config={},IL(t)}return e instanceof dL?e:IL(e)}function OL(e){if(null!=e&&"object"!=typeof e)throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${e}`)}$L.className="mish",bI($L);class RL extends gI{}class AL extends RL{constructor(e){super(),OL(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return xI((()=>{let t=tO([1]);return this.hasL1&&(t=NI(t,MN(RN(this.l1,II(e))))),this.hasL2&&(t=NI(t,MN(RN(this.l2,JD(e))))),qI(t,[])}))}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}}AL.className="L1L2",bI(AL);const ML={l1l2:"L1L2"};function BL(e){return eD(e)}function PL(e,t={}){return nD(e,vI.getMap().classNameMap,t,"regularizer")}function DL(e){if(null==e)return null;if("string"==typeof e){return PL({className:e in ML?ML[e]:e,config:{}})}return e instanceof RL?e:PL(e)}class FL extends WF{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,t){e=OF(e);let n=pO(e);return null!=this.maxValue&&(n=eN(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}}FL.className="ReLU",bI(FL);class _L extends WF{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=OF(e);return TN(n,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}_L.className="LeakyReLU",bI(_L);class LL extends WF{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=CF(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=DL(e.alphaRegularizer),this.alphaConstraint=wD(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!=typeof e.sharedAxes)throw new HP(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`);this.sharedAxes=[e.sharedAxes]}}build(e){const t=(e=RF(e)).slice(1);if(null!=this.sharedAxes)for(const e of this.sharedAxes)t[e-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const n={};if(null!=this.sharedAxes)for(let t=1;t<e.length;++t)n[t]=e[t];this.inputSpec=[new FF({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=OF(e),oO(e,this.alpha.read())}getConfig(){const e={alphaInitializer:kF(this.alphaInitializer),alphaRegularizer:BL(this.alphaRegularizer),alphaConstraint:bD(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}}LL.className="PReLU",bI(LL);class zL extends WF{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new jP(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){const n=OF(e);return gN(n)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}}zL.className="ELU",bI(zL);class VL extends WF{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){const n=OF(e);return RN(n,FT(SN(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}}VL.className="ThresholdedReLU",bI(VL);class WL extends WF{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new CL).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){const n=OF(e);return this.softmax(n,this.axis)}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function HL(e,t,n){if("number"==typeof e)return GP(e,t);if(e.length!==t)throw new HP(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${e.length} elements.`);for(let r=0;r<t;++r){const o=e[r];if((a=o)!==parseInt(a.toString(),10))throw new HP(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(e)} including a non-integer number ${o}`)}return e;var a}function jL(e,t,n,a,r=1){if(null==e)return e;let o;return o="same"===n?e:e-(t+(t-1)*(r-1))+1,Math.floor((o+a-1)/a)}function UL(e,t,n,a){if(null==e)return null;if("valid"===a)e=e*t+_D([n-t,0]);else{if("same"!==a)throw new HP(`Unsupport padding mode: ${a}.`);e*=t}return e}function GL(e,t){return xI((()=>(TD(t),"channelsFirst"===t?BO(e,[0,2,3,1]):e)))}function qL(e,t){return xI((()=>(TD(t),"channelsFirst"===t?BO(e,[0,2,3,4,1]):e)))}function XL(e,t,n,a=1,r="valid",o,s=1){return xI((()=>{if(null==o&&(o="channelsLast"),TD(o),3!==e.shape.length)throw new HP(`The input of a conv1dWithBias operation should be 3, but is ${e.shape.length} instead.`);if(3!==t.shape.length)throw new HP(`The kernel for a conv1dWithBias operation should be 3, but is ${t.shape.length} instead`);if(null!=n&&1!==n.shape.length)throw new HP(`The bias for a conv1dWithBias operation should be 1, but is ${t.shape.length} instead`);if("channelsFirst"===o&&(e=BO(e,[0,2,1])),"causal"===r)throw new jP("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let i=iN(e,t,a,"same"===r?"same":"valid","NWC",s);return null!=n&&(i=QD(i,n)),i}))}function YL(e,t,n,a=[1,1],r="valid",o,s,i=null){return xI((()=>{if(null==o&&(o="channelsLast"),TD(o),3!==e.rank&&4!==e.rank)throw new HP(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${e.rank}.`);if(3!==t.rank&&4!==t.rank)throw new HP(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${e.rank}.`);let l=GL(e,o);if("causal"===r)throw new jP("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=YO({x:l,filter:t,strides:a,pad:"same"===r?"same":"valid",dilations:s,dataFormat:"NHWC",bias:n,activation:i}),"channelsFirst"===o&&(l=BO(l,[0,3,1,2])),l}))}function KL(e,t,n,a=[1,1,1],r="valid",o,s){return xI((()=>{if(null==o&&(o="channelsLast"),TD(o),4!==e.rank&&5!==e.rank)throw new HP(`conv3dWithBias expects input to be of rank 4 or 5, but received ${e.rank}.`);if(4!==t.rank&&5!==t.rank)throw new HP(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${e.rank}.`);let i=qL(e,o);if("causal"===r)throw new jP("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return i=cN(i,t,a,"same"===r?"same":"valid","NDHWC",s),null!=n&&(i=QD(i,n)),"channelsFirst"===o&&(i=BO(i,[0,4,1,2,3])),i}))}WL.className="Softmax",bI(WL);class JL extends WF{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",JL.verifyArgs(t),this.rank=e,lD(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new jP(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=HL(t.kernelSize,e,"kernelSize"),this.strides=HL(null==t.strides?1:t.strides,e,"strides"),this.padding=null==t.padding?"valid":t.padding,ID(this.padding),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,TD(this.dataFormat),this.activation=NL(t.activation),this.useBias=null==t.useBias||t.useBias,this.biasInitializer=CF(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=wD(t.biasConstraint),this.biasRegularizer=DL(t.biasRegularizer),this.activityRegularizer=DL(t.activityRegularizer),this.dilationRate=HL(null==t.dilationRate?1:t.dilationRate,e,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new HP(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(2===this.rank){if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new HP(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(3===this.rank)if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new HP(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}static verifyArgs(e){if(qP("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!=typeof e.kernelSize&&!iD(e.kernelSize,"number",1,3))throw new HP(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:TL(this.activation),useBias:this.useBias,biasInitializer:kF(this.biasInitializer),biasRegularizer:BL(this.biasRegularizer),activityRegularizer:BL(this.activityRegularizer),biasConstraint:bD(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}class ZL extends JL{constructor(e,t){super(e,t),this.kernel=null,ZL.verifyArgs(t),this.filters=t.filters,lD(this.filters,"filters"),this.kernelInitializer=CF(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=wD(t.kernelConstraint),this.kernelRegularizer=DL(t.kernelRegularizer)}build(e){e=RF(e);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new HP(`The channel dimension of the input should be defined. Found ${e[t]}`);const n=e[t],a=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return xI((()=>{let t;e=OF(e);const n=null==this.bias?null:this.bias.read(),a=cD(this.activation.getClassName());if(null!=a&&2===this.rank)t=YL(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,a);else{if(1===this.rank)t=XL(e,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)t=YL(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new jP("convolutions greater than 3D are not implemented yet.");t=KL(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(t=this.activation.apply(t))}return t}))}computeOutputShape(e){e=RF(e);const t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2);for(let e=0;e<n.length;++e){const a=jL(n[e],this.kernelSize[e],this.padding,this.strides[e],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[e]);t.push(a)}let a=[e[0]];return"channelsLast"===this.dataFormat?(a=a.concat(t),a.push(this.filters)):(a.push(this.filters),a=a.concat(t)),a}getConfig(){const e={filters:this.filters,kernelInitializer:kF(this.kernelInitializer),kernelRegularizer:BL(this.kernelRegularizer),kernelConstraint:bD(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||"number"!=typeof e.filters||e.filters<1)throw new HP(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class QL extends ZL{constructor(e){super(2,e),QL.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!iD(e.kernelSize,"number",1,2))throw new HP(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}QL.className="Conv2D",bI(QL);class ez extends ZL{constructor(e){super(3,e),ez.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new HP(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}ez.className="Conv3D",bI(ez);class tz extends QL{constructor(e){if(super(e),this.inputSpec=[new FF({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new HP(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(4!==(e=RF(e)).length)throw new HP("Input should have rank 4; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new HP("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],a=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new FF({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return xI((()=>{let t=OF(e);if(4!==t.shape.length)throw new HP(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${t.shape.length}`);const n=t.shape,a=n[0];let r,o;"channelsFirst"===this.dataFormat?(r=2,o=3):(r=1,o=2);const s=n[r],i=n[o],l=this.kernelSize[0],u=this.kernelSize[1],c=this.strides[0],p=this.strides[1],d=[a,UL(s,c,l,this.padding),UL(i,p,u,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=BO(t,[0,2,3,1]));let h=uN(t,this.kernel.read(),d,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(h=BO(h,[0,3,1,2])),null!=this.bias&&(h=QD(h,this.bias.read(),this.dataFormat)),null!=this.activation&&(h=this.activation.apply(h)),h}))}computeOutputShape(e){const t=(e=RF(e)).slice();let n,a,r;"channelsFirst"===this.dataFormat?(n=1,a=2,r=3):(n=3,a=1,r=2);const o=this.kernelSize[0],s=this.kernelSize[1],i=this.strides[0],l=this.strides[1];return t[n]=this.filters,t[a]=UL(t[a],i,o,this.padding),t[r]=UL(t[r],l,s,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}tz.className="Conv2DTranspose",bI(tz);class nz extends ez{constructor(e){if(super(e),this.inputSpec=[new FF({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new HP(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(5!==(e=RF(e)).length)throw new HP("Input should have rank 5; Received input shape: "+JSON.stringify(e));const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new HP("The channel dimension of the inputs should be defined. Found `None`.");const n=e[t],a=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new FF({ndim:5,axes:{[t]:n}})],this.built=!0}call(e,t){return xI((()=>{let t=OF(e);if(5!==t.shape.length)throw new HP(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${t.shape.length}`);const n=t.shape,a=n[0];let r,o,s;"channelsFirst"===this.dataFormat?(s=2,r=3,o=4):(s=1,r=2,o=3);const i=n[s],l=n[r],u=n[o],c=this.kernelSize[0],p=this.kernelSize[1],d=this.kernelSize[2],h=this.strides[0],f=this.strides[1],m=this.strides[2],g=[a,UL(i,h,c,this.padding),UL(l,f,p,this.padding),UL(u,m,d,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=BO(t,[0,2,3,4,1]));let v=dN(t,this.kernel.read(),g,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(v=BO(v,[0,4,1,2,3])),null!==this.bias&&(v=QD(v,this.bias.read(),this.dataFormat)),null!==this.activation&&(v=this.activation.apply(v)),v}))}computeOutputShape(e){const t=(e=RF(e)).slice();let n,a,r,o;"channelsFirst"===this.dataFormat?(n=1,a=2,r=3,o=4):(n=4,a=1,r=2,o=3);const s=this.kernelSize[0],i=this.kernelSize[1],l=this.kernelSize[2],u=this.strides[0],c=this.strides[1],p=this.strides[2];return t[n]=this.filters,t[a]=UL(t[a],u,s,this.padding),t[r]=UL(t[r],c,i,this.padding),t[o]=UL(t[o],p,l,this.padding),t}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}nz.className="Conv3DTranspose",bI(nz);class az extends ZL{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==t.filters)throw new HP("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=t.kernelInitializer||null!=t.kernelRegularizer||null!=t.kernelConstraint)throw new HP("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=t.padding&&"same"!==t.padding&&"valid"!==t.padding)throw new HP(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(t.padding)}`);this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=CF(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=DL(t.depthwiseRegularizer),this.depthwiseConstraint=wD(t.depthwiseConstraint),this.pointwiseInitializer=CF(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=DL(t.pointwiseRegularizer),this.pointwiseConstraint=wD(t.pointwiseConstraint)}build(e){if((e=RF(e)).length<this.rank+2)throw new HP(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new HP(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[t])}`);const n=e[t],a=this.kernelSize.concat([n,this.depthMultiplier]),r=[];for(let e=0;e<this.rank;++e)r.push(1);r.push(n*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",a,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",r,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new FF({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return xI((()=>{let t;if(e=OF(e),1===this.rank)throw new jP("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(e=BO(e,[0,2,3,1])),t=fO(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(t=QD(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),"channelsFirst"===this.dataFormat&&(t=BO(t,[0,3,1,2])),t}))}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=kF(this.depthwiseInitializer),e.pointwiseInitializer=kF(this.pointwiseInitializer),e.depthwiseRegularizer=BL(this.depthwiseRegularizer),e.pointwiseRegularizer=BL(this.pointwiseRegularizer),e.depthwiseConstraint=bD(this.depthwiseConstraint),e.pointwiseConstraint=bD(this.pointwiseConstraint),e}}az.className="SeparableConv";class rz extends az{constructor(e){super(2,e)}}rz.className="SeparableConv2D",bI(rz);class oz extends ZL{constructor(e){super(1,e),oz.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!iD(e.kernelSize,"number",1,1))throw new HP(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}oz.className="Conv1D",bI(oz);class sz extends WF{constructor(e){super(e),"number"==typeof e.cropping?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"==typeof e.cropping[0]?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return xI((()=>{if(e=OF(e),"channelsLast"===this.dataFormat){const t=jD(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return jD(t,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{const t=jD(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return jD(t,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}}))}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}sz.className="Cropping2D",bI(sz);class iz extends WF{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,TD(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,function(e){sD(kD,"InterpolationFormat",e)}(this.interpolation)}computeOutputShape(e){if("channelsFirst"===this.dataFormat){const t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}{const t=null==e[1]?null:this.size[0]*e[1],n=null==e[2]?null:this.size[1]*e[2];return[e[0],t,n,e[3]]}}call(e,t){return xI((()=>{let t=OF(e);const n=t.shape;if("channelsFirst"===this.dataFormat){t=BO(t,[0,2,3,1]);const e=this.size[0]*n[2],a=this.size[1]*n[3],r="nearest"===this.interpolation?HR.resizeNearestNeighbor(t,[e,a]):HR.resizeBilinear(t,[e,a]);return BO(r,[0,3,1,2])}{const e=this.size[0]*n[1],a=this.size[1]*n[2];return"nearest"===this.interpolation?HR.resizeNearestNeighbor(t,[e,a]):HR.resizeBilinear(t,[e,a])}}))}getConfig(){const e={size:this.size,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}iz.className="UpSampling2D",bI(iz);class lz extends JL{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=CF(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=wD(e.depthwiseConstraint),this.depthwiseRegularizer=DL(e.depthwiseRegularizer)}build(e){if((e=RF(e)).length<4)throw new HP(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new HP(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[t]}).`);const n=e[t],a=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",a,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return xI((()=>{let t=function(e,t,n=[1,1],a="valid",r,o){return xI((()=>{null==r&&(r="channelsLast"),TD(r);let s=GL(e,r);if(4!==e.rank)throw new HP(`Input for depthwiseConv2d is required to be 4-D, but is instead ${e.rank}-D`);if(4!==t.rank)throw new HP(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return s=hN(s,t,n,"same"===a?"same":"valid","NHWC",o),"channelsFirst"===r&&(s=BO(s,[0,3,1,2])),s}))}(e=OF(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(t=QD(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t}))}computeOutputShape(e){e=RF(e);const t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],a="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,r=jL(t,this.kernelSize[0],this.padding,this.strides[0]),o=jL(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],a,r,o]:[e[0],r,o,a]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=kF(this.depthwiseInitializer),e.depthwiseRegularizer=BL(this.depthwiseRegularizer),e.depthwiseConstraint=bD(this.depthwiseRegularizer),e}}function uz(e,t,n,a){if(Array.isArray(e)){if(null!=t||null!=n)throw new HP("When inputs is an array, neither initialState or constants should be provided");null!=a&&(n=e.slice(e.length-a,e.length),e=e.slice(0,e.length-a)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function r(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=r(t),constants:n=r(n)}}function cz(e,t,n,a=!1,r,o,s=!1,i=!1){return xI((()=>{const l=t.shape.length;if(l<3)throw new HP(`Input should be at least 3D, but is ${l}D.`);const u=[1,0].concat(LD(2,l));if(t=BO(t,u),null!=o)throw new jP("The rnn() functoin of the deeplearn.js backend does not support constants yet.");s&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=r&&((r=FT(FT(r,"bool"),"float32")).rank===l-1&&(r=yN(r,-1)),r=BO(r,u)),a&&(t=dO(t,0),null!=r&&(r=dO(r,0)));const c=[];let p,d=n;const h=t.shape[0],f=OO(t);let m,g;null!=r&&(m=OO(r));for(let t=0;t<h;++t){const n=f[t],a=xI((()=>e(n,d)));if(null==r)p=a[0],d=a[1];else{const e=xI((()=>{const e=m[t],n=AN(aO(e),e),r=NI(RN(a[0],e),RN(d[0],n)),o=d.map(((t,r)=>NI(RN(a[1][r],e),RN(t,n))));return{output:r,newStates:o}}));p=e.output,d=e.newStates}i&&c.push(p)}if(i){g=$O(c,1)}return[p,g,d]}))}lz.className="DepthwiseConv2D",bI(lz);class pz extends WF{constructor(e){let t;if(super(e),null==e.cell)throw new HP("cell property is missing for the constructor of RNN.");if(t=Array.isArray(e.cell)?new yz({cells:e.cell}):e.cell,null==t.stateSize)throw new HP("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=null!=e.returnSequences&&e.returnSequences,this.returnState=null!=e.returnState&&e.returnState,this.goBackwards=null!=e.goBackwards&&e.goBackwards,this._stateful=null!=e.stateful&&e.stateful,this.unroll=null!=e.unroll&&e.unroll,this.supportsMasking=!0,this.inputSpec=[new FF({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(null==this.states_){return LD(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((e=>null))}return this.states_}setStates(e){this.states_=e}computeOutputShape(e){IF(e)&&(e=e[0]),e=e;let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);const n=t[0];let a;if(a=this.returnSequences?[e[0],e[1],n]:[e[0],n],this.returnState){const n=[];for(const a of t)n.push([e[0],a]);return[a].concat(n)}return a}computeMask(e,t){return xI((()=>{Array.isArray(t)&&(t=t[0]);const e=this.returnSequences?t:null;if(this.returnState){const t=this.states.map((e=>null));return[e].concat(t)}return e}))}get states(){if(null==this.states_){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}return this.states_}set states(e){this.states_=e}build(e){if(null!=this.numConstants)throw new jP("Constants support is not implemented in RNN yet.");IF(e)&&(e=e[0]),e=e;const t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new FF({shape:[t,null,...n]});const a=[e[0]].concat(e.slice(2));let r;if(this.cell.build(a),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!Gx(this.stateSpec.map((e=>e.shape[e.shape.length-1])),r))throw new HP(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=r.map((e=>new FF({shape:[null,e]})));this.stateful&&this.resetStates()}resetStates(e,t=!1){xI((()=>{if(!this.stateful)throw new VP("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape[0];if(null==n)throw new HP("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((e=>tO([n,e]))):this.states_=[tO([n,this.cell.stateSize])];else if(null==e)kI(this.states_),null!=this.keptStates&&(kI(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((e=>tO([n,e]))):this.states_[0]=tO([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new HP(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);!0===t?this.keptStates.push(this.states_.slice()):kI(this.states_);for(let t=0;t<this.states_.length;++t){const a=e[t],r=Array.isArray(this.cell.stateSize)?this.cell.stateSize[t]:this.cell.stateSize,o=[n,r];if(!Gx(a.shape,o))throw new HP(`State ${t} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${a.shape}`);this.states_[t]=a}}this.states_=this.states_.map((e=>CI(e.clone())))}))}apply(e,t){let n=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});const r=uz(e,n,a,this.numConstants);e=r.inputs,n=r.initialState,a=r.constants;let o=[],s=[];if(null!=n){t.initialState=n,o=o.concat(n),this.stateSpec=[];for(const e of n)this.stateSpec.push(new FF({shape:e.shape}));s=s.concat(this.stateSpec)}null!=a&&(t.constants=a,o=o.concat(a),this.numConstants=a.length);if(o[0]instanceof _F){const n=[e].concat(o),a=this.inputSpec.concat(s),r=this.inputSpec;this.inputSpec=a;const i=super.apply(n,t);return this.inputSpec=r,i}return super.apply(e,t)}call(e,t){return xI((()=>{const n=null==t?null:t.mask,a=null==t?null:t.training;let r=null==t?null:t.initialState;e=OF(e),null==r&&(r=this.stateful?this.states_:this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(r.length!==o)throw new HP(`RNN Layer has ${o} state(s) but was passed ${r.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const s={training:a},i=cz(((e,t)=>{const n=this.cell.call([e].concat(t),s);return[n[0],n.slice(1)]}),e,r,this.goBackwards,n,null,this.unroll,this.returnSequences),l=i[0],u=i[1],c=i[2];this.stateful&&this.resetStates(c,a);const p=this.returnSequences?u:l;return this.returnState?[p].concat(c):p}))}getInitialState(e){return xI((()=>{let t=tO(e.shape);return t=MN(t,[1,2]),t=VD(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map((e=>e>1?qD(t,[1,e]):t)):this.cell.stateSize>1?[qD(t,[1,this.cell.stateSize])]:[t]}))}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);const n=this.cell.getConfig();return this.getClassName()===pz.className&&(t.cell={className:this.cell.getClassName(),config:n}),Object.assign({},n,e,t)}static fromConfig(e,t,n={}){const a=n_(t.cell,n);return new e(Object.assign(t,{cell:a}))}}pz.className="RNN",bI(pz);class dz extends WF{}class hz extends dz{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,lD(this.units,"units"),this.activation=NL(null==e.activation?this.DEFAULT_ACTIVATION:e.activation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=CF(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=CF(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=CF(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=DL(e.kernelRegularizer),this.recurrentRegularizer=DL(e.recurrentRegularizer),this.biasRegularizer=DL(e.biasRegularizer),this.kernelConstraint=wD(e.kernelConstraint),this.recurrentConstraint=wD(e.recurrentConstraint),this.biasConstraint=wD(e.biasConstraint),this.dropout=FD([1,_D([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=FD([1,_D([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=RF(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return xI((()=>{if(2!==(e=e).length)throw new HP(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let n=e[1];e=e[0];const a=null!=t.training&&t.training;let r;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=wz({ones:()=>aO(e),rate:this.dropout,training:a,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=wz({ones:()=>aO(n),rate:this.recurrentDropout,training:a,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,s=this.recurrentDropoutMask;r=YD(null!=o?RN(e,o):e,this.kernel.read()),null!=this.bias&&(r=QD(r,this.bias.read())),null!=s&&(n=RN(n,s));let i=NI(r,YD(n,this.recurrentKernel.read()));return null!=this.activation&&(i=this.activation.apply(i)),[i,i]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:TL(this.activation),useBias:this.useBias,kernelInitializer:kF(this.kernelInitializer),recurrentInitializer:kF(this.recurrentInitializer),biasInitializer:kF(this.biasInitializer),kernelRegularizer:BL(this.kernelRegularizer),recurrentRegularizer:BL(this.recurrentRegularizer),biasRegularizer:BL(this.biasRegularizer),activityRegularizer:BL(this.activityRegularizer),kernelConstraint:bD(this.kernelConstraint),recurrentConstraint:bD(this.recurrentConstraint),biasConstraint:bD(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},e,t)}}hz.className="SimpleRNNCell",bI(hz);class fz extends pz{constructor(e){e.cell=new hz(e),super(e)}call(e,t){return xI((()=>{null!=this.cell.dropoutMask&&(kI(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(kI(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,a=null==t?null:t.training,r=null==t?null:t.initialState;return super.call(e,{mask:n,training:a,initialState:r})}))}static fromConfig(e,t){return new e(t)}}fz.className="SimpleRNN",bI(fz);class mz extends dz{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new HP("GRUCell does not support reset_after parameter set to true.");this.units=e.units,lD(this.units,"units"),this.activation=NL(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=NL(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=CF(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=CF(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=CF(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=DL(e.kernelRegularizer),this.recurrentRegularizer=DL(e.recurrentRegularizer),this.biasRegularizer=DL(e.biasRegularizer),this.kernelConstraint=wD(e.kernelConstraint),this.recurrentConstraint=wD(e.recurrentConstraint),this.biasConstraint=wD(e.biasConstraint),this.dropout=FD([1,_D([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=FD([1,_D([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){const t=(e=RF(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return xI((()=>{if(2!==(e=e).length)throw new HP(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const n=null!=t.training&&t.training;let a=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=wz({ones:()=>aO(e),rate:this.dropout,training:n,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=wz({ones:()=>aO(a),rate:this.recurrentDropout,training:n,count:3,dropoutFunc:this.dropoutFunc}));const r=this.dropoutMask,o=this.recurrentDropoutMask;let s,i,l;0<this.dropout&&this.dropout<1&&(e=RN(e,r[0]));let u=YD(e,this.kernel.read());this.useBias&&(u=QD(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(a=RN(a,o[0]));const c=this.recurrentKernel.read(),[p,d]=CO(c,[2*this.units,this.units],c.rank-1),h=YD(a,p),[f,m,g]=CO(u,3,u.rank-1),[v,b]=CO(h,2,h.rank-1);s=this.recurrentActivation.apply(NI(f,v)),i=this.recurrentActivation.apply(NI(m,b));const y=YD(RN(i,a),d);l=this.activation.apply(NI(g,y));const w=NI(RN(s,a),RN(NI(1,ZN(s)),l));return[w,w]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:TL(this.activation),recurrentActivation:TL(this.recurrentActivation),useBias:this.useBias,kernelInitializer:kF(this.kernelInitializer),recurrentInitializer:kF(this.recurrentInitializer),biasInitializer:kF(this.biasInitializer),kernelRegularizer:BL(this.kernelRegularizer),recurrentRegularizer:BL(this.recurrentRegularizer),biasRegularizer:BL(this.biasRegularizer),activityRegularizer:BL(this.activityRegularizer),kernelConstraint:bD(this.kernelConstraint),recurrentConstraint:bD(this.recurrentConstraint),biasConstraint:bD(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},e,t)}}mz.className="GRUCell",bI(mz);class gz extends pz{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new mz(e),super(e)}call(e,t){return xI((()=>{null!=this.cell.dropoutMask&&(kI(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(kI(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,a=null==t?null:t.training,r=null==t?null:t.initialState;return super.call(e,{mask:n,training:a,initialState:r})}))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}gz.className="GRU",bI(gz);class vz extends dz{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,lD(this.units,"units"),this.activation=NL(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=NL(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=CF(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=CF(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=CF(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=DL(e.kernelRegularizer),this.recurrentRegularizer=DL(e.recurrentRegularizer),this.biasRegularizer=DL(e.biasRegularizer),this.kernelConstraint=wD(e.kernelConstraint),this.recurrentConstraint=wD(e.recurrentConstraint),this.biasConstraint=wD(e.biasConstraint),this.dropout=FD([1,_D([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=FD([1,_D([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;const n=(e=RF(e))[e.length-1];let a;if(this.kernel=this.addWeight("kernel",[n,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){const e=this.biasInitializer,n=this.units;a=new((t=class extends rF{apply(t,a){const r=e.apply([n]),o=(new sF).apply([n]),s=e.apply([2*n]);return GD(GD(r,o),s)}}).className="CustomInit",t)}else a=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,a,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return xI((()=>{const n=null!=t.training&&t.training;if(3!==(e=e).length)throw new HP(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let a=e[1];const r=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=wz({ones:()=>aO(e),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=wz({ones:()=>aO(a),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,s=this.recurrentDropoutMask;let i,l,u,c;0<this.dropout&&this.dropout<1&&(e=RN(e,o[0]));let p=YD(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(a=RN(a,s[0])),p=NI(p,YD(a,this.recurrentKernel.read())),this.useBias&&(p=QD(p,this.bias.read()));const[d,h,f,m]=CO(p,4,p.rank-1);i=this.recurrentActivation.apply(d),l=this.recurrentActivation.apply(h),u=NI(RN(l,r),RN(i,this.activation.apply(f))),c=this.recurrentActivation.apply(m);const g=RN(c,this.activation.apply(u));return[g,g,u]}))}getConfig(){const e=super.getConfig(),t={units:this.units,activation:TL(this.activation),recurrentActivation:TL(this.recurrentActivation),useBias:this.useBias,kernelInitializer:kF(this.kernelInitializer),recurrentInitializer:kF(this.recurrentInitializer),biasInitializer:kF(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:BL(this.kernelRegularizer),recurrentRegularizer:BL(this.recurrentRegularizer),biasRegularizer:BL(this.biasRegularizer),activityRegularizer:BL(this.activityRegularizer),kernelConstraint:bD(this.kernelConstraint),recurrentConstraint:bD(this.recurrentConstraint),biasConstraint:bD(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},e,t)}}vz.className="LSTMCell",bI(vz);class bz extends pz{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new vz(e),super(e)}call(e,t){return xI((()=>{null!=this.cell.dropoutMask&&(kI(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(kI(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const n=null==t?null:t.mask,a=null==t?null:t.training,r=null==t?null:t.initialState;return super.call(e,{mask:n,training:a,initialState:r})}))}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}bz.className="LSTM",bI(bz);class yz extends dz{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return xI((()=>{let n=(e=e).slice(1);const a=[];for(const e of this.cells.slice().reverse())Array.isArray(e.stateSize)?a.push(n.splice(0,e.stateSize.length)):a.push(n.splice(0,1));a.reverse();const r=[];let o;for(let s=0;s<this.cells.length;++s){const i=this.cells[s];n=a[s],o=0===s?[e[0]].concat(n):[o[0]].concat(n),o=i.call(o,t),r.push(o.slice(1))}n=[];for(const e of r.slice().reverse())n.push(...e);return[o[0]].concat(n)}))}build(e){let t;IF(e)&&(e=e[0]),e=e,this.cells.forEach(((n,a)=>{RD(`RNNCell_${a}`,(()=>{n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}getConfig(){const e=super.getConfig(),t={cells:this.cells.map((e=>({className:e.getClassName(),config:e.getConfig()})))};return Object.assign({},e,t)}static fromConfig(e,t,n={}){const a=[];for(const e of t.cells)a.push(n_(e,n));return new e({cells:a})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){const t=[];for(const e of this.cells)t.push(...e.trainableWeights);return t.concat(e)}return e}getWeights(){const e=[];for(const t of this.cells)e.push(...t.weights);return PF(e)}setWeights(e){const t=[];for(const n of this.cells){const a=n.weights.length,r=e.splice(a);for(let e=0;e<n.weights.length;++e)t.push([n.weights[e],r[e]])}DF(t)}}function wz(e){const{ones:t,rate:n,training:a=!1,count:r=1,dropoutFunc:o}=e,s=()=>null!=o?o(t(),n):eF(t(),n),i=()=>tF(s,t,a);if(!r||r<=1)return CI(i().clone());return Array(r).fill(void 0).map(i).map((e=>CI(e.clone())))}yz.className="StackedRNNCells",bI(yz);var xz=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};class kz extends pz{constructor(e){if(e.unroll)throw new jP("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new jP("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new FF({ndim:5})]}call(e,t){return xI((()=>{if(null!=this.cell.dropoutMask&&(kI(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(kI(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new HP("ConvRNN2D cell does not support constants");const n=null==t?null:t.mask,a=null==t?null:t.training,r=null==t?null:t.initialState;return super.call(e,{mask:n,training:a,initialState:r})}))}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return xI((()=>{const{stateSize:t}=this.cell,n=e.shape,a=this.computeSingleOutputShape(n),r=tO([a[0],...a.slice(2)]);return Array.isArray(t)?Array(t.length).fill(r):[r]}))}resetStates(e,t=!1){xI((()=>{if(!this.stateful)throw new VP("Cannot call resetStates() on an RNN Layer that is not stateful.");const n=this.inputSpec[0].shape,a=this.computeSingleOutputShape(n),r=[a[0],...a.slice(2)];if(null==n[0])throw new HP("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((()=>tO(r))):this.states_=[tO(r)];else if(null==e)kI(this.states_),null!=this.keptStates&&(kI(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map((()=>tO(r))):this.states_[0]=tO(r);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new HP(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t?this.keptStates.push(this.states_.slice()):kI(this.states_);for(let t=0;t<this.states_.length;++t){const n=e[t],a=r;if(!Gx(n.shape,a))throw new HP(`State ${t} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${n.shape}`);this.states_[t]=n}}this.states_=this.states_.map((e=>CI(e.clone())))}))}computeSingleOutputShape(e){const{dataFormat:t,filters:n,kernelSize:a,padding:r,strides:o,dilationRate:s}=this.cell,i="channelsFirst"===t,l=e[i?3:2],u=e[i?4:3],c=jL(l,a[0],r,o[0],s[0]),p=jL(u,a[1],r,o[1],s[1]);return[...e.slice(0,2),...i?[n,c,p]:[c,p,n]]}}kz.className="ConvRNN2D";class Cz extends vz{constructor(e){const{filters:t,kernelSize:n,strides:a,padding:r,dataFormat:o,dilationRate:s}=e;super(Object.assign({},e,{units:t})),this.filters=t,lD(this.filters,"filters"),this.kernelSize=HL(n,2,"kernelSize"),this.kernelSize.forEach((e=>lD(e,"kernelSize"))),this.strides=HL(a||1,2,"strides"),this.strides.forEach((e=>lD(e,"strides"))),this.padding=r||"valid",ID(this.padding),this.dataFormat=o||"channelsLast",TD(this.dataFormat),this.dilationRate=HL(s||1,2,"dilationRate"),this.dilationRate.forEach((e=>lD(e,"dilationRate")))}build(e){var t;e=RF(e);const n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new HP(`The channel dimension of the input should be defined. Found ${e[n]}`);const a=e[n],r=this.kernelSize.concat([a,4*this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const o=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){const n=this.biasInitializer,a=this.filters;e=new((t=class extends rF{apply(e,t){return UD([n.apply([a]),nO([a]),n.apply([2*a])])}}).className="CustomInit",t)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return xI((()=>{if(3!==e.length)throw new HP(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const n=t.training||!1,a=e[0],r=e[1],o=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=wz({ones:()=>aO(a),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const s=this.dropoutMask,i=(e,t,n)=>t&&t[n]?RN(t[n],e):e;let l=i(a,s,0),u=i(a,s,1),c=i(a,s,2),p=i(a,s,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=wz({ones:()=>aO(r),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));const d=this.recurrentDropoutMask;let h=i(r,d,0),f=i(r,d,1),m=i(r,d,2),g=i(r,d,3);const[v,b,y,w]=CO(this.kernel.read(),4,3),[x,k,C,E]=this.useBias?CO(this.bias.read(),4):[null,null,null,null];l=this.inputConv(l,v,x,this.padding),u=this.inputConv(u,b,k,this.padding),c=this.inputConv(c,y,C,this.padding),p=this.inputConv(p,w,E,this.padding);const[S,$,T,I]=CO(this.recurrentKernel.read(),4,3);h=this.recurrentConv(h,S),f=this.recurrentConv(f,$),m=this.recurrentConv(m,T),g=this.recurrentConv(g,I);const N=this.recurrentActivation.apply(NI(l,h)),O=this.recurrentActivation.apply(NI(u,f)),R=NI(RN(O,o),RN(N,this.activation.apply(NI(c,m)))),A=RN(this.recurrentActivation.apply(NI(p,g)),this.activation.apply(R));return[A,A,R]}))}getConfig(){const e=super.getConfig(),{units:t}=e,n=xz(e,["units"]),a={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},n,a)}inputConv(e,t,n,a){const r=sN(e,t,this.strides,a||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?QD(r,n,this.dataFormat):r}recurrentConv(e,t){return sN(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}Cz.className="ConvLSTM2DCell",bI(Cz);class Ez extends kz{constructor(e){const t=new Cz(e);super(Object.assign({},e,{cell:t}))}static fromConfig(e,t){return new e(t)}}Ez.className="ConvLSTM2D",bI(Ez);class Sz extends WF{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;const t=e.shape,n=[];for(let e=0;e<this.noiseShape.length;++e)n.push(null==this.noiseShape[e]?t[e]:this.noiseShape[e]);return n}call(e,t){return xI((()=>{this.invokeCallHook(e,t);const n=OF(e);if(0<this.rate&&this.rate<1){const e=null!=t.training&&t.training,a=this.getNoiseShape(n);return tF((()=>eF(n,this.rate,a,this.seed)),(()=>n),e)}return e}))}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}}Sz.className="Dropout",bI(Sz);class $z extends Sz{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const t=e.shape;return[t[0],1,t[2]]}}$z.className="SpatialDropout1D",bI($z);class Tz extends WF{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,lD(this.units,"units"),this.activation=NL(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=CF(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=CF(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=wD(e.kernelConstraint),this.biasConstraint=wD(e.biasConstraint),this.kernelRegularizer=DL(e.kernelRegularizer),this.biasRegularizer=DL(e.biasRegularizer),this.activityRegularizer=DL(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){const t=(e=RF(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){const t=(e=RF(e)).slice();return t[t.length-1]=this.units,t}call(e,t){return xI((()=>{this.invokeCallHook(e,t);const n=OF(e),a=cD(this.activation.getClassName());let r;return null!=a?r=YD(n,this.kernel.read(),a,this.bias?this.bias.read():null):(r=YD(n,this.kernel.read()),null!=this.bias&&(r=QD(r,this.bias.read())),null!=this.activation&&(r=this.activation.apply(r))),r}))}getConfig(){const e={units:this.units,activation:TL(this.activation),useBias:this.useBias,kernelInitializer:kF(this.kernelInitializer),biasInitializer:kF(this.biasInitializer),kernelRegularizer:BL(this.kernelRegularizer),biasRegularizer:BL(this.biasRegularizer),activityRegularizer:BL(this.activityRegularizer),kernelConstraint:bD(this.kernelConstraint),biasConstraint:bD(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}}Tz.className="Dense",bI(Tz);class Iz extends WF{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=RF(e);for(const t of e.slice(1))if(null==t)throw new HP(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],DD(e,1)]}call(e,t){return xI((()=>{this.invokeCallHook(e,t);let n=OF(e);if("channelsFirst"===this.dataFormat&&n.rank>1){const e=[0];for(let t=2;t<n.rank;++t)e.push(t);e.push(1),n=BO(n,e)}return function(e){if(e.rank<=1)throw new HP(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);const t=[e.shape[0],DD(e.shape,1)];return qI(e,t)}(n)}))}getConfig(){const e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);const t=super.getConfig();return Object.assign(e,t),e}}Iz.className="Flatten",bI(Iz);class Nz extends WF{constructor(e){super(e),this.supportsMasking=!0,this.activation=NL(e.activation)}call(e,t){return xI((()=>{this.invokeCallHook(e,t);const n=OF(e);return this.activation.apply(n)}))}getConfig(){const e={activation:TL(this.activation)},t=super.getConfig();return Object.assign(e,t),e}}Nz.className="Activation",bI(Nz);class Oz extends WF{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return xI((()=>{return e=OF(e),t=e,n=this.n,xI((()=>{if(2!==t.shape.length)throw new HP(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);return qD(VD(t,1),[1,n,1])}));var t,n}))}getConfig(){const e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}}Oz.className="RepeatVector",bI(Oz);class Rz extends WF{constructor(e){super(e),this.targetShape=e.targetShape;for(let e=0;e<this.targetShape.length;++e)this.isUnknown(this.targetShape[e])&&(this.targetShape[e]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,t){const n="Total size of new array must be unchanged.",a=t.slice();let r=1,o=null;for(let e=0;e<a.length;++e){const t=a[e];if(this.isUnknown(t)){if(null!==o)throw new HP("Can only specifiy one unknown dimension.");o=e}else r*=t}const s=DD(e);if(null!==o){if(0===r||s%r!=0)throw new HP(n);a[o]=s/r}else if(s!==r)throw new HP(n);return a}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return xI((()=>{this.invokeCallHook(e,t);const n=OF(e),a=n.shape,r=a.slice(0,1).concat(this.fixUnknownDimension(a.slice(1),this.targetShape));return qI(n,r)}))}getConfig(){const e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}}Rz.className="Reshape",bI(Rz);class Az extends WF{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const t=LD(1,e.dims.length+1);if(!Gx(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new FF({ndim:this.dims.length+1})]}computeOutputShape(e){const t=(e=RF(e)).slice();return this.dims.forEach(((n,a)=>{t[a+1]=e[n]})),t}call(e,t){return BO(OF(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}}Az.className="Permute",bI(Az);class Mz extends WF{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,this.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){const n=OF(e);return RI(QN(n,this.maskValue),-1)}call(e,t){return xI((()=>{this.invokeCallHook(e,t);const n=OF(e),a=RI(QN(n,this.maskValue),-1,!0);return RN(n,FT(a,n.dtype))}))}}Mz.className="Masking",bI(Mz);class Bz extends WF{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),null==e.inputLength?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(KP(e.inputLength))}this.inputDim=e.inputDim,lD(this.inputDim,"inputDim"),this.outputDim=e.outputDim,lD(this.outputDim,"outputDim"),this.embeddingsInitializer=CF(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=DL(e.embeddingsRegularizer),this.activityRegularizer=DL(e.activityRegularizer),this.embeddingsConstraint=wD(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return xI((()=>this.maskZero?(e=OF(e),QN(e,MO(e))):null))}computeOutputShape(e){if(e=RF(e),null==this.inputLength)return[...e,this.outputDim];const t=KP(this.inputLength);if(t.length!==e.length-1)throw new HP(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let n=0;for(let a=0;a<t.length;++a){const r=t[a],o=e[a+1];if(null!=r&&null!=o&&r!==o)throw new HP(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);null==r&&(t[n]=o),n++}}return[e[0],...t,this.outputDim]}call(e,t){return xI((()=>{this.invokeCallHook(e,t);let n=OF(e);"int32"!==n.dtype&&(n=zD(n,"int32"));const a=KD(this.embeddings.read(),qI(n,[n.size]));return qI(a,RF(this.computeOutputShape(n.shape)))}))}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:kF(this.embeddingsInitializer),embeddingsRegularizer:BL(this.embeddingsRegularizer),activityRegularizer:BL(this.activityRegularizer),embeddingsConstraint:bD(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}}Bz.className="Embedding",bI(Bz);class Pz extends WF{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new jP}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;const n=e.slice(0,e.length-t.length);for(let a=0;a<t.length;++a){const r=e[e.length-t.length+a],o=t[a];if(null==r||null==o||r<0||o<0)n.push(null);else if(1===r)n.push(o);else if(1===o)n.push(r);else{if(r!==o)throw new HP("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(r)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[RF(e)]),(e=e).length<2)throw new HP(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let t=[];for(const n of e)null!=n&&null!==n[0]&&t.push(n[0]);if(t=rD(t),t.length>1)throw new HP(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let n=null==e[0]?null:e[0].slice(1);for(let t=1;t<e.length;++t){const a=null==e[t]?null:e[t].slice(1);n=this.computeElementwiseOpOutputShape(n,a)}const a=e.map((e=>e.length));-1===e.indexOf(null)&&1===rD(a).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return xI((()=>{if(e=e,this.reshapeRequired){const t=[],n=e.map((e=>e.rank));if(-1===n.indexOf(null)){const a=_D(n);for(let n of e){const e=n.rank;for(let t=0;t<a-e;++t)n=VD(n,1);t.push(n)}return this.mergeFunction(t)}{let n=!1;for(const a of e){const e=a.rank;if(null==e){const e=a.shape,r=e[0],o=e.slice(1).concat([r]);let s=qI(a,[r].concat(DD(e.slice(1))));s=BO(s,[1,0]),s=qI(s,o),t.push(s),n=!0}else if(e>1){const r=LD(1,e).concat([0]);t.push(BO(a,r)),n=!0}else t.push(a)}let a=this.mergeFunction(t);const r=a.rank;if(n)if(null==r){const e=a.shape,t=e[e.length-1],n=[t].concat(e.slice(0,e.length-1));a=qI(BO(qI(a,[-1,t]),[1,0]),n)}else if(r>1){const e=[r-1].concat(LD(0,r-1));a=BO(a,e)}return a}}return this.mergeFunction(e)}))}computeOutputShape(e){let t;t=null==(e=e)[0]?null:e[0].slice(1);for(let n=1;n<e.length;++n){const a=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,a)}let n=[];for(const t of e)null!=t&&null!==t[0]&&n.push(t[0]);return n=rD(n),t=1===n.length?n.concat(t):[null].concat(t),t}computeMask(e,t){return xI((()=>{if(null==t)return null;if(!Array.isArray(t))throw new HP("`mask` should be an Array");if(!Array.isArray(e))throw new HP("`inputs` should be an Array");if(t.length!==e.length)throw new HP(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${t.length})`);if(t.every((e=>null==e)))return null;let n=(t=t.map((e=>null==e?e:yN(e,0))))[0];for(let e=1;e<t.length-1;++e)n=PN(n,t[e]);return n}))}}class Dz extends Pz{constructor(e){super(e)}mergeFunction(e){return xI((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=NI(t,e[n]);return t}))}}Dz.className="Add",bI(Dz);class Fz extends Pz{constructor(e){super(e)}mergeFunction(e){return xI((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=RN(t,e[n]);return t}))}}Fz.className="Multiply",bI(Fz);class _z extends Pz{constructor(e){super(e)}mergeFunction(e){return xI((()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=NI(t,e[n]);return RN(1/e.length,t)}))}}_z.className="Average",bI(_z);class Lz extends Pz{constructor(e){super(e)}mergeFunction(e){return xI((()=>{let t=e[0];for(let n=1;n<e.length;++n)t=LN(t,e[n]);return t}))}}Lz.className="Maximum",bI(Lz);class zz extends Pz{constructor(e){super(e)}mergeFunction(e){return xI((()=>{let t=e[0];for(let n=1;n<e.length;++n)t=VN(t,e[n]);return t}))}}zz.className="Minimum",bI(zz);class Vz extends Pz{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new HP("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let t=!0;for(const n of e)if(null!=n){t=!1;break}if(t)return;const n=[];for(let t=0;t<e.length;++t){const a=e[t].slice();a.splice(this.axis,1);let r=!1;for(const e of n)if(Gx(e,a)){r=!0;break}r||n.push(a)}if(n.length>1)throw new HP("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return xI((()=>UD(e,this.axis)))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new HP("A `Concatenate` layer should be called on a list of inputs.");const t=e,n=t[0].slice(),a=this.axis<0?n.length+this.axis:this.axis;for(const e of t.slice(1)){if(null==n[a]||null==e[a]){n[a]=null;break}n[a]+=e[a]}return n}computeMask(e,t){if(null==t)return null;if(!Array.isArray(t))throw new HP("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new HP("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new HP(`Mismatch in the length of mask (${t.length}) and the legnth of inputs (${e.length})`);return xI((()=>{let n=!0;if(t.forEach((e=>{null==e||(n=!1)})),n)return null;const a=[];for(let n=0;n<e.length;++n)null==t[n]?a.push(FT(aO(e[n]),"bool")):t[n].rank<e[n].rank?a.push(yN(t[n],-1)):a.push(t[n]);const r=tN(a,this.axis);return OI(r,-1,!1)}))}getConfig(){const e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}}function Wz(e,t){for(;e<0;)e+=t;return e}Vz.className="Concatenate",bI(Vz);class Hz extends Pz{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){Vx(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(()=>"A `Dot` layer should be called on a list of exactly 2 inputs."));const t=e[0],n=e[1];if(t.length>3||n.length>3)throw new jP("Dot layer does not support tensors of 4D or higher rank yet.");const a=this.interpretAxes(t,n);if(t[a[0]]!==n[a[1]])throw new HP(`Dimension incompatibility: ${t[a[0]]} !== ${n[a[1]]}`)}mergeFunction(e){if(2!==e.length)throw new HP(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let t,n=e[0],a=e[1];return t=Array.isArray(this.axes)?this.axes.map(((t,n)=>Wz(t,e[n].shape.length))):[Wz(this.axes,n.shape.length),Wz(this.axes,a.shape.length)],this.normalize&&(n=a_(n,t[0]),a=a_(a,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new jP("batchDot is not implemented for tensors of 4D or higher rank yet");if(Vx(e.shape.length>=2,(()=>`batchDot requires the rank of x to be >= 2, but got ${e.shape.length}`)),Vx(e.shape.length>=2,(()=>`batchDot requires the rank of y to be >= 2, but got ${t.shape.length}`)),"number"==typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new jP("batchDot is not implemented for complex64-type Tensors yet.");const a=e.shape.length,r=t.shape.length;null==n&&(n=[a-1,r-2]);const o=n;return xI((()=>{let n,s;if(a>r){n=a-r;const e=[];for(let t=0;t<n;++t)e.push(1);t=qI(t,t.shape.concat(e))}else if(r>a){n=r-a;const t=[];for(let e=0;e<n;++e)t.push(1);e=qI(e,e.shape.concat(t))}else n=0;if(2===e.shape.length&&2===t.shape.length)s=o[0]===o[1]?MN(RN(e,t),o[0]):MN(RN(BO(e,[1,0]),t),o[1]);else{const n=o[0]!==e.shape.length-1,a=o[1]===t.shape.length-1;s=DN(e,t,n,a)}if(n>0){let e;e=a>r?a+r-3:a-1;const t=[];for(let a=e;a<e+n;++a)t.push(a);s=SO(s,t)}return 1===s.shape.length&&(s=yN(s,1)),s}))}(n,a,t)}interpretAxes(e,t){let n;return n=Array.isArray(this.axes)?this.axes:[Wz(this.axes,e.length),Wz(this.axes,t.length)],n}computeOutputShape(e){Vx(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(()=>"A `Dot` layer should be called on a list of exactly 2 inputs."));const t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new jP("Dot layer does not support tensors of 4D or higher rank yet.");const a=this.interpretAxes(t,n);t.splice(a[0],1),n.splice(a[1],1),n.splice(0,1);const r=t.concat(n);return 1===r.length&&r.push(1),r}computeMask(e,t){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}}Hz.className="Dot",bI(Hz);class jz extends WF{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return xI((()=>{this.invokeCallHook(e,t);const n=OF(e);return tF((()=>NI(XD(n.shape,0,this.stddev),n)),(()=>n),t.training||!1)}))}}jz.className="GaussianNoise",bI(jz);class Uz extends WF{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return xI((()=>{this.invokeCallHook(e,t);const n=OF(e);if(this.rate>0&&this.rate<1){return tF((()=>{const e=Math.sqrt(this.rate/(1-this.rate));return RN(n,XD(n.shape,1,e))}),(()=>n),t.training||!1)}return n}))}}Uz.className="GaussianDropout",bI(Uz);class Gz extends WF{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||OF(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return xI((()=>{if(this.rate<1&&this.rate>0){const n=this._getNoiseShape(e),a=()=>{const t=OF(e),a=-1.7580993408473766;let r=$N(cO(n),this.rate);r=zD(r,"float32");const o=((1-this.rate)*(1+this.rate*a**2))**-.5,s=-o*a*this.rate,i=NI(RN(t,r),RN(NI(r,-1),a));return NI(RN(i,o),s)};return tF(a,(()=>OF(e)),t.training||!1)}return e}))}}function qz(e,t,n,a,r,o=.001){let s;if(2===e.rank)s=JI(e,t,n,a,r,o);else if(3===e.rank)s=ZI(e,t,n,a,r,o);else{if(4!==e.rank)throw new jP(`batchNormalization is not implemented for array of rank ${e.rank} yet`);s=QI(e,t,n,a,r,o)}return s}function Xz(e,t,n,a,r=.001){return Gx(a.slice().sort(),LD(0,e.rank-1))?function(e,t,n,a,r=.001){return xI((()=>{const o=JN(e,a),s=o.mean,i=o.variance;return[qz(e,s,i,n,t,r),s,i]}))}(e,t,n,a,r):function(e,t,n,a,r=.001){return xI((()=>{const o=JN(e,a),s=o.mean,i=o.variance,l=[];for(const t of LD(0,e.rank))-1!==a.indexOf(t)?l.push(1):l.push(e.shape[t]);const u=qI(s,l),c=qI(i,l),p=null==t?null:qI(t,l),d=null==n?null:qI(n,l);return[qz(e,u,c,d,p,r),s,i]}))}(e,t,n,a,r)}Gz.className="AlphaDropout",bI(Gz);class Yz extends WF{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=CF(e.betaInitializer||"zeros"),this.gammaInitializer=CF(e.gammaInitializer||"ones"),this.movingMeanInitializer=CF(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=CF(e.movingVarianceInitializer||"ones"),this.betaConstraint=wD(e.betaConstraint),this.gammaConstraint=wD(e.gammaConstraint),this.betaRegularizer=DL(e.betaRegularizer),this.gammaRegularizer=DL(e.gammaRegularizer)}build(e){e=RF(e);const t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new HP(`Axis ${t} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new FF({ndim:e.length,axes:{[t]:n}})];const a=[n];this.scale&&(this.gamma=this.addWeight("gamma",a,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",a,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",a,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",a,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return xI((()=>{const n=null!=t.training&&t.training,a=OF(e),r=a.shape,o=r.length,s=LD(0,o),i=this.axis>=0?this.axis:this.axis+o;s.splice(i,1);const l=GP(1,o);l[i]=r[i];const u=s.slice();u.sort();const c=!Gx(u,LD(0,o).slice(0,o-1));if(!n)return(()=>{if(c){const e=qI(this.movingMean.read(),l),t=qI(this.movingVariance.read(),l),n=this.center?qI(this.beta.read(),l):null,r=this.scale?qI(this.gamma.read(),l):null;return qz(a,e,t,n,r,this.epsilon)}return qz(a,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();const[p,d,h]=Xz(a,this.gamma.read(),this.beta.read(),s,this.epsilon),f=(e,t,n)=>{xI((()=>{const a=1-n,r=e.read(),o=RN(AN(r,t),a);e.write(AN(r,o))}))};return(()=>{f(this.movingMean,d,this.momentum),f(this.movingVariance,h,this.momentum)})(),p}))}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:kF(this.betaInitializer),gammaInitializer:kF(this.gammaInitializer),movingMeanInitializer:kF(this.movingMeanInitializer),movingVarianceInitializer:kF(this.movingVarianceInitializer),betaRegularizer:BL(this.betaRegularizer),gammaRegularizer:BL(this.gammaRegularizer),betaConstraint:bD(this.betaConstraint),gammaConstraint:bD(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}}Yz.className="BatchNormalization",bI(Yz);class Kz extends WF{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"==typeof this.axis){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else{if(!Array.isArray(this.axis))throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);for(const e of this.axis)if(!Number.isInteger(e))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=CF(e.betaInitializer||"zeros"),this.gammaInitializer=CF(e.gammaInitializer||"ones"),this.betaRegularizer=DL(e.betaRegularizer),this.gammaRegularizer=DL(e.gammaRegularizer),this.supportsMasking=!0}build(e){const t=(e=RF(e)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(let e=0;e<this.axis.length;++e)this.axis[e]<0&&(this.axis[e]+=t);for(const e of this.axis)if(e<0||e>=t)throw new Error(`Invalid axis: ${e}`);if(this.axis.length!==rD(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const n=this.axis.map((t=>e[t]));this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}call(e,t){const n=OF(e),a=n.shape,r=a.length;return xI((()=>{let{mean:e,variance:t}=JN(n,this.axis,!0);const o=GP(1,r);for(const e of this.axis)o[e]=a[e];const s=e=>null!=e&&e.shape.length!==r?qI(e,o):e;let i=s(this.gamma.read()),l=s(this.beta.read());const u=[],c=[];for(let e=0;e<r;++e)-1!==this.axis.indexOf(e)?(u.push(a[e]),c.push(1)):(u.push(1),c.push(a[e]));return e=wN(e,u),t=wN(t,u),i=wN(i,c),l=wN(l,c),qz(n,e,t,l,i,this.epsilon)}))}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:kF(this.betaInitializer),gammaInitializer:kF(this.gammaInitializer),betaRegularizer:BL(this.betaRegularizer),gammaRegularizer:BL(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}}Kz.className="LayerNormalization",bI(Kz);class Jz extends WF{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new HP(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let t,n;if("number"==typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new HP(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],2!==e.padding[1].length)throw new HP(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new FF({ndim:4})]}computeOutputShape(e){let t,n;return e=RF(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(e,t){return xI((()=>{return t=OF(e),n=this.padding,a=this.dataFormat,xI((()=>{if(4!==t.rank)throw new HP(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(null==n&&(n=[[1,1],[1,1]]),2!==n.length||2!==n[0].length||2!==n[1].length)throw new HP("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==a&&(a="channelsLast"),"channelsLast"!==a&&"channelsFirst"!==a)throw new HP(`Unknown data format: ${a}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let e;return e="channelsFirst"===a?[[0,0],[0,0],n[0],n[1]]:[[0,0],n[0],n[1],[0,0]],rO(t,e)}));var t,n,a}))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}function Zz(e,t,n,a,r,o){return xI((()=>{let s;TD(r),ND(o),ID(a),null==n&&(n=[1,1]),null==a&&(a="valid"),null==r&&(r="channelsLast"),null==o&&(o="max"),e=GL(e,r);const i="same"===a?"same":"valid";return s="max"===o?FN(e,t,n,i):XI(e,t,n,i),"channelsFirst"===r&&(s=BO(s,[0,3,1,2])),s}))}function Qz(e,t,n,a,r,o){return xI((()=>{let s;TD(r),ND(o),ID(a),null==n&&(n=[1,1,1]),null==a&&(a="valid"),null==r&&(r="channelsLast"),null==o&&(o="max"),e=qL(e,r);const i="same"===a?"same":"valid";return s="max"===o?_N(e,t,n,i):YI(e,t,n,i),"channelsFirst"===r&&(s=BO(s,[0,4,1,2,3])),s}))}Jz.className="ZeroPadding2D",bI(Jz);class eV extends WF{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"==typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!=typeof e.poolSize[0])throw new HP(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);this.poolSize=e.poolSize}if(lD(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"==typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!=typeof e.strides[0])throw new HP(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);this.strides=e.strides}lD(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,ID(this.padding),this.inputSpec=[new FF({ndim:3})]}computeOutputShape(e){const t=jL((e=RF(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return xI((()=>{this.invokeCallHook(e,t),e=VD(OF(e),2);const n=this.poolingFunction(OF(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return SO(n,[2])}))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}}class tV extends eV{constructor(e){super(e)}poolingFunction(e,t,n,a,r){return TD(r),ID(a),Zz(e,t,n,a,r,"max")}}tV.className="MaxPooling1D",bI(tV);class nV extends eV{constructor(e){super(e)}poolingFunction(e,t,n,a,r){return TD(r),ID(a),Zz(e,t,n,a,r,"avg")}}nV.className="AveragePooling1D",bI(nV);class aV extends WF{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new HP(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];lD(this.poolSize,"poolSize"),lD(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,TD(this.dataFormat),ID(this.padding),this.inputSpec=[new FF({ndim:4})]}computeOutputShape(e){e=RF(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=jL(t,this.poolSize[0],this.padding,this.strides[0]),n=jL(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return xI((()=>(this.invokeCallHook(e,t),this.poolingFunction(OF(e),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class rV extends aV{constructor(e){super(e)}poolingFunction(e,t,n,a,r){return TD(r),ID(a),Zz(e,t,n,a,r,"max")}}rV.className="MaxPooling2D",bI(rV);class oV extends aV{constructor(e){super(e)}poolingFunction(e,t,n,a,r){return TD(r),ID(a),Zz(e,t,n,a,r,"avg")}}oV.className="AveragePooling2D",bI(oV);class sV extends WF{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new HP(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];lD(this.poolSize,"poolSize"),lD(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,TD(this.dataFormat),ID(this.padding),this.inputSpec=[new FF({ndim:5})]}computeOutputShape(e){e=RF(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],a="channelsFirst"===this.dataFormat?e[4]:e[3];return t=jL(t,this.poolSize[0],this.padding,this.strides[0]),n=jL(n,this.poolSize[1],this.padding,this.strides[1]),a=jL(a,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,a]:[e[0],t,n,a,e[4]]}call(e,t){return xI((()=>(this.invokeCallHook(e,t),this.poolingFunction(OF(e),this.poolSize,this.strides,this.padding,this.dataFormat))))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class iV extends sV{constructor(e){super(e)}poolingFunction(e,t,n,a,r){return TD(r),ID(a),Qz(e,t,n,a,r,"max")}}iV.className="MaxPooling3D",bI(iV);class lV extends sV{constructor(e){super(e)}poolingFunction(e,t,n,a,r){return TD(r),ID(a),Qz(e,t,n,a,r,"avg")}}lV.className="AveragePooling3D",bI(lV);class uV extends WF{constructor(e){super(e),this.inputSpec=[new FF({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new jP}}class cV extends uV{constructor(e){super(e||{})}call(e,t){return xI((()=>{const t=OF(e);return zN(t,1)}))}}cV.className="GlobalAveragePooling1D",bI(cV);class pV extends uV{constructor(e){super(e||{})}call(e,t){return xI((()=>{const t=OF(e);return ON(t,1)}))}}pV.className="GlobalMaxPooling1D",bI(pV);class dV extends WF{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,TD(this.dataFormat),this.inputSpec=[new FF({ndim:4})]}computeOutputShape(e){return e=e,"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new jP}getConfig(){const e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}}class hV extends dV{call(e,t){return xI((()=>{const t=OF(e);return"channelsLast"===this.dataFormat?zN(t,[1,2]):zN(t,[2,3])}))}}hV.className="GlobalAveragePooling2D",bI(hV);class fV extends dV{call(e,t){return xI((()=>{const t=OF(e);return"channelsLast"===this.dataFormat?ON(t,[1,2]):ON(t,[2,3])}))}}fV.className="GlobalMaxPooling2D",bI(fV);class mV extends WF{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,n={}){const a=n_(t.layer,n);delete t.layer;const r={layer:a};return Object.assign(r,t),new e(r)}}class gV extends mV{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=RF(e)).length<3)throw new HP(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){const t=[(e=RF(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),a=e[1];return[n[0],a].concat(n.slice(1))}call(e,t){return xI((()=>cz(((e,n)=>[OF(this.layer.call(e,t)),[]]),e=OF(e),[],!1,null,null,!1,!0)[1]))}}gV.className="TimeDistributed",bI(gV);class vV extends mV{constructor(e){super(e);const t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=n_(n),t.goBackwards=!0!==t.goBackwards;const a={};if(a.className=e.layer.getClassName(),a.config=t,this.backwardLayer=n_(a),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,function(e){sD(SD,"BidirectionalMergeMode",e)}(this.mergeMode),e.weights)throw new jP("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let t,n,a,r=this.forwardLayer.computeOutputShape(e);return Array.isArray(r)&&Array.isArray(r[0])||(r=[r]),r=r,this.returnState?(a=r.slice(1),t=r[0]):t=r[0],t=t,"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(a).concat(a.slice()):[t].concat(a).concat(a.slice()):YP(n)}apply(e,t){let n=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});const r=uz(e,n,a,this.numConstants);if(e=r.inputs,n=r.initialState,a=r.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(null==n||0===n.length)&&null==a)return super.apply(e,t);const o=[],s=[];if(null!=n){const e=n.length;if(e%2>0)throw new HP("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,o.push(...n);const a=n.map((e=>new FF({shape:e.shape})));this.forwardLayer.stateSpec=a.slice(0,e/2),this.backwardLayer.stateSpec=a.slice(e/2),s.push(...a)}if(null!=a)throw new jP("Support for constants in Bidirectional layers is not implemented yet.");const i=o[0]instanceof _F;for(const e of o)if(e instanceof _F!==i)throw new HP("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(i){const n=[e].concat(o),a=this.inputSpec.concat(s),r=this.inputSpec;this.inputSpec=a;const i=super.apply(n,t);return this.inputSpec=r,i}return super.apply(e,t)}call(e,t){return xI((()=>{const n=t.initialState;let a,r,o,s;if(null==n)a=this.forwardLayer.call(e,t),r=this.backwardLayer.call(e,t);else{const o=n.slice(0,n.length/2),s=n.slice(n.length/2);a=this.forwardLayer.call(e,Object.assign(t,{initialState:o})),r=this.backwardLayer.call(e,Object.assign(t,{initialState:s}))}return this.returnState&&(Array.isArray(a)&&(o=a.slice(1).concat(r.slice(1))),a=a[0],r=r[0]),this.returnSequences&&(r=dO(r,1)),"concat"===this.mergeMode?s=UD([a,r]):"sum"===this.mergeMode?s=NI(a,r):"ave"===this.mergeMode?s=RN(.5,NI(a,r)):"mul"===this.mergeMode?s=RN(a,r):null==this.mergeMode&&(s=[a,r]),this.returnState?null==this.mergeMode?s.concat(o):[s].concat(o):s}))}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){RD(this.forwardLayer.name,(()=>{this.forwardLayer.build(e)})),RD(this.backwardLayer.name,(()=>{this.backwardLayer.build(e)})),this.built=!0}computeMask(e,t){let n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){const e=this.forwardLayer.states.map((e=>null));return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){const n=n_(t.layer);if(delete t.layer,null!=t.numConstants)throw new jP("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const a=t;return a.layer=n,new e(a)}}vV.className="Bidirectional",bI(vV);var bV,yV;Ck().registerFlag("KEEP_INTERMEDIATE_TENSORS",(()=>!1),(e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(bV||(bV={})),function(e){let t;!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(yV||(yV={}));function wV(e,t,n=new Map,a=new Set){if(null==e)return null;if("function"==typeof Blob&&e instanceof Blob)return e.slice();if(a.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);const r=t(e);if(r.recurse&&null!==r.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(r.recurse){if(EV(e)){const r=Array.isArray(e)?[]:{};a.add(e);for(const o in e){const s=wV(e[o],t,n,a);r[o]=s}return a.delete(e),e.__proto__&&(r.__proto__=e.__proto__),r}throw new Error(`Can't recurse into non-iterable type: ${e}`)}return n.set(e,r.value),r.value}function xV(e,t=CV){return kV(e,t)}function kV(e,t,n=new Set){const a=e[0];if(n.has(a))throw new Error("Circular references are not supported.");const r=t(e);if(r.recurse&&null!==r.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(r.recurse){if(EV(a)){const r=Array.isArray(a)?[]:{};n.add(a);for(const o in a){const a=kV(e.map((e=>e[o])),t,n);r[o]=a}return n.delete(a),r}throw new Error(`Can't recurse into non-iterable type: ${a}`)}return r.value}function CV(e){return null===e?null:EV(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function EV(e){let t=!1;if(Ck().get("IS_BROWSER"))t=e instanceof TextDecoder;else{const{StringDecoder:a}=n(977);t=e instanceof a}return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"==typeof e&&!(e instanceof v$)&&!(e instanceof Promise)&&!t)}function SV(e){return function(e,t){return wV(e,t)}(e,$V)}function $V(e){return e instanceof v$?{value:e.clone(),recurse:!1}:EV(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}class TV{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(const t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);const e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");const t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}class IV extends TV{constructor(){super(IV.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){const e=2*this.capacity,t=new Array(e),n=this.length();for(let e=0;e<n;e++)t[e]=this.get(this.wrap(this.begin+e));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}function NV(e){return new MV(e)}function OV(e,t){return new jV(e,t)}IV.INITIAL_CAPACITY=32;class RV{async toArray(){const e=[];let t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){const e=this.prefetch(100),t=[];let n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)t=await this.next(),n=e(t.value)}handleErrors(e){return new zV(this,e)}filter(e){return new _V(this,e)}map(e){return new LV(this,e)}mapAsync(e){return new VV(this,e)}serialMapAsync(e){return new VV(this,e).serial()}flatmap(e){return new HV(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile((e=>!0===e))}rowMajorBatch(e,t=!0){return new FV(this,e,t)}columnMajorBatch(e,t=!0,n=CV){return this.rowMajorBatch(e,t).map((e=>xV(e,n)))}concatenate(e,t){return new jV(new AV([this,e]),t)}take(e){return e<0||null==e?this:new DV(this,e)}skip(e){return e<0||null==e?this:new PV(this,e)}prefetch(e){return new GV(this,e)}shuffle(e,t){return new qV(this,e,t)}serial(){return new BV(this)}}class AV extends RV{constructor(e){super(),this.items=e,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};const e=this.items[this.trav];return this.trav++,{value:SV(e),done:!1}}}class MV extends RV{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(e){throw e.message=`Error thrown while iterating through a dataset: ${e.message}`,e}}}class BV extends RV{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Serial`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){return this.upstream.next()}}class PV extends RV{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Skip`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){const e=await this.upstream.next();if(e.done)return e;kI(e.value)}return this.upstream.next()}}class DV extends RV{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return`${this.upstream.summary()} -> Take`}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}}class FV extends RV{constructor(e,t,n=!0){super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> RowMajorBatch`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){const e=[];for(;e.length<this.batchSize;){const t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}}class _V extends RV{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> Filter`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;;){const e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;kI(e.value)}}}class LV extends RV{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Map`}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=O$(e.value),n=this.transform(e.value),a=O$(n);for(const e of t)N$(e,a)||e.dispose();return{value:n,done:!1}}}class zV extends RV{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return`${this.upstream.summary()} -> handleErrors`}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(e){if(!this.handler(e))return{value:null,done:!0}}}}class VV extends RV{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> AsyncMap`}async next(){const e=await this.upstream.next();if(e.done)return{value:null,done:!0};const t=O$(e.value),n=await this.transform(e.value),a=O$(n);for(const e of t)N$(e,a)||e.dispose();return{value:n,done:!1}}}class WV extends RV{constructor(){super(),this.outputQueue=new IV,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}}class HV extends WV{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return`${this.upstream.summary()} -> Flatmap`}async pump(){const e=await this.upstream.next();if(e.done)return!1;const t=O$(e.value),n=this.transform(e.value),a=O$(n);this.outputQueue.pushAll(n);for(const e of t)N$(e,a)||e.dispose();return!0}}class jV extends RV{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,null==this.iterator){const e=await this.moreIterators.next();if(e.done)return{value:null,done:!0};this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}const t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}}var UV;!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(UV||(UV={}));class GV extends RV{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new TV(t)}summary(){return`${this.upstream.summary()} -> Prefetch`}refill(){for(;!this.buffer.isFull();){const e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}}class qV extends GV{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=sO.alea(n||n$().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then((()=>this.serialNext())),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){const e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(!t.done)return this.refill(),t;this.upstreamExhausted=!0}return{value:null,done:!0}}}class XV{constructor(){this.size=null}batch(e,t=!0){const n=this;let a;return Vx(e>0,(()=>`batchSize needs to be positive, but it is\n      ${e}`)),a=this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e),YV((async()=>(await n.iterator()).columnMajorBatch(e,t,KV)),a)}concatenate(e){const t=this;let n;return n=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,YV((async()=>(await t.iterator()).concatenate(await e.iterator())),n)}filter(e){const t=this;let n;return n=this.size===1/0?1/0:null,YV((async()=>(await t.iterator()).filter((t=>xI((()=>e(t)))))),n)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){const t=this;return YV((async()=>(await t.iterator()).map((t=>xI((()=>e(t)))))),this.size)}mapAsync(e){const t=this;return YV((async()=>(await t.iterator()).mapAsync(e)),this.size)}prefetch(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");const t=this;return YV((async()=>(await t.iterator()).prefetch(e)),this.size)}repeat(e){const t=this;let n;return n=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,YV((async()=>OV(NV((async()=>({value:await t.iterator(),done:!1}))).take(e))),n)}skip(e){const t=this;let n;return n=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,YV((async()=>(await t.iterator()).skip(e)),n)}shuffle(e,t,n=!0){if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);const a=this,r=sO.alea(t||n$().toString());return YV((async()=>{let t=r.int32();return n&&(t+=r.int32()),(await a.iterator()).shuffle(e,t.toString())}),this.size)}take(e){const t=this;let n;return n=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,YV((async()=>(await t.iterator()).take(e)),n)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}}function YV(e,t=null){return new class extends XV{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function KV(e){if(null===e)return null;const t=e[0];if(null==(n=t)||function(e){return null===e||"object"!=typeof e&&"function"!=typeof e}(n)||Array.isArray(n)||"object"==typeof n&&n instanceof v$||ak(n)){return{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof v$?$O(e):K$(e)}(e),recurse:!1}}var n;return{value:null,recurse:!0}}XV.MAX_BUFFER_SIZE=1e4;Symbol("out"),Symbol("field"),Symbol("quote"),Symbol("quoteafterquote"),Symbol("quoteinquote");function JV(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&Vx("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the CPU backend.`))}))}const ZV=rM;class QV extends Px{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new Bx(this,yI())}nextDataId(){return QV.nextDataId++}write(e,t,n){this.firstUse&&(this.firstUse=!1,Ck().get("IS_NODE")&&OS("\n============================\nHi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));const a={id:this.nextDataId()};return this.data.set(a,{values:e,dtype:n,refCount:1}),a}makeTensorInfo(e,t,n){let a;if("string"===t&&null!=n&&n.length>0&&ok(n[0])){const r=n.map((e=>a$(e)));a=this.write(r,e,t)}else a=this.write(n,e,t);return{dataId:a,shape:e,dtype:t}}refCount(e){if(this.data.has(e)){return this.data.get(e).refCount}return 0}incRef(e){this.data.get(e).refCount++}decRef(e){if(this.data.has(e)){this.data.get(e).refCount--}}move(e,t,n,a,r){this.data.set(e,{values:t,dtype:a,refCount:r})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){return EA(this.readSync(n.real.dataId),this.readSync(n.imag.dataId))}return this.data.get(e).values}bufferSync(e){const t=this.readSync(e.dataId);let n=t;if("string"===e.dtype)try{n=t.map((e=>r$(e)))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return DT(e.shape,e.dtype,n)}makeOutput(e,t,n){const a=this.write(e,t,n);return yI().makeTensorFromDataId(a,t,n,this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const t=n$();e();return{kernelMs:n$()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){JV([e],"where");const t=this.readSync(e.dataId);return ZV(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}QV.nextDataId=0;function eW(e,t,n){return({inputs:a,attrs:r,backend:o})=>{const{x:s}=a;if(JV(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const i=o,l=i.data.get(s.dataId).values,u=Ux(s.shape),c=n||s.dtype,p=tk(c,u);for(let e=0;e<u;++e)p[e]=t(l[e],r);return i.makeTensorInfo(s.shape,c,p)}}function tW(e,t,n){return({inputs:a,attrs:r,backend:o})=>{const{x:s}=a;if(JV(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");const i=o,l=i.data.get(s.dataId).values,u=n||s.dtype,c=t(l,u,r);return i.makeTensorInfo(s.shape,u,c)}}EI("cpu",(()=>new QV),1);const nW=eW(CC,(e=>e>=0?e:Math.exp(e)-1)),aW={kernelName:CC,backendName:"cpu",kernelFunc:nW};function rW(e){const{inputs:t,backend:n}=e,{x:a}=t;return n.incRef(a.dataId),{dataId:a.dataId,shape:a.shape,dtype:a.dtype}}const oW={kernelName:zC,backendName:"cpu",kernelFunc:rW};function sW(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{alpha:o}=a;JV([r],"leakyRelu");const s=Ux(r.shape),i=n.data.get(r.dataId).values,l=ek("float32",s);for(let e=0;e<i.length;e++)l[e]=i[e]<0?o*i[e]:i[e];return n.makeTensorInfo(r.shape,"float32",l)}const iW={kernelName:GC,backendName:"cpu",kernelFunc:sW};function lW(e){return(t,n,a,r,o)=>{const s=YT(t,n),i=s.length,l=ck(s),u=ek(o,Ux(s)),c=t.length,p=n.length,d=ck(t),h=ck(n),f=qT(t,s),m=qT(n,s);if(f.length+m.length===0)for(let t=0;t<u.length;++t)u[t]=e(a[t%a.length],r[t%r.length]);else for(let t=0;t<u.length;++t){const n=bk(t,i,l),o=n.slice(-c);f.forEach((e=>o[e]=0));const s=vk(o,c,d),g=n.slice(-p);m.forEach((e=>g[e]=0));const v=vk(g,p,h);u[t]=e(a[s],r[v])}return[u,s]}}const uW=lW(((e,t)=>e<0?t*e:e));function cW(e){const{inputs:t,backend:n}=e,{x:a,alpha:r}=t;JV([a,r],"prelu");const o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,[i,l]=uW(a.shape,r.shape,o,s,"float32");return n.makeTensorInfo(l,"float32",i)}const pW={kernelName:TE,backendName:"cpu",kernelFunc:cW},dW=eW(AE,(e=>Math.max(0,e))),hW={kernelName:AE,backendName:"cpu",kernelFunc:dW},fW=eW(_E,(e=>Math.min(Math.max(0,e),6))),mW={kernelName:_E,backendName:"cpu",kernelFunc:fW};function gW(e){return(t,n,a)=>{const r=ek(n,t.length);for(let n=0;n<t.length;++n)r[n]=e(t[n],a);return r}}const vW=gW((e=>1/(1+Math.exp(-e)))),bW=eW(YE,(e=>1/(1+Math.exp(-e)))),yW={kernelName:YE,backendName:"cpu",kernelFunc:bW};function wW(e,t,n,a,r){if("linear"===n)return rW({inputs:{x:t},backend:e});if("relu"===n)return dW({inputs:{x:t},backend:e});if("elu"===n)return nW({inputs:{x:t},backend:e});if("relu6"===n)return fW({inputs:{x:t},backend:e});if("prelu"===n)return cW({inputs:{x:t,alpha:a},backend:e});if("leakyrelu"===n)return sW({inputs:{x:t},backend:e,attrs:{alpha:r}});if("sigmoid"===n)return bW({inputs:{x:t},backend:e});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}function xW(e){const{inputs:t,backend:n}=e,{real:a,imag:r}=t,o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,i=n.makeTensorInfo(a.shape,"complex64");return n.data.get(i.dataId).complexTensorInfos={real:n.makeTensorInfo(a.shape,"float32",o),imag:n.makeTensorInfo(r.shape,"float32",s)},i}const kW={kernelName:Qk,backendName:"cpu",kernelFunc:xW};function CW(e,t,n="float32"){if("complex64"===n){return xW({inputs:{real:CW(e,t,"float32"),imag:CW(e,t,"float32")},backend:e})}const a=fk(Ux(t),n);return e.makeTensorInfo(t,n,a)}function EW(e){const{inputs:t,backend:n}=e,{input:a}=t,r=n.data.get(a.dataId).complexTensorInfos.real,o=n.data.get(r.dataId).values;return n.makeTensorInfo(r.shape,r.dtype,o)}const SW={kernelName:OE,backendName:"cpu",kernelFunc:EW};function $W(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{dtype:o}=a;if("complex64"===o){if("complex64"===r.dtype)return rW({inputs:{x:r},backend:n});const e=CW(n,r.shape,r.dtype),t=$W({inputs:{x:r},backend:n,attrs:{dtype:"float32"}}),a=xW({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),a}if("complex64"===r.dtype){const e=EW({inputs:{input:r},backend:n}),t=$W({inputs:{x:e},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(e),t}if(!nk(r.dtype,o)){const e=rW({inputs:{x:r},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:o}}if("int32"===o){const e=n.data.get(r.dataId).values,t=Int32Array.from(e);return n.makeTensorInfo(r.shape,"int32",t)}if("bool"===o){const e=n.data.get(r.dataId).values,t=t$([0],r.dtype),[a,o]=lW(((e,t)=>e!==t?1:0))(r.shape,[],e,t,"bool");return n.makeTensorInfo(o,"bool",a)}throw new Error(`Error in Cast: failed to cast ${r.dtype} to ${o}`)}const TW={kernelName:Kk,backendName:"cpu",kernelFunc:$W};function IW(e,t,n,a){return null==n?({inputs:n,backend:r})=>{const{a:o,b:s}=n,i=r;JV([o,s],e);const l=i.data.get(o.dataId).values,u=i.data.get(s.dataId).values,c="string"===o.dtype?nM(l):l,p="string"===o.dtype?nM(u):u,d=a||o.dtype,[h,f]=t(o.shape,s.shape,c,p,d);return i.makeTensorInfo(f,d,h)}:({inputs:e,backend:r})=>{const{a:o,b:s}=e,i=r;if("complex64"===o.dtype||"complex64"===s.dtype){const e=$W({inputs:{x:o},backend:i,attrs:{dtype:"complex64"}}),t=i.data.get(e.dataId),a=t.complexTensorInfos.real,r=t.complexTensorInfos.imag,l=i.data.get(a.dataId).values,u=i.data.get(r.dataId).values,c=$W({inputs:{x:s},backend:i,attrs:{dtype:"complex64"}}),p=i.data.get(c.dataId),d=p.complexTensorInfos.real,h=p.complexTensorInfos.imag,f=i.data.get(d.dataId).values,m=i.data.get(h.dataId).values,[g,v,b]=n(o.shape,s.shape,l,u,f,m),y=i.makeTensorInfo(b,"float32",g),w=i.makeTensorInfo(b,"float32",v),x=xW({inputs:{real:y,imag:w},backend:i});return i.disposeIntermediateTensorInfo(e),i.disposeIntermediateTensorInfo(c),i.disposeIntermediateTensorInfo(y),i.disposeIntermediateTensorInfo(w),x}{const e=i.data.get(o.dataId).values,n=i.data.get(s.dataId).values,r=a||o.dtype,[l,u]=t(o.shape,s.shape,e,n,r);return i.makeTensorInfo(u,r,l)}}}function NW(e){return(t,n,a,r,o,s)=>{const i=YT(t,n),l=Ux(i),u=i.length,c=ck(i),p=ek("float32",l),d=ek("float32",l),h=qT(t,i),f=qT(n,i),m=EA(a,r),g=EA(o,s),v=t.length,b=ck(t),y=n.length,w=ck(n);if(h.length+f.length===0)for(let t=0;t<p.length;t++){const n=t%m.length,a=t%g.length,r=e(m[2*n],m[2*n+1],g[2*a],g[2*a+1]);p[t]=r.real,d[t]=r.imag}else for(let t=0;t<p.length;t++){const n=bk(t,u,c),a=n.slice(-v);h.forEach((e=>a[e]=0));const r=vk(a,v,b),o=n.slice(-y);f.forEach((e=>o[e]=0));const s=vk(o,y,w),i=e(m[2*r],m[2*r+1],g[2*s],g[2*s+1]);p[t]=i.real,d[t]=i.imag}return[p,d,i]}}const OW=lW(((e,t)=>e+t)),RW=NW(((e,t,n,a)=>({real:e+n,imag:t+a}))),AW=IW(Rk,OW,RW),MW={kernelName:Rk,backendName:"cpu",kernelFunc:AW};function BW(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{shape:o}=a,s=Ux(r.shape),i=Jx(o,s),l=Ux(i);Vx(s===l,(()=>`The new shape (${i}) has ${l} elements and the old shape (${r.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`)),n.incRef(r.dataId);const u=n.data.get(r.dataId);if(null!=u.complexTensorInfos){const e=u.complexTensorInfos.real,t=u.complexTensorInfos.imag;e.shape=i,t.shape=i}return{dataId:r.dataId,shape:i,dtype:r.dtype}}const PW={kernelName:ME,backendName:"cpu",kernelFunc:BW};function DW(e){const{inputs:t,backend:n,attrs:a}=e,{a:r,b:o}=t,{transposeA:s,transposeB:i}=a;JV([r,o],"matMul");const l=r.shape.length,u=o.shape.length,c=s?r.shape[l-2]:r.shape[l-1],p=i?o.shape[u-1]:o.shape[u-2],d=s?r.shape[l-1]:r.shape[l-2],h=i?o.shape[u-2]:o.shape[u-1],f=r.shape.slice(0,-2),m=o.shape.slice(0,-2),g=Ux(f),v=Ux(m),b=YT(r.shape.slice(0,-2),o.shape.slice(0,-2)).concat([d,h]);Vx(c===p,(()=>`Error in matMul: inner shapes (${c}) and (${p}) of Tensors with shapes ${r.shape} and ${o.shape} and transposeA=${s} and transposeB=${i} must match.`));const y=i?[v,h,p]:[v,p,h],w=BW({inputs:{x:r},backend:n,attrs:{shape:s?[g,c,d]:[g,d,c]}}),x=BW({inputs:{x:o},backend:n,attrs:{shape:y}}),k=s?w.shape[1]:w.shape[2],C=s?w.shape[2]:w.shape[1],E=i?x.shape[1]:x.shape[2],S=Math.max(g,v),$=n.data.get(w.dataId).values,T=n.data.get(x.dataId).values,I=ck(w.shape),N=ck(x.shape),[O,R,A]=s?[I[0],1,I[1]]:[I[0],I[1],1],[M,B,P]=i?[1,N[1],N[0]]:[N[1],1,N[0]],D=C*E,F=DT([S,C,E],w.dtype),_=F.values,L=n.blockSize;for(let e=0;e<S;e++)for(let t=0;t<C;t+=L)for(let n=0;n<E;n+=L)for(let a=0;a<k;a+=L){const r=Math.min(t+L,C),o=Math.min(n+L,E),s=Math.min(a+L,k);for(let i=t;i<r;i++)for(let t=n;t<o;t++){let n=0;for(let r=a;r<s;r++){const a=Math.min(e,g-1)*O,o=Math.min(e,v-1)*P;n+=$[a+i*R+r*A]*T[r*M+t*B+o]}_[e*D+(i*E+t)]+=n}}return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(x),n.makeTensorInfo(b,F.dtype,F.values)}const FW={kernelName:Gk,backendName:"cpu",kernelFunc:DW};const _W={kernelName:TS,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{a:r,b:o,bias:s,preluActivationWeights:i}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:p}=a;let d,h,f;const m=[];d=DW({inputs:{a:r,b:o},attrs:{transposeA:l,transposeB:u},backend:n}),s&&(h=AW({inputs:{a:d,b:s},backend:n}),m.push(d),d=h),c&&(f=wW(n,d,c,i,p),m.push(d),d=f);for(const e of m)n.disposeIntermediateTensorInfo(e);return d}};function LW(e){const t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}const zW={kernelName:Ik,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend;JV(t,"abs");let a=new Float32Array(Ux(t.shape));return a=LW(n.data.get(t.dataId).values),n.makeOutput(a,t.shape,t.dtype)}},VW=eW(Nk,(e=>Math.acos(e))),WW={kernelName:Nk,backendName:"cpu",kernelFunc:VW},HW=eW(Ok,(e=>Math.acosh(e))),jW={kernelName:Ok,backendName:"cpu",kernelFunc:HW};const UW={kernelName:Ak,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,a=t;JV(t,"addN");const r=a.map((e=>n.data.get(e.dataId).values)),o=DT(a[0].shape,a[0].dtype),s=o.values;for(let e=0;e<a.length;e++){const t=r[e];for(let e=0;e<s.length;e++)s[e]+=t[e]}return n.makeTensorInfo(o.shape,o.dtype,o.values)}};function GW(e,t,n,a,r){const o=t.length,s=Ux(t),i=ck(t),l=ck(r),u=ek(n,Ux(r));for(let t=0;t<s;++t){const n=bk(t,o,i),r=new Array(n.length);for(let e=0;e<r.length;e++)r[e]=n[a[e]];u[vk(r,o,l)]=e[t]}return u}function qW(e){const{inputs:t,attrs:n,backend:a}=e,{x:r}=t,{perm:o}=n;JV(r,"transpose");const s=r.shape.length,i=new Array(s);for(let e=0;e<i.length;e++)i[e]=r.shape[o[e]];const l=GW(a.data.get(r.dataId).values,r.shape,r.dtype,o,i);return{dataId:a.write(l,i,r.dtype),shape:i,dtype:r.dtype}}const XW={kernelName:yS,backendName:"cpu",kernelFunc:qW};const YW={kernelName:Mk,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:s}=a;JV(r,"all");const i=Zx(o,r.shape);let l=i;const u=qN(l,r.shape.length);let c=r;null!=u&&(c=qW({inputs:{x:r},backend:n,attrs:{perm:u}}),l=YN(l.length,r.shape.length)),GN("all",l,c.shape.length);const[p,d]=jN(c.shape,l),h=Ux(d),f=fk(Ux(p),c.dtype),m=n.data.get(c.dataId).values;for(let e=0;e<f.length;++e){const t=e*h;let n=m[t];for(let e=0;e<h;++e){const a=m[t+e];n=n&&a}f[e]=n}null!=u&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(p,c.dtype,f);if(s){const e=BW({inputs:{x:g},backend:n,attrs:{shape:UN(p,i)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const KW={kernelName:Bk,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:s}=a;JV(r,"any");const i=Zx(o,r.shape);let l=i;const u=qN(l,r.shape.length);let c=r;null!=u&&(c=qW({inputs:{x:r},backend:n,attrs:{perm:u}}),l=YN(l.length,r.shape.length)),GN("any",l,c.shape.length);const[p,d]=jN(c.shape,l),h=Ux(d),f=fk(Ux(p),c.dtype),m=n.data.get(c.dataId).values;for(let e=0;e<f.length;++e){const t=e*h;let n=m[t];for(let e=0;e<h;++e){const a=m[t+e];n=n||a}f[e]=n}null!=u&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(p,c.dtype,f);if(s){const e=BW({inputs:{x:g},backend:n,attrs:{shape:UN(p,i)}});return n.disposeIntermediateTensorInfo(g),e}return g}};const JW={kernelName:Pk,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o}=a;JV(r,"argMax");let s=Zx(o,r.shape);const i=qN(s,r.shape.length);let l=r;const u=[];null!=i&&(l=qW({inputs:{x:r},backend:n,attrs:{perm:i}}),u.push(l),s=YN(s.length,l.shape.length)),s=[s[0]],GN("argMax",s,l.shape.length);const[c,p]=jN(l.shape,s),d=fk(Ux(c),"int32"),h=Ux(p),f=n.data.get(l.dataId).values;for(let e=0;e<d.length;++e){const t=e*h;let n=f[t],a=0;for(let e=0;e<h;++e){const r=f[t+e];r>n&&(n=r,a=e)}d[e]=a}return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(c,"int32",d)}};const ZW={kernelName:Dk,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o}=a;JV(r,"argMin");let s=Zx(o,r.shape);const i=qN(s,r.shape.length);let l=r;const u=[];null!=i&&(l=qW({inputs:{x:r},backend:n,attrs:{perm:i}}),u.push(l),s=YN(s.length,l.shape.length)),s=[s[0]],GN("argMin",s,l.shape.length);const[c,p]=jN(l.shape,s),d=fk(Ux(c),"int32"),h=Ux(p),f=n.data.get(l.dataId).values;for(let e=0;e<d.length;++e){const t=e*h;let n=f[t],a=0;for(let e=0;e<h;++e){const r=f[t+e];r<n&&(n=r,a=e)}d[e]=a}return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(c,"int32",d)}},QW=eW(Fk,(e=>Math.asin(e))),eH={kernelName:Fk,backendName:"cpu",kernelFunc:QW},tH=eW(_k,(e=>Math.asinh(e))),nH={kernelName:_k,backendName:"cpu",kernelFunc:tH},aH=eW(Lk,(e=>Math.atan(e))),rH={kernelName:Lk,backendName:"cpu",kernelFunc:aH},oH=lW(((e,t)=>Math.atan2(e,t))),sH=IW(Vk,oH),iH={kernelName:Vk,backendName:"cpu",kernelFunc:sH},lH=eW(zk,(e=>Math.atanh(e))),uH={kernelName:zk,backendName:"cpu",kernelFunc:lH};function cH(e,t,n,a,r,o){const s=r.strideHeight,i=r.strideWidth,l=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,p=r.effectiveFilterWidth,d=r.padInfo.top,h=r.padInfo.left,f="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=DT(r.outShape,n),g=m.values,v=r.outShape[1]*r.outShape[2]*r.outShape[3],b=r.outShape[2]*r.outShape[3],y=r.outShape[3];for(let t=0;t<r.batchSize;++t){const n=t*v,m=t*a[0];for(let t=0;t<r.inChannels;++t)for(let v=0;v<r.outHeight;++v){const w=v*s-d,x=Math.max(0,w),k=Math.min(r.inHeight,c+w),C=n+v*b;for(let n=0;n<r.outWidth;++n){const s=n*i-h,c=Math.max(0,s),d=Math.min(r.inWidth,p+s);let v=f,b=0,w=0;for(let n=x;n<k;n+=l){const r=m+n*a[1];for(let n=c;n<d;n+=u){const s=e[r+n*a[2]+t];"max"===o&&s>v?v=s:"avg"===o&&(b+=s,w++)}if(isNaN(v))break}g[C+n*y+t]="avg"===o?b/w:v}}}return m}function pH(e,t,n,a,r=!1,o=!1){const s=DT(a.outShape,"int32"),i=a.strideHeight,l=a.strideWidth,u=a.dilationHeight,c=a.dilationWidth,p=a.effectiveFilterHeight,d=a.effectiveFilterWidth,h=a.padInfo.top,f=a.padInfo.left,m=DT(t,n,e);for(let e=0;e<a.batchSize;++e)for(let t=0;t<a.inChannels;++t)for(let n=0;n<a.outHeight;++n){const g=n*i-h;let v=g;for(;v<0;)v+=u;const b=Math.min(a.inHeight,p+g);for(let i=0;i<a.outWidth;++i){const p=i*l-f;let h=p;for(;h<0;)h+=c;const y=Math.min(a.inWidth,d+p);let w=Number.NEGATIVE_INFINITY,x=-1;for(let n=v;n<b;n+=u){const s=n-g;for(let i=h;i<y;i+=c){const l=i-p,u=m.get(e,n,i,t);u>w&&(w=u,x=r?o?((e*a.inHeight+n)*a.inWidth+i)*a.inChannels+t:(n*a.inWidth+i)*a.inChannels+t:s*d+l)}}s.set(x,e,n,i,t)}}return s}function dH(e,t,n,a,r,o){const s=r.strideDepth,i=r.strideHeight,l=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,p=r.dilationWidth,d=r.effectiveFilterDepth,h=r.effectiveFilterHeight,f=r.effectiveFilterWidth,m=r.padInfo.front,g=r.padInfo.top,v=r.padInfo.left,b="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,y=DT(r.outShape,n),w=y.values,x=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],k=r.outShape[2]*r.outShape[3]*r.outShape[4],C=r.outShape[3]*r.outShape[4],E=r.outShape[4];for(let t=0;t<r.batchSize;++t){const n=t*x,y=t*a[0];for(let t=0;t<r.inChannels;++t)for(let x=0;x<r.outDepth;++x){const S=x*s-m;let $=S;for(;$<0;)$+=u;const T=Math.min(r.inDepth,d+S),I=n+x*k;for(let n=0;n<r.outHeight;++n){const s=n*i-g;let d=s;for(;d<0;)d+=c;const m=Math.min(r.inHeight,h+s),x=I+n*C;for(let n=0;n<r.outWidth;++n){const s=n*l-v;let i=s;for(;i<0;)i+=p;const h=Math.min(r.inWidth,f+s),g=x+n*E;let k=b,C=0,S=0;for(let n=$;n<T;n+=u){const r=y+n*a[1];for(let n=d;n<m;n+=c){const s=r+n*a[2];for(let n=i;n<h;n+=p){const r=e[s+n*a[3]+t];if("max"===o&&r>k?k=r:"avg"===o&&(C+=r,S++),isNaN(k))break}if(isNaN(k))break}if(isNaN(k))break}w[g+t]="avg"===o?C/S:k}}}}return y}const hH={kernelName:Wk,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t;JV(r,"avgPool");const{filterSize:o,strides:s,pad:i,dimRoundingMode:l}=a;Vx(jI(s,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '1'`));const u=BI(r.shape,o,s,1,i,l);let c;if(1===u.filterWidth&&1===u.filterHeight&&Gx(u.inShape,u.outShape))c=rW({inputs:{x:r},backend:n});else{const e=n.data.get(r.dataId).values,t=ck(r.shape),a=cH(e,r.shape,r.dtype,t,u,"avg");c=n.makeTensorInfo(u.outShape,r.dtype,a.values)}return c}};const fH={kernelName:jk,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{filterSize:o,strides:s,pad:i,dimRoundingMode:l,dataFormat:u}=a;JV(r,"avgPool3d");const c=PI(r.shape,o,s,1,i,l,u),p=dH(n.data.get(r.dataId).values,r.shape,r.dtype,ck(r.shape),c,"avg");return n.makeTensorInfo(p.shape,"float32",p.values)}};const mH={kernelName:Uk,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o}=t,{filterSize:s,strides:i,pad:l,dimRoundingMode:u}=a;JV([r,o],"avgPool3DGrad");const c=PI(o.shape,s,i,1,l,u),p=c.strideDepth,d=c.strideHeight,h=c.strideWidth,f=c.filterDepth,m=c.filterHeight,g=c.filterWidth,v=c.dilationDepth,b=c.dilationHeight,y=c.dilationWidth,w=c.effectiveFilterDepth,x=c.effectiveFilterHeight,k=c.effectiveFilterWidth,C=w-1-c.padInfo.front,E=k-1-c.padInfo.left,S=x-1-c.padInfo.top,$=DT(o.shape,"float32"),T=1/(f*m*g),I=n.bufferSync(r);for(let e=0;e<c.batchSize;++e)for(let t=0;t<c.inChannels;++t)for(let n=0;n<c.inDepth;++n)for(let a=0;a<c.inHeight;++a)for(let r=0;r<c.inWidth;++r){const o=n-C,s=a-S,i=r-E;let l=0;for(let n=0;n<w;n+=v){const a=(o+n)/p;if(!(a<0||a>=c.outDepth||Math.floor(a)!==a))for(let n=0;n<x;n+=b){const r=(s+n)/d;if(!(r<0||r>=c.outHeight||Math.floor(r)!==r))for(let n=0;n<k;n+=y){const o=(i+n)/h;if(o<0||o>=c.outWidth||Math.floor(o)!==o)continue;l+=I.get(e,a,r,o,t)}}}$.set(l*T,e,n,a,r,t)}return n.makeTensorInfo($.shape,$.dtype,$.values)}};const gH={kernelName:Hk,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o}=t,s=o;JV([r,o],"avgPoolGrad");const{filterSize:i,strides:l,pad:u}=a,c=BI(s.shape,i,l,1,u),p=c.strideHeight,d=c.strideWidth,h=c.filterHeight,f=c.filterWidth,m=c.dilationHeight,g=c.dilationWidth,v=c.effectiveFilterHeight,b=c.effectiveFilterWidth,y=b-1-c.padInfo.left,w=v-1-c.padInfo.top,x=DT(s.shape,"float32"),k=1/(h*f),C=n.data.get(r.dataId).values,E=DT(r.shape,"float32",C);for(let e=0;e<c.batchSize;++e)for(let t=0;t<c.inChannels;++t)for(let n=0;n<c.inHeight;++n)for(let a=0;a<c.inWidth;++a){const r=n-w,o=a-y;let s=0;for(let n=0;n<v;n+=m){const a=(r+n)/p;if(!(a<0||a>=c.outHeight||Math.floor(a)!==a))for(let n=0;n<b;n+=g){const r=(o+n)/d;if(r<0||r>=c.outWidth||Math.floor(r)!==r)continue;s+=E.get(e,a,r,t)}}x.set(s*k,e,n,a,t)}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};const vH={kernelName:PC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,scale:o,offset:s,mean:i,variance:l}=t;Vx(i.shape.length===l.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),Vx(null==s||i.shape.length===s.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),Vx(null==o||i.shape.length===o.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks.")),JV([r,i,l,o,s],"batchNorm");let{varianceEpsilon:u}=a;null==u&&(u=.001);const c=n.data.get(r.dataId).values,p=n.data.get(i.dataId).values,d=n.data.get(l.dataId).values,h=o?n.data.get(o.dataId).values:new Float32Array([1]),f=s?n.data.get(s.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),g=f.length,v=h.length,b=d.length,y=p.length;let w=0,x=0,k=0,C=0;for(let e=0;e<c.length;++e)m[e]=f[w++]+(c[e]-p[x++])*h[k++]/Math.sqrt(d[C++]+u),w>=g&&(w=0),x>=y&&(x=0),k>=v&&(k=0),C>=b&&(C=0);return n.makeTensorInfo(r.shape,r.dtype,m)}};function bH(e,t,n,a,r){const o=pI(a,t,n),s=Ux(n),i=ck(a);if(o){const n=dI(t,i);return"string"===r?e.slice(n,n+s):e.subarray(n,n+s)}const l=DT(a,r,"string"===r?nM(e):e),u=DT(n,r);for(let e=0;e<u.size;++e){const n=u.indexToLoc(e),a=n.map(((e,n)=>e+t[n]));u.set(l.get(...a),...n)}return"string"===r?aM(u.values):u.values}function yH(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{begin:o,size:s}=a;JV(r,"slice");const[i,l]=hI(r,o,s);QT(r,i,l);const u=bH(n.data.get(r.dataId).values,i,l,r.shape,r.dtype);return n.makeTensorInfo(l,r.dtype,u)}const wH={kernelName:UE,backendName:"cpu",kernelFunc:yH};const xH={kernelName:qk,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockShape:o,crops:s}=a;JV([r],"batchToSpaceND");const i=o.reduce(((e,t)=>e*t)),l=iA(r.shape,o,i),u=lA(l.length,o.length),c=uA(r.shape,o,i),p=cA(s,o.length),d=pA(c,s,o.length),h=BW({inputs:{x:r},backend:n,attrs:{shape:l}}),f=qW({inputs:{x:h},backend:n,attrs:{perm:u}}),m=BW({inputs:{x:f},backend:n,attrs:{shape:c}}),g=yH({inputs:{x:m},backend:n,attrs:{begin:p,size:d}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}};function kH(e,t,n,a,r){const o=Ux(a),s=fk(r,n);for(let n=0;n<e.length;n++){const a=e[n];if(a<0)throw new Error("Input x must be non-negative!");a>=r||(s[a]+=o>0?t[n]:1)}return s}function CH(e,t,n,a=!1){const r=e.shape[0],o=e.shape[1],s=DT([r,n],t.dtype);for(let i=0;i<r;i++)for(let r=0;r<o;r++){const o=e.get(i,r);if(o<0)throw new Error("Input x must be non-negative!");o>=n||(a?s.set(1,i,o):t.size>0?s.set(s.get(i,o)+t.get(i,r),i,o):s.set(s.get(i,o)+1,i,o))}return s}const EH={kernelName:Xk,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,weights:o}=t,{size:s}=a,i=kH(n.data.get(r.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,s);return n.makeTensorInfo([s],o.dtype,i)}};const SH={kernelName:Yk,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:a,s1:r}=t,o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,i=YT(Array.from(o),Array.from(s));return n.makeTensorInfo([i.length],"int32",Int32Array.from(i))}},$H=gW((e=>Math.ceil(e))),TH=tW(Jk,$H),IH={kernelName:Jk,backendName:"cpu",kernelFunc:TH},NH=eW(Zk,((e,t)=>{const n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),OH={kernelName:Zk,backendName:"cpu",kernelFunc:NH},RH={kernelName:eC,backendName:"cpu",kernelFunc:e=>{const{x:t}=e.inputs,n=e.backend,a=new Float32Array(Ux(t.shape)),r=n.data.get(t.dataId),o=r.complexTensorInfos.real,s=r.complexTensorInfos.imag,i=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values;for(let e=0;e<i.length;e++){const t=i[e],n=l[e];a[e]=Math.hypot(t,n)}return n.makeOutput(a,t.shape,"float32")}};function AH(e,t,n,a){const r=tk(n,Ux(t));if(a&&"string"!==n){let t=0;e.forEach((e=>{const n=Ux(e.shape);r.set(e.vals,t),t+=n}))}else{let a=0;e.forEach((e=>{const o="string"===n?nM(e.vals):e.vals;let s=0;for(let n=0;n<e.shape[0];++n){const i=n*t[1]+a;for(let t=0;t<e.shape[1];++t)r[i+t]=o[s++]}a+=e.shape[1]}))}return r}function MH(e){const{inputs:t,backend:n}=e,{input:a}=t,r=n.data.get(a.dataId).complexTensorInfos.imag,o=n.data.get(r.dataId).values;return n.makeTensorInfo(r.shape,r.dtype,o)}const BH={kernelName:WC,backendName:"cpu",kernelFunc:MH};function PH(e){const{inputs:t,backend:n,attrs:a}=e,{axis:r}=a,o=Zx(r,t[0].shape)[0];let s=aA(t.map((e=>e.shape)),o);if(0===Ux(s))return n.makeTensorInfo(s,t[0].dtype,[]);const i=t.filter((e=>Ux(e.shape)>0));if(1===i.length)return rW({inputs:{x:i[0]},backend:n});if(nA(i.map((e=>e.shape)),o),"complex64"===i[0].dtype){const e=i.map((e=>EW({inputs:{input:e},backend:n}))),t=i.map((e=>MH({inputs:{input:e},backend:n}))),a=PH({inputs:e,backend:n,attrs:{axis:o}}),r=PH({inputs:t,backend:n,attrs:{axis:o}}),s=xW({inputs:{real:a,imag:r},backend:n});return e.forEach((e=>n.disposeIntermediateTensorInfo(e))),t.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(r),s}const l=i.map((e=>{const t=Ux(e.shape.slice(o));return BW({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),u=l.map((e=>({vals:n.data.get(e.dataId).values,shape:e.shape})));s=aA(l.map((e=>e.shape)),1);const c=1===l[0].shape[0],p=AH(u,s,t[0].dtype,c),d=aA(i.map((e=>e.shape)),o),h=n.makeTensorInfo(d,t[0].dtype,p);return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),h}const DH={kernelName:tC,backendName:"cpu",kernelFunc:PH};function FH(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o}=t,{strides:s,pad:i,dataFormat:l,dilations:u,dimRoundingMode:c}=a;JV([r,o],"conv2d");const p=UI(l),d=DI(r.shape,o.shape,s,u,i,c,!1,p),h=d.filterHeight,f=d.filterWidth,m=d.dilationHeight,g=d.dilationWidth,v=d.padInfo.left,b=d.padInfo.top,y="channelsLast"===d.dataFormat,w=new h$(d.outShape,r.dtype),x=ck(r.shape),k=ck(o.shape),C=x[0],E=y?x[1]:x[2],S=y?x[2]:1,$=y?1:x[1],T=w.strides[0],I=y?w.strides[1]:w.strides[2],N=y?w.strides[2]:1,O=y?1:w.strides[1],R=n.data.get(r.dataId).values,A=n.data.get(o.dataId).values,M=w.values;for(let e=0;e<d.batchSize;++e){const t=e*C,n=e*T;for(let e=0;e<d.outHeight;++e){const a=n+e*I,r=e*d.strideHeight-b;for(let e=0;e<h;++e){const n=r+e*m;if(n<0||n>=d.inHeight)continue;const o=e*k[0],s=t+n*E;for(let e=0;e<d.outWidth;++e){const t=a+e*N,n=e*d.strideWidth-v;for(let e=0;e<f;++e){const a=n+e*g;if(a<0||a>=d.inWidth)continue;const r=s+a*S;let i=o+e*k[1];for(let e=0;e<d.inChannels;++e){const n=R[r+e*$];for(let e=0;e<d.outChannels;++e)M[t+e*O]+=n*A[i+e];i+=d.outChannels}}}}}}return n.makeTensorInfo(w.shape,w.dtype,M)}const _H={kernelName:nC,backendName:"cpu",kernelFunc:FH};const LH={kernelName:aC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,dy:o}=t,{strides:s,pad:i,dataFormat:l,dimRoundingMode:u,filterShape:c}=a;JV([r,o],"conv2dBackpropFilter");const p=UI(l),d=DI(r.shape,c,s,1,i,u,!1,p),{strideHeight:h,strideWidth:f,filterHeight:m,filterWidth:g}=d,v="channelsLast"===d.dataFormat,b=new h$(d.filterShape,"float32"),y=d.padInfo.left,w=d.padInfo.top,x=n.data.get(r.dataId).values,k=n.data.get(o.dataId).values,C=new h$(r.shape,r.dtype,x),E=new h$(o.shape,o.dtype,k);for(let e=0;e<m;++e){const t=Math.max(0,Math.ceil((w-e)/h)),n=Math.min(d.outHeight,(d.inHeight+w-e)/h);for(let a=0;a<g;++a){const r=Math.max(0,Math.ceil((y-a)/f)),o=Math.min(d.outWidth,(d.inWidth+y-a)/f);for(let s=0;s<d.inChannels;++s)for(let i=0;i<d.outChannels;++i){let l=0;for(let u=0;u<d.batchSize;++u)for(let c=t;c<n;++c){const t=e+c*h-w;for(let e=r;e<o;++e){const n=a+e*f-y;l+=v?C.get(u,t,n,s)*E.get(u,c,e,i):C.get(u,s,t,n)*E.get(u,i,c,e)}}b.set(l,e,a,s,i)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};const zH={kernelName:rC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,filter:o}=t,{inputShape:s,strides:i,pad:l,dataFormat:u,dimRoundingMode:c}=a;JV([r,o],"conv2dBackpropInput");const p=ck(o.shape),d=ck(r.shape);let h=UI(u);const f=DI(s,o.shape,i,1,l,c,!1,h),m=new h$(f.inShape,"float32"),g=m.values,v=n.data.get(r.dataId).values,b=n.data.get(o.dataId).values,[y,w,x]=p,{batchSize:k,filterHeight:C,filterWidth:E,inChannels:S,inHeight:$,inWidth:T,outChannels:I,outHeight:N,outWidth:O,strideHeight:R,strideWidth:A}=f;h=f.dataFormat;const M=C-1-f.padInfo.top,B=E-1-f.padInfo.left,P="channelsLast"===h,D=m.strides[0],F=P?m.strides[1]:m.strides[2],_=P?m.strides[2]:1,L=P?1:m.strides[1],z=d[0],V=P?d[1]:d[2],W=P?d[2]:1,H=P?1:d[1];for(let e=0;e<k;++e)for(let t=0;t<S;++t)for(let n=0;n<$;++n){const a=n-M,r=Math.max(0,Math.ceil(a/R)),o=Math.min(N,(C+a)/R);for(let s=0;s<T;++s){const i=s-B,l=Math.max(0,Math.ceil(i/A)),u=Math.min(O,(E+i)/A);let c=0;for(let n=r;n<o;++n){const r=n*R-a;for(let a=l;a<u;++a){const o=z*e+V*n+W*a,s=y*(C-1-r)+w*(E-1-(a*A-i))+x*t;for(let e=0;e<I;++e){c+=v[o+H*e]*b[s+e]}}}g[D*e+F*n+_*s+L*t]=c}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};const VH={kernelName:oC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o}=t,{strides:s,pad:i,dilations:l}=a;JV([r,o],"conv3d");const u=FI(r.shape,o.shape,s,l,i),{filterDepth:c,filterHeight:p,filterWidth:d,dilationDepth:h,dilationHeight:f,dilationWidth:m,padInfo:g}=u,v=g.front,b=g.left,y=g.top,w=new h$(u.outShape,r.dtype),x=n.data.get(r.dataId).values,k=n.data.get(o.dataId).values,C=w.values,E=ck(r.shape),S=ck(o.shape);for(let e=0;e<u.batchSize;++e){const t=e*E[0],n=e*w.strides[0];for(let e=0;e<u.outDepth;++e){const a=n+e*w.strides[1],r=e*u.strideDepth-v;for(let e=0;e<c;++e){const n=r+e*h;if(n<0||n>=u.inDepth)continue;const o=e*S[0],s=t+n*E[1];for(let e=0;e<u.outHeight;++e){const t=a+e*w.strides[2],n=e*u.strideHeight-y;for(let e=0;e<p;++e){const a=n+e*f;if(a<0||a>=u.inHeight)continue;const r=o+e*S[1],i=s+a*E[2];for(let e=0;e<u.outWidth;++e){const n=t+e*u.outChannels,a=e*u.strideWidth-b;for(let e=0;e<d;++e){const t=a+e*m;if(t<0||t>=u.inWidth)continue;const o=r+e*S[2],s=i+t*u.inChannels;let l=o;for(let e=0;e<u.inChannels;++e){const t=x[s+e];for(let e=0;e<u.outChannels;++e)C[n+e]+=t*k[l+e];l+=u.outChannels}}}}}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};const WH={kernelName:sC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,dy:o}=t,{strides:s,pad:i,filterShape:l}=a;JV([r,o],"conv3dBackpropFilterV2");const u=ck(r.shape),c=ck(o.shape),p=FI(r.shape,l,s,1,i),d=p.strideDepth,h=p.strideHeight,f=p.strideWidth,m=p.filterDepth,g=p.filterHeight,v=p.filterWidth,b=new h$(p.filterShape,"float32"),y=b.values,[w,x,k,C]=b.strides,E=n.data.get(o.dataId).values,[S,$,T,I]=c,N=n.data.get(r.dataId).values,[O,R,A,M]=u,B=p.padInfo.front,P=p.padInfo.left,D=p.padInfo.top;for(let e=0;e<m;++e){const t=Math.max(0,Math.ceil((B-e)/d)),n=Math.min(p.outDepth,(p.inDepth+B-e)/d),a=e*w;for(let r=0;r<g;++r){const o=Math.max(0,Math.ceil((D-r)/h)),s=Math.min(p.outHeight,(p.inHeight+D-r)/h),i=r*x+a;for(let a=0;a<v;++a){const l=Math.max(0,Math.ceil((P-a)/f)),u=Math.min(p.outWidth,(p.inWidth+P-a)/f),c=a*k+i;for(let i=0;i<p.inChannels;++i){const m=i*C+c;for(let c=0;c<p.outChannels;++c){let g=0;for(let m=0;m<p.batchSize;++m){const p=m*O,v=m*S;for(let m=t;m<n;++m){const t=(e+m*d-B)*R+p,n=m*$+v;for(let e=o;e<s;++e){const o=(r+e*h-D)*A+t,s=e*T+n;for(let e=l;e<u;++e){const t=e*I+s;g+=N[(a+e*f-P)*M+o+i]*E[t+c]}}}}y[m+c]=g}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};const HH={kernelName:iC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,filter:o}=t,{pad:s,strides:i,inputShape:l}=a;JV([r],"conv3dBackpropInputV2");const u=ck(r.shape),c=ck(o.shape),p=FI(l,o.shape,i,1,s),d=new h$(p.inShape,"float32"),h=d.values,[f,m,g,v]=d.strides,b=n.data.get(r.dataId).values,[y,w,x,k]=u,C=n.data.get(o.dataId).values,[E,S,$,T]=c,{batchSize:I,filterDepth:N,filterHeight:O,filterWidth:R,inChannels:A,inDepth:M,inHeight:B,inWidth:P,outChannels:D,outDepth:F,outHeight:_,outWidth:L,strideDepth:z,strideHeight:V,strideWidth:W}=p,H=N-1-p.padInfo.front,j=O-1-p.padInfo.top,U=R-1-p.padInfo.left;for(let e=0;e<I;++e)for(let t=0;t<A;++t)for(let n=0;n<M;++n){const a=n-H,r=Math.max(0,Math.ceil(a/z)),o=Math.min(F,(N+a)/z);for(let s=0;s<B;++s){const i=s-j,l=Math.max(0,Math.ceil(i/V)),u=Math.min(_,(O+i)/V);for(let c=0;c<P;++c){const p=c-U,d=Math.max(0,Math.ceil(p/W)),I=Math.min(L,(R+p)/W);let A=0;for(let n=r;n<o;++n){const r=n*z-a;for(let a=l;a<u;++a){const o=a*V-i;for(let s=d;s<I;++s){const i=y*e+w*n+x*a+k*s,l=E*(N-1-r)+S*(O-1-o)+$*(R-1-(s*W-p))+T*t;for(let e=0;e<D;++e){A+=b[i+e]*C[l+e]}}}}h[f*e+m*n+g*s+v*c+t]=A}}}return n.makeTensorInfo(d.shape,d.dtype,d.values)}},jH=eW(lC,(e=>Math.cos(e))),UH={kernelName:lC,backendName:"cpu",kernelFunc:jH},GH=eW(uC,(e=>Math.cosh(e))),qH={kernelName:uC,backendName:"cpu",kernelFunc:GH};const XH={kernelName:pC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{image:r,boxes:o,boxInd:s}=t,{cropSize:i,method:l,extrapolationValue:u}=a,[c,p,d,h]=r.shape,f=o.shape[0],[m,g]=i,v=DT([f,m,g,h],"float32"),b=n.data.get(o.dataId).values,y=n.data.get(s.dataId).values,w=n.data.get(r.dataId).values,x=ck(r.shape),k=ck(v.shape);for(let e=0;e<f;e++){const t=4*e,n=b[t],a=b[t+1],r=b[t+2],o=b[t+3],s=y[e];if(s>=c)continue;const i=m>1?(r-n)*(p-1)/(m-1):0,f=g>1?(o-a)*(d-1)/(g-1):0;for(let t=0;t<m;t++){const c=m>1?n*(p-1)+t*i:.5*(n+r)*(p-1);if(c<0||c>p-1)for(let n=0;n<g;n++)for(let a=0;a<h;a++){const r=a+n*k[2]+t*k[1]+e*k[0];v.values[r]=u}else if("bilinear"===l){const n=Math.floor(c),r=Math.ceil(c),i=c-n;for(let l=0;l<g;l++){const c=g>1?a*(d-1)+l*f:.5*(a+o)*(d-1);if(c<0||c>d-1){for(let n=0;n<h;n++){const a=n+l*k[2]+t*k[1]+e*k[0];v.values[a]=u}continue}const p=Math.floor(c),m=Math.ceil(c),b=c-p;for(let a=0;a<h;a++){let o=a+p*x[2]+n*x[1]+s*x[0];const u=w[o];o=a+m*x[2]+n*x[1]+s*x[0];const c=w[o];o=a+p*x[2]+r*x[1]+s*x[0];const d=w[o];o=a+m*x[2]+r*x[1]+s*x[0];const h=u+(c-u)*b,f=d+(w[o]-d)*b;o=a+l*k[2]+t*k[1]+e*k[0],v.values[o]=h+(f-h)*i}}}else for(let n=0;n<g;++n){const r=g>1?a*(d-1)+n*f:.5*(a+o)*(d-1);if(r<0||r>d-1){for(let a=0;a<h;a++){const r=a+n*k[2]+t*k[1]+e*k[0];v.values[r]=u}continue}const i=Math.round(r),l=Math.round(c);for(let a=0;a<h;a++){const r=a+i*x[2]+l*x[1]+s*x[0],o=a+n*k[2]+t*k[1]+e*k[0];v.values[o]=w[r]}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};const YH={kernelName:cC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,exclusive:s,reverse:i}=a;JV(r,"cumsum");const l=qN([o],r.shape.length);let u=r;null!=l&&(u=qW({inputs:{x:r},backend:n,attrs:{perm:l}}));const c=YN(1,r.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);const p=$$(u.dtype,"int32"),d=fk(Ux(u.shape),p),h=n.data.get(u.dataId).values,f=u.shape[u.shape.length-1],m=i?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let e=0;e<h.length;e+=f)for(let t=0;t<f;t++){const n=m(e,t);if(0===t)d[n]=s?0:h[n];else{const a=m(e,t-1);d[n]=s?h[a]+d[a]:h[n]+d[a]}}const g=n.makeTensorInfo(u.shape,p,d);if(null!=l){const e=qW({inputs:{x:g},backend:n,attrs:{perm:XN(l)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),e}return g}};const KH={kernelName:dC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,weights:o}=t,{size:s,binaryOutput:i}=a;if(1===r.shape.length){const e=kH(n.data.get(r.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,s);return n.makeTensorInfo([s],o.dtype,e)}if(2===r.shape.length){const e=CH(n.bufferSync(r),n.bufferSync(o),s,i);return n.makeTensorInfo(e.shape,o.dtype,e.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${r.shape.length}.`)}};const JH={kernelName:hC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockSize:o,dataFormat:s}=a;Vx("NHWC"===s,(()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${s}`));const i=r.shape[0],l=r.shape[1],u=r.shape[2],c=r.shape[3],p=l*o,d=u*o,h=c/(o*o),f=n.data.get(r.dataId).values,m=new Float32Array(i*p*d*h);let g=0;for(let e=0;e<i;++e)for(let t=0;t<p;++t){const n=Math.floor(t/o),a=t%o;for(let t=0;t<d;++t){const r=Math.floor(t/o),s=(a*o+t%o)*h;for(let t=0;t<h;++t){const a=t+s+c*(r+u*(n+l*e));m[g++]=f[a]}}}return n.makeTensorInfo([i,p,d,h],r.dtype,m)}};function ZH(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o}=t,{strides:s,pad:i,dilations:l,dimRoundingMode:u}=a;JV([r,o],"depthwiseConv2DNative");const c=ck(r.shape),p=ck(o.shape);let d=l;null==d&&(d=[1,1]),Vx(jI(s,d),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${d}'`));const h=DI(r.shape,o.shape,s,d,i,u,!0),{filterHeight:f,filterWidth:m,dilationHeight:g,dilationWidth:v,padInfo:b}=h,y=b.left,w=b.top,x=h.outChannels/h.inChannels,k=new h$(h.outShape,r.dtype),C=n.data.get(r.dataId).values,E=n.data.get(o.dataId).values,S=k.values;for(let e=0;e<h.batchSize;++e){const t=e*c[0],n=e*k.strides[0];for(let e=0;e<h.outHeight;++e){const a=n+e*k.strides[1],r=e*h.strideHeight-w;for(let e=0;e<f;++e){const n=r+e*g;if(n<0||n>=h.inHeight)continue;const o=e*p[0],s=t+n*c[1];for(let e=0;e<h.outWidth;++e){const t=a+e*k.strides[2],n=e*h.strideWidth-y;for(let e=0;e<m;++e){const a=n+e*v;if(a<0||a>=h.inWidth)continue;const r=o+e*p[1],i=s+a*h.inChannels;let l=t,u=r;for(let e=0;e<h.inChannels;++e){const t=C[i+e];for(let e=0;e<x;++e)S[l+e]+=t*E[u+e];l+=x,u+=x}}}}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}const QH={kernelName:fC,backendName:"cpu",kernelFunc:ZH};const ej={kernelName:mC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,dy:o}=t,{strides:s,dilations:i,pad:l,dimRoundingMode:u,filterShape:c}=a;JV([r,o],"depthwiseConv2dNativeBackpropFilter");const p=DI(r.shape,c,s,i,l,u,!0),{strideHeight:d,strideWidth:h,filterHeight:f,filterWidth:m}=p,g=new h$(p.filterShape,"float32"),v=p.padInfo.left,b=p.padInfo.top,y=p.outChannels/p.inChannels,w=n.data.get(r.dataId).values,x=new h$(r.shape,r.dtype,w),k=n.data.get(o.dataId).values,C=new h$(o.shape,o.dtype,k);for(let e=0;e<f;++e){const t=Math.max(0,Math.ceil((b-e)/d)),n=Math.min(p.outHeight,(p.inHeight+b-e)/d);for(let a=0;a<m;++a){const r=Math.max(0,Math.ceil((v-a)/h)),o=Math.min(p.outWidth,(p.inWidth+v-a)/h);for(let s=0;s<p.outChannels;++s){const i=Math.trunc(s/y),l=s%y;let u=0;for(let l=0;l<p.batchSize;++l)for(let c=t;c<n;++c){const t=e+c*d-b;for(let e=r;e<o;++e){const n=a+e*h-v;u+=x.get(l,t,n,i)*C.get(l,c,e,s)}}g.set(u,e,a,i,l)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};const tj={kernelName:gC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,filter:o}=t,{strides:s,dilations:i,pad:l,dimRoundingMode:u,inputShape:c}=a;JV([r,o],"depthwiseConv2DNativeBackpropInput");const p=ck(r.shape),d=ck(o.shape),h=DI(c,o.shape,s,i,l,u,!0),f=new h$(h.inShape,"float32"),m=f.values,[g,v,b]=f.strides,y=n.data.get(r.dataId).values,[w,x,k]=p,C=n.data.get(o.dataId).values,[E,S,$]=d,{batchSize:T,filterHeight:I,filterWidth:N,inChannels:O,inHeight:R,inWidth:A,outChannels:M,outHeight:B,outWidth:P,strideHeight:D,strideWidth:F}=h,_=I-1-h.padInfo.top,L=N-1-h.padInfo.left,z=M/O;for(let e=0;e<T;++e)for(let t=0;t<O;++t)for(let n=0;n<R;++n){const a=n-_,r=Math.max(0,Math.ceil(a/D)),o=Math.min(B,(I+a)/D);for(let s=0;s<A;++s){const i=s-L,l=Math.max(0,Math.ceil(i/F)),u=Math.min(P,(N+i)/F);let c=0;for(let n=r;n<o;++n){const r=n*D-a;for(let a=l;a<u;++a){const o=w*e+x*n+k*a,s=E*(I-1-r)+S*(N-1-(a*F-i))+$*t;for(let e=0;e<z;++e){c+=y[o+(t*z+e)]*C[s+e]}}}m[g*e+v*n+b*s+t]=c}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}};const nj={kernelName:vC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t,r=Ux(a.shape),o=n.data.get(a.dataId).values,s=DT([r,r],a.dtype),i=s.values;for(let e=0;e<o.length;e++)i[e*r+e]=o[e];const l=[...a.shape,...a.shape];return n.makeTensorInfo(l,s.dtype,s.values)}},aj={kernelName:bC,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:a,filter:r}=e,{strides:o,pad:s,dilations:i}=n,l=t,u=l.data.get(a.dataId).values,c=a.shape.length,p=l.data.get(r.dataId).values,d=r.shape.length,{batchSize:h,inHeight:f,inWidth:m,inChannels:g,outHeight:v,outWidth:b,padInfo:y,strideHeight:w,strideWidth:x,filterHeight:k,filterWidth:C,dilationHeight:E,dilationWidth:S,outShape:$}=MI(a.shape,r.shape,o,s,"NHWC",i),T=Ux($),I=$.length,N=tk(a.dtype,T);for(let e=0;e<h;++e)for(let t=0;t<v;++t){const n=t*w-y.top;for(let o=0;o<b;++o){const s=o*x-y.left;for(let i=0;i<g;++i){let l=Number.MIN_SAFE_INTEGER;for(let t=0;t<k;++t){const o=n+t*E;if(o>=0&&o<f)for(let n=0;n<C;++n){const h=s+n*S;if(h>=0&&h<m){const s=vk([e,o,h,i],c,ck(a.shape)),f=vk([t,n,i],d,ck(r.shape)),m=u[s]+p[f];m>l&&(l=m)}}}N[vk([e,t,o,i],I,ck($))]=l}}}return{dataId:l.write(t$(N,a.dtype),$,a.dtype),shape:$,dtype:a.dtype}}},rj={kernelName:wC,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:a,filter:r,dy:o}=e,{strides:s,pad:i,dilations:l}=n,u=t,c=dk(a.shape,u.data.get(a.dataId).values),p=dk(r.shape,u.data.get(r.dataId).values),{batchSize:d,inHeight:h,inWidth:f,inChannels:m,outHeight:g,outWidth:v,padInfo:b,strideHeight:y,strideWidth:w,filterHeight:x,filterWidth:k,dilationHeight:C,dilationWidth:E,outShape:S}=MI(a.shape,r.shape,s,i,"NHWC",l);Vx(o.rank===S.length,(()=>`Error in Dilation2DBackpropFilter, dy must have the same rank as output ${S.length}, but got ${o.rank}`));const $=dk(S,u.data.get(o.dataId).values),T=mk(r.shape,r.dtype);for(let e=0;e<d;++e)for(let t=0;t<g;++t){const n=t*y-b.top;for(let a=0;a<v;++a){const r=a*w-b.left;for(let o=0;o<m;++o){let s=Number.MIN_SAFE_INTEGER,i=0,l=0;for(let t=0;t<x;++t){const a=n+t*C;if(a>=0&&a<h)for(let n=0;n<k;++n){const u=r+n*E;if(u>=0&&u<f){const r=c[e][a][u][o]+p[t][n][o];r>s&&(s=r,i=t,l=n)}}}T[i][l][o]+=$[e][t][a][o]}}}return{dataId:u.write(t$(T,a.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},oj={kernelName:yC,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:a,filter:r,dy:o}=e,{strides:s,pad:i,dilations:l}=n,u=t,c=dk(a.shape,u.data.get(a.dataId).values),p=dk(r.shape,u.data.get(r.dataId).values),{batchSize:d,inHeight:h,inWidth:f,inChannels:m,outHeight:g,outWidth:v,padInfo:b,strideHeight:y,strideWidth:w,filterHeight:x,filterWidth:k,dilationHeight:C,dilationWidth:E,outShape:S}=MI(a.shape,r.shape,s,i,"NHWC",l);Vx(o.rank===S.length,(()=>`Error in Dilation2DBackpropInput, dy must have the same rank as output ${S.length}, but got ${o.rank}`));const $=dk(S,u.data.get(o.dataId).values),T=mk(a.shape,a.dtype);for(let e=0;e<d;++e)for(let t=0;t<g;++t){const n=t*y-b.top;for(let a=0;a<v;++a){const r=a*w-b.left;for(let o=0;o<m;++o){let s=Number.MIN_SAFE_INTEGER,i=n<0?0:n,l=r<0?0:r;for(let t=0;t<x;++t){const a=n+t*C;if(a>=0&&a<h)for(let n=0;n<k;++n){const u=r+n*E;if(u>=0&&u<f){const r=c[e][a][u][o]+p[t][n][o];r>s&&(s=r,i=a,l=u)}}}T[e][i][l][o]+=$[e][t][a][o]}}}return{dataId:u.write(t$(T,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},sj=lW(((e,t)=>e*t)),ij=NW(((e,t,n,a)=>({real:e*n-t*a,imag:e*a+t*n}))),lj=IW(gE,sj,ij),uj={kernelName:gE,backendName:"cpu",kernelFunc:lj};function cj(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:s}=a;let i;JV(r,"sum"),i="bool"===r.dtype?$W({inputs:{x:r},backend:n,attrs:{dtype:"int32"}}):rW({inputs:{x:r},backend:n});const l=i.shape.length,u=Zx(o,i.shape),c=qN(u,l);let p=u,d=i;null!=c&&(d=qW({inputs:{x:i},backend:n,attrs:{perm:c}}),p=YN(p.length,l)),GN("sum",p,d.shape.length);const[h,f]=jN(d.shape,p);let m=CW(n,h,$$(d.dtype,"int32"));const g=Ux(f),v=n.data.get(m.dataId).values,b=n.data.get(d.dataId).values;for(let e=0;e<v.length;++e){const t=e*g;let n=0;for(let e=0;e<g;++e)n+=b[t+e];v[e]=n}if(s){const e=m;m=BW({inputs:{x:m},backend:n,attrs:{shape:UN(m.shape,u)}}),n.disposeIntermediateTensorInfo(e)}return n.disposeIntermediateTensorInfo(i),null!=c&&n.disposeIntermediateTensorInfo(d),m}const pj={kernelName:ZE,backendName:"cpu",kernelFunc:cj};const dj={kernelName:kC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{equation:r}=a,o=t,{allDims:s,summedDims:i,idDims:l}=BA(r,o.length);DA(s.length,l,o);const{path:u,steps:c}=FA(i,l),p=c.length;let d=null,h=s.length;const f=[];for(let e=0;e<p;++e){for(const t of c[e]){const{permutationIndices:e,expandDims:a}=PA(h,l[t]);let r;_A(e)?r=o[t]:(r=qW({inputs:{x:o[t]},backend:n,attrs:{perm:e}}),f.push(r));const s=r.shape.slice();for(let e=0;e<a.length;++e)s.splice(a[e],0,1);Gx(r.shape,s)||(r=BW({inputs:{x:r},backend:n,attrs:{shape:s}}),f.push(r)),null===d?d=r:(d=lj({inputs:{a:r,b:d},backend:n}),f.push(d))}e<p-1&&(u[e]>=0&&(d=cj({inputs:{x:d},backend:n,attrs:{axis:u[e]-(s.length-h),keepDims:!1}}),f.push(d)),h--)}for(const e of f)e!==d&&n.disposeIntermediateTensorInfo(e);return d}};const hj={kernelName:EC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{dy:a,y:r}=t;JV([a,r],"eluGrad");const o=new Float32Array(Ux(r.shape)),s=n.data.get(r.dataId).values,i=n.data.get(a.dataId).values;for(let e=0;e<s.length;++e){const t=s[e];o[e]=t>=1?i[e]:i[e]*(t+1)}return n.makeTensorInfo(r.shape,"float32",o)}},fj=lW(((e,t)=>e===t?1:0)),mj=IW($C,fj,null,"bool"),gj={kernelName:$C,backendName:"cpu",kernelFunc:mj},vj=bA,bj=yA,yj=wA,wj=xA,xj=kA,kj=CA,Cj=eW(SC,(e=>{const t=Math.sign(e),n=Math.abs(e),a=1/(1+vj*n);return t*(1-((((kj*a+xj)*a+wj)*a+yj)*a+bj)*a*Math.exp(-n*n))})),Ej={kernelName:SC,backendName:"cpu",kernelFunc:Cj},Sj=gW((e=>Math.exp(e))),$j=tW(TC,Sj,"float32"),Tj={kernelName:TC,backendName:"cpu",kernelFunc:$j};function Ij(e){const{inputs:t,backend:n,attrs:a}=e,{input:r}=t,{dim:o}=a,s=r.shape.length,i=r.shape.slice();let l=o;return o<0&&(Vx(-(s+1)<=o,(()=>`Axis must be in the interval [${-(s+1)}, ${s}]`)),l=s+o+1),i.splice(l,0,1),BW({inputs:{x:r},backend:n,attrs:{shape:i}})}const Nj={kernelName:IC,backendName:"cpu",kernelFunc:Ij},Oj=gW((e=>Math.expm1(e))),Rj=tW(NC,Oj),Aj={kernelName:NC,backendName:"cpu",kernelFunc:Rj},Mj=lW(((e,t)=>e/t)),Bj=IW(xC,Mj),Pj={kernelName:xC,backendName:"cpu",kernelFunc:Bj},Dj=lW(((e,t)=>e-t)),Fj=NW(((e,t,n,a)=>({real:e-n,imag:t-a}))),_j=IW(hS,Dj,Fj),Lj={kernelName:hS,backendName:"cpu",kernelFunc:_j};function zj(e,t,n){const a=e.shape,r=a[0],o=a[1],s=n.data.get(e.dataId),i=s.complexTensorInfos.real,l=s.complexTensorInfos.imag,u=[r,o],c=Ux(u),p=ek("float32",c),d=ek("float32",c);for(let e=0;e<r;e++){const a=yH({inputs:{x:i},backend:n,attrs:{begin:[e,0],size:[1,o]}}),r=yH({inputs:{x:l},backend:n,attrs:{begin:[e,0],size:[1,o]}}),s=xW({inputs:{real:a,imag:r},backend:n}),{real:u,imag:c}=Vj(s,t,n),h=EA(u,c);for(let t=0;t<o;t++){const n=IA(h,t);p[e*o+t]=n.real,d[e*o+t]=n.imag}n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(s)}const h=n.makeTensorInfo(u,"float32",p),f=n.makeTensorInfo(u,"float32",d),m=xW({inputs:{real:h,imag:f},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),m}function Vj(e,t,n){const a=Ux(e.shape),r=n.data.get(e.dataId),o=n.data.get(r.complexTensorInfos.real.dataId).values,s=n.data.get(r.complexTensorInfos.imag.dataId).values;if(function(e){return 0==(e&e-1)}(a)){const r=Wj(o,s,a,t,n),i=[e.shape[0],e.shape[1]];if(t){const e=n.makeTensorInfo(i,"float32",r.real),t=n.makeTensorInfo(i,"float32",r.imag),o=n.makeTensorInfo([],"float32",e$(a,"float32")),s=rW({inputs:{x:o},backend:n}),l=Pj.kernelFunc({inputs:{a:e,b:o},backend:n}),u=Pj.kernelFunc({inputs:{a:t,b:s},backend:n}),c=n.data.get(l.dataId).values,p=n.data.get(u.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),{real:c,imag:p}}return r}{const e=function(e,t,n){const a=new Float32Array(2*t);for(let r=0;r<t;r++){let o=0,s=0;for(let a=0;a<t;a++){const i=RA(r*a,t,n),l=IA(e,a);o+=l.real*i.real-l.imag*i.imag,s+=l.real*i.imag+l.imag*i.real}n&&(o/=t,s/=t),NA(a,o,s,r)}return a}(EA(o,s),a,t);return SA(e)}}function Wj(e,t,n,a,r){if(1===n)return{real:e,imag:t};const o=EA(e,t),s=n/2,i=$A(o),l=i.real,u=i.imag,c=[l.length],p=r.makeTensorInfo(c,"float32",l),d=r.makeTensorInfo(c,"float32",u),h=xW({inputs:{real:p,imag:d},backend:r}),f=TA(o),m=f.real,g=f.imag,v=[m.length],b=r.makeTensorInfo(v,"float32",m),y=r.makeTensorInfo(v,"float32",g),w=xW({inputs:{real:b,imag:y},backend:r}),x=Wj(l,u,s,a,r),k=x.real,C=x.imag,E=[k.length],S=r.makeTensorInfo(E,"float32",k),$=r.makeTensorInfo(E,"float32",C),T=xW({inputs:{real:S,imag:$},backend:r}),I=Wj(m,g,s,a,r),N=I.real,O=I.imag,R=[N.length],A=r.makeTensorInfo(R,"float32",N),M=r.makeTensorInfo(R,"float32",O),B=xW({inputs:{real:A,imag:M},backend:r}),P=OA(n,a),D=[P.real.length],F=r.makeTensorInfo(D,"float32",P.real),_=r.makeTensorInfo(D,"float32",P.imag),L=xW({inputs:{real:F,imag:_},backend:r}),z=lj({inputs:{a:L,b:B},backend:r}),V=AW({inputs:{a:T,b:z},backend:r}),W=_j({inputs:{a:T,b:z},backend:r}),H=EW({inputs:{input:V},backend:r}),j=EW({inputs:{input:W},backend:r}),U=MH({inputs:{input:V},backend:r}),G=MH({inputs:{input:W},backend:r}),q=PH({inputs:[H,j],backend:r,attrs:{axis:0}}),X=PH({inputs:[U,G],backend:r,attrs:{axis:0}}),Y=r.data.get(q.dataId).values,K=r.data.get(X.dataId).values;return r.disposeIntermediateTensorInfo(p),r.disposeIntermediateTensorInfo(d),r.disposeIntermediateTensorInfo(h),r.disposeIntermediateTensorInfo(b),r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(w),r.disposeIntermediateTensorInfo(S),r.disposeIntermediateTensorInfo($),r.disposeIntermediateTensorInfo(T),r.disposeIntermediateTensorInfo(A),r.disposeIntermediateTensorInfo(M),r.disposeIntermediateTensorInfo(B),r.disposeIntermediateTensorInfo(F),r.disposeIntermediateTensorInfo(_),r.disposeIntermediateTensorInfo(L),r.disposeIntermediateTensorInfo(z),r.disposeIntermediateTensorInfo(V),r.disposeIntermediateTensorInfo(W),r.disposeIntermediateTensorInfo(H),r.disposeIntermediateTensorInfo(U),r.disposeIntermediateTensorInfo(j),r.disposeIntermediateTensorInfo(G),r.disposeIntermediateTensorInfo(q),r.disposeIntermediateTensorInfo(X),{real:Y,imag:K}}const Hj={kernelName:OC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:a}=t,r=Ux(a.shape),o=a.shape[a.shape.length-1],s=BW({inputs:{x:a},backend:n,attrs:{shape:[r/o,o]}}),i=zj(s,!1,n),l=BW({inputs:{x:i},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),l}};function jj(e){const{backend:t,attrs:n}=e,{shape:a,value:r,dtype:o}=n,s=o||ik(r),i=tk(s,Ux(a));return function(e,t,n){e.fill(t)}(i,r),t.makeTensorInfo(a,s,i)}const Uj={kernelName:RC,backendName:"cpu",kernelFunc:jj};const Gj={kernelName:AC,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:a}=e,r=n,o=ek(a.dtype,Ux(a.shape)),[s,i,l,u]=a.shape,c=r.data.get(a.dataId).values;for(let e=0;e<s;e++){const t=e*l*i*u;for(let e=0;e<i;e++){const n=e*(l*u);for(let e=0;e<l;e++){const a=e*u;for(let r=0;r<u;r++){const s=Math.round(l-e-1),i=t+n+a+r;let p=c[i];if(s>=0&&s<l){p=c[t+n+s*u+r]}o[i]=p}}}}return{dataId:r.write(o,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},qj=gW((e=>Math.floor(e))),Xj=tW(MC,qj),Yj={kernelName:MC,backendName:"cpu",kernelFunc:Xj},Kj=lW(((e,t)=>Math.floor(e/t))),Jj=IW(BC,Kj,null,"int32"),Zj={kernelName:BC,backendName:"cpu",kernelFunc:Jj};const Qj={kernelName:IS,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o,bias:s,preluActivationWeights:i}=t,{strides:l,pad:u,dataFormat:c,dilations:p,dimRoundingMode:d,activation:h,leakyreluAlpha:f}=a;let m=FH({inputs:{x:r,filter:o},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:p,dimRoundingMode:d}});if(s){const e=m;m=AW({inputs:{a:m,b:s},backend:n}),n.disposeIntermediateTensorInfo(e)}if(h){const e=m;m=wW(n,m,h,i,f),n.disposeIntermediateTensorInfo(e)}return m}};const eU={kernelName:NS,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o,bias:s,preluActivationWeights:i}=t,{strides:l,pad:u,dataFormat:c,dilations:p,dimRoundingMode:d,activation:h,leakyreluAlpha:f}=a;let m=ZH({inputs:{x:r,filter:o},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:p,dimRoundingMode:d}});if(s){const e=m;m=AW({inputs:{a:m,b:s},backend:n}),n.disposeIntermediateTensorInfo(e)}if(h){const e=m;m=wW(n,m,h,i,f),n.disposeIntermediateTensorInfo(e)}return m}};function tU(e,t,n,a,r,o,s,i,l){const u=DT([a,o],n);for(let n=0;n<a;n++){const a=[];let c=0;for(let t=0;t<r;t++){const o=e[n*r+t];c+=o*s[t],a.push(o)}if(c<0||c>=l/o)throw new Error(`Invalid indices: ${a} does not index into ${i}`);for(let e=0;e<o;e++)u.values[n*o+e]=t.get(...t.indexToLoc(c*o+e))}return u}const nU={kernelName:FC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:a,indices:r}=t,o=Ux(a.shape),s=r.shape,i=s[s.length-1],[l,u,c,p]=dA(a,r);if(0===u)return n.makeTensorInfo(l,a.dtype,[]);const d=tU(n.data.get(r.dataId).values,n.bufferSync(a),a.dtype,u,i,c,p,a.shape,o);return n.makeTensorInfo(l,a.dtype,d.values)}};function aU(e,t,n){const a=DT(n,e.dtype);for(let n=0;n<a.size;++n){const r=a.indexToLoc(n).slice(),o=r[0],s=r[2],i=t.locToIndex([o,s]);r[2]=t.values[i];const l=e.locToIndex(r);a.values[n]=e.values[l]}return a}const rU={kernelName:DC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,indices:o}=t,{axis:s,batchDims:i}=a;JV([r,o],"gatherV2");const l=Zx(s,r.shape)[0],u=n.data.get(o.dataId).values,c=r.shape[l];for(let e=0;e<u.length;++e){const t=u[e];Vx(t<=c-1&&t>=0,(()=>`GatherV2: the index value ${t} is not in [0, ${c-1}]`))}let p=i;null==i&&(p=0);const d=Ux(o.shape),h=tM(r,o,l,p),f=BW({inputs:{x:r},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),m=BW({inputs:{x:o},backend:n,attrs:{shape:[h.batchSize,d/h.batchSize]}}),g=[h.batchSize,h.outerSize,d/h.batchSize,h.sliceSize],v=n.bufferSync(m),b=aU(n.bufferSync(f),v,g);return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(h.outputShape,b.dtype,b.values)}},oU=lW(((e,t)=>e>t?1:0)),sU=IW(_C,oU,null,"bool"),iU={kernelName:_C,backendName:"cpu",kernelFunc:sU},lU=lW(((e,t)=>e>=t?1:0)),uU=IW(LC,lU,null,"bool"),cU={kernelName:LC,backendName:"cpu",kernelFunc:uU};const pU={kernelName:VC,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:a}=t,r=Ux(a.shape),o=a.shape[a.shape.length-1],s=BW({inputs:{x:a},backend:n,attrs:{shape:[r/o,o]}}),i=zj(s,!0,n),l=BW({inputs:{x:i},backend:n,attrs:{shape:a.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),l}},dU=eW(HC,(e=>Number.isFinite(e)?1:0),"bool"),hU={kernelName:HC,backendName:"cpu",kernelFunc:dU},fU=eW(jC,(e=>Math.abs(e)===1/0?1:0),"bool"),mU={kernelName:jC,backendName:"cpu",kernelFunc:fU},gU=eW(UC,(e=>Number.isNaN(e)?1:0),"bool"),vU={kernelName:UC,backendName:"cpu",kernelFunc:gU},bU=lW(((e,t)=>e<t?1:0)),yU=IW(qC,bU,null,"bool"),wU={kernelName:qC,backendName:"cpu",kernelFunc:yU},xU=lW(((e,t)=>e<=t?1:0)),kU=IW(XC,xU,null,"bool"),CU={kernelName:XC,backendName:"cpu",kernelFunc:kU};function EU(e,t,n){const a=(t-e)/(n-1),r=fk(n,"float32");r[0]=e;for(let e=1;e<r.length;e++)r[e]=r[e-1]+a;return r}const SU={kernelName:YC,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:a,stop:r,num:o}=n,s=EU(a,r,o);return t.makeTensorInfo([s.length],"float32",s)}},$U=gW((e=>Math.log(e))),TU=tW(KC,$U),IU={kernelName:KC,backendName:"cpu",kernelFunc:TU},NU=eW(JC,(e=>Math.log1p(e))),OU={kernelName:JC,backendName:"cpu",kernelFunc:NU},RU=lW(((e,t)=>e&&t)),AU=IW(ZC,RU,null,"bool"),MU={kernelName:ZC,backendName:"cpu",kernelFunc:AU},BU=eW(QC,(e=>e?0:1),"bool"),PU={kernelName:QC,backendName:"cpu",kernelFunc:BU},DU=lW(((e,t)=>e||t)),FU=IW(eE,DU,null,"bool"),_U={kernelName:eE,backendName:"cpu",kernelFunc:FU};const LU={kernelName:tE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{depthRadius:o,bias:s,alpha:i,beta:l}=a;JV(r,"LRN");const u=r.shape[3],c=u-1,p=n.data.get(r.dataId).values,d=Ux(r.shape),h=new Float32Array(d);function f(e){const t=e%u;let n=e-t+Math.max(0,t-o);const a=e-t+Math.min(t+o,c);let r=0;for(;n<=a;n++){const e=p[n];r+=e*e}return r}for(let e=0;e<d;e++){const t=f(e),n=p[e]*Math.pow(s+i*t,-l);h[e]=n}return n.makeTensorInfo(r.shape,r.dtype,h)}};const zU={kernelName:nE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,y:o,dy:s}=t,{depthRadius:i,bias:l,alpha:u,beta:c}=a;JV(s,"LRNGrad");const p=Ux(s.shape),d=s.shape[3],h=n.data.get(s.dataId).values,f=n.data.get(r.dataId).values,m=n.data.get(o.dataId).values,g=new Float32Array(p),v=p;for(let e=0;e<v;e++){const t=e%d,n=e-t+Math.max(0,t-i),a=e-t+Math.min(d,t+i+1);let r=0;for(let e=n;e<a;e++)r+=Math.pow(f[e],2);r=u*r+l;for(let t=n;t<a;t++){let n=-2*u*c*f[t]*m[e]/r;e===t&&(n+=Math.pow(r,-c)),n*=h[e],g[t]+=n}}return n.makeTensorInfo(s.shape,r.dtype,g)}};function VU(e,t,n,a){const r=ek(a,Ux(n));for(let n=0;n<r.length;++n){const a=n*t;let o=e[a];for(let n=0;n<t;++n){const t=e[a+n];(Number.isNaN(t)||t>o)&&(o=t)}r[n]=o}return r}function WU(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{reductionIndices:o,keepDims:s}=a,i=n;let l=r.shape;const u=l.length,c=Zx(o,l);let p=c;const d=qN(p,u);let h=i.data.get(r.dataId).values;if(null!=d){const e=new Array(u);for(let t=0;t<e.length;t++)e[t]=l[d[t]];h=GW(h,l,r.dtype,d,e),p=YN(p.length,u),l=e}JV(r,"max"),GN("max",p,u);const[f,m]=jN(l,p),g=VU(h,Ux(m),f,r.dtype),v=i.write(g,f,r.dtype);let b=f;if(s){b=UN(f,c)}return{dataId:v,shape:b,dtype:r.dtype}}const HU={kernelName:aE,backendName:"cpu",kernelFunc:WU},jU=lW(((e,t)=>Math.max(e,t))),UU=IW(rE,jU),GU={kernelName:rE,backendName:"cpu",kernelFunc:UU};const qU={kernelName:oE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t;JV(r,"maxPool");const{filterSize:o,strides:s,pad:i,dimRoundingMode:l}=a;Vx(jI(s,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '1'`));const u=BI(r.shape,o,s,1,i,l);let c;if(1===u.filterWidth&&1===u.filterHeight&&Gx(u.inShape,u.outShape))c=rW({inputs:{x:r},backend:n});else{const e=n.data.get(r.dataId).values,t=ck(r.shape),a=cH(e,r.shape,r.dtype,t,u,"max");c=n.makeTensorInfo(u.outShape,r.dtype,a.values)}return c}};const XU={kernelName:iE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{filterSize:o,strides:s,pad:i,dimRoundingMode:l,dataFormat:u}=a;JV(r,"maxPool3d");const c=PI(r.shape,o,s,1,i,l,u),p=dH(n.data.get(r.dataId).values,r.shape,r.dtype,ck(r.shape),c,"max");return n.makeTensorInfo(p.shape,"float32",p.values)}};const YU={kernelName:lE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o}=t,{filterSize:s,strides:i,pad:l,dimRoundingMode:u}=a;JV([r,o],"maxPool3DGrad");const c=PI(o.shape,s,i,1,l,u),p=function(e,t){const n=DT(t.outShape,"int32"),a=t.strideDepth,r=t.strideHeight,o=t.strideWidth,s=t.dilationDepth,i=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,p=t.effectiveFilterWidth,d=t.padInfo.front,h=t.padInfo.top,f=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let g=0;g<t.inChannels;++g)for(let v=0;v<t.outDepth;++v){const b=v*a-d;let y=b;for(;y<0;)y+=s;const w=Math.min(t.inDepth,u+b);for(let a=0;a<t.outHeight;++a){const u=a*r-h;let d=u;for(;d<0;)d+=i;const x=Math.min(t.inHeight,c+u);for(let r=0;r<t.outWidth;++r){const h=r*o-f;let k=h;for(;k<0;)k+=l;const C=Math.min(t.inWidth,p+h);let E=Number.NEGATIVE_INFINITY,S=-1;for(let t=y;t<w;t+=s){const n=t-b;for(let a=d;a<x;a+=i){const r=a-u;for(let o=k;o<C;o+=l){const s=o-h,i=e.get(m,t,a,o,g);i>=E&&(E=i,S=n*c*p+r*c+s)}}}n.set(S,m,v,a,r,g)}}}return n}(n.bufferSync(o),c),d=c.strideDepth,h=c.strideHeight,f=c.strideWidth,m=c.dilationDepth,g=c.dilationHeight,v=c.dilationWidth,b=c.effectiveFilterDepth,y=c.effectiveFilterHeight,w=c.effectiveFilterWidth,x=b-1-c.padInfo.front,k=w-1-c.padInfo.left,C=y-1-c.padInfo.top,E=DT(o.shape,"float32"),S=n.bufferSync(r);for(let e=0;e<c.batchSize;++e)for(let t=0;t<c.inChannels;++t)for(let n=0;n<c.inDepth;++n)for(let a=0;a<c.inHeight;++a)for(let r=0;r<c.inWidth;++r){const o=n-x,s=a-C,i=r-k;let l=0;for(let n=0;n<b;n+=m){const a=(o+n)/d;if(!(a<0||a>=c.outDepth||Math.floor(a)!==a))for(let r=0;r<y;r+=g){const o=(s+r)/h;if(!(o<0||o>=c.outHeight||Math.floor(o)!==o))for(let s=0;s<w;s+=v){const u=(i+s)/f;if(u<0||u>=c.outWidth||Math.floor(u)!==u)continue;const d=b*y*w-1-p.get(e,a,o,u,t)===n*y*w+r*w+s?1:0;if(0===d)continue;l+=S.get(e,a,o,u,t)*d}}}E.set(l,e,n,a,r,t)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}};const KU={kernelName:sE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o,output:s}=t,i=o;JV([o,s],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:p}=a,d=BI(i.shape,l,u,1,c,p),h=n.data.get(i.dataId).values,f=DT(d.outShape,i.dtype,pH(h,i.shape,i.dtype,d).values),m=d.strideHeight,g=d.strideWidth,v=d.dilationHeight,b=d.dilationWidth,y=d.effectiveFilterHeight,w=d.effectiveFilterWidth,x=w-1-d.padInfo.left,k=y-1-d.padInfo.top,C=DT(i.shape,"float32"),E=n.data.get(r.dataId).values,S=DT(r.shape,"float32",E);for(let e=0;e<d.batchSize;++e)for(let t=0;t<d.inChannels;++t)for(let n=0;n<d.inHeight;++n)for(let a=0;a<d.inWidth;++a){const r=n-k,o=a-x;let s=0;for(let n=0;n<y;n+=v){const a=(r+n)/m;if(!(a<0||a>=d.outHeight||Math.floor(a)!==a))for(let r=0;r<w;r+=b){const i=(o+r)/g;if(i<0||i>=d.outWidth||Math.floor(i)!==i)continue;const l=y*w-1-f.get(e,a,i,t)===n*w+r?1:0;if(0===l)continue;s+=S.get(e,a,i,t)*l}}C.set(s,e,n,a,t)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}};const JU={kernelName:uE,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:a}=e,{filterSize:r,strides:o,pad:s,includeBatchInIndex:i}=t,l=n;JV(a,"MaxPoolWithArgmax");const u=l.data.get(a.dataId).values,c=BI(a.shape,r,o,[1,1],s),[p,d]=function(e,t,n,a,r){const o=cH(e,0,n,ck(t),r,"max"),s=pH(e,t,n,r,!0,a);return[o.values,s.values]}(u,a.shape,a.dtype,i,c),h=l.write(p,c.outShape,a.dtype),f=l.write(d,c.outShape,a.dtype);return[{dataId:h,shape:c.outShape,dtype:a.dtype},{dataId:f,shape:c.outShape,dtype:"int32"}]}};const ZU={kernelName:cE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:s}=a,i=Zx(o,r.shape),l=Ux(jN(r.shape,i)[1]),u=[],c=n.makeTensorInfo([],"float32",new Float32Array([l]));u.push(c);const p=$W({inputs:{x:r},backend:n,attrs:{dtype:"float32"}});u.push(p);const d=Bj({inputs:{a:p,b:c},backend:n});u.push(d);const h=cj({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:s}});return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),h}};const QU={kernelName:pE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:s}=a;JV(r,"min");const i=Zx(o,r.shape);let l=i;const u=qN(l,r.shape.length);let c=r;null!=u&&(c=qW({inputs:{x:r},backend:n,attrs:{perm:u}}),l=YN(l.length,r.shape.length)),GN("min",l,c.shape.length);const[p,d]=jN(c.shape,l),h=Ux(d),f=fk(Ux(p),c.dtype),m=n.data.get(c.dataId).values;for(let e=0;e<f.length;++e){const t=e*h;let n=m[t];for(let e=0;e<h;++e){const a=m[t+e];(Number.isNaN(a)||a<n)&&(n=a)}f[e]=n}null!=u&&n.disposeIntermediateTensorInfo(c);const g=n.makeTensorInfo(p,c.dtype,f);if(s){const e=BW({inputs:{x:g},backend:n,attrs:{shape:UN(p,i)}});return n.disposeIntermediateTensorInfo(g),e}return g}},eG=lW(((e,t)=>Math.min(e,t))),tG=IW(dE,eG),nG={kernelName:dE,backendName:"cpu",kernelFunc:tG};const aG={kernelName:hE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{paddings:o,mode:s}=a;JV(r,"mirrorPad");const i=o.map(((e,t)=>e[0]+r.shape[t]+e[1])),l=o.map((e=>e[0])),u=o.map(((e,t)=>e[0]+r.shape[t])),c="reflect"===s?0:1,p=n.data.get(r.dataId).values,d=r.shape.length,h=ck(r.shape),f=Ux(i),m=i.length,g=ck(i),v=ek(r.dtype,f);for(let e=0;e<f;e++){let t=bk(e,m,g);for(let e=0;e<m;e++)t[e]<l[e]?t[e]=2*l[e]-t[e]-c:t[e]>=u[e]&&(t[e]=2*(u[e]-1)-t[e]+c);t=t.map(((e,t)=>e-l[t]));const n=vk(t,d,h);v[e]=p[n]}return{dataId:n.write(v,i,r.dtype),shape:i,dtype:r.dtype}}},rG=lW(((e,t)=>{const n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),oG=IW(fE,rG),sG={kernelName:fE,backendName:"cpu",kernelFunc:oG};function iG(e){const{inputs:t,backend:n,attrs:a}=e,{logits:r}=t,{dim:o}=a,s=r.shape.length;let i=o;if(-1===i&&(i=s-1),i!==s-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${s} and dim was ${i}`);const l=Zx([i],r.shape),u=WU({inputs:{x:r},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=UN(u.shape,l),p=BW({inputs:{x:u},backend:n,attrs:{shape:c}}),d=_j({inputs:{a:r,b:p},backend:n}),h=$j({inputs:{x:d},backend:n}),f=cj({inputs:{x:h},backend:n,attrs:{axis:l,keepDims:!1}}),m=BW({inputs:{x:f},backend:n,attrs:{shape:c}}),g=Bj({inputs:{a:h,b:m},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}const lG={kernelName:tS,backendName:"cpu",kernelFunc:iG};const uG={kernelName:mE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{logits:r}=t,{numSamples:o,seed:s,normalized:i}=a;JV(r,"multinomial");const l=i?r:iG({inputs:{logits:r},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],p=n.data.get(l.dataId).values,d=[u,o],h=fk(Ux(d),"int32");for(let e=0;e<u;++e){const t=e*c,n=new Float32Array(c-1);n[0]=p[t];for(let e=1;e<n.length;++e)n[e]=n[e-1]+p[t+e];const a=sO.alea(s.toString()),r=e*o;for(let e=0;e<o;++e){const t=a();h[r+e]=n.length;for(let a=0;a<n.length;a++)if(t<n[a]){h[r+e]=a;break}}}return i||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(d,"int32",h)}};function cG(e,t,n){const a=e$(-1,n);return sj([],t,a,e,n)}const pG={kernelName:vE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t;JV(a,"neg");const r=n.data.get(a.dataId).values,[o,s]=cG(r,a.shape,a.dtype);return n.makeTensorInfo(s,a.dtype,o)}},dG=pR;const hG={kernelName:yE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{boxes:r,scores:o}=t,{maxOutputSize:s,iouThreshold:i,scoreThreshold:l}=a;JV(r,"NonMaxSuppression");const u=n.data.get(r.dataId).values,c=n.data.get(o.dataId).values,{selectedIndices:p}=dG(u,c,s,i,l);return n.makeTensorInfo([p.length],"int32",new Int32Array(p))}},fG=dR;const mG={kernelName:wE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{boxes:r,scores:o}=t,{maxOutputSize:s,iouThreshold:i,scoreThreshold:l,padToMaxOutputSize:u}=a;JV(r,"NonMaxSuppressionPadded");const c=n.data.get(r.dataId).values,p=n.data.get(o.dataId).values,{selectedIndices:d,validOutputs:h}=fG(c,p,s,i,l,u);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},gG=hR;const vG={kernelName:xE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{boxes:r,scores:o}=t,{maxOutputSize:s,iouThreshold:i,scoreThreshold:l,softNmsSigma:u}=a;JV(r,"NonMaxSuppressionWithScore");const c=n.data.get(r.dataId).values,p=n.data.get(o.dataId).values,d=s,h=i,f=l,m=u,{selectedIndices:g,selectedScores:v}=gG(c,p,d,h,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}},bG=lW(((e,t)=>e!==t?1:0)),yG=IW(bE,bG,null,"bool"),wG={kernelName:bE,backendName:"cpu",kernelFunc:yG};const xG={kernelName:CE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{indices:r}=t,{depth:o,onValue:s,offValue:i}=a;JV(r,"oneHot");const l=Ux(r.shape),u=new Float32Array(l*o);u.fill(i);const c=n.data.get(r.dataId).values;for(let e=0;e<l;++e)c[e]>=0&&c[e]<o&&(u[e*o+c[e]]=s);return n.makeTensorInfo([...r.shape,o],"int32",u)}};function kG(e){const{inputs:t,backend:n}=e,{x:a}=t;if("string"===a.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===a.dtype){const e=EW({inputs:{input:a},backend:n}),t=kG({inputs:{x:e},backend:n}),r=MH({inputs:{input:a},backend:n}),o=kG({inputs:{x:r},backend:n}),s=xW({inputs:{real:t,imag:o},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(o),s}return jj({backend:n,attrs:{shape:a.shape,value:0,dtype:a.dtype}})}const CG={kernelName:CS,backendName:"cpu",kernelFunc:kG};const EG={kernelName:kE,backendName:"cpu",kernelFunc:function e(t){const{inputs:n,backend:a}=t,{x:r}=n;if("string"===r.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===r.dtype){const t=EW({inputs:{input:r},backend:a}),n=e({inputs:{x:t},backend:a}),o=MH({inputs:{input:r},backend:a}),s=kG({inputs:{x:o},backend:a}),i=xW({inputs:{real:n,imag:s},backend:a});return a.disposeIntermediateTensorInfo(t),a.disposeIntermediateTensorInfo(n),a.disposeIntermediateTensorInfo(o),a.disposeIntermediateTensorInfo(s),i}return jj({backend:a,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}};function SG(e){const{inputs:t,backend:n,attrs:a}=e,{axis:r}=a;if(1===t.length)return Ij({inputs:{input:t[0]},backend:n,attrs:{dim:r}});const o=t[0].shape,s=t[0].dtype;t.forEach((e=>{Wx(o,e.shape,"All tensors passed to stack must have matching shapes"),Vx(s===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const i=[],l=PH({inputs:t.map((e=>{const t=Ij({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((e=>n.disposeIntermediateTensorInfo(e))),l}const $G={kernelName:EE,backendName:"cpu",kernelFunc:SG};const TG={kernelName:SE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{paddings:o,constantValue:s}=a;JV(r,"pad");const i=o.map(((e,t)=>e[0]+r.shape[t]+e[1])),l=o.map((e=>e[0])),u=n.data.get(r.dataId).values,c=Ux(r.shape),p=r.shape.length,d=ck(r.shape),h=Ux(i),f=i.length,m=ck(i),g=ek(r.dtype,h);0!==s&&g.fill(s);for(let e=0;e<c;e++){g[vk(bk(e,p,d).map(((e,t)=>e+l[t])),f,m)]=u[e]}return{dataId:n.write(g,i,r.dtype),shape:i,dtype:r.dtype}}},IG=lW(((e,t)=>Math.pow(e,t))),NG=IW($E,IG),OG={kernelName:$E,backendName:"cpu",kernelFunc:NG};function RG(e,t,n,a){const[r,o]=jN(e,a),s=$$(t,"int32"),i=fk(Ux(r),s),l=Ux(o);for(let e=0;e<i.length;++e){const t=e*l;let a=1;for(let e=0;e<l;++e)a*=n[t+e];i[e]=a}return{outVals:i,outShape:r,outDtype:s}}const AG={kernelName:IE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:s}=a;JV(r,"prod");const i=r.shape.length,l=Zx(o,r.shape),u=qN(l,i);let c=l,p=r;const d=[];null!=u&&(p=qW({inputs:{x:r},backend:n,attrs:{perm:u}}),d.push(p),c=YN(c.length,i));const h=n.data.get(p.dataId).values,{outVals:f,outShape:m,outDtype:g}=RG(p.shape,p.dtype,h,c);let v=m;return s&&(v=UN(m,l)),d.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(v,g,f)}};function MG(e,t,n,a){if(e===t||e<t&&n<0||t<e&&n>1)return fk(0,a);const r=fk(Math.abs(Math.ceil((t-e)/n)),a);t<e&&1===n&&(n=-1),r[0]=e;for(let e=1;e<r.length;e++)r[e]=r[e-1]+n;return r}const BG={kernelName:NE,backendName:"cpu",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:a,stop:r,dtype:o,step:s}=n,i=MG(a,r,s,o);return t.makeTensorInfo([i.length],o,i)}},PG=eW(RE,(e=>1/e)),DG={kernelName:RE,backendName:"cpu",kernelFunc:PG};const FG={kernelName:DE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r}=t,{alignCorners:o,halfPixelCenters:s,size:i}=a;JV(r,"resizeBilinear");const l=ck(r.shape),[u,c]=i,[p,d,h,f]=r.shape,m=n.data.get(r.dataId).values,g=new Float32Array(Ux([p,u,c,f])),v=[o&&u>1?d-1:d,o&&c>1?h-1:h],b=[o&&u>1?u-1:u,o&&c>1?c-1:c];let y=0;const w=v[0]/b[0],x=v[1]/b[1];for(let e=0;e<p;e++)for(let t=0;t<u;t++){let n;n=s?w*(t+.5)-.5:w*t;const a=Math.max(0,Math.floor(n)),r=n-a,o=Math.min(d-1,Math.ceil(n)),i=e*l[0]+a*l[1],u=e*l[0]+o*l[1];for(let e=0;e<c;e++){let t;t=s?x*(e+.5)-.5:x*e;const n=Math.max(0,Math.floor(t)),a=t-n,o=Math.min(h-1,Math.ceil(t)),c=i+n*l[2],p=u+n*l[2],d=i+o*l[2],v=u+o*l[2];for(let e=0;e<f;e++){const t=m[c+e],n=m[p+e],o=t+(m[d+e]-t)*a,s=o+(n+(m[v+e]-n)*a-o)*r;g[y++]=s}}}return n.makeTensorInfo([p,u,c,f],"float32",g)}};const _G={kernelName:FE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r,dy:o}=t,{alignCorners:s}=a;JV([o,r],"resizeBilinearGrad");const i=ck(r.shape),[l,u,c,p]=r.shape,[,d,h]=o.shape,f=new Float32Array(l*u*c*p),m=[s&&d>1?u-1:u,s&&h>1?c-1:c],g=[s&&d>1?d-1:d,s&&h>1?h-1:h],v=m[0]/g[0],b=m[1]/g[1],y=n.data.get(o.dataId).values;let w=0;for(let e=0;e<l;e++){const t=e*i[0];for(let e=0;e<d;e++){const n=e*v,a=Math.floor(n),r=Math.min(Math.ceil(n),u-1),o=t+a*i[1],s=t+r*i[1],l=n-a,d=1-l;for(let e=0;e<h;e++){const t=e*b,n=Math.floor(t),a=Math.min(Math.ceil(t),c-1),r=t-n,u=1-r,h=o+n*i[2],m=o+a*i[2],g=s+n*i[2],v=s+a*i[2],x=d*u,k=d*r,C=l*u,E=l*r;for(let e=0;e<p;e++){const t=y[w++];f[h+e]+=t*x,f[m+e]+=t*k,f[g+e]+=t*C,f[v+e]+=t*E}}}}return n.makeTensorInfo([l,c,u,p],"float32",f)}};const LG={kernelName:BE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r}=t,{alignCorners:o,halfPixelCenters:s,size:i}=a;JV(r,"resizeNearestNeighbor");const l=ck(r.shape),[u,c]=i,[p,d,h,f]=r.shape,m=n.data.get(r.dataId).values,g=new Float32Array(p*u*c*f),v=[o&&u>1?d-1:d,o&&c>1?h-1:h],b=[o&&u>1?u-1:u,o&&c>1?c-1:c],y=v[0]/b[0],w=v[1]/b[1];let x=0;for(let e=0;e<p;e++){const t=e*l[0];for(let e=0;e<u;e++){const n=s?y*(e+.5):y*e;let a=Math.min(d-1,o?Math.round(n):Math.floor(n));s&&(a=Math.max(0,a));const r=t+a*l[1];for(let e=0;e<c;e++){const t=s?w*(e+.5):w*e;let n=Math.min(h-1,o?Math.round(t):Math.floor(t));s&&(n=Math.max(0,n));const a=r+n*l[2];for(let e=0;e<f;e++){const t=m[a+e];g[x++]=t}}}}return n.makeTensorInfo([p,u,c,f],r.dtype,g)}};const zG={kernelName:PE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r,dy:o}=t,{alignCorners:s}=a;JV([o,r],"resizeNearestNeighborGrad");const i=ck(r.shape),l=ck(o.shape),[u,c,p,d]=r.shape,[,h,f]=o.shape,m=new Float32Array(u*c*p*d),g=n.data.get(o.dataId).values,v=[s&&h>1?c-1:c,s&&f>1?p-1:p],b=[s&&h>1?h-1:h,s&&f>1?f-1:f],y=v[0]/b[0],w=v[1]/b[1],x=1/y,k=1/w,C=2*Math.ceil(x)+2,E=2*Math.ceil(k)+2;for(let e=0;e<u;e++){const t=e*i[0];for(let e=0;e<c;e++){const n=t+e*i[1],a=Math.floor(e*x),r=Math.floor(a-C/2);for(let a=0;a<p;a++){const o=n+a*i[2],u=Math.floor(a*k),v=Math.floor(u-E/2);for(let n=0;n<d;n++){let i=0;for(let o=0;o<C;o++){const u=o+r;if(u<0||u>=h)continue;const d=t+u*l[1],m=u*y;if(e===Math.min(c-1,s?Math.round(m):Math.floor(m)))for(let e=0;e<E;e++){const t=e+v;if(t<0||t>=f)continue;const r=d+t*l[2],o=t*w;a===Math.min(p-1,s?Math.round(o):Math.floor(o))&&(i+=g[r+n])}}m[o+n]=i}}}}return n.makeTensorInfo(r.shape,r.dtype,m)}};const VG={kernelName:LE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{dims:o}=a;JV(r,"reverse");const s=r.shape.length,i=Zx(o,r.shape);if(0===s)return rW({inputs:{x:r},backend:n});const l=new h$(r.shape,r.dtype),u=n.bufferSync(r);for(let e=0;e<l.size;e++){const t=l.indexToLoc(e),n=t.slice();i.forEach((e=>n[e]=r.shape[e]-1-n[e])),l.set(u.get(...n),...t)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}},WG={kernelName:$S,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:a}=e,{radians:r,fillValue:o,center:s}=t,i=n,l=ek(a.dtype,Ux(a.shape)),[u,c,p,d]=a.shape,[h,f]=sA(s,c,p),m=Math.sin(r),g=Math.cos(r),v=i.data.get(a.dataId).values;for(let e=0;e<u;e++){const t=e*p*c*d;for(let e=0;e<c;e++){const n=e*(p*d);for(let a=0;a<p;a++){const r=a*d;for(let s=0;s<d;s++){const i=[u,e,a,s],b=i[2],y=i[1];let w=(b-h)*g-(y-f)*m,x=(b-h)*m+(y-f)*g;w=Math.round(w+h),x=Math.round(x+f);let k=o;if("number"!=typeof o&&(k=3===s?255:o[s]),w>=0&&w<p&&x>=0&&x<c){k=v[t+x*(p*d)+w*d+s]}l[t+n+r+s]=k}}}}return{dataId:i.write(l,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},HG=eW(zE,(e=>{const t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2==0?t:t+1})),jG={kernelName:zE,backendName:"cpu",kernelFunc:HG},UG=gW((e=>1/Math.sqrt(e))),GG=tW(VE,UG),qG={kernelName:VE,backendName:"cpu",kernelFunc:GG};function XG(e,t,n,a,r,o,s,i,l,u){const c=[a/r,r],p=e.values,d=t.values;if(0===a)return DT(n,t.dtype);const h=DT(c,t.dtype);h.values.fill(l);for(let e=0;e<o;e++){const o=[];let l=0;for(let t=0;t<s;t++){const n=p[e*s+t];o.push(n),l+=n*i[t]}if(l<0||l>=a/r)throw new Error(`Invalid indices: ${o} does not index into ${n}`);for(let n=0;n<r;n++)u?h.values[l*r+n]+=d[e*r+n]:h.values[l*r+n]=0===t.rank?d[0]:d[e*r+n]}return h}const YG={kernelName:WE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{indices:r,updates:o}=t,{shape:s}=a,{sliceRank:i,numUpdates:l,sliceSize:u,strides:c,outputSize:p}=mA(0,r,s),d=XG(n.bufferSync(r),n.bufferSync(o),s,p,u,l,i,c,0,!0);return n.makeTensorInfo(s,d.dtype,d.values)}};const KG={kernelName:HE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:a,t:r,e:o}=t;JV([a,r,o],"select");const s=a.shape.length,i=n.data.get(a.dataId).values,l=n.data.get(r.dataId).values,u=n.data.get(o.dataId).values,c=$$(r.dtype,o.dtype),p=fk(Ux(r.shape),c);let d=0;const h=0===s||s>1||1===r.shape.length?1:Ux(r.shape.slice(1));for(let e=0;e<i.length;e++)for(let t=0;t<h;t++)1===i[e]?p[d++]=l[e]:p[d++]=u[e];return n.makeTensorInfo(r.shape,c,p)}},JG=gA,ZG=vA,QG=eW(jE,(e=>e>=0?ZG*e:JG*(Math.exp(e)-1))),eq={kernelName:jE,backendName:"cpu",kernelFunc:QG},tq=eW(XE,(e=>e<0?-1:e>0?1:0)),nq={kernelName:XE,backendName:"cpu",kernelFunc:tq},aq=eW(GE,(e=>Math.sin(e))),rq={kernelName:GE,backendName:"cpu",kernelFunc:aq},oq=eW(qE,(e=>Math.sinh(e))),sq={kernelName:qE,backendName:"cpu",kernelFunc:oq},iq=Math.log(1.1920928955078125e-7)+2,lq=eW(KE,(e=>{const t=e>-iq,n=e<iq,a=Math.exp(e);let r;return r=n?a:t?e:Math.log(1+a),r})),uq={kernelName:KE,backendName:"cpu",kernelFunc:lq};const cq={kernelName:QE,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockShape:o,paddings:s}=a;JV([r],"spaceToBatchND");const i=Ux(o),l=[[0,0]];l.push(...s);for(let e=1+o.length;e<r.shape.length;++e)l.push([0,0]);const u=TG.kernelFunc({inputs:{x:r},backend:n,attrs:{paddings:l,constantValue:0}}),c=iA(u.shape,o,i,!1),p=lA(c.length,o.length,!1),d=uA(u.shape,o,i,!1),h=BW({inputs:{x:u},backend:n,attrs:{shape:c}}),f=qW({inputs:{x:h},backend:n,attrs:{perm:p}}),m=BW({inputs:{x:f},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),m}};function pq(e,t,n,a,r,o,s){const i=t[0],l=o[0],u=new Array(l),c=new Array(i),p=t[1];if(0===l){if(0!==i)throw new Error(VA(i));return[tk(n,0),[0,p],tk(r,0),u,c]}let d=!0,h=0;const f=new Array(l).fill(0);for(let t=0;t<i;++t){const n=e[t*p];if(n<0)throw new Error(WA(t,n));if(n>=l)throw new Error(HA(t,n,l));++f[n],d=d&&n>=h,h=n}let m=!0;for(let e=0;e<l;++e){const t=0===f[e];u[e]=t,m=m&&!t,f[e]=Math.max(f[e],1),e>0&&(f[e]+=f[e-1])}if(m&&d){const t=e,n=a;for(let e=0;e<i;++e)c[e]=e;return[t,[i,p],n,u,c]}{const t=f[l-1],o=tk(n,t*p),d=tk(r,t),h=new Array(l).fill(0);for(let t=0;t<i;++t){const n=e[t*p],r=h[n],s=(0===n?0:f[n-1])+r;h[n]++;for(let n=0;n<p;++n)o[s*p+n]=e[t*p+n];d[s]=a[t],c[t]=s}for(let e=0;e<l;++e){if(0===h[e]){const t=0===e?0:f[e-1];o[t*p+0]=e;for(let e=1;e<p;++e)o[t*p+e]=0;d[t]=s}}return[o,[t,p],d,u,c]}}const dq={kernelName:nS,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:a,values:r,denseShape:o,defaultValue:s}=t;if(1!==o.shape.length)throw new Error(`Dense shape must be a vector, saw:\n        ${o.shape}`);if(2!==a.shape.length)throw new Error(`Indices must be a matrix, saw:\n        ${a.shape}`);if(1!==r.shape.length)throw new Error(`Values must be a vector, saw:\n        ${r.shape}`);if(0!==s.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${s.shape}`);const i=n.data.get(a.dataId).values,l=n.data.get(r.dataId).values,u=n.data.get(o.dataId).values,c=n.data.get(s.dataId).values[0],[p,d,h,f,m]=pq(i,a.shape,a.dtype,l,r.dtype,u,c);return[n.makeTensorInfo(d,a.dtype,p),n.makeTensorInfo([d[0]],r.dtype,h),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([m.length],a.dtype,new Int32Array(m))]}};function hq(e,t,n,a,r){const o=Ux(a),s=t[0],i=r.length,l=[];let u=1,c=-1;for(let e=0;e<i;++e){const t=r[e];if(-1===t){if(-1!==c)throw new Error(jA(c,e));c=e,l.push(1)}else{if(t<0)throw new Error(UA(e,t));u*=t,l.push(t)}}if(-1!==c){if(u<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");const e=Math.trunc(o/u);if(u*e!==o)throw new Error(qA(a,l));l[c]=e}if(Ux(l)!==o)throw new Error(XA(a,l));const p=a.length,d=[];if(p>0){d[p-1]=1;for(let e=p-2;e>=0;--e)d[e]=d[e+1]*a[e+1]}const h=[];if(i>0){h[i-1]=1;for(let e=i-2;e>=0;--e)h[e]=h[e+1]*l[e+1]}const f=tk(n,s*i);for(let t=0;t<s;++t){let n=0;for(let a=0;a<p;++a)n+=e[t*p+a]*d[a];for(let e=0;e<i;++e)f[t*i+e]=Math.trunc(n/h[e]),n%=h[e]}return[f,[s,i],l]}const fq={kernelName:aS,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:a,inputShape:r,newShape:o}=t;if(2!==a.shape.length)throw new Error(`Input indices should be a matrix but received shape\n        ${a.shape}`);if(1!==r.shape.length)throw new Error(`Input shape should be a vector but received shape\n        ${r.shape}`);if(1!==o.shape.length)throw new Error(`Target shape should be a vector but received shape ${o.shape}`);const s=Array.from(n.data.get(r.dataId).values),i=n.data.get(a.dataId).values,l=Array.from(n.data.get(o.dataId).values),[u,c,p]=hq(i,a.shape,a.dtype,s,l);return[n.makeTensorInfo(c,a.dtype,u),n.makeTensorInfo([p.length],o.dtype,new Int32Array(p))]}};function mq(e,t,n,a,r,o=!1,s=0){const i=a.length,l=[t[0],e.length/t[0]],u=l[1],c=i>0?r[i-1]+1:0;if(c<0)throw new Error("segment ids must be >= 0");const p=t.slice();p[0]=c;const d=p.reduce(((e,t)=>e*t),1),h=tk(n,d);if(0===i)return c>0&&h.fill(s),[h,p];if(c<=0)throw new Error("segment ids must be >= 0");let f=0,m=1,g=0,v=r[f];for(;;){let t=0;if(m<i){if(t=r[m],v===t){++m;continue}if(v>=t)throw new Error("segment ids are not increasing")}if(v<0||v>=c)throw new Error(JA(v,c));v>g&&h.fill(s,g*u,v*u);for(let t=f;t<m;++t){const n=a[t];if(n<0||n>=l[0])throw new Error(ZA(t,a[t],l[0]));for(let t=0;t<u;t++)h[v*u+t]+=e[n*u+t]}if(o)for(let e=0;e<u;e++)h[v*u+e]/=m-f;if(f=m,++m,g=v+1,v=t,m>i)break}return g<c&&h.fill(s,g*u,c*u),[h,p]}const gq={kernelName:rS,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:a,indices:r,segmentIds:o}=t;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.shape.length)throw new Error(`Indices should be a vector but received shape\n          ${r.shape}`);if(1!==o.shape.length)throw new Error(`Segment ids should be a vector but received shape\n          ${o.shape}`);if(r.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const s=n.data.get(a.dataId).values,i=n.data.get(r.dataId).values,l=n.data.get(o.dataId).values,[u,c]=mq(s,a.shape,a.dtype,i,l,!0);return n.makeTensorInfo(c,a.dtype,u)}};const vq={kernelName:oS,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:a,indices:r,segmentIds:o}=t;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.shape.length)throw new Error(`Indices should be a vector but received shape\n         ${r.shape}`);if(1!==o.shape.length)throw new Error(`Segment ids should be a vector but received shape\n         ${o.shape}`);if(r.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");const s=n.data.get(a.dataId).values,i=n.data.get(r.dataId).values,l=n.data.get(o.dataId).values,[u,c]=mq(s,a.shape,a.dtype,i,l);return n.makeTensorInfo(c,a.dtype,u)}};const bq={kernelName:sS,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{sparseIndices:r,sparseValues:o,defaultValue:s}=t,{outputShape:i}=a,{sliceRank:l,numUpdates:u,sliceSize:c,strides:p,outputSize:d}=mA(0,r,i),h=XG(n.bufferSync(r),n.bufferSync(o),i,d,c,u,l,p,n.data.get(s.dataId).values[0],!1);return n.makeTensorInfo(i,h.dtype,h.values)}};const yq={kernelName:eS,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{numOrSizeSplits:o,axis:s}=a,i=Zx(s,r.shape)[0],l=zA(r,o,i),u=new Array(r.shape.length).fill(0),c=r.shape.slice();return l.map((e=>{const t=[...c];t[i]=e;const a=yH({inputs:{x:r},backend:n,attrs:{begin:u,size:t}});return u[i]+=e,a}))}},wq=gW((e=>Math.sqrt(e))),xq=eW(JE,(e=>Math.sqrt(e))),kq={kernelName:JE,backendName:"cpu",kernelFunc:xq},Cq={kernelName:lS,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{const{x:n}=e,a=t;JV(n,"square");const r=a.data.get(n.dataId).values,o=new Float32Array(r.length);for(let e=0;e<r.length;++e){const t=r[e];o[e]=t*t}return{dataId:a.write(o,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},Eq=lW(((e,t)=>{const n=e-t;return n*n})),Sq=IW(iS,Eq),$q={kernelName:iS,backendName:"cpu",kernelFunc:Sq},Tq=eW(ES,((e,t)=>{const n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),Iq={kernelName:ES,backendName:"cpu",kernelFunc:Tq};function Nq(e,t,n,a){const r=DT(e,t.dtype);for(let e=0;e<r.size;e++){const o=r.indexToLoc(e),s=new Array(o.length);for(let e=0;e<s.length;e++)s[e]=o[e]*n[e]+a[e];r.set(t.get(...s),...o)}return r}const Oq={kernelName:uS,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{begin:o,end:s,strides:i,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:p,shrinkAxisMask:d}=a;JV(r,"stridedSlice");const{finalShapeSparse:h,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:v,begin:b,end:y,strides:w}=fI(r.shape,o,s,i,l,u,c,p,d);let x;if(m)x=BW({inputs:{x:r},backend:n,attrs:{shape:f}});else if(g||v){Vx(r.shape.length>=1,(()=>`Input must have rank at least 1, got: ${r.shape.length}`));const e=tI(b,y,w),t=yH({inputs:{x:r},backend:n,attrs:{begin:b,size:e}});x=BW({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{const e=Nq(h,n.bufferSync(r),w,b);x=n.makeTensorInfo(f,e.dtype,e.values)}return x}};class Rq{constructor(e,t,n,a,r,o){this.separator=a$(e),this.nGramWidths=t,this.leftPad=a$(n),this.rightPad=a$(a),this.padWidth=r,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){const n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,a,r,o){for(let s=0;s<r;++s){const i=this.getPadWidth(o),l=Math.max(0,i-s),u=Math.max(0,i-(r-(s+1))),c=o-(l+u),p=t+(l>0?0:s-i);let d=0;d+=l*this.leftPad.length;for(let t=0;t<c;++t)d+=e[p+t].length;d+=u*this.rightPad.length;d+=(l+u+c-1)*this.separator.length,n[a+s]=new Uint8Array(d);const h=n[a+s];let f=0;const m=e=>e.forEach((e=>h[f++]=e));for(let e=0;e<l;++e)m(this.leftPad),m(this.separator);for(let t=0;t<c-1;++t)m(e[p+t]),m(this.separator);if(c>0){m(e[p+c-1]);for(let e=0;e<u;++e)m(this.separator),m(this.rightPad)}else{for(let e=0;e<u-1;++e)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(e,t){const n=e.length,a=t.length;if(a>0){let e=t[0];if(0!==e)throw new Error(`First split value must be 0, got ${e}`);for(let r=1;r<a;++r){let a=t[r]>=e;if(a=a&&t[r]<=n,!a)throw new Error(`Invalid split value ${t[r]}, must be in [${e}, ${n}]`);e=t[r]}if(e!==n)throw new Error(`Last split value must be data size. Expected ${n}, got ${e}`)}const r=a-1,o=tk("int32",a);if(0===n||0===a){const e=new Array(n);for(let e=0;e<=r;++e)o[e]=0;return[e,o]}o[0]=0;for(let e=1;e<=r;++e){const n=t[e]-t[e-1];let a=0;this.nGramWidths.forEach((e=>{a+=this.getNumNGrams(n,e)})),this.preserveShort&&n>0&&0===a&&(a=1),o[e]=o[e-1]+a}const s=new Array(o[r]);for(let n=0;n<r;++n){const a=t[n];let r=o[n];if(this.nGramWidths.forEach((o=>{const i=t[n+1]-t[n],l=this.getNumNGrams(i,o);this.createNGrams(e,a,s,r,l,o),r+=l})),this.preserveShort&&r===o[n]){const o=t[n+1]-t[n];if(0===o)continue;const i=o+2*this.padWidth,l=1;this.createNGrams(e,a,s,r,l,i)}}return[s,o]}}function Aq(e,t,n,a,r,o,s,i){return new Rq(n,a,r,o,s,i).compute(e,t)}const Mq={kernelName:cS,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{separator:r,nGramWidths:o,leftPad:s,rightPad:i,padWidth:l,preserveShortSequences:u}=a,{data:c,dataSplits:p}=t,d=n.data.get(c.dataId).values,h=n.data.get(p.dataId).values,[f,m]=Aq(d,h,r,o,s,i,l,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(p.shape,"int32",m)]}};function Bq(e,t,n,a){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)a.push(e.subarray(t,t+1));return}if(1===t.length){const r=t[0];let o=e.indexOf(r);for(;-1!==o;){const t=e.subarray(0,o);n&&0===t.length||a.push(t),o=(e=e.subarray(o+1)).indexOf(r)}return void(n&&0===e.length||a.push(e))}let r=0;for(let o=0;o<e.length+1;o++)if(o===e.length||-1!==t.indexOf(e[o])){const t=e.subarray(r,o);n&&0===t.length||a.push(t),r=o+1}}function Pq(e,t,n){const a=e.length,r=[];let o=0,s=0;const i=new Array(a);for(let l=0;l<a;++l){const a=r.length;Bq(e[l],t,n,r);const u=r.length-a;i[l]=u,o+=u,s=Math.max(s,u)}const l=tk("int32",2*o),u=new Array(o),c=[a,s];let p=0;for(let e=0;e<a;++e)for(let t=0;t<i[e];++t)l[2*p]=e,l[2*p+1]=t,u[p]=r[p],++p;return[l,u,c]}const Dq={kernelName:pS,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{skipEmpty:r}=a,{input:o,delimiter:s}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error(`Input must be a vector, got shape: ${o.shape}`);if(0!==s.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);const i=n.data.get(o.dataId).values,l=n.data.get(s.dataId).values[0],[u,c,p]=Pq(i,l,r),d=c.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(p))]}};function Fq(e,t){const n=tk("int32",e.length);for(let a=0;a<e.length;++a)n[a]=QS(e[a]).modulo(t).getLowBitsUnsigned();return n}const _q={kernelName:dS,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{numBuckets:r}=a,{input:o}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");const s=Fq(n.data.get(o.dataId).values,r);return n.makeTensorInfo(o.shape,"int32",s)}},Lq=eW(fS,(e=>Math.tan(e))),zq={kernelName:fS,backendName:"cpu",kernelFunc:Lq},Vq=eW(mS,(e=>Math.tanh(e)));function Wq(e,t){const n=new Array(e.rank);for(let a=0;a<n.length;a++)n[a]=e.shape[a]*t[a];const a=DT(n,e.dtype);for(let t=0;t<a.values.length;++t){const n=a.indexToLoc(t),r=new Array(e.rank);for(let t=0;t<r.length;t++)r[t]=n[t]%e.shape[t];const o=e.locToIndex(r);a.values[t]=e.values[o]}return a}const Hq={kernelName:gS,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{reps:o}=a;JV(r,"tile");const s=Wq(n.bufferSync(r),o);return n.makeTensorInfo(s.shape,s.dtype,s.values)}},jq=(e,t)=>{const n=t.value-e.value;return 0===n?e.index-t.index:n};function Uq(e,t,n=0,a=e.length-1){for(;a>n;){if(a-n>600){const r=a-n+1,o=t-n+1,s=Math.log(r),i=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*i*(r-i)/r)*Math.sign(o-r/2);Uq(e,t,Math.max(n,Math.floor(t-o*i/r+l)),Math.min(a,Math.floor(t+(r-o)*i/r+l)))}const r=e[t];let o=n,s=a;for(zx(e,n,t),jq(e[a],r)>0&&zx(e,n,a);o<s;){for(zx(e,o,s),o++,s--;jq(e[o],r)<0;)o+=1;for(;jq(e[s],r)>0;)s-=1}0===jq(e[n],r)?zx(e,n,s):(s+=1,zx(e,s,a)),s<=t&&(n=s+1),t<=s&&(a=s-1)}}function Gq(e,t,n,a,r){const o=t[t.length-1],[s,i]=[e.length/o,o],l=ek(n,s*a),u=ek("int32",s*a);for(let t=0;t<s;t++){const n=t*i,o=e.subarray(n,n+i);let s=new Array(o.length);o.forEach(((e,t)=>s[t]={value:e,index:t})),a<s.length&&(Uq(s,a),s=s.slice(0,a)),r&&s.sort(jq);const c=t*a,p=l.subarray(c,c+a),d=u.subarray(c,c+a);for(let e=0;e<a;e++)p[e]=s[e].value,d[e]=s[e].index}const c=t.slice();return c[c.length-1]=a,[DT(c,n,l),DT(c,"int32",u)]}const qq={kernelName:vS,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{k:o,sorted:s}=a;JV(r,"topk");const i=n.data.get(r.dataId).values,[l,u]=Gq(i,r.shape,r.dtype,o,s);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}};const Xq={kernelName:bS,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,{image:r,transforms:o}=t,{interpolation:s,fillMode:i,fillValue:l,outputShape:u}=n,[c,p,d,h]=r.shape,[f,m]=null!=u?u:[p,d],g=[c,f,m,h],v=ck(r.shape),b=v[0],y=v[1],w=v[2],x=ek(r.dtype,Ux(g));x.fill(l);const k=a.data.get(r.dataId).values,C=a.data.get(o.dataId).values;for(let e=0;e<c;++e){const t=1===o.shape[0]?C:C.subarray(8*e,8*e+8);for(let n=0;n<f;++n)for(let a=0;a<m;++a)for(let r=0;r<h;++r){let o;const u=t[6]*a+t[7]*n+1;if(0===u)continue;const c=(t[0]*a+t[1]*n+t[2])/u,h=(t[3]*a+t[4]*n+t[5])/u,f=Yq(c,d,i),m=Yq(h,p,i);switch(s){case"nearest":o=Jq(k,p,d,b,y,w,e,m,f,r,l);break;case"bilinear":o=Zq(k,p,d,b,y,w,e,m,f,r,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${s}`)}x[e*b+n*y+a*w+r]=o}return a.makeTensorInfo(g,r.dtype,x)}return{dataId:a.write(x,g,r.dtype),shape:r.shape,dtype:r.dtype}}};function Yq(e,t,n){switch(n){case"reflect":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}else if(n>t-1)if(t<=1)n=0;else{const e=2*t;n-=e*Math.trunc(n/e),n>=t&&(n=e-n-1)}return _x(0,n,t-1)}(e,t);case"wrap":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{const e=t-1;n+=t*(Math.trunc(-n/e)+1)}else if(n>t-1)if(t<=1)n=0;else{const e=t-1;n-=t*Math.trunc(n/e)}return _x(0,n,t-1)}(e,t);case"nearest":return function(e,t){return _x(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function Kq(e,t,n,a,r,o,s,i,l,u,c){return 0<=i&&i<t&&0<=l&&l<n?e[s*a+i*r+l*o+u]:c}function Jq(e,t,n,a,r,o,s,i,l,u,c){return Kq(e,t,n,a,r,o,s,Math.round(i),Math.round(l),u,c)}function Zq(e,t,n,a,r,o,s,i,l,u,c){const p=Math.floor(i),d=Math.floor(l),h=p+1,f=d+1;return(h-i)*((f-l)*Kq(e,t,n,a,r,o,s,p,d,u,c)+(l-d)*Kq(e,t,n,a,r,o,s,p,f,u,c))+(i-p)*((f-l)*Kq(e,t,n,a,r,o,s,h,d,u,c)+(l-d)*Kq(e,t,n,a,r,o,s,h,f,u,c))}function Qq(e,t,n,a){const r=Zx(t,n)[0],o=[1,n[0],1];for(let e=0;e<r;e++)o[0]*=n[e];o[1]=n[r];for(let e=r+1;e<n.length;e++)o[2]*=n[e];const s={},i=new Int32Array(n[r]),l=new h$(o,a,e),u=[],c=1===o[0]&&1===o[2];for(let t=0;t<n[r];t++){let n;if(c)n=e[t].toString();else{const e=[];for(let n=0;n<o[0];n++)for(let a=0;a<o[2];a++)e.push(l.get(n,t,a));n=e.join(",")}if(void 0!==s[n])i[t]=s[n];else{const e=Object.keys(s).length;s[n]=e,i[t]=e,u.push(t)}}const p=o.slice();p[1]=Object.keys(s).length;const d=new h$(p,a);u.forEach(((e,t)=>{for(let n=0;n<o[0];n++)for(let a=0;a<o[2];a++)d.set(l.get(n,e,a),n,t,a)}));const h=n.slice();return h[r]=p[1],{outputValues:d.values,outputShape:h,indices:i}}const eX={kernelName:wS,backendName:"cpu",kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,{axis:r}=n,{x:o}=t;JV(o,"unique");const s=a.data.get(o.dataId).values,{outputValues:i,outputShape:l,indices:u}=Qq(s,r,o.shape,o.dtype);return[a.makeTensorInfo(l,o.dtype,i),a.makeTensorInfo([u.length],"int32",u)]}};const tX={kernelName:xS,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{value:r}=t;let{axis:o}=a;o<0&&(o+=r.shape.length);const s=r.shape.length,i=r.shape[o],l=new Array(s-1);let u=0;for(let e=0;e<s;e++)e!==o&&(l[u++]=r.shape[e]);const c=new Array(s).fill(0),p=r.shape.slice();p[o]=1;const d=new Array(i);for(let e=0;e<d.length;e++){c[o]=e;const t=yH({inputs:{x:r},backend:n,attrs:{begin:c,size:p}});d[e]=BW({inputs:{x:t},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(t)}return d}};const nX={kernelName:kS,backendName:"cpu",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,segmentIds:o}=t,{numSegments:s}=a;JV(r,"unsortedSegmentSum");const i=[],l=[],u=r.shape.length-o.shape.length;let c=o;for(let e=0;e<u;++e){const t=Ij({inputs:{input:c},backend:n,attrs:{dim:e+1}});c=t,l.push(t)}for(let e=0;e<s;++e){const t=e$(e,"int32"),a=n.makeTensorInfo([],"int32",t),o=mj({inputs:{a:a,b:c},backend:n}),s=$W({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),u=lj({inputs:{a:s,b:r},backend:n}),p=cj({inputs:{x:u},backend:n,attrs:{axis:0,keepDims:!1}});i.push(p),l.push(a),l.push(o),l.push(s),l.push(u),l.push(p)}const p=SG({inputs:i,backend:n,attrs:{axis:0}});return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),p}},aX=[_W,zW,WW,jW,MW,UW,YW,KW,JW,ZW,eH,nH,rH,iH,uH,hH,fH,mH,gH,FW,vH,xH,EH,SH,TW,IH,OH,kW,RH,DH,LH,zH,_H,WH,HH,VH,UH,qH,XH,YH,KH,JH,QH,ej,tj,nj,aj,oj,rj,Pj,dj,aW,hj,gj,Ej,Tj,Nj,Aj,Hj,Uj,Gj,Yj,Zj,Qj,eU,nU,rU,iU,cU,oW,pU,BH,hU,mU,vU,iW,wU,CU,SU,IU,OU,MU,PU,_U,LU,zU,GU,qU,XU,YU,KU,JU,HU,ZU,QU,nG,aG,sG,uG,uj,pG,hG,mG,vG,wG,xG,EG,$G,TG,OG,pW,AG,BG,SW,DG,hW,mW,PW,FG,_G,LG,zG,VG,WG,jG,qG,YG,KG,eq,yW,nq,rq,sq,wH,lG,uq,cq,dq,fq,gq,vq,bq,yq,kq,Cq,$q,Iq,Oq,Mq,Dq,_q,Lj,pj,zq,{kernelName:mS,backendName:"cpu",kernelFunc:Vq},Hq,qq,XW,Xq,eX,tX,nX,CG];for(const e of aX)FS(e);const rX={},oX={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function sX(e){if(!(e in rX)){const t=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);if(t.addEventListener("webglcontextlost",(t=>{t.preventDefault(),delete rX[e]}),!1),1===e)return t.getContext("webgl",oX)||t.getContext("experimental-webgl",oX);return t.getContext("webgl2",oX)}(e);if(null===t)return console.log("Could not get context for WebGL version",e),null;rX[e]=t}const t=rX[e];return null==t||t.isContextLost()?(delete rX[e],sX(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),rX[e])}var iX,lX,uX;function cX(e,t){return[t,e]}function pX(e){const t=Ux(e);return Xx(Math.ceil(t/4))}function dX(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function hX(e,t){const n=e;let a,r,o,s,i,l,u,c,p,d;return 2===Ck().getNumber("WEBGL_VERSION")?(a=n.R32F,r=n.R16F,o=n.RGBA16F,s=n.RGBA32F,i=n.RED,u=4,c=1,p=n.HALF_FLOAT,d=n.FLOAT,l=n.RGBA8):(a=e.RGBA,r=e.RGBA,o=e.RGBA,s=n.RGBA,i=e.RGBA,u=4,c=4,p=null!=t?t.HALF_FLOAT_OES:null,d=e.FLOAT,l=e.RGBA),{internalFormatFloat:a,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:s,textureFormatFloat:i,downloadTextureFormat:l,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:p,textureTypeFloat:d}}function fX(e,t){const n=t();return Ck().getBool("DEBUG")&&function(e){const t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${t}`}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(iX||(iX={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(lX||(lX={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(uX||(uX={}));function mX(e){return!!(Ck().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function gX(e,t){return SX(e,(()=>e.getExtension(t)),'Extension "'+t+'" not supported on this browser.')}function vX(e,t){const n=SX(e,(()=>e.createShader(e.FRAGMENT_SHADER)),"Unable to create fragment WebGLShader.");if(fX(e,(()=>e.shaderSource(n,t))),fX(e,(()=>e.compileShader(n))),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw function(e,t){const n=bX.exec(t);if(null==n)return console.log(`Couldn't parse line number in error: ${t}`),void console.log(e);const a=+n[1],r=e.split("\n"),o=r.length.toString().length+2,s=r.map(((e,t)=>Yx((t+1).toString(),o)+e));let i=0;for(let e=0;e<s.length;e++)i=Math.max(s[e].length,i);const l=s.slice(0,a-1),u=s.slice(a-1,a),c=s.slice(a);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log(`%c ${Yx(u[0],i)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join("\n"))}(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const bX=/ERROR: [0-9]+:([0-9]+):/g;function yX(e,t){if(fX(e,(()=>e.validateProgram(t))),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function wX(e,t,n,a,r,o,s){const i=e.getAttribLocation(t,n);return-1!==i&&(fX(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,a))),fX(e,(()=>e.vertexAttribPointer(i,r,e.FLOAT,!1,o,s))),fX(e,(()=>e.enableVertexAttribArray(i))),!0)}function xX(e,t,n,a){fX(e,(()=>function(e,t,n){$X(e,n),fX(e,(()=>e.activeTexture(e.TEXTURE0+n))),fX(e,(()=>e.bindTexture(e.TEXTURE_2D,t)))}(e,t,a))),fX(e,(()=>e.uniform1i(n,a)))}function kX(e,t,n){fX(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,n))),fX(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)))}function CX(e,t){fX(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,t))),fX(e,(()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)))}function EX(e){const t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${t}`}}(e,t))}function SX(e,t,n){const a=fX(e,(()=>t()));if(null==a)throw new Error(n);return a}function $X(e,t){const n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,a=t+e.TEXTURE0;if(a<e.TEXTURE0||a>n){throw new Error(`textureUnit must be in ${`[gl.TEXTURE0, gl.TEXTURE${n}]`}.`)}}function TX(e,t=2){return Ux(e.slice(0,e.length-t))}function IX(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function NX(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[TX(e),...IX(e)]),t}function OX(e){return e%2==0}function RX(e,t){if(Gx(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){const n=e.slice(-1)[0],a=t.slice(-1)[0];if(n===a)return!0;if(OX(n)&&OX(a)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&OX(e[0])&&OX(t[0])}let AX,MX;function BX(e,t){return null!=e.getExtension(t)}function PX(e){try{if(null!=sX(e))return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function DX(e){if(0===e)return!1;const t=sX(e);if(1!==e){if(BX(t,"EXT_color_buffer_float"))return FX(t);const e="EXT_color_buffer_half_float";if(BX(t,e)){const n=t.getExtension(e);return function(e,t){const n=hX(e,t),a=e.createTexture();e.bindTexture(e.TEXTURE_2D,a);const r=1,o=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,r,o,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const s=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,a,0);const i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(a),e.deleteFramebuffer(s),i}(t,n)}return!1}if(!BX(t,"OES_texture_float"))return!1;if(!BX(t,"WEBGL_color_buffer_float"))return!1;return FX(t)}function FX(e){const t=hX(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);const a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);const r=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(a),r}function _X(e,t){Array.isArray(e)||(e=[e]),e.forEach((e=>{null!=e&&Vx("complex64"!==e.dtype,(()=>`${t} does not support complex64 tensors in the WebGL backend.`))}))}const LX=Ck();function zX(){let e,t,n,a,r,o,s,i,l,u;return 2===Ck().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",a="in",r="texture",o="outputColor",s="out vec4 outputColor;",i="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",l="",u="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",a="varying",r="texture2D",o="gl_FragColor",s="",i="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",u="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:a,texture2D:r,output:o,defineOutput:s,defineSpecialNaN:i,defineSpecialInf:l,defineRound:u}}function VX(e,t,n="index"){const a=ck(t);return a.map(((t,r)=>`${`int ${e[r]} = ${n} / ${t}`}; ${r===a.length-1?`int ${e[r+1]} = ${n} - ${e[r]} * ${t}`:`index -= ${e[r]} * ${t}`};`)).join("")}function WX(e,t,n="index"){const a=ck(t);return a.map(((t,r)=>`${`int ${e[r]} = ${n} / outShapeStrides[${r}]`}; ${r===a.length-1?`int ${e[r+1]} = ${n} - ${e[r]} * outShapeStrides[${r}]`:`index -= ${e[r]} * outShapeStrides[${r}]`};`)).join("")}function HX(e,t,n="index"){const a=e.map(((e,t)=>t)),r=function(e,t){const n=e.length,a=e.map((e=>`${t}[${e}]`)),r=new Array(n-1);r[n-2]=a[n-1];for(let e=n-3;e>=0;--e)r[e]=`(${r[e+1]} * ${a[e+1]})`;return r}(a,t);return r.map(((t,a)=>`${`int ${e[a]} = ${n} / ${r[a]}`}; ${a===r.length-1?`int ${e[a+1]} = ${n} - ${e[a]} * ${r[a]}`:`index -= ${e[a]} * ${r[a]}`};`)).join("")}function jX(e){const t=ck(e).map((e=>e.toString()));return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;\n  }\n`}LX.registerFlag("HAS_WEBGL",(()=>LX.getNumber("WEBGL_VERSION")>0)),LX.registerFlag("WEBGL_VERSION",(()=>PX(2)?2:PX(1)?1:0)),LX.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(()=>!1)),LX.registerFlag("WEBGL_BUFFER_SUPPORTED",(()=>2===LX.get("WEBGL_VERSION"))),LX.registerFlag("WEBGL_CPU_FORWARD",(()=>!0)),LX.registerFlag("WEBGL_FORCE_F16_TEXTURES",(()=>!1)),LX.registerFlag("WEBGL_PACK",(()=>LX.getBool("HAS_WEBGL"))),LX.registerFlag("WEBGL_PACK_NORMALIZATION",(()=>LX.getBool("WEBGL_PACK"))),LX.registerFlag("WEBGL_PACK_CLIP",(()=>LX.getBool("WEBGL_PACK"))),LX.registerFlag("WEBGL_PACK_DEPTHWISECONV",(()=>LX.getBool("WEBGL_PACK"))),LX.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(()=>LX.getBool("WEBGL_PACK"))),LX.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(()=>LX.getBool("WEBGL_PACK"))),LX.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(()=>LX.getBool("WEBGL_PACK"))),LX.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(()=>LX.getBool("WEBGL_PACK"))),LX.registerFlag("WEBGL_PACK_REDUCE",(()=>LX.getBool("WEBGL_PACK"))),LX.registerFlag("WEBGL_LAZILY_UNPACK",(()=>LX.getBool("WEBGL_PACK"))),LX.registerFlag("WEBGL_CONV_IM2COL",(()=>LX.getBool("WEBGL_PACK"))),LX.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(()=>function(e){if(null==AX){const t=sX(e);AX=t.getParameter(t.MAX_TEXTURE_SIZE)}return AX}(LX.getNumber("WEBGL_VERSION")))),LX.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(()=>function(e){if(null==MX){const t=sX(e);MX=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,MX)}(LX.getNumber("WEBGL_VERSION")))),LX.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(()=>{const e=LX.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;let t;const n=sX(e);return t=BX(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:BX(n,"EXT_disjoint_timer_query")?1:0,t}(e)})),LX.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(()=>LX.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!L$())),LX.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(()=>function(e){if(0===e)return!1;const t=sX(e);if(1===e){if(!BX(t,"OES_texture_float"))return!1}else if(!BX(t,"EXT_color_buffer_float"))return!1;return FX(t)}(LX.getNumber("WEBGL_VERSION")))),LX.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(()=>!LX.getBool("WEBGL_FORCE_F16_TEXTURES")&&LX.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))),LX.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(()=>DX(LX.getNumber("WEBGL_VERSION")))),LX.registerFlag("WEBGL_FENCE_API_ENABLED",(()=>{return 2===(e=LX.getNumber("WEBGL_VERSION"))&&null!=sX(e).fenceSync;var e})),LX.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(()=>LX.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0)),LX.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(()=>-1),(e=>{if(e<0&&-1!==e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)})),LX.registerFlag("WEBGL_FLUSH_THRESHOLD",(()=>L$()?1:-1),(e=>{if(e<0&&-1!==e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)})),LX.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(()=>128)),LX.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(()=>!1)),LX.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(()=>1e5)),LX.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(()=>128));const UX="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:GX}=o;function qX(e,t,n){const a=[];if(e.forEach((e=>{const t=Ux(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?a.push(`uniform float ${e.name}${t>1?`[${t}]`:""};`):(a.push(`uniform sampler2D ${e.name};`),a.push(`uniform int offset${e.name};`)),n.enableShapeUniforms){const{uniformShape:t}=rY(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:a.push(`uniform int ${e.name}Shape;`);break;case 2:a.push(`uniform ivec2 ${e.name}Shape;`);break;case 3:a.push(`uniform ivec3 ${e.name}Shape;`);break;case 4:a.push(`uniform ivec4 ${e.name}Shape;`)}a.push(`uniform ivec2 ${e.name}TexShape;`)}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:a.push("uniform int outShape;");break;case 2:a.push("uniform ivec2 outShape;"),a.push("uniform int outShapeStrides;");break;case 3:a.push("uniform ivec3 outShape;"),a.push("uniform ivec2 outShapeStrides;");break;case 4:a.push("uniform ivec4 outShape;"),a.push("uniform ivec3 outShapeStrides;")}a.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((e=>{a.push(`uniform ${e.type} ${e.name}${e.arrayIndex?`[${e.arrayIndex}]`:""};`)}));const r=a.join("\n"),o=e.map((e=>function(e,t,n=!1,a){let r="";r+=n?YX(e,a):XX(e,a);const o=e.shapeInfo.logicalShape,s=t.logicalShape;o.length<=s.length&&(r+=n?function(e,t){const n=e.name,a=n.charAt(0).toUpperCase()+n.slice(1),r="get"+a+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,i=GX(e.shapeInfo.logicalShape,t.logicalShape),l=aY(s),u=s-o;let c;const p=["x","y","z","w","u","v"];c=0===o?"":s<2&&i.length>=1?"coords = 0;":i.map((e=>`coords.${p[e+u]} = 0;`)).join("\n");let d="";d=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${p[t+u]}`)).join(", ");let h="return outputValue;";const f=1===Ux(e.shapeInfo.logicalShape),m=1===Ux(t.logicalShape);if(1!==o||f||m){if(f&&!m)h=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(i.length){const e=o-2,t=o-1;i.indexOf(e)>-1&&i.indexOf(t)>-1?h="return vec4(outputValue.x);":i.indexOf(e)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":i.indexOf(t)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}}else h="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${r}() {\n      ${l} coords = getOutputCoords();\n      ${c}\n      vec4 outputValue = get${a}(${d});\n      ${h}\n    }\n  `}(e,t):function(e,t){const n=e.name,a=n.charAt(0).toUpperCase()+n.slice(1),r="get"+a+"AtOutCoords",o=t.texShape,s=e.shapeInfo.texShape,i=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&i===l&&null==e.shapeInfo.flatOffset&&Gx(s,o))return`\n      float ${r}() {\n        return sampleTexture(${n}, resultUV);\n      }\n    `;const u=aY(l),c=GX(e.shapeInfo.logicalShape,t.logicalShape),p=l-i;let d;const h=["x","y","z","w","u","v"];d=0===i?"":l<2&&c.length>=1?"coords = 0;":c.map((e=>`coords.${h[e+p]} = 0;`)).join("\n");let f="";f=l<2&&i>0?"coords":e.shapeInfo.logicalShape.map(((e,t)=>`coords.${h[t+p]}`)).join(", ");return`\n    float ${r}() {\n      ${u} coords = getOutputCoords();\n      ${d}\n      return get${a}(${f});\n    }\n  `}(e,t));return r}(e,t,n.packedInputs,n.enableShapeUniforms))).join("\n"),s=t.texShape,i=zX(),l=function(e){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${e.texture2D}(textureSampler, uv).r;\n    }\n  `}(i);let u,c,p=function(e){return`${e.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${e.varyingFs} vec2 resultUV;\n    ${e.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${e.defineSpecialNaN}\n    ${e.defineSpecialInf}\n    ${e.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${KX}\n    ${JX}\n    ${ZX}\n  `}(i);t.isPacked?(u=function(e,t,n){switch(e.length){case 0:return eY();case 1:return function(e,t,n){const a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===a[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${a[1]}.0);\n      }\n    `;if(1===a[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${a[0]}.0);\n      }\n    `;if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${a[0]}, ${a[1]}));\n      return 2 * (resTexRC.x * ${a[1]} + resTexRC.y);\n    }\n  `}(0,t,n);case 2:return function(e,t,n){const a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(Gx(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${a[0]}, ${a[1]}));\n      }\n    `;const r=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${a[0]}, ${a[1]}));\n\n      int index = resTexRC.x * ${a[1]} + resTexRC.y;\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";const a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[2]/2),o=r*Math.ceil(e[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${a[0]}, ${a[1]}));\n      int index = resTexRC.x * ${a[1]} + resTexRC.y;\n\n      int b = index / ${o};\n      index -= b * ${o};\n\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";const a=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),o=r*Math.ceil(e[e.length-2]/2);let s=o,i="",l="b, r, c";for(let t=2;t<e.length-1;t++)s*=e[e.length-t-1],i=`\n      int b${t} = index / ${s};\n      index -= b${t} * ${s};\n    `+i,l=`b${t}, `+l;return`\n    ivec${e.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${a[0]}, ${a[1]}));\n      int index = resTexRC.x * ${a[1]} + resTexRC.y;\n\n      ${i}\n\n      int b = index / ${o};\n      index -= b * ${o};\n\n      int r = 2 * (index / ${r});\n      int c = imod(index, ${r}) * 2;\n\n      return ivec${e.length}(${l});\n    }\n  `}(e,t,n)}}(t.logicalShape,s,n.enableShapeUniforms),c=function(e){return`\n    void setOutput(vec4 val) {\n      ${e.output} = val;\n    }\n  `}(i)):(u=function(e,t,n){switch(e.length){case 0:return eY();case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.x * ${t[1]}.0);\n      }\n    `;if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.y * ${t[0]}.0);\n      }\n    `;if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      return resTexRC.x * ${t[1]} + resTexRC.y;\n    }\n  `}(0,t,n);case 2:return function(e,t,n){if(Gx(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));\n      }\n    `;if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `;if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `;if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      int r = index / ${e[1]};\n      int c = index - r * ${e[1]};\n      return ivec2(r, c);\n    }\n  `}(e,t,n);case 3:return function(e,t,n){if(n){return`\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ${WX(["r","c","d"],e)}\n    return ivec3(r, c, d);\n  }\n`}const a=VX(["r","c","d"],e);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${a}\n      return ivec3(r, c, d);\n    }\n  `}(e,t,n);case 4:return function(e,t,n){if(n){return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ${WX(["r","c","d","d2"],e)}\n      return ivec4(r, c, d, d2);\n    }\n  `}const a=VX(["r","c","d","d2"],e);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${a}\n      return ivec4(r, c, d, d2);\n    }\n  `}(e,t,n);case 5:return function(e,t){const n=VX(["r","c","d","d2","d3"],e);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},\n                             ${t[1]}));\n\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}(e,t);case 6:return function(e,t){const n=VX(["r","c","d","d2","d3","d4"],e);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}(e,t);default:throw new Error(`${e.length}-D output sampling is not yet supported`)}}(t.logicalShape,s,n.enableShapeUniforms),c=function(e){return`\n    void setOutput(float val) {\n      ${e.output} = vec4(val, 0, 0, 0);\n    }\n  `}(i)),n.packedInputs&&(p+=QX);return[p,l,c,r,u,o,n.userCode].join("\n")}function XX(e,t=!1){const n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){const n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`float ${a}() {return ${n};}`;const[r,o]=e.shapeInfo.texShape;if(1===r&&1===o)return`\n      float ${a}() {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;const s=tY(n);if(t)return`\n    float ${a}() {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${s});\n      return sampleTexture(${n}, uv);\n    }\n  `;const[i,l]=e.shapeInfo.texShape;return`\n    float ${a}() {\n      vec2 uv = uvFromFlat(${i}, ${l}, ${s});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e,t);case 1:return function(e,t){const n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`\n      float ${a}(int index) {\n        ${nY(e)}\n      }\n    `;const r=e.shapeInfo.texShape,o=r[0],s=r[1];if(1===s&&1===o)return`\n      float ${a}(int index) {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;const i=tY(n);if(1===s)return t?`\n      float ${a}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${i}) + 0.5) / float(${n}TexShape[0]));\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${a}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${i}) + 0.5) / ${o}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(1===o)return t?`\n      float ${a}(int index) {\n        vec2 uv = vec2((float(index + ${i}) + 0.5) / float(${n}TexShape[1]), 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${a}(int index) {\n        vec2 uv = vec2((float(index + ${i}) + 0.5) / ${s}.0, 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(t)return`\n    float ${a}(int index) {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${i});\n      return sampleTexture(${n}, uv);\n    }\n  `;return`\n    float ${a}(int index) {\n      vec2 uv = uvFromFlat(${o}, ${s}, index + ${i});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),o=e.shapeInfo.texShape;if(null!=o&&Gx(n,o)){if(t)return`\n      float ${r}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}TexShape[1], ${a}TexShape[0]);\n        return sampleTexture(${a}, uv);\n      }\n    `;const e=o[0];return`\n    float ${r}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${o[1]}.0, ${e}.0);\n      return sampleTexture(${a}, uv);\n    }\n  `}const{newShape:s,keptDims:i}=Qx(n),l=s;if(l.length<n.length){const n=["row","col"];return`\n      ${XX(oY(e,l),t)}\n      float ${r}(int row, int col) {\n        return ${r}(${sY(n,i)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));\n        ${nY(e)}\n      }\n    `;const u=o[0],c=o[1],p=tY(a);if(1===c)return t?`\n      float ${r}(int row, int col) {\n        float index = dot(vec3(row, col, ${p}), vec3(${a}Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(${a}TexShape[0]));\n        return sampleTexture(${a}, uv);\n      }\n    `:`\n    float ${r}(int row, int col) {\n      float index = dot(vec3(row, col, ${p}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);\n      return sampleTexture(${a}, uv);\n    }\n  `;if(1===u)return t?`\n      float ${r}(int row, int col) {\n        float index = dot(vec3(row, col, ${p}), vec3(${a}Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(${a}TexShape[1]), 0.5);\n        return sampleTexture(${a}, uv);\n      }\n    `:`\n    float ${r}(int row, int col) {\n      float index = dot(vec3(row, col, ${p}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);\n      return sampleTexture(${a}, uv);\n    }\n  `;if(t)return`\n      float ${r}(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${a}Shape[1] + col + ${p};\n        vec2 uv = uvFromFlat(${a}TexShape[0], ${a}TexShape[1], index);\n        return sampleTexture(${a}, uv);\n      }\n    `;return`\n  float ${r}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${n[1]} + col + ${p};\n    vec2 uv = uvFromFlat(${u}, ${c}, index);\n    return sampleTexture(${a}, uv);\n  }\n`}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),o=n[1]*n[2],s=n[2],{newShape:i,keptDims:l}=Qx(n),u=i;if(u.length<n.length){const n=["row","col","depth"];return`\n        ${XX(oY(e,u),t)}\n        float ${r}(int row, int col, int depth) {\n          return ${r}(${sY(n,l)});\n        }\n      `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${o}, ${s}, 1)));\n        ${nY(e)}\n      }\n    `;const c=e.shapeInfo.texShape,p=c[0],d=c[1],h=e.shapeInfo.flatOffset;if(d===o&&null==h)return t?`\n      float ${r}(int row, int col, int depth) {\n        int stride1 = ${a}Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${a}TexShape[1], ${a}TexShape[0]);\n        return sampleTexture(${a}, uv);\n      }\n    `:`\n        float ${r}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${s}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${d}.0, ${p}.0);\n          return sampleTexture(${a}, uv);\n        }\n      `;if(d===s&&null==h)return t?`\n      float ${r}(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(${a}Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${a}TexShape[1], ${a}TexShape[0]);\n        return sampleTexture(${a}, uv);\n      }\n    `:`\n    float ${r}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${p}.0);\n      return sampleTexture(${a}, uv);\n    }\n  `;const f=tY(a);if(t)return`\n    float ${r}(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ${a}Shape[1] * ${a}Shape[2];\n      int stride1 = ${a}Shape[2];\n      int index = row * ${o} + col * ${s} + depth + ${f};\n      vec2 uv = uvFromFlat(${a}TexShape[0], ${a}TexShape[1], index);\n      return sampleTexture(${a}, uv);\n    }\n    `;return`\n      float ${r}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${o} + col * ${s} + depth + ${f};\n        vec2 uv = uvFromFlat(${p}, ${d}, index);\n        return sampleTexture(${a}, uv);\n      }\n  `}(e,t);case 4:return function(e,t){const n=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),o=n[3],s=n[2]*o,i=n[1]*s,{newShape:l,keptDims:u}=Qx(n);if(l.length<n.length){const n=["row","col","depth","depth2"];return`\n      ${XX(oY(e,l),t)}\n      float ${r}(int row, int col, int depth, int depth2) {\n        return ${r}(${sY(n,u)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${i}, ${s}, ${o}, 1)));\n        ${nY(e)}\n      }\n    `;const c=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,d=p[0],h=p[1],f=`int stride2 = ${a}Shape[3];`,m=`int stride1 = ${a}Shape[2] * stride2;`,g=`int stride0 = ${a}Shape[1] * stride1;`;if(h===i&&null==c)return t?`\n      float ${r}(int row, int col, int depth, int depth2) {\n        ${f}\n        ${m}\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${a}TexShape[1], ${a}TexShape[0]);\n        return sampleTexture(${a}, uv);\n      }\n    `:`\n      float ${r}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${s}, ${o}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${h}.0, ${d}.0);\n        return sampleTexture(${a}, uv);\n      }\n    `;if(h===o&&null==c)return t?`\n      float ${r}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${a}Shape[1] * ${a}Shape[2], ${a}Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${a}TexShape[1], ${a}TexShape[0]);\n        return sampleTexture(${a}, uv);\n      }\n    `:`\n      float ${r}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${n[1]*n[2]}, ${n[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${h}.0, ${d}.0);\n        return sampleTexture(${a}, uv);\n      }\n    `;const v=tY(a);if(t)return`\n    float ${r}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ${f}\n      ${m}\n      ${g}\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(${a}TexShape[0], ${a}TexShape[1], index + ${v});\n      return sampleTexture(${a}, uv);\n    }\n  `;return`\n    float ${r}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${i} + col * ${s} +\n          depth * ${o} + depth2;\n      vec2 uv = uvFromFlat(${d}, ${h}, index + ${v});\n      return sampleTexture(${a}, uv);\n    }\n  `}(e,t);case 5:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),r=t[4],o=t[3]*r,s=t[2]*o,i=t[1]*s,{newShape:l,keptDims:u}=Qx(t);if(l.length<t.length){const t=["row","col","depth","depth2","depth3"];return`\n      ${XX(oY(e,l))}\n      float ${a}(int row, int col, int depth, int depth2, int depth3) {\n        return ${a}(${sY(t,u)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${a}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${i}, ${s}, ${o}, ${r})) +\n          depth3;\n        ${nY(e)}\n      }\n    `;const c=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,d=p[0],h=p[1];if(h===i&&null==c)return`\n      float ${a}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${s}, ${o}, ${r}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${h}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(h===r&&null==c)return`\n      float ${a}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]},\n               ${t[2]*t[3]}, ${t[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${h}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const f=tY(n);return`\n    float ${a}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${i} + col * ${s} + depth * ${o} +\n          depth2 * ${r} + depth3 + ${f};\n      vec2 uv = uvFromFlat(${d}, ${h}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);case 6:return function(e){const t=e.shapeInfo.logicalShape,n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:r,keptDims:o}=Qx(t);if(r.length<t.length){const t=["row","col","depth","depth2","depth3","depth4"];return`\n      ${XX(oY(e,r))}\n      float ${a}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${a}(${sY(t,o)});\n      }\n    `}const s=t[5],i=t[4]*s,l=t[3]*i,u=t[2]*l,c=t[1]*u;if(e.shapeInfo.isUniform)return`\n      float ${a}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${c}, ${u}, ${l}, ${i})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${s}, 1)));\n        ${nY(e)}\n      }\n    `;const p=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],f=d[1];if(f===c&&null==p)return`\n      float ${a}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${u}, ${l}, ${i}, ${s})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${h}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(f===s&&null==p)return`\n      float ${a}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]*t[4]},\n               ${t[2]*t[3]*t[4]},\n               ${t[3]*t[4]},\n               ${t[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${h}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;const m=tY(n);return`\n    float ${a}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${c} + col * ${u} + depth * ${l} +\n          depth2 * ${i} + depth3 * ${s} + depth4 + ${m};\n      vec2 uv = uvFromFlat(${h}, ${f}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function YX(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){const t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),a=zX();return`\n    vec4 ${n}() {\n      return ${a.texture2D}(${t}, halfCR);\n    }\n  `}(e);case 1:return function(e,t){const n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),r=e.shapeInfo.texShape,o=zX();if(t)return`\n    vec4 ${a}(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ${o.texture2D}(${n}, uv);\n    }\n  `;const s=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)];return`\n    vec4 ${a}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${s[0]}, ${s[1]}, index);\n      return ${o.texture2D}(${n}, uv);\n    }\n  `}(e,t);case 2:return function(e,t){const n=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),o=e.shapeInfo.texShape,s=o[0],i=o[1],l=zX();if(null!=o&&Gx(n,o))return t?`\n      vec4 ${r}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}TexShape[1], ${a}TexShape[0]);\n\n        return ${l.texture2D}(${a}, uv);\n      }\n    `:`\n      vec4 ${r}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${i}.0, ${s}.0);\n\n        return ${l.texture2D}(${a}, uv);\n      }\n    `;if(t)return`\n    vec4 ${r}(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${a}TexShape[0]) / 2.0), ceil(float(${a}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${a}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ${l.texture2D}(${a}, uv);\n    }\n  `;const u=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=Math.ceil(n[1]/2);return`\n    vec4 ${r}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);\n      return ${l.texture2D}(${a}, uv);\n    }\n  `}(e,t);case 3:return function(e,t){const n=e.shapeInfo.logicalShape,a=e.name,r="get"+a.charAt(0).toUpperCase()+a.slice(1),o=e.shapeInfo.texShape,s=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===n[0]){const a=[1,2],o=["b","row","col"];return`\n        ${YX(oY(e,n.slice(1)),t)}\n        vec4 ${r}(int b, int row, int col) {\n          return ${r}(${sY(o,a)});\n        }\n      `}const i=zX();if(t)return`\n    vec4 ${r}(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${a}TexShape[0]) / 2.0), ceil(float(${a}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${a}Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${a}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ${i.texture2D}(${a}, uv);\n    }\n  `;const l=s[0],u=s[1],c=Math.ceil(n[2]/2),p=c*Math.ceil(n[1]/2);return`\n    vec4 ${r}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${l}, ${u}, ${p}, ${c}, b, row, col);\n      return ${i.texture2D}(${a}, uv);\n    }\n  `}(e,t);default:return function(e,t){const n=e.name,a="get"+n.charAt(0).toUpperCase()+n.slice(1),r=zX();if(t)return`\n    vec4 ${a}(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ${n}Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${r.texture2D}(${n}, uv);\n    }\n  `;const o=e.shapeInfo.logicalShape,s=o.length,i=e.shapeInfo.texShape,l=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=l[0],c=l[1],p=Math.ceil(o[s-1]/2);let d=p*Math.ceil(o[s-2]/2),h="int b, int row, int col",f=`b * ${d} + (row / 2) * ${p} + (col / 2)`;for(let e=2;e<s-1;e++)h=`int b${e}, `+h,d*=o[s-e-1],f=`b${e} * ${d} + `+f;return`\n    vec4 ${a}(${h}) {\n      int index = ${f};\n      int texR = index / ${c};\n      int texC = index - texR * ${c};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});\n      return ${r.texture2D}(${n}, uv);\n    }\n  `}(e,t)}}const KX="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",JX="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",ZX="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",QX="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function eY(){return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "}function tY(e){return`offset${e}`}function nY(e){const t=e.name,n=Ux(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`\n    for (int i = 0; i < ${n}; i++) {\n      if (i == index) {\n        return ${t}[i];\n      }\n    }\n  `}function aY(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function rY(e,t,n){const{newShape:a,keptDims:r}=Qx(t),o=t.length,s=e&&3===o&&1===t[0],i=s?t.slice(1):a,l=!e&&o>1&&!Gx(t,n)&&a.length<o||s;return{useSqueezeShape:l,uniformShape:l?i:t,keptDims:r}}function oY(e,t){const n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function sY(e,t){return t.map((t=>e[t])).join(", ")}function iY(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach(((e,n)=>{const a=e.logicalShape,r=t[n],o=r.shape;if(!Gx(a,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${a} and ${o} must match`);if(e.isUniform&&r.isUniform)return;const s=e.texShape,i=r.isUniform?null:r.texData.texShape;if(!Gx(s,i))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${s} and ${i} must match`)}))}function lY(e){return Ck().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}class uY{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=iX.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=zX();this.outputShape=e,this.enableShapeUniforms=lY(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?WX(["r","c","d"],e):VX(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${t.output} = result;\n      }\n    `}}class cY{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=iX.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const t=zX();this.outputShape=e,this.enableShapeUniforms=lY(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?WX(["r","c","d"],e):VX(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${t.output} = result;\n      }\n    `}}class pY{constructor(e){this.variableNames=["A"],this.outTexUsage=lX.DOWNLOAD;const t=zX();this.outputShape=e,this.userCode=`\n      ${UX}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${t.output} = encode_float(x);\n      }\n    `}}class dY{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=lX.DOWNLOAD;const t=zX();this.outputShape=e,this.userCode=`\n      ${UX}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${t.output} = encode_float(x);\n      }\n    `}}class hY{constructor(e,t=!1){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=zX();this.outputShape=e,this.enableShapeUniforms=lY(this.outputShape.length);let a="result";t&&(a="floor(result * 255. + 0.5)"),this.userCode=`\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":jX(e)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / texShape[1];\n        int c = imod(flatIndex, texShape[1]);\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n        vec4 values = ${n.texture2D}(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ${n.output} = vec4(${a}, 0., 0., 0.);\n      }\n    `}}class fY{constructor(e,t=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=zX();this.outputShape=e,this.enableShapeUniforms=lY(this.outputShape.length);let a="",r="result";t&&(r="floor(result * 255. + 0.5)");for(let t=0;t<=1;t++)for(let r=0;r<=1;r++){const o=2*t+r;a+=`\n          localCoords = coords;\n          if(localCoords[2] + ${r} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {\n          localCoords[2] += ${r};\n          if (localCoords[1] + ${t} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {\n            localCoords[1] += ${t};\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ${n.texture2D}(A, uv);\n\n            if (offset == 0) {\n              result[${o}] = values[0];\n            } else if (offset == 1) {\n              result[${o}] = values[1];\n            } else if (offset == 2) {\n              result[${o}] = values[2];\n            } else {\n              result[${o}] = values[3];\n            }\n          }\n        }\n        `}this.userCode=`\n        ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":jX(e)}\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ${a}\n\n          ${n.output} = ${r};\n        }\n    `}}function mY(e){const t=zX();return function(e,t){const n=SX(e,(()=>e.createShader(e.VERTEX_SHADER)),"Unable to create vertex WebGLShader.");if(fX(e,(()=>e.shaderSource(n,t))),fX(e,(()=>e.compileShader(n))),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,`${t.version}\n    precision highp float;\n    ${t.attribute} vec3 clipSpacePos;\n    ${t.attribute} vec2 uv;\n    ${t.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`)}function gY(e){return function(e,t){const n=SX(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return fX(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),fX(e,(()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function vY(e){return function(e,t){const n=SX(e,(()=>e.createBuffer()),"Unable to create WebGLBuffer");return fX(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n))),fX(e,(()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW))),n}(e,new Uint16Array([0,1,2,2,1,3]))}function bY(e,t,n,a,r,o){!function(e,t){const n=Ck().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0)throw new Error(`Requested texture size [${e}x${t}] is invalid.`);if(e>n||t>n)throw new Error(`Requested texture size [${e}x${t}] greater than WebGL maximum on this browser / GPU [${n}x${n}].`)}(t,n);const s=function(e){return SX(e,(()=>e.createTexture()),"Unable to create WebGLTexture.")}(e),i=e.TEXTURE_2D;return fX(e,(()=>e.bindTexture(i,s))),fX(e,(()=>e.texParameteri(i,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE))),fX(e,(()=>e.texParameteri(i,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE))),fX(e,(()=>e.texParameteri(i,e.TEXTURE_MIN_FILTER,e.NEAREST))),fX(e,(()=>e.texParameteri(i,e.TEXTURE_MAG_FILTER,e.NEAREST))),1===Ck().getNumber("WEBGL_VERSION")?fX(e,(()=>e.texImage2D(i,0,a,t,n,0,r,o,null))):fX(e,(()=>e.texStorage2D(i,1,a,t,n))),fX(e,(()=>e.bindTexture(e.TEXTURE_2D,null))),s}function yY(e){return e.internalFormatFloat}function wY(e){return e.internalFormatHalfFloat}function xY(e){return e.downloadTextureFormat}function kY(e){return e.internalFormatPackedFloat}function CY(e){return e.internalFormatPackedHalfFloat}function EY(e,t,n,a,r,o,s,i){const l=e,u=new Float32Array(function(e,t){const[n,a]=dX(e,t);return n*a*4}(o,s));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}class SY{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const t=Ck().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,function(e,t){rX[e]=t}(t,e)):this.gl=sX(t);let n="WEBGL_color_buffer_float";const a="EXT_color_buffer_half_float";if(1===Ck().getNumber("WEBGL_VERSION")){const e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=gX(this.gl,e),BX(this.gl,t))this.textureHalfFloatExtension=gX(this.gl,t);else if(Ck().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),BX(this.gl,a))this.colorBufferHalfFloatExtension=gX(this.gl,a);else if(Ck().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",BX(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!BX(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=gY(this.gl),this.indexBuffer=vY(this.gl),this.framebuffer=function(e){return SX(e,(()=>e.createFramebuffer()),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=hX(this.gl,this.textureHalfFloatExtension)}get debug(){return Ck().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;fX(e,(()=>e.finish())),fX(e,(()=>e.bindFramebuffer(e.FRAMEBUFFER,null))),fX(e,(()=>e.deleteFramebuffer(this.framebuffer))),fX(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,null))),fX(e,(()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null))),fX(e,(()=>e.deleteBuffer(this.indexBuffer))),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,a){const[r,o]=cX(t,n);return bY(e,r,o,yY(a),a.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,a){const[r,o]=cX(t,n);return bY(e,r,o,wY(a),a.textureFormatFloat,a.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,a){const[r,o]=cX(t,n);return bY(e,r,o,xY(a),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),function(e,t,n){fX(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),n.data instanceof Uint8Array?2===Ck().getNumber("WEBGL_VERSION")?(fX(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data))),e.flush()):fX(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data))):2===Ck().getNumber("WEBGL_VERSION")?(fX(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n))),e.flush()):fX(e,(()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n))),fX(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,a){this.throwIfDisposed(),function(e,t,n,a,r,o){let s,i,l;fX(e,(()=>e.bindTexture(e.TEXTURE_2D,t))),r instanceof Uint8Array?(s=new Uint8Array(n*a*4),i=e.UNSIGNED_BYTE,l=e.RGBA):(s=new Float32Array(n*a*4),i=e.FLOAT,l=o.internalFormatPackedFloat),s.set(r),2===Ck().getNumber("WEBGL_VERSION")?fX(e,(()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,a,e.RGBA,i,s))):fX(e,(()=>e.texImage2D(e.TEXTURE_2D,0,l,n,a,0,e.RGBA,i,s))),fX(e,(()=>e.bindTexture(e.TEXTURE_2D,null)))}(this.gl,e,t,n,a,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,a){const[r,o]=dX(t,n);return bY(e,r,o,CY(a),e.RGBA,a.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),function(e,t,n,a){const[r,o]=dX(t,n);return bY(e,r,o,kY(a),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(CX(this.gl,this.framebuffer),this.outputTexture=null),fX(this.gl,(()=>this.gl.deleteTexture(e)))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n,a){const[r,o]=cX(t,n),s=new Uint8Array(t*n*4);return fX(e,(()=>e.readPixels(0,0,r,o,a.downloadTextureFormat,e.UNSIGNED_BYTE,s))),new Float32Array(s.buffer)}(this.gl,t,n,this.textureConfig)))}downloadPackedMatrixFromBuffer(e,t,n,a,r,o){return EY(this.gl,e,0,0,0,r,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return function(e,t,n){const a=e,r=new Float32Array(n);return a.bindBuffer(a.PIXEL_PACK_BUFFER,t),a.getBufferSubData(a.PIXEL_PACK_BUFFER,0,r),a.bindBuffer(a.PIXEL_PACK_BUFFER,null),r}(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);const a=function(e,t,n,a){const r=e.createBuffer();fX(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,r)));const o=16*t*n;return fX(e,(()=>e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ))),fX(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0))),fX(e,(()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null))),r}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),a}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(Ck().getBool("WEBGL_FENCE_API_ENABLED")){const a=e,r=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{const e=a.clientWaitSync(r,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=r}else Ck().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,Ck().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,(()=>function(e,t,n){const a=new Float32Array(t*n*4);return fX(e,(()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,a))),a}(this.gl,t,n)))}createProgram(e){this.throwIfDisposed();const t=this.gl;null==this.vertexShader&&(this.vertexShader=mY(t));const n=function(e){return SX(e,(()=>e.createProgram()),"Unable to create WebGLProgram.")}(t);return fX(t,(()=>t.attachShader(n,this.vertexShader))),fX(t,(()=>t.attachShader(n,e))),function(e,t){if(fX(e,(()=>e.linkProgram(t))),!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,n),this.debug&&yX(t,n),this.vertexAttrsAreBound||(this.setProgram(n),this.vertexAttrsAreBound=function(e,t,n){return fX(e,(()=>e.bindBuffer(e.ARRAY_BUFFER,n))),wX(e,t,"clipSpacePos",n,3,20,0)&&wX(e,t,"uv",n,2,20,12)}(t,this.program,this.vertexBuffer)),n}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&fX(this.gl,(()=>this.gl.deleteProgram(e)))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&yX(this.gl,this.program),fX(this.gl,(()=>this.gl.useProgram(e)))}getUniformLocation(e,t,n=!0){return this.throwIfDisposed(),n?function(e,t,n){return SX(e,(()=>e.getUniformLocation(t,n)),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),fX(this.gl,(()=>this.gl.getAttribLocation(e,t)))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),xX(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();const[a,r]=dX(t,n);this.setOutputMatrixTextureDriver(e,a,r)}setOutputMatrixWriteRegion(e,t,n,a){this.setOutputMatrixWriteRegionDriver(n,e,a,t)}setOutputPackedMatrixWriteRegion(e,t,n,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&yX(this.gl,this.program),EX(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;this.debug&&this.debugValidate(),fX(e,(()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),fX(this.gl,(()=>this.gl.finish()))}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=gX(this.gl,2===Ck().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===Ck().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}const e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===Ck().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){const e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await Kx((()=>this.disposed||this.isQueryAvailable(e,Ck().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")))),this.getQueryTime(e,Ck().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){const t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{const t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){const t=this.gl,n=this.getQueryTimerExtensionWebGL2(),a=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),a&&!this.disjoint}{const t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise((t=>{this.addItemToPoll((()=>e.isFencePassed()),(()=>t()))}))}pollItems(){const e=function(e){let t=0;for(;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((e=>e.isDoneFn)));for(let t=0;t<=e;++t){const{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||Kx((()=>(this.pollItems(),0===this.itemsToPoll.length)))}bindTextureToFrameBuffer(e){this.throwIfDisposed(),kX(this.gl,e,this.framebuffer),this.debug&&EX(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(kX(this.gl,this.outputTexture,this.framebuffer),this.debug&&EX(this.gl)):CX(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);const n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();const a=this.gl;kX(a,e,this.framebuffer),this.debug&&EX(a),this.outputTexture=e,fX(a,(()=>a.viewport(0,0,t,n))),fX(a,(()=>a.scissor(0,0,t,n)))}setOutputMatrixWriteRegionDriver(e,t,n,a){this.throwIfDisposed(),fX(this.gl,(()=>this.gl.scissor(e,t,n,a)))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}}const{addImpl:$Y,bincountImpl:TY,bincountReduceImpl:IY,ceilImpl:NY,concatImpl:OY,equalImpl:RY,expImpl:AY,expm1Impl:MY,floorImpl:BY,gatherNdImpl:PY,gatherV2Impl:DY,greaterImpl:FY,greaterEqualImpl:_Y,lessImpl:LY,lessEqualImpl:zY,linSpaceImpl:VY,logImpl:WY,maxImpl:HY,maximumImpl:jY,minimumImpl:UY,multiplyImpl:GY,negImpl:qY,notEqualImpl:XY,prodImpl:YY,rangeImpl:KY,rsqrtImpl:JY,sigmoidImpl:ZY,simpleAbsImpl:QY,sliceImpl:eK,sparseFillEmptyRowsImpl:tK,sparseReshapeImpl:nK,sparseSegmentReductionImpl:aK,sqrtImpl:rK,stridedSliceImpl:oK,stringNGramsImpl:sK,stringSplitImpl:iK,stringToHashBucketFastImpl:lK,subImpl:uK,tileImpl:cK,topKImpl:pK,transposeImpl:dK,uniqueImpl:hK}=s;function fK(e,t){return["x","y","z","w","u","v"].slice(0,t).map((t=>`${e}.${t}`))}function mK(e,t){return 1===t?[e]:fK(e,t)}class gK{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=lY(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{const e=mK("rc",this.rank),t=aY(this.rank),n=this.getOutOfBoundsCondition(e),a=this.getSetup(e),r=this.getOutput(e);this.userCode=`\n        void main() {\n          ${t} rc = getOutputCoords();\n\n          if(${n}) {\n            setOutput(vec4(0));\n          } else {\n            ${a}\n\n            setOutput(vec4(${r}));\n          }\n        }\n      `}}getSourceCoordsArr(e){const t=[];for(let n=0;n<=1;n++)for(let a=0;a<=1;a++){let r=`${0===n?"r":"rp1"}, ${0===a?"c":"cp1"}`;for(let t=2;t<this.rank;t++)r=`${e[e.length-1-t]},`+r;t.push(r)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let t="";for(let n=this.rank-2;n<this.rank;n++)t+=`${e[n]} >= ${this.enableShapeUniforms?`outShape[${n}]`:this.outputShape[n]}`,n<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";const t=e.slice(-2),n=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],a=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`\n      int r = ${t[0]};\n      int c = ${t[1]};\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ${n};\n      bool rEdge = rp1 >= ${a};\n    `}getOutput(e){const t=this.getSourceCoordsArr(e);return 1===this.rank?`getA(rc),\n              rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1),\n              0, 0`:`getA(${t[0]}),\n            cEdge ? 0. : getA(${t[1]}),\n            rEdge ? 0. : getA(${t[2]}),\n            rEdge || cEdge ? 0. : getA(${t[3]})`}}class vK{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=lY(this.outputShape.length);let n="";for(let e=0;e<4;e++){let t="thisRC = rc;";e%2==1&&(t+="thisRC.z += 1;"),e>1&&(t+="thisRC.y += 1;"),n+=`\n        ${t}\n        ${e>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${e}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${e>0?"}":""}\n      `}var a,r;this.userCode=`\n      ${a=t,r=this.enableShapeUniforms,`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${r?HX(["r","c","d"],"inputShape"):VX(["r","c","d"],a)}\n      return ivec3(r, c, d);\n    }\n  `}\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":jX(e)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};\n        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};\n\n        ${n}\n\n        setOutput(result);\n      }\n    `}}class bK{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(e,t,n){const a=wK(t,n),r=xK(e,a,n);r in this.freeTextures||(this.freeTextures[r]=[]),r in this.usedTextures||(this.usedTextures[r]=[]);const o=yK(e,a,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[r].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const e=this.freeTextures[r].shift();return this.usedTextures[r].push(e),e}let s;return a===uX.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):a===uX.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):a===uX.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):a===uX.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):a===uX.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[r].push(s),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),s}releaseTexture(e,t,n,a){if(null==this.freeTextures)return;const r=wK(n,a),o=xK(t,r,a);o in this.freeTextures||(this.freeTextures[o]=[]);const s=yK(t,r,this.gpgpu.gl,this.gpgpu.textureConfig,a),i=Ck().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==i&&this._numBytesAllocated>i?(this.gpgpu.deleteMatrixTexture(e),this._numBytesAllocated-=s):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=s),this.numUsedTextures--;const l=this.usedTextures[o],u=l.indexOf(e);if(u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l.splice(u,1),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const t=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(const e in this.freeTextures)this.freeTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e)}));for(const e in this.usedTextures)this.usedTextures[e].forEach((e=>{this.gpgpu.deleteMatrixTexture(e)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function yK(e,t,n,a,r){const o=function(e,t){switch(e){case uX.PACKED_2X2_FLOAT32:return kY(t);case uX.PACKED_2X2_FLOAT16:return CY(t);case uX.UNPACKED_FLOAT32:return yY(t);case uX.UNPACKED_FLOAT16:return wY(t);case uX.PACKED_4X1_UNSIGNED_BYTE:return xY(t);default:throw new Error(`Unknown physical texture type ${e}`)}}(t,a);let s;if(r){const[t,n]=dX(e[0],e[1]);s=t*n}else{const[t,n]=cX(e[0],e[1]);s=t*n}const i=function(e,t){const n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error(`Unknown internal format ${t}`)}(n,o);return s*i}function wK(e,t){if(e===lX.UPLOAD)return uX.PACKED_2X2_FLOAT32;if(e===lX.RENDER||null==e)return function(e){return Ck().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?uX.PACKED_2X2_FLOAT32:uX.UNPACKED_FLOAT32:e?uX.PACKED_2X2_FLOAT16:uX.UNPACKED_FLOAT16}(t);if(e===lX.DOWNLOAD||e===lX.PIXELS)return uX.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${e}`)}function xK(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}class kK{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=lY(this.outputShape.length),this.userCode=`\n      float unaryOperation(float x) {\n        ${t}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}const CK="return abs(x);";const EK="return x;";class SK{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=lY(this.outputShape.length),this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${t}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}}class $K{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=lY(this.outputShape.length);const t=e.length,n=mK("rc",t),a=aY(t),r=function(e,t){if(1===e)return"rc";let n="";for(let a=0;a<e;a++)n+=t[a],a<e-1&&(n+=",");return n}(t,n),o=n.slice(-2),s=t<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`\n      void main() {\n        ${a} rc = getOutputCoords();\n        vec4 packedInput = getA(${r});\n\n        setOutput(getChannel(packedInput, ${s}));\n      }\n    `}}const TK=rM,IK={};const NK=Ck().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");class OK extends Px{constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!Ck().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==e){const e=sX(Ck().getNumber("WEBGL_VERSION"));this.binaryCache=((t=Ck().getNumber("WEBGL_VERSION"))in IK||(IK[t]={}),IK[t]),this.gpgpu=new SY(e),this.canvas=e.canvas,this.gpgpuCreatedLocally=!0}else this.gpgpu=e,this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=e.gl.canvas;var t;this.textureManager=new bK(this.gpgpu),this.numMBBeforeWarning=null==Ck().global.screen?1024:Ck().global.screen.height*Ck().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new Bx(this,yI())}nextDataId(){return OK.nextDataId++}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}write(e,t,n){if((Ck().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Ck().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const a={id:this.nextDataId()};return this.texData.set(a,{shape:t,dtype:n,values:e,usage:lX.UPLOAD,refCount:1}),a}refCount(e){if(this.texData.has(e)){return this.texData.get(e).refCount}return 0}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}move(e,t,n,a,r){if(Ck().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===a)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:a,values:t,usage:lX.UPLOAD,refCount:r})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const t=this.texData.get(e),{values:n,dtype:a,complexTensorInfos:r,slice:o,shape:s,isPacked:i}=t;if(null!=o){let t;t=i?new SK(s,EK):new kK(s,EK);const n=this.runWebGLProgram(t,[{dataId:e,shape:s,dtype:a}],a),r=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),r}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===a)return n;const l=null!=this.activeTimers;let u,c;if(l&&(u=n$()),"complex64"===a){c=EA(this.readSync(r.real.dataId),this.readSync(r.imag.dataId))}else c=this.getValuesFromTexture(e);return l&&(this.downloadWaitMs+=n$()-u),this.convertAndCacheOnCPU(e,c)}async read(e){if(this.pendingRead.has(e)){const t=this.pendingRead.get(e);return new Promise((e=>t.push(e)))}const t=this.texData.get(e),{values:n,shape:a,slice:r,dtype:o,complexTensorInfos:s,isPacked:i}=t;if(null!=r){let t;t=i?new SK(a,EK):new kK(a,EK);const n=this.runWebGLProgram(t,[{dataId:e,shape:a,dtype:o}],o),r=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),r}if(null!=n)return this.convertAndCacheOnCPU(e);if(Ck().getBool("DEBUG")&&!Ck().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Ck().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l,u,c=null;if("complex64"!==o&&Ck().get("WEBGL_BUFFER_SUPPORTED")){l=this.decode(e);const t=this.texData.get(l.dataId);c=this.gpgpu.createBufferFromTexture(t.texture,...pX(a))}if(this.pendingRead.set(e,[]),"complex64"!==o&&await this.gpgpu.createAndWaitForFence(),"complex64"===o){const e=await Promise.all([this.read(s.real.dataId),this.read(s.imag.dataId)]);u=EA(e[0],e[1])}else if(null==c)u=this.getValuesFromTexture(e);else{const e=Ux(a);u=this.gpgpu.downloadFloat32MatrixFromBuffer(c,e)}if(null!=l&&this.disposeIntermediateTensorInfo(l),null!=c){const e=this.gpgpu.gl;fX(e,(()=>e.deleteBuffer(c)))}const p=this.convertAndCacheOnCPU(e,u),d=this.pendingRead.get(e);return this.pendingRead.delete(e),d.forEach((e=>e(p))),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&yI().removeDataId(e,this),this.pendingDeletes--),p}bufferSync(e){const t=this.readSync(e.dataId);let n=t;if("string"===e.dtype)try{n=t.map((e=>r$(e)))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return DT(e.shape,e.dtype,n)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){const n=e[t];if(!mX(n)){if(Ck().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error(`The value ${n} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`);throw Error(`The value ${n} cannot be represented on this device.`)}}}getValuesFromTexture(e){const{shape:t,dtype:n,isPacked:a}=this.texData.get(e),r=Ux(t);if(Ck().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const n=this.decode(e),a=this.texData.get(n.dataId),o=this.gpgpu.downloadMatrixFromPackedTexture(a.texture,...pX(t)).subarray(0,r);return this.disposeIntermediateTensorInfo(n),o}const o=Ck().getBool("WEBGL_PACK")&&!0===a,s=o?NX(t):t,i=o?new dY(s):new pY(s),l=this.runWebGLProgram(i,[{shape:s,dtype:n,dataId:e}],"float32"),u=this.texData.get(l.dataId),c=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture,u.texShape[0],u.texShape[1]).subarray(0,r);return this.disposeIntermediateTensorInfo(l),c}timerAvailable(){return Ck().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}async time(e){const t=this.activeTimers,n=[];let a=!1;null==this.programTimersStack?(this.programTimersStack=n,a=!0):this.activeTimers.push(n),this.activeTimers=n,e();const r=jx(this.activeTimers.map((e=>e.query))).filter((e=>null!=e)),o=jx(this.activeTimers.map((e=>e.name))).filter((e=>null!=e));this.activeTimers=t,a&&(this.programTimersStack=null);const s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};if(Ck().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const e=await Promise.all(r);s.kernelMs=function(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}(e),s.getExtraProfileInfo=()=>e.map(((e,t)=>({name:o[t],ms:e}))).map((e=>`${e.name}: ${e.ms}`)).join(", ")}else s.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,s}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return Ck().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:n$(),endMs:null}}endTimer(e){return Ck().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=n$(),e)}async getQueryTime(e){if(Ck().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const t=e;return t.endMs-t.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:t,dtype:n,texShape:a,usage:r,isPacked:o,slice:s}=this.texData.get(e),i=s&&s.origDataId||e,l=this.dataRefCount.get(i);l>1?this.dataRefCount.set(i,l-1):(this.dataRefCount.delete(i),null!=t&&(this.numBytesInGPU-=this.computeBytes(a,n),this.textureManager.releaseTexture(t,a,r,o)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,t=NK){return Ck().getBool("WEBGL_CPU_FORWARD")&&e.every((e=>null==this.texData.get(e.dataId).texture&&Ux(e.shape)<t))}getGPGPUContext(){return this.gpgpu}where(e){OS("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const t=e.dataSync();return TK(e.shape,t)}packedUnaryOp(e,t,n){const a=new SK(e.shape,t),r=this.compileAndRun(a,[e],n);return yI().makeTensorFromDataId(r.dataId,r.shape,r.dtype)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){const t=QY(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(Ck().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,CK,e.dtype);const t=new kK(e.shape,CK),n=this.compileAndRun(t,[e]);return yI().makeTensorFromDataId(n.dataId,n.shape,n.dtype)}makeTensorInfo(e,t,n){let a;if("string"===t&&null!=n&&n.length>0&&ok(n[0])){const r=n.map((e=>a$(e)));a=this.write(r,e,t)}else a=this.write(n,e,t);return this.texData.get(a).usage=null,{dataId:a,shape:e,dtype:t}}makeOutput(e,t,n){const{dataId:a}=this.makeTensorInfo(e,t,n);return yI().makeTensorFromDataId(a,e,t,this)}unpackTensor(e){const t=new $K(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){const t=new gK(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){const n=[TX(e.shape),...IX(e.shape)],a={dtype:e.dtype,shape:n,dataId:e.dataId},r=[TX(t),...IX(t)],o=new vK(r,n),s=[n],i=this.runWebGLProgram(o,[a],e.dtype,s,!0);return{dataId:i.dataId,shape:t,dtype:i.dtype}}decode(e){const t=this.texData.get(e),{isPacked:n,shape:a,dtype:r}=t,o=NX(a);let s;const i=pX(o);s=n?new cY(o):new uY(o);const l=[i];return{dtype:r,shape:a,dataId:this.runWebGLProgram(s,[{shape:o,dtype:r,dataId:e}],r,l,!0).dataId}}runWebGLProgram(e,t,n,a,r=!1){const o=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(o.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===iX.DENSE){const t=pX(e.outputShape);s.texShape=t.map((e=>2*e))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===Ux(o.shape))return s.values=ek(o.dtype,0),o;const i=[],l=t.map((t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&Ux(t.shape)<=Ck().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(this.uploadToGPU(t.dataId),!!n.isPacked!=!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),i.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!RX(n.shape,t.shape)){const e=t,a=t.shape;t.shape=n.shape,t=this.packedReshape(t,a),i.push(t),n=this.texData.get(t.dataId),e.shape=a}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(o.dataId);const u={shape:o.shape,texData:s,isUniform:!1},c=function(e,t,n){let a="";t.concat(n).forEach((t=>{const r=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){const o=t.texData.texShape,{useSqueezeShape:s,uniformShape:i,keptDims:l}=rY(e.packedInputs,t.shape,o);let u="",c="",p="";if(1===i.length&&e.packedInputs){const e=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];u=`${e[0]>1}_${e[1]>1}`}else if(2!==i.length||e.packedInputs){if(i.length>2&&!e.packedInputs){const e=ck(i);p=`${e[0]===o[1]}_${e[e.length-1]===o[1]}`}}else c=`${i[0]>1}_${i[1]>1}`;const d=t.shape.length,h=2===i.length&&Gx(t.shape,o),f=1===Ux(t.shape),m=qT(t.shape,n.shape),g=!e.packedInputs&&d===n.shape.length&&Gx(o,n.texData.texShape),v=e.packedInputs||i.length>2?"":`${o[0]>1}_${o[1]>1}`;a+=`${d}_${g}_${s?l:""}_${i.length}_${f}_${m}_${h}_${u}_${c}_${p}_${v}_${r}`}else{const e=t.isUniform?"uniform":t.texData.texShape;a+=`${t.shape}_${e}_${r}`}}));const r=e.userCode;let o=e.constructor.name;return o+="_"+a+"_"+r+`${Ck().getNumber("WEBGL_VERSION")}`,o}(e,l,u),p=this.getAndSaveBinary(c,(()=>function(e,t,n,a){const r=n.map(((e,n)=>{const a={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(a.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:a}})),o=r.map((e=>e.shapeInfo)),s={logicalShape:a.shape,texShape:a.texData.texShape,isUniform:!1,isPacked:a.texData.isPacked,flatOffset:null},i=qX(r,s,t),l=vX(e.gl,i),u=e.createProgram(l);let c=null;const p=e.getUniformLocation(u,"NAN",!1);1===Ck().getNumber("WEBGL_VERSION")&&(c=e.getUniformLocation(u,"INFINITY",!1));const d=!1,h={},f={},m={};for(let n=0;n<t.variableNames.length;n++){const a=t.variableNames[n];h[a]=e.getUniformLocation(u,a,d),h[`offset${a}`]=e.getUniformLocation(u,`offset${a}`,d),t.enableShapeUniforms&&(f[`${a}Shape`]=e.getUniformLocation(u,`${a}Shape`,d),m[`${a}TexShape`]=e.getUniformLocation(u,`${a}TexShape`,d))}let g,v,b;t.enableShapeUniforms&&(g=e.getUniformLocation(u,"outShape",d),b=e.getUniformLocation(u,"outShapeStrides",d),v=e.getUniformLocation(u,"outTexShape",d));const y=[];return t.customUniforms&&t.customUniforms.forEach(((t,n)=>{y[n]=e.getUniformLocation(u,t.name,d)})),{program:t,fragmentShader:l,source:i,webGLProgram:u,uniformLocations:h,customUniformLocations:y,inShapeInfos:o,outShapeInfo:s,infLoc:c,nanLoc:p,inShapesLocations:f,inTexShapesLocations:m,outShapeLocation:g,outShapeStridesLocation:b,outTexShapeLocation:v}}(this.gpgpu,e,l,u))),d=null!=this.activeTimers;let h;d&&(h=this.startTimer()),function(e,t,n,a,r){t.program.enableShapeUniforms||(iY(t.inShapeInfos,n),iY([t.outShapeInfo],[a]));const o=a.texData.texture,s=a.texData.texShape;a.texData.isPacked?e.setOutputPackedMatrixTexture(o,s[0],s[1]):e.setOutputMatrixTexture(o,s[0],s[1]),e.setProgram(t.webGLProgram),1===Ck().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach(((n,a)=>{const r=t.program.variableNames[a],o=t.uniformLocations[r],s=t.uniformLocations[`offset${r}`],i=t.inShapesLocations[`${r}Shape`],l=t.inTexShapesLocations[`${r}TexShape`];if(i){const{uniformShape:a}=rY(t.program.packedInputs,n.shape,n.texData.texShape);switch(a.length){case 1:e.gl.uniform1iv(i,new Int32Array(a));break;case 2:e.gl.uniform2iv(i,new Int32Array(a));break;case 3:e.gl.uniform3iv(i,new Int32Array(a));break;case 4:e.gl.uniform4iv(i,new Int32Array(a))}}if(l&&e.gl.uniform2i(l,n.texData.texShape[0],n.texData.texShape[1]),null!=o)if(n.isUniform)if(Ux(n.shape)<2)e.gl.uniform1f(o,n.uniformValues[0]);else{let t=n.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(o,t)}else null!=n.texData.slice&&null!=s&&e.gl.uniform1i(s,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,o,a)}));const i=t.outShapeLocation;if(i)switch(a.shape.length){case 1:e.gl.uniform1iv(i,new Int32Array(a.shape));break;case 2:e.gl.uniform2iv(i,new Int32Array(a.shape));break;case 3:e.gl.uniform3iv(i,new Int32Array(a.shape));break;case 4:e.gl.uniform4iv(i,new Int32Array(a.shape))}if(t.outShapeStridesLocation){const n=ck(a.shape);switch(a.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,a.texData.texShape[0],a.texData.texShape[1]),t.program.customUniforms&&r&&t.program.customUniforms.forEach(((n,a)=>{const o=t.customUniformLocations[a],s=r[a];if("float"===n.type)e.gl.uniform1fv(o,s);else if("vec2"===n.type)e.gl.uniform2fv(o,s);else if("vec3"===n.type)e.gl.uniform3fv(o,s);else if("vec4"===n.type)e.gl.uniform4fv(o,s);else if("int"===n.type)e.gl.uniform1iv(o,s);else if("ivec2"===n.type)e.gl.uniform2iv(o,s);else if("ivec3"===n.type)e.gl.uniform3iv(o,s);else{if("ivec4"!==n.type)throw Error(`uniform type ${n.type} is not supported yet.`);e.gl.uniform4iv(o,s)}})),e.executeProgram()}(this.gpgpu,p,l,u,a),i.forEach((e=>this.disposeIntermediateTensorInfo(e))),d&&(h=this.endTimer(h),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(h)}));const f=Ck().get("WEBGL_FLUSH_THRESHOLD");if(f>0){const e=n$();e-this.lastGlFlushTime>f&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!Ck().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===r){const e=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),e}return o}compileAndRun(e,t,n,a,r=!1){n=n||t[0].dtype;return this.runWebGLProgram(e,t,n,a,r)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){if(!this.disposed){if(!Ck().getBool("IS_TEST")){Object.keys(this.binaryCache).forEach((e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}))}this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=xI((()=>{if(!Ck().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=Ck().getBool("DEBUG");Ck().set("DEBUG",!1);const t=this.abs($I(1e-8)).dataSync()[0];if(Ck().set("DEBUG",e),t>0)return 32}return 16}))),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){const t=this.texData.get(e),{shape:n,dtype:a,values:r,texture:o,usage:s,isPacked:i}=t;if(null!=o)return;const l=null!=this.activeTimers;let u;l&&(u=n$());let c=t.texShape;if(null==c&&(c=function(e,t=!1){let n=Ck().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,e=e.map(((t,n)=>n>=e.length-2?Lx(e[n]):e[n])),1===e.length&&(e=[2,e[0]])),2!==e.length){const t=Qx(e);e=t.newShape}let a=Ux(e);if(e.length<=1&&a<=n)return[1,a];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){const t=TX(e);let n=2,r=2;return e.length&&([n,r]=IX(e)),a=t*(n/2)*(r/2),Xx(a).map((e=>2*e))}return Xx(a)}(n,i),t.texShape=c),null!=r){const e=NX(n);let o,s=c[1],p=c[0];const d=r instanceof Uint8Array||r instanceof Uint8ClampedArray;!i&&d||([s,p]=dX(c[0],c[1])),o=i?new fY(e,d):new hY(e,d);const h=d?[p,s]:c,f=this.makeTensorInfo(h,a),m=this.texData.get(f.dataId);m.usage=d?lX.PIXELS:lX.UPLOAD,m.texShape=h,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(f.dataId),s,p,r);const g=[[p,s]],v=!0,b=this.runWebGLProgram(o,[f],a,g,v),y=this.texData.get(b.dataId);t.texture=y.texture,t.texShape=y.texShape,t.isPacked=y.isPacked,t.usage=y.usage,this.disposeIntermediateTensorInfo(f),this.texData.delete(b.dataId),t.values=null,l&&(this.uploadWaitMs+=n$()-u)}else{const e=this.acquireTexture(c,s,a,i);t.texture=e}}convertAndCacheOnCPU(e,t){const n=this.texData.get(e),{dtype:a}=n;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){const n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error(`Unknown dtype ${t}`)}(t,a)),n.values}acquireTexture(e,t,n,a){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){const e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${e} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,a)}computeBytes(e,t){return e[0]*e[1]*rk(t)}}OK.nextDataId=0;z$()&&EI("webgl",(()=>new OK),2);class RK{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=YT(t,n),this.enableShapeUniforms=lY(this.outputShape.length),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${e}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}}class AK{constructor(e,t,n,a=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=YT(t,n);const r=this.outputShape.length;this.enableShapeUniforms=lY(r);let o="";if(a)if(0===r||1===Ux(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{if(o=`\n          ${aY(r)} coords = getOutputCoords();\n        `,1===r)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{const e=mK("coords",r);this.enableShapeUniforms?o+=`\n            bool nextRowOutOfBounds =\n              (${e[r-2]} + 1) >= outShape[${r} - 2];\n            bool nextColOutOfBounds =\n              (${e[r-1]} + 1) >= outShape[${r} - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `:o+=`\n            bool nextRowOutOfBounds =\n              (${e[r-2]} + 1) >= ${this.outputShape[r-2]};\n            bool nextColOutOfBounds =\n              (${e[r-1]} + 1) >= ${this.outputShape[r-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${e}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${o}\n\n        setOutput(result);\n      }\n    `}}function MK(e){const{inputs:t,backend:n}=e,{x:a}=t;return n.incRef(a.dataId),{dataId:a.dataId,shape:a.shape,dtype:a.dtype}}const BK={kernelName:zC,backendName:"webgl",kernelFunc:MK};function PK(e){const{inputs:t,backend:n}=e,{real:a,imag:r}=t,o=n.makeTensorInfo(a.shape,"complex64"),s=n.texData.get(o.dataId),i=MK({inputs:{x:a},backend:n}),l=MK({inputs:{x:r},backend:n});return s.complexTensorInfos={real:i,imag:l},o}const DK={kernelName:Qk,backendName:"webgl",kernelFunc:PK},FK="return (a < 0.) ? b * a : a;",_K="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const LK={kernelName:GC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{alpha:o}=a,s=n.makeTensorInfo([],"float32",e$(o,"float32")),i=Ck().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new AK(_K,r.shape,s.shape):new RK(FK,r.shape,s.shape),l=n.runWebGLProgram(i,[r,s],"float32");return n.disposeIntermediateTensorInfo(s),l}},zK="return (a < 0.) ? b * a : a;",VK="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";const WK={kernelName:TE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a,alpha:r}=t,o=Ck().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new AK(VK,a.shape,r.shape):new RK(zK,a.shape,r.shape);return n.runWebGLProgram(o,[a,r],"float32")}};function HK({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:a}){return({inputs:r,backend:o})=>{const{x:s}=r,i=o,l=a||s.dtype;if(i.shouldExecuteOnCPU([s])&&null!=n){const e=i.texData.get(s.dataId),t=n(e.values,l);return i.makeTensorInfo(s.shape,l,t)}let u;return u=Ck().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=t?new SK(s.shape,t):new kK(s.shape,e),i.runWebGLProgram(u,[s],l)}}function jK({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:a=!1,cpuKernelImpl:r,dtype:o}){return({inputs:s,backend:i})=>{const{a:l,b:u}=s,c=i;if(a&&"complex64"===l.dtype){const t=c.texData.get(l.dataId),n=c.texData.get(u.dataId),[a,r]=[[t.complexTensorInfos.real,n.complexTensorInfos.real],[t.complexTensorInfos.imag,n.complexTensorInfos.imag]].map((t=>{const[n,a]=t,r={dataId:n.dataId,dtype:n.dtype,shape:l.shape},o={dataId:a.dataId,dtype:a.dtype,shape:u.shape},s=new RK(e,l.shape,u.shape);return c.runWebGLProgram(s,[r,o],$$(n.dtype,a.dtype))})),o=PK({inputs:{real:a,imag:r},backend:c});return c.disposeIntermediateTensorInfo(a),c.disposeIntermediateTensorInfo(r),o}const p=o||$$(l.dtype,u.dtype);if(("string"===l.dtype||"string"===u.dtype||c.shouldExecuteOnCPU([l,u]))&&null!=r){const e=c.texData.get(l.dataId).values,t=c.texData.get(u.dataId).values,n="string"===l.dtype?nM(e):e,a="string"===l.dtype?nM(t):t,[o,s]=r(l.shape,u.shape,n,a,p),i=c.makeTensorInfo(s,p);return c.texData.get(i.dataId).values=o,i}let d;return d=Ck().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=t?new AK(t,l.shape,u.shape,n):new RK(e,l.shape,u.shape),c.runWebGLProgram(d,[l,u],p)}}function UK(e,t=!1){if("linear"===e)return"return x;";if("relu"===e)return t?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n";if("elu"===e)return t?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n";if("prelu"===e)return t?VK:zK;if("leakyrelu"===e)return t?_K:FK;if("sigmoid"===e)return"return 1.0 / (1.0 + exp(-1.0 * x));";throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}class GK{constructor(e,t,n,a=!1,r=!1,o=!1,s=null,i=!1,l=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=lY(this.outputShape.length);const u=a?e[1]:e[2],c=Math.ceil(u/2),p=a?"i * 2, rc.y":"rc.y, i * 2",d=r?"rc.z, i * 2":"i * 2, rc.z",h=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let m="",g="";s&&(m=i?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${s}\n        }`:l?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${s}\n        }`:`vec4 activation(vec4 x) {\n          ${s}\n        }`,g="result = activation(result);");const v=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let b="rc.x",y="rc.x";e[0]<t[0]?b=`int(min(float(rc.x), ${e[0]-1}.))`:t[0]<e[0]&&(y=`int(min(float(rc.x), ${t[0]-1}.))`),this.userCode=`\n      ${m}\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ${c}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ${c}; i++) {\n          int batchA = ${b};\n          int batchB = ${y};\n          vec4 a = getMatrixA(batchA, ${p});\n          vec4 b = getMatrixB(batchB, ${d});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${h[0]} * ${f[0]});\n          result += (${h[1]} * ${f[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${v}\n\n        ${g}\n\n        setOutput(result);\n      }\n    `}}const qK="return areal * breal - aimag * bimag;",XK="return areal * bimag + aimag * breal;";class YK{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=YT(t,n),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${e}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}}const KK="return a * b;";function JK(e){const{inputs:t,backend:n}=e,{a:a,b:r}=t,o=$$(a.dtype,r.dtype);if("complex64"===a.dtype){const e=n.texData.get(a.dataId),t=n.texData.get(r.dataId),o=new YK(qK,a.shape,r.shape),s=new YK(XK,a.shape,r.shape),i=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:a.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:r.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:r.shape}],l=n.runWebGLProgram(o,i,"float32"),u=n.runWebGLProgram(s,i,"float32"),c=PK({inputs:{real:l,imag:u},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),c}if(n.shouldExecuteOnCPU([a,r])){const e=n.texData.get(a.dataId),t=n.texData.get(r.dataId),[s,i]=GY(a.shape,r.shape,e.values,t.values,o),l=n.makeTensorInfo(i,o);return n.texData.get(l.dataId).values=s,l}let s;return s=Ck().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new AK(KK,a.shape,r.shape):new RK(KK,a.shape,r.shape),n.runWebGLProgram(s,[a,r],o)}const ZK={kernelName:gE,backendName:"webgl",kernelFunc:JK};function QK(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{shape:o}=a,s=n,i=Ux(r.shape),l=Jx(o,i),u=Ux(l);Vx(i===u,(()=>`The new shape (${l}) has ${u} elements and the old shape (${r.shape}) has ${i} elements. The new shape and old shape must have the same number of elements.`));const c=s.texData.get(r.dataId);return!c.isPacked||RX(r.shape,l)||null!==c.texture&&RX(c.shape,l)?(s.incRef(r.dataId),{dataId:r.dataId,shape:l,dtype:r.dtype}):function(e,t,n){const a=[TX(e.shape),...IX(e.shape)],r={dtype:e.dtype,shape:a,dataId:e.dataId},o=[TX(t),...IX(t)],s=new vK(o,a),i=[a],l=n.runWebGLProgram(s,[r],e.dtype,i,!0);return{dataId:l.dataId,shape:t,dtype:l.dtype}}(r,l,s)}const eJ={kernelName:ME,backendName:"webgl",kernelFunc:QK};class tJ{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:a,inSize:r,outSize:o}=e;this.outputShape=[a,o];const s=4*Math.floor(n/4),i=n%4;let l="sumValue += dot(values, ones);";if(null!=t){const e=1/t;l=`sumValue += dot(values * ${qx(e)?e.toPrecision(2):e}, ones);`}let u="";r%n>0&&(u=`\n        if (inIdx < 0 || inIdx >= ${r}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${u}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${s}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${l}\n        }\n\n        int inIdx = inOffset + ${s};\n        if (${1===i}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${l}\n        } else if (${2===i}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${l}\n        } else if (${3===i}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${l}\n        }\n        setOutput(sumValue);\n      }\n    `}}class nJ{constructor(e,t){this.variableNames=["x"];const{windowSize:n,batchSize:a,inSize:r,outSize:o}=e;this.outputShape=[a,o];let s="0.0",i="";"prod"===t?s="1.0":"min"===t?(s="1.0 / 1e-20",i="min"):"max"===t&&(s="-1.0 / 1e-20",i="max");let l=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===t?l="sumValue":"prod"===t?l="prodValue":"all"===t?l="allValue":"any"===t&&(l="anyValue");const u=4*Math.floor(n/4),c=n%4;let p=`\n      if (${"sum"===t}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===t}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${i}(values, minMaxValue);\n        if (${"min"===t} || ${"max"===t}) {\n          minMaxValue = ${i}(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    `,d="vec4";"all"===t?(s="1.0",p="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===t&&(s="0.0",p="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");let h="";r%n>0&&(h=`\n        if (inIdx < 0 || inIdx >= ${r}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${s};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${h}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        vec4 minMaxValue = vec4(${s});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${p}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${p}\n        } else if (${2===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${p}\n        } else if (${3===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${p}\n        }\n        setOutput(${l});\n      }\n    `}}function aJ(e,t,n,a){const r=function(e){const t=[];for(;0===t.length||1!==t[t.length-1].outSize;){const n=t.length?t[t.length-1].outSize:e[1],a=oA(n);t.push({inSize:n,windowSize:a,outSize:Math.ceil(n/a)})}return t}(e.shape);let o=e;for(let s=0;s<r.length;s++){const{inSize:i,windowSize:l,outSize:u}=r[s];let c,p;c="mean"===n?0===s?new tJ({windowSize:l,inSize:i,batchSize:e.shape[0],outSize:u},i):new tJ({windowSize:l,inSize:i,batchSize:e.shape[0],outSize:u}):new nJ({windowSize:l,inSize:i,batchSize:e.shape[0],outSize:u},n),p=o,o=a.runWebGLProgram(c,[o],t),p.dataId!==e.dataId&&a.disposeIntermediateTensorInfo(p)}return o}class rJ{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let a=0;a<n.length;a++)n[a]=e[t[a]];this.outputShape=n,this.rank=n.length;const a=aY(this.rank),r=function(e){const t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],a=new Array(t);for(let t=0;t<e.length;t++)a[e[t]]=n[t];return a.join()}(t);this.userCode=`\n    void main() {\n      ${a} resRC = getOutputCoords();\n      setOutput(getA(${r}));\n    }\n    `}}class oJ{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const n=new Array(e.length);for(let a=0;a<n.length;a++)n[a]=e[t[a]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const a=aY(this.rank),r=fK("rc",this.rank),o=new Array(this.rank);for(let e=0;e<t.length;e++)o[t[e]]=r[e];const s=`vec2(${o.slice(-2).join()})`,i=`++${r[this.rank-1]} < ${n[this.rank-1]}`,l=`getChannel(getA(${o.join()}), ${s})`;this.userCode=`\n    void main() {\n      ${a} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${l};\n      if(${i}) {\n        result[1] = ${l};\n      }\n      --${r[this.rank-1]};\n      if(++${r[this.rank-2]} < ${n[this.rank-2]}) {\n        result[2] = ${l};\n        if(${i}) {\n          result[3] = ${l};\n        }\n      }\n      setOutput(result);\n    }\n    `}}function sJ(e,t,n){const a=Ck().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new oJ(e.shape,t):new rJ(e.shape,t);return n.runWebGLProgram(a,[e],e.dtype)}function iJ(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:s}=a;return function(e,t,n,a){const r=t,o=e.shape.length,s=Zx(r,e.shape);let i=s;const l=qN(i,o),u=null!=l;let c=e;u&&(c=sJ(e,l,a),i=YN(i.length,o)),GN("sum",i,o);const[p,d]=jN(c.shape,i);let h=p;n&&(h=UN(p,s));const f=Ux(d),m=QK({inputs:{x:c},attrs:{shape:[Ux(e.shape)/f,f]},backend:a}),g=aJ(m,T$(e.dtype),"sum",a),v=QK({inputs:{x:g},attrs:{shape:h},backend:a});return a.disposeIntermediateTensorInfo(m),a.disposeIntermediateTensorInfo(g),u&&a.disposeIntermediateTensorInfo(c),v}(r,o,s,n)}const lJ={kernelName:ZE,backendName:"webgl",kernelFunc:iJ};function uJ(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{perm:o}=a,s=n,i=r.shape.length,l=new Array(i);for(let e=0;e<l.length;e++)l[e]=r.shape[o[e]];let u;if(s.shouldExecuteOnCPU([r])){const e=s.texData.get(r.dataId).values,t=dK(e,r.shape,r.dtype,o,l);u=s.makeTensorInfo(l,r.dtype);s.texData.get(u.dataId).values=t}else u=sJ(r,o,s);return u}const cJ={kernelName:yS,backendName:"webgl",kernelFunc:uJ};function pJ({a:e,b:t,transposeA:n,transposeB:a,backend:r,bias:o=null,preluActivationWeights:s=null,leakyreluAlpha:i=0,activation:l=null}){const u=e.shape.length,c=t.shape.length,p=n?e.shape[u-2]:e.shape[u-1],d=a?t.shape[c-1]:t.shape[c-2],h=n?e.shape[u-1]:e.shape[u-2],f=a?t.shape[c-2]:t.shape[c-1],m=e.shape.slice(0,-2),g=t.shape.slice(0,-2),v=Ux(m),b=Ux(g),y=YT(e.shape.slice(0,-2),t.shape.slice(0,-2)).concat([h,f]);Vx(p===d,(()=>`Error in matMul: inner shapes (${p}) and (${d}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${n} and transposeB=${a} must match.`));const w=n?[v,p,h]:[v,h,p],x=a?[b,f,d]:[b,d,f],k=QK({inputs:{x:e},backend:r,attrs:{shape:w}}),C=QK({inputs:{x:t},backend:r,attrs:{shape:x}}),E=[k,C],S=Math.max(v,b),$=n?k.shape[1]:k.shape[2],T=null!=o,I=null!=s,N="leakyrelu"===l,O=null!=l?UK(l,!0):null;let R;if((1===h||1===f)&&$>1e3&&!1===(T||I||N||null!=O)){let e=k,t=C;n&&(e=uJ({inputs:{x:k},backend:r,attrs:{perm:[0,2,1]}}),E.push(e)),a&&(t=uJ({inputs:{x:C},backend:r,attrs:{perm:[0,2,1]}}),E.push(t));const o=1===f;let s=e;1!==f&&(s=QK({inputs:{x:e},backend:r,attrs:{shape:[S,$,1]}}),E.push(s));const i=1===f?2:1;let l=t;o&&(l=QK({inputs:{x:t},backend:r,attrs:{shape:[S,1,$]}}),E.push(l));const u=JK({inputs:{a:s,b:l},backend:r});R=iJ({inputs:{x:u},backend:r,attrs:{axis:i,keepDims:!0}}),E.push(u)}else{const l=$$(e.dtype,t.dtype),u=new GK(w,x,[S,h,f],n,a,T,O,I,N),c=[k,C];if(null!=o&&c.push(o),I&&c.push(s),N){const e=r.makeTensorInfo([],"float32",e$(i,"float32"));c.push(e),E.push(e)}R=r.runWebGLProgram(u,c,l)}const A=QK({inputs:{x:R},backend:r,attrs:{shape:y}});E.push(R);for(const e of E)r.disposeIntermediateTensorInfo(e);return A}const dJ={kernelName:TS,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{a:r,b:o,bias:s,preluActivationWeights:i}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:p}=a;return pJ({a:r,b:o,transposeA:l,transposeB:u,backend:n,bias:s,preluActivationWeights:i,leakyreluAlpha:p,activation:c})}},hJ="return abs(x);";const fJ={kernelName:Ik,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t;if(n.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){const e=n.texData.get(a.dataId),t=QY(e.values);return n.makeTensorInfo(a.shape,a.dtype,t)}let r;return r=Ck().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new SK(a.shape,hJ):new kK(a.shape,hJ),n.runWebGLProgram(r,[a],a.dtype)}},mJ=HK({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),gJ={kernelName:Nk,backendName:"webgl",kernelFunc:mJ},vJ=HK({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),bJ={kernelName:Ok,backendName:"webgl",kernelFunc:vJ},yJ="return a + b;",wJ=jK({opSnippet:yJ,packedOpSnippet:yJ,supportsComplex:!0,cpuKernelImpl:$Y}),xJ={kernelName:Rk,backendName:"webgl",kernelFunc:wJ};class kJ{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(((e,t)=>`T${t}`));const n=[];this.variableNames.forEach((e=>{n.push(`float v${e} = get${e}AtOutCoords();`)}));const a=this.variableNames.map((e=>`v${e}`)).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        float result = ${a};\n        setOutput(result);\n      }\n    `}}class CJ{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(((e,t)=>`T${t}`));const n=[];this.variableNames.forEach((e=>{n.push(`vec4 v${e} = get${e}AtOutCoords();`)}));const a=this.variableNames.map((e=>`v${e}`)).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        vec4 result = ${a};\n        setOutput(result);\n      }\n    `}}const EJ={kernelName:Ak,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:a}=t,r=n;if(1===r.length)return MK({inputs:{x:r[0]},backend:a});if(r.length>Ck().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const t=Math.floor(r.length/2),n=e({inputs:r.slice(0,t),backend:a}),o=e({inputs:r.slice(t),backend:a});return e({inputs:[n,o],backend:a})}const o=r.map((e=>e.dtype)).reduce(((e,t)=>$$(e,t))),s=r.map((e=>e.shape)),i=Ck().getBool("WEBGL_PACK")?new CJ(r[0].shape,s):new kJ(r[0].shape,s);return a.runWebGLProgram(i,r,o)}};const SJ={kernelName:Mk,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:s}=a,i=r.shape.length,l=Zx(o,r.shape);let u=l;const c=qN(u,i);let p=r;null!=c&&(p=uJ({inputs:{x:r},backend:n,attrs:{perm:c}}),u=YN(u.length,i)),GN("all",u,i);const[d,h]=jN(p.shape,u),f=QK({inputs:{x:p},backend:n,attrs:{shape:[-1,Ux(h)]}}),m=aJ(f,f.dtype,"all",n);let g;if(s){g=QK({inputs:{x:m},backend:n,attrs:{shape:UN(d,l)}})}else g=QK({inputs:{x:m},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=c&&n.disposeIntermediateTensorInfo(p),g}};const $J={kernelName:Bk,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:s}=a,i=r.shape.length,l=Zx(o,r.shape);let u=l;const c=qN(u,i);let p=r;null!=c&&(p=uJ({inputs:{x:r},backend:n,attrs:{perm:c}}),u=YN(u.length,i)),GN("any",u,i);const[d,h]=jN(p.shape,u),f=QK({inputs:{x:p},backend:n,attrs:{shape:[-1,Ux(h)]}}),m=aJ(f,f.dtype,"any",n);let g;if(s){g=QK({inputs:{x:m},backend:n,attrs:{shape:UN(d,l)}})}else g=QK({inputs:{x:m},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=c&&n.disposeIntermediateTensorInfo(p),g}};class TJ{constructor(e,t,n){this.variableNames=["A"];const{windowSize:a,batchSize:r,outSize:o}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[r,o];const s="max"===t?">":"<",i=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${a};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${a}; i++) {\n          int inIdx = ${i};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${s} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}class IJ{constructor(e,t,n,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Vx(e.length>2,(()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`));const r=e[e.length-1],o=Math.ceil(r/t);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");const s=this.outputShape,i=s.length,l=aY(i),u=mK("coords",i);let c,p;if(1===o){p=i+1;const e=aY(p);c=`\n        ${e} sourceLocR = ${e}(${u.join()}, 0);\n        ++${u[i-1]};\n        ${e} sourceLocG = ${e}(${u.join()}, 0);\n        ++${u[i-2]};\n        ${e} sourceLocA = ${e}(${u.join()}, 0);\n        --${u[i-1]};\n        ${e} sourceLocB = ${e}(${u.join()}, 0);\n        --${u[i-2]};`}else p=i,c=`\n        ${l} sourceLocR = coords;\n        ++${u[i-1]};\n        ${l} sourceLocG = coords;\n        ++${u[i-2]};\n        ${l} sourceLocA = coords;\n        --${u[i-1]};\n        ${l} sourceLocB = coords;\n        --${u[i-2]};`;const d=["x","y","z","w","u","v"].slice(0,p),h="."+d[p-1],f=d.map((e=>"int "+e)),m=mK("sourceLocR",p-1).concat("inIdx.r"),g=mK("sourceLocG",p-1).concat("inIdx.g"),v=mK("sourceLocB",p-1).concat("inIdx.b"),b=mK("sourceLocA",p-1).concat("inIdx.a"),y="max"===n?"greaterThan":"lessThan",w=a?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${m.join()}),\n                             getBestIndicesAChannel(${g.join()}),\n                             getBestIndicesAChannel(${v.join()}),\n                             getBestIndicesAChannel(${b.join()})));`,x=`vec4(\n            getAChannel(${m.join()}),\n            hasNextCol ? getAChannel(${g.join()}) : 0.,\n            hasNextRow ? getAChannel(${v.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${b.join()}) : 0.)`,k=a?"":`\n      float getBestIndicesAChannel(${f.join()}) {\n        return getChannel(getBestIndicesA(${d.join()}),\n                                          vec2(${d.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${f.join()}) {\n        return getChannel(getA(${d.join()}),\n                               vec2(${d.slice(-2).join()}));\n      }\n      ${k}\n      void main() {\n        ${l} coords = getOutputCoords();\n        bool hasNextCol = ${u[i-1]} < ${s[i-1]-1};\n        bool hasNextRow = ${u[i-2]} < ${s[i-2]-1};\n        ${c}\n        ivec4 srcIdx = ivec4(sourceLocR${h}, sourceLocG${h},\n          sourceLocB${h}, sourceLocA${h}) * ${t};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${x};\n\n        for (int i = 0; i < ${t}; i++) {\n          inIdx = srcIdx;\n          ${w}\n          vec4 candidate = ${x};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${y}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}function NJ(e,t,n,a=null){let r=t.shape[0],o=t.shape[1];null!=a&&(r=a.shape[0],o=a.shape[1]);const s=oA(o),i={windowSize:s,inSize:o,batchSize:r,outSize:Math.ceil(o/s)},l=new TJ(i,n,null==a),u=[t];null!=a&&u.push(a);const c=e.runWebGLProgram(l,u,"int32");if(1===c.shape[1])return c;const p=NJ(e,t,n,c);return e.disposeIntermediateTensorInfo(c),p}function OJ(e,t,n,a=null){const r=null!=a?a.shape:t.shape,o=oA(r[r.length-1]),s=new IJ(r,o,n,null==a),i=null==a?[t]:[t,a],l=e.runWebGLProgram(s,i,"int32");if(l.shape.length===t.shape.length){const a=OJ(e,t,n,l);return e.disposeIntermediateTensorInfo(l),a}return l}function RJ(e,t,n,a){const r=[n];if(GN("arg"+a.charAt(0).toUpperCase()+a.slice(1),r,t.shape.length),!Ck().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){const n=[],o=e.texData.get(t.dataId);let s=t;null!==o&&o.isPacked&&(s=e.unpackTensor(t),n.push(s));const[i,l]=jN(s.shape,r),u=Ux(l),c=QK({inputs:{x:s},backend:e,attrs:{shape:[-1,u]}});n.push(c);const p=NJ(e,c,a);n.push(p);const d=QK({inputs:{x:p},backend:e,attrs:{shape:i}});return n.forEach((t=>e.disposeIntermediateTensorInfo(t))),d}return OJ(e,t,a)}const AJ={kernelName:Pk,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o}=a;let s=Zx(o,r.shape);const i=qN(s,r.shape.length);let l=r;const u=[];null!=i&&(l=uJ({inputs:{x:r},backend:n,attrs:{perm:i}}),u.push(l),s=YN(s.length,l.shape.length)),GN("argMax",[s[0]],l.shape.length);const c=RJ(n,l,s[0],"max");return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}};const MJ={kernelName:Dk,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o}=a;let s=Zx(o,r.shape);const i=qN(s,r.shape.length);let l=r;const u=[];null!=i&&(l=uJ({inputs:{x:r},backend:n,attrs:{perm:i}}),u.push(l),s=YN(s.length,l.shape.length)),GN("argMin",[s[0]],l.shape.length);const c=RJ(n,l,s[0],"min");return u.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}},BJ=HK({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),PJ={kernelName:Fk,backendName:"webgl",kernelFunc:BJ},DJ=HK({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),FJ={kernelName:_k,backendName:"webgl",kernelFunc:DJ},_J=HK({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),LJ={kernelName:Lk,backendName:"webgl",kernelFunc:_J},zJ=jK({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),VJ={kernelName:Vk,backendName:"webgl",kernelFunc:zJ},WJ=HK({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),HJ={kernelName:zk,backendName:"webgl",kernelFunc:WJ};class jJ{constructor(e,t,n,a=!1,r=!1){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideHeight,i=e.strideWidth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterHeight,p=e.effectiveFilterWidth,d=e.padInfo.top,h=e.padInfo.left;this.outputShape=e.outShape;const f="avg"===t,m=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,g=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let v="0.0";if(f||(v="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode=`\n        const ivec2 strides = ivec2(${s}, ${i});\n        const ivec2 pads = ivec2(${d}, ${h});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${c};\n              wR += ${l}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${p};\n                wC += ${u}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ${t} currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${a?r?m:g:`wR * ${p} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let b=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(b="avgValue / count");const y=4*Math.floor(o/4),w=o%4,x=`\n      if (${f}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${s}, ${i});\n      const ivec2 pads = ivec2(${d}, ${h});\n      const float initializationValue = ${v};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${v});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${c};\n            wR += ${l}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${y}; wC += 4) {\n            int xC = xCCorner + wC * ${u};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              getValue(batch, xR, xC + 3 * ${u}, d)\n            );\n\n            ${x}\n          }\n\n          int xC = xCCorner + ${y};\n          if (${1===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${x}\n          } else if (${2===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${x}\n          } else if (${3===w}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              initializationValue\n            );\n\n            ${x}\n          }\n        }\n        setOutput(${b});\n      }\n    `}}class UJ{constructor(e,t,n,a=!1,r=!1){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,s=e.strideDepth,i=e.strideHeight,l=e.strideWidth,u=e.dilationDepth,c=e.dilationHeight,p=e.dilationWidth,d=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;const b="avg"===t;let y="0.0";if(b||(y="-1.0 / 1e-20"),n){const t=">=";return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${s}, ${i}, ${l});\n        const ivec3 pads = ivec3(${m}, ${g}, ${v});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${d};\n              wD += ${u}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${h};\n                wR += ${c}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${f};\n                  wC += ${p}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ${t} currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${a?r?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${h} * ${f} +\n                      wR * ${f} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let w=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(w="avgValue / count");const x=4*Math.floor(o/4),k=o%4,C=`\n      if (${b}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${s}, ${i}, ${l});\n      const ivec3 pads = ivec3(${m}, ${g}, ${v});\n      const float initializationValue = ${y};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${y});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${d};\n            wD += ${u}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${h};\n            wR += ${c}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${x}; wC += 4) {\n              int xC = xCCorner + wC * ${p};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${p}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${p}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${p}, ch)\n              );\n\n              ${C}\n            }\n\n            int xC = xCCorner + ${x};\n            if (${1===k}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${C}\n            } else if (${2===k}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${p}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${C}\n            } else if (${3===k}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${p}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${p}, ch),\n                initializationValue\n              );\n\n              ${C}\n            }\n          }\n          setOutput(${w});\n        }\n      }\n    `}}const GJ={kernelName:Wk,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t;_X(r,"avgPool");const{filterSize:o,strides:s,pad:i,dimRoundingMode:l}=a;Vx(jI(s,1),(()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${s} and dilations '1'`));const u=BI(r.shape,o,s,1,i,l);if(1===u.filterWidth&&1===u.filterHeight&&Gx(u.inShape,u.outShape))return MK({inputs:{x:r},backend:n});const c=new jJ(u,"avg",!1);return n.runWebGLProgram(c,[r],"float32")}};const qJ={kernelName:jk,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{filterSize:o,strides:s,pad:i,dimRoundingMode:l,dataFormat:u}=a,c=PI(r.shape,o,s,[1,1,1],i,l,u),p=new UJ(c,"avg",!1);return n.runWebGLProgram(p,[r],"float32")}};class XJ{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,a=e.strideHeight,r=e.strideWidth,o=e.dilationHeight,s=e.dilationWidth,i=e.effectiveFilterHeight,l=e.effectiveFilterWidth,u=i-1-e.padInfo.top,c=l-1-e.padInfo.left,p=1/(t*n);this.userCode=`\n      const ivec2 pads = ivec2(${u}, ${c});\n      const float avgMultiplier = float(${p});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${i};\n            wR += ${o}) {\n          float dyR = float(dyRCorner + wR) / ${a}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${l};\n            wC+= ${s}) {\n            float dyC = float(dyCCorner + wC) / ${r}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class YJ{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,a=e.filterWidth,r=e.strideDepth,o=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,p=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=c-1-e.padInfo.front,f=p-1-e.padInfo.top,m=d-1-e.padInfo.left,g=1/(t*n*a);this.userCode=`\n      const ivec3 pads = ivec3(${h}, ${f}, ${m});\n      const float avgMultiplier = float(${g});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${c};\n            wD += ${i}) {\n          float dyD = float(dyDCorner + wD) / ${r}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${p};\n              wR += ${l}) {\n            float dyR = float(dyRCorner + wR) / ${o}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${d};\n                wC += ${u}) {\n              float dyC = float(dyCCorner + wC) / ${s}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const KJ={kernelName:Uk,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o}=t,s=o,{filterSize:i,strides:l,pad:u,dimRoundingMode:c}=a,p=PI(s.shape,i,l,[1,1,1],u,c),d=new YJ(p);return n.runWebGLProgram(d,[r],s.dtype)}};const JJ={kernelName:Hk,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o}=t,s=o;_X([r,o],"avgPoolGrad");const{filterSize:i,strides:l,pad:u}=a,c=BI(s.shape,i,l,1,u),p=new XJ(c);return n.runWebGLProgram(p,[r],s.dtype)}};const ZJ={kernelName:Gk,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{a:r,b:o}=t,{transposeA:s,transposeB:i}=a;return pJ({a:r,b:o,transposeA:s,transposeB:i,backend:n})}};class QJ{constructor(e,t,n,a,r,o){this.outputShape=[],this.variableNames=["x","mean","variance"],YT(e,t),YT(e,n);let s="0.0";null!=a&&(YT(e,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let i="1.0";null!=r&&(YT(e,r),this.variableNames.push("scale"),i="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${s};\n        float scale = ${i};\n        float inv = scale * inversesqrt(variance + float(${o}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}class eZ{constructor(e,t,n,a,r,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],YT(e,t),YT(e,n);let s="vec4(0.0)";null!=a&&(YT(e,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");let i="vec4(1.0)";null!=r&&(YT(e,r),this.variableNames.push("scale"),i="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        vec4 offset = ${s};\n        vec4 scale = ${i};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${o}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}const tZ={kernelName:PC,backendName:"webgl",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:a,mean:r,variance:o,offset:s,scale:i}=e;Vx(r.shape.length===o.shape.length,(()=>"Batch normalization gradient requires mean and variance to have equal ranks.")),Vx(null==s||r.shape.length===s.shape.length,(()=>"Batch normalization gradient requires mean and offset to have equal ranks.")),Vx(null==i||r.shape.length===i.shape.length,(()=>"Batch normalization gradient requires mean and scale to have equal ranks."));let{varianceEpsilon:l}=n;null==l&&(l=.001);const u=[a,r,o];let c=null;null!=s&&(c=s.shape,u.push(s));let p=null;null!=i&&(p=i.shape,u.push(i));const d=Ck().getBool("WEBGL_PACK_NORMALIZATION")?new eZ(a.shape,r.shape,o.shape,c,p,l):new QJ(a.shape,r.shape,o.shape,c,p,l);return t.runWebGLProgram(d,u,u[0].dtype)}};class nZ{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const t=aY(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=function(e){if(1===e)return"sourceLoc";if(e<=6)return aZ.slice(0,e).map((e=>"sourceLoc."+e)).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}(this.rank);let a;const r=e.map(((e,t)=>`sourceLoc.${aZ[t]} = start[${t}] + coords.${aZ[t]};`));a=`\n        ${t} sourceLoc;\n        ${t} coords = getOutputCoords();\n        ${r.join("\n")}\n      `,this.userCode=`\n      void main() {\n        ${a}\n        setOutput(getSource(${n}));\n      }\n    `}}const aZ=["x","y","z","w","u","v"];class rZ{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const t=aY(this.rank),n=mK("coords",this.rank),a=mK("sourceLoc",this.rank),r=1===this.rank?"sourceLoc":`vec2(${a.slice(-2).join()})`,o=`getChannel(getSource(${a.join()}), ${r})`,s=`\n      result.x = ${o};\n      if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n        ++${a[this.rank-1]};\n        result.y = ${o};\n        --${a[this.rank-1]};\n      }\n    `,i=1===this.rank?"":`\n      --${n[this.rank-1]};\n      if (++${n[this.rank-2]} < ${e[this.rank-2]}) {\n        ++${a[this.rank-2]};\n        result.z = ${o};\n        if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n          ++${a[this.rank-1]};\n          result.w = ${o};\n        }\n      }\n    `,l=this.rank<=4?`sourceLoc = coords +\n            ${t}(${e.map(((e,t)=>`start[${t}]`)).join()});`:e.map(((e,t)=>`${a[t]} = ${n[t]} + start[${t}];`)).join("\n");this.userCode=`\n      void main() {\n        ${t} coords = getOutputCoords();\n        ${t} sourceLoc;\n        ${l}\n        vec4 result = vec4(0.);\n        ${s}\n        ${i}\n        setOutput(result);\n      }\n    `}}function oZ(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{begin:o,size:s}=a,[i,l]=hI(r,o,s);if(QT(r,i,l),0===Ux(l))return n.makeTensorInfo(l,r.dtype,[]);if(n.shouldExecuteOnCPU([r])||"string"===r.dtype){const e=n.texData.get(r.dataId),t=eK(e.values,i,l,r.shape,r.dtype);return n.makeTensorInfo(l,r.dtype,t)}const{isPacked:u}=n.texData.get(r.dataId),c=pI(r.shape,i,l);if(u||!c){const e=Ck().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new rZ(l):new nZ(l),t=[i];return n.runWebGLProgram(e,[r],r.dtype,t)}return n.uploadToGPU(r.dataId),function(e,t,n,a){const r=a.texData.get(e.dataId),o=a.makeTensorInfo(n,e.dtype),s=a.texData.get(o.dataId);Object.assign(s,r),s.refCount=1,s.shape=n,s.dtype=e.dtype;let i=dI(t,ck(e.shape));r.slice&&(i+=r.slice.flatOffset),s.slice={flatOffset:i,origDataId:r.slice&&r.slice.origDataId||e.dataId};const l=a.dataRefCount.get(s.slice.origDataId)||1;return a.dataRefCount.set(s.slice.origDataId,l+1),o}(r,i,l,n)}const sZ={kernelName:UE,backendName:"webgl",kernelFunc:oZ},iZ={kernelName:qk,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockShape:o,crops:s}=a;Vx(r.shape.length<=4,(()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"));const i=o.reduce(((e,t)=>e*t)),l=iA(r.shape,o,i),u=lA(l.length,o.length),c=uA(r.shape,o,i),p=cA(s,o.length),d=pA(c,s,o.length),h=[],f=QK({inputs:{x:r},backend:n,attrs:{shape:l}}),m=uJ({inputs:{x:f},backend:n,attrs:{perm:u}}),g=QK({inputs:{x:m},backend:n,attrs:{shape:c}}),v=oZ({inputs:{x:g},backend:n,attrs:{begin:p,size:d}});return h.push(f),h.push(m),h.push(g),h.forEach((e=>n.disposeIntermediateTensorInfo(e))),v}};const lZ={kernelName:Xk,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,weights:o}=t,{size:s}=a,i=n.readSync(r.dataId),l=n.readSync(o.dataId),u=TY(i,l,o.dtype,o.shape,s);return n.makeTensorInfo([s],o.dtype,u)}};const uZ={kernelName:Yk,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{s0:a,s1:r}=t,o=n.readSync(a.dataId),s=n.readSync(r.dataId),i=YT(Array.from(o),Array.from(s));return n.makeTensorInfo([i.length],"int32",Int32Array.from(i))}},cZ=jK({opSnippet:"return float(a != b);",cpuKernelImpl:XY,dtype:"bool"}),pZ={kernelName:bE,backendName:"webgl",kernelFunc:cZ};function dZ(e){const{inputs:t,backend:n}=e,{input:a}=t;return MK({inputs:{x:n.texData.get(a.dataId).complexTensorInfos.real},backend:n})}const hZ={kernelName:OE,backendName:"webgl",kernelFunc:dZ};const fZ={kernelName:Kk,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:a,attrs:r}=t,{x:o}=n,{dtype:s}=r;if("complex64"===s){if("complex64"===o.dtype)return MK({inputs:{x:o},backend:a});const t=tO(o.shape),n=e({inputs:{x:o},backend:a,attrs:{dtype:"float32"}}),r=PK({inputs:{real:n,imag:t},backend:a});return t.dispose(),a.disposeIntermediateTensorInfo(n),r}if("complex64"===o.dtype){const t=dZ({inputs:{input:o},backend:a}),n=e({inputs:{x:t},backend:a,attrs:{dtype:s}});return a.disposeIntermediateTensorInfo(t),n}if(!nk(o.dtype,s)){const e=MK({inputs:{x:o},backend:a});return{dataId:e.dataId,shape:e.shape,dtype:s}}if("int32"===s)return function(e,t){const n=new kK(e.shape,"return float(int(x));"),a=t.runWebGLProgram(n,[e],"int32");return{dataId:a.dataId,shape:a.shape,dtype:a.dtype}}(o,a);if("bool"===s){const e=a.makeTensorInfo([],"bool",ek("bool",1)),t=cZ({inputs:{a:o,b:e},backend:a});return a.disposeIntermediateTensorInfo(e),t}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${s}`)}},mZ="return ceil(x);",gZ=HK({opSnippet:mZ,packedOpSnippet:mZ,cpuKernelImpl:NY}),vZ={kernelName:Jk,backendName:"webgl",kernelFunc:gZ};class bZ{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}class yZ{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}const wZ={kernelName:Zk,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{clipValueMin:o,clipValueMax:s}=a;let i;i=Ck().getBool("WEBGL_PACK_CLIP")?new yZ(r.shape):new bZ(r.shape);const l=[[o],[s]];return n.runWebGLProgram(i,[r],r.dtype,l)}};class xZ{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}function kZ(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}const CZ={kernelName:eC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t,r=n.texData.get(a.dataId),o=new xZ(a.shape),s=[kZ(a,r.complexTensorInfos.real),kZ(a,r.complexTensorInfos.imag)];return n.runWebGLProgram(o,s,s[0].dtype)}};class EZ{constructor(e){this.outputShape=[],this.outputShape=aA(e,1),this.variableNames=e.map(((e,t)=>`T${t}`));const t=new Array(e.length-1);t[0]=e[0][1];for(let n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];const n=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let e=1;e<t.length;e++){const a=t[e-1];n.push(`else if (yC < ${t[e]}) setOutput(getT${e}(yR, yC-${a}));`)}const a=t.length,r=t[t.length-1];n.push(`else setOutput(getT${a}(yR, yC-${r}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${n.join("\n        ")}\n      }\n    `}}class SZ{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=aA(e,t);const n=this.outputShape,a=n.length,r=aY(a),o=mK("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=e.map(((e,t)=>`T${t}`));const i=new Array(e.length-1);i[0]=e[0][t];for(let n=1;n<i.length;n++)i[n]=i[n-1]+e[n][t];const l=s[t],u=s.slice(-2),c=s.join();let p=`if (${l} < ${i[0]}) {\n        return getChannel(\n            getT0(${c}), vec2(${u.join()}));\n        }`;for(let e=1;e<i.length;e++){const t=i[e-1];p+=`\n        if (${l} < ${i[e]}  && ${l} >= ${i[e-1]}) {\n          return getChannel(\n            getT${e}(${$Z(s,l,t)}),\n            vec2(${$Z(u,l,t)}));\n        }`}const d=i.length,h=i[i.length-1];p+=`\n        return getChannel(\n          getT${d}(${$Z(s,l,h)}),\n          vec2(${$Z(u,l,h)}));`,this.userCode=`\n      float getValue(${s.map((e=>"int "+e))}) {\n        ${p}\n      }\n\n      void main() {\n        ${r} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${o}), 0., 0., 0.);\n\n        ${o[a-1]} = ${o[a-1]} + 1;\n        if (${o[a-1]} < ${n[a-1]}) {\n          result.g = getValue(${o});\n        }\n\n        ${o[a-2]} = ${o[a-2]} + 1;\n        if (${o[a-2]} < ${n[a-2]}) {\n          result.a = getValue(${o});\n        }\n\n        ${o[a-1]} = ${o[a-1]} - 1;\n        if (${o[a-2]} < ${n[a-2]} &&\n            ${o[a-1]} < ${n[a-1]}) {\n          result.b = getValue(${o});\n        }\n        setOutput(result);\n      }\n    `}}function $Z(e,t,n){const a=e.indexOf(t);return e.map(((e,t)=>t===a?`${e} - ${n}`:e)).join()}function TZ(e){const{inputs:t,backend:n}=e,{input:a}=t;return MK({inputs:{x:n.texData.get(a.dataId).complexTensorInfos.imag},backend:n})}const IZ={kernelName:WC,backendName:"webgl",kernelFunc:TZ};function NZ(e,t,n){const a=e[0].dtype;if("complex64"===a){const a=e.map((e=>dZ({inputs:{input:e},backend:n}))),r=e.map((e=>TZ({inputs:{input:e},backend:n}))),o=NZ(a,t,n),s=NZ(r,t,n),i=PK({inputs:{real:o,imag:s},backend:n});return a.forEach((e=>n.disposeIntermediateTensorInfo(e))),r.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),i}let r=n.shouldExecuteOnCPU(e);if("string"===a&&(r=!0),r){const r=e.map((e=>{const a=Ux(e.shape.slice(t));return QK({inputs:{x:e},backend:n,attrs:{shape:[-1,a]}})})),o=r.map((e=>({vals:n.readSync(e.dataId),shape:e.shape}))),s=aA(r.map((e=>e.shape)),1),i=1===r[0].shape[0],l=OY(o,s,a,i),u=aA(e.map((e=>e.shape)),t),c=n.makeTensorInfo(u,a,l);return r.forEach((e=>n.disposeIntermediateTensorInfo(e))),c}if(e.length>Ck().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const a=Math.floor(e.length/2),r=NZ(e.slice(0,a),t,n),o=NZ(e.slice(a),t,n),s=NZ([r,o],t,n);return n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(o),s}if(Ck().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){const r=new SZ(e.map((e=>e.shape)),t);return n.runWebGLProgram(r,e,a)}const{tensors2D:o,outShape:s}=function(e,t,n){const a=aA(e.map((e=>e.shape)),t);return{tensors2D:e.map((e=>QK({inputs:{x:e},attrs:{shape:[-1,Ux(e.shape.slice(t))]},backend:n}))),outShape:a}}(e,t,n),i=new EZ(o.map((e=>e.shape))),l=n.runWebGLProgram(i,o,a);o.forEach((e=>n.disposeIntermediateTensorInfo(e)));const u=QK({inputs:{x:l},attrs:{shape:s},backend:n});return n.disposeIntermediateTensorInfo(l),u}function OZ(e){const{inputs:t,backend:n,attrs:a}=e,{axis:r}=a,o=Zx(r,t[0].shape)[0],s=aA(t.map((e=>e.shape)),o);if(0===Ux(s))return n.makeTensorInfo(s,t[0].dtype,[]);const i=t.filter((e=>Ux(e.shape)>0));if(1===i.length)return MK({inputs:{x:i[0]},backend:n});return nA(i.map((e=>e.shape)),o),NZ(i,o,n)}const RZ={kernelName:tC,backendName:"webgl",kernelFunc:OZ};class AZ{constructor(e,t=!1,n=null,a=!1,r=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,s=e.padInfo.left,i=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,p=e.filterHeight,d=e.filterWidth,h=4*Math.floor(e.inChannels/4),f=e.inChannels%4,m="channelsLast"===e.dataFormat,g=m?1:2,v=m?2:3,b=m?3:1;let y="",w="";n&&(y=a?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:r?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,w="result = activation(result);");const x=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${y}\n\n      const ivec2 strides = ivec2(${i}, ${l});\n      const ivec2 pads = ivec2(${o}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${b}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${g}], coords[${v}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${p}; wR++) {\n          int xR = xRCorner + wR * ${u};\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${d}; wC++) {\n            int xC = xCCorner + wC * ${c};\n\n            if (xC < 0 || xC >= ${e.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${h}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${m}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===f}) {\n\n              if (${m}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${h}) *\n                    getW(wR, wC, ${h}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${h}, xR, xC) *\n                    getW(wR, wC, ${h}, d2);\n              }\n\n            } else if (${2===f}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${h}, d2),\n                getW(wR, wC, ${h} + 1, d2)\n              );\n\n              if (${m}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${h}),\n                  getX(batch, xR, xC, ${h} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${h}, xR, xC),\n                  getX(batch, ${h} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===f}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${h}, d2),\n                getW(wR, wC, ${h} + 1, d2),\n                getW(wR, wC, ${h} + 2, d2)\n              );\n\n              if (${m}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${h}),\n                  getX(batch, xR, xC, ${h} + 1),\n                  getX(batch, xR, xC, ${h} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${h}, xR, xC),\n                  getX(batch, ${h} + 1, xR, xC),\n                  getX(batch, ${h} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${x}\n        ${w}\n        setOutput(result);\n      }\n    `}}class MZ{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const t=e.padInfo.front,n=e.padInfo.top,a=e.padInfo.left,r=e.strideDepth,o=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.filterDepth,p=e.filterHeight,d=e.filterWidth,h=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${r}, ${o}, ${s});\n      const ivec3 pads = ivec3(${t}, ${n}, ${a});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${c}; wF++) {\n          int xF = xFCorner + wF * ${i};\n\n          if (xF < 0 || xF >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${p}; wR++) {\n            int xR = xRCorner + wR * ${l};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${d}; wC++) {\n              int xC = xCCorner + wC * ${u};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${h}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===f}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${h}) *\n                  getW(wF, wR, wC, ${h}, d2);\n              } else if (${2===f}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${h}),\n                  getX(batch, xF, xR, xC, ${h} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${h}, d2),\n                  getW(wF, wR, wC, ${h} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===f}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${h}),\n                  getX(batch, xF, xR, xC, ${h} + 1),\n                  getX(batch, xF, xR, xC, ${h} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${h}, d2),\n                  getW(wF, wR, wC, ${h} + 1, d2),\n                  getW(wF, wR, wC, ${h} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class BZ{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=lY(this.outputShape.length);const{dataFormat:n}=t,a=zX(),r="channelsLast"===n,o=r?0:1,s=r?1:2,i=this.enableShapeUniforms?"if(blockIndex < outShape[1] && pos < outShape[0]) {":`if(blockIndex < ${e[1]} && pos < ${e[0]}) {`;let l="";for(let e=0;e<=1;e++)for(let t=0;t<=1;t++)l+=`\n          blockIndex = rc.y + ${t};\n          pos = rc.x + ${e};\n\n          ${i}\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[${o}] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[${s}] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (${r}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*e+t}] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*e+t}] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${l}\n\n        ${a.output} = result;\n      }\n    `}}function PZ({x:e,filter:t,convInfo:n,backend:a,bias:r=null,preluActivationWeights:o=null,leakyreluAlpha:s=0,activation:i=null}){const l=e.shape,u=a.texData.get(e.dataId),c=n.inChannels,p=l[0]*l[1]*l[2],d=n.outChannels,h="channelsLast"===n.dataFormat;let f;const m=[];if(!((1===p||1===d)&&c>1e3)&&u.isPacked&&h&&null!=u.texture&&l[2]%2!=0&&Gx(u.shape.slice(-3),l.slice(-3))){const c=l[0]*l[1]*(l[2]+1),p={dataId:e.dataId,shape:[1,c,n.inChannels],dtype:e.dtype},d=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,Vx(RX(u.shape,p.shape),(()=>`packed reshape ${u.shape} to ${p.shape} isn't free`));const h=QK({inputs:{x:t},backend:a,attrs:{shape:[1,n.inChannels,n.outChannels]}});m.push(h);const g=pJ({a:p,b:h,backend:a,transposeA:false,transposeB:false,bias:r,activation:i,preluActivationWeights:o,leakyreluAlpha:s}),v=a.texData.get(g.dataId);Vx(v.isPacked,(()=>"batchMatMul result is expected to be packed")),u.shape=d,v.shape=n.outShape,f=MK({inputs:{x:g},backend:a}),f.shape=n.outShape,m.push(g)}else{const u=QK({inputs:{x:e},backend:a,attrs:{shape:[1,h?l[0]*l[1]*l[2]:l[0]*l[2]*l[3],n.inChannels]}}),c=QK({inputs:{x:t},backend:a,attrs:{shape:[1,n.inChannels,n.outChannels]}}),p=pJ({a:u,b:c,transposeA:false,transposeB:false,backend:a,bias:r,activation:i,preluActivationWeights:o,leakyreluAlpha:s});f=QK({inputs:{x:p},backend:a,attrs:{shape:n.outShape}}),m.push(u),m.push(c),m.push(p)}for(const e of m)a.disposeIntermediateTensorInfo(e);return f}function DZ({x:e,filter:t,convInfo:n,backend:a,bias:r=null,preluActivationWeights:o=null,leakyreluAlpha:s=0,activation:i=null}){const{filterWidth:l,filterHeight:u,inChannels:c,outWidth:p,outHeight:d,dataFormat:h}=n,f="channelsLast"===h,m=l*u*c,g=d*p,v=[m,g],b=[],y=QK({inputs:{x:e},backend:a,attrs:{shape:e.shape.slice(1)}}),w=QK({inputs:{x:t},backend:a,attrs:{shape:[1,m,Ux(t.shape)/m]}});b.push(y),b.push(w);const x=new BZ(v,n),k=[y.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],C=a.runWebGLProgram(x,[y],"float32",k),E=QK({inputs:{x:C},backend:a,attrs:{shape:[1,v[0],v[1]]}});b.push(C),b.push(E);const S=null!=r,$=null!=o,T="leakyrelu"===i,I=i?UK(i,!0):null,N=new GK(E.shape,w.shape,[1,g,n.outChannels],!0,!1,S,I,$,T),O=[E,w];if(r&&O.push(r),$&&O.push(o),T){const e=a.makeTensorInfo([],"float32",e$(s,"float32"));O.push(e),b.push(e)}const R=a.runWebGLProgram(N,O,"float32"),A=QK({inputs:{x:R},backend:a,attrs:{shape:f?[1,d,p,n.outChannels]:[1,n.outChannels,d,p]}});b.push(R);for(const e of b)a.disposeIntermediateTensorInfo(e);return A}const FZ={kernelName:nC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o}=t,{strides:s,pad:i,dataFormat:l,dilations:u,dimRoundingMode:c}=a,p=UI(l),d=DI(r.shape,o.shape,s,u,i,c,!1,p);let h;if(1!==d.filterHeight||1!==d.filterWidth||1!==d.dilationHeight||1!==d.dilationWidth||1!==d.strideHeight||1!==d.strideWidth||"SAME"!==d.padInfo.type&&"VALID"!==d.padInfo.type)if(Ck().getBool("WEBGL_CONV_IM2COL")&&1===r.shape[0])h=DZ({x:r,filter:o,convInfo:d,backend:n});else{const e=new AZ(d);h=n.runWebGLProgram(e,[r,o],"float32")}else h=PZ({x:r,filter:o,convInfo:d,backend:n});const f=QK({inputs:{x:h},backend:n,attrs:{shape:d.outShape}});return n.disposeIntermediateTensorInfo(h),f}};class _Z{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,a=e.padInfo.top,r=e.padInfo.left,o="channelsLast"===e.dataFormat;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${a};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${r};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              if (${o}) {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class LZ{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,a=e.strideHeight,r=e.strideWidth,o="channelsLast"===e.dataFormat,s=t-1-e.padInfo.top,i=n-1-e.padInfo.left,l=o?1:2,u=o?2:3,c=o?3:1;this.userCode=`\n      const ivec2 pads = ivec2(${s}, ${i});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${c}];\n\n        ivec2 dyCorner = ivec2(coords[${l}], coords[${u}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${a}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${r}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n\n              if (${o}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class zZ{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideDepth,n=e.strideHeight,a=e.strideWidth,r=e.padInfo.front,o=e.padInfo.top,s=e.padInfo.left;this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yF = 0; yF < ${e.outDepth}; yF++) {\n            int xF = wF + yF * ${t} - ${r};\n\n            if (xF < 0 || xF >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${e.outHeight}; yR++) {\n              int xR = wR + yR * ${n} - ${o};\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${e.outWidth}; yC++) {\n                int xC = wC + yC * ${a} - ${s};\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class VZ{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterDepth,n=e.filterHeight,a=e.filterWidth,r=e.strideDepth,o=e.strideHeight,s=e.strideWidth,i=t-1-e.padInfo.front,l=n-1-e.padInfo.top,u=a-1-e.padInfo.left;this.userCode=`\n      const ivec3 pads = ivec3(${i}, ${l}, ${u});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${t}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${r}.0;\n\n          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${t} - 1 - wF;\n\n          for (int wR = 0; wR < ${n}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${o}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${n} - 1 - wR;\n\n            for (int wC = 0; wC < ${a}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${s}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${a} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const WZ={kernelName:aC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,dy:o}=t,{strides:s,pad:i,dataFormat:l,dimRoundingMode:u,filterShape:c}=a,p=UI(l),d=DI(r.shape,c,s,1,i,u,!1,p),h=new _Z(d);return n.runWebGLProgram(h,[r,o],"float32")}};const HZ={kernelName:rC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,filter:o}=t,{inputShape:s,strides:i,pad:l,dataFormat:u,dimRoundingMode:c}=a,p=UI(u),d=DI(s,o.shape,i,1,l,c,!1,p),h=new LZ(d);return n.runWebGLProgram(h,[r,o],"float32")}};const jZ={kernelName:oC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o}=t,{strides:s,pad:i,dilations:l}=a,u=FI(r.shape,o.shape,s,l,i),c=new MZ(u);return n.runWebGLProgram(c,[r,o],"float32")}};const UZ={kernelName:sC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,dy:o}=t,{strides:s,pad:i,filterShape:l}=a,u=FI(r.shape,l,s,1,i),c=new zZ(u);return n.runWebGLProgram(c,[r,o],"float32")}};const GZ={kernelName:iC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,filter:o}=t,{pad:s,strides:i,inputShape:l}=a,u=FI(l,o.shape,i,1,s),c=new VZ(u);return n.runWebGLProgram(c,[r,o],"float32")}},qZ=HK({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),XZ={kernelName:lC,backendName:"webgl",kernelFunc:qZ},YZ=HK({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),KZ={kernelName:uC,backendName:"webgl",kernelFunc:YZ};class JZ{constructor(e,t,n,a,r){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,s,i,l]=e,[u]=t,[c,p]=n;this.outputShape=[u,c,p,l];const d="bilinear"===a?1:0,[h,f]=[s-1+".0",i-1+".0"],[m,g,v]=c>1?[""+(s-1)/(c-1),"(y2-y1) * height_ratio",`y1*${h} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${h}`],[b,y,w]=p>1?[""+(i-1)/(p-1),"(x2-x1) * width_ratio",`x1*${f} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${f}`];this.userCode=`\n      const float height_ratio = float(${m});\n      const float width_ratio = float(${b});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${o}) {\n          return;\n        }\n\n        float height_scale = ${g};\n        float width_scale = ${y};\n\n        float in_y = ${v};\n        if( in_y < 0.0 || in_y > ${h} ) {\n          setOutput(float(${r}));\n          return;\n        }\n        float in_x = ${w};\n        if( in_x < 0.0 || in_x > ${f} ) {\n          setOutput(float(${r}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${d} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}const ZZ={kernelName:pC,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{image:r,boxes:o,boxInd:s}=t,{cropSize:i,method:l,extrapolationValue:u}=a,c=new JZ(r.shape,o.shape,i,l,u);return n.runWebGLProgram(c,[r,o,s],"float32")}};class QZ{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}],this.outputShape=e;const a=e.length,r=t?"0.0":`getX(${eQ(a,"coords")})`,o=e[e.length-1];let s="",i="";t?(s=n?"end != "+(o-1):"end != 0",i=n?"end + 1":"end - 1"):(s=n?`end + pow2 < ${o}`:"end >= pow2",i=n?"end + pow2":"end - pow2"),this.userCode=`\n      void main() {\n        ${aY(a)} coords = getOutputCoords();\n        int end = ${tQ(a,"coords")};\n        float val = ${r};\n        int pow2 = int(pow(2.0, index));\n        if (${s}) {\n          int idx = ${i};\n          ${tQ(a,"coords")} = idx;\n          val += getX(${eQ(a,"coords")});\n        }\n        setOutput(val);\n      }\n    `}}function eQ(e,t){if(1===e)return`${t}`;if(2===e)return`${t}.x, ${t}.y`;if(3===e)return`${t}.x, ${t}.y, ${t}.z`;if(4===e)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw Error(`Cumulative sum for rank ${e} is not yet supported`)}function tQ(e,t){if(1===e)return`${t}`;if(2===e)return`${t}.y`;if(3===e)return`${t}.z`;if(4===e)return`${t}.w`;throw Error(`Cumulative sum for rank ${e} is not yet supported`)}const nQ={kernelName:cC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,exclusive:s,reverse:i}=a,l=r.shape.length,u=qN([o],l);let c=r;null!=u&&(c=uJ({inputs:{x:r},backend:n,attrs:{perm:u}}));const p=YN(1,l)[0];if(p!==l-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${r.shape.length-1} but got axis=${o}`);const d=c.shape[p];let h=MK({inputs:{x:c},backend:n});for(let e=0;e<=Math.ceil(Math.log2(d))-1;e++){const t=new QZ(c.shape,!1,i),a=[[e]],r=h;h=n.runWebGLProgram(t,[h],h.dtype,a),n.disposeIntermediateTensorInfo(r)}if(s){const e=new QZ(c.shape,s,i),t=h;h=n.runWebGLProgram(e,[h],h.dtype),n.disposeIntermediateTensorInfo(t)}if(null!=u){const e=uJ({inputs:{x:h},backend:n,attrs:{perm:XN(u)}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(c),e}return h}};const aQ={kernelName:dC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,weights:o}=t,{size:s,binaryOutput:i}=a;if(1===r.shape.length){const e=n.readSync(r.dataId),t=n.readSync(o.dataId),a=TY(e,t,o.dtype,o.shape,s);return n.makeTensorInfo([s],o.dtype,a)}if(2===r.shape.length){const e=n.bufferSync(r),t=n.bufferSync(o),a=IY(e,t,s,i);return n.makeTensorInfo(a.shape,o.dtype,a.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${r.shape.length}.`)}};class rQ{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${t};\n      int offset_h = imod(h, ${t});\n      int in_w = w / ${t};\n      int offset_w = imod(w, ${t});\n      int offset_d = (offset_h * ${t} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}const oQ={kernelName:hC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockSize:o,dataFormat:s}=a,i=r.shape[0],l=("NHWC"===s?r.shape[1]:r.shape[2])*o,u=("NHWC"===s?r.shape[2]:r.shape[3])*o,c=("NHWC"===s?r.shape[3]:r.shape[1])/(o*o),p=new rQ("NHWC"===s?[i,l,u,c]:[i,c,l,u],o,s);return n.runWebGLProgram(p,[r],r.dtype)}};class sQ{constructor(e,t=!1,n=null,a=!1,r=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=lY(this.outputShape.length);const o=e.filterHeight,s=e.filterWidth,i=e.outChannels/e.inChannels;let l="",u="";n&&(l=a?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:r?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,u="result = activation(result);");const c=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${l}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${i};\n        int q = d2 - d1 * ${i};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${o}; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${s}; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${c}\n        ${u}\n        setOutput(result);\n      }\n    `}}class iQ{constructor(e,t=!1,n=null,a=!1,r=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=lY(this.outputShape.length);const o=e.outChannels/e.inChannels,s=e.padInfo.left,i=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,p=c;let d="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let e=0;e<c;e++)d+=`\n          vec4 xTexelC${2*e};\n          int xTexelC${2*e}Ready;\n          vec4 xTexelC${2*e+1};\n          int xTexelC${2*e+1}Ready;\n          vec4 xC${e};`;d+=`\n    for (int r = 0; r < ${u}; r++) {\n      `;for(let e=0;e<c;e++)d+=`\n          xTexelC${2*e} = vec4(0.0);\n          xTexelC${2*e}Ready = 0;\n          xTexelC${2*e+1} = vec4(0.0);\n          xTexelC${2*e+1}Ready = 0;\n          xC${e} = vec4(0.0);`;d+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let e=0;e<(p+1)/2;e++){const t=2*e;if(d+=`\n          xC = xCCorner + ${t*l};\n          `,1===i){if(t<c&&(s%2==1?(d+=`\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n              `,d+=1===l&&t>0?`\n                xC${t} = vec4(xTexelC${t-2}.zw, xTexelC${t}.xy);\n                `:`\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC${t} = vec4(previous.zw, xTexelC${t}.xy);\n                  } else {\n                    xC${t} = vec4(0.0, 0.0, xTexelC${t}.xy);\n                  }\n                  `):d+=`\n                if (xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                xC${t} = xTexelC${t};\n                `,t+1<c)){const e=s%2==0?Lx(l):l;l%2==0&&s%2==1||l%2!=0&&s%2!=1?(d+=`\n                  xCOffset = xC + imod(pads[1], 2) + ${e};\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                    xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC${t+1}.zw = vec2(0.0);\n                    }\n                    xTexelC${t+1}Ready = 1;\n                  }\n                  `,l>1&&(d+=`\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                      xTexelC${t} = getX(batch, xR, xCOffset, d1);\n                      xTexelC${t}Ready = 1;\n                    }\n                    `),d+=`\n                  xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.xy);\n                  `):d+=1===e?`\n                    xC${t+1} = xTexelC${t};\n                    `:`\n                    xCOffset = xC + ${e};\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                      xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC${t+1}.zw = vec2(0.0);\n                      }\n                      xTexelC${t+1}Ready = 1;\n                    }\n\n                    xC${t+1} = xTexelC${t+1};\n                    `}}else t<c&&(s%2==1?(d+=`\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${t+1}Ready == 0) {\n                  xTexelC${t+1} = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC${t+1}.zw = vec2(0.0);\n                  }\n                  xTexelC${t+1}Ready = 1;\n                }\n\n                xC${t} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\n              `,t+1<c&&(d+=`\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC${t+1} = vec4(xTexelC${t+1}.xy, final.xy);\n                `)):(d+=`\n                if(xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                  xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t+1}.zw = vec2(0.);\n                  }\n                  xTexelC${t+1}Ready = 1;\n                }\n\n                xC${t} = vec4(\n                  xTexelC${t}.xy, xTexelC${t+1}.xy);\n              `,t+1<c&&(d+=`\n                  xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\n                `)));t<c&&(d+=`\n            wTexel = getW(r, ${t}, d1, q);\n            dotProd += xC${t} * vec4(wTexel.xz, wTexel.xz);\n          `,t+1<c&&(d+=`\n              wTexel = getW(r, ${t+1}, d1, q);\n              dotProd += xC${t+1} * vec4(wTexel.xz, wTexel.xz);\n            `))}d+="\n    }\n  ",d+="\n      }\n    ";let h="",f="";n&&(h=a?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:r?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`vec4 activation(vec4 x) {\n          ${n}\n        }`,f="result = activation(result);");const m=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),r&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${h}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${o};\n        int q = d2 - d1 * ${o};\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ${d}\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ${m}\n        ${f}\n        setOutput(result);\n      }\n    `}}const lQ={kernelName:fC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o}=t,{strides:s,pad:i,dilations:l,dimRoundingMode:u}=a;let c=l;null==c&&(c=[1,1]),Vx(jI(s,c),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${s} and dilations '${c}'`));const p=DI(r.shape,o.shape,s,c,i,u,!0);let d;d=Ck().getBool("WEBGL_PACK_DEPTHWISECONV")&&p.strideWidth<=2&&p.outChannels/p.inChannels==1?new iQ(p):new sQ(p);const h=[[p.padInfo.top,p.padInfo.left],[p.strideHeight,p.strideWidth],[p.dilationHeight,p.dilationWidth],[p.inHeight,p.inWidth]];return n.runWebGLProgram(d,[r,o],"float32",h)}};class uQ{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const t=e.strideHeight,n=e.strideWidth,a=e.padInfo.top,r=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${o} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${a};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${r};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class cQ{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const t=e.filterHeight,n=e.filterWidth,a=e.strideHeight,r=e.strideWidth,o=t-1-e.padInfo.top,s=n-1-e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${o}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${a}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${r}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${i}; dm++) {\n              int d2 = d1 * ${i} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const pQ={kernelName:mC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,dy:o}=t,{strides:s,dilations:i,pad:l,dimRoundingMode:u,filterShape:c}=a,p=DI(r.shape,c,s,i,l,u,!0),d=new uQ(p);return n.runWebGLProgram(d,[r,o],"float32")}};const dQ={kernelName:gC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,filter:o}=t,{strides:s,dilations:i,pad:l,dimRoundingMode:u,inputShape:c}=a,p=DI(c,o.shape,s,i,l,u,!0),d=new cQ(p);return n.runWebGLProgram(d,[r,o],"float32")}};class hQ{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}const fQ={kernelName:vC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t,r=[...a.shape,...a.shape],o=Ux(a.shape),s=QK({inputs:{x:a},backend:n,attrs:{shape:[o]}}),i=new hQ(o),l=n.runWebGLProgram(i,[s],s.dtype),u=QK({inputs:{x:l},backend:n,attrs:{shape:r}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),u}};class mQ{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:t,inWidth:n,padInfo:a,strideHeight:r,strideWidth:o,filterHeight:s,filterWidth:i,dilationHeight:l,dilationWidth:u}=e,{top:c,left:p}=a;this.userCode=`\n      const ivec2 strides = ivec2(${r}, ${o});\n      const ivec2 pads = ivec2(${c}, ${p});\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ${s}; h++) {\n          int hIn = hBeg + h * ${l};\n\n          if (hIn >= 0 && hIn < ${t}) {\n            for (int w = 0; w < ${i}; w++) {\n              int wIn = wBeg + w * ${u};\n\n              if (wIn >= 0 && wIn < ${n}) {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    `}}const gQ={kernelName:bC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o}=t,{strides:s,pad:i,dilations:l}=a,u=MI(r.shape,o.shape,s,i,"NHWC",l);let c;const p=new mQ(u);c=n.runWebGLProgram(p,[r,o],"float32");const d=QK({inputs:{x:c},backend:n,attrs:{shape:u.outShape}});return n.disposeIntermediateTensorInfo(c),d}};const vQ={kernelName:kC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{equation:r}=a,o=t,{allDims:s,summedDims:i,idDims:l}=BA(r,o.length);DA(s.length,l,o);const{path:u,steps:c}=FA(i,l),p=c.length;let d=null,h=s.length;const f=[];for(let e=0;e<p;++e){for(const t of c[e]){const{permutationIndices:e,expandDims:a}=PA(h,l[t]);let r;_A(e)?r=o[t]:(r=uJ({inputs:{x:o[t]},backend:n,attrs:{perm:e}}),f.push(r));const s=r.shape.slice();for(let e=0;e<a.length;++e)s.splice(a[e],0,1);Gx(r.shape,s)||(r=QK({inputs:{x:r},backend:n,attrs:{shape:s}}),f.push(r)),null===d?d=r:(d=JK({inputs:{a:r,b:d},backend:n}),f.push(d))}e<p-1&&(u[e]>=0&&(d=iJ({inputs:{x:d},backend:n,attrs:{axis:u[e]-(s.length-h),keepDims:!1}}),f.push(d)),h--)}for(const e of f)e!==d&&n.disposeIntermediateTensorInfo(e);return d}},bQ=HK({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),yQ={kernelName:CC,backendName:"webgl",kernelFunc:bQ},wQ={kernelName:EC,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n}=e,{dy:a,y:r}=t,o=Ck().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new AK("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",a.shape,r.shape):new RK("return (b >= 1.0) ? a : a * (b + 1.0);",a.shape,r.shape);return n.runWebGLProgram(o,[a,r],a.dtype)}},xQ=jK({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:RY}),kQ={kernelName:$C,backendName:"webgl",kernelFunc:xQ},CQ=HK({opSnippet:`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${bA};\n  float a1 = ${yA};\n  float a2 = ${wA};\n  float a3 = ${xA};\n  float a4 = ${kA};\n  float a5 = ${CA};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`}),EQ={kernelName:SC,backendName:"webgl",kernelFunc:CQ},SQ="return exp(x);",$Q=HK({opSnippet:SQ,packedOpSnippet:SQ,cpuKernelImpl:AY,dtype:"float32"}),TQ={kernelName:TC,backendName:"webgl",kernelFunc:$Q};function IQ(e){const{inputs:t,attrs:n,backend:a}=e,{dim:r}=n,{input:o}=t,s=o.shape.length,i=o.shape.slice();let l=r;return r<0&&(Vx(-(s+1)<=r,(()=>`Axis must be in the interval [${-(s+1)}, ${s}]`)),l=s+r+1),i.splice(l,0,1),QK({inputs:{x:o},backend:a,attrs:{shape:i}})}const NQ={kernelName:IC,backendName:"webgl",kernelFunc:IQ},OQ="return exp(x) - 1.0;",RQ=HK({opSnippet:OQ,packedOpSnippet:OQ,cpuKernelImpl:MY}),AQ={kernelName:NC,backendName:"webgl",kernelFunc:RQ};class MQ{constructor(e,t,n){this.variableNames=["real","imag"];const a=t[1];this.outputShape=t;const r=n?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=n?`${a}.0`:"1.0";let s;if("real"===e)s="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);s="return real * expI + imag * expR;"}this.userCode=`\n      const float exponentMultiplier = ${r};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${s}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${a});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${a}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${o};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}}function BQ(e,t,n){const a=n.texData.get(e.dataId),r=Ux(e.shape),o=e.shape[e.shape.length-1],s=QK({inputs:{x:e},backend:n,attrs:{shape:[r/o,o]}}),i=s.shape,l=new MQ("real",i,t),u=new MQ("imag",i,t),c=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:i},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:i}],p=n.runWebGLProgram(l,c,"float32"),d=n.runWebGLProgram(u,c,"float32"),h=PK({inputs:{real:p,imag:d},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(d);const f=QK({inputs:{x:h},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(h),f}const PQ={kernelName:OC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:a}=t;return BQ(a,!1,n)}};class DQ{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}function FQ(e){const{backend:t,attrs:n}=e,{shape:a,value:r}=n;let{dtype:o}=n;if(o=o||ik(r),"string"===o){const e=tk(o,Ux(a));return e.fill(r),t.makeTensorInfo(a,o,e)}{const e=new DQ(a,r),n=[[r]];return t.runWebGLProgram(e,[],o,n)}}const _Q={kernelName:RC,backendName:"webgl",kernelFunc:FQ};class LQ{constructor(e){this.variableNames=["Image"],this.outputShape=[];const t=e[2];this.outputShape=e,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${t} - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${t}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const zQ={kernelName:AC,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{const{image:n}=e,a=t,r=new LQ(n.shape);return a.runWebGLProgram(r,[n],n.dtype)}},VQ="return floor(x);",WQ=HK({opSnippet:VQ,packedOpSnippet:VQ,cpuKernelImpl:BY}),HQ={kernelName:MC,backendName:"webgl",kernelFunc:WQ},jQ=jK({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),UQ={kernelName:BC,backendName:"webgl",kernelFunc:jQ};class GQ{constructor(e){this.variableNames=["A"];const t=zX(),[n,a]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${a}.0, ${n}.0);\n\n        vec4 values = ${t.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}class qQ{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const t=zX(),[n,a]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${a}.0, ${n}.0);\n            vec4 values = ${t.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${t.output} = result;\n      }\n    `}}const XQ={kernelName:SS,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e;let{pixels:r}=t;const{numChannels:o}=a,s="undefined"!=typeof HTMLVideoElement&&r instanceof HTMLVideoElement,i="undefined"!=typeof HTMLImageElement&&r instanceof HTMLImageElement,[l,u]=s?[r.videoWidth,r.videoHeight]:[r.width,r.height],c=[u,l],p=[u,l,o];(i||s)&&(null==YQ&&(YQ=document.createElement("canvas").getContext("2d")),YQ.canvas.width=l,YQ.canvas.height=u,YQ.drawImage(r,0,0,l,u),r=YQ.canvas);const d=n.makeTensorInfo(c,"int32");n.texData.get(d.dataId).usage=lX.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),r);const h=Ck().getBool("WEBGL_PACK")?new qQ(p):new GQ(p),f=n.runWebGLProgram(h,[d],"int32");return n.disposeData(d.dataId),f}};let YQ;const KQ={kernelName:IS,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o,bias:s,preluActivationWeights:i}=t,{strides:l,pad:u,dataFormat:c,dilations:p,dimRoundingMode:d,activation:h,leakyreluAlpha:f}=a,m=UI(c),g=DI(r.shape,o.shape,l,p,u,d,!1,m);let v;const b=[];if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(Ck().getBool("WEBGL_CONV_IM2COL")&&1===r.shape[0])v=DZ({x:r,filter:o,convInfo:g,backend:n,bias:s,activation:h,preluActivationWeights:i,leakyreluAlpha:f});else{const e=null!=s,t=null!=i,a="leakyrelu"===h,l=h?UK(h,!1):null,u=new AZ(g,e,l,t,a),c=[r,o];if(s&&c.push(s),i&&c.push(i),a){const e=n.makeTensorInfo([],"float32",e$(f,"float32"));c.push(e),b.push(e)}v=n.runWebGLProgram(u,c,"float32")}else v=PZ({x:r,filter:o,convInfo:g,backend:n,bias:s,activation:h,preluActivationWeights:i,leakyreluAlpha:f});const y=QK({inputs:{x:v},backend:n,attrs:{shape:g.outShape}});return b.push(v),b.forEach((e=>n.disposeIntermediateTensorInfo(e))),y}};const JQ={kernelName:NS,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,filter:o,bias:s,preluActivationWeights:i}=t,{strides:l,pad:u,dilations:c,dimRoundingMode:p,activation:d,leakyreluAlpha:h}=a,f=[];let m=c;null==m&&(m=[1,1]),Vx(jI(l,m),(()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`));const g=DI(r.shape,o.shape,l,m,u,p,!0),v=Ck().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels==1,b=d?UK(d,v):null,y=[r,o],w=null!=s,x=null!=i,k="leakyrelu"===d;if(w&&y.push(s),x&&y.push(i),k){const e=n.makeTensorInfo([],"float32",e$(h,"float32"));y.push(e),f.push(e)}let C;C=v?new iQ(g,w,b,x,k):new sQ(g,w,b,x,k);const E=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],S=n.runWebGLProgram(C,y,"float32",E);return f.forEach((e=>n.disposeIntermediateTensorInfo(e))),S}};class ZQ{constructor(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;const a=aY(t.length),r=aY(n.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode=`\n        ${a} strides = ${a}(${this.strides});\n         void main() {\n          ${r} coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ${this.sliceDim}; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ${o};\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      `}}const QQ={kernelName:FC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{params:a,indices:r}=t,o=r.shape,s=o[o.length-1],i=Ux(a.shape),[l,u,c,p]=dA(a,r),d=QK({inputs:{x:r},backend:n,attrs:{shape:[u,s]}}),h=QK({inputs:{x:a},backend:n,attrs:{shape:[Ux(a.shape)/c,c]}});if(n.shouldExecuteOnCPU([a,r])||"string"===a.dtype){const e=n.readSync(r.dataId),t=n.bufferSync(a),o=PY(e,t,a.dtype,u,s,c,p,a.shape,i);return n.makeTensorInfo(l,a.dtype,o.values)}const f=new ZQ(s,p,[u,c]),m=n.runWebGLProgram(f,[h,d],h.dtype),g=QK({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}};class e0{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;const n=aY(this.rank),a=function(e,t){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[];for(let t=0;t<e.length;t++)2===t?a.push("int(getIndices(resRC.x, resRC.z))"):a.push(`${n[t]}`);return a.join()}(e);this.userCode=`\n      void main() {\n        ${n} resRC = getOutputCoords();\n        setOutput(getA(${a}));\n      }\n    `}}function t0(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,indices:o}=t,{axis:s,batchDims:i}=a,l=Zx(s,r.shape)[0],u=n.readSync(o.dataId),c=r.shape[l];for(let e=0;e<u.length;++e){const t=u[e];Vx(t<=c-1&&t>=0,(()=>`GatherV2: the index value ${t} is not in [0, ${c-1}]`))}const p=tM(r,o,l,i),d=Ux(o.shape),h=[],f=QK({inputs:{x:r},backend:n,attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]}}),m=QK({inputs:{x:o},backend:n,attrs:{shape:[p.batchSize,d/p.batchSize]}});h.push(f),h.push(m);const g=[p.batchSize,p.outerSize,d/p.batchSize,p.sliceSize];if(n.shouldExecuteOnCPU([r,o])||"string"===r.dtype){const e=n.bufferSync(m),t=n.bufferSync(f),a=DY(t,e,g);return h.forEach((e=>n.disposeIntermediateTensorInfo(e))),n.makeTensorInfo(p.outputShape,a.dtype,a.values)}const v=new e0(f.shape,g),b=n.runWebGLProgram(v,[f,m],f.dtype);h.push(b);const y=QK({inputs:{x:b},backend:n,attrs:{shape:p.outputShape}});return h.forEach((e=>n.disposeIntermediateTensorInfo(e))),y}const n0={kernelName:DC,backendName:"webgl",kernelFunc:t0},a0=jK({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:FY,dtype:"bool"}),r0={kernelName:_C,backendName:"webgl",kernelFunc:a0},o0=jK({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:_Y}),s0={kernelName:LC,backendName:"webgl",kernelFunc:o0};const i0={kernelName:VC,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{input:a}=t;return BQ(a,!0,n)}},l0=HK({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),u0={kernelName:HC,backendName:"webgl",kernelFunc:l0},c0=HK({opSnippet:"return float(isinf(x));",dtype:"bool"}),p0={kernelName:jC,backendName:"webgl",kernelFunc:c0},d0=HK({opSnippet:"return float(isnan(x));",dtype:"bool"}),h0={kernelName:UC,backendName:"webgl",kernelFunc:d0},f0=jK({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:LY,dtype:"bool"}),m0={kernelName:qC,backendName:"webgl",kernelFunc:f0},g0=jK({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:zY,dtype:"bool"}),v0={kernelName:XC,backendName:"webgl",kernelFunc:g0};const b0={kernelName:YC,backendName:"webgl",kernelFunc:function(e){const{backend:t,attrs:n}=e,{start:a,stop:r,num:o}=n,s=VY(a,r,o);return t.makeTensorInfo([s.length],"float32",s)}},y0=HK({opSnippet:"if (x < 0.0) return NAN;\n  return log(x);",packedOpSnippet:"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:WY}),w0={kernelName:KC,backendName:"webgl",kernelFunc:y0},x0=HK({opSnippet:"return log(1.0 + x);"}),k0={kernelName:JC,backendName:"webgl",kernelFunc:x0},C0=jK({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),E0={kernelName:ZC,backendName:"webgl",kernelFunc:C0},S0=HK({opSnippet:"return float(!(x >= 1.0));"}),$0={kernelName:QC,backendName:"webgl",kernelFunc:S0},T0=jK({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),I0={kernelName:eE,backendName:"webgl",kernelFunc:T0};class N0{constructor(e,t,n,a,r){this.variableNames=["x"],this.outputShape=[];const o=t,s=e[3]-1;let i;this.outputShape=e;const l=`float(${n}) + float(${a}) * sum`;i=.5===r?`inversesqrt(${l})`:1===r?`1.0/(${l})`:`exp(log(${l}) * float(-${r}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${o}; j <= ${o}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${s}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${i};\n        setOutput(val);\n      }\n    `}}class O0{constructor(e,t,n,a,r){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=t,s=e[3]-1;let i;this.outputShape=e;const l=`float(${n}) + float(${a}) * sum`;i=.5===r?`inversesqrt(${l})`:1===r?`1.0/(${l})`:`exp(log(${l}) * float(-${r}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${o};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${o}; j <= ${o}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${s}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${i};\n        setOutput(result);\n      }\n    `}}const R0={kernelName:tE,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{depthRadius:o,bias:s,alpha:i,beta:l}=a,u=Ck().getBool("WEBGL_PACK_NORMALIZATION")?new O0(r.shape,o,s,i,l):new N0(r.shape,o,s,i,l);return n.runWebGLProgram(u,[r],r.dtype)}};class A0{constructor(e,t,n,a,r){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=a,this.beta=r,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${t})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${t} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${a}) * norm + float(${n});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${a})\n                * float(${r})\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${r});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}const M0={kernelName:nE,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{x:r,y:o,dy:s}=t,{depthRadius:i,bias:l,alpha:u,beta:c}=a,p=new A0(r.shape,i,l,u,c);return n.runWebGLProgram(p,[r,o,s],r.dtype)}};function B0(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{reductionIndices:o,keepDims:s}=a,i=r.shape.length,l=Zx(o,r.shape);let u=l;const c=qN(u,i),p=null!=c,d=n.shouldExecuteOnCPU([r]);let h=r;if(p){if(d){const e=n.texData.get(h.dataId).values,t=new Array(i);for(let e=0;e<t.length;e++)t[e]=r.shape[c[e]];const a=dK(e,r.shape,r.dtype,c,t);h=n.makeTensorInfo(t,r.dtype);n.texData.get(h.dataId).values=a}else h=sJ(r,c,n);u=YN(u.length,i)}GN("max",u,i);const[f,m]=jN(h.shape,u);let g,v=f;if(s&&(v=UN(f,l)),d){const e=n.texData.get(h.dataId).values,t=HY(e,Ux(m),v,r.dtype);g=n.makeTensorInfo(v,r.dtype);n.texData.get(g.dataId).values=t}else g=function(e,t,n,a){const r=Ux(t),o=QK({inputs:{x:e},attrs:{shape:[Ux(e.shape)/r,r]},backend:a}),s=aJ(o,e.dtype,"max",a),i=QK({inputs:{x:s},attrs:{shape:n},backend:a});return a.disposeIntermediateTensorInfo(o),a.disposeIntermediateTensorInfo(s),i}(h,m,v,n);return p&&n.disposeIntermediateTensorInfo(h),g}const P0={kernelName:aE,backendName:"webgl",kernelFunc:B0},D0=jK({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:jY}),F0={kernelName:rE,backendName:"webgl",kernelFunc:D0};const _0={kernelName:oE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t;_X(r,"maxPool");const{filterSize:o,strides:s,pad:i,dimRoundingMode:l}=a;Vx(jI(s,1),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${s} and dilations '1'`));const u=BI(r.shape,o,s,1,i,l);if(1===u.filterWidth&&1===u.filterHeight&&Gx(u.inShape,u.outShape))return MK({inputs:{x:r},backend:n});const c=new jJ(u,"max",!1);return n.runWebGLProgram(c,[r],r.dtype)}};const L0={kernelName:iE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{filterSize:o,strides:s,pad:i,dataFormat:l,dimRoundingMode:u}=a,c=PI(r.shape,o,s,[1,1,1],i,u,l),p=new UJ(c,"max",!1);return n.runWebGLProgram(p,[r],r.dtype)}};class z0{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideHeight,n=e.strideWidth,a=e.dilationHeight,r=e.effectiveFilterHeight,o=e.effectiveFilterWidth,s=r-1-e.padInfo.top,i=o-1-e.padInfo.left,l=r*o-1;this.userCode=`\n      const ivec2 pads = ivec2(${s}, ${i});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${r};\n          wR += ${a}) {\n          float dyR = float(dyRCorner + wR) / ${t}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${o}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${n}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${l} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${o} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}class V0{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const t=e.strideDepth,n=e.strideHeight,a=e.strideWidth,r=e.dilationDepth,o=e.dilationHeight,s=e.dilationWidth,i=e.effectiveFilterDepth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=i-1-e.padInfo.front,p=l-1-e.padInfo.top,d=u-1-e.padInfo.left,h=i*l*u-1;this.userCode=`\n      const ivec3 pads = ivec3(${c}, ${p}, ${d});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${i};\n           wD += ${r}) {\n          float dyD = float(dyDCorner + wD) / ${t}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${l};\n              wR += ${o}) {\n            float dyR = float(dyRCorner + wR) / ${n}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${u};\n                wC += ${s}) {\n              float dyC = float(dyCCorner + wC) / ${a}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${h} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${l} * ${u} +\n                  wR * ${u} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}const W0={kernelName:lE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o}=t,s=o,{filterSize:i,strides:l,pad:u,dimRoundingMode:c}=a,p=PI(s.shape,i,l,[1,1,1],u,c),d=new UJ(p,"max",!0),h=n.runWebGLProgram(d,[s],s.dtype),f=new V0(p),m=n.runWebGLProgram(f,[r,h],s.dtype);return n.disposeIntermediateTensorInfo(h),m}};const H0={kernelName:sE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{dy:r,input:o,output:s}=t,i=o;_X([o,s],"maxPoolGrad");const{filterSize:l,strides:u,pad:c,dimRoundingMode:p}=a,d=BI(i.shape,l,u,1,c,p),h=new jJ(d,"max",!0),f=n.runWebGLProgram(h,[i],i.dtype),m=new z0(d),g=n.runWebGLProgram(m,[r,f],i.dtype);return n.disposeIntermediateTensorInfo(f),g}};const j0={kernelName:uE,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:a}=e,{filterSize:r,strides:o,pad:s,includeBatchInIndex:i}=t,l=n;Vx(4===a.shape.length,(()=>`Error in maxPool: input must be rank 4 but got rank ${a.shape.length}.`));const u=[1,1];Vx(jI(o,u),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`));const c=BI(a.shape,r,o,u,s),[p,d]=function(e,t,n,a){let r=new jJ(n,"max",!1);const o=a.runWebGLProgram(r,[e],"float32");return r=new jJ(n,"max",!0,!0,t),[o,a.runWebGLProgram(r,[e],"float32")]}(a,i,c,l);return[p,d]}};const U0={kernelName:cE,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{x:a}=e,{keepDims:r,axis:o}=t,s=n,i=a.shape.length,l=Zx(o,a.shape);let u=l;const c=qN(u,i),p=null!=c,d=s.shouldExecuteOnCPU([a]),h=[];let f=a;if(p){if(d){const e=s.texData.get(f.dataId).values,t=new Array(i);for(let e=0;e<t.length;e++)t[e]=a.shape[c[e]];const n=dK(e,a.shape,a.dtype,c,t);f=s.makeTensorInfo(t,a.dtype);s.texData.get(f.dataId).values=n}else f=sJ(a,c,s);h.push(f),u=YN(u.length,i)}GN("sum",u,i);const[m,g]=jN(f.shape,u);let v=m;r&&(v=UN(m,l));const b=function(e,t,n,a){const r=Ux(t),o=QK({inputs:{x:e},attrs:{shape:[Ux(e.shape)/r,r]},backend:a}),s=aJ(o,"float32","mean",a),i=QK({inputs:{x:s},attrs:{shape:n},backend:a});return a.disposeIntermediateTensorInfo(o),a.disposeIntermediateTensorInfo(s),i}(f,g,v,s);for(const e of h)s.disposeIntermediateTensorInfo(e);return b}};const G0={kernelName:pE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:s}=a,i=r.shape.length,l=Zx(o,r.shape);let u=l;const c=qN(u,i);let p=r;null!=c&&(p=uJ({inputs:{x:r},backend:n,attrs:{perm:c}}),u=YN(u.length,r.shape.length)),GN("min",u,i);const[d,h]=jN(p.shape,u),f=QK({inputs:{x:p},backend:n,attrs:{shape:[-1,Ux(h)]}}),m=aJ(f,f.dtype,"min",n);let g;if(s){g=QK({inputs:{x:m},backend:n,attrs:{shape:UN(d,l)}})}else g=QK({inputs:{x:m},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),null!=c&&n.disposeIntermediateTensorInfo(p),g}},q0=jK({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:UY}),X0={kernelName:dE,backendName:"webgl",kernelFunc:q0};class Y0{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const a=e.length,r=aY(a),o=t.map((e=>e[0])).join(","),s=t.map(((t,n)=>t[0]+e[n])).join(","),i=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),l="reflect"===n?0:1;this.userCode=1!==a?`\n      ${r} start = ${r}(${o});\n      ${r} end = ${r}(${s});\n\n      void main() {\n        ${r} outC = getOutputCoords();\n        for (int i = 0; i < ${a}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${l};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${l};\n          }\n        }\n        ${r} coords = outC - start;\n        setOutput(getX(${i}));\n      }\n    `:`\n        int start = ${o};\n        int end = ${s};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${l};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${l};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}class K0{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const a=e.length,r=aY(a),o=t.map((e=>e[0])).join(","),s=t.map(((t,n)=>t[0]+e[n])).join(","),i=mK("rc",a),l=mK("source",a),u=`${i[a-1]} < ${this.outputShape[a-1]}`,c=1===a?"source":`vec2(${l.slice(-2).join()})`,p="reflect"===n?0:1;let d="";if(1===a){const e=`\n        ${r} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${p};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${p};\n        }\n        source -= start;\n      `;d=`\n        ${r} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${l.join()}), ${c});\n        ${i[a-1]} += 1;\n        if(${u}) {\n          ${e}\n          result[1] = getChannel(getX(${l.join()}), ${c});\n        }\n      `}else{const e=`\n        ${r} source = rc;\n        ${r} lt = ${r}(lessThan(source, start));\n        ${r} gte = ${r}(greaterThanEqual(source, end));\n        ${r} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${p}) +\n                gte * ((end - 1) * 2 - source + ${p});\n        source -= start;\n      `;d=`\n        ${r} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${l.join()}), ${c});\n        ${i[a-1]} += 1;\n        if(${u}) {\n          ${e}\n          result[1] = getChannel(getX(${l.join()}), ${c});\n        }\n        rc = outputLoc;\n        ${i[a-2]} += 1;\n        if(${i[a-2]} < ${this.outputShape[a-2]}) {\n          ${e}\n          result[2] = getChannel(getX(${l.join()}), ${c});\n          ${i[a-1]} += 1;\n          if(${u}) {\n            ${e}\n            result[3] = getChannel(getX(${l.join()}), ${c});\n          }\n        }\n      `}this.userCode=`\n      const ${r} start = ${r}(${o});\n      const ${r} end = ${r}(${s});\n\n      void main() {\n        ${r} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${d}\n        setOutput(result);\n      }\n    `}}const J0={kernelName:hE,backendName:"webgl",kernelFunc:({inputs:e,backend:t,attrs:n})=>{const{x:a}=e,{paddings:r,mode:o}=n,s=Ck().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new K0(a.shape,r,o):new Y0(a.shape,r,o);return t.runWebGLProgram(s,[a],a.dtype)}},Z0=jK({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),Q0={kernelName:fE,backendName:"webgl",kernelFunc:Z0};class e1{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${t-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${t-1}));\n      }\n    `}}const t1=jK({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),n1={kernelName:xC,backendName:"webgl",kernelFunc:t1},a1="return a - b;",r1=jK({opSnippet:a1,packedOpSnippet:a1,supportsComplex:!0,cpuKernelImpl:uK}),o1={kernelName:hS,backendName:"webgl",kernelFunc:r1};function s1(e){const{inputs:t,backend:n,attrs:a}=e,{logits:r}=t,{dim:o}=a,s=Zx([o],r.shape),i=B0({inputs:{x:r},backend:n,attrs:{reductionIndices:s,keepDims:!1}}),l=UN(i.shape,s),u=QK({inputs:{x:i},backend:n,attrs:{shape:l}}),c=r1({inputs:{a:r,b:u},backend:n}),p=$Q({inputs:{x:c},backend:n}),d=iJ({inputs:{x:p},backend:n,attrs:{axis:s,keepDims:!1}}),h=QK({inputs:{x:d},backend:n,attrs:{shape:l}}),f=t1({inputs:{a:p,b:h},backend:n});return n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),f}const i1={kernelName:tS,backendName:"webgl",kernelFunc:s1};const l1={kernelName:mE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{logits:r}=t,{numSamples:o,seed:s,normalized:i}=a,l=i?r:s1({inputs:{logits:r},backend:n,attrs:{dim:r.shape.length-1}}),u=l.shape[0],c=l.shape[1],p=new e1(u,c,o),d=[[s]],h=n.runWebGLProgram(p,[l],"int32",d);return i||n.disposeIntermediateTensorInfo(l),h}},u1="return -x;";const c1={kernelName:vE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{x:a}=t;if(n.shouldExecuteOnCPU([a])){const e=n.texData.get(a.dataId),[t,r]=qY(e.values,a.shape,a.dtype);return n.makeTensorInfo(r,a.dtype,t)}let r;return r=Ck().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new SK(a.shape,u1):new kK(a.shape,u1),n.runWebGLProgram(r,[a],a.dtype)}},p1=pR;const d1={kernelName:yE,backendName:"webgl",kernelFunc:function(e){OS("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:a}=e,{boxes:r,scores:o}=t,{maxOutputSize:s,iouThreshold:i,scoreThreshold:l}=a,u=n.readSync(r.dataId),c=n.readSync(o.dataId),{selectedIndices:p}=p1(u,c,s,i,l);return n.makeTensorInfo([p.length],"int32",new Int32Array(p))}},h1=dR;const f1={kernelName:wE,backendName:"webgl",kernelFunc:function(e){OS("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:a}=e,{boxes:r,scores:o}=t,{maxOutputSize:s,iouThreshold:i,scoreThreshold:l,padToMaxOutputSize:u}=a,c=n.readSync(r.dataId),p=n.readSync(o.dataId),{selectedIndices:d,validOutputs:h}=h1(c,p,s,i,l,u);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},m1=hR;const g1={kernelName:xE,backendName:"webgl",kernelFunc:function(e){OS("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:t,backend:n,attrs:a}=e,{boxes:r,scores:o}=t,{maxOutputSize:s,iouThreshold:i,scoreThreshold:l,softNmsSigma:u}=a,c=n.readSync(r.dataId),p=n.readSync(o.dataId),d=s,h=i,f=l,m=u,{selectedIndices:g,selectedScores:v}=m1(c,p,d,h,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([v.length],"float32",new Float32Array(v))]}};class v1{constructor(e,t,n,a){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${a}), float(${n}),\n                      float(index == coords.y)));\n      }\n    `}}const b1={kernelName:CE,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{indices:r}=t,{depth:o,onValue:s,offValue:i}=a,l=Ux(r.shape),u=new v1(l,o,s,i),c=QK({inputs:{x:r},backend:n,attrs:{shape:[l]}}),p=n.runWebGLProgram(u,[c],r.dtype);n.disposeIntermediateTensorInfo(c);const d=QK({inputs:{x:p},backend:n,attrs:{shape:[...r.shape,o]}});return n.disposeIntermediateTensorInfo(p),d}};function y1(e){const{inputs:t,backend:n}=e,{x:a}=t;if("complex64"===a.dtype){const e=dZ({inputs:{input:a},backend:n}),t=y1({inputs:{x:e},backend:n}),r=TZ({inputs:{input:a},backend:n}),o=y1({inputs:{x:r},backend:n}),s=PK({inputs:{real:t,imag:o},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(o),s}return FQ({attrs:{shape:a.shape,dtype:a.dtype,value:"string"===a.dtype?"":0},backend:n})}const w1={kernelName:CS,backendName:"webgl",kernelFunc:y1};const x1={kernelName:kE,backendName:"webgl",kernelFunc:function e(t){const{inputs:n,backend:a}=t,{x:r}=n;if("string"===r.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===r.dtype){const t=dZ({inputs:{input:r},backend:a}),n=e({inputs:{x:t},backend:a}),o=TZ({inputs:{input:r},backend:a}),s=y1({inputs:{x:o},backend:a}),i=PK({inputs:{real:n,imag:s},backend:a});return a.disposeIntermediateTensorInfo(t),a.disposeIntermediateTensorInfo(n),a.disposeIntermediateTensorInfo(o),a.disposeIntermediateTensorInfo(s),i}return FQ({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:a})}};const k1={kernelName:EE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{axis:r}=a;if(1===t.length)return IQ({inputs:{input:t[0]},backend:n,attrs:{dim:r}});const o=t[0].shape,s=t[0].dtype;t.forEach((e=>{Wx(o,e.shape,"All tensors passed to stack must have matching shapes"),Vx(s===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const i=[],l=OZ({inputs:t.map((e=>{const t=IQ({inputs:{input:e},backend:n,attrs:{dim:r}});return i.push(t),t})),backend:n,attrs:{axis:r}});return i.forEach((e=>n.disposeIntermediateTensorInfo(e))),l}};class C1{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const a=e.length,r=aY(a),o=t.map((e=>e[0])).join(","),s=t.map(((t,n)=>t[0]+e[n])).join(","),i=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?`\n      ${r} start = ${r}(${o});\n      ${r} end = ${r}(${s});\n\n      void main() {\n        ${r} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ${r} coords = outC - start;\n          setOutput(getX(${i}));\n        }\n      }\n    `:`\n        int start = ${o};\n        int end = ${s};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}class E1{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map(((t,n)=>t[0]+e[n]+t[1]));const a=e.length,r=aY(a),o=t.map((e=>e[0])).join(","),s=t.map(((t,n)=>t[0]+e[n])).join(","),i=mK("rc",a),l=mK("source",a),u=`${i[a-1]} < ${this.outputShape[a-1]}`,c=1===a?"source":`vec2(${l.slice(-2).join()})`,p=[`${r} rc = outputLoc;`,`${i[a-1]} += 1;\n       if(${u}) {\n      `,1===a?"":`}\n       rc = outputLoc;\n       ${i[a-2]} += 1;\n       if(${i[a-2]} < ${this.outputShape[a-2]}) {`,1===a?"":`  ${i[a-1]} += 1;\n         if(${u}) {`],d=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let h="";for(let e=0,t=1===a?2:4;e<t;e++)h+=`\n        ${p[e]}\n        if (${d}) {\n          result[${e}] = float(value);\n        } else {\n          ${r} source = rc - start;\n          result[${e}] = getChannel(getX(${l.join()}), ${c});\n        }\n      `;h+=1===a?"} ":"}}",this.userCode=`\n      const ${r} start = ${r}(${o});\n      const ${r} end = ${r}(${s});\n\n      void main() {\n        ${r} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${h}\n        setOutput(result);\n      }\n    `}}const S1=e=>{const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{paddings:o,constantValue:s}=a;if(0===Ux(r.shape)){const e=o.map(((e,t)=>e[0]+r.shape[t]+e[1]));return FQ({backend:n,attrs:{shape:e,value:s,dtype:r.dtype}})}const i=Ck().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new E1(r.shape,o,s):new C1(r.shape,o,s),l=[[s]];return n.runWebGLProgram(i,[r],r.dtype,l)},$1={kernelName:SE,backendName:"webgl",kernelFunc:S1},T1=jK({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),I1={kernelName:$E,backendName:"webgl",kernelFunc:T1};const N1={kernelName:IE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{axis:o,keepDims:s}=a,i=r.shape.length,l=[],u=Zx(o,r.shape);let c=u;const p=qN(c,i);let d,h=r;if(null!=p&&(h=uJ({inputs:{x:r},backend:n,attrs:{perm:p}}),c=YN(c.length,i),l.push(h)),GN("prod",c,i),n.shouldExecuteOnCPU([h])){const e=n.texData.get(h.dataId).values,{outVals:t,outShape:a,outDtype:r}=YY(h.shape,h.dtype,e,c);d=n.makeTensorInfo(a,r,t)}else{const[e,t]=jN(h.shape,c),a=Ux(t),o=QK({inputs:{x:h},backend:n,attrs:{shape:[-1,a]}}),s=aJ(o,T$(r.dtype),"prod",n);d=QK({inputs:{x:s},backend:n,attrs:{shape:e}}),l.push(o),l.push(s)}if(s){l.push(d);const e=UN(d.shape,u);d=QK({inputs:{x:d},backend:n,attrs:{shape:e}})}return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),d}},O1=e=>{const{backend:t,attrs:n}=e,{start:a,stop:r,step:o,dtype:s}=n,i=KY(a,r,o,s);return t.makeTensorInfo([i.length],s,i)},R1={kernelName:NE,backendName:"webgl",kernelFunc:O1},A1=HK({opSnippet:"return 1.0 / x;"}),M1={kernelName:RE,backendName:"webgl",kernelFunc:A1},B1=HK({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),P1={kernelName:AE,backendName:"webgl",kernelFunc:B1},D1=HK({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),F1={kernelName:_E,backendName:"webgl",kernelFunc:D1};class _1{constructor(e,t,n,a,r){this.variableNames=["A"],this.outputShape=[];const[o,s,i,l]=e;this.outputShape=[o,t,n,l];const u=[a&&t>1?s-1:s,a&&n>1?i-1:i],c=[a&&t>1?t-1:t,a&&n>1?n-1:n];let p;p=r?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]});\n      const vec2 inputShapeRC = vec2(${s}.0, ${i}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${p};\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}class L1{constructor(e,t,n,a,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,i,l]=e;this.outputShape=[o,t,n,l];const u=[a&&t>1?s-1:s,a&&n>1?i-1:i],c=[a&&t>1?t-1:t,a&&n>1?n-1:n];let p;p=r?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]},\n          ${u[1]/c[1]});\n      const vec3 inputShapeRC = vec3(${s}.0, ${i}.0,\n                                     ${i}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${p};\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}const z1={kernelName:DE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r}=t,{alignCorners:o,halfPixelCenters:s,size:i}=a,[l,u]=i,c=Ck().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new L1(r.shape,l,u,o,s):new _1(r.shape,l,u,o,s);return n.runWebGLProgram(c,[r],"float32")}};class V1{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,a,r]=t,[,o,s]=e,i=[n&&o>1?a-1:a,n&&s>1?r-1:r],l=[n&&o>1?o-1:o,n&&s>1?s-1:s],u=i[0]/l[0],c=i[1]/l[1],p=1/u,d=1/c,h=2*Math.ceil(p)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${c});\n\n        const float invHeightScale = float(${p});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${h});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${o}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${s}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${a-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${r-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const W1={kernelName:FE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r,dy:o}=t,{alignCorners:s}=a,i=new V1(o.shape,r.shape,s);return n.runWebGLProgram(i,[o],o.dtype)}};class H1{constructor(e,t,n,a,r){this.variableNames=["A"],this.outputShape=[];const[o,s,i,l]=e;this.outputShape=[o,t,n,l];const u=[a&&t>1?s-1:s,a&&n>1?i-1:i],c=[a&&t>1?t-1:t,a&&n>1?n-1:n],p=a?"0.5":"0.0";let d;d=r?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]});\n      const vec2 inputShapeRC = vec2(${s}.0, ${i}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${d};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}class j1{constructor(e,t,n,a,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,s,i,l]=e;this.outputShape=[o,t,n,l];const u=[a&&t>1?s-1:s,a&&n>1?i-1:i],c=[a&&t>1?t-1:t,a&&n>1?n-1:n],p=a?"0.5":"0.0";let d;d=r?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${u[0]/c[0]},\n          ${u[1]/c[1]},\n          ${u[1]/c[1]});\n      const vec3 inputShapeRC = vec3(${s}.0, ${i}.0,\n                                     ${i}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${d};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${p})));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    `}}const U1={kernelName:BE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r}=t,{alignCorners:o,halfPixelCenters:s,size:i}=a,[l,u]=i,c=Ck().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new j1(r.shape,l,u,o,s):new H1(r.shape,l,u,o,s);return n.runWebGLProgram(c,[r],r.dtype)}};class G1{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;const[,a,r]=t,[,o,s]=e,i=[n&&o>1?a-1:a,n&&s>1?r-1:r],l=[n&&o>1?o-1:o,n&&s>1?s-1:s],u=i[0]/l[0],c=i[1]/l[1],p=1/u,d=1/c,h=2*Math.ceil(p)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${c});\n\n        const float invHeightScale = float(${p});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${h});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${o}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${s}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${i[0]}) *\n                (float(dyR) / float(${l[0]}));\n\n            float sourceFracCol =\n                float(${i[1]}) *\n                  (float(dyC) / float(${l[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${a}) - 1),\n                ${n} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${r}) - 1),\n                ${n} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}const q1={kernelName:PE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{images:r,dy:o}=t,{alignCorners:s}=a,i=new G1(o.shape,r.shape,s);return n.runWebGLProgram(i,[o],o.dtype)}};class X1{constructor(e,t){this.variableNames=["x"];const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=e,1===n)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${e[0]} - coord - 1));\n        }\n      `);const a=e.map(((n,a)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - coords[${n}] - 1`:`coords[${n}]`)(a))).join(","),r=aY(n);this.userCode=`\n      void main() {\n        ${r} coords = getOutputCoords();\n        setOutput(getX(${a}));\n      }\n    `}}class Y1{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);this.outputShape=e;const a=mK("rc",n),r=`${a[n-1]} + 1 < ${this.outputShape[n-1]}`,o=`${a[n-2]} + 1 < ${this.outputShape[n-2]}`,s=aY(n);function i(n){const a=e.map(((a,r)=>function(n,a){return-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - ${a[n]} - 1`:`${a[n]}`}(r,n)));return`getChannel(getX(${a.join(",")}), vec2(${a.slice(-2).join(",")}))`}this.userCode=1===n?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${e[0]} - rc - 1),\n            ${e[0]} - rc - 1);\n          if(${r}){\n              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),\n                ${e[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${s} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${function(e){return i(e)}(a.slice())};\n          if(${r}){\n            result.g = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",i(e)}(a.slice())};\n          }\n          if(${o}) {\n            result.b = ${function(e){return e[n-2]="("+e[n-2]+" + 1)",i(e)}(a.slice())};\n            if(${r}) {\n              result.a = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",i(e)}(a.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}const K1={kernelName:LE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{dims:o}=a,s=r.shape.length,i=Zx(o,r.shape);if(0===s)return MK({inputs:{x:r},backend:n});const l=Ck().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Y1(r.shape,i):new X1(r.shape,i);return n.runWebGLProgram(l,[r],r.dtype)}};class J1{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const n=e[1],a=e[2];this.outputShape=e;let r="";r="number"==typeof t?`float outputValue = ${t.toFixed(2)};`:`\n        vec3 fill = vec3(${t.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ${r}\n          if(coordX >= 0 && coordX < ${a} && coordY >= 0 && coordY < ${n}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}const Z1={kernelName:$S,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{const{image:a}=e,{radians:r,fillValue:o,center:s}=t,i=n,l=new J1(a.shape,o),[u,c]=sA(s,a.shape[1],a.shape[2]),p=[[u,c,Math.sin(r),Math.cos(r)]];return i.runWebGLProgram(l,[a],a.dtype,p)}},Q1=HK({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),e2={kernelName:zE,backendName:"webgl",kernelFunc:Q1},t2=HK({opSnippet:"return inversesqrt(x);",cpuKernelImpl:JY}),n2={kernelName:VE,backendName:"webgl",kernelFunc:t2};class a2{constructor(e,t,n,a,r,o,s=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const i=aY(r.length),l=aY(o.length);let u="";1===n?u="i":2===n&&(u="i, j");const c=`getIndices(${u})`;let p="";1===a?p="i":2===a&&(p="i, coords[1]");const d=`getUpdates(${p})`,h=t>1?"strides[j]":"strides";this.userCode=`\n        ${i} strides = ${i}(${r});\n\n        void main() {\n          ${l} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${e}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${t}; j++) {\n              int index = round(${c});\n              flattenedIndex += index * ${h};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ${d};\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      `}}const r2={kernelName:WE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{indices:r,updates:o}=t,{shape:s}=a,{sliceRank:i,numUpdates:l,sliceSize:u,strides:c,outputSize:p}=mA(0,r,s),d=[p/u,u];if(0===p)return n.makeTensorInfo(s,r.dtype);const h=QK({inputs:{x:r},backend:n,attrs:{shape:[l,i]}}),f=QK({inputs:{x:o},backend:n,attrs:{shape:[l,u]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0])),g=new a2(l,i,h.shape.length,f.shape.length,c,d),v=n.runWebGLProgram(g,[f,h,m],f.dtype),b=QK({inputs:{x:v},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(m),b}};class o2{constructor(e,t,n){let a,r;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error(`Where for rank ${n} is not yet supported`);if(1===n)r="resRC",a="resRC";else{const n=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],s=[];for(let a=0;a<t.length;a++)s.push(`${n[a]}`),a<e&&o.push(`${n[a]}`);a=o.join(),r=s.join()}const o=aY(n);this.userCode=`\n      void main() {\n        ${o} resRC = getOutputCoords();\n        float cVal = getC(${a});\n        if (cVal >= 1.0) {\n          setOutput(getA(${r}));\n        } else {\n          setOutput(getB(${r}));\n        }\n      }\n    `}}const s2={kernelName:HE,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{condition:a,t:r,e:o}=t,s=new o2(a.shape.length,r.shape,r.shape.length);return n.runWebGLProgram(s,[a,r,o],$$(r.dtype,o.dtype))}},i2=HK({opSnippet:`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${gA};\n  float scale = ${vA};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`}),l2={kernelName:jE,backendName:"webgl",kernelFunc:i2},u2="return 1.0 / (1.0 + exp(-1.0 * x));",c2=HK({opSnippet:u2,packedOpSnippet:u2,cpuKernelImpl:ZY}),p2={kernelName:YE,backendName:"webgl",kernelFunc:c2},d2=HK({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),h2={kernelName:XE,backendName:"webgl",kernelFunc:d2},f2=HK({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),m2={kernelName:GE,backendName:"webgl",kernelFunc:f2},g2=HK({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),v2={kernelName:qE,backendName:"webgl",kernelFunc:g2},b2=HK({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),y2={kernelName:KE,backendName:"webgl",kernelFunc:b2},w2={kernelName:QE,backendName:"webgl",kernelFunc:e=>{const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{blockShape:o,paddings:s}=a;Vx(r.shape.length<=4,(()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"));const i=o.reduce(((e,t)=>e*t)),l=[[0,0]];l.push(...s);for(let e=1+o.length;e<r.shape.length;++e)l.push([0,0]);const u=[],c=S1({inputs:{x:r},backend:n,attrs:{paddings:l,constantValue:0}}),p=iA(c.shape,o,i,!1),d=lA(p.length,o.length,!1),h=uA(c.shape,o,i,!1),f=QK({inputs:{x:c},backend:n,attrs:{shape:p}}),m=uJ({inputs:{x:f},backend:n,attrs:{perm:d}}),g=QK({inputs:{x:m},backend:n,attrs:{shape:h}});return u.push(c),u.push(f),u.push(m),u.forEach((e=>n.disposeIntermediateTensorInfo(e))),g}};const x2={kernelName:nS,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{indices:a,values:r,denseShape:o,defaultValue:s}=t;if(1!==o.shape.length)throw new Error(`Dense shape must be a vector, saw:\n         ${o.shape}`);if(2!==a.shape.length)throw new Error(`Indices must be a matrix, saw:\n         ${a.shape}`);if(1!==r.shape.length)throw new Error(`Values must be a vector, saw:\n         ${r.shape}`);if(0!==s.shape.length)throw new Error(`Default value must be a scalar, saw:\n        ${s.shape}`);const i=n.readSync(a.dataId),l=n.readSync(r.dataId),u=n.readSync(o.dataId),c=n.readSync(s.dataId)[0],[p,d,h,f,m]=tK(i,a.shape,a.dtype,l,r.dtype,u,c);return[n.makeTensorInfo(d,a.dtype,p),n.makeTensorInfo([d[0]],r.dtype,h),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map((e=>Number(e))))),n.makeTensorInfo([m.length],a.dtype,new Int32Array(m))]}};const k2={kernelName:aS,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{inputIndices:a,inputShape:r,newShape:o}=t;if(2!==a.shape.length)throw new Error(`Input indices should be a matrix but received shape ${a.shape}`);if(1!==r.shape.length)throw new Error(`Input shape should be a vector but received shape ${r.shape}`);if(1!==o.shape.length)throw new Error(`Target shape should be a vector but received shape ${o.shape}`);const s=Array.from(n.readSync(r.dataId)),i=n.readSync(a.dataId),l=Array.from(n.readSync(o.dataId)),[u,c,p]=nK(i,a.shape,a.dtype,s,l);return[n.makeTensorInfo(c,a.dtype,u),n.makeTensorInfo([p.length],o.dtype,new Int32Array(p))]}};const C2={kernelName:rS,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:a,indices:r,segmentIds:o}=t;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.shape.length)throw new Error(`Indices should be a vector but received shape\n              ${r.shape}`);if(1!==o.shape.length)throw new Error(`Segment ids should be a vector but received shape\n              ${o.shape}`);const s=n.readSync(a.dataId),i=n.readSync(r.dataId),l=n.readSync(o.dataId),[u,c]=aK(s,a.shape,a.dtype,i,l,!0);return n.makeTensorInfo(c,a.dtype,u)}};const E2={kernelName:oS,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n}=e,{data:a,indices:r,segmentIds:o}=t;if(a.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==r.shape.length)throw new Error(`Indices should be a vector but received shape\n             ${r.shape}`);if(1!==o.shape.length)throw new Error(`Segment ids should be a vector but received shape\n             ${o.shape}`);const s=n.readSync(a.dataId),i=n.readSync(r.dataId),l=n.readSync(o.dataId),[u,c]=aK(s,a.shape,a.dtype,i,l);return n.makeTensorInfo(c,a.dtype,u)}};const S2={kernelName:sS,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{sparseIndices:r,sparseValues:o,defaultValue:s}=t,{outputShape:i}=a,{sliceRank:l,numUpdates:u,strides:c,outputSize:p}=mA(0,r,i),d=new a2(u,l,r.shape.length,o.shape.length,c,[p,1],!1),h=n.runWebGLProgram(d,[o,r,s],o.dtype),f=QK({inputs:{x:h},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(h),f}};const $2={kernelName:eS,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{numOrSizeSplits:o,axis:s}=a,i=Zx(s,r.shape)[0],l=zA(r,o,i),u=r.shape.length,c=new Array(u).fill(0),p=r.shape.slice();return l.map((e=>{const t=[...p];t[i]=e;const a=oZ({inputs:{x:r},backend:n,attrs:{begin:c,size:t}});return c[i]+=e,a}))}},T2="return sqrt(x);",I2=HK({opSnippet:T2,packedOpSnippet:T2,cpuKernelImpl:rK}),N2={kernelName:JE,backendName:"webgl",kernelFunc:I2},O2={kernelName:lS,backendName:"webgl",kernelFunc:HK({opSnippet:"return x * x;"})},R2="return (a - b) * (a - b);",A2=jK({opSnippet:R2,packedOpSnippet:R2}),M2={kernelName:iS,backendName:"webgl",kernelFunc:A2};const B2={kernelName:ES,backendName:"webgl",kernelFunc:function({inputs:e,attrs:t,backend:n}){const{x:a}=e,r=`if (isnan(x)) return x;\n    return x > 0.0 ? 1.0 : float(${t.alpha});\n  `,o=new kK(a.shape,r);return n.runWebGLProgram(o,[a],a.dtype)}};class P2{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;const a=n.length,r=aY(n.length),o=aY(n.length);let s="";if(1===a)s="coords * strides + begin";else{let e=0;s=n.map(((t,a)=>(e++,1===n.length?`coords * strides[${a}] + begin[${a}]`:`coords[${e-1}] * strides[${a}] + begin[${a}]`))).join(",")}this.userCode=`\n      ${r} begin = ${r}(${e});\n      ${r} strides = ${r}(${t});\n\n      void main() {\n        ${o} coords = getOutputCoords();\n        setOutput(getX(${s}));\n      }\n    `}}const D2={kernelName:uS,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{begin:o,end:s,strides:i,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:p,shrinkAxisMask:d}=a,{finalShapeSparse:h,finalShape:f,isIdentity:m,sliceDim0:g,isSimpleSlice:v,begin:b,end:y,strides:w}=fI(r.shape,o,s,i,l,u,c,p,d);let x;if(m)x=QK({inputs:{x:r},backend:n,attrs:{shape:f}});else if(g||v){Vx(r.shape.length>=1,(()=>`Input must have rank at least 1, got: ${r.shape.length}`));const e=tI(b,y,w),t=oZ({inputs:{x:r},backend:n,attrs:{begin:b,size:e}});x=QK({inputs:{x:t},backend:n,attrs:{shape:f}}),n.disposeIntermediateTensorInfo(t)}else{if(n.shouldExecuteOnCPU([r])){const e=n.readSync(r.dataId),t=DT(r.shape,r.dtype,e),a=oK(h,t,w,b);x=n.makeTensorInfo(f,r.dtype,a.values)}else{const e=new P2(b,w,h);x=n.runWebGLProgram(e,[r],r.dtype)}}const k=QK({inputs:{x:x},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(x),k}};const F2={kernelName:cS,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{separator:r,nGramWidths:o,leftPad:s,rightPad:i,padWidth:l,preserveShortSequences:u}=a,{data:c,dataSplits:p}=t,d=n.readSync(c.dataId),h=n.readSync(p.dataId),[f,m]=sK(d,h,r,o,s,i,l,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(p.shape,"int32",m)]}};const _2={kernelName:pS,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{skipEmpty:r}=a,{input:o,delimiter:s}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error(`Input must be a vector, got shape: ${o.shape}`);if(0!==s.shape.length)throw new Error(`Delimiter must be a scalar, got shape: ${s.shape}`);const i=n.readSync(o.dataId),l=n.readSync(s.dataId)[0],[u,c,p]=iK(i,l,r),d=c.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(p))]}};const L2={kernelName:dS,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{numBuckets:r}=a,{input:o}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");const s=n.readSync(o.dataId),i=lK(s,r);return n.makeTensorInfo(o.shape,"int32",i)}},z2=HK({opSnippet:"return tan(x);"}),V2={kernelName:fS,backendName:"webgl",kernelFunc:z2},W2=HK({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),H2={kernelName:mS,backendName:"webgl",kernelFunc:W2};class j2{constructor(e,t){this.variableNames=["A"];const n=new Array(e.length);for(let a=0;a<n.length;a++)n[a]=e[a]*t[a];this.outputShape=n,this.rank=n.length;const a=aY(this.rank),r=function(e){const t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(1===t)return`imod(resRC, ${e[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],a=[];for(let t=0;t<e.length;t++)a.push(`imod(${n[t]}, ${e[t]})`);return a.join()}(e);this.userCode=`\n      void main() {\n        ${a} resRC = getOutputCoords();\n        setOutput(getA(${r}));\n      }\n    `}}function U2(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{reps:o}=a;if("string"===r.dtype||r.shape.length>5){const e=n.readSync(r.dataId),t="string"===r.dtype?e.map((e=>r$(e))):e,a=DT(r.shape,r.dtype,t),s=cK(a,o);return n.makeTensorInfo(s.shape,s.dtype,s.values)}const s=new j2(r.shape,o);return n.runWebGLProgram(s,[r],r.dtype)}const G2={kernelName:gS,backendName:"webgl",kernelFunc:U2};class q2{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}class X2{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}}function Y2(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function K2(e){let t=1;for(;t<e;)t*=2;return t}const J2={kernelName:vS,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r}=t,{k:o,sorted:s}=a,i=Ck().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Ck().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=r.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([r])||c<i||o>l){const e=n.readSync(r.dataId),[t,a]=pK(e,u,r.dtype,o,s);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(a.shape,a.dtype,a.values)]}if(0===o)return u[u.length-1]=0,[n.makeTensorInfo(u,r.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(1===c)return[r,FQ({attrs:{shape:u,dtype:"int32",value:0},backend:n})];const p=n.texData.get(r.dataId),d=null!==p&&p.isPacked,h=d?n.unpackTensor(r):r,f=Ux(u)/c,m=QK({inputs:{x:h},attrs:{shape:[f,c]},backend:n});d&&Y2(n,h);const g=K2(o),v=K2(c);let b=null;const y=()=>null===b?[m,m]:[m,b],w=(e,t,a)=>{const r=y(),o=new q2(a),s=[[c],[null===b?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],i=b;b=n.runWebGLProgram(o,r,"int32",s),Y2(n,i)};for(let e=1;e<g;e*=2){const t=2*e;for(let n=e;n>=1;n/=2)w(t,n,[f,v])}for(let e=v;e>g;e/=2){const t=y(),a=new X2([f,e/2]),r=[[c],[null===b?1:0],[g]],o=b;b=n.runWebGLProgram(a,t,"int32",r),Y2(n,o);const s=g/2,i=2*s;for(let e=s;e>=1;e/=2)w(i,e,b.shape)}let x=b;b=oZ({inputs:{x:b},backend:n,attrs:{begin:0,size:[f,o]}}),Y2(n,x);let k=t0({inputs:{x:m,indices:b},backend:n,attrs:{axis:1,batchDims:1}});Y2(n,m);const C=u.slice(0,-1);C.push(o),x=b,b=QK({inputs:{x:b},attrs:{shape:C},backend:n}),Y2(n,x);const E=k;return k=QK({inputs:{x:k},attrs:{shape:C},backend:n}),Y2(n,E),[k,b]}};class Z2{constructor(e,t,n,a,r,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const s="nearest"===n?1:2;let i;switch(a){case"constant":default:i=1;break;case"reflect":i=2;break;case"wrap":i=3;break;case"nearest":i=4}this.userCode=`\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(${i} == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${i} == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${i} == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${t}) {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(${r});\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(${r});\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(${t}));\n                float mapY = mapCoord(inY, float(${e}));\n\n                if (${s} == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        `}}const Q2={kernelName:bS,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{image:r,transforms:o}=t,{interpolation:s,fillMode:i,fillValue:l,outputShape:u}=a,[c,p,d,h]=r.shape,[f,m]=null!=u?u:[p,d],g=new Z2(p,d,s,i,l,[c,f,m,h]);return n.runWebGLProgram(g,[r,o],"float32")}};const e3={kernelName:wS,backendName:"webgl",kernelFunc:function(e){const{inputs:t,attrs:n,backend:a}=e,{axis:r}=n,{x:o}=t;_X(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const s=a.readSync(o.dataId),{outputValues:i,outputShape:l,indices:u}=hK(s,r,o.shape,o.dtype);return[a.makeTensorInfo(l,o.dtype,i),a.makeTensorInfo([u.length],"int32",u)]}};const t3={kernelName:xS,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{value:r}=t;let{axis:o}=a;o<0&&(o+=r.shape.length);const s=r,i=s.shape.length,l=r.shape[o],u=new Array(i-1);let c=0;for(let e=0;e<i;e++)e!==o&&(u[c++]=s.shape[e]);const p=[],d=new Array(i).fill(0),h=s.shape.slice();h[o]=1;const f=new Array(l);for(let e=0;e<f.length;e++){d[o]=e;const t=oZ({inputs:{x:s},backend:n,attrs:{begin:d,size:h}}),a=QK({inputs:{x:t},backend:n,attrs:{shape:u}});f[e]=a,p.push(t)}return p.forEach((e=>n.disposeIntermediateTensorInfo(e))),f}};class n3{constructor(e,t){this.variableNames=["x","segmentIds"];const n=e.windowSize,a=e.batchSize,r=e.inSize,o=e.numSegments,s=o*Math.ceil(r/n);this.outputShape=[a,s];const i=4*Math.floor(n/4),l=n%4,u="\n        sumValue += dot(values, segFilter);\n    ";let c="";r%n>0&&(c=`\n        if (inIdx < 0 || inIdx >= ${r}) {\n          return initializationValue;\n        }\n      `);let p="";r%n>0&&(p=`\n        if (inIdx < 0 || inIdx >= ${r}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ${c}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${p}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${o})) * float(${n}));\n        int currentSeg = int(mod(float(outIdx), float(${o})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${i}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${u}\n        }\n\n        int inIdx = inOffset + ${i};\n        if (${1===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${u}\n        } else if (${2===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${u}\n        } else if (${3===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${u}\n        }\n        setOutput(sumValue);\n      }\n    `}}const a3={kernelName:kS,backendName:"webgl",kernelFunc:function(e){const{inputs:t,backend:n,attrs:a}=e,{x:r,segmentIds:o}=t,{numSegments:s}=a,i=r.shape.length,l=[];let u=0;const c=qN([u],i);let p=r;null!=c&&(p=uJ({inputs:{x:r},backend:n,attrs:{perm:c}}),l.push(p),u=YN(1,i)[0]);const d=eM(p.shape,u,s),h=Ux([p.shape[u]]),f=QK({inputs:{x:p},backend:n,attrs:{shape:[-1,h]}});l.push(f);const m=T$(r.dtype),g=(e,t,a,r,o)=>{const s=e.shape[0],i=e.shape[1],u=QA(i,o),c=new n3({windowSize:u,inSize:i,batchSize:s,numSegments:o},t),p=n.compileAndRun(c,[e,a],r);if(l.push(p),p.shape[1]===o)return p;const d=O1({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),h=U2({inputs:{x:d},backend:n,attrs:{reps:[i/u]}});l.push(d),l.push(h);return g(p,t,h,r,o)},v=QK({inputs:{x:g(f,"unsortedSegmentSum",o,m,s)},backend:n,attrs:{shape:d}});let b=v;if(null!=c){l.push(v);const e=XN(c);b=uJ({inputs:{x:b},backend:n,attrs:{perm:e}})}return l.forEach((e=>n.disposeIntermediateTensorInfo(e))),b}},r3=[R0,M0,dJ,fJ,gJ,bJ,xJ,EJ,SJ,$J,AJ,MJ,PJ,FJ,VJ,LJ,HJ,qJ,GJ,KJ,JJ,ZJ,tZ,iZ,lZ,uZ,fZ,vZ,wZ,CZ,DK,RZ,WZ,HZ,FZ,UZ,GZ,jZ,XZ,KZ,ZZ,nQ,aQ,oQ,pQ,dQ,lQ,fQ,gQ,vQ,yQ,wQ,kQ,EQ,TQ,NQ,AQ,PQ,_Q,zQ,HQ,UQ,XQ,KQ,JQ,QQ,n0,r0,s0,BK,i0,IZ,u0,p0,h0,LK,m0,v0,b0,k0,w0,E0,$0,I0,P0,L0,_0,W0,H0,j0,F0,U0,G0,X0,J0,Q0,l1,ZK,c1,d1,f1,g1,pZ,b1,x1,k1,$1,I1,WK,N1,R1,hZ,n1,M1,F1,P1,eJ,z1,W1,U1,q1,K1,Z1,e2,n2,r2,s2,l2,p2,h2,m2,v2,sZ,i1,y2,w2,x2,k2,C2,E2,S2,$2,N2,O2,M2,B2,D2,F2,_2,L2,o1,lJ,V2,H2,G2,J2,Q2,cJ,e3,t3,a3,w1];for(const e of r3)FS(e);var o3="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==o3&&o3,s3="URLSearchParams"in o3,i3="Symbol"in o3&&"iterator"in Symbol,l3="FileReader"in o3&&"Blob"in o3&&function(){try{return new Blob,!0}catch(e){return!1}}(),u3="FormData"in o3,c3="ArrayBuffer"in o3;if(c3)var p3=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d3=ArrayBuffer.isView||function(e){return e&&p3.indexOf(Object.prototype.toString.call(e))>-1};function h3(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function f3(e){return"string"!=typeof e&&(e=String(e)),e}function m3(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i3&&(t[Symbol.iterator]=function(){return t}),t}function g3(e){this.map={},e instanceof g3?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function v3(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function b3(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function y3(e){var t=new FileReader,n=b3(t);return t.readAsArrayBuffer(e),n}function w3(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function x3(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:l3&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:u3&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:s3&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():c3&&l3&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=w3(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c3&&(ArrayBuffer.prototype.isPrototypeOf(e)||d3(e))?this._bodyArrayBuffer=w3(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):s3&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l3&&(this.blob=function(){var e=v3(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=v3(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(y3)}),this.text=function(){var e,t,n,a=v3(this);if(a)return a;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=b3(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),a=0;a<t.length;a++)n[a]=String.fromCharCode(t[a]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u3&&(this.formData=function(){return this.text().then(E3)}),this.json=function(){return this.text().then(JSON.parse)},this}g3.prototype.append=function(e,t){e=h3(e),t=f3(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},g3.prototype.delete=function(e){delete this.map[h3(e)]},g3.prototype.get=function(e){return e=h3(e),this.has(e)?this.map[e]:null},g3.prototype.has=function(e){return this.map.hasOwnProperty(h3(e))},g3.prototype.set=function(e,t){this.map[h3(e)]=f3(t)},g3.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},g3.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),m3(e)},g3.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),m3(e)},g3.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),m3(e)},i3&&(g3.prototype[Symbol.iterator]=g3.prototype.entries);var k3=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function C3(e,t){if(!(this instanceof C3))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,a,r=(t=t||{}).body;if(e instanceof C3){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new g3(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new g3(t.headers)),this.method=(n=t.method||this.method||"GET",a=n.toUpperCase(),k3.indexOf(a)>-1?a:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(r),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var o=/([?&])_=[^&]*/;if(o.test(this.url))this.url=this.url.replace(o,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function E3(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),a=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(a),decodeURIComponent(r))}})),t}function S3(e,t){if(!(this instanceof S3))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new g3(t.headers),this.url=t.url||"",this._initBody(e)}C3.prototype.clone=function(){return new C3(this,{body:this._bodyInit})},x3.call(C3.prototype),x3.call(S3.prototype),S3.prototype.clone=function(){return new S3(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g3(this.headers),url:this.url})},S3.error=function(){var e=new S3(null,{status:0,statusText:""});return e.type="error",e};var $3=[301,302,303,307,308];S3.redirect=function(e,t){if(-1===$3.indexOf(t))throw new RangeError("Invalid status code");return new S3(null,{status:t,headers:{location:e}})};var T3=o3.DOMException;try{new T3}catch(e){T3=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},T3.prototype=Object.create(Error.prototype),T3.prototype.constructor=T3}function I3(e,t){return new Promise((function(n,a){var r=new C3(e,t);if(r.signal&&r.signal.aborted)return a(new T3("Aborted","AbortError"));var o=new XMLHttpRequest;function s(){o.abort()}o.onload=function(){var e,t,a={status:o.status,statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",t=new g3,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),a=n.shift().trim();if(a){var r=n.join(":").trim();t.append(a,r)}})),t)};a.url="responseURL"in o?o.responseURL:a.headers.get("X-Request-URL");var r="response"in o?o.response:o.responseText;setTimeout((function(){n(new S3(r,a))}),0)},o.onerror=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},o.ontimeout=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},o.onabort=function(){setTimeout((function(){a(new T3("Aborted","AbortError"))}),0)},o.open(r.method,function(e){try{return""===e&&o3.location.href?o3.location.href:e}catch(t){return e}}(r.url),!0),"include"===r.credentials?o.withCredentials=!0:"omit"===r.credentials&&(o.withCredentials=!1),"responseType"in o&&(l3?o.responseType="blob":c3&&r.headers.get("Content-Type")&&-1!==r.headers.get("Content-Type").indexOf("application/octet-stream")&&(o.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof g3?r.headers.forEach((function(e,t){o.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){o.setRequestHeader(e,f3(t.headers[e]))})),r.signal&&(r.signal.addEventListener("abort",s),o.onreadystatechange=function(){4===o.readyState&&r.signal.removeEventListener("abort",s)}),o.send(void 0===r._bodyInit?null:r._bodyInit)}))}I3.polyfill=!0,o3.fetch||(o3.fetch=I3,o3.Headers=g3,o3.Request=C3,o3.Response=S3);var N3={setup:function(){var e,t,n,a=Ct(""),r=Ct(null),o=Ct(!1),s=Ct(null),i=Ct(null),l=Ct(!1),u=Ct(!1),c=function(){var a=Rx(Mx().mark((function a(){var u,c;return Mx().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=2;break}return a.abrupt("return");case 2:return i.value.width=s.value.videoWidth,i.value.height=s.value.videoHeight,i.value.getContext("2d").drawImage(s.value,0,0,i.value.width,i.value.height),o.value=!1,r.value=!1,l.value=!0,t=ZT(i.value.getContext("2d").getImageData(0,0,i.value.width,i.value.height)).resizeNearestNeighbor([224,224]).expandDims().toFloat(),a.next=11,e.predict(t).data();case 11:u=a.sent,c=AI(u).dataSync(),r.value=n.labels[c],setTimeout((function(){l.value=!1}),1e3),o.value=!0;case 16:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),p={audio:!1,video:{facingMode:"environment",width:{min:480,ideal:480,max:480,exact:480},height:{min:480,ideal:480,max:480,exact:480}}},d=function(e){u.value=!0,s.value.srcObject=e},h=function(e){alert(e.message),u.value=!0,console.log("navigator.MediaDevices.getUserMedia error: ",e.message,e.name)},f=function(){var e=navigator.userAgent||navigator.vendor||window.opera;return!!/android/i.test(e)},m=function(){var e=navigator.userAgent||navigator.vendor||window.opera;return!!/iPad|iPhone|iPod/i.test(e)};function g(e){return{quality:50,destinationType:Camera.DestinationType.DATA_URL,sourceType:e,encodingType:Camera.EncodingType.JPEG,mediaType:Camera.MediaType.PICTURE,allowEdit:!1,correctOrientation:!0}}function v(e){return b.apply(this,arguments)}function b(){return b=Rx(Mx().mark((function a(o){var s,i,l;return Mx().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(s=document.getElementById("imageFile")).src="data:image/jpeg;base64,"+o,t=ZT(s).resizeNearestNeighbor([224,224]).expandDims().toFloat(),a.next=5,e.predict(t).data();case 5:i=a.sent,l=AI(i).dataSync(),r.value=n.labels[l];case 8:case"end":return a.stop()}}),a)}))),b.apply(this,arguments)}function y(){return y=Rx(Mx().mark((function a(){var o,s,i;return Mx().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o=document.getElementById("canvas"),window.plugin.CanvasCamera.initialize(o),s={canvas:{width:480,height:480},capture:{width:480,height:480},use:"file",fps:30,hasThumbnail:!1,cameraFacing:"back",onAfterDraw:function(e){console.log("afterDraw",e)}},i=5e3,f()&&(i=1e4),setInterval(Rx(Mx().mark((function a(){var o,s,i;return Mx().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if((o=document.getElementById("imageFile"))&&o.src){a.next=3;break}return a.abrupt("return");case 3:return t=ZT(o).resizeNearestNeighbor([224,224]).expandDims().toFloat(),a.next=6,e.predict(t).data();case 6:s=a.sent,i=AI(s).dataSync(),r.value=n.labels[i];case 9:case"end":return a.stop()}}),a)}))),i),window.plugin.CanvasCamera.start(s,function(){var e=Rx(Mx().mark((function e(t){return Mx().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("[CanvasCamera start]","error",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){var t="";t=f()?"file://"+e.output.images.fullsize.file:e.output.images.fullsize.file,window.resolveLocalFileSystemURL(t,function(){var e=Rx(Mx().mark((function e(t){return Mx().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.file((function(e){var t=new FileReader;t.onloadend=Rx(Mx().mark((function e(){var n;return Mx().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=new Blob([new Uint8Array(t.result)],{type:"image/png"}),document.getElementById("imageFile").src=window.URL.createObjectURL(n);case 3:case"end":return e.stop()}}),e)}))),t.readAsArrayBuffer(e)}),(function(e){console.log("read",e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){console.log(e)}))}));case 7:case"end":return a.stop()}}),a)}))),y.apply(this,arguments)}return Cn(Rx(Mx().mark((function t(){var a;return Mx().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f()&&(window.fetch=I3),t.next=3,null==(r=void 0)&&(r={}),cL("static/model/model.json",r);case 3:return e=t.sent,t.next=6,fetch("static/model/metadata.json");case 6:return a=t.sent,t.next=9,a.json();case 9:n=t.sent,i.value.width=480,i.value.height=480,!f()&&!m()&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(p).then(d).catch(h):u.value=!0,o.value=!0;case 14:case"end":return t.stop()}var r}),t)})))),$n((function(){e&&e.dispose(),t&&t.dispose()})),document.addEventListener("deviceready",(function(){console.log("device is ready")}),!1),{image:a,result:r,loaded:o,videoRef:s,canvasRef:i,runPrediction:c,inPrediction:l,cameraLoaded:u,openCamera:function(){try{var e=g(Camera.PictureSourceType.CAMERA);navigator.camera.getPicture((function(e){v(e)}),(function(e){console.debug("Unable to take picture: "+e,"app")}),e)}catch(e){console.error("Something went wrong.")}},openFilePicker:function(){try{var e=g(Camera.PictureSourceType.SAVEDPHOTOALBUM);navigator.camera.getPicture((function(e){v(e)}),(function(e){console.debug("Unable to obtain picture: "+e,"app")}),e)}catch(e){console.error("Something went wrong.")}},canvasCamera:function(){return y.apply(this,arguments)},isAndroid:f,isIphone:m}}},O3=n(744);var R3=(0,O3.Z)(N3,[["render",function(e,t,n,a,r,o){var s=ha("f7-nav-title"),i=ha("f7-navbar"),l=ha("f7-icon"),u=ha("f7-button"),c=ha("f7-col"),p=ha("f7-row"),d=ha("f7-block"),h=ha("f-card"),f=ha("f7-preloader"),m=ha("f7-page");return Ea(),Na(m,{name:"home"},{default:Ut((function(){return[Da(i,{sliding:!1},{default:Ut((function(){return[Da(s,{sliding:""},{default:Ut((function(){return[wx]})),_:1})]})),_:1}),na(Da(d,{strong:""},{default:Ut((function(){return[Da(p,{class:"justify-content-center"},{default:Ut((function(){return[na(Da(c,null,{default:Ut((function(){return[Da(u,{fill:"",disabled:!a.loaded,raised:"",onClick:a.runPrediction},{default:Ut((function(){return[Da(l,{f7:"camera",size:36})]})),_:1},8,["disabled","onClick"])]})),_:1},512),[[Ao,!a.isAndroid()&&!a.isIphone()]]),na(Da(c,null,{default:Ut((function(){return[Da(u,{fill:"",disabled:!a.loaded,raised:"",onClick:a.openCamera},{default:Ut((function(){return[Da(l,{f7:"camera_circle",size:36})]})),_:1},8,["disabled","onClick"])]})),_:1},512),[[Ao,a.isAndroid()||a.isIphone()]]),na(Da(c,null,{default:Ut((function(){return[Da(u,{fill:"",disabled:!a.loaded,raised:"",onClick:a.openFilePicker},{default:Ut((function(){return[Da(l,{f7:"folder",size:36})]})),_:1},8,["disabled","onClick"])]})),_:1},512),[[Ao,a.isAndroid()||a.isIphone()]]),na(Da(c,null,{default:Ut((function(){return[Da(u,{fill:"",disabled:!a.loaded,raised:"",onClick:a.canvasCamera},{default:Ut((function(){return[Da(l,{f7:"camera_viewfinder",size:36})]})),_:1},8,["disabled","onClick"])]})),_:1},512),[[Ao,a.isAndroid()||a.isIphone()]])]})),_:1}),a.result?(Ea(),Na(p,{key:0},{default:Ut((function(){return[Da(c,{class:"predict-result"},{default:Ut((function(){return[Pa("p",xx,g(a.result),1)]})),_:1})]})),_:1})):Wa("",!0)]})),_:1},512),[[Ao,a.cameraLoaded]]),Da(d,null,{default:Ut((function(){return[na(Da(p,{class:"justify-content-center"},{default:Ut((function(){return[Da(h,{class:"predict-image"},{default:Ut((function(){return[na(Pa("div",kx,[Cx,Pa("video",Ex,null,512)],512),[[Ao,!a.isAndroid()&&!a.isIphone()]]),na(Pa("div",Sx,$x,512),[[Ao,a.isAndroid()||a.isIphone()]]),na(Pa("div",Tx,[Ix,Pa("canvas",Nx,null,512)],512),[[Ao,!a.isAndroid()&&!a.isIphone()]])]})),_:1})]})),_:1},512),[[Ao,a.cameraLoaded]]),na(Da(p,null,{default:Ut((function(){return[Da(c,null,{default:Ut((function(){return[Da(f,{size:42})]})),_:1})]})),_:1},512),[[Ao,!a.cameraLoaded]])]})),_:1})]})),_:1})}],["__scopeId","data-v-4c11f1e6"]]),A3=Pa("p",null,"Sorry",-1),M3=Pa("p",null,"Requested content not found.",-1);var B3={};var P3=[{path:"/",component:R3},{path:"(.*)",component:(0,O3.Z)(B3,[["render",function(e,t,n,a,r,o){var s=ha("f7-navbar"),i=ha("f7-block"),l=ha("f7-page");return Ea(),Na(l,null,{default:Ut((function(){return[Da(s,{title:"Not found","back-link":"Back"}),Da(i,{strong:""},{default:Ut((function(){return[A3,M3]})),_:1})]})),_:1})}]])}],D3={setup:function(){var e={name:"framework7-vue-minimal",theme:"auto",routes:P3,navbar:{mdCenterTitle:!0}};function t(){console.log("Hello World!")}return Cn((function(){sg((function(){t()}))})),{f7params:e,text:Ct("Right panel content goes here"),helloWorld:t}}};var F3=(0,O3.Z)(D3,[["render",function(e,t,n,a,r,o){var s=ha("f7-navbar"),i=ha("f7-block"),l=ha("f7-page"),u=ha("f7-view"),c=ha("f7-panel"),d=ha("f7-app");return Ea(),Na(d,function(e){if(!e)return null;let{class:t,style:n}=e;return t&&!M(t)&&(e.class=m(t)),n&&(e.style=p(n)),e}(_a(a.f7params)),{default:Ut((function(){return[Da(c,{right:"",reveal:"","theme-dark":""},{default:Ut((function(){return[Da(u,null,{default:Ut((function(){return[Da(l,null,{default:Ut((function(){return[Da(s,{title:"Right Panel"}),Da(i,null,{default:Ut((function(){return[za(g(a.text),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Da(u,{main:"",class:"safe-areas",url:"/"})]})),_:1},16)}]]);Vm.use(bx);var _3=((...e)=>{const t=Do().createApp(...e);const{mount:n}=t;return t.mount=e=>{const a=Fo(e);if(!a)return;const r=t._component;A(r)||r.render||r.template||(r.template=a.innerHTML),a.innerHTML="";const o=n(a,!1,a instanceof SVGElement);return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),o},t})(F3);!function(e){e.component("f7-accordion-content",xg),e.component("f7-accordion-item",Cg),e.component("f7-accordion-toggle",Sg),e.component("f7-accordion",Tg),e.component("f7-actions-button",Rg),e.component("f7-actions-group",Mg),e.component("f7-actions-label",Pg),e.component("f7-actions",_g),e.component("f7-app",Wg),e.component("f7-appbar",jg),e.component("f7-area-chart",Xg),e.component("f7-badge",Jg),e.component("f7-block-footer",Qg),e.component("f7-block-header",tv),e.component("f7-block-title",av),e.component("f7-block",sv),e.component("f7-button",Sv),e.component("f7-card-content",Tv),e.component("f7-card-footer",Nv),e.component("f7-card-header",Rv),e.component("f7-card",Mv),e.component("f7-checkbox",Dv),e.component("f7-chip",Lv),e.component("f7-col",Wv),e.component("f7-fab-backdrop",jv),e.component("f7-fab-button",qv),e.component("f7-fab-buttons",Yv),e.component("f7-fab",Jv),e.component("f7-gauge",Qv),e.component("f7-icon",wv),e.component("f7-input",ub),e.component("f7-link",db),e.component("f7-list-button",fb),e.component("f7-list-group",gb),e.component("f7-list-index",bb),e.component("f7-list-input",wb),e.component("f7-list-item-cell",kb),e.component("f7-list-item-row",Eb),e.component("f7-list-item",$b),e.component("f7-list",Ib),e.component("f7-login-screen-title",Ob),e.component("f7-login-screen",Ab),e.component("f7-menu-dropdown-item",Bb),e.component("f7-menu-dropdown",Db),e.component("f7-menu-item",Lb),e.component("f7-menu",Wb),e.component("f7-message",Zb),e.component("f7-messagebar-attachment",ey),e.component("f7-messagebar-attachments",ny),e.component("f7-messagebar-sheet-image",oy),e.component("f7-messagebar-sheet-item",iy),e.component("f7-messagebar-sheet",uy),e.component("f7-messagebar",py),e.component("f7-messages-title",hy),e.component("f7-messages",my),e.component("f7-nav-left",vy),e.component("f7-nav-right",yy),e.component("f7-nav-title-large",ky),e.component("f7-nav-title",Sy),e.component("f7-navbar",Oy),e.component("f7-page-content",Dy),e.component("f7-page",_y),e.component("f7-panel",Vy),e.component("f7-photo-browser",Hy),e.component("f7-pie-chart",jy),e.component("f7-popover",Xy),e.component("f7-popup",Ky),e.component("f7-preloader",bv),e.component("f7-progressbar",Zy),e.component("f7-radio",tw),e.component("f7-range",rb),e.component("f7-routable-modals",zg),e.component("f7-row",ow),e.component("f7-searchbar",cw),e.component("f7-segmented",hw),e.component("f7-sheet",mw),e.component("f7-skeleton-avatar",bw),e.component("f7-skeleton-block",yw),e.component("f7-skeleton-image",xw),e.component("f7-skeleton-text",kw),e.component("f7-stepper",$w),e.component("f7-subnavbar",Ow),e.component("f7-swipeout-actions",Aw),e.component("f7-swipeout-button",Bw),e.component("f7-swiper-slide",Ww),e.component("f7-swiper",Jw),e.component("f7-tab",Qw),e.component("f7-tabs",tx),e.component("f7-text-editor",ib),e.component("f7-toggle",nb),e.component("f7-toolbar",rx),e.component("f7-treeview-item",cx),e.component("f7-treeview",dx),e.component("f7-use-icon",xv),e.component("f7-view",mx),e.component("f7-views",vx)}(_3),_3.mount("#app")}()}();
//# sourceMappingURL=app.js.map